import{c as fe,r as n,g as it,p as He,j as e,L as Be,C as We,a as Oe,S as ne,Z as Ze,b as ut,d as dt,e as ht,X as xt,M as me,T as qe,P as gt}from"./index-DgubwuNS.js";import{Z as Ke}from"./zoom-out-BxRSnKpq.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=fe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=fe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=fe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);He.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";function pt({pdfUrl:$,targetPage:X,marker:l,onCapture:re,onEditMarker:V,onDeleteMarker:_,onAddMarker:ae,preloadedPDF:le,preloadedText:pe}){var Ae;const Y=n.useRef(null),m=n.useRef(null),ce=n.useRef(null),ye=n.useRef(null),P=n.useRef(null),M=n.useRef(!1),E=typeof window<"u"&&(window.matchMedia("(max-width: 1024px)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0),[v,be]=n.useState(null),[x,j]=n.useState(1),[w,we]=n.useState(0),[g,G]=n.useState(()=>{const t=localStorage.getItem("pdf-viewer-zoom");if(t){const s=parseFloat(t);if(!isNaN(s)&&s>=.25&&s<=5)return s}return E?.5:1}),[A,H]=n.useState(!0),[je,Ne]=n.useState(null),[k,Q]=n.useState(!1),[ve,Ce]=n.useState(""),[oe,Se]=n.useState(!1),U=n.useRef(null),Pe=n.useRef(E?.5:1),[L,ie]=n.useState(!1),[B,Ee]=n.useState({x:0,y:0}),C=n.useRef(null),[b,Re]=n.useState(""),[h,J]=n.useState([]),[S,F]=n.useState(-1),[ee,Te]=n.useState(!1),[R,W]=n.useState(!1),[ue,O]=n.useState([]),[te,Me]=n.useState(new Map),Z=n.useRef(null);n.useEffect(()=>{if(!$)return;const t=it();if(le||t&&t.url===$){const r=le||t.pdf,u=pe||(t==null?void 0:t.textContent);console.log("[PDFViewer] Usando PDF precargado âš¡"),be(r),we(r.numPages),u&&u.size>0?Me(u):ke(r),H(!1);return}H(!0),Ne(null),He.getDocument($).promise.then(r=>{be(r),we(r.numPages),H(!1),ke(r)}).catch(r=>{console.error("Error al cargar PDF:",r),Ne("No se pudo cargar el manual PDF"),H(!1)})},[$,le,pe]);const ke=async t=>{const s=new Map;for(let r=1;r<=t.numPages;r++)try{const d=(await(await t.getPage(r)).getTextContent()).items.filter(i=>"str"in i&&"transform"in i).map(i=>({str:i.str,transform:i.transform}));let f="",o=-1;for(const i of d){const a=i.transform[4];o!==-1&&a-o>10&&(f+=" "),f+=i.str,o=a+i.str.length*5}s.set(r,{text:f,items:d})}catch(u){console.error(`Error cargando texto de pÃ¡gina ${r}:`,u)}Me(s)};n.useEffect(()=>{const t=s=>{(s.ctrlKey||s.metaKey)&&s.key==="f"&&(s.preventDefault(),W(!0)),s.key==="Escape"&&R&&W(!1)};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[R]),n.useEffect(()=>{if(!A&&v&&X&&X>0&&w>0&&X<=w){const t=setTimeout(()=>{j(X)},100);return()=>clearTimeout(t)}},[A,v,X,w]);const I=n.useRef(null),Le=n.useRef(0),de=n.useCallback(async t=>{!v||!Y.current||(I.current&&clearTimeout(I.current),I.current=setTimeout(async()=>{var s,r,u;if(!(M.current&&Le.current===t)){if(P.current){try{P.current.cancel(),await new Promise(c=>setTimeout(c,50))}catch{}P.current=null}if(M.current){I.current=setTimeout(()=>de(t),100);return}M.current=!0,Le.current=t;try{const c=await v.getPage(t),d=Y.current;if(!d){M.current=!1;return}const f=d.getContext("2d");if(!f){M.current=!1;return}const o=c.getViewport({scale:g});f.clearRect(0,0,d.width,d.height),d.height=o.height,d.width=o.width,m.current&&(m.current.height=o.height,m.current.width=o.width);const i=c.render({canvasContext:f,viewport:o});if(P.current=i,await i.promise,l&&l.pagina===t&&m.current){const a=m.current.getContext("2d");if(a){if(a.clearRect(0,0,m.current.width,m.current.height),a.fillStyle=l.color||"rgba(239, 68, 68, 0.4)",l.forma==="poligono"&&l.puntos&&l.puntos.length>=3){const y=l.puntos.map(p=>({x:p.x*o.width,y:p.y*o.height}));a.beginPath(),a.moveTo(y[0].x,y[0].y);for(let p=1;p<y.length;p++)a.lineTo(y[p].x,y[p].y);a.closePath(),a.fill(),l.sinBorde||(a.strokeStyle=((s=l.color)==null?void 0:s.replace("0.4","0.8"))||"#ef4444",a.lineWidth=2,a.stroke())}else if(l.coordenadas){const{x:y,y:p,width:N,height:T}=l.coordenadas,ge=y<=1&&p<=1&&N<=1&&T<=1;let q,K,z,D;if(ge?(q=y*o.width,K=p*o.height,z=N*o.width,D=T*o.height):(q=y*g,K=p*g,z=N*g,D=T*g),l.forma==="circulo"){const ct=q+z/2,ot=K+D/2;a.beginPath(),a.ellipse(ct,ot,z/2,D/2,0,0,2*Math.PI),a.fill(),l.sinBorde||(a.strokeStyle=((r=l.color)==null?void 0:r.replace("0.4","0.8"))||"#ef4444",a.lineWidth=2,a.stroke())}else a.fillRect(q,K,z,D),l.sinBorde||(a.strokeStyle=((u=l.color)==null?void 0:u.replace("0.4","0.8"))||"#ef4444",a.lineWidth=2,a.strokeRect(q,K,z,D))}}}else if(m.current){const a=m.current.getContext("2d");a&&a.clearRect(0,0,m.current.width,m.current.height)}P.current=null}catch(c){if(c&&typeof c=="object"&&"name"in c&&c.name==="RenderingCancelledException")return}finally{M.current=!1}}},30))},[v,g,l]);n.useEffect(()=>{de(x)},[x,de]),n.useEffect(()=>()=>{if(I.current&&clearTimeout(I.current),P.current)try{P.current.cancel()}catch{}},[]);const Fe=()=>{x>1&&j(t=>t-1)},Ie=()=>{x<w&&j(t=>t+1)},he=.25,xe=5,se=.25,ze=()=>{G(t=>{const s=Math.min(t+se,xe);return localStorage.setItem("pdf-viewer-zoom",String(s)),s})},De=()=>{G(t=>{const s=Math.max(t-se,he);return localStorage.setItem("pdf-viewer-zoom",String(s)),s})};n.useEffect(()=>{const t=ye.current;if(!t||A)return;const s=r=>{r.preventDefault(),r.stopPropagation();const u=r.deltaY>0?-se:se;G(c=>{const d=Math.min(xe,Math.max(he,c+u));return localStorage.setItem("pdf-viewer-zoom",String(d)),d})};return t.addEventListener("wheel",s,{passive:!1}),()=>{t.removeEventListener("wheel",s)}},[A]);const Qe=n.useCallback(t=>{if(t.touches.length===2){const s=t.touches[0],r=t.touches[1],u=Math.hypot(r.clientX-s.clientX,r.clientY-s.clientY);U.current=u,Pe.current=g}},[g]),Ue=n.useCallback(t=>{if(t.touches.length===2&&U.current!==null){t.preventDefault();const s=t.touches[0],r=t.touches[1],c=Math.hypot(r.clientX-s.clientX,r.clientY-s.clientY)/U.current,d=Math.min(Math.max(Pe.current*c,he),xe);G(d),localStorage.setItem("pdf-viewer-zoom",String(d))}},[]),Je=n.useCallback(()=>{U.current=null},[]);n.useEffect(()=>{Ee({x:0,y:0})},[x,g]);const et=n.useCallback(t=>{t.button===0&&(ie(!0),C.current={x:t.clientX,y:t.clientY,panX:B.x,panY:B.y},t.preventDefault())},[B]),tt=n.useCallback(t=>{if(!L||!C.current)return;const s=t.clientX-C.current.x,r=t.clientY-C.current.y;Ee({x:C.current.panX+s,y:C.current.panY+r})},[L]),st=n.useCallback(()=>{ie(!1),C.current=null},[]),nt=n.useCallback(()=>{L&&(ie(!1),C.current=null)},[L]),$e=()=>{const t=parseInt(ve);!isNaN(t)&&t>=1&&t<=w&&(j(t),Ce(""))},Xe=n.useCallback(t=>{if(!t.trim()||t.length<1){J([]),F(-1),O([]);return}Te(!0);const s=[],r=t.toLowerCase().trim(),u=r.replace(/\s+/g,"");te.forEach((c,d)=>{const f=c.text.toLowerCase(),o=f.replace(/\s+/g,"");let i=!1,a=0;if(f.includes(r)&&(i=!0,a=(f.match(new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length),!i&&u.length>=2&&o.includes(u)&&(i=!0,a=(o.match(new RegExp(u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length),i){const y=f.indexOf(r)!==-1?f.indexOf(r):o.indexOf(u),p=Math.max(0,y-30),N=Math.min(c.text.length,y+t.length+30),T=(p>0?"...":"")+c.text.substring(p,N)+(N<c.text.length?"...":"");s.push({pageNum:d,text:T,matches:a})}}),s.sort((c,d)=>d.matches-c.matches),J(s),F(s.length>0?0:-1),Te(!1),s.length>0&&j(s[0].pageNum)},[te]);n.useEffect(()=>(Z.current&&clearTimeout(Z.current),b.length>=1?Z.current=setTimeout(()=>{Xe(b)},150):(J([]),O([])),()=>{Z.current&&clearTimeout(Z.current)}),[b,Xe]),n.useEffect(()=>{if(!m.current||!v||!b.trim()){O([]);return}(async()=>{if(!te.get(x))return;const r=await v.getPage(x),u=r.getViewport({scale:g}),c=await r.getTextContent(),d=b.toLowerCase().trim(),f=[];c.items.forEach(o=>{if(!("str"in o)||!("transform"in o))return;const i=o;if(i.str.toLowerCase().includes(d)){const[,,,,a,y]=i.transform,p=i.width||i.str.length*8,N=i.height||12,T=a*g,ge=u.height-y*g-N*g;f.push({x:T,y:ge,width:p*g,height:N*g*1.2})}}),O(f)})()},[x,b,v,g,te]),n.useEffect(()=>{if(!m.current)return;const t=m.current.getContext("2d");t&&((!l||l.pagina!==x)&&t.clearRect(0,0,m.current.width,m.current.height),ue.length>0&&(t.fillStyle="rgba(255, 255, 0, 0.4)",t.strokeStyle="rgba(255, 200, 0, 0.8)",t.lineWidth=2,ue.forEach(s=>{t.fillRect(s.x,s.y,s.width,s.height),t.strokeRect(s.x,s.y,s.width,s.height)})))},[ue,l,x]);const rt=()=>{if(h.length===0)return;const t=(S+1)%h.length;F(t),j(h[t].pageNum)},at=()=>{if(h.length===0)return;const t=S<=0?h.length-1:S-1;F(t),j(h[t].pageNum)},lt=()=>{if(!Y.current||!re)return;const t=Y.current.toDataURL("image/png");re(t,x),Se(!1)},Ye=()=>{if(E)Q(t=>!t);else{if(!ce.current)return;if(document.fullscreenElement){const t=document;t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.msExitFullscreen&&t.msExitFullscreen(),Q(!1)}else{const t=ce.current;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),Q(!0)}}};return n.useEffect(()=>{const t=()=>{E||Q(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t),()=>{document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t)}},[E]),$?A?e.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-gray-100",children:[e.jsx(Be,{className:"w-8 h-8 text-primary-600 animate-spin mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Cargando manual..."})]}):je?e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100 text-red-500",children:e.jsx("p",{children:je})}):e.jsxs("div",{ref:ce,className:`h-full flex flex-col bg-gray-800 ${k&&E?"fixed inset-0 z-[9999] w-screen h-screen":""}`,children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between px-4 py-2 bg-gray-900 text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Fe,disabled:x<=1,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm",children:[x," / ",w]}),e.jsx("button",{onClick:Ie,disabled:x>=w,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",value:ve,onChange:t=>Ce(t.target.value),onKeyDown:t=>t.key==="Enter"&&$e(),placeholder:"PÃ¡g.",className:"w-16 px-2 py-1 text-sm bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400",min:"1",max:w}),e.jsx("button",{onClick:$e,className:"p-2 rounded hover:bg-gray-700",title:"Ir a pÃ¡gina",children:e.jsx(ne,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:De,className:"p-2 rounded hover:bg-gray-700",title:"Alejar",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm w-12 text-center",children:[Math.round(g*100),"%"]}),e.jsx("button",{onClick:ze,className:"p-2 rounded hover:bg-gray-700",title:"Acercar",children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-gray-700 mx-2"}),e.jsx("button",{onClick:()=>W(!R),className:`p-2 rounded transition-colors ${R?"bg-primary-600":"hover:bg-gray-700"}`,title:"Buscar texto en PDF (Ctrl+F)",children:e.jsx(ne,{className:"w-5 h-5"})}),re&&e.jsx("button",{onClick:()=>Se(!oe),className:`p-2 rounded transition-colors ${oe?"bg-primary-600":"hover:bg-gray-700"}`,title:"Capturar imagen",children:e.jsx(ut,{className:"w-5 h-5"})}),e.jsx("button",{onClick:Ye,className:"p-2 rounded hover:bg-gray-700",title:k?"Salir de pantalla completa":"Pantalla completa",children:k?e.jsx(_e,{className:"w-5 h-5"}):e.jsx(Ve,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"lg:hidden flex flex-col bg-gray-900 text-white",children:e.jsxs("div",{className:"flex items-center justify-between px-2 py-2 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:Fe,disabled:x<=1,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50",children:e.jsx(We,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-sm font-medium px-2",children:[x," / ",w]}),e.jsx("button",{onClick:Ie,disabled:x>=w,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50",children:e.jsx(Oe,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:De,className:"p-2 rounded hover:bg-gray-700",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("span",{className:"text-xs w-10 text-center",children:[Math.round(g*100),"%"]}),e.jsx("button",{onClick:ze,className:"p-2 rounded hover:bg-gray-700",children:e.jsx(Ze,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-px h-6 bg-gray-700 mx-1"}),e.jsx("button",{onClick:()=>W(!R),className:`p-2 rounded transition-colors ${R?"bg-primary-600 text-white":"hover:bg-gray-700"}`,title:"Buscar en PDF",children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsx("button",{onClick:Ye,className:`p-2.5 rounded-lg transition-colors ${k?"bg-primary-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,title:k?"Salir":"Pantalla completa",children:k?e.jsx(_e,{className:"w-5 h-5"}):e.jsx(Ve,{className:"w-5 h-5"})})]})]})}),R&&e.jsxs("div",{className:"px-4 py-3 bg-gray-800 border-b border-gray-700 relative",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:b,onChange:t=>Re(t.target.value),placeholder:"Buscar en el PDF... (ej: 200, 1-0201, Baader)",className:"w-full pl-10 pr-4 py-2.5 text-sm bg-gray-700 rounded-l-lg border border-gray-600 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),ee&&e.jsx(Be,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-400 animate-spin"})]}),b&&!ee&&e.jsx("div",{className:`px-3 py-2.5 text-sm border-y border-gray-600 ${h.length>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:h.length>0?`${h.length} pÃ¡g${h.length>1?"s":""}`:"0"}),h.length>0&&e.jsxs("div",{className:"flex border border-gray-600 border-l-0 rounded-r-lg overflow-hidden",children:[e.jsx("button",{onClick:at,className:"p-2.5 bg-gray-700 hover:bg-gray-600 text-white border-r border-gray-600",title:"Anterior (â†‘)",children:e.jsx(dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:rt,className:"p-2.5 bg-gray-700 hover:bg-gray-600 text-white",title:"Siguiente (â†“)",children:e.jsx(ht,{className:"w-4 h-4"})})]}),!h.length&&b&&!ee&&e.jsx("div",{className:"px-3 py-2.5 bg-gray-700 rounded-r-lg border border-l-0 border-gray-600",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"â€”"})})]}),b&&h.length>0&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"p-2 text-xs text-gray-400 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("span",{children:["ðŸ“„ ",h.length," pÃ¡gina",h.length>1?"s":""," con resultados"]}),e.jsx("span",{className:"text-yellow-400",children:"ðŸ” Resaltado activo"})]}),h.map((t,s)=>e.jsxs("button",{onClick:()=>{F(s),j(t.pageNum)},className:`w-full text-left px-3 py-2 text-sm border-b border-gray-700 last:border-b-0 transition-colors ${s===S?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"font-medium",children:["PÃ¡gina ",t.pageNum]}),t.matches>1&&e.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${s===S?"bg-primary-700":"bg-gray-600"}`,children:[t.matches," coincidencias"]})]}),e.jsx("p",{className:"text-xs mt-1 opacity-70 truncate",children:t.text})]},`${t.pageNum}-${s}`))]}),b&&h.length===0&&!ee&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50 p-4 text-center",children:[e.jsxs("p",{className:"text-yellow-400 text-sm",children:['âš ï¸ No se encontrÃ³ "',b,'"']}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Prueba con otro tÃ©rmino o revisa la ortografÃ­a"})]})]}),e.jsx("button",{onClick:()=>{W(!1),Re(""),J([]),F(-1),O([])},className:"p-2 text-gray-400 hover:text-white rounded hover:bg-gray-700",title:"Cerrar bÃºsqueda (Esc)",children:e.jsx(xt,{className:"w-5 h-5"})})]}),h.length>0&&S>=0&&e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-400",children:["Resultado ",S+1," de ",h.length," â€¢ PÃ¡gina ",(Ae=h[S])==null?void 0:Ae.pageNum]}),e.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-400/40 border border-yellow-500 rounded-sm"}),"Texto resaltado en amarillo"]})]})]}),oe&&e.jsxs("div",{className:"px-4 py-2 bg-primary-600 text-white text-sm flex items-center justify-between",children:[e.jsx("span",{children:"Modo captura activo - La pÃ¡gina actual serÃ¡ capturada como imagen"}),e.jsxs("button",{onClick:lt,className:"px-4 py-1 bg-white text-primary-600 rounded font-medium hover:bg-gray-100",children:["Capturar pÃ¡gina ",x]})]}),(l||ae)&&e.jsx("div",{className:"px-4 py-2 bg-gray-700 text-white text-sm flex items-center justify-between",children:l&&l.pagina===x?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-400 font-medium",children:"Marcador en esta pÃ¡gina"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[V&&e.jsxs("button",{onClick:()=>V(l),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),"Editar"]}),_&&e.jsxs("button",{onClick:()=>{confirm("Â¿Eliminar este marcador?")&&_(l)},className:"px-3 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),"Eliminar"]})]})]}):l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-yellow-400"}),e.jsxs("span",{className:"text-yellow-400",children:["Marcador en pÃ¡gina ",l.pagina]}),e.jsx("button",{onClick:()=>j(l.pagina),className:"px-2 py-0.5 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700",children:"Ir al marcador"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[V&&e.jsxs("button",{onClick:()=>V(l),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),"Editar"]}),_&&e.jsxs("button",{onClick:()=>{confirm("Â¿Eliminar este marcador?")&&_(l)},className:"px-3 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 flex items-center gap-1",children:[e.jsx(qe,{className:"w-3 h-3"}),"Eliminar"]})]})]}):ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-400",children:"Sin marcador"})]}),e.jsxs("button",{onClick:ae,className:"px-3 py-1 bg-green-600 text-white rounded text-xs font-medium hover:bg-green-700 flex items-center gap-1",children:[e.jsx(gt,{className:"w-3 h-3"}),"Agregar marcador"]})]}):null}),e.jsx("div",{ref:ye,className:"flex-1 overflow-hidden pdf-container flex items-center justify-center",onTouchStart:Qe,onTouchMove:Ue,onTouchEnd:Je,onMouseDown:et,onMouseMove:tt,onMouseUp:st,onMouseLeave:nt,style:{cursor:L?"grabbing":"grab",userSelect:"none"},children:e.jsxs("div",{className:"relative",style:{transform:`translate(${B.x}px, ${B.y}px)`,transition:L?"none":"transform 0.1s ease-out"},children:[e.jsx("canvas",{ref:Y,className:"pdf-page bg-white shadow-lg block"}),e.jsx("canvas",{ref:m,className:"absolute top-0 left-0 pointer-events-none"})]})}),e.jsx("div",{className:"px-4 py-1 bg-gray-900 text-gray-400 text-xs text-center",children:E?e.jsx("span",{children:"ðŸ“± Pellizca para zoom â€¢ Desliza para navegar"}):e.jsx("span",{children:"ðŸ’¡ Scroll = Zoom â€¢ Arrastra con clic = Mover"})})]}):e.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100 text-gray-500",children:e.jsx("p",{children:"Selecciona un repuesto para ver el manual"})})}export{pt as PDFViewer};
