import{c as F,r as o,p as Re,j as t,L as Se,X as st,S as se,C as Ce,a as Pe,U as nt,Z as at,f as rt}from"./index-DNQsdCBL.js";import{Z as ot}from"./zoom-out-z0uGIIvI.js";/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=F("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=F("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=F("Hexagon",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=F("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=F("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);Re.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const ne=[{name:"Rojo",value:"rgba(239, 68, 68, 0.4)",border:"#ef4444"},{name:"Azul",value:"rgba(59, 130, 246, 0.4)",border:"#3b82f6"},{name:"Verde",value:"rgba(34, 197, 94, 0.4)",border:"#22c55e"},{name:"Amarillo",value:"rgba(234, 179, 8, 0.4)",border:"#eab308"},{name:"Morado",value:"rgba(168, 85, 247, 0.4)",border:"#a855f7"},{name:"Naranja",value:"rgba(249, 115, 22, 0.4)",border:"#f97316"}],ae=.3,re=5,_=.15,oe=15;function gt({pdfUrl:V,repuestoDescripcion:De,existingMarker:u,onSave:le,onCancel:ce,repuestos:I=[],onSelectRepuesto:ie}){var ve,Ne;const M=o.useRef(null),i=o.useRef(null),Ee=o.useRef(null),[p,Te]=o.useState(null),[w,E]=o.useState((u==null?void 0:u.pagina)||1),[k,Be]=o.useState(0),[j,$]=o.useState(1),[Le,K]=o.useState(!0),[h,Z]=o.useState((u==null?void 0:u.forma)||"rectangulo"),[R,ke]=o.useState((u==null?void 0:u.color)||ne[0].value),[D,Ae]=o.useState(ne[0].border),[de,X]=o.useState(!1),[y,Y]=o.useState(null),[x,N]=o.useState(null),[l,S]=o.useState((u==null?void 0:u.puntos)||[]),[b,C]=o.useState(!1),[he,Fe]=o.useState(!1),[f,Ie]=o.useState((u==null?void 0:u.sinBorde)===!1),[z,ue]=o.useState(""),[A,ge]=o.useState([]),[$e,O]=o.useState(!1),[G,H]=o.useState(-1),[T,Xe]=o.useState(""),[m,xe]=o.useState([]),[U,me]=o.useState(!1),[B,J]=o.useState(-1),[W,fe]=o.useState("repuesto"),[Ye,ze]=o.useState(De);o.useEffect(()=>{V&&(K(!0),Re.getDocument(V).promise.then(e=>{Te(e),Be(e.numPages),K(!1)}).catch(e=>{console.error("Error al cargar PDF:",e),K(!1)}))},[V]),o.useEffect(()=>{if(!z.trim()||I.length===0){ge([]),H(-1);return}const e=z.toLowerCase(),s=I.filter(a=>{var n,r,c,d;return((n=a.codigoSAP)==null?void 0:n.toLowerCase().includes(e))||((r=a.codigoBaader)==null?void 0:r.toLowerCase().includes(e))||((c=a.textoBreve)==null?void 0:c.toLowerCase().includes(e))||((d=a.descripcion)==null?void 0:d.toLowerCase().includes(e))}).slice(0,10);ge(s),H(s.length>0?0:-1)},[z,I]);const pe=o.useCallback(async e=>{if(!p||!e.trim()){xe([]);return}me(!0);const s=[],a=e.toLowerCase();try{for(let n=1;n<=p.numPages;n++){const d=(await(await p.getPage(n)).getTextContent()).items.filter(g=>"str"in g).map(g=>g.str).join(" ");if(d.toLowerCase().includes(a)){const g=d.toLowerCase().indexOf(a),ee=Math.max(0,g-30),te=Math.min(d.length,g+e.length+30),P="..."+d.substring(ee,te)+"...";s.push({pageNum:n,text:P})}}}catch(n){console.error("Error buscando en PDF:",n)}xe(s),J(s.length>0?0:-1),s.length>0&&E(s[0].pageNum),me(!1)},[p]),Oe=()=>{if(m.length===0)return;const e=(B+1)%m.length;J(e),E(m[e].pageNum)},He=()=>{if(m.length===0)return;const e=B===0?m.length-1:B-1;J(e),E(m[e].pageNum)},v=o.useCallback((e,s,a)=>{if(!i.current||e.length===0)return;const n=i.current.getContext("2d");if(n){n.clearRect(0,0,i.current.width,i.current.height),n.beginPath(),n.moveTo(e[0].x,e[0].y);for(let r=1;r<e.length;r++)n.lineTo(e[r].x,e[r].y);a&&!s&&n.lineTo(a.x,a.y),s?(n.closePath(),n.fillStyle=R,n.fill(),f&&(n.strokeStyle=D,n.lineWidth=2,n.stroke())):(n.strokeStyle=D,n.lineWidth=2,n.stroke()),e.forEach((r,c)=>{const d=c===0,g=d&&he&&e.length>2;n.beginPath(),n.arc(r.x,r.y,g?10:6,0,2*Math.PI),d&&e.length>2&&!s?n.fillStyle=g?"#22c55e":"#f97316":n.fillStyle=D,n.fill(),n.fillStyle="white",n.font="bold 10px sans-serif",n.textAlign="center",n.textBaseline="middle",n.fillText(`${c+1}`,r.x,r.y)})}},[R,D,f,he]),L=o.useCallback(e=>{if(!i.current)return;const s=i.current.getContext("2d");if(s){if(s.clearRect(0,0,i.current.width,i.current.height),s.fillStyle=R,h==="rectangulo")s.fillRect(e.x,e.y,e.width,e.height),f&&(s.strokeStyle=D,s.lineWidth=2,s.strokeRect(e.x,e.y,e.width,e.height));else if(h==="circulo"){const a=e.x+e.width/2,n=e.y+e.height/2,r=Math.abs(e.width)/2,c=Math.abs(e.height)/2;s.beginPath(),s.ellipse(a,n,r,c,0,0,2*Math.PI),s.fill(),f&&(s.strokeStyle=D,s.lineWidth=2,s.stroke())}}},[h,R,D,f]),ye=o.useCallback(async e=>{if(!p||!M.current)return;const s=await p.getPage(e),a=M.current,n=a.getContext("2d");if(!n)return;const r=s.getViewport({scale:j});a.height=r.height,a.width=r.width,i.current&&(i.current.height=r.height,i.current.width=r.width),await s.render({canvasContext:n,viewport:r}).promise,h==="poligono"&&l.length>0?v(l,b):x&&L(x)},[p,j,x,L,h,l,b,v]);o.useEffect(()=>{ye(w)},[w,ye]),o.useEffect(()=>{if(!p||!(u!=null&&u.coordenadas)||!M.current)return;(async()=>{const a=(await p.getPage(u.pagina)).getViewport({scale:j}),{x:n,y:r,width:c,height:d}=u.coordenadas,g=n<=1&&r<=1&&c<=1&&d<=1;N(g?{x:n*a.width,y:r*a.height,width:c*a.width,height:d*a.height}:{x:n*j,y:r*j,width:c*j,height:d*j})})()},[p,j,u]);const Q=(e,s)=>Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2)),We=e=>{var r;const s=(r=i.current)==null?void 0:r.getBoundingClientRect();if(!s)return;const a=e.clientX-s.left,n=e.clientY-s.top;if(h==="poligono"){if(b){S([{x:a,y:n}]),C(!1);return}if(l.length>2){const d=l[0];if(Q({x:a,y:n},d)<oe){C(!0),v(l,!0);return}}const c=[...l,{x:a,y:n}];S(c),v(c,!1)}else X(!0),Y({x:a,y:n}),N(null)},qe=e=>{var r;const s=(r=i.current)==null?void 0:r.getBoundingClientRect();if(!s)return;const a=e.clientX-s.left,n=e.clientY-s.top;if(h==="poligono"&&l.length>0&&!b){const c=l[0],d=l.length>2&&Q({x:a,y:n},c)<oe;Fe(d),v(l,!1,{x:a,y:n})}else if(h!=="poligono"&&de&&y&&i.current){const c={x:Math.min(y.x,a),y:Math.min(y.y,n),width:Math.abs(a-y.x),height:Math.abs(n-y.y)};N(c),L(c)}},be=()=>{X(!1),Y(null)},_e=e=>{var c;if(e.touches.length!==1)return;const s=e.touches[0],a=(c=i.current)==null?void 0:c.getBoundingClientRect();if(!a)return;const n=s.clientX-a.left,r=s.clientY-a.top;if(h==="poligono"){if(b){S([{x:n,y:r}]),C(!1);return}if(l.length>2){const g=l[0];if(Q({x:n,y:r},g)<oe*1.5){C(!0),v(l,!0);return}}const d=[...l,{x:n,y:r}];S(d),v(d,!1)}else X(!0),Y({x:n,y:r}),N(null)},Ve=e=>{if(h==="poligono"||!de||!y||!i.current||e.touches.length!==1)return;e.preventDefault();const s=e.touches[0],a=i.current.getBoundingClientRect(),n=s.clientX-a.left,r=s.clientY-a.top,c={x:Math.min(y.x,n),y:Math.min(y.y,r),width:Math.abs(n-y.x),height:Math.abs(r-y.y)};N(c),L(c)},Ke=()=>{X(!1),Y(null)},Ze=()=>{var e;if(l.length>0){const s=l.slice(0,-1);if(S(s),C(!1),s.length>0)v(s,!1);else{const a=(e=i.current)==null?void 0:e.getContext("2d");a&&i.current&&a.clearRect(0,0,i.current.width,i.current.height)}}},Ge=e=>{e.preventDefault();const s=e.deltaY>0?-_:_;$(a=>Math.min(re,Math.max(ae,a+s)))},q=o.useRef(null),Ue=e=>{if(e.touches.length===2){e.preventDefault();const s=Math.hypot(e.touches[1].clientX-e.touches[0].clientX,e.touches[1].clientY-e.touches[0].clientY);if(q.current!==null){const a=(s-q.current)*.005;$(n=>Math.min(re,Math.max(ae,n+a)))}q.current=s}},Je=()=>{q.current=null},Qe=e=>{ke(e.value),Ae(e.border),x&&setTimeout(()=>L(x),0)},we=e=>{if(ze(e.descripcion||e.textoBreve),ue(""),O(!1),N(null),i.current){const s=i.current.getContext("2d");s==null||s.clearRect(0,0,i.current.width,i.current.height)}ie&&ie(e)},et=e=>{A.length&&(e.key==="ArrowDown"?(e.preventDefault(),H(s=>s<A.length-1?s+1:s)):e.key==="ArrowUp"?(e.preventDefault(),H(s=>s>0?s-1:s)):e.key==="Enter"&&G>=0?(e.preventDefault(),we(A[G])):e.key==="Escape"&&O(!1))},tt=()=>{if(!M.current)return;const e=M.current.width,s=M.current.height;if(h==="poligono"){if(!b||l.length<3)return;const a=l.map(P=>({x:P.x/e,y:P.y/s})),n=l.map(P=>P.x),r=l.map(P=>P.y),c=Math.min(...n),d=Math.min(...r),g=Math.max(...n),ee=Math.max(...r),te={x:c/e,y:d/s,width:(g-c)/e,height:(ee-d)/s};le({pagina:w,coordenadas:te,puntos:a,forma:"poligono",color:R,descripcion:`Marcador en pÃ¡gina ${w}`,sinBorde:!f})}else{if(!x)return;const a={x:x.x/e,y:x.y/s,width:x.width/e,height:x.height/s};le({pagina:w,coordenadas:a,forma:h,color:R,descripcion:`Marcador en pÃ¡gina ${w}`,sinBorde:!f})}},je=h==="poligono"?b&&l.length>=3:x!==null;return Le?t.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100",children:t.jsx(Se,{className:"w-8 h-8 text-primary-600 animate-spin"})}):t.jsxs("div",{className:"h-full flex flex-col bg-gray-800",children:[t.jsxs("div",{className:"px-4 py-3 bg-gray-900 text-white",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg",children:"Marcar en Manual"}),t.jsx("button",{onClick:ce,className:"p-2 rounded hover:bg-gray-700",children:t.jsx(st,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsxs("button",{onClick:()=>fe("repuesto"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${W==="repuesto"?"bg-primary-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[t.jsx(se,{className:"w-4 h-4"}),"Buscar Repuesto"]}),t.jsxs("button",{onClick:()=>fe("pdf"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors ${W==="pdf"?"bg-primary-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[t.jsx(Me,{className:"w-4 h-4"}),"Buscar en PDF"]})]}),W==="repuesto"&&I.length>0&&t.jsxs("div",{className:"relative mb-2",children:[t.jsxs("div",{className:"relative",children:[t.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",value:z,onChange:e=>{ue(e.target.value),O(!0)},onFocus:()=>O(!0),onKeyDown:et,placeholder:"Buscar por cÃ³digo SAP, Baader o descripciÃ³n...",className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),$e&&A.length>0&&t.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-700 border border-gray-600 rounded-lg shadow-xl max-h-60 overflow-y-auto z-50",children:A.map((e,s)=>{var a;return t.jsxs("button",{onClick:()=>we(e),className:`w-full px-4 py-3 text-left hover:bg-gray-600 flex items-center gap-3 ${s===G?"bg-gray-600":""}`,children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-mono text-xs bg-gray-800 px-2 py-0.5 rounded text-primary-400",children:e.codigoSAP}),e.codigoBaader&&t.jsx("span",{className:"font-mono text-xs text-gray-400",children:e.codigoBaader})]}),t.jsx("p",{className:"text-sm text-gray-300 truncate mt-1",children:e.descripcion||e.textoBreve})]}),((a=e.vinculosManual)==null?void 0:a.length)>0&&t.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded text-white",children:"Marcado"})]},e.id)})})]}),W==="pdf"&&t.jsxs("div",{className:"space-y-2 mb-2",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),t.jsx("input",{type:"text",value:T,onChange:e=>Xe(e.target.value),onKeyDown:e=>{e.key==="Enter"&&pe(T)},placeholder:"Buscar texto en el PDF (ej: 200.1234)...",className:"w-full pl-10 pr-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-sm text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),t.jsxs("button",{onClick:()=>pe(T),disabled:U||!T.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[U?t.jsx(Se,{className:"w-4 h-4 animate-spin"}):t.jsx(se,{className:"w-4 h-4"}),"Buscar"]})]}),m.length>0&&t.jsxs("div",{className:"bg-gray-700 rounded-lg p-3",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsxs("span",{className:"text-sm text-gray-300",children:[m.length," resultado(s) encontrado(s)"]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:He,className:"p-1 rounded hover:bg-gray-600",children:t.jsx(Ce,{className:"w-4 h-4"})}),t.jsxs("span",{className:"text-sm",children:[B+1," / ",m.length]}),t.jsx("button",{onClick:Oe,className:"p-1 rounded hover:bg-gray-600",children:t.jsx(Pe,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"text-xs text-gray-400 bg-gray-800 rounded p-2 max-h-16 overflow-y-auto",children:[t.jsxs("span",{className:"text-primary-400",children:["PÃ¡g. ",(ve=m[B])==null?void 0:ve.pageNum,": "]}),(Ne=m[B])==null?void 0:Ne.text]})]}),T&&!U&&m.length===0&&t.jsxs("p",{className:"text-sm text-amber-400",children:['No se encontrÃ³ "',T,'" en el PDF. Intenta con otro tÃ©rmino.']})]}),t.jsxs("p",{className:"text-sm text-gray-400 truncate",children:[t.jsx("span",{className:"text-primary-400 font-medium",children:"Marcando:"})," ",Ye]})]}),t.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-700 text-white flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>E(e=>Math.max(1,e-1)),disabled:w<=1,className:"p-2 rounded hover:bg-gray-600 disabled:opacity-50",children:t.jsx(Ce,{className:"w-5 h-5"})}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-sm",children:"PÃ¡g."}),t.jsx("input",{type:"number",value:w,onChange:e=>{const s=parseInt(e.target.value);isNaN(s)||E(Math.min(k,Math.max(1,s)))},className:"w-12 px-2 py-1 bg-gray-600 rounded text-center text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",min:1,max:k}),t.jsxs("span",{className:"text-sm",children:["/ ",k]})]}),t.jsx("button",{onClick:()=>E(e=>Math.min(k,e+1)),disabled:w>=k,className:"p-2 rounded hover:bg-gray-600 disabled:opacity-50",children:t.jsx(Pe,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex items-center gap-1 bg-gray-600 rounded p-1",children:[t.jsx("button",{onClick:()=>{Z("rectangulo"),S([]),C(!1)},className:`p-2 rounded ${h==="rectangulo"?"bg-primary-600":"hover:bg-gray-500"}`,title:"RectÃ¡ngulo",children:t.jsx(dt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{Z("circulo"),S([]),C(!1)},className:`p-2 rounded ${h==="circulo"?"bg-primary-600":"hover:bg-gray-500"}`,title:"CÃ­rculo/Elipse",children:t.jsx(lt,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{Z("poligono"),N(null),S([]),C(!1)},className:`p-2 rounded ${h==="poligono"?"bg-primary-600":"hover:bg-gray-500"}`,title:"PolÃ­gono (puntos)",children:t.jsx(ct,{className:"w-5 h-5"})}),h==="poligono"&&l.length>0&&t.jsx("button",{onClick:Ze,className:"p-2 rounded bg-amber-600 hover:bg-amber-500 ml-1",title:"Deshacer Ãºltimo punto",children:t.jsx(nt,{className:"w-5 h-5"})})]}),h==="poligono"&&t.jsxs("div",{className:"text-xs text-gray-300 flex items-center gap-2",children:[t.jsxs("span",{className:"bg-gray-600 px-2 py-1 rounded",children:[l.length," punto",l.length!==1?"s":""]}),b&&t.jsx("span",{className:"bg-green-600 px-2 py-1 rounded",children:"âœ“ Cerrado"})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(it,{className:"w-4 h-4 mr-1 text-gray-400"}),ne.map(e=>t.jsx("button",{onClick:()=>Qe(e),className:`w-7 h-7 rounded-full border-2 transition-transform ${R===e.value?"scale-110 border-white":"border-transparent hover:scale-105"}`,style:{backgroundColor:e.border},title:e.name},e.name))]}),t.jsx("button",{onClick:()=>{Ie(!f),h==="poligono"&&l.length>0?setTimeout(()=>v(l,b),0):x&&setTimeout(()=>L(x),0)},className:`px-3 py-1.5 rounded text-xs font-medium transition-colors ${f?"bg-gray-600 text-white hover:bg-gray-500":"bg-primary-600 text-white hover:bg-primary-700"}`,title:f?"Ocultar borde":"Sin borde (solo relleno)",children:f?"â¬œ Con borde":"ðŸŸ¦ Sin borde"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>$(e=>Math.max(ae,e-_)),className:"p-2 rounded hover:bg-gray-600",children:t.jsx(ot,{className:"w-5 h-5"})}),t.jsxs("span",{className:"text-sm w-14 text-center",children:[Math.round(j*100),"%"]}),t.jsx("button",{onClick:()=>$(e=>Math.min(re,e+_)),className:"p-2 rounded hover:bg-gray-600",children:t.jsx(at,{className:"w-5 h-5"})})]})]}),t.jsxs("div",{className:"px-4 py-2 bg-primary-600 text-white text-sm flex items-center justify-between flex-wrap gap-2",children:[t.jsx("span",{children:h==="poligono"?b?"âœ“ PolÃ­gono cerrado - Listo para guardar":`Haz clic para agregar puntos${l.length>2?" (clic en punto 1 para cerrar)":""}`:`Dibuja un ${h==="rectangulo"?"rectÃ¡ngulo":"cÃ­rculo"} sobre el repuesto`}),t.jsx("span",{className:"text-primary-200 text-xs hidden sm:block",children:"ðŸ’¡ Scroll para zoom"})]}),t.jsx("div",{ref:Ee,className:"flex-1 overflow-auto flex items-start justify-center p-4",onWheel:Ge,onTouchMove:Ue,onTouchEnd:Je,children:t.jsxs("div",{className:"relative inline-block",children:[t.jsx("canvas",{ref:M,className:"bg-white shadow-lg"}),t.jsx("canvas",{ref:i,className:"absolute top-0 left-0",style:{cursor:h==="poligono"?"pointer":"crosshair"},onMouseDown:We,onMouseMove:qe,onMouseUp:be,onMouseLeave:be,onTouchStart:_e,onTouchMove:Ve,onTouchEnd:Ke})]})}),t.jsxs("div",{className:"px-4 py-3 bg-gray-900 flex items-center justify-between flex-wrap gap-2",children:[t.jsx("p",{className:"text-sm text-gray-400",children:je?"âœ“ Marcador listo - Puedes guardar":h==="poligono"?`Agrega al menos 3 puntos y cierra el polÃ­gono (${l.length} puntos)`:"Dibuja el marcador en el PDF"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:ce,className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancelar"}),t.jsxs("button",{onClick:tt,disabled:!je,className:"flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t.jsx(rt,{className:"w-5 h-5"}),"Guardar"]})]})]})]})}export{gt as PDFMarkerEditor};
