var bx=Object.defineProperty;var J0=tr=>{throw TypeError(tr)};var xx=(tr,er,rr)=>er in tr?bx(tr,er,{enumerable:!0,configurable:!0,writable:!0,value:rr}):tr[er]=rr;var Po=(tr,er,rr)=>xx(tr,typeof er!="symbol"?er+"":er,rr),Hm=(tr,er,rr)=>er.has(tr)||J0("Cannot "+rr);var un=(tr,er,rr)=>(Hm(tr,er,"read from private field"),rr?rr.call(tr):er.get(tr)),ps=(tr,er,rr)=>er.has(tr)?J0("Cannot add the same private member more than once"):er instanceof WeakSet?er.add(tr):er.set(tr,rr),ys=(tr,er,rr,nr)=>(Hm(tr,er,"write to private field"),nr?nr.call(tr,rr):er.set(tr,rr),rr),rs=(tr,er,rr)=>(Hm(tr,er,"access private method"),rr);var $p=(tr,er,rr,nr)=>({set _(ir){ys(tr,er,ir,rr)},get _(){return un(tr,er,nr)}});(function(){const er=document.createElement("link").relList;if(er&&er.supports&&er.supports("modulepreload"))return;for(const ir of document.querySelectorAll('link[rel="modulepreload"]'))nr(ir);new MutationObserver(ir=>{for(const sr of ir)if(sr.type==="childList")for(const ar of sr.addedNodes)ar.tagName==="LINK"&&ar.rel==="modulepreload"&&nr(ar)}).observe(document,{childList:!0,subtree:!0});function rr(ir){const sr={};return ir.integrity&&(sr.integrity=ir.integrity),ir.referrerPolicy&&(sr.referrerPolicy=ir.referrerPolicy),ir.crossOrigin==="use-credentials"?sr.credentials="include":ir.crossOrigin==="anonymous"?sr.credentials="omit":sr.credentials="same-origin",sr}function nr(ir){if(ir.ep)return;ir.ep=!0;const sr=rr(ir);fetch(ir.href,sr)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(tr){return tr&&tr.__esModule&&Object.prototype.hasOwnProperty.call(tr,"default")?tr.default:tr}function getAugmentedNamespace(tr){if(tr.__esModule)return tr;var er=tr.default;if(typeof er=="function"){var rr=function nr(){return this instanceof nr?Reflect.construct(er,arguments,this.constructor):er.apply(this,arguments)};rr.prototype=er.prototype}else rr={};return Object.defineProperty(rr,"__esModule",{value:!0}),Object.keys(tr).forEach(function(nr){var ir=Object.getOwnPropertyDescriptor(tr,nr);Object.defineProperty(rr,nr,ir.get?ir:{enumerable:!0,get:function(){return tr[nr]}})}),rr}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$4=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(tr){return tr===null||typeof tr!="object"?null:(tr=z$2&&tr[z$2]||tr["@@iterator"],typeof tr=="function"?tr:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$3={};function E$2(tr,er,rr){this.props=tr,this.context=er,this.refs=D$3,this.updater=rr||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(tr,er){if(typeof tr!="object"&&typeof tr!="function"&&tr!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,tr,er,"setState")};E$2.prototype.forceUpdate=function(tr){this.updater.enqueueForceUpdate(this,tr,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(tr,er,rr){this.props=tr,this.context=er,this.refs=D$3,this.updater=rr||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$3(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(tr,er,rr){var nr,ir={},sr=null,ar=null;if(er!=null)for(nr in er.ref!==void 0&&(ar=er.ref),er.key!==void 0&&(sr=""+er.key),er)J$1.call(er,nr)&&!L$2.hasOwnProperty(nr)&&(ir[nr]=er[nr]);var cr=arguments.length-2;if(cr===1)ir.children=rr;else if(1<cr){for(var lr=Array(cr),or=0;or<cr;or++)lr[or]=arguments[or+2];ir.children=lr}if(tr&&tr.defaultProps)for(nr in cr=tr.defaultProps,cr)ir[nr]===void 0&&(ir[nr]=cr[nr]);return{$$typeof:l$3,type:tr,key:sr,ref:ar,props:ir,_owner:K$2.current}}function N$2(tr,er){return{$$typeof:l$3,type:tr.type,key:er,ref:tr.ref,props:tr.props,_owner:tr._owner}}function O$2(tr){return typeof tr=="object"&&tr!==null&&tr.$$typeof===l$3}function escape$1(tr){var er={"=":"=0",":":"=2"};return"$"+tr.replace(/[=:]/g,function(rr){return er[rr]})}var P$3=/\/+/g;function Q$2(tr,er){return typeof tr=="object"&&tr!==null&&tr.key!=null?escape$1(""+tr.key):er.toString(36)}function R$2(tr,er,rr,nr,ir){var sr=typeof tr;(sr==="undefined"||sr==="boolean")&&(tr=null);var ar=!1;if(tr===null)ar=!0;else switch(sr){case"string":case"number":ar=!0;break;case"object":switch(tr.$$typeof){case l$3:case n$3:ar=!0}}if(ar)return ar=tr,ir=ir(ar),tr=nr===""?"."+Q$2(ar,0):nr,I$2(ir)?(rr="",tr!=null&&(rr=tr.replace(P$3,"$&/")+"/"),R$2(ir,er,rr,"",function(or){return or})):ir!=null&&(O$2(ir)&&(ir=N$2(ir,rr+(!ir.key||ar&&ar.key===ir.key?"":(""+ir.key).replace(P$3,"$&/")+"/")+tr)),er.push(ir)),1;if(ar=0,nr=nr===""?".":nr+":",I$2(tr))for(var cr=0;cr<tr.length;cr++){sr=tr[cr];var lr=nr+Q$2(sr,cr);ar+=R$2(sr,er,rr,lr,ir)}else if(lr=A$2(tr),typeof lr=="function")for(tr=lr.call(tr),cr=0;!(sr=tr.next()).done;)sr=sr.value,lr=nr+Q$2(sr,cr++),ar+=R$2(sr,er,rr,lr,ir);else if(sr==="object")throw er=String(tr),Error("Objects are not valid as a React child (found: "+(er==="[object Object]"?"object with keys {"+Object.keys(tr).join(", ")+"}":er)+"). If you meant to render a collection of children, use an array instead.");return ar}function S$3(tr,er,rr){if(tr==null)return tr;var nr=[],ir=0;return R$2(tr,nr,"","",function(sr){return er.call(rr,sr,ir++)}),nr}function T$2(tr){if(tr._status===-1){var er=tr._result;er=er(),er.then(function(rr){(tr._status===0||tr._status===-1)&&(tr._status=1,tr._result=rr)},function(rr){(tr._status===0||tr._status===-1)&&(tr._status=2,tr._result=rr)}),tr._status===-1&&(tr._status=0,tr._result=er)}if(tr._status===1)return tr._result.default;throw tr._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$3(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$3,forEach:function(tr,er,rr){S$3(tr,function(){er.apply(this,arguments)},rr)},count:function(tr){var er=0;return S$3(tr,function(){er++}),er},toArray:function(tr){return S$3(tr,function(er){return er})||[]},only:function(tr){if(!O$2(tr))throw Error("React.Children.only expected to receive a single React element child.");return tr}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$3;react_production_min.cloneElement=function(tr,er,rr){if(tr==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+tr+".");var nr=C$3({},tr.props),ir=tr.key,sr=tr.ref,ar=tr._owner;if(er!=null){if(er.ref!==void 0&&(sr=er.ref,ar=K$2.current),er.key!==void 0&&(ir=""+er.key),tr.type&&tr.type.defaultProps)var cr=tr.type.defaultProps;for(lr in er)J$1.call(er,lr)&&!L$2.hasOwnProperty(lr)&&(nr[lr]=er[lr]===void 0&&cr!==void 0?cr[lr]:er[lr])}var lr=arguments.length-2;if(lr===1)nr.children=rr;else if(1<lr){cr=Array(lr);for(var or=0;or<lr;or++)cr[or]=arguments[or+2];nr.children=cr}return{$$typeof:l$3,type:tr.type,key:ir,ref:sr,props:nr,_owner:ar}};react_production_min.createContext=function(tr){return tr={$$typeof:u$2,_currentValue:tr,_currentValue2:tr,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},tr.Provider={$$typeof:t$1,_context:tr},tr.Consumer=tr};react_production_min.createElement=M$2;react_production_min.createFactory=function(tr){var er=M$2.bind(null,tr);return er.type=tr,er};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(tr){return{$$typeof:v$4,render:tr}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(tr){return{$$typeof:y$2,_payload:{_status:-1,_result:tr},_init:T$2}};react_production_min.memo=function(tr,er){return{$$typeof:x$3,type:tr,compare:er===void 0?null:er}};react_production_min.startTransition=function(tr){var er=V$2.transition;V$2.transition={};try{tr()}finally{V$2.transition=er}};react_production_min.unstable_act=X$3;react_production_min.useCallback=function(tr,er){return U$2.current.useCallback(tr,er)};react_production_min.useContext=function(tr){return U$2.current.useContext(tr)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(tr){return U$2.current.useDeferredValue(tr)};react_production_min.useEffect=function(tr,er){return U$2.current.useEffect(tr,er)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(tr,er,rr){return U$2.current.useImperativeHandle(tr,er,rr)};react_production_min.useInsertionEffect=function(tr,er){return U$2.current.useInsertionEffect(tr,er)};react_production_min.useLayoutEffect=function(tr,er){return U$2.current.useLayoutEffect(tr,er)};react_production_min.useMemo=function(tr,er){return U$2.current.useMemo(tr,er)};react_production_min.useReducer=function(tr,er,rr){return U$2.current.useReducer(tr,er,rr)};react_production_min.useRef=function(tr){return U$2.current.useRef(tr)};react_production_min.useState=function(tr){return U$2.current.useState(tr)};react_production_min.useSyncExternalStore=function(tr,er,rr){return U$2.current.useSyncExternalStore(tr,er,rr)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$2=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$2(tr,er,rr){var nr,ir={},sr=null,ar=null;rr!==void 0&&(sr=""+rr),er.key!==void 0&&(sr=""+er.key),er.ref!==void 0&&(ar=er.ref);for(nr in er)m$3.call(er,nr)&&!p$3.hasOwnProperty(nr)&&(ir[nr]=er[nr]);if(tr&&tr.defaultProps)for(nr in er=tr.defaultProps,er)ir[nr]===void 0&&(ir[nr]=er[nr]);return{$$typeof:k$3,type:tr,key:sr,ref:ar,props:ir,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(tr){function er(Ar,Sr){var Mr=Ar.length;Ar.push(Sr);e:for(;0<Mr;){var qr=Mr-1>>>1,$r=Ar[qr];if(0<ir($r,Sr))Ar[qr]=Sr,Ar[Mr]=$r,Mr=qr;else break e}}function rr(Ar){return Ar.length===0?null:Ar[0]}function nr(Ar){if(Ar.length===0)return null;var Sr=Ar[0],Mr=Ar.pop();if(Mr!==Sr){Ar[0]=Mr;e:for(var qr=0,$r=Ar.length,Br=$r>>>1;qr<Br;){var zr=2*(qr+1)-1,Gr=Ar[zr],Vr=zr+1,Xr=Ar[Vr];if(0>ir(Gr,Mr))Vr<$r&&0>ir(Xr,Gr)?(Ar[qr]=Xr,Ar[Vr]=Mr,qr=Vr):(Ar[qr]=Gr,Ar[zr]=Mr,qr=zr);else if(Vr<$r&&0>ir(Xr,Mr))Ar[qr]=Xr,Ar[Vr]=Mr,qr=Vr;else break e}}return Sr}function ir(Ar,Sr){var Mr=Ar.sortIndex-Sr.sortIndex;return Mr!==0?Mr:Ar.id-Sr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var sr=performance;tr.unstable_now=function(){return sr.now()}}else{var ar=Date,cr=ar.now();tr.unstable_now=function(){return ar.now()-cr}}var lr=[],or=[],ur=1,hr=null,dr=3,fr=!1,gr=!1,br=!1,pr=typeof setTimeout=="function"?setTimeout:null,mr=typeof clearTimeout=="function"?clearTimeout:null,yr=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xr(Ar){for(var Sr=rr(or);Sr!==null;){if(Sr.callback===null)nr(or);else if(Sr.startTime<=Ar)nr(or),Sr.sortIndex=Sr.expirationTime,er(lr,Sr);else break;Sr=rr(or)}}function vr(Ar){if(br=!1,xr(Ar),!gr)if(rr(lr)!==null)gr=!0,wr(_r);else{var Sr=rr(or);Sr!==null&&Pr(vr,Sr.startTime-Ar)}}function _r(Ar,Sr){gr=!1,br&&(br=!1,mr(Rr),Rr=-1),fr=!0;var Mr=dr;try{for(xr(Sr),hr=rr(lr);hr!==null&&(!(hr.expirationTime>Sr)||Ar&&!Ir());){var qr=hr.callback;if(typeof qr=="function"){hr.callback=null,dr=hr.priorityLevel;var $r=qr(hr.expirationTime<=Sr);Sr=tr.unstable_now(),typeof $r=="function"?hr.callback=$r:hr===rr(lr)&&nr(lr),xr(Sr)}else nr(lr);hr=rr(lr)}if(hr!==null)var Br=!0;else{var zr=rr(or);zr!==null&&Pr(vr,zr.startTime-Sr),Br=!1}return Br}finally{hr=null,dr=Mr,fr=!1}}var Er=!1,Tr=null,Rr=-1,Nr=5,Dr=-1;function Ir(){return!(tr.unstable_now()-Dr<Nr)}function Or(){if(Tr!==null){var Ar=tr.unstable_now();Dr=Ar;var Sr=!0;try{Sr=Tr(!0,Ar)}finally{Sr?jr():(Er=!1,Tr=null)}}else Er=!1}var jr;if(typeof yr=="function")jr=function(){yr(Or)};else if(typeof MessageChannel<"u"){var Lr=new MessageChannel,Cr=Lr.port2;Lr.port1.onmessage=Or,jr=function(){Cr.postMessage(null)}}else jr=function(){pr(Or,0)};function wr(Ar){Tr=Ar,Er||(Er=!0,jr())}function Pr(Ar,Sr){Rr=pr(function(){Ar(tr.unstable_now())},Sr)}tr.unstable_IdlePriority=5,tr.unstable_ImmediatePriority=1,tr.unstable_LowPriority=4,tr.unstable_NormalPriority=3,tr.unstable_Profiling=null,tr.unstable_UserBlockingPriority=2,tr.unstable_cancelCallback=function(Ar){Ar.callback=null},tr.unstable_continueExecution=function(){gr||fr||(gr=!0,wr(_r))},tr.unstable_forceFrameRate=function(Ar){0>Ar||125<Ar?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Nr=0<Ar?Math.floor(1e3/Ar):5},tr.unstable_getCurrentPriorityLevel=function(){return dr},tr.unstable_getFirstCallbackNode=function(){return rr(lr)},tr.unstable_next=function(Ar){switch(dr){case 1:case 2:case 3:var Sr=3;break;default:Sr=dr}var Mr=dr;dr=Sr;try{return Ar()}finally{dr=Mr}},tr.unstable_pauseExecution=function(){},tr.unstable_requestPaint=function(){},tr.unstable_runWithPriority=function(Ar,Sr){switch(Ar){case 1:case 2:case 3:case 4:case 5:break;default:Ar=3}var Mr=dr;dr=Ar;try{return Sr()}finally{dr=Mr}},tr.unstable_scheduleCallback=function(Ar,Sr,Mr){var qr=tr.unstable_now();switch(typeof Mr=="object"&&Mr!==null?(Mr=Mr.delay,Mr=typeof Mr=="number"&&0<Mr?qr+Mr:qr):Mr=qr,Ar){case 1:var $r=-1;break;case 2:$r=250;break;case 5:$r=1073741823;break;case 4:$r=1e4;break;default:$r=5e3}return $r=Mr+$r,Ar={id:ur++,callback:Sr,priorityLevel:Ar,startTime:Mr,expirationTime:$r,sortIndex:-1},Mr>qr?(Ar.sortIndex=Mr,er(or,Ar),rr(lr)===null&&Ar===rr(or)&&(br?(mr(Rr),Rr=-1):br=!0,Pr(vr,Mr-qr))):(Ar.sortIndex=$r,er(lr,Ar),gr||fr||(gr=!0,wr(_r))),Ar},tr.unstable_shouldYield=Ir,tr.unstable_wrapCallback=function(Ar){var Sr=dr;return function(){var Mr=dr;dr=Sr;try{return Ar.apply(this,arguments)}finally{dr=Mr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$2(tr){for(var er="https://reactjs.org/docs/error-decoder.html?invariant="+tr,rr=1;rr<arguments.length;rr++)er+="&args[]="+encodeURIComponent(arguments[rr]);return"Minified React error #"+tr+"; visit "+er+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(tr,er){ha(tr,er),ha(tr+"Capture",er)}function ha(tr,er){for(ea[tr]=er,tr=0;tr<er.length;tr++)da.add(er[tr])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(tr){return ja.call(ma,tr)?!0:ja.call(la,tr)?!1:ka$1.test(tr)?ma[tr]=!0:(la[tr]=!0,!1)}function pa(tr,er,rr,nr){if(rr!==null&&rr.type===0)return!1;switch(typeof er){case"function":case"symbol":return!0;case"boolean":return nr?!1:rr!==null?!rr.acceptsBooleans:(tr=tr.toLowerCase().slice(0,5),tr!=="data-"&&tr!=="aria-");default:return!1}}function qa(tr,er,rr,nr){if(er===null||typeof er>"u"||pa(tr,er,rr,nr))return!0;if(nr)return!1;if(rr!==null)switch(rr.type){case 3:return!er;case 4:return er===!1;case 5:return isNaN(er);case 6:return isNaN(er)||1>er}return!1}function v$3(tr,er,rr,nr,ir,sr,ar){this.acceptsBooleans=er===2||er===3||er===4,this.attributeName=nr,this.attributeNamespace=ir,this.mustUseProperty=rr,this.propertyName=tr,this.type=er,this.sanitizeURL=sr,this.removeEmptyString=ar}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(tr){z$1[tr]=new v$3(tr,0,!1,tr,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(tr){var er=tr[0];z$1[er]=new v$3(er,1,!1,tr[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(tr){z$1[tr]=new v$3(tr,2,!1,tr.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(tr){z$1[tr]=new v$3(tr,2,!1,tr,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(tr){z$1[tr]=new v$3(tr,3,!1,tr.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(tr){z$1[tr]=new v$3(tr,3,!0,tr,null,!1,!1)});["capture","download"].forEach(function(tr){z$1[tr]=new v$3(tr,4,!1,tr,null,!1,!1)});["cols","rows","size","span"].forEach(function(tr){z$1[tr]=new v$3(tr,6,!1,tr,null,!1,!1)});["rowSpan","start"].forEach(function(tr){z$1[tr]=new v$3(tr,5,!1,tr.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(tr){return tr[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(tr){var er=tr.replace(ra,sa);z$1[er]=new v$3(er,1,!1,tr,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(tr){var er=tr.replace(ra,sa);z$1[er]=new v$3(er,1,!1,tr,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(tr){var er=tr.replace(ra,sa);z$1[er]=new v$3(er,1,!1,tr,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(tr){z$1[tr]=new v$3(tr,1,!1,tr.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$3("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(tr){z$1[tr]=new v$3(tr,1,!1,tr.toLowerCase(),null,!0,!0)});function ta(tr,er,rr,nr){var ir=z$1.hasOwnProperty(er)?z$1[er]:null;(ir!==null?ir.type!==0:nr||!(2<er.length)||er[0]!=="o"&&er[0]!=="O"||er[1]!=="n"&&er[1]!=="N")&&(qa(er,rr,ir,nr)&&(rr=null),nr||ir===null?oa(er)&&(rr===null?tr.removeAttribute(er):tr.setAttribute(er,""+rr)):ir.mustUseProperty?tr[ir.propertyName]=rr===null?ir.type===3?!1:"":rr:(er=ir.attributeName,nr=ir.attributeNamespace,rr===null?tr.removeAttribute(er):(ir=ir.type,rr=ir===3||ir===4&&rr===!0?"":""+rr,nr?tr.setAttributeNS(nr,er,rr):tr.setAttribute(er,rr))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(tr){return tr===null||typeof tr!="object"?null:(tr=Ja&&tr[Ja]||tr["@@iterator"],typeof tr=="function"?tr:null)}var A$1=Object.assign,La;function Ma(tr){if(La===void 0)try{throw Error()}catch(rr){var er=rr.stack.trim().match(/\n( *(at )?)/);La=er&&er[1]||""}return`
`+La+tr}var Na=!1;function Oa(tr,er){if(!tr||Na)return"";Na=!0;var rr=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(er)if(er=function(){throw Error()},Object.defineProperty(er.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(er,[])}catch(or){var nr=or}Reflect.construct(tr,[],er)}else{try{er.call()}catch(or){nr=or}tr.call(er.prototype)}else{try{throw Error()}catch(or){nr=or}tr()}}catch(or){if(or&&nr&&typeof or.stack=="string"){for(var ir=or.stack.split(`
`),sr=nr.stack.split(`
`),ar=ir.length-1,cr=sr.length-1;1<=ar&&0<=cr&&ir[ar]!==sr[cr];)cr--;for(;1<=ar&&0<=cr;ar--,cr--)if(ir[ar]!==sr[cr]){if(ar!==1||cr!==1)do if(ar--,cr--,0>cr||ir[ar]!==sr[cr]){var lr=`
`+ir[ar].replace(" at new "," at ");return tr.displayName&&lr.includes("<anonymous>")&&(lr=lr.replace("<anonymous>",tr.displayName)),lr}while(1<=ar&&0<=cr);break}}}finally{Na=!1,Error.prepareStackTrace=rr}return(tr=tr?tr.displayName||tr.name:"")?Ma(tr):""}function Pa(tr){switch(tr.tag){case 5:return Ma(tr.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return tr=Oa(tr.type,!1),tr;case 11:return tr=Oa(tr.type.render,!1),tr;case 1:return tr=Oa(tr.type,!0),tr;default:return""}}function Qa(tr){if(tr==null)return null;if(typeof tr=="function")return tr.displayName||tr.name||null;if(typeof tr=="string")return tr;switch(tr){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof tr=="object")switch(tr.$$typeof){case Ca:return(tr.displayName||"Context")+".Consumer";case Ba:return(tr._context.displayName||"Context")+".Provider";case Da:var er=tr.render;return tr=tr.displayName,tr||(tr=er.displayName||er.name||"",tr=tr!==""?"ForwardRef("+tr+")":"ForwardRef"),tr;case Ga:return er=tr.displayName||null,er!==null?er:Qa(tr.type)||"Memo";case Ha:er=tr._payload,tr=tr._init;try{return Qa(tr(er))}catch{}}return null}function Ra(tr){var er=tr.type;switch(tr.tag){case 24:return"Cache";case 9:return(er.displayName||"Context")+".Consumer";case 10:return(er._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return tr=er.render,tr=tr.displayName||tr.name||"",er.displayName||(tr!==""?"ForwardRef("+tr+")":"ForwardRef");case 7:return"Fragment";case 5:return er;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(er);case 8:return er===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof er=="function")return er.displayName||er.name||null;if(typeof er=="string")return er}return null}function Sa(tr){switch(typeof tr){case"boolean":case"number":case"string":case"undefined":return tr;case"object":return tr;default:return""}}function Ta(tr){var er=tr.type;return(tr=tr.nodeName)&&tr.toLowerCase()==="input"&&(er==="checkbox"||er==="radio")}function Ua(tr){var er=Ta(tr)?"checked":"value",rr=Object.getOwnPropertyDescriptor(tr.constructor.prototype,er),nr=""+tr[er];if(!tr.hasOwnProperty(er)&&typeof rr<"u"&&typeof rr.get=="function"&&typeof rr.set=="function"){var ir=rr.get,sr=rr.set;return Object.defineProperty(tr,er,{configurable:!0,get:function(){return ir.call(this)},set:function(ar){nr=""+ar,sr.call(this,ar)}}),Object.defineProperty(tr,er,{enumerable:rr.enumerable}),{getValue:function(){return nr},setValue:function(ar){nr=""+ar},stopTracking:function(){tr._valueTracker=null,delete tr[er]}}}}function Va(tr){tr._valueTracker||(tr._valueTracker=Ua(tr))}function Wa(tr){if(!tr)return!1;var er=tr._valueTracker;if(!er)return!0;var rr=er.getValue(),nr="";return tr&&(nr=Ta(tr)?tr.checked?"true":"false":tr.value),tr=nr,tr!==rr?(er.setValue(tr),!0):!1}function Xa(tr){if(tr=tr||(typeof document<"u"?document:void 0),typeof tr>"u")return null;try{return tr.activeElement||tr.body}catch{return tr.body}}function Ya(tr,er){var rr=er.checked;return A$1({},er,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:rr??tr._wrapperState.initialChecked})}function Za(tr,er){var rr=er.defaultValue==null?"":er.defaultValue,nr=er.checked!=null?er.checked:er.defaultChecked;rr=Sa(er.value!=null?er.value:rr),tr._wrapperState={initialChecked:nr,initialValue:rr,controlled:er.type==="checkbox"||er.type==="radio"?er.checked!=null:er.value!=null}}function ab(tr,er){er=er.checked,er!=null&&ta(tr,"checked",er,!1)}function bb(tr,er){ab(tr,er);var rr=Sa(er.value),nr=er.type;if(rr!=null)nr==="number"?(rr===0&&tr.value===""||tr.value!=rr)&&(tr.value=""+rr):tr.value!==""+rr&&(tr.value=""+rr);else if(nr==="submit"||nr==="reset"){tr.removeAttribute("value");return}er.hasOwnProperty("value")?cb(tr,er.type,rr):er.hasOwnProperty("defaultValue")&&cb(tr,er.type,Sa(er.defaultValue)),er.checked==null&&er.defaultChecked!=null&&(tr.defaultChecked=!!er.defaultChecked)}function db$1(tr,er,rr){if(er.hasOwnProperty("value")||er.hasOwnProperty("defaultValue")){var nr=er.type;if(!(nr!=="submit"&&nr!=="reset"||er.value!==void 0&&er.value!==null))return;er=""+tr._wrapperState.initialValue,rr||er===tr.value||(tr.value=er),tr.defaultValue=er}rr=tr.name,rr!==""&&(tr.name=""),tr.defaultChecked=!!tr._wrapperState.initialChecked,rr!==""&&(tr.name=rr)}function cb(tr,er,rr){(er!=="number"||Xa(tr.ownerDocument)!==tr)&&(rr==null?tr.defaultValue=""+tr._wrapperState.initialValue:tr.defaultValue!==""+rr&&(tr.defaultValue=""+rr))}var eb=Array.isArray;function fb(tr,er,rr,nr){if(tr=tr.options,er){er={};for(var ir=0;ir<rr.length;ir++)er["$"+rr[ir]]=!0;for(rr=0;rr<tr.length;rr++)ir=er.hasOwnProperty("$"+tr[rr].value),tr[rr].selected!==ir&&(tr[rr].selected=ir),ir&&nr&&(tr[rr].defaultSelected=!0)}else{for(rr=""+Sa(rr),er=null,ir=0;ir<tr.length;ir++){if(tr[ir].value===rr){tr[ir].selected=!0,nr&&(tr[ir].defaultSelected=!0);return}er!==null||tr[ir].disabled||(er=tr[ir])}er!==null&&(er.selected=!0)}}function gb(tr,er){if(er.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$1({},er,{value:void 0,defaultValue:void 0,children:""+tr._wrapperState.initialValue})}function hb(tr,er){var rr=er.value;if(rr==null){if(rr=er.children,er=er.defaultValue,rr!=null){if(er!=null)throw Error(p$2(92));if(eb(rr)){if(1<rr.length)throw Error(p$2(93));rr=rr[0]}er=rr}er==null&&(er=""),rr=er}tr._wrapperState={initialValue:Sa(rr)}}function ib(tr,er){var rr=Sa(er.value),nr=Sa(er.defaultValue);rr!=null&&(rr=""+rr,rr!==tr.value&&(tr.value=rr),er.defaultValue==null&&tr.defaultValue!==rr&&(tr.defaultValue=rr)),nr!=null&&(tr.defaultValue=""+nr)}function jb(tr){var er=tr.textContent;er===tr._wrapperState.initialValue&&er!==""&&er!==null&&(tr.value=er)}function kb(tr){switch(tr){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(tr,er){return tr==null||tr==="http://www.w3.org/1999/xhtml"?kb(er):tr==="http://www.w3.org/2000/svg"&&er==="foreignObject"?"http://www.w3.org/1999/xhtml":tr}var mb,nb=function(tr){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(er,rr,nr,ir){MSApp.execUnsafeLocalFunction(function(){return tr(er,rr,nr,ir)})}:tr}(function(tr,er){if(tr.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in tr)tr.innerHTML=er;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+er.valueOf().toString()+"</svg>",er=mb.firstChild;tr.firstChild;)tr.removeChild(tr.firstChild);for(;er.firstChild;)tr.appendChild(er.firstChild)}});function ob(tr,er){if(er){var rr=tr.firstChild;if(rr&&rr===tr.lastChild&&rr.nodeType===3){rr.nodeValue=er;return}}tr.textContent=er}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(tr){qb.forEach(function(er){er=er+tr.charAt(0).toUpperCase()+tr.substring(1),pb[er]=pb[tr]})});function rb(tr,er,rr){return er==null||typeof er=="boolean"||er===""?"":rr||typeof er!="number"||er===0||pb.hasOwnProperty(tr)&&pb[tr]?(""+er).trim():er+"px"}function sb(tr,er){tr=tr.style;for(var rr in er)if(er.hasOwnProperty(rr)){var nr=rr.indexOf("--")===0,ir=rb(rr,er[rr],nr);rr==="float"&&(rr="cssFloat"),nr?tr.setProperty(rr,ir):tr[rr]=ir}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(tr,er){if(er){if(tb[tr]&&(er.children!=null||er.dangerouslySetInnerHTML!=null))throw Error(p$2(137,tr));if(er.dangerouslySetInnerHTML!=null){if(er.children!=null)throw Error(p$2(60));if(typeof er.dangerouslySetInnerHTML!="object"||!("__html"in er.dangerouslySetInnerHTML))throw Error(p$2(61))}if(er.style!=null&&typeof er.style!="object")throw Error(p$2(62))}}function vb(tr,er){if(tr.indexOf("-")===-1)return typeof er.is=="string";switch(tr){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(tr){return tr=tr.target||tr.srcElement||window,tr.correspondingUseElement&&(tr=tr.correspondingUseElement),tr.nodeType===3?tr.parentNode:tr}var yb=null,zb=null,Ab=null;function Bb(tr){if(tr=Cb(tr)){if(typeof yb!="function")throw Error(p$2(280));var er=tr.stateNode;er&&(er=Db(er),yb(tr.stateNode,tr.type,er))}}function Eb(tr){zb?Ab?Ab.push(tr):Ab=[tr]:zb=tr}function Fb(){if(zb){var tr=zb,er=Ab;if(Ab=zb=null,Bb(tr),er)for(tr=0;tr<er.length;tr++)Bb(er[tr])}}function Gb(tr,er){return tr(er)}function Hb(){}var Ib=!1;function Jb(tr,er,rr){if(Ib)return tr(er,rr);Ib=!0;try{return Gb(tr,er,rr)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(tr,er){var rr=tr.stateNode;if(rr===null)return null;var nr=Db(rr);if(nr===null)return null;rr=nr[er];e:switch(er){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(nr=!nr.disabled)||(tr=tr.type,nr=!(tr==="button"||tr==="input"||tr==="select"||tr==="textarea")),tr=!nr;break e;default:tr=!1}if(tr)return null;if(rr&&typeof rr!="function")throw Error(p$2(231,er,typeof rr));return rr}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(tr,er,rr,nr,ir,sr,ar,cr,lr){var or=Array.prototype.slice.call(arguments,3);try{er.apply(rr,or)}catch(ur){this.onError(ur)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(tr){Ob=!0,Pb=tr}};function Tb(tr,er,rr,nr,ir,sr,ar,cr,lr){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(tr,er,rr,nr,ir,sr,ar,cr,lr){if(Tb.apply(this,arguments),Ob){if(Ob){var or=Pb;Ob=!1,Pb=null}else throw Error(p$2(198));Qb||(Qb=!0,Rb=or)}}function Vb(tr){var er=tr,rr=tr;if(tr.alternate)for(;er.return;)er=er.return;else{tr=er;do er=tr,er.flags&4098&&(rr=er.return),tr=er.return;while(tr)}return er.tag===3?rr:null}function Wb(tr){if(tr.tag===13){var er=tr.memoizedState;if(er===null&&(tr=tr.alternate,tr!==null&&(er=tr.memoizedState)),er!==null)return er.dehydrated}return null}function Xb(tr){if(Vb(tr)!==tr)throw Error(p$2(188))}function Yb(tr){var er=tr.alternate;if(!er){if(er=Vb(tr),er===null)throw Error(p$2(188));return er!==tr?null:tr}for(var rr=tr,nr=er;;){var ir=rr.return;if(ir===null)break;var sr=ir.alternate;if(sr===null){if(nr=ir.return,nr!==null){rr=nr;continue}break}if(ir.child===sr.child){for(sr=ir.child;sr;){if(sr===rr)return Xb(ir),tr;if(sr===nr)return Xb(ir),er;sr=sr.sibling}throw Error(p$2(188))}if(rr.return!==nr.return)rr=ir,nr=sr;else{for(var ar=!1,cr=ir.child;cr;){if(cr===rr){ar=!0,rr=ir,nr=sr;break}if(cr===nr){ar=!0,nr=ir,rr=sr;break}cr=cr.sibling}if(!ar){for(cr=sr.child;cr;){if(cr===rr){ar=!0,rr=sr,nr=ir;break}if(cr===nr){ar=!0,nr=sr,rr=ir;break}cr=cr.sibling}if(!ar)throw Error(p$2(189))}}if(rr.alternate!==nr)throw Error(p$2(190))}if(rr.tag!==3)throw Error(p$2(188));return rr.stateNode.current===rr?tr:er}function Zb(tr){return tr=Yb(tr),tr!==null?$b(tr):null}function $b(tr){if(tr.tag===5||tr.tag===6)return tr;for(tr=tr.child;tr!==null;){var er=$b(tr);if(er!==null)return er;tr=tr.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(tr){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,tr,void 0,(tr.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(tr){return tr>>>=0,tr===0?32:31-(pc(tr)/qc|0)|0}var rc=64,sc=4194304;function tc(tr){switch(tr&-tr){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return tr&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return tr&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return tr}}function uc(tr,er){var rr=tr.pendingLanes;if(rr===0)return 0;var nr=0,ir=tr.suspendedLanes,sr=tr.pingedLanes,ar=rr&268435455;if(ar!==0){var cr=ar&~ir;cr!==0?nr=tc(cr):(sr&=ar,sr!==0&&(nr=tc(sr)))}else ar=rr&~ir,ar!==0?nr=tc(ar):sr!==0&&(nr=tc(sr));if(nr===0)return 0;if(er!==0&&er!==nr&&!(er&ir)&&(ir=nr&-nr,sr=er&-er,ir>=sr||ir===16&&(sr&4194240)!==0))return er;if(nr&4&&(nr|=rr&16),er=tr.entangledLanes,er!==0)for(tr=tr.entanglements,er&=nr;0<er;)rr=31-oc(er),ir=1<<rr,nr|=tr[rr],er&=~ir;return nr}function vc(tr,er){switch(tr){case 1:case 2:case 4:return er+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return er+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(tr,er){for(var rr=tr.suspendedLanes,nr=tr.pingedLanes,ir=tr.expirationTimes,sr=tr.pendingLanes;0<sr;){var ar=31-oc(sr),cr=1<<ar,lr=ir[ar];lr===-1?(!(cr&rr)||cr&nr)&&(ir[ar]=vc(cr,er)):lr<=er&&(tr.expiredLanes|=cr),sr&=~cr}}function xc(tr){return tr=tr.pendingLanes&-1073741825,tr!==0?tr:tr&1073741824?1073741824:0}function yc(){var tr=rc;return rc<<=1,!(rc&4194240)&&(rc=64),tr}function zc(tr){for(var er=[],rr=0;31>rr;rr++)er.push(tr);return er}function Ac(tr,er,rr){tr.pendingLanes|=er,er!==536870912&&(tr.suspendedLanes=0,tr.pingedLanes=0),tr=tr.eventTimes,er=31-oc(er),tr[er]=rr}function Bc(tr,er){var rr=tr.pendingLanes&~er;tr.pendingLanes=er,tr.suspendedLanes=0,tr.pingedLanes=0,tr.expiredLanes&=er,tr.mutableReadLanes&=er,tr.entangledLanes&=er,er=tr.entanglements;var nr=tr.eventTimes;for(tr=tr.expirationTimes;0<rr;){var ir=31-oc(rr),sr=1<<ir;er[ir]=0,nr[ir]=-1,tr[ir]=-1,rr&=~sr}}function Cc(tr,er){var rr=tr.entangledLanes|=er;for(tr=tr.entanglements;rr;){var nr=31-oc(rr),ir=1<<nr;ir&er|tr[nr]&er&&(tr[nr]|=er),rr&=~ir}}var C$2=0;function Dc(tr){return tr&=-tr,1<tr?4<tr?tr&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(tr,er){switch(tr){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(er.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(er.pointerId)}}function Tc(tr,er,rr,nr,ir,sr){return tr===null||tr.nativeEvent!==sr?(tr={blockedOn:er,domEventName:rr,eventSystemFlags:nr,nativeEvent:sr,targetContainers:[ir]},er!==null&&(er=Cb(er),er!==null&&Fc(er)),tr):(tr.eventSystemFlags|=nr,er=tr.targetContainers,ir!==null&&er.indexOf(ir)===-1&&er.push(ir),tr)}function Uc(tr,er,rr,nr,ir){switch(er){case"focusin":return Lc=Tc(Lc,tr,er,rr,nr,ir),!0;case"dragenter":return Mc=Tc(Mc,tr,er,rr,nr,ir),!0;case"mouseover":return Nc=Tc(Nc,tr,er,rr,nr,ir),!0;case"pointerover":var sr=ir.pointerId;return Oc.set(sr,Tc(Oc.get(sr)||null,tr,er,rr,nr,ir)),!0;case"gotpointercapture":return sr=ir.pointerId,Pc.set(sr,Tc(Pc.get(sr)||null,tr,er,rr,nr,ir)),!0}return!1}function Vc(tr){var er=Wc(tr.target);if(er!==null){var rr=Vb(er);if(rr!==null){if(er=rr.tag,er===13){if(er=Wb(rr),er!==null){tr.blockedOn=er,Ic(tr.priority,function(){Gc(rr)});return}}else if(er===3&&rr.stateNode.current.memoizedState.isDehydrated){tr.blockedOn=rr.tag===3?rr.stateNode.containerInfo:null;return}}}tr.blockedOn=null}function Xc(tr){if(tr.blockedOn!==null)return!1;for(var er=tr.targetContainers;0<er.length;){var rr=Yc(tr.domEventName,tr.eventSystemFlags,er[0],tr.nativeEvent);if(rr===null){rr=tr.nativeEvent;var nr=new rr.constructor(rr.type,rr);wb=nr,rr.target.dispatchEvent(nr),wb=null}else return er=Cb(rr),er!==null&&Fc(er),tr.blockedOn=rr,!1;er.shift()}return!0}function Zc(tr,er,rr){Xc(tr)&&rr.delete(er)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(tr,er){tr.blockedOn===er&&(tr.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(tr){function er(ir){return ad(ir,tr)}if(0<Kc.length){ad(Kc[0],tr);for(var rr=1;rr<Kc.length;rr++){var nr=Kc[rr];nr.blockedOn===tr&&(nr.blockedOn=null)}}for(Lc!==null&&ad(Lc,tr),Mc!==null&&ad(Mc,tr),Nc!==null&&ad(Nc,tr),Oc.forEach(er),Pc.forEach(er),rr=0;rr<Qc.length;rr++)nr=Qc[rr],nr.blockedOn===tr&&(nr.blockedOn=null);for(;0<Qc.length&&(rr=Qc[0],rr.blockedOn===null);)Vc(rr),rr.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(tr,er,rr,nr){var ir=C$2,sr=cd.transition;cd.transition=null;try{C$2=1,fd$1(tr,er,rr,nr)}finally{C$2=ir,cd.transition=sr}}function gd(tr,er,rr,nr){var ir=C$2,sr=cd.transition;cd.transition=null;try{C$2=4,fd$1(tr,er,rr,nr)}finally{C$2=ir,cd.transition=sr}}function fd$1(tr,er,rr,nr){if(dd){var ir=Yc(tr,er,rr,nr);if(ir===null)hd(tr,er,nr,id,rr),Sc(tr,nr);else if(Uc(ir,tr,er,rr,nr))nr.stopPropagation();else if(Sc(tr,nr),er&4&&-1<Rc.indexOf(tr)){for(;ir!==null;){var sr=Cb(ir);if(sr!==null&&Ec(sr),sr=Yc(tr,er,rr,nr),sr===null&&hd(tr,er,nr,id,rr),sr===ir)break;ir=sr}ir!==null&&nr.stopPropagation()}else hd(tr,er,nr,null,rr)}}var id=null;function Yc(tr,er,rr,nr){if(id=null,tr=xb(nr),tr=Wc(tr),tr!==null)if(er=Vb(tr),er===null)tr=null;else if(rr=er.tag,rr===13){if(tr=Wb(er),tr!==null)return tr;tr=null}else if(rr===3){if(er.stateNode.current.memoizedState.isDehydrated)return er.tag===3?er.stateNode.containerInfo:null;tr=null}else er!==tr&&(tr=null);return id=tr,null}function jd(tr){switch(tr){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var tr,er=ld,rr=er.length,nr,ir="value"in kd?kd.value:kd.textContent,sr=ir.length;for(tr=0;tr<rr&&er[tr]===ir[tr];tr++);var ar=rr-tr;for(nr=1;nr<=ar&&er[rr-nr]===ir[sr-nr];nr++);return md=ir.slice(tr,1<nr?1-nr:void 0)}function od(tr){var er=tr.keyCode;return"charCode"in tr?(tr=tr.charCode,tr===0&&er===13&&(tr=13)):tr=er,tr===10&&(tr=13),32<=tr||tr===13?tr:0}function pd(){return!0}function qd(){return!1}function rd(tr){function er(rr,nr,ir,sr,ar){this._reactName=rr,this._targetInst=ir,this.type=nr,this.nativeEvent=sr,this.target=ar,this.currentTarget=null;for(var cr in tr)tr.hasOwnProperty(cr)&&(rr=tr[cr],this[cr]=rr?rr(sr):sr[cr]);return this.isDefaultPrevented=(sr.defaultPrevented!=null?sr.defaultPrevented:sr.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(er.prototype,{preventDefault:function(){this.defaultPrevented=!0;var rr=this.nativeEvent;rr&&(rr.preventDefault?rr.preventDefault():typeof rr.returnValue!="unknown"&&(rr.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var rr=this.nativeEvent;rr&&(rr.stopPropagation?rr.stopPropagation():typeof rr.cancelBubble!="unknown"&&(rr.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),er}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(tr){return tr.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(tr){return tr.relatedTarget===void 0?tr.fromElement===tr.srcElement?tr.toElement:tr.fromElement:tr.relatedTarget},movementX:function(tr){return"movementX"in tr?tr.movementX:(tr!==yd&&(yd&&tr.type==="mousemove"?(wd=tr.screenX-yd.screenX,xd=tr.screenY-yd.screenY):xd=wd=0,yd=tr),wd)},movementY:function(tr){return"movementY"in tr?tr.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(tr){return"clipboardData"in tr?tr.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(tr){var er=this.nativeEvent;return er.getModifierState?er.getModifierState(tr):(tr=Od[tr])?!!er[tr]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(tr){if(tr.key){var er=Md[tr.key]||tr.key;if(er!=="Unidentified")return er}return tr.type==="keypress"?(tr=od(tr),tr===13?"Enter":String.fromCharCode(tr)):tr.type==="keydown"||tr.type==="keyup"?Nd[tr.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(tr){return tr.type==="keypress"?od(tr):0},keyCode:function(tr){return tr.type==="keydown"||tr.type==="keyup"?tr.keyCode:0},which:function(tr){return tr.type==="keypress"?od(tr):tr.type==="keydown"||tr.type==="keyup"?tr.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(tr){return"deltaX"in tr?tr.deltaX:"wheelDeltaX"in tr?-tr.wheelDeltaX:0},deltaY:function(tr){return"deltaY"in tr?tr.deltaY:"wheelDeltaY"in tr?-tr.wheelDeltaY:"wheelDelta"in tr?-tr.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$2=ia&&"CompositionEvent"in window,be$2=null;ia&&"documentMode"in document&&(be$2=document.documentMode);var ce$2=ia&&"TextEvent"in window&&!be$2,de$2=ia&&(!ae$2||be$2&&8<be$2&&11>=be$2),ee$1=" ",fe$2=!1;function ge$2(tr,er){switch(tr){case"keyup":return $d.indexOf(er.keyCode)!==-1;case"keydown":return er.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(tr){return tr=tr.detail,typeof tr=="object"&&"data"in tr?tr.data:null}var ie$1=!1;function je(tr,er){switch(tr){case"compositionend":return he$2(er);case"keypress":return er.which!==32?null:(fe$2=!0,ee$1);case"textInput":return tr=er.data,tr===ee$1&&fe$2?null:tr;default:return null}}function ke(tr,er){if(ie$1)return tr==="compositionend"||!ae$2&&ge$2(tr,er)?(tr=nd(),md=ld=kd=null,ie$1=!1,tr):null;switch(tr){case"paste":return null;case"keypress":if(!(er.ctrlKey||er.altKey||er.metaKey)||er.ctrlKey&&er.altKey){if(er.char&&1<er.char.length)return er.char;if(er.which)return String.fromCharCode(er.which)}return null;case"compositionend":return de$2&&er.locale!=="ko"?null:er.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(tr){var er=tr&&tr.nodeName&&tr.nodeName.toLowerCase();return er==="input"?!!le$2[tr.type]:er==="textarea"}function ne$2(tr,er,rr,nr){Eb(nr),er=oe$2(er,"onChange"),0<er.length&&(rr=new td$1("onChange","change",null,rr,nr),tr.push({event:rr,listeners:er}))}var pe$2=null,qe=null;function re$3(tr){se$1(tr,0)}function te$1(tr){var er=ue$2(tr);if(Wa(er))return tr}function ve$1(tr,er){if(tr==="change")return er}var we$2=!1;if(ia){var xe;if(ia){var ye$2="oninput"in document;if(!ye$2){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$2=typeof ze.oninput=="function"}xe=ye$2}else xe=!1;we$2=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$2&&(pe$2.detachEvent("onpropertychange",Be),qe=pe$2=null)}function Be(tr){if(tr.propertyName==="value"&&te$1(qe)){var er=[];ne$2(er,qe,tr,xb(tr)),Jb(re$3,er)}}function Ce(tr,er,rr){tr==="focusin"?(Ae(),pe$2=er,qe=rr,pe$2.attachEvent("onpropertychange",Be)):tr==="focusout"&&Ae()}function De$1(tr){if(tr==="selectionchange"||tr==="keyup"||tr==="keydown")return te$1(qe)}function Ee$1(tr,er){if(tr==="click")return te$1(er)}function Fe(tr,er){if(tr==="input"||tr==="change")return te$1(er)}function Ge(tr,er){return tr===er&&(tr!==0||1/tr===1/er)||tr!==tr&&er!==er}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(tr,er){if(He(tr,er))return!0;if(typeof tr!="object"||tr===null||typeof er!="object"||er===null)return!1;var rr=Object.keys(tr),nr=Object.keys(er);if(rr.length!==nr.length)return!1;for(nr=0;nr<rr.length;nr++){var ir=rr[nr];if(!ja.call(er,ir)||!He(tr[ir],er[ir]))return!1}return!0}function Je(tr){for(;tr&&tr.firstChild;)tr=tr.firstChild;return tr}function Ke(tr,er){var rr=Je(tr);tr=0;for(var nr;rr;){if(rr.nodeType===3){if(nr=tr+rr.textContent.length,tr<=er&&nr>=er)return{node:rr,offset:er-tr};tr=nr}e:{for(;rr;){if(rr.nextSibling){rr=rr.nextSibling;break e}rr=rr.parentNode}rr=void 0}rr=Je(rr)}}function Le$1(tr,er){return tr&&er?tr===er?!0:tr&&tr.nodeType===3?!1:er&&er.nodeType===3?Le$1(tr,er.parentNode):"contains"in tr?tr.contains(er):tr.compareDocumentPosition?!!(tr.compareDocumentPosition(er)&16):!1:!1}function Me(){for(var tr=window,er=Xa();er instanceof tr.HTMLIFrameElement;){try{var rr=typeof er.contentWindow.location.href=="string"}catch{rr=!1}if(rr)tr=er.contentWindow;else break;er=Xa(tr.document)}return er}function Ne$1(tr){var er=tr&&tr.nodeName&&tr.nodeName.toLowerCase();return er&&(er==="input"&&(tr.type==="text"||tr.type==="search"||tr.type==="tel"||tr.type==="url"||tr.type==="password")||er==="textarea"||tr.contentEditable==="true")}function Oe(tr){var er=Me(),rr=tr.focusedElem,nr=tr.selectionRange;if(er!==rr&&rr&&rr.ownerDocument&&Le$1(rr.ownerDocument.documentElement,rr)){if(nr!==null&&Ne$1(rr)){if(er=nr.start,tr=nr.end,tr===void 0&&(tr=er),"selectionStart"in rr)rr.selectionStart=er,rr.selectionEnd=Math.min(tr,rr.value.length);else if(tr=(er=rr.ownerDocument||document)&&er.defaultView||window,tr.getSelection){tr=tr.getSelection();var ir=rr.textContent.length,sr=Math.min(nr.start,ir);nr=nr.end===void 0?sr:Math.min(nr.end,ir),!tr.extend&&sr>nr&&(ir=nr,nr=sr,sr=ir),ir=Ke(rr,sr);var ar=Ke(rr,nr);ir&&ar&&(tr.rangeCount!==1||tr.anchorNode!==ir.node||tr.anchorOffset!==ir.offset||tr.focusNode!==ar.node||tr.focusOffset!==ar.offset)&&(er=er.createRange(),er.setStart(ir.node,ir.offset),tr.removeAllRanges(),sr>nr?(tr.addRange(er),tr.extend(ar.node,ar.offset)):(er.setEnd(ar.node,ar.offset),tr.addRange(er)))}}for(er=[],tr=rr;tr=tr.parentNode;)tr.nodeType===1&&er.push({element:tr,left:tr.scrollLeft,top:tr.scrollTop});for(typeof rr.focus=="function"&&rr.focus(),rr=0;rr<er.length;rr++)tr=er[rr],tr.element.scrollLeft=tr.left,tr.element.scrollTop=tr.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(tr,er,rr){var nr=rr.window===rr?rr.document:rr.nodeType===9?rr:rr.ownerDocument;Te$1||Qe==null||Qe!==Xa(nr)||(nr=Qe,"selectionStart"in nr&&Ne$1(nr)?nr={start:nr.selectionStart,end:nr.selectionEnd}:(nr=(nr.ownerDocument&&nr.ownerDocument.defaultView||window).getSelection(),nr={anchorNode:nr.anchorNode,anchorOffset:nr.anchorOffset,focusNode:nr.focusNode,focusOffset:nr.focusOffset}),Se&&Ie$1(Se,nr)||(Se=nr,nr=oe$2(Re,"onSelect"),0<nr.length&&(er=new td$1("onSelect","select",null,er,rr),tr.push({event:er,listeners:nr}),er.target=Qe)))}function Ve(tr,er){var rr={};return rr[tr.toLowerCase()]=er.toLowerCase(),rr["Webkit"+tr]="webkit"+er,rr["Moz"+tr]="moz"+er,rr}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(tr){if(Xe[tr])return Xe[tr];if(!We[tr])return tr;var er=We[tr],rr;for(rr in er)if(er.hasOwnProperty(rr)&&rr in Ye)return Xe[tr]=er[rr];return tr}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(tr,er){df.set(tr,er),fa(er,[tr])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(tr,er,rr){var nr=tr.type||"unknown-event";tr.currentTarget=rr,Ub(nr,er,void 0,tr),tr.currentTarget=null}function se$1(tr,er){er=(er&4)!==0;for(var rr=0;rr<tr.length;rr++){var nr=tr[rr],ir=nr.event;nr=nr.listeners;e:{var sr=void 0;if(er)for(var ar=nr.length-1;0<=ar;ar--){var cr=nr[ar],lr=cr.instance,or=cr.currentTarget;if(cr=cr.listener,lr!==sr&&ir.isPropagationStopped())break e;nf(ir,cr,or),sr=lr}else for(ar=0;ar<nr.length;ar++){if(cr=nr[ar],lr=cr.instance,or=cr.currentTarget,cr=cr.listener,lr!==sr&&ir.isPropagationStopped())break e;nf(ir,cr,or),sr=lr}}}if(Qb)throw tr=Rb,Qb=!1,Rb=null,tr}function D$2(tr,er){var rr=er[of];rr===void 0&&(rr=er[of]=new Set);var nr=tr+"__bubble";rr.has(nr)||(pf(er,tr,2,!1),rr.add(nr))}function qf(tr,er,rr){var nr=0;er&&(nr|=4),pf(rr,tr,nr,er)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(tr){if(!tr[rf]){tr[rf]=!0,da.forEach(function(rr){rr!=="selectionchange"&&(mf.has(rr)||qf(rr,!1,tr),qf(rr,!0,tr))});var er=tr.nodeType===9?tr:tr.ownerDocument;er===null||er[rf]||(er[rf]=!0,qf("selectionchange",!1,er))}}function pf(tr,er,rr,nr){switch(jd(er)){case 1:var ir=ed;break;case 4:ir=gd;break;default:ir=fd$1}rr=ir.bind(null,er,rr,tr),ir=void 0,!Lb||er!=="touchstart"&&er!=="touchmove"&&er!=="wheel"||(ir=!0),nr?ir!==void 0?tr.addEventListener(er,rr,{capture:!0,passive:ir}):tr.addEventListener(er,rr,!0):ir!==void 0?tr.addEventListener(er,rr,{passive:ir}):tr.addEventListener(er,rr,!1)}function hd(tr,er,rr,nr,ir){var sr=nr;if(!(er&1)&&!(er&2)&&nr!==null)e:for(;;){if(nr===null)return;var ar=nr.tag;if(ar===3||ar===4){var cr=nr.stateNode.containerInfo;if(cr===ir||cr.nodeType===8&&cr.parentNode===ir)break;if(ar===4)for(ar=nr.return;ar!==null;){var lr=ar.tag;if((lr===3||lr===4)&&(lr=ar.stateNode.containerInfo,lr===ir||lr.nodeType===8&&lr.parentNode===ir))return;ar=ar.return}for(;cr!==null;){if(ar=Wc(cr),ar===null)return;if(lr=ar.tag,lr===5||lr===6){nr=sr=ar;continue e}cr=cr.parentNode}}nr=nr.return}Jb(function(){var or=sr,ur=xb(rr),hr=[];e:{var dr=df.get(tr);if(dr!==void 0){var fr=td$1,gr=tr;switch(tr){case"keypress":if(od(rr)===0)break e;case"keydown":case"keyup":fr=Rd;break;case"focusin":gr="focus",fr=Fd;break;case"focusout":gr="blur",fr=Fd;break;case"beforeblur":case"afterblur":fr=Fd;break;case"click":if(rr.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fr=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fr=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fr=Vd;break;case $e:case af:case bf:fr=Hd;break;case cf:fr=Xd;break;case"scroll":fr=vd;break;case"wheel":fr=Zd;break;case"copy":case"cut":case"paste":fr=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fr=Td}var br=(er&4)!==0,pr=!br&&tr==="scroll",mr=br?dr!==null?dr+"Capture":null:dr;br=[];for(var yr=or,xr;yr!==null;){xr=yr;var vr=xr.stateNode;if(xr.tag===5&&vr!==null&&(xr=vr,mr!==null&&(vr=Kb(yr,mr),vr!=null&&br.push(tf(yr,vr,xr)))),pr)break;yr=yr.return}0<br.length&&(dr=new fr(dr,gr,null,rr,ur),hr.push({event:dr,listeners:br}))}}if(!(er&7)){e:{if(dr=tr==="mouseover"||tr==="pointerover",fr=tr==="mouseout"||tr==="pointerout",dr&&rr!==wb&&(gr=rr.relatedTarget||rr.fromElement)&&(Wc(gr)||gr[uf]))break e;if((fr||dr)&&(dr=ur.window===ur?ur:(dr=ur.ownerDocument)?dr.defaultView||dr.parentWindow:window,fr?(gr=rr.relatedTarget||rr.toElement,fr=or,gr=gr?Wc(gr):null,gr!==null&&(pr=Vb(gr),gr!==pr||gr.tag!==5&&gr.tag!==6)&&(gr=null)):(fr=null,gr=or),fr!==gr)){if(br=Bd,vr="onMouseLeave",mr="onMouseEnter",yr="mouse",(tr==="pointerout"||tr==="pointerover")&&(br=Td,vr="onPointerLeave",mr="onPointerEnter",yr="pointer"),pr=fr==null?dr:ue$2(fr),xr=gr==null?dr:ue$2(gr),dr=new br(vr,yr+"leave",fr,rr,ur),dr.target=pr,dr.relatedTarget=xr,vr=null,Wc(ur)===or&&(br=new br(mr,yr+"enter",gr,rr,ur),br.target=xr,br.relatedTarget=pr,vr=br),pr=vr,fr&&gr)t:{for(br=fr,mr=gr,yr=0,xr=br;xr;xr=vf(xr))yr++;for(xr=0,vr=mr;vr;vr=vf(vr))xr++;for(;0<yr-xr;)br=vf(br),yr--;for(;0<xr-yr;)mr=vf(mr),xr--;for(;yr--;){if(br===mr||mr!==null&&br===mr.alternate)break t;br=vf(br),mr=vf(mr)}br=null}else br=null;fr!==null&&wf(hr,dr,fr,br,!1),gr!==null&&pr!==null&&wf(hr,pr,gr,br,!0)}}e:{if(dr=or?ue$2(or):window,fr=dr.nodeName&&dr.nodeName.toLowerCase(),fr==="select"||fr==="input"&&dr.type==="file")var _r=ve$1;else if(me$2(dr))if(we$2)_r=Fe;else{_r=De$1;var Er=Ce}else(fr=dr.nodeName)&&fr.toLowerCase()==="input"&&(dr.type==="checkbox"||dr.type==="radio")&&(_r=Ee$1);if(_r&&(_r=_r(tr,or))){ne$2(hr,_r,rr,ur);break e}Er&&Er(tr,dr,or),tr==="focusout"&&(Er=dr._wrapperState)&&Er.controlled&&dr.type==="number"&&cb(dr,"number",dr.value)}switch(Er=or?ue$2(or):window,tr){case"focusin":(me$2(Er)||Er.contentEditable==="true")&&(Qe=Er,Re=or,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(hr,rr,ur);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(hr,rr,ur)}var Tr;if(ae$2)e:{switch(tr){case"compositionstart":var Rr="onCompositionStart";break e;case"compositionend":Rr="onCompositionEnd";break e;case"compositionupdate":Rr="onCompositionUpdate";break e}Rr=void 0}else ie$1?ge$2(tr,rr)&&(Rr="onCompositionEnd"):tr==="keydown"&&rr.keyCode===229&&(Rr="onCompositionStart");Rr&&(de$2&&rr.locale!=="ko"&&(ie$1||Rr!=="onCompositionStart"?Rr==="onCompositionEnd"&&ie$1&&(Tr=nd()):(kd=ur,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Er=oe$2(or,Rr),0<Er.length&&(Rr=new Ld(Rr,tr,null,rr,ur),hr.push({event:Rr,listeners:Er}),Tr?Rr.data=Tr:(Tr=he$2(rr),Tr!==null&&(Rr.data=Tr)))),(Tr=ce$2?je(tr,rr):ke(tr,rr))&&(or=oe$2(or,"onBeforeInput"),0<or.length&&(ur=new Ld("onBeforeInput","beforeinput",null,rr,ur),hr.push({event:ur,listeners:or}),ur.data=Tr))}se$1(hr,er)})}function tf(tr,er,rr){return{instance:tr,listener:er,currentTarget:rr}}function oe$2(tr,er){for(var rr=er+"Capture",nr=[];tr!==null;){var ir=tr,sr=ir.stateNode;ir.tag===5&&sr!==null&&(ir=sr,sr=Kb(tr,rr),sr!=null&&nr.unshift(tf(tr,sr,ir)),sr=Kb(tr,er),sr!=null&&nr.push(tf(tr,sr,ir))),tr=tr.return}return nr}function vf(tr){if(tr===null)return null;do tr=tr.return;while(tr&&tr.tag!==5);return tr||null}function wf(tr,er,rr,nr,ir){for(var sr=er._reactName,ar=[];rr!==null&&rr!==nr;){var cr=rr,lr=cr.alternate,or=cr.stateNode;if(lr!==null&&lr===nr)break;cr.tag===5&&or!==null&&(cr=or,ir?(lr=Kb(rr,sr),lr!=null&&ar.unshift(tf(rr,lr,cr))):ir||(lr=Kb(rr,sr),lr!=null&&ar.push(tf(rr,lr,cr)))),rr=rr.return}ar.length!==0&&tr.push({event:er,listeners:ar})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(tr){return(typeof tr=="string"?tr:""+tr).replace(xf,`
`).replace(yf,"")}function Af(tr,er,rr){if(er=zf(er),zf(tr)!==er&&rr)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(tr,er){return tr==="textarea"||tr==="noscript"||typeof er.children=="string"||typeof er.children=="number"||typeof er.dangerouslySetInnerHTML=="object"&&er.dangerouslySetInnerHTML!==null&&er.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(tr){return Hf.resolve(null).then(tr).catch(If)}:Ff;function If(tr){setTimeout(function(){throw tr})}function Kf(tr,er){var rr=er,nr=0;do{var ir=rr.nextSibling;if(tr.removeChild(rr),ir&&ir.nodeType===8)if(rr=ir.data,rr==="/$"){if(nr===0){tr.removeChild(ir),bd(er);return}nr--}else rr!=="$"&&rr!=="$?"&&rr!=="$!"||nr++;rr=ir}while(rr);bd(er)}function Lf(tr){for(;tr!=null;tr=tr.nextSibling){var er=tr.nodeType;if(er===1||er===3)break;if(er===8){if(er=tr.data,er==="$"||er==="$!"||er==="$?")break;if(er==="/$")return null}}return tr}function Mf(tr){tr=tr.previousSibling;for(var er=0;tr;){if(tr.nodeType===8){var rr=tr.data;if(rr==="$"||rr==="$!"||rr==="$?"){if(er===0)return tr;er--}else rr==="/$"&&er++}tr=tr.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(tr){var er=tr[Of];if(er)return er;for(var rr=tr.parentNode;rr;){if(er=rr[uf]||rr[Of]){if(rr=er.alternate,er.child!==null||rr!==null&&rr.child!==null)for(tr=Mf(tr);tr!==null;){if(rr=tr[Of])return rr;tr=Mf(tr)}return er}tr=rr,rr=tr.parentNode}return null}function Cb(tr){return tr=tr[Of]||tr[uf],!tr||tr.tag!==5&&tr.tag!==6&&tr.tag!==13&&tr.tag!==3?null:tr}function ue$2(tr){if(tr.tag===5||tr.tag===6)return tr.stateNode;throw Error(p$2(33))}function Db(tr){return tr[Pf]||null}var Sf=[],Tf=-1;function Uf(tr){return{current:tr}}function E$1(tr){0>Tf||(tr.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(tr,er){Tf++,Sf[Tf]=tr.current,tr.current=er}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(tr,er){var rr=tr.type.contextTypes;if(!rr)return Vf;var nr=tr.stateNode;if(nr&&nr.__reactInternalMemoizedUnmaskedChildContext===er)return nr.__reactInternalMemoizedMaskedChildContext;var ir={},sr;for(sr in rr)ir[sr]=er[sr];return nr&&(tr=tr.stateNode,tr.__reactInternalMemoizedUnmaskedChildContext=er,tr.__reactInternalMemoizedMaskedChildContext=ir),ir}function Zf(tr){return tr=tr.childContextTypes,tr!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(tr,er,rr){if(H$1.current!==Vf)throw Error(p$2(168));G$1(H$1,er),G$1(Wf,rr)}function bg(tr,er,rr){var nr=tr.stateNode;if(er=er.childContextTypes,typeof nr.getChildContext!="function")return rr;nr=nr.getChildContext();for(var ir in nr)if(!(ir in er))throw Error(p$2(108,Ra(tr)||"Unknown",ir));return A$1({},rr,nr)}function cg(tr){return tr=(tr=tr.stateNode)&&tr.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,tr),G$1(Wf,Wf.current),!0}function dg(tr,er,rr){var nr=tr.stateNode;if(!nr)throw Error(p$2(169));rr?(tr=bg(tr,er,Xf),nr.__reactInternalMemoizedMergedChildContext=tr,E$1(Wf),E$1(H$1),G$1(H$1,tr)):E$1(Wf),G$1(Wf,rr)}var eg=null,fg=!1,gg=!1;function hg(tr){eg===null?eg=[tr]:eg.push(tr)}function ig(tr){fg=!0,hg(tr)}function jg(){if(!gg&&eg!==null){gg=!0;var tr=0,er=C$2;try{var rr=eg;for(C$2=1;tr<rr.length;tr++){var nr=rr[tr];do nr=nr(!0);while(nr!==null)}eg=null,fg=!1}catch(ir){throw eg!==null&&(eg=eg.slice(tr+1)),ac(fc,jg),ir}finally{C$2=er,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(tr,er){kg[lg++]=ng,kg[lg++]=mg,mg=tr,ng=er}function ug(tr,er,rr){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=tr;var nr=rg;tr=sg;var ir=32-oc(nr)-1;nr&=~(1<<ir),rr+=1;var sr=32-oc(er)+ir;if(30<sr){var ar=ir-ir%5;sr=(nr&(1<<ar)-1).toString(32),nr>>=ar,ir-=ar,rg=1<<32-oc(er)+ir|rr<<ir|nr,sg=sr+tr}else rg=1<<sr|rr<<ir|nr,sg=tr}function vg(tr){tr.return!==null&&(tg(tr,1),ug(tr,1,0))}function wg(tr){for(;tr===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;tr===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(tr,er){var rr=Bg(5,null,null,0);rr.elementType="DELETED",rr.stateNode=er,rr.return=tr,er=tr.deletions,er===null?(tr.deletions=[rr],tr.flags|=16):er.push(rr)}function Cg(tr,er){switch(tr.tag){case 5:var rr=tr.type;return er=er.nodeType!==1||rr.toLowerCase()!==er.nodeName.toLowerCase()?null:er,er!==null?(tr.stateNode=er,xg=tr,yg=Lf(er.firstChild),!0):!1;case 6:return er=tr.pendingProps===""||er.nodeType!==3?null:er,er!==null?(tr.stateNode=er,xg=tr,yg=null,!0):!1;case 13:return er=er.nodeType!==8?null:er,er!==null?(rr=qg!==null?{id:rg,overflow:sg}:null,tr.memoizedState={dehydrated:er,treeContext:rr,retryLane:1073741824},rr=Bg(18,null,null,0),rr.stateNode=er,rr.return=tr,tr.child=rr,xg=tr,yg=null,!0):!1;default:return!1}}function Dg(tr){return(tr.mode&1)!==0&&(tr.flags&128)===0}function Eg(tr){if(I$1){var er=yg;if(er){var rr=er;if(!Cg(tr,er)){if(Dg(tr))throw Error(p$2(418));er=Lf(rr.nextSibling);var nr=xg;er&&Cg(tr,er)?Ag(nr,rr):(tr.flags=tr.flags&-4097|2,I$1=!1,xg=tr)}}else{if(Dg(tr))throw Error(p$2(418));tr.flags=tr.flags&-4097|2,I$1=!1,xg=tr}}}function Fg(tr){for(tr=tr.return;tr!==null&&tr.tag!==5&&tr.tag!==3&&tr.tag!==13;)tr=tr.return;xg=tr}function Gg(tr){if(tr!==xg)return!1;if(!I$1)return Fg(tr),I$1=!0,!1;var er;if((er=tr.tag!==3)&&!(er=tr.tag!==5)&&(er=tr.type,er=er!=="head"&&er!=="body"&&!Ef(tr.type,tr.memoizedProps)),er&&(er=yg)){if(Dg(tr))throw Hg(),Error(p$2(418));for(;er;)Ag(tr,er),er=Lf(er.nextSibling)}if(Fg(tr),tr.tag===13){if(tr=tr.memoizedState,tr=tr!==null?tr.dehydrated:null,!tr)throw Error(p$2(317));e:{for(tr=tr.nextSibling,er=0;tr;){if(tr.nodeType===8){var rr=tr.data;if(rr==="/$"){if(er===0){yg=Lf(tr.nextSibling);break e}er--}else rr!=="$"&&rr!=="$!"&&rr!=="$?"||er++}tr=tr.nextSibling}yg=null}}else yg=xg?Lf(tr.stateNode.nextSibling):null;return!0}function Hg(){for(var tr=yg;tr;)tr=Lf(tr.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(tr){zg===null?zg=[tr]:zg.push(tr)}var Kg=ua.ReactCurrentBatchConfig;function Lg(tr,er,rr){if(tr=rr.ref,tr!==null&&typeof tr!="function"&&typeof tr!="object"){if(rr._owner){if(rr=rr._owner,rr){if(rr.tag!==1)throw Error(p$2(309));var nr=rr.stateNode}if(!nr)throw Error(p$2(147,tr));var ir=nr,sr=""+tr;return er!==null&&er.ref!==null&&typeof er.ref=="function"&&er.ref._stringRef===sr?er.ref:(er=function(ar){var cr=ir.refs;ar===null?delete cr[sr]:cr[sr]=ar},er._stringRef=sr,er)}if(typeof tr!="string")throw Error(p$2(284));if(!rr._owner)throw Error(p$2(290,tr))}return tr}function Mg(tr,er){throw tr=Object.prototype.toString.call(er),Error(p$2(31,tr==="[object Object]"?"object with keys {"+Object.keys(er).join(", ")+"}":tr))}function Ng(tr){var er=tr._init;return er(tr._payload)}function Og(tr){function er(mr,yr){if(tr){var xr=mr.deletions;xr===null?(mr.deletions=[yr],mr.flags|=16):xr.push(yr)}}function rr(mr,yr){if(!tr)return null;for(;yr!==null;)er(mr,yr),yr=yr.sibling;return null}function nr(mr,yr){for(mr=new Map;yr!==null;)yr.key!==null?mr.set(yr.key,yr):mr.set(yr.index,yr),yr=yr.sibling;return mr}function ir(mr,yr){return mr=Pg(mr,yr),mr.index=0,mr.sibling=null,mr}function sr(mr,yr,xr){return mr.index=xr,tr?(xr=mr.alternate,xr!==null?(xr=xr.index,xr<yr?(mr.flags|=2,yr):xr):(mr.flags|=2,yr)):(mr.flags|=1048576,yr)}function ar(mr){return tr&&mr.alternate===null&&(mr.flags|=2),mr}function cr(mr,yr,xr,vr){return yr===null||yr.tag!==6?(yr=Qg(xr,mr.mode,vr),yr.return=mr,yr):(yr=ir(yr,xr),yr.return=mr,yr)}function lr(mr,yr,xr,vr){var _r=xr.type;return _r===ya?ur(mr,yr,xr.props.children,vr,xr.key):yr!==null&&(yr.elementType===_r||typeof _r=="object"&&_r!==null&&_r.$$typeof===Ha&&Ng(_r)===yr.type)?(vr=ir(yr,xr.props),vr.ref=Lg(mr,yr,xr),vr.return=mr,vr):(vr=Rg(xr.type,xr.key,xr.props,null,mr.mode,vr),vr.ref=Lg(mr,yr,xr),vr.return=mr,vr)}function or(mr,yr,xr,vr){return yr===null||yr.tag!==4||yr.stateNode.containerInfo!==xr.containerInfo||yr.stateNode.implementation!==xr.implementation?(yr=Sg(xr,mr.mode,vr),yr.return=mr,yr):(yr=ir(yr,xr.children||[]),yr.return=mr,yr)}function ur(mr,yr,xr,vr,_r){return yr===null||yr.tag!==7?(yr=Tg(xr,mr.mode,vr,_r),yr.return=mr,yr):(yr=ir(yr,xr),yr.return=mr,yr)}function hr(mr,yr,xr){if(typeof yr=="string"&&yr!==""||typeof yr=="number")return yr=Qg(""+yr,mr.mode,xr),yr.return=mr,yr;if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case va:return xr=Rg(yr.type,yr.key,yr.props,null,mr.mode,xr),xr.ref=Lg(mr,null,yr),xr.return=mr,xr;case wa:return yr=Sg(yr,mr.mode,xr),yr.return=mr,yr;case Ha:var vr=yr._init;return hr(mr,vr(yr._payload),xr)}if(eb(yr)||Ka(yr))return yr=Tg(yr,mr.mode,xr,null),yr.return=mr,yr;Mg(mr,yr)}return null}function dr(mr,yr,xr,vr){var _r=yr!==null?yr.key:null;if(typeof xr=="string"&&xr!==""||typeof xr=="number")return _r!==null?null:cr(mr,yr,""+xr,vr);if(typeof xr=="object"&&xr!==null){switch(xr.$$typeof){case va:return xr.key===_r?lr(mr,yr,xr,vr):null;case wa:return xr.key===_r?or(mr,yr,xr,vr):null;case Ha:return _r=xr._init,dr(mr,yr,_r(xr._payload),vr)}if(eb(xr)||Ka(xr))return _r!==null?null:ur(mr,yr,xr,vr,null);Mg(mr,xr)}return null}function fr(mr,yr,xr,vr,_r){if(typeof vr=="string"&&vr!==""||typeof vr=="number")return mr=mr.get(xr)||null,cr(yr,mr,""+vr,_r);if(typeof vr=="object"&&vr!==null){switch(vr.$$typeof){case va:return mr=mr.get(vr.key===null?xr:vr.key)||null,lr(yr,mr,vr,_r);case wa:return mr=mr.get(vr.key===null?xr:vr.key)||null,or(yr,mr,vr,_r);case Ha:var Er=vr._init;return fr(mr,yr,xr,Er(vr._payload),_r)}if(eb(vr)||Ka(vr))return mr=mr.get(xr)||null,ur(yr,mr,vr,_r,null);Mg(yr,vr)}return null}function gr(mr,yr,xr,vr){for(var _r=null,Er=null,Tr=yr,Rr=yr=0,Nr=null;Tr!==null&&Rr<xr.length;Rr++){Tr.index>Rr?(Nr=Tr,Tr=null):Nr=Tr.sibling;var Dr=dr(mr,Tr,xr[Rr],vr);if(Dr===null){Tr===null&&(Tr=Nr);break}tr&&Tr&&Dr.alternate===null&&er(mr,Tr),yr=sr(Dr,yr,Rr),Er===null?_r=Dr:Er.sibling=Dr,Er=Dr,Tr=Nr}if(Rr===xr.length)return rr(mr,Tr),I$1&&tg(mr,Rr),_r;if(Tr===null){for(;Rr<xr.length;Rr++)Tr=hr(mr,xr[Rr],vr),Tr!==null&&(yr=sr(Tr,yr,Rr),Er===null?_r=Tr:Er.sibling=Tr,Er=Tr);return I$1&&tg(mr,Rr),_r}for(Tr=nr(mr,Tr);Rr<xr.length;Rr++)Nr=fr(Tr,mr,Rr,xr[Rr],vr),Nr!==null&&(tr&&Nr.alternate!==null&&Tr.delete(Nr.key===null?Rr:Nr.key),yr=sr(Nr,yr,Rr),Er===null?_r=Nr:Er.sibling=Nr,Er=Nr);return tr&&Tr.forEach(function(Ir){return er(mr,Ir)}),I$1&&tg(mr,Rr),_r}function br(mr,yr,xr,vr){var _r=Ka(xr);if(typeof _r!="function")throw Error(p$2(150));if(xr=_r.call(xr),xr==null)throw Error(p$2(151));for(var Er=_r=null,Tr=yr,Rr=yr=0,Nr=null,Dr=xr.next();Tr!==null&&!Dr.done;Rr++,Dr=xr.next()){Tr.index>Rr?(Nr=Tr,Tr=null):Nr=Tr.sibling;var Ir=dr(mr,Tr,Dr.value,vr);if(Ir===null){Tr===null&&(Tr=Nr);break}tr&&Tr&&Ir.alternate===null&&er(mr,Tr),yr=sr(Ir,yr,Rr),Er===null?_r=Ir:Er.sibling=Ir,Er=Ir,Tr=Nr}if(Dr.done)return rr(mr,Tr),I$1&&tg(mr,Rr),_r;if(Tr===null){for(;!Dr.done;Rr++,Dr=xr.next())Dr=hr(mr,Dr.value,vr),Dr!==null&&(yr=sr(Dr,yr,Rr),Er===null?_r=Dr:Er.sibling=Dr,Er=Dr);return I$1&&tg(mr,Rr),_r}for(Tr=nr(mr,Tr);!Dr.done;Rr++,Dr=xr.next())Dr=fr(Tr,mr,Rr,Dr.value,vr),Dr!==null&&(tr&&Dr.alternate!==null&&Tr.delete(Dr.key===null?Rr:Dr.key),yr=sr(Dr,yr,Rr),Er===null?_r=Dr:Er.sibling=Dr,Er=Dr);return tr&&Tr.forEach(function(Or){return er(mr,Or)}),I$1&&tg(mr,Rr),_r}function pr(mr,yr,xr,vr){if(typeof xr=="object"&&xr!==null&&xr.type===ya&&xr.key===null&&(xr=xr.props.children),typeof xr=="object"&&xr!==null){switch(xr.$$typeof){case va:e:{for(var _r=xr.key,Er=yr;Er!==null;){if(Er.key===_r){if(_r=xr.type,_r===ya){if(Er.tag===7){rr(mr,Er.sibling),yr=ir(Er,xr.props.children),yr.return=mr,mr=yr;break e}}else if(Er.elementType===_r||typeof _r=="object"&&_r!==null&&_r.$$typeof===Ha&&Ng(_r)===Er.type){rr(mr,Er.sibling),yr=ir(Er,xr.props),yr.ref=Lg(mr,Er,xr),yr.return=mr,mr=yr;break e}rr(mr,Er);break}else er(mr,Er);Er=Er.sibling}xr.type===ya?(yr=Tg(xr.props.children,mr.mode,vr,xr.key),yr.return=mr,mr=yr):(vr=Rg(xr.type,xr.key,xr.props,null,mr.mode,vr),vr.ref=Lg(mr,yr,xr),vr.return=mr,mr=vr)}return ar(mr);case wa:e:{for(Er=xr.key;yr!==null;){if(yr.key===Er)if(yr.tag===4&&yr.stateNode.containerInfo===xr.containerInfo&&yr.stateNode.implementation===xr.implementation){rr(mr,yr.sibling),yr=ir(yr,xr.children||[]),yr.return=mr,mr=yr;break e}else{rr(mr,yr);break}else er(mr,yr);yr=yr.sibling}yr=Sg(xr,mr.mode,vr),yr.return=mr,mr=yr}return ar(mr);case Ha:return Er=xr._init,pr(mr,yr,Er(xr._payload),vr)}if(eb(xr))return gr(mr,yr,xr,vr);if(Ka(xr))return br(mr,yr,xr,vr);Mg(mr,xr)}return typeof xr=="string"&&xr!==""||typeof xr=="number"?(xr=""+xr,yr!==null&&yr.tag===6?(rr(mr,yr.sibling),yr=ir(yr,xr),yr.return=mr,mr=yr):(rr(mr,yr),yr=Qg(xr,mr.mode,vr),yr.return=mr,mr=yr),ar(mr)):rr(mr,yr)}return pr}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(tr){var er=Wg.current;E$1(Wg),tr._currentValue=er}function bh(tr,er,rr){for(;tr!==null;){var nr=tr.alternate;if((tr.childLanes&er)!==er?(tr.childLanes|=er,nr!==null&&(nr.childLanes|=er)):nr!==null&&(nr.childLanes&er)!==er&&(nr.childLanes|=er),tr===rr)break;tr=tr.return}}function ch(tr,er){Xg=tr,Zg=Yg=null,tr=tr.dependencies,tr!==null&&tr.firstContext!==null&&(tr.lanes&er&&(dh=!0),tr.firstContext=null)}function eh(tr){var er=tr._currentValue;if(Zg!==tr)if(tr={context:tr,memoizedValue:er,next:null},Yg===null){if(Xg===null)throw Error(p$2(308));Yg=tr,Xg.dependencies={lanes:0,firstContext:tr}}else Yg=Yg.next=tr;return er}var fh=null;function gh(tr){fh===null?fh=[tr]:fh.push(tr)}function hh(tr,er,rr,nr){var ir=er.interleaved;return ir===null?(rr.next=rr,gh(er)):(rr.next=ir.next,ir.next=rr),er.interleaved=rr,ih(tr,nr)}function ih(tr,er){tr.lanes|=er;var rr=tr.alternate;for(rr!==null&&(rr.lanes|=er),rr=tr,tr=tr.return;tr!==null;)tr.childLanes|=er,rr=tr.alternate,rr!==null&&(rr.childLanes|=er),rr=tr,tr=tr.return;return rr.tag===3?rr.stateNode:null}var jh=!1;function kh(tr){tr.updateQueue={baseState:tr.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(tr,er){tr=tr.updateQueue,er.updateQueue===tr&&(er.updateQueue={baseState:tr.baseState,firstBaseUpdate:tr.firstBaseUpdate,lastBaseUpdate:tr.lastBaseUpdate,shared:tr.shared,effects:tr.effects})}function mh(tr,er){return{eventTime:tr,lane:er,tag:0,payload:null,callback:null,next:null}}function nh(tr,er,rr){var nr=tr.updateQueue;if(nr===null)return null;if(nr=nr.shared,K$1&2){var ir=nr.pending;return ir===null?er.next=er:(er.next=ir.next,ir.next=er),nr.pending=er,ih(tr,rr)}return ir=nr.interleaved,ir===null?(er.next=er,gh(nr)):(er.next=ir.next,ir.next=er),nr.interleaved=er,ih(tr,rr)}function oh(tr,er,rr){if(er=er.updateQueue,er!==null&&(er=er.shared,(rr&4194240)!==0)){var nr=er.lanes;nr&=tr.pendingLanes,rr|=nr,er.lanes=rr,Cc(tr,rr)}}function ph(tr,er){var rr=tr.updateQueue,nr=tr.alternate;if(nr!==null&&(nr=nr.updateQueue,rr===nr)){var ir=null,sr=null;if(rr=rr.firstBaseUpdate,rr!==null){do{var ar={eventTime:rr.eventTime,lane:rr.lane,tag:rr.tag,payload:rr.payload,callback:rr.callback,next:null};sr===null?ir=sr=ar:sr=sr.next=ar,rr=rr.next}while(rr!==null);sr===null?ir=sr=er:sr=sr.next=er}else ir=sr=er;rr={baseState:nr.baseState,firstBaseUpdate:ir,lastBaseUpdate:sr,shared:nr.shared,effects:nr.effects},tr.updateQueue=rr;return}tr=rr.lastBaseUpdate,tr===null?rr.firstBaseUpdate=er:tr.next=er,rr.lastBaseUpdate=er}function qh(tr,er,rr,nr){var ir=tr.updateQueue;jh=!1;var sr=ir.firstBaseUpdate,ar=ir.lastBaseUpdate,cr=ir.shared.pending;if(cr!==null){ir.shared.pending=null;var lr=cr,or=lr.next;lr.next=null,ar===null?sr=or:ar.next=or,ar=lr;var ur=tr.alternate;ur!==null&&(ur=ur.updateQueue,cr=ur.lastBaseUpdate,cr!==ar&&(cr===null?ur.firstBaseUpdate=or:cr.next=or,ur.lastBaseUpdate=lr))}if(sr!==null){var hr=ir.baseState;ar=0,ur=or=lr=null,cr=sr;do{var dr=cr.lane,fr=cr.eventTime;if((nr&dr)===dr){ur!==null&&(ur=ur.next={eventTime:fr,lane:0,tag:cr.tag,payload:cr.payload,callback:cr.callback,next:null});e:{var gr=tr,br=cr;switch(dr=er,fr=rr,br.tag){case 1:if(gr=br.payload,typeof gr=="function"){hr=gr.call(fr,hr,dr);break e}hr=gr;break e;case 3:gr.flags=gr.flags&-65537|128;case 0:if(gr=br.payload,dr=typeof gr=="function"?gr.call(fr,hr,dr):gr,dr==null)break e;hr=A$1({},hr,dr);break e;case 2:jh=!0}}cr.callback!==null&&cr.lane!==0&&(tr.flags|=64,dr=ir.effects,dr===null?ir.effects=[cr]:dr.push(cr))}else fr={eventTime:fr,lane:dr,tag:cr.tag,payload:cr.payload,callback:cr.callback,next:null},ur===null?(or=ur=fr,lr=hr):ur=ur.next=fr,ar|=dr;if(cr=cr.next,cr===null){if(cr=ir.shared.pending,cr===null)break;dr=cr,cr=dr.next,dr.next=null,ir.lastBaseUpdate=dr,ir.shared.pending=null}}while(!0);if(ur===null&&(lr=hr),ir.baseState=lr,ir.firstBaseUpdate=or,ir.lastBaseUpdate=ur,er=ir.shared.interleaved,er!==null){ir=er;do ar|=ir.lane,ir=ir.next;while(ir!==er)}else sr===null&&(ir.shared.lanes=0);rh|=ar,tr.lanes=ar,tr.memoizedState=hr}}function sh(tr,er,rr){if(tr=er.effects,er.effects=null,tr!==null)for(er=0;er<tr.length;er++){var nr=tr[er],ir=nr.callback;if(ir!==null){if(nr.callback=null,nr=rr,typeof ir!="function")throw Error(p$2(191,ir));ir.call(nr)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(tr){if(tr===th)throw Error(p$2(174));return tr}function yh(tr,er){switch(G$1(wh,er),G$1(vh,tr),G$1(uh,th),tr=er.nodeType,tr){case 9:case 11:er=(er=er.documentElement)?er.namespaceURI:lb(null,"");break;default:tr=tr===8?er.parentNode:er,er=tr.namespaceURI||null,tr=tr.tagName,er=lb(er,tr)}E$1(uh),G$1(uh,er)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(tr){xh(wh.current);var er=xh(uh.current),rr=lb(er,tr.type);er!==rr&&(G$1(vh,tr),G$1(uh,rr))}function Bh(tr){vh.current===tr&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(tr){for(var er=tr;er!==null;){if(er.tag===13){var rr=er.memoizedState;if(rr!==null&&(rr=rr.dehydrated,rr===null||rr.data==="$?"||rr.data==="$!"))return er}else if(er.tag===19&&er.memoizedProps.revealOrder!==void 0){if(er.flags&128)return er}else if(er.child!==null){er.child.return=er,er=er.child;continue}if(er===tr)break;for(;er.sibling===null;){if(er.return===null||er.return===tr)return null;er=er.return}er.sibling.return=er.return,er=er.sibling}return null}var Dh=[];function Eh(){for(var tr=0;tr<Dh.length;tr++)Dh[tr]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$2(){throw Error(p$2(321))}function Mh(tr,er){if(er===null)return!1;for(var rr=0;rr<er.length&&rr<tr.length;rr++)if(!He(tr[rr],er[rr]))return!1;return!0}function Nh(tr,er,rr,nr,ir,sr){if(Hh=sr,M$1=er,er.memoizedState=null,er.updateQueue=null,er.lanes=0,Fh.current=tr===null||tr.memoizedState===null?Oh:Ph,tr=rr(nr,ir),Jh){sr=0;do{if(Jh=!1,Kh=0,25<=sr)throw Error(p$2(301));sr+=1,O$1=N$1=null,er.updateQueue=null,Fh.current=Qh,tr=rr(nr,ir)}while(Jh)}if(Fh.current=Rh,er=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,er)throw Error(p$2(300));return tr}function Sh(){var tr=Kh!==0;return Kh=0,tr}function Th(){var tr={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=tr:O$1=O$1.next=tr,O$1}function Uh(){if(N$1===null){var tr=M$1.alternate;tr=tr!==null?tr.memoizedState:null}else tr=N$1.next;var er=O$1===null?M$1.memoizedState:O$1.next;if(er!==null)O$1=er,N$1=tr;else{if(tr===null)throw Error(p$2(310));N$1=tr,tr={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=tr:O$1=O$1.next=tr}return O$1}function Vh(tr,er){return typeof er=="function"?er(tr):er}function Wh(tr){var er=Uh(),rr=er.queue;if(rr===null)throw Error(p$2(311));rr.lastRenderedReducer=tr;var nr=N$1,ir=nr.baseQueue,sr=rr.pending;if(sr!==null){if(ir!==null){var ar=ir.next;ir.next=sr.next,sr.next=ar}nr.baseQueue=ir=sr,rr.pending=null}if(ir!==null){sr=ir.next,nr=nr.baseState;var cr=ar=null,lr=null,or=sr;do{var ur=or.lane;if((Hh&ur)===ur)lr!==null&&(lr=lr.next={lane:0,action:or.action,hasEagerState:or.hasEagerState,eagerState:or.eagerState,next:null}),nr=or.hasEagerState?or.eagerState:tr(nr,or.action);else{var hr={lane:ur,action:or.action,hasEagerState:or.hasEagerState,eagerState:or.eagerState,next:null};lr===null?(cr=lr=hr,ar=nr):lr=lr.next=hr,M$1.lanes|=ur,rh|=ur}or=or.next}while(or!==null&&or!==sr);lr===null?ar=nr:lr.next=cr,He(nr,er.memoizedState)||(dh=!0),er.memoizedState=nr,er.baseState=ar,er.baseQueue=lr,rr.lastRenderedState=nr}if(tr=rr.interleaved,tr!==null){ir=tr;do sr=ir.lane,M$1.lanes|=sr,rh|=sr,ir=ir.next;while(ir!==tr)}else ir===null&&(rr.lanes=0);return[er.memoizedState,rr.dispatch]}function Xh(tr){var er=Uh(),rr=er.queue;if(rr===null)throw Error(p$2(311));rr.lastRenderedReducer=tr;var nr=rr.dispatch,ir=rr.pending,sr=er.memoizedState;if(ir!==null){rr.pending=null;var ar=ir=ir.next;do sr=tr(sr,ar.action),ar=ar.next;while(ar!==ir);He(sr,er.memoizedState)||(dh=!0),er.memoizedState=sr,er.baseQueue===null&&(er.baseState=sr),rr.lastRenderedState=sr}return[sr,nr]}function Yh(){}function Zh(tr,er){var rr=M$1,nr=Uh(),ir=er(),sr=!He(nr.memoizedState,ir);if(sr&&(nr.memoizedState=ir,dh=!0),nr=nr.queue,$h(ai.bind(null,rr,nr,tr),[tr]),nr.getSnapshot!==er||sr||O$1!==null&&O$1.memoizedState.tag&1){if(rr.flags|=2048,bi(9,ci.bind(null,rr,nr,ir,er),void 0,null),Q$1===null)throw Error(p$2(349));Hh&30||di(rr,er,ir)}return ir}function di(tr,er,rr){tr.flags|=16384,tr={getSnapshot:er,value:rr},er=M$1.updateQueue,er===null?(er={lastEffect:null,stores:null},M$1.updateQueue=er,er.stores=[tr]):(rr=er.stores,rr===null?er.stores=[tr]:rr.push(tr))}function ci(tr,er,rr,nr){er.value=rr,er.getSnapshot=nr,ei(er)&&fi(tr)}function ai(tr,er,rr){return rr(function(){ei(er)&&fi(tr)})}function ei(tr){var er=tr.getSnapshot;tr=tr.value;try{var rr=er();return!He(tr,rr)}catch{return!0}}function fi(tr){var er=ih(tr,1);er!==null&&gi(er,tr,1,-1)}function hi(tr){var er=Th();return typeof tr=="function"&&(tr=tr()),er.memoizedState=er.baseState=tr,tr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:tr},er.queue=tr,tr=tr.dispatch=ii.bind(null,M$1,tr),[er.memoizedState,tr]}function bi(tr,er,rr,nr){return tr={tag:tr,create:er,destroy:rr,deps:nr,next:null},er=M$1.updateQueue,er===null?(er={lastEffect:null,stores:null},M$1.updateQueue=er,er.lastEffect=tr.next=tr):(rr=er.lastEffect,rr===null?er.lastEffect=tr.next=tr:(nr=rr.next,rr.next=tr,tr.next=nr,er.lastEffect=tr)),tr}function ji(){return Uh().memoizedState}function ki(tr,er,rr,nr){var ir=Th();M$1.flags|=tr,ir.memoizedState=bi(1|er,rr,void 0,nr===void 0?null:nr)}function li(tr,er,rr,nr){var ir=Uh();nr=nr===void 0?null:nr;var sr=void 0;if(N$1!==null){var ar=N$1.memoizedState;if(sr=ar.destroy,nr!==null&&Mh(nr,ar.deps)){ir.memoizedState=bi(er,rr,sr,nr);return}}M$1.flags|=tr,ir.memoizedState=bi(1|er,rr,sr,nr)}function mi(tr,er){return ki(8390656,8,tr,er)}function $h(tr,er){return li(2048,8,tr,er)}function ni(tr,er){return li(4,2,tr,er)}function oi(tr,er){return li(4,4,tr,er)}function pi$2(tr,er){if(typeof er=="function")return tr=tr(),er(tr),function(){er(null)};if(er!=null)return tr=tr(),er.current=tr,function(){er.current=null}}function qi(tr,er,rr){return rr=rr!=null?rr.concat([tr]):null,li(4,4,pi$2.bind(null,er,tr),rr)}function ri(){}function si(tr,er){var rr=Uh();er=er===void 0?null:er;var nr=rr.memoizedState;return nr!==null&&er!==null&&Mh(er,nr[1])?nr[0]:(rr.memoizedState=[tr,er],tr)}function ti(tr,er){var rr=Uh();er=er===void 0?null:er;var nr=rr.memoizedState;return nr!==null&&er!==null&&Mh(er,nr[1])?nr[0]:(tr=tr(),rr.memoizedState=[tr,er],tr)}function ui(tr,er,rr){return Hh&21?(He(rr,er)||(rr=yc(),M$1.lanes|=rr,rh|=rr,tr.baseState=!0),er):(tr.baseState&&(tr.baseState=!1,dh=!0),tr.memoizedState=rr)}function vi(tr,er){var rr=C$2;C$2=rr!==0&&4>rr?rr:4,tr(!0);var nr=Gh.transition;Gh.transition={};try{tr(!1),er()}finally{C$2=rr,Gh.transition=nr}}function wi(){return Uh().memoizedState}function xi(tr,er,rr){var nr=yi(tr);if(rr={lane:nr,action:rr,hasEagerState:!1,eagerState:null,next:null},zi(tr))Ai(er,rr);else if(rr=hh(tr,er,rr,nr),rr!==null){var ir=R$1();gi(rr,tr,nr,ir),Bi(rr,er,nr)}}function ii(tr,er,rr){var nr=yi(tr),ir={lane:nr,action:rr,hasEagerState:!1,eagerState:null,next:null};if(zi(tr))Ai(er,ir);else{var sr=tr.alternate;if(tr.lanes===0&&(sr===null||sr.lanes===0)&&(sr=er.lastRenderedReducer,sr!==null))try{var ar=er.lastRenderedState,cr=sr(ar,rr);if(ir.hasEagerState=!0,ir.eagerState=cr,He(cr,ar)){var lr=er.interleaved;lr===null?(ir.next=ir,gh(er)):(ir.next=lr.next,lr.next=ir),er.interleaved=ir;return}}catch{}finally{}rr=hh(tr,er,ir,nr),rr!==null&&(ir=R$1(),gi(rr,tr,nr,ir),Bi(rr,er,nr))}}function zi(tr){var er=tr.alternate;return tr===M$1||er!==null&&er===M$1}function Ai(tr,er){Jh=Ih=!0;var rr=tr.pending;rr===null?er.next=er:(er.next=rr.next,rr.next=er),tr.pending=er}function Bi(tr,er,rr){if(rr&4194240){var nr=er.lanes;nr&=tr.pendingLanes,rr|=nr,er.lanes=rr,Cc(tr,rr)}}var Rh={readContext:eh,useCallback:P$2,useContext:P$2,useEffect:P$2,useImperativeHandle:P$2,useInsertionEffect:P$2,useLayoutEffect:P$2,useMemo:P$2,useReducer:P$2,useRef:P$2,useState:P$2,useDebugValue:P$2,useDeferredValue:P$2,useTransition:P$2,useMutableSource:P$2,useSyncExternalStore:P$2,useId:P$2,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(tr,er){return Th().memoizedState=[tr,er===void 0?null:er],tr},useContext:eh,useEffect:mi,useImperativeHandle:function(tr,er,rr){return rr=rr!=null?rr.concat([tr]):null,ki(4194308,4,pi$2.bind(null,er,tr),rr)},useLayoutEffect:function(tr,er){return ki(4194308,4,tr,er)},useInsertionEffect:function(tr,er){return ki(4,2,tr,er)},useMemo:function(tr,er){var rr=Th();return er=er===void 0?null:er,tr=tr(),rr.memoizedState=[tr,er],tr},useReducer:function(tr,er,rr){var nr=Th();return er=rr!==void 0?rr(er):er,nr.memoizedState=nr.baseState=er,tr={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:er},nr.queue=tr,tr=tr.dispatch=xi.bind(null,M$1,tr),[nr.memoizedState,tr]},useRef:function(tr){var er=Th();return tr={current:tr},er.memoizedState=tr},useState:hi,useDebugValue:ri,useDeferredValue:function(tr){return Th().memoizedState=tr},useTransition:function(){var tr=hi(!1),er=tr[0];return tr=vi.bind(null,tr[1]),Th().memoizedState=tr,[er,tr]},useMutableSource:function(){},useSyncExternalStore:function(tr,er,rr){var nr=M$1,ir=Th();if(I$1){if(rr===void 0)throw Error(p$2(407));rr=rr()}else{if(rr=er(),Q$1===null)throw Error(p$2(349));Hh&30||di(nr,er,rr)}ir.memoizedState=rr;var sr={value:rr,getSnapshot:er};return ir.queue=sr,mi(ai.bind(null,nr,sr,tr),[tr]),nr.flags|=2048,bi(9,ci.bind(null,nr,sr,rr,er),void 0,null),rr},useId:function(){var tr=Th(),er=Q$1.identifierPrefix;if(I$1){var rr=sg,nr=rg;rr=(nr&~(1<<32-oc(nr)-1)).toString(32)+rr,er=":"+er+"R"+rr,rr=Kh++,0<rr&&(er+="H"+rr.toString(32)),er+=":"}else rr=Lh++,er=":"+er+"r"+rr.toString(32)+":";return tr.memoizedState=er},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(tr){var er=Uh();return ui(er,N$1.memoizedState,tr)},useTransition:function(){var tr=Wh(Vh)[0],er=Uh().memoizedState;return[tr,er]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(tr){var er=Uh();return N$1===null?er.memoizedState=tr:ui(er,N$1.memoizedState,tr)},useTransition:function(){var tr=Xh(Vh)[0],er=Uh().memoizedState;return[tr,er]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(tr,er){if(tr&&tr.defaultProps){er=A$1({},er),tr=tr.defaultProps;for(var rr in tr)er[rr]===void 0&&(er[rr]=tr[rr]);return er}return er}function Di(tr,er,rr,nr){er=tr.memoizedState,rr=rr(nr,er),rr=rr==null?er:A$1({},er,rr),tr.memoizedState=rr,tr.lanes===0&&(tr.updateQueue.baseState=rr)}var Ei={isMounted:function(tr){return(tr=tr._reactInternals)?Vb(tr)===tr:!1},enqueueSetState:function(tr,er,rr){tr=tr._reactInternals;var nr=R$1(),ir=yi(tr),sr=mh(nr,ir);sr.payload=er,rr!=null&&(sr.callback=rr),er=nh(tr,sr,ir),er!==null&&(gi(er,tr,ir,nr),oh(er,tr,ir))},enqueueReplaceState:function(tr,er,rr){tr=tr._reactInternals;var nr=R$1(),ir=yi(tr),sr=mh(nr,ir);sr.tag=1,sr.payload=er,rr!=null&&(sr.callback=rr),er=nh(tr,sr,ir),er!==null&&(gi(er,tr,ir,nr),oh(er,tr,ir))},enqueueForceUpdate:function(tr,er){tr=tr._reactInternals;var rr=R$1(),nr=yi(tr),ir=mh(rr,nr);ir.tag=2,er!=null&&(ir.callback=er),er=nh(tr,ir,nr),er!==null&&(gi(er,tr,nr,rr),oh(er,tr,nr))}};function Fi(tr,er,rr,nr,ir,sr,ar){return tr=tr.stateNode,typeof tr.shouldComponentUpdate=="function"?tr.shouldComponentUpdate(nr,sr,ar):er.prototype&&er.prototype.isPureReactComponent?!Ie$1(rr,nr)||!Ie$1(ir,sr):!0}function Gi(tr,er,rr){var nr=!1,ir=Vf,sr=er.contextType;return typeof sr=="object"&&sr!==null?sr=eh(sr):(ir=Zf(er)?Xf:H$1.current,nr=er.contextTypes,sr=(nr=nr!=null)?Yf(tr,ir):Vf),er=new er(rr,sr),tr.memoizedState=er.state!==null&&er.state!==void 0?er.state:null,er.updater=Ei,tr.stateNode=er,er._reactInternals=tr,nr&&(tr=tr.stateNode,tr.__reactInternalMemoizedUnmaskedChildContext=ir,tr.__reactInternalMemoizedMaskedChildContext=sr),er}function Hi(tr,er,rr,nr){tr=er.state,typeof er.componentWillReceiveProps=="function"&&er.componentWillReceiveProps(rr,nr),typeof er.UNSAFE_componentWillReceiveProps=="function"&&er.UNSAFE_componentWillReceiveProps(rr,nr),er.state!==tr&&Ei.enqueueReplaceState(er,er.state,null)}function Ii(tr,er,rr,nr){var ir=tr.stateNode;ir.props=rr,ir.state=tr.memoizedState,ir.refs={},kh(tr);var sr=er.contextType;typeof sr=="object"&&sr!==null?ir.context=eh(sr):(sr=Zf(er)?Xf:H$1.current,ir.context=Yf(tr,sr)),ir.state=tr.memoizedState,sr=er.getDerivedStateFromProps,typeof sr=="function"&&(Di(tr,er,sr,rr),ir.state=tr.memoizedState),typeof er.getDerivedStateFromProps=="function"||typeof ir.getSnapshotBeforeUpdate=="function"||typeof ir.UNSAFE_componentWillMount!="function"&&typeof ir.componentWillMount!="function"||(er=ir.state,typeof ir.componentWillMount=="function"&&ir.componentWillMount(),typeof ir.UNSAFE_componentWillMount=="function"&&ir.UNSAFE_componentWillMount(),er!==ir.state&&Ei.enqueueReplaceState(ir,ir.state,null),qh(tr,rr,ir,nr),ir.state=tr.memoizedState),typeof ir.componentDidMount=="function"&&(tr.flags|=4194308)}function Ji(tr,er){try{var rr="",nr=er;do rr+=Pa(nr),nr=nr.return;while(nr);var ir=rr}catch(sr){ir=`
Error generating stack: `+sr.message+`
`+sr.stack}return{value:tr,source:er,stack:ir,digest:null}}function Ki(tr,er,rr){return{value:tr,source:null,stack:rr??null,digest:er??null}}function Li(tr,er){try{console.error(er.value)}catch(rr){setTimeout(function(){throw rr})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(tr,er,rr){rr=mh(-1,rr),rr.tag=3,rr.payload={element:null};var nr=er.value;return rr.callback=function(){Oi||(Oi=!0,Pi=nr),Li(tr,er)},rr}function Qi(tr,er,rr){rr=mh(-1,rr),rr.tag=3;var nr=tr.type.getDerivedStateFromError;if(typeof nr=="function"){var ir=er.value;rr.payload=function(){return nr(ir)},rr.callback=function(){Li(tr,er)}}var sr=tr.stateNode;return sr!==null&&typeof sr.componentDidCatch=="function"&&(rr.callback=function(){Li(tr,er),typeof nr!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ar=er.stack;this.componentDidCatch(er.value,{componentStack:ar!==null?ar:""})}),rr}function Si(tr,er,rr){var nr=tr.pingCache;if(nr===null){nr=tr.pingCache=new Mi;var ir=new Set;nr.set(er,ir)}else ir=nr.get(er),ir===void 0&&(ir=new Set,nr.set(er,ir));ir.has(rr)||(ir.add(rr),tr=Ti.bind(null,tr,er,rr),er.then(tr,tr))}function Ui(tr){do{var er;if((er=tr.tag===13)&&(er=tr.memoizedState,er=er!==null?er.dehydrated!==null:!0),er)return tr;tr=tr.return}while(tr!==null);return null}function Vi(tr,er,rr,nr,ir){return tr.mode&1?(tr.flags|=65536,tr.lanes=ir,tr):(tr===er?tr.flags|=65536:(tr.flags|=128,rr.flags|=131072,rr.flags&=-52805,rr.tag===1&&(rr.alternate===null?rr.tag=17:(er=mh(-1,1),er.tag=2,nh(rr,er,1))),rr.lanes|=1),tr)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(tr,er,rr,nr){er.child=tr===null?Vg(er,null,rr,nr):Ug(er,tr.child,rr,nr)}function Yi(tr,er,rr,nr,ir){rr=rr.render;var sr=er.ref;return ch(er,ir),nr=Nh(tr,er,rr,nr,sr,ir),rr=Sh(),tr!==null&&!dh?(er.updateQueue=tr.updateQueue,er.flags&=-2053,tr.lanes&=~ir,Zi(tr,er,ir)):(I$1&&rr&&vg(er),er.flags|=1,Xi(tr,er,nr,ir),er.child)}function $i(tr,er,rr,nr,ir){if(tr===null){var sr=rr.type;return typeof sr=="function"&&!aj(sr)&&sr.defaultProps===void 0&&rr.compare===null&&rr.defaultProps===void 0?(er.tag=15,er.type=sr,bj(tr,er,sr,nr,ir)):(tr=Rg(rr.type,null,nr,er,er.mode,ir),tr.ref=er.ref,tr.return=er,er.child=tr)}if(sr=tr.child,!(tr.lanes&ir)){var ar=sr.memoizedProps;if(rr=rr.compare,rr=rr!==null?rr:Ie$1,rr(ar,nr)&&tr.ref===er.ref)return Zi(tr,er,ir)}return er.flags|=1,tr=Pg(sr,nr),tr.ref=er.ref,tr.return=er,er.child=tr}function bj(tr,er,rr,nr,ir){if(tr!==null){var sr=tr.memoizedProps;if(Ie$1(sr,nr)&&tr.ref===er.ref)if(dh=!1,er.pendingProps=nr=sr,(tr.lanes&ir)!==0)tr.flags&131072&&(dh=!0);else return er.lanes=tr.lanes,Zi(tr,er,ir)}return cj(tr,er,rr,nr,ir)}function dj(tr,er,rr){var nr=er.pendingProps,ir=nr.children,sr=tr!==null?tr.memoizedState:null;if(nr.mode==="hidden")if(!(er.mode&1))er.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=rr;else{if(!(rr&1073741824))return tr=sr!==null?sr.baseLanes|rr:rr,er.lanes=er.childLanes=1073741824,er.memoizedState={baseLanes:tr,cachePool:null,transitions:null},er.updateQueue=null,G$1(ej,fj),fj|=tr,null;er.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr=sr!==null?sr.baseLanes:rr,G$1(ej,fj),fj|=nr}else sr!==null?(nr=sr.baseLanes|rr,er.memoizedState=null):nr=rr,G$1(ej,fj),fj|=nr;return Xi(tr,er,ir,rr),er.child}function gj(tr,er){var rr=er.ref;(tr===null&&rr!==null||tr!==null&&tr.ref!==rr)&&(er.flags|=512,er.flags|=2097152)}function cj(tr,er,rr,nr,ir){var sr=Zf(rr)?Xf:H$1.current;return sr=Yf(er,sr),ch(er,ir),rr=Nh(tr,er,rr,nr,sr,ir),nr=Sh(),tr!==null&&!dh?(er.updateQueue=tr.updateQueue,er.flags&=-2053,tr.lanes&=~ir,Zi(tr,er,ir)):(I$1&&nr&&vg(er),er.flags|=1,Xi(tr,er,rr,ir),er.child)}function hj(tr,er,rr,nr,ir){if(Zf(rr)){var sr=!0;cg(er)}else sr=!1;if(ch(er,ir),er.stateNode===null)ij(tr,er),Gi(er,rr,nr),Ii(er,rr,nr,ir),nr=!0;else if(tr===null){var ar=er.stateNode,cr=er.memoizedProps;ar.props=cr;var lr=ar.context,or=rr.contextType;typeof or=="object"&&or!==null?or=eh(or):(or=Zf(rr)?Xf:H$1.current,or=Yf(er,or));var ur=rr.getDerivedStateFromProps,hr=typeof ur=="function"||typeof ar.getSnapshotBeforeUpdate=="function";hr||typeof ar.UNSAFE_componentWillReceiveProps!="function"&&typeof ar.componentWillReceiveProps!="function"||(cr!==nr||lr!==or)&&Hi(er,ar,nr,or),jh=!1;var dr=er.memoizedState;ar.state=dr,qh(er,nr,ar,ir),lr=er.memoizedState,cr!==nr||dr!==lr||Wf.current||jh?(typeof ur=="function"&&(Di(er,rr,ur,nr),lr=er.memoizedState),(cr=jh||Fi(er,rr,cr,nr,dr,lr,or))?(hr||typeof ar.UNSAFE_componentWillMount!="function"&&typeof ar.componentWillMount!="function"||(typeof ar.componentWillMount=="function"&&ar.componentWillMount(),typeof ar.UNSAFE_componentWillMount=="function"&&ar.UNSAFE_componentWillMount()),typeof ar.componentDidMount=="function"&&(er.flags|=4194308)):(typeof ar.componentDidMount=="function"&&(er.flags|=4194308),er.memoizedProps=nr,er.memoizedState=lr),ar.props=nr,ar.state=lr,ar.context=or,nr=cr):(typeof ar.componentDidMount=="function"&&(er.flags|=4194308),nr=!1)}else{ar=er.stateNode,lh(tr,er),cr=er.memoizedProps,or=er.type===er.elementType?cr:Ci(er.type,cr),ar.props=or,hr=er.pendingProps,dr=ar.context,lr=rr.contextType,typeof lr=="object"&&lr!==null?lr=eh(lr):(lr=Zf(rr)?Xf:H$1.current,lr=Yf(er,lr));var fr=rr.getDerivedStateFromProps;(ur=typeof fr=="function"||typeof ar.getSnapshotBeforeUpdate=="function")||typeof ar.UNSAFE_componentWillReceiveProps!="function"&&typeof ar.componentWillReceiveProps!="function"||(cr!==hr||dr!==lr)&&Hi(er,ar,nr,lr),jh=!1,dr=er.memoizedState,ar.state=dr,qh(er,nr,ar,ir);var gr=er.memoizedState;cr!==hr||dr!==gr||Wf.current||jh?(typeof fr=="function"&&(Di(er,rr,fr,nr),gr=er.memoizedState),(or=jh||Fi(er,rr,or,nr,dr,gr,lr)||!1)?(ur||typeof ar.UNSAFE_componentWillUpdate!="function"&&typeof ar.componentWillUpdate!="function"||(typeof ar.componentWillUpdate=="function"&&ar.componentWillUpdate(nr,gr,lr),typeof ar.UNSAFE_componentWillUpdate=="function"&&ar.UNSAFE_componentWillUpdate(nr,gr,lr)),typeof ar.componentDidUpdate=="function"&&(er.flags|=4),typeof ar.getSnapshotBeforeUpdate=="function"&&(er.flags|=1024)):(typeof ar.componentDidUpdate!="function"||cr===tr.memoizedProps&&dr===tr.memoizedState||(er.flags|=4),typeof ar.getSnapshotBeforeUpdate!="function"||cr===tr.memoizedProps&&dr===tr.memoizedState||(er.flags|=1024),er.memoizedProps=nr,er.memoizedState=gr),ar.props=nr,ar.state=gr,ar.context=lr,nr=or):(typeof ar.componentDidUpdate!="function"||cr===tr.memoizedProps&&dr===tr.memoizedState||(er.flags|=4),typeof ar.getSnapshotBeforeUpdate!="function"||cr===tr.memoizedProps&&dr===tr.memoizedState||(er.flags|=1024),nr=!1)}return jj(tr,er,rr,nr,sr,ir)}function jj(tr,er,rr,nr,ir,sr){gj(tr,er);var ar=(er.flags&128)!==0;if(!nr&&!ar)return ir&&dg(er,rr,!1),Zi(tr,er,sr);nr=er.stateNode,Wi.current=er;var cr=ar&&typeof rr.getDerivedStateFromError!="function"?null:nr.render();return er.flags|=1,tr!==null&&ar?(er.child=Ug(er,tr.child,null,sr),er.child=Ug(er,null,cr,sr)):Xi(tr,er,cr,sr),er.memoizedState=nr.state,ir&&dg(er,rr,!0),er.child}function kj(tr){var er=tr.stateNode;er.pendingContext?ag(tr,er.pendingContext,er.pendingContext!==er.context):er.context&&ag(tr,er.context,!1),yh(tr,er.containerInfo)}function lj(tr,er,rr,nr,ir){return Ig(),Jg(ir),er.flags|=256,Xi(tr,er,rr,nr),er.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(tr){return{baseLanes:tr,cachePool:null,transitions:null}}function oj(tr,er,rr){var nr=er.pendingProps,ir=L$1.current,sr=!1,ar=(er.flags&128)!==0,cr;if((cr=ar)||(cr=tr!==null&&tr.memoizedState===null?!1:(ir&2)!==0),cr?(sr=!0,er.flags&=-129):(tr===null||tr.memoizedState!==null)&&(ir|=1),G$1(L$1,ir&1),tr===null)return Eg(er),tr=er.memoizedState,tr!==null&&(tr=tr.dehydrated,tr!==null)?(er.mode&1?tr.data==="$!"?er.lanes=8:er.lanes=1073741824:er.lanes=1,null):(ar=nr.children,tr=nr.fallback,sr?(nr=er.mode,sr=er.child,ar={mode:"hidden",children:ar},!(nr&1)&&sr!==null?(sr.childLanes=0,sr.pendingProps=ar):sr=pj(ar,nr,0,null),tr=Tg(tr,nr,rr,null),sr.return=er,tr.return=er,sr.sibling=tr,er.child=sr,er.child.memoizedState=nj(rr),er.memoizedState=mj,tr):qj(er,ar));if(ir=tr.memoizedState,ir!==null&&(cr=ir.dehydrated,cr!==null))return rj(tr,er,ar,nr,cr,ir,rr);if(sr){sr=nr.fallback,ar=er.mode,ir=tr.child,cr=ir.sibling;var lr={mode:"hidden",children:nr.children};return!(ar&1)&&er.child!==ir?(nr=er.child,nr.childLanes=0,nr.pendingProps=lr,er.deletions=null):(nr=Pg(ir,lr),nr.subtreeFlags=ir.subtreeFlags&14680064),cr!==null?sr=Pg(cr,sr):(sr=Tg(sr,ar,rr,null),sr.flags|=2),sr.return=er,nr.return=er,nr.sibling=sr,er.child=nr,nr=sr,sr=er.child,ar=tr.child.memoizedState,ar=ar===null?nj(rr):{baseLanes:ar.baseLanes|rr,cachePool:null,transitions:ar.transitions},sr.memoizedState=ar,sr.childLanes=tr.childLanes&~rr,er.memoizedState=mj,nr}return sr=tr.child,tr=sr.sibling,nr=Pg(sr,{mode:"visible",children:nr.children}),!(er.mode&1)&&(nr.lanes=rr),nr.return=er,nr.sibling=null,tr!==null&&(rr=er.deletions,rr===null?(er.deletions=[tr],er.flags|=16):rr.push(tr)),er.child=nr,er.memoizedState=null,nr}function qj(tr,er){return er=pj({mode:"visible",children:er},tr.mode,0,null),er.return=tr,tr.child=er}function sj(tr,er,rr,nr){return nr!==null&&Jg(nr),Ug(er,tr.child,null,rr),tr=qj(er,er.pendingProps.children),tr.flags|=2,er.memoizedState=null,tr}function rj(tr,er,rr,nr,ir,sr,ar){if(rr)return er.flags&256?(er.flags&=-257,nr=Ki(Error(p$2(422))),sj(tr,er,ar,nr)):er.memoizedState!==null?(er.child=tr.child,er.flags|=128,null):(sr=nr.fallback,ir=er.mode,nr=pj({mode:"visible",children:nr.children},ir,0,null),sr=Tg(sr,ir,ar,null),sr.flags|=2,nr.return=er,sr.return=er,nr.sibling=sr,er.child=nr,er.mode&1&&Ug(er,tr.child,null,ar),er.child.memoizedState=nj(ar),er.memoizedState=mj,sr);if(!(er.mode&1))return sj(tr,er,ar,null);if(ir.data==="$!"){if(nr=ir.nextSibling&&ir.nextSibling.dataset,nr)var cr=nr.dgst;return nr=cr,sr=Error(p$2(419)),nr=Ki(sr,nr,void 0),sj(tr,er,ar,nr)}if(cr=(ar&tr.childLanes)!==0,dh||cr){if(nr=Q$1,nr!==null){switch(ar&-ar){case 4:ir=2;break;case 16:ir=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ir=32;break;case 536870912:ir=268435456;break;default:ir=0}ir=ir&(nr.suspendedLanes|ar)?0:ir,ir!==0&&ir!==sr.retryLane&&(sr.retryLane=ir,ih(tr,ir),gi(nr,tr,ir,-1))}return tj(),nr=Ki(Error(p$2(421))),sj(tr,er,ar,nr)}return ir.data==="$?"?(er.flags|=128,er.child=tr.child,er=uj.bind(null,tr),ir._reactRetry=er,null):(tr=sr.treeContext,yg=Lf(ir.nextSibling),xg=er,I$1=!0,zg=null,tr!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=tr.id,sg=tr.overflow,qg=er),er=qj(er,nr.children),er.flags|=4096,er)}function vj(tr,er,rr){tr.lanes|=er;var nr=tr.alternate;nr!==null&&(nr.lanes|=er),bh(tr.return,er,rr)}function wj(tr,er,rr,nr,ir){var sr=tr.memoizedState;sr===null?tr.memoizedState={isBackwards:er,rendering:null,renderingStartTime:0,last:nr,tail:rr,tailMode:ir}:(sr.isBackwards=er,sr.rendering=null,sr.renderingStartTime=0,sr.last=nr,sr.tail=rr,sr.tailMode=ir)}function xj(tr,er,rr){var nr=er.pendingProps,ir=nr.revealOrder,sr=nr.tail;if(Xi(tr,er,nr.children,rr),nr=L$1.current,nr&2)nr=nr&1|2,er.flags|=128;else{if(tr!==null&&tr.flags&128)e:for(tr=er.child;tr!==null;){if(tr.tag===13)tr.memoizedState!==null&&vj(tr,rr,er);else if(tr.tag===19)vj(tr,rr,er);else if(tr.child!==null){tr.child.return=tr,tr=tr.child;continue}if(tr===er)break e;for(;tr.sibling===null;){if(tr.return===null||tr.return===er)break e;tr=tr.return}tr.sibling.return=tr.return,tr=tr.sibling}nr&=1}if(G$1(L$1,nr),!(er.mode&1))er.memoizedState=null;else switch(ir){case"forwards":for(rr=er.child,ir=null;rr!==null;)tr=rr.alternate,tr!==null&&Ch(tr)===null&&(ir=rr),rr=rr.sibling;rr=ir,rr===null?(ir=er.child,er.child=null):(ir=rr.sibling,rr.sibling=null),wj(er,!1,ir,rr,sr);break;case"backwards":for(rr=null,ir=er.child,er.child=null;ir!==null;){if(tr=ir.alternate,tr!==null&&Ch(tr)===null){er.child=ir;break}tr=ir.sibling,ir.sibling=rr,rr=ir,ir=tr}wj(er,!0,rr,null,sr);break;case"together":wj(er,!1,null,null,void 0);break;default:er.memoizedState=null}return er.child}function ij(tr,er){!(er.mode&1)&&tr!==null&&(tr.alternate=null,er.alternate=null,er.flags|=2)}function Zi(tr,er,rr){if(tr!==null&&(er.dependencies=tr.dependencies),rh|=er.lanes,!(rr&er.childLanes))return null;if(tr!==null&&er.child!==tr.child)throw Error(p$2(153));if(er.child!==null){for(tr=er.child,rr=Pg(tr,tr.pendingProps),er.child=rr,rr.return=er;tr.sibling!==null;)tr=tr.sibling,rr=rr.sibling=Pg(tr,tr.pendingProps),rr.return=er;rr.sibling=null}return er.child}function yj(tr,er,rr){switch(er.tag){case 3:kj(er),Ig();break;case 5:Ah(er);break;case 1:Zf(er.type)&&cg(er);break;case 4:yh(er,er.stateNode.containerInfo);break;case 10:var nr=er.type._context,ir=er.memoizedProps.value;G$1(Wg,nr._currentValue),nr._currentValue=ir;break;case 13:if(nr=er.memoizedState,nr!==null)return nr.dehydrated!==null?(G$1(L$1,L$1.current&1),er.flags|=128,null):rr&er.child.childLanes?oj(tr,er,rr):(G$1(L$1,L$1.current&1),tr=Zi(tr,er,rr),tr!==null?tr.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(nr=(rr&er.childLanes)!==0,tr.flags&128){if(nr)return xj(tr,er,rr);er.flags|=128}if(ir=er.memoizedState,ir!==null&&(ir.rendering=null,ir.tail=null,ir.lastEffect=null),G$1(L$1,L$1.current),nr)break;return null;case 22:case 23:return er.lanes=0,dj(tr,er,rr)}return Zi(tr,er,rr)}var zj,Aj,Bj,Cj;zj=function(tr,er){for(var rr=er.child;rr!==null;){if(rr.tag===5||rr.tag===6)tr.appendChild(rr.stateNode);else if(rr.tag!==4&&rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===er)break;for(;rr.sibling===null;){if(rr.return===null||rr.return===er)return;rr=rr.return}rr.sibling.return=rr.return,rr=rr.sibling}};Aj=function(){};Bj=function(tr,er,rr,nr){var ir=tr.memoizedProps;if(ir!==nr){tr=er.stateNode,xh(uh.current);var sr=null;switch(rr){case"input":ir=Ya(tr,ir),nr=Ya(tr,nr),sr=[];break;case"select":ir=A$1({},ir,{value:void 0}),nr=A$1({},nr,{value:void 0}),sr=[];break;case"textarea":ir=gb(tr,ir),nr=gb(tr,nr),sr=[];break;default:typeof ir.onClick!="function"&&typeof nr.onClick=="function"&&(tr.onclick=Bf)}ub(rr,nr);var ar;rr=null;for(or in ir)if(!nr.hasOwnProperty(or)&&ir.hasOwnProperty(or)&&ir[or]!=null)if(or==="style"){var cr=ir[or];for(ar in cr)cr.hasOwnProperty(ar)&&(rr||(rr={}),rr[ar]="")}else or!=="dangerouslySetInnerHTML"&&or!=="children"&&or!=="suppressContentEditableWarning"&&or!=="suppressHydrationWarning"&&or!=="autoFocus"&&(ea.hasOwnProperty(or)?sr||(sr=[]):(sr=sr||[]).push(or,null));for(or in nr){var lr=nr[or];if(cr=ir!=null?ir[or]:void 0,nr.hasOwnProperty(or)&&lr!==cr&&(lr!=null||cr!=null))if(or==="style")if(cr){for(ar in cr)!cr.hasOwnProperty(ar)||lr&&lr.hasOwnProperty(ar)||(rr||(rr={}),rr[ar]="");for(ar in lr)lr.hasOwnProperty(ar)&&cr[ar]!==lr[ar]&&(rr||(rr={}),rr[ar]=lr[ar])}else rr||(sr||(sr=[]),sr.push(or,rr)),rr=lr;else or==="dangerouslySetInnerHTML"?(lr=lr?lr.__html:void 0,cr=cr?cr.__html:void 0,lr!=null&&cr!==lr&&(sr=sr||[]).push(or,lr)):or==="children"?typeof lr!="string"&&typeof lr!="number"||(sr=sr||[]).push(or,""+lr):or!=="suppressContentEditableWarning"&&or!=="suppressHydrationWarning"&&(ea.hasOwnProperty(or)?(lr!=null&&or==="onScroll"&&D$2("scroll",tr),sr||cr===lr||(sr=[])):(sr=sr||[]).push(or,lr))}rr&&(sr=sr||[]).push("style",rr);var or=sr;(er.updateQueue=or)&&(er.flags|=4)}};Cj=function(tr,er,rr,nr){rr!==nr&&(er.flags|=4)};function Dj(tr,er){if(!I$1)switch(tr.tailMode){case"hidden":er=tr.tail;for(var rr=null;er!==null;)er.alternate!==null&&(rr=er),er=er.sibling;rr===null?tr.tail=null:rr.sibling=null;break;case"collapsed":rr=tr.tail;for(var nr=null;rr!==null;)rr.alternate!==null&&(nr=rr),rr=rr.sibling;nr===null?er||tr.tail===null?tr.tail=null:tr.tail.sibling=null:nr.sibling=null}}function S$2(tr){var er=tr.alternate!==null&&tr.alternate.child===tr.child,rr=0,nr=0;if(er)for(var ir=tr.child;ir!==null;)rr|=ir.lanes|ir.childLanes,nr|=ir.subtreeFlags&14680064,nr|=ir.flags&14680064,ir.return=tr,ir=ir.sibling;else for(ir=tr.child;ir!==null;)rr|=ir.lanes|ir.childLanes,nr|=ir.subtreeFlags,nr|=ir.flags,ir.return=tr,ir=ir.sibling;return tr.subtreeFlags|=nr,tr.childLanes=rr,er}function Ej(tr,er,rr){var nr=er.pendingProps;switch(wg(er),er.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(er),null;case 1:return Zf(er.type)&&$f(),S$2(er),null;case 3:return nr=er.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),nr.pendingContext&&(nr.context=nr.pendingContext,nr.pendingContext=null),(tr===null||tr.child===null)&&(Gg(er)?er.flags|=4:tr===null||tr.memoizedState.isDehydrated&&!(er.flags&256)||(er.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(tr,er),S$2(er),null;case 5:Bh(er);var ir=xh(wh.current);if(rr=er.type,tr!==null&&er.stateNode!=null)Bj(tr,er,rr,nr,ir),tr.ref!==er.ref&&(er.flags|=512,er.flags|=2097152);else{if(!nr){if(er.stateNode===null)throw Error(p$2(166));return S$2(er),null}if(tr=xh(uh.current),Gg(er)){nr=er.stateNode,rr=er.type;var sr=er.memoizedProps;switch(nr[Of]=er,nr[Pf]=sr,tr=(er.mode&1)!==0,rr){case"dialog":D$2("cancel",nr),D$2("close",nr);break;case"iframe":case"object":case"embed":D$2("load",nr);break;case"video":case"audio":for(ir=0;ir<lf.length;ir++)D$2(lf[ir],nr);break;case"source":D$2("error",nr);break;case"img":case"image":case"link":D$2("error",nr),D$2("load",nr);break;case"details":D$2("toggle",nr);break;case"input":Za(nr,sr),D$2("invalid",nr);break;case"select":nr._wrapperState={wasMultiple:!!sr.multiple},D$2("invalid",nr);break;case"textarea":hb(nr,sr),D$2("invalid",nr)}ub(rr,sr),ir=null;for(var ar in sr)if(sr.hasOwnProperty(ar)){var cr=sr[ar];ar==="children"?typeof cr=="string"?nr.textContent!==cr&&(sr.suppressHydrationWarning!==!0&&Af(nr.textContent,cr,tr),ir=["children",cr]):typeof cr=="number"&&nr.textContent!==""+cr&&(sr.suppressHydrationWarning!==!0&&Af(nr.textContent,cr,tr),ir=["children",""+cr]):ea.hasOwnProperty(ar)&&cr!=null&&ar==="onScroll"&&D$2("scroll",nr)}switch(rr){case"input":Va(nr),db$1(nr,sr,!0);break;case"textarea":Va(nr),jb(nr);break;case"select":case"option":break;default:typeof sr.onClick=="function"&&(nr.onclick=Bf)}nr=ir,er.updateQueue=nr,nr!==null&&(er.flags|=4)}else{ar=ir.nodeType===9?ir:ir.ownerDocument,tr==="http://www.w3.org/1999/xhtml"&&(tr=kb(rr)),tr==="http://www.w3.org/1999/xhtml"?rr==="script"?(tr=ar.createElement("div"),tr.innerHTML="<script><\/script>",tr=tr.removeChild(tr.firstChild)):typeof nr.is=="string"?tr=ar.createElement(rr,{is:nr.is}):(tr=ar.createElement(rr),rr==="select"&&(ar=tr,nr.multiple?ar.multiple=!0:nr.size&&(ar.size=nr.size))):tr=ar.createElementNS(tr,rr),tr[Of]=er,tr[Pf]=nr,zj(tr,er,!1,!1),er.stateNode=tr;e:{switch(ar=vb(rr,nr),rr){case"dialog":D$2("cancel",tr),D$2("close",tr),ir=nr;break;case"iframe":case"object":case"embed":D$2("load",tr),ir=nr;break;case"video":case"audio":for(ir=0;ir<lf.length;ir++)D$2(lf[ir],tr);ir=nr;break;case"source":D$2("error",tr),ir=nr;break;case"img":case"image":case"link":D$2("error",tr),D$2("load",tr),ir=nr;break;case"details":D$2("toggle",tr),ir=nr;break;case"input":Za(tr,nr),ir=Ya(tr,nr),D$2("invalid",tr);break;case"option":ir=nr;break;case"select":tr._wrapperState={wasMultiple:!!nr.multiple},ir=A$1({},nr,{value:void 0}),D$2("invalid",tr);break;case"textarea":hb(tr,nr),ir=gb(tr,nr),D$2("invalid",tr);break;default:ir=nr}ub(rr,ir),cr=ir;for(sr in cr)if(cr.hasOwnProperty(sr)){var lr=cr[sr];sr==="style"?sb(tr,lr):sr==="dangerouslySetInnerHTML"?(lr=lr?lr.__html:void 0,lr!=null&&nb(tr,lr)):sr==="children"?typeof lr=="string"?(rr!=="textarea"||lr!=="")&&ob(tr,lr):typeof lr=="number"&&ob(tr,""+lr):sr!=="suppressContentEditableWarning"&&sr!=="suppressHydrationWarning"&&sr!=="autoFocus"&&(ea.hasOwnProperty(sr)?lr!=null&&sr==="onScroll"&&D$2("scroll",tr):lr!=null&&ta(tr,sr,lr,ar))}switch(rr){case"input":Va(tr),db$1(tr,nr,!1);break;case"textarea":Va(tr),jb(tr);break;case"option":nr.value!=null&&tr.setAttribute("value",""+Sa(nr.value));break;case"select":tr.multiple=!!nr.multiple,sr=nr.value,sr!=null?fb(tr,!!nr.multiple,sr,!1):nr.defaultValue!=null&&fb(tr,!!nr.multiple,nr.defaultValue,!0);break;default:typeof ir.onClick=="function"&&(tr.onclick=Bf)}switch(rr){case"button":case"input":case"select":case"textarea":nr=!!nr.autoFocus;break e;case"img":nr=!0;break e;default:nr=!1}}nr&&(er.flags|=4)}er.ref!==null&&(er.flags|=512,er.flags|=2097152)}return S$2(er),null;case 6:if(tr&&er.stateNode!=null)Cj(tr,er,tr.memoizedProps,nr);else{if(typeof nr!="string"&&er.stateNode===null)throw Error(p$2(166));if(rr=xh(wh.current),xh(uh.current),Gg(er)){if(nr=er.stateNode,rr=er.memoizedProps,nr[Of]=er,(sr=nr.nodeValue!==rr)&&(tr=xg,tr!==null))switch(tr.tag){case 3:Af(nr.nodeValue,rr,(tr.mode&1)!==0);break;case 5:tr.memoizedProps.suppressHydrationWarning!==!0&&Af(nr.nodeValue,rr,(tr.mode&1)!==0)}sr&&(er.flags|=4)}else nr=(rr.nodeType===9?rr:rr.ownerDocument).createTextNode(nr),nr[Of]=er,er.stateNode=nr}return S$2(er),null;case 13:if(E$1(L$1),nr=er.memoizedState,tr===null||tr.memoizedState!==null&&tr.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&er.mode&1&&!(er.flags&128))Hg(),Ig(),er.flags|=98560,sr=!1;else if(sr=Gg(er),nr!==null&&nr.dehydrated!==null){if(tr===null){if(!sr)throw Error(p$2(318));if(sr=er.memoizedState,sr=sr!==null?sr.dehydrated:null,!sr)throw Error(p$2(317));sr[Of]=er}else Ig(),!(er.flags&128)&&(er.memoizedState=null),er.flags|=4;S$2(er),sr=!1}else zg!==null&&(Fj(zg),zg=null),sr=!0;if(!sr)return er.flags&65536?er:null}return er.flags&128?(er.lanes=rr,er):(nr=nr!==null,nr!==(tr!==null&&tr.memoizedState!==null)&&nr&&(er.child.flags|=8192,er.mode&1&&(tr===null||L$1.current&1?T$1===0&&(T$1=3):tj())),er.updateQueue!==null&&(er.flags|=4),S$2(er),null);case 4:return zh(),Aj(tr,er),tr===null&&sf(er.stateNode.containerInfo),S$2(er),null;case 10:return ah(er.type._context),S$2(er),null;case 17:return Zf(er.type)&&$f(),S$2(er),null;case 19:if(E$1(L$1),sr=er.memoizedState,sr===null)return S$2(er),null;if(nr=(er.flags&128)!==0,ar=sr.rendering,ar===null)if(nr)Dj(sr,!1);else{if(T$1!==0||tr!==null&&tr.flags&128)for(tr=er.child;tr!==null;){if(ar=Ch(tr),ar!==null){for(er.flags|=128,Dj(sr,!1),nr=ar.updateQueue,nr!==null&&(er.updateQueue=nr,er.flags|=4),er.subtreeFlags=0,nr=rr,rr=er.child;rr!==null;)sr=rr,tr=nr,sr.flags&=14680066,ar=sr.alternate,ar===null?(sr.childLanes=0,sr.lanes=tr,sr.child=null,sr.subtreeFlags=0,sr.memoizedProps=null,sr.memoizedState=null,sr.updateQueue=null,sr.dependencies=null,sr.stateNode=null):(sr.childLanes=ar.childLanes,sr.lanes=ar.lanes,sr.child=ar.child,sr.subtreeFlags=0,sr.deletions=null,sr.memoizedProps=ar.memoizedProps,sr.memoizedState=ar.memoizedState,sr.updateQueue=ar.updateQueue,sr.type=ar.type,tr=ar.dependencies,sr.dependencies=tr===null?null:{lanes:tr.lanes,firstContext:tr.firstContext}),rr=rr.sibling;return G$1(L$1,L$1.current&1|2),er.child}tr=tr.sibling}sr.tail!==null&&B$1()>Gj&&(er.flags|=128,nr=!0,Dj(sr,!1),er.lanes=4194304)}else{if(!nr)if(tr=Ch(ar),tr!==null){if(er.flags|=128,nr=!0,rr=tr.updateQueue,rr!==null&&(er.updateQueue=rr,er.flags|=4),Dj(sr,!0),sr.tail===null&&sr.tailMode==="hidden"&&!ar.alternate&&!I$1)return S$2(er),null}else 2*B$1()-sr.renderingStartTime>Gj&&rr!==1073741824&&(er.flags|=128,nr=!0,Dj(sr,!1),er.lanes=4194304);sr.isBackwards?(ar.sibling=er.child,er.child=ar):(rr=sr.last,rr!==null?rr.sibling=ar:er.child=ar,sr.last=ar)}return sr.tail!==null?(er=sr.tail,sr.rendering=er,sr.tail=er.sibling,sr.renderingStartTime=B$1(),er.sibling=null,rr=L$1.current,G$1(L$1,nr?rr&1|2:rr&1),er):(S$2(er),null);case 22:case 23:return Hj(),nr=er.memoizedState!==null,tr!==null&&tr.memoizedState!==null!==nr&&(er.flags|=8192),nr&&er.mode&1?fj&1073741824&&(S$2(er),er.subtreeFlags&6&&(er.flags|=8192)):S$2(er),null;case 24:return null;case 25:return null}throw Error(p$2(156,er.tag))}function Ij(tr,er){switch(wg(er),er.tag){case 1:return Zf(er.type)&&$f(),tr=er.flags,tr&65536?(er.flags=tr&-65537|128,er):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),tr=er.flags,tr&65536&&!(tr&128)?(er.flags=tr&-65537|128,er):null;case 5:return Bh(er),null;case 13:if(E$1(L$1),tr=er.memoizedState,tr!==null&&tr.dehydrated!==null){if(er.alternate===null)throw Error(p$2(340));Ig()}return tr=er.flags,tr&65536?(er.flags=tr&-65537|128,er):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(er.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(tr,er){var rr=tr.ref;if(rr!==null)if(typeof rr=="function")try{rr(null)}catch(nr){W$1(tr,er,nr)}else rr.current=null}function Mj(tr,er,rr){try{rr()}catch(nr){W$1(tr,er,nr)}}var Nj=!1;function Oj(tr,er){if(Cf=dd,tr=Me(),Ne$1(tr)){if("selectionStart"in tr)var rr={start:tr.selectionStart,end:tr.selectionEnd};else e:{rr=(rr=tr.ownerDocument)&&rr.defaultView||window;var nr=rr.getSelection&&rr.getSelection();if(nr&&nr.rangeCount!==0){rr=nr.anchorNode;var ir=nr.anchorOffset,sr=nr.focusNode;nr=nr.focusOffset;try{rr.nodeType,sr.nodeType}catch{rr=null;break e}var ar=0,cr=-1,lr=-1,or=0,ur=0,hr=tr,dr=null;t:for(;;){for(var fr;hr!==rr||ir!==0&&hr.nodeType!==3||(cr=ar+ir),hr!==sr||nr!==0&&hr.nodeType!==3||(lr=ar+nr),hr.nodeType===3&&(ar+=hr.nodeValue.length),(fr=hr.firstChild)!==null;)dr=hr,hr=fr;for(;;){if(hr===tr)break t;if(dr===rr&&++or===ir&&(cr=ar),dr===sr&&++ur===nr&&(lr=ar),(fr=hr.nextSibling)!==null)break;hr=dr,dr=hr.parentNode}hr=fr}rr=cr===-1||lr===-1?null:{start:cr,end:lr}}else rr=null}rr=rr||{start:0,end:0}}else rr=null;for(Df={focusedElem:tr,selectionRange:rr},dd=!1,V$1=er;V$1!==null;)if(er=V$1,tr=er.child,(er.subtreeFlags&1028)!==0&&tr!==null)tr.return=er,V$1=tr;else for(;V$1!==null;){er=V$1;try{var gr=er.alternate;if(er.flags&1024)switch(er.tag){case 0:case 11:case 15:break;case 1:if(gr!==null){var br=gr.memoizedProps,pr=gr.memoizedState,mr=er.stateNode,yr=mr.getSnapshotBeforeUpdate(er.elementType===er.type?br:Ci(er.type,br),pr);mr.__reactInternalSnapshotBeforeUpdate=yr}break;case 3:var xr=er.stateNode.containerInfo;xr.nodeType===1?xr.textContent="":xr.nodeType===9&&xr.documentElement&&xr.removeChild(xr.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(vr){W$1(er,er.return,vr)}if(tr=er.sibling,tr!==null){tr.return=er.return,V$1=tr;break}V$1=er.return}return gr=Nj,Nj=!1,gr}function Pj(tr,er,rr){var nr=er.updateQueue;if(nr=nr!==null?nr.lastEffect:null,nr!==null){var ir=nr=nr.next;do{if((ir.tag&tr)===tr){var sr=ir.destroy;ir.destroy=void 0,sr!==void 0&&Mj(er,rr,sr)}ir=ir.next}while(ir!==nr)}}function Qj(tr,er){if(er=er.updateQueue,er=er!==null?er.lastEffect:null,er!==null){var rr=er=er.next;do{if((rr.tag&tr)===tr){var nr=rr.create;rr.destroy=nr()}rr=rr.next}while(rr!==er)}}function Rj(tr){var er=tr.ref;if(er!==null){var rr=tr.stateNode;switch(tr.tag){case 5:tr=rr;break;default:tr=rr}typeof er=="function"?er(tr):er.current=tr}}function Sj(tr){var er=tr.alternate;er!==null&&(tr.alternate=null,Sj(er)),tr.child=null,tr.deletions=null,tr.sibling=null,tr.tag===5&&(er=tr.stateNode,er!==null&&(delete er[Of],delete er[Pf],delete er[of],delete er[Qf],delete er[Rf])),tr.stateNode=null,tr.return=null,tr.dependencies=null,tr.memoizedProps=null,tr.memoizedState=null,tr.pendingProps=null,tr.stateNode=null,tr.updateQueue=null}function Tj(tr){return tr.tag===5||tr.tag===3||tr.tag===4}function Uj(tr){e:for(;;){for(;tr.sibling===null;){if(tr.return===null||Tj(tr.return))return null;tr=tr.return}for(tr.sibling.return=tr.return,tr=tr.sibling;tr.tag!==5&&tr.tag!==6&&tr.tag!==18;){if(tr.flags&2||tr.child===null||tr.tag===4)continue e;tr.child.return=tr,tr=tr.child}if(!(tr.flags&2))return tr.stateNode}}function Vj(tr,er,rr){var nr=tr.tag;if(nr===5||nr===6)tr=tr.stateNode,er?rr.nodeType===8?rr.parentNode.insertBefore(tr,er):rr.insertBefore(tr,er):(rr.nodeType===8?(er=rr.parentNode,er.insertBefore(tr,rr)):(er=rr,er.appendChild(tr)),rr=rr._reactRootContainer,rr!=null||er.onclick!==null||(er.onclick=Bf));else if(nr!==4&&(tr=tr.child,tr!==null))for(Vj(tr,er,rr),tr=tr.sibling;tr!==null;)Vj(tr,er,rr),tr=tr.sibling}function Wj(tr,er,rr){var nr=tr.tag;if(nr===5||nr===6)tr=tr.stateNode,er?rr.insertBefore(tr,er):rr.appendChild(tr);else if(nr!==4&&(tr=tr.child,tr!==null))for(Wj(tr,er,rr),tr=tr.sibling;tr!==null;)Wj(tr,er,rr),tr=tr.sibling}var X$2=null,Xj=!1;function Yj(tr,er,rr){for(rr=rr.child;rr!==null;)Zj(tr,er,rr),rr=rr.sibling}function Zj(tr,er,rr){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,rr)}catch{}switch(rr.tag){case 5:U$1||Lj(rr,er);case 6:var nr=X$2,ir=Xj;X$2=null,Yj(tr,er,rr),X$2=nr,Xj=ir,X$2!==null&&(Xj?(tr=X$2,rr=rr.stateNode,tr.nodeType===8?tr.parentNode.removeChild(rr):tr.removeChild(rr)):X$2.removeChild(rr.stateNode));break;case 18:X$2!==null&&(Xj?(tr=X$2,rr=rr.stateNode,tr.nodeType===8?Kf(tr.parentNode,rr):tr.nodeType===1&&Kf(tr,rr),bd(tr)):Kf(X$2,rr.stateNode));break;case 4:nr=X$2,ir=Xj,X$2=rr.stateNode.containerInfo,Xj=!0,Yj(tr,er,rr),X$2=nr,Xj=ir;break;case 0:case 11:case 14:case 15:if(!U$1&&(nr=rr.updateQueue,nr!==null&&(nr=nr.lastEffect,nr!==null))){ir=nr=nr.next;do{var sr=ir,ar=sr.destroy;sr=sr.tag,ar!==void 0&&(sr&2||sr&4)&&Mj(rr,er,ar),ir=ir.next}while(ir!==nr)}Yj(tr,er,rr);break;case 1:if(!U$1&&(Lj(rr,er),nr=rr.stateNode,typeof nr.componentWillUnmount=="function"))try{nr.props=rr.memoizedProps,nr.state=rr.memoizedState,nr.componentWillUnmount()}catch(cr){W$1(rr,er,cr)}Yj(tr,er,rr);break;case 21:Yj(tr,er,rr);break;case 22:rr.mode&1?(U$1=(nr=U$1)||rr.memoizedState!==null,Yj(tr,er,rr),U$1=nr):Yj(tr,er,rr);break;default:Yj(tr,er,rr)}}function ak(tr){var er=tr.updateQueue;if(er!==null){tr.updateQueue=null;var rr=tr.stateNode;rr===null&&(rr=tr.stateNode=new Kj),er.forEach(function(nr){var ir=bk.bind(null,tr,nr);rr.has(nr)||(rr.add(nr),nr.then(ir,ir))})}}function ck(tr,er){var rr=er.deletions;if(rr!==null)for(var nr=0;nr<rr.length;nr++){var ir=rr[nr];try{var sr=tr,ar=er,cr=ar;e:for(;cr!==null;){switch(cr.tag){case 5:X$2=cr.stateNode,Xj=!1;break e;case 3:X$2=cr.stateNode.containerInfo,Xj=!0;break e;case 4:X$2=cr.stateNode.containerInfo,Xj=!0;break e}cr=cr.return}if(X$2===null)throw Error(p$2(160));Zj(sr,ar,ir),X$2=null,Xj=!1;var lr=ir.alternate;lr!==null&&(lr.return=null),ir.return=null}catch(or){W$1(ir,er,or)}}if(er.subtreeFlags&12854)for(er=er.child;er!==null;)dk(er,tr),er=er.sibling}function dk(tr,er){var rr=tr.alternate,nr=tr.flags;switch(tr.tag){case 0:case 11:case 14:case 15:if(ck(er,tr),ek(tr),nr&4){try{Pj(3,tr,tr.return),Qj(3,tr)}catch(br){W$1(tr,tr.return,br)}try{Pj(5,tr,tr.return)}catch(br){W$1(tr,tr.return,br)}}break;case 1:ck(er,tr),ek(tr),nr&512&&rr!==null&&Lj(rr,rr.return);break;case 5:if(ck(er,tr),ek(tr),nr&512&&rr!==null&&Lj(rr,rr.return),tr.flags&32){var ir=tr.stateNode;try{ob(ir,"")}catch(br){W$1(tr,tr.return,br)}}if(nr&4&&(ir=tr.stateNode,ir!=null)){var sr=tr.memoizedProps,ar=rr!==null?rr.memoizedProps:sr,cr=tr.type,lr=tr.updateQueue;if(tr.updateQueue=null,lr!==null)try{cr==="input"&&sr.type==="radio"&&sr.name!=null&&ab(ir,sr),vb(cr,ar);var or=vb(cr,sr);for(ar=0;ar<lr.length;ar+=2){var ur=lr[ar],hr=lr[ar+1];ur==="style"?sb(ir,hr):ur==="dangerouslySetInnerHTML"?nb(ir,hr):ur==="children"?ob(ir,hr):ta(ir,ur,hr,or)}switch(cr){case"input":bb(ir,sr);break;case"textarea":ib(ir,sr);break;case"select":var dr=ir._wrapperState.wasMultiple;ir._wrapperState.wasMultiple=!!sr.multiple;var fr=sr.value;fr!=null?fb(ir,!!sr.multiple,fr,!1):dr!==!!sr.multiple&&(sr.defaultValue!=null?fb(ir,!!sr.multiple,sr.defaultValue,!0):fb(ir,!!sr.multiple,sr.multiple?[]:"",!1))}ir[Pf]=sr}catch(br){W$1(tr,tr.return,br)}}break;case 6:if(ck(er,tr),ek(tr),nr&4){if(tr.stateNode===null)throw Error(p$2(162));ir=tr.stateNode,sr=tr.memoizedProps;try{ir.nodeValue=sr}catch(br){W$1(tr,tr.return,br)}}break;case 3:if(ck(er,tr),ek(tr),nr&4&&rr!==null&&rr.memoizedState.isDehydrated)try{bd(er.containerInfo)}catch(br){W$1(tr,tr.return,br)}break;case 4:ck(er,tr),ek(tr);break;case 13:ck(er,tr),ek(tr),ir=tr.child,ir.flags&8192&&(sr=ir.memoizedState!==null,ir.stateNode.isHidden=sr,!sr||ir.alternate!==null&&ir.alternate.memoizedState!==null||(fk=B$1())),nr&4&&ak(tr);break;case 22:if(ur=rr!==null&&rr.memoizedState!==null,tr.mode&1?(U$1=(or=U$1)||ur,ck(er,tr),U$1=or):ck(er,tr),ek(tr),nr&8192){if(or=tr.memoizedState!==null,(tr.stateNode.isHidden=or)&&!ur&&tr.mode&1)for(V$1=tr,ur=tr.child;ur!==null;){for(hr=V$1=ur;V$1!==null;){switch(dr=V$1,fr=dr.child,dr.tag){case 0:case 11:case 14:case 15:Pj(4,dr,dr.return);break;case 1:Lj(dr,dr.return);var gr=dr.stateNode;if(typeof gr.componentWillUnmount=="function"){nr=dr,rr=dr.return;try{er=nr,gr.props=er.memoizedProps,gr.state=er.memoizedState,gr.componentWillUnmount()}catch(br){W$1(nr,rr,br)}}break;case 5:Lj(dr,dr.return);break;case 22:if(dr.memoizedState!==null){gk(hr);continue}}fr!==null?(fr.return=dr,V$1=fr):gk(hr)}ur=ur.sibling}e:for(ur=null,hr=tr;;){if(hr.tag===5){if(ur===null){ur=hr;try{ir=hr.stateNode,or?(sr=ir.style,typeof sr.setProperty=="function"?sr.setProperty("display","none","important"):sr.display="none"):(cr=hr.stateNode,lr=hr.memoizedProps.style,ar=lr!=null&&lr.hasOwnProperty("display")?lr.display:null,cr.style.display=rb("display",ar))}catch(br){W$1(tr,tr.return,br)}}}else if(hr.tag===6){if(ur===null)try{hr.stateNode.nodeValue=or?"":hr.memoizedProps}catch(br){W$1(tr,tr.return,br)}}else if((hr.tag!==22&&hr.tag!==23||hr.memoizedState===null||hr===tr)&&hr.child!==null){hr.child.return=hr,hr=hr.child;continue}if(hr===tr)break e;for(;hr.sibling===null;){if(hr.return===null||hr.return===tr)break e;ur===hr&&(ur=null),hr=hr.return}ur===hr&&(ur=null),hr.sibling.return=hr.return,hr=hr.sibling}}break;case 19:ck(er,tr),ek(tr),nr&4&&ak(tr);break;case 21:break;default:ck(er,tr),ek(tr)}}function ek(tr){var er=tr.flags;if(er&2){try{e:{for(var rr=tr.return;rr!==null;){if(Tj(rr)){var nr=rr;break e}rr=rr.return}throw Error(p$2(160))}switch(nr.tag){case 5:var ir=nr.stateNode;nr.flags&32&&(ob(ir,""),nr.flags&=-33);var sr=Uj(tr);Wj(tr,sr,ir);break;case 3:case 4:var ar=nr.stateNode.containerInfo,cr=Uj(tr);Vj(tr,cr,ar);break;default:throw Error(p$2(161))}}catch(lr){W$1(tr,tr.return,lr)}tr.flags&=-3}er&4096&&(tr.flags&=-4097)}function hk(tr,er,rr){V$1=tr,ik(tr)}function ik(tr,er,rr){for(var nr=(tr.mode&1)!==0;V$1!==null;){var ir=V$1,sr=ir.child;if(ir.tag===22&&nr){var ar=ir.memoizedState!==null||Jj;if(!ar){var cr=ir.alternate,lr=cr!==null&&cr.memoizedState!==null||U$1;cr=Jj;var or=U$1;if(Jj=ar,(U$1=lr)&&!or)for(V$1=ir;V$1!==null;)ar=V$1,lr=ar.child,ar.tag===22&&ar.memoizedState!==null?jk(ir):lr!==null?(lr.return=ar,V$1=lr):jk(ir);for(;sr!==null;)V$1=sr,ik(sr),sr=sr.sibling;V$1=ir,Jj=cr,U$1=or}kk(tr)}else ir.subtreeFlags&8772&&sr!==null?(sr.return=ir,V$1=sr):kk(tr)}}function kk(tr){for(;V$1!==null;){var er=V$1;if(er.flags&8772){var rr=er.alternate;try{if(er.flags&8772)switch(er.tag){case 0:case 11:case 15:U$1||Qj(5,er);break;case 1:var nr=er.stateNode;if(er.flags&4&&!U$1)if(rr===null)nr.componentDidMount();else{var ir=er.elementType===er.type?rr.memoizedProps:Ci(er.type,rr.memoizedProps);nr.componentDidUpdate(ir,rr.memoizedState,nr.__reactInternalSnapshotBeforeUpdate)}var sr=er.updateQueue;sr!==null&&sh(er,sr,nr);break;case 3:var ar=er.updateQueue;if(ar!==null){if(rr=null,er.child!==null)switch(er.child.tag){case 5:rr=er.child.stateNode;break;case 1:rr=er.child.stateNode}sh(er,ar,rr)}break;case 5:var cr=er.stateNode;if(rr===null&&er.flags&4){rr=cr;var lr=er.memoizedProps;switch(er.type){case"button":case"input":case"select":case"textarea":lr.autoFocus&&rr.focus();break;case"img":lr.src&&(rr.src=lr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(er.memoizedState===null){var or=er.alternate;if(or!==null){var ur=or.memoizedState;if(ur!==null){var hr=ur.dehydrated;hr!==null&&bd(hr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$1||er.flags&512&&Rj(er)}catch(dr){W$1(er,er.return,dr)}}if(er===tr){V$1=null;break}if(rr=er.sibling,rr!==null){rr.return=er.return,V$1=rr;break}V$1=er.return}}function gk(tr){for(;V$1!==null;){var er=V$1;if(er===tr){V$1=null;break}var rr=er.sibling;if(rr!==null){rr.return=er.return,V$1=rr;break}V$1=er.return}}function jk(tr){for(;V$1!==null;){var er=V$1;try{switch(er.tag){case 0:case 11:case 15:var rr=er.return;try{Qj(4,er)}catch(lr){W$1(er,rr,lr)}break;case 1:var nr=er.stateNode;if(typeof nr.componentDidMount=="function"){var ir=er.return;try{nr.componentDidMount()}catch(lr){W$1(er,ir,lr)}}var sr=er.return;try{Rj(er)}catch(lr){W$1(er,sr,lr)}break;case 5:var ar=er.return;try{Rj(er)}catch(lr){W$1(er,ar,lr)}}}catch(lr){W$1(er,er.return,lr)}if(er===tr){V$1=null;break}var cr=er.sibling;if(cr!==null){cr.return=er.return,V$1=cr;break}V$1=er.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(tr){return tr.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(tr=C$2,tr!==0||(tr=window.event,tr=tr===void 0?16:jd(tr.type)),tr):1}function gi(tr,er,rr,nr){if(50<yk)throw yk=0,zk=null,Error(p$2(185));Ac(tr,rr,nr),(!(K$1&2)||tr!==Q$1)&&(tr===Q$1&&(!(K$1&2)&&(qk|=rr),T$1===4&&Ck(tr,Z$1)),Dk(tr,nr),rr===1&&K$1===0&&!(er.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(tr,er){var rr=tr.callbackNode;wc(tr,er);var nr=uc(tr,tr===Q$1?Z$1:0);if(nr===0)rr!==null&&bc(rr),tr.callbackNode=null,tr.callbackPriority=0;else if(er=nr&-nr,tr.callbackPriority!==er){if(rr!=null&&bc(rr),er===1)tr.tag===0?ig(Ek.bind(null,tr)):hg(Ek.bind(null,tr)),Jf(function(){!(K$1&6)&&jg()}),rr=null;else{switch(Dc(nr)){case 1:rr=fc;break;case 4:rr=gc;break;case 16:rr=hc;break;case 536870912:rr=jc;break;default:rr=hc}rr=Fk(rr,Gk.bind(null,tr))}tr.callbackPriority=er,tr.callbackNode=rr}}function Gk(tr,er){if(Ak=-1,Bk=0,K$1&6)throw Error(p$2(327));var rr=tr.callbackNode;if(Hk()&&tr.callbackNode!==rr)return null;var nr=uc(tr,tr===Q$1?Z$1:0);if(nr===0)return null;if(nr&30||nr&tr.expiredLanes||er)er=Ik(tr,nr);else{er=nr;var ir=K$1;K$1|=2;var sr=Jk();(Q$1!==tr||Z$1!==er)&&(uk=null,Gj=B$1()+500,Kk(tr,er));do try{Lk();break}catch(cr){Mk(tr,cr)}while(!0);$g(),mk.current=sr,K$1=ir,Y$1!==null?er=0:(Q$1=null,Z$1=0,er=T$1)}if(er!==0){if(er===2&&(ir=xc(tr),ir!==0&&(nr=ir,er=Nk(tr,ir))),er===1)throw rr=pk,Kk(tr,0),Ck(tr,nr),Dk(tr,B$1()),rr;if(er===6)Ck(tr,nr);else{if(ir=tr.current.alternate,!(nr&30)&&!Ok(ir)&&(er=Ik(tr,nr),er===2&&(sr=xc(tr),sr!==0&&(nr=sr,er=Nk(tr,sr))),er===1))throw rr=pk,Kk(tr,0),Ck(tr,nr),Dk(tr,B$1()),rr;switch(tr.finishedWork=ir,tr.finishedLanes=nr,er){case 0:case 1:throw Error(p$2(345));case 2:Pk(tr,tk,uk);break;case 3:if(Ck(tr,nr),(nr&130023424)===nr&&(er=fk+500-B$1(),10<er)){if(uc(tr,0)!==0)break;if(ir=tr.suspendedLanes,(ir&nr)!==nr){R$1(),tr.pingedLanes|=tr.suspendedLanes&ir;break}tr.timeoutHandle=Ff(Pk.bind(null,tr,tk,uk),er);break}Pk(tr,tk,uk);break;case 4:if(Ck(tr,nr),(nr&4194240)===nr)break;for(er=tr.eventTimes,ir=-1;0<nr;){var ar=31-oc(nr);sr=1<<ar,ar=er[ar],ar>ir&&(ir=ar),nr&=~sr}if(nr=ir,nr=B$1()-nr,nr=(120>nr?120:480>nr?480:1080>nr?1080:1920>nr?1920:3e3>nr?3e3:4320>nr?4320:1960*lk(nr/1960))-nr,10<nr){tr.timeoutHandle=Ff(Pk.bind(null,tr,tk,uk),nr);break}Pk(tr,tk,uk);break;case 5:Pk(tr,tk,uk);break;default:throw Error(p$2(329))}}}return Dk(tr,B$1()),tr.callbackNode===rr?Gk.bind(null,tr):null}function Nk(tr,er){var rr=sk;return tr.current.memoizedState.isDehydrated&&(Kk(tr,er).flags|=256),tr=Ik(tr,er),tr!==2&&(er=tk,tk=rr,er!==null&&Fj(er)),tr}function Fj(tr){tk===null?tk=tr:tk.push.apply(tk,tr)}function Ok(tr){for(var er=tr;;){if(er.flags&16384){var rr=er.updateQueue;if(rr!==null&&(rr=rr.stores,rr!==null))for(var nr=0;nr<rr.length;nr++){var ir=rr[nr],sr=ir.getSnapshot;ir=ir.value;try{if(!He(sr(),ir))return!1}catch{return!1}}}if(rr=er.child,er.subtreeFlags&16384&&rr!==null)rr.return=er,er=rr;else{if(er===tr)break;for(;er.sibling===null;){if(er.return===null||er.return===tr)return!0;er=er.return}er.sibling.return=er.return,er=er.sibling}}return!0}function Ck(tr,er){for(er&=~rk,er&=~qk,tr.suspendedLanes|=er,tr.pingedLanes&=~er,tr=tr.expirationTimes;0<er;){var rr=31-oc(er),nr=1<<rr;tr[rr]=-1,er&=~nr}}function Ek(tr){if(K$1&6)throw Error(p$2(327));Hk();var er=uc(tr,0);if(!(er&1))return Dk(tr,B$1()),null;var rr=Ik(tr,er);if(tr.tag!==0&&rr===2){var nr=xc(tr);nr!==0&&(er=nr,rr=Nk(tr,nr))}if(rr===1)throw rr=pk,Kk(tr,0),Ck(tr,er),Dk(tr,B$1()),rr;if(rr===6)throw Error(p$2(345));return tr.finishedWork=tr.current.alternate,tr.finishedLanes=er,Pk(tr,tk,uk),Dk(tr,B$1()),null}function Qk(tr,er){var rr=K$1;K$1|=1;try{return tr(er)}finally{K$1=rr,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(tr){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var er=K$1;K$1|=1;var rr=ok.transition,nr=C$2;try{if(ok.transition=null,C$2=1,tr)return tr()}finally{C$2=nr,ok.transition=rr,K$1=er,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(tr,er){tr.finishedWork=null,tr.finishedLanes=0;var rr=tr.timeoutHandle;if(rr!==-1&&(tr.timeoutHandle=-1,Gf(rr)),Y$1!==null)for(rr=Y$1.return;rr!==null;){var nr=rr;switch(wg(nr),nr.tag){case 1:nr=nr.type.childContextTypes,nr!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(nr);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(nr.type._context);break;case 22:case 23:Hj()}rr=rr.return}if(Q$1=tr,Y$1=tr=Pg(tr.current,null),Z$1=fj=er,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(er=0;er<fh.length;er++)if(rr=fh[er],nr=rr.interleaved,nr!==null){rr.interleaved=null;var ir=nr.next,sr=rr.pending;if(sr!==null){var ar=sr.next;sr.next=ir,nr.next=ar}rr.pending=nr}fh=null}return tr}function Mk(tr,er){do{var rr=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var nr=M$1.memoizedState;nr!==null;){var ir=nr.queue;ir!==null&&(ir.pending=null),nr=nr.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,rr===null||rr.return===null){T$1=1,pk=er,Y$1=null;break}e:{var sr=tr,ar=rr.return,cr=rr,lr=er;if(er=Z$1,cr.flags|=32768,lr!==null&&typeof lr=="object"&&typeof lr.then=="function"){var or=lr,ur=cr,hr=ur.tag;if(!(ur.mode&1)&&(hr===0||hr===11||hr===15)){var dr=ur.alternate;dr?(ur.updateQueue=dr.updateQueue,ur.memoizedState=dr.memoizedState,ur.lanes=dr.lanes):(ur.updateQueue=null,ur.memoizedState=null)}var fr=Ui(ar);if(fr!==null){fr.flags&=-257,Vi(fr,ar,cr,sr,er),fr.mode&1&&Si(sr,or,er),er=fr,lr=or;var gr=er.updateQueue;if(gr===null){var br=new Set;br.add(lr),er.updateQueue=br}else gr.add(lr);break e}else{if(!(er&1)){Si(sr,or,er),tj();break e}lr=Error(p$2(426))}}else if(I$1&&cr.mode&1){var pr=Ui(ar);if(pr!==null){!(pr.flags&65536)&&(pr.flags|=256),Vi(pr,ar,cr,sr,er),Jg(Ji(lr,cr));break e}}sr=lr=Ji(lr,cr),T$1!==4&&(T$1=2),sk===null?sk=[sr]:sk.push(sr),sr=ar;do{switch(sr.tag){case 3:sr.flags|=65536,er&=-er,sr.lanes|=er;var mr=Ni(sr,lr,er);ph(sr,mr);break e;case 1:cr=lr;var yr=sr.type,xr=sr.stateNode;if(!(sr.flags&128)&&(typeof yr.getDerivedStateFromError=="function"||xr!==null&&typeof xr.componentDidCatch=="function"&&(Ri===null||!Ri.has(xr)))){sr.flags|=65536,er&=-er,sr.lanes|=er;var vr=Qi(sr,cr,er);ph(sr,vr);break e}}sr=sr.return}while(sr!==null)}Sk(rr)}catch(_r){er=_r,Y$1===rr&&rr!==null&&(Y$1=rr=rr.return);continue}break}while(!0)}function Jk(){var tr=mk.current;return mk.current=Rh,tr===null?Rh:tr}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(tr,er){var rr=K$1;K$1|=2;var nr=Jk();(Q$1!==tr||Z$1!==er)&&(uk=null,Kk(tr,er));do try{Tk();break}catch(ir){Mk(tr,ir)}while(!0);if($g(),K$1=rr,mk.current=nr,Y$1!==null)throw Error(p$2(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(tr){var er=Vk(tr.alternate,tr,fj);tr.memoizedProps=tr.pendingProps,er===null?Sk(tr):Y$1=er,nk.current=null}function Sk(tr){var er=tr;do{var rr=er.alternate;if(tr=er.return,er.flags&32768){if(rr=Ij(rr,er),rr!==null){rr.flags&=32767,Y$1=rr;return}if(tr!==null)tr.flags|=32768,tr.subtreeFlags=0,tr.deletions=null;else{T$1=6,Y$1=null;return}}else if(rr=Ej(rr,er,fj),rr!==null){Y$1=rr;return}if(er=er.sibling,er!==null){Y$1=er;return}Y$1=er=tr}while(er!==null);T$1===0&&(T$1=5)}function Pk(tr,er,rr){var nr=C$2,ir=ok.transition;try{ok.transition=null,C$2=1,Wk(tr,er,rr,nr)}finally{ok.transition=ir,C$2=nr}return null}function Wk(tr,er,rr,nr){do Hk();while(wk!==null);if(K$1&6)throw Error(p$2(327));rr=tr.finishedWork;var ir=tr.finishedLanes;if(rr===null)return null;if(tr.finishedWork=null,tr.finishedLanes=0,rr===tr.current)throw Error(p$2(177));tr.callbackNode=null,tr.callbackPriority=0;var sr=rr.lanes|rr.childLanes;if(Bc(tr,sr),tr===Q$1&&(Y$1=Q$1=null,Z$1=0),!(rr.subtreeFlags&2064)&&!(rr.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),sr=(rr.flags&15990)!==0,rr.subtreeFlags&15990||sr){sr=ok.transition,ok.transition=null;var ar=C$2;C$2=1;var cr=K$1;K$1|=4,nk.current=null,Oj(tr,rr),dk(rr,tr),Oe(Df),dd=!!Cf,Df=Cf=null,tr.current=rr,hk(rr),dc(),K$1=cr,C$2=ar,ok.transition=sr}else tr.current=rr;if(vk&&(vk=!1,wk=tr,xk=ir),sr=tr.pendingLanes,sr===0&&(Ri=null),mc(rr.stateNode),Dk(tr,B$1()),er!==null)for(nr=tr.onRecoverableError,rr=0;rr<er.length;rr++)ir=er[rr],nr(ir.value,{componentStack:ir.stack,digest:ir.digest});if(Oi)throw Oi=!1,tr=Pi,Pi=null,tr;return xk&1&&tr.tag!==0&&Hk(),sr=tr.pendingLanes,sr&1?tr===zk?yk++:(yk=0,zk=tr):yk=0,jg(),null}function Hk(){if(wk!==null){var tr=Dc(xk),er=ok.transition,rr=C$2;try{if(ok.transition=null,C$2=16>tr?16:tr,wk===null)var nr=!1;else{if(tr=wk,wk=null,xk=0,K$1&6)throw Error(p$2(331));var ir=K$1;for(K$1|=4,V$1=tr.current;V$1!==null;){var sr=V$1,ar=sr.child;if(V$1.flags&16){var cr=sr.deletions;if(cr!==null){for(var lr=0;lr<cr.length;lr++){var or=cr[lr];for(V$1=or;V$1!==null;){var ur=V$1;switch(ur.tag){case 0:case 11:case 15:Pj(8,ur,sr)}var hr=ur.child;if(hr!==null)hr.return=ur,V$1=hr;else for(;V$1!==null;){ur=V$1;var dr=ur.sibling,fr=ur.return;if(Sj(ur),ur===or){V$1=null;break}if(dr!==null){dr.return=fr,V$1=dr;break}V$1=fr}}}var gr=sr.alternate;if(gr!==null){var br=gr.child;if(br!==null){gr.child=null;do{var pr=br.sibling;br.sibling=null,br=pr}while(br!==null)}}V$1=sr}}if(sr.subtreeFlags&2064&&ar!==null)ar.return=sr,V$1=ar;else e:for(;V$1!==null;){if(sr=V$1,sr.flags&2048)switch(sr.tag){case 0:case 11:case 15:Pj(9,sr,sr.return)}var mr=sr.sibling;if(mr!==null){mr.return=sr.return,V$1=mr;break e}V$1=sr.return}}var yr=tr.current;for(V$1=yr;V$1!==null;){ar=V$1;var xr=ar.child;if(ar.subtreeFlags&2064&&xr!==null)xr.return=ar,V$1=xr;else e:for(ar=yr;V$1!==null;){if(cr=V$1,cr.flags&2048)try{switch(cr.tag){case 0:case 11:case 15:Qj(9,cr)}}catch(_r){W$1(cr,cr.return,_r)}if(cr===ar){V$1=null;break e}var vr=cr.sibling;if(vr!==null){vr.return=cr.return,V$1=vr;break e}V$1=cr.return}}if(K$1=ir,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,tr)}catch{}nr=!0}return nr}finally{C$2=rr,ok.transition=er}}return!1}function Xk(tr,er,rr){er=Ji(rr,er),er=Ni(tr,er,1),tr=nh(tr,er,1),er=R$1(),tr!==null&&(Ac(tr,1,er),Dk(tr,er))}function W$1(tr,er,rr){if(tr.tag===3)Xk(tr,tr,rr);else for(;er!==null;){if(er.tag===3){Xk(er,tr,rr);break}else if(er.tag===1){var nr=er.stateNode;if(typeof er.type.getDerivedStateFromError=="function"||typeof nr.componentDidCatch=="function"&&(Ri===null||!Ri.has(nr))){tr=Ji(rr,tr),tr=Qi(er,tr,1),er=nh(er,tr,1),tr=R$1(),er!==null&&(Ac(er,1,tr),Dk(er,tr));break}}er=er.return}}function Ti(tr,er,rr){var nr=tr.pingCache;nr!==null&&nr.delete(er),er=R$1(),tr.pingedLanes|=tr.suspendedLanes&rr,Q$1===tr&&(Z$1&rr)===rr&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(tr,0):rk|=rr),Dk(tr,er)}function Yk(tr,er){er===0&&(tr.mode&1?(er=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):er=1);var rr=R$1();tr=ih(tr,er),tr!==null&&(Ac(tr,er,rr),Dk(tr,rr))}function uj(tr){var er=tr.memoizedState,rr=0;er!==null&&(rr=er.retryLane),Yk(tr,rr)}function bk(tr,er){var rr=0;switch(tr.tag){case 13:var nr=tr.stateNode,ir=tr.memoizedState;ir!==null&&(rr=ir.retryLane);break;case 19:nr=tr.stateNode;break;default:throw Error(p$2(314))}nr!==null&&nr.delete(er),Yk(tr,rr)}var Vk;Vk=function(tr,er,rr){if(tr!==null)if(tr.memoizedProps!==er.pendingProps||Wf.current)dh=!0;else{if(!(tr.lanes&rr)&&!(er.flags&128))return dh=!1,yj(tr,er,rr);dh=!!(tr.flags&131072)}else dh=!1,I$1&&er.flags&1048576&&ug(er,ng,er.index);switch(er.lanes=0,er.tag){case 2:var nr=er.type;ij(tr,er),tr=er.pendingProps;var ir=Yf(er,H$1.current);ch(er,rr),ir=Nh(null,er,nr,tr,ir,rr);var sr=Sh();return er.flags|=1,typeof ir=="object"&&ir!==null&&typeof ir.render=="function"&&ir.$$typeof===void 0?(er.tag=1,er.memoizedState=null,er.updateQueue=null,Zf(nr)?(sr=!0,cg(er)):sr=!1,er.memoizedState=ir.state!==null&&ir.state!==void 0?ir.state:null,kh(er),ir.updater=Ei,er.stateNode=ir,ir._reactInternals=er,Ii(er,nr,tr,rr),er=jj(null,er,nr,!0,sr,rr)):(er.tag=0,I$1&&sr&&vg(er),Xi(null,er,ir,rr),er=er.child),er;case 16:nr=er.elementType;e:{switch(ij(tr,er),tr=er.pendingProps,ir=nr._init,nr=ir(nr._payload),er.type=nr,ir=er.tag=Zk(nr),tr=Ci(nr,tr),ir){case 0:er=cj(null,er,nr,tr,rr);break e;case 1:er=hj(null,er,nr,tr,rr);break e;case 11:er=Yi(null,er,nr,tr,rr);break e;case 14:er=$i(null,er,nr,Ci(nr.type,tr),rr);break e}throw Error(p$2(306,nr,""))}return er;case 0:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),cj(tr,er,nr,ir,rr);case 1:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),hj(tr,er,nr,ir,rr);case 3:e:{if(kj(er),tr===null)throw Error(p$2(387));nr=er.pendingProps,sr=er.memoizedState,ir=sr.element,lh(tr,er),qh(er,nr,null,rr);var ar=er.memoizedState;if(nr=ar.element,sr.isDehydrated)if(sr={element:nr,isDehydrated:!1,cache:ar.cache,pendingSuspenseBoundaries:ar.pendingSuspenseBoundaries,transitions:ar.transitions},er.updateQueue.baseState=sr,er.memoizedState=sr,er.flags&256){ir=Ji(Error(p$2(423)),er),er=lj(tr,er,nr,rr,ir);break e}else if(nr!==ir){ir=Ji(Error(p$2(424)),er),er=lj(tr,er,nr,rr,ir);break e}else for(yg=Lf(er.stateNode.containerInfo.firstChild),xg=er,I$1=!0,zg=null,rr=Vg(er,null,nr,rr),er.child=rr;rr;)rr.flags=rr.flags&-3|4096,rr=rr.sibling;else{if(Ig(),nr===ir){er=Zi(tr,er,rr);break e}Xi(tr,er,nr,rr)}er=er.child}return er;case 5:return Ah(er),tr===null&&Eg(er),nr=er.type,ir=er.pendingProps,sr=tr!==null?tr.memoizedProps:null,ar=ir.children,Ef(nr,ir)?ar=null:sr!==null&&Ef(nr,sr)&&(er.flags|=32),gj(tr,er),Xi(tr,er,ar,rr),er.child;case 6:return tr===null&&Eg(er),null;case 13:return oj(tr,er,rr);case 4:return yh(er,er.stateNode.containerInfo),nr=er.pendingProps,tr===null?er.child=Ug(er,null,nr,rr):Xi(tr,er,nr,rr),er.child;case 11:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),Yi(tr,er,nr,ir,rr);case 7:return Xi(tr,er,er.pendingProps,rr),er.child;case 8:return Xi(tr,er,er.pendingProps.children,rr),er.child;case 12:return Xi(tr,er,er.pendingProps.children,rr),er.child;case 10:e:{if(nr=er.type._context,ir=er.pendingProps,sr=er.memoizedProps,ar=ir.value,G$1(Wg,nr._currentValue),nr._currentValue=ar,sr!==null)if(He(sr.value,ar)){if(sr.children===ir.children&&!Wf.current){er=Zi(tr,er,rr);break e}}else for(sr=er.child,sr!==null&&(sr.return=er);sr!==null;){var cr=sr.dependencies;if(cr!==null){ar=sr.child;for(var lr=cr.firstContext;lr!==null;){if(lr.context===nr){if(sr.tag===1){lr=mh(-1,rr&-rr),lr.tag=2;var or=sr.updateQueue;if(or!==null){or=or.shared;var ur=or.pending;ur===null?lr.next=lr:(lr.next=ur.next,ur.next=lr),or.pending=lr}}sr.lanes|=rr,lr=sr.alternate,lr!==null&&(lr.lanes|=rr),bh(sr.return,rr,er),cr.lanes|=rr;break}lr=lr.next}}else if(sr.tag===10)ar=sr.type===er.type?null:sr.child;else if(sr.tag===18){if(ar=sr.return,ar===null)throw Error(p$2(341));ar.lanes|=rr,cr=ar.alternate,cr!==null&&(cr.lanes|=rr),bh(ar,rr,er),ar=sr.sibling}else ar=sr.child;if(ar!==null)ar.return=sr;else for(ar=sr;ar!==null;){if(ar===er){ar=null;break}if(sr=ar.sibling,sr!==null){sr.return=ar.return,ar=sr;break}ar=ar.return}sr=ar}Xi(tr,er,ir.children,rr),er=er.child}return er;case 9:return ir=er.type,nr=er.pendingProps.children,ch(er,rr),ir=eh(ir),nr=nr(ir),er.flags|=1,Xi(tr,er,nr,rr),er.child;case 14:return nr=er.type,ir=Ci(nr,er.pendingProps),ir=Ci(nr.type,ir),$i(tr,er,nr,ir,rr);case 15:return bj(tr,er,er.type,er.pendingProps,rr);case 17:return nr=er.type,ir=er.pendingProps,ir=er.elementType===nr?ir:Ci(nr,ir),ij(tr,er),er.tag=1,Zf(nr)?(tr=!0,cg(er)):tr=!1,ch(er,rr),Gi(er,nr,ir),Ii(er,nr,ir,rr),jj(null,er,nr,!0,tr,rr);case 19:return xj(tr,er,rr);case 22:return dj(tr,er,rr)}throw Error(p$2(156,er.tag))};function Fk(tr,er){return ac(tr,er)}function $k(tr,er,rr,nr){this.tag=tr,this.key=rr,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=er,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=nr,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(tr,er,rr,nr){return new $k(tr,er,rr,nr)}function aj(tr){return tr=tr.prototype,!(!tr||!tr.isReactComponent)}function Zk(tr){if(typeof tr=="function")return aj(tr)?1:0;if(tr!=null){if(tr=tr.$$typeof,tr===Da)return 11;if(tr===Ga)return 14}return 2}function Pg(tr,er){var rr=tr.alternate;return rr===null?(rr=Bg(tr.tag,er,tr.key,tr.mode),rr.elementType=tr.elementType,rr.type=tr.type,rr.stateNode=tr.stateNode,rr.alternate=tr,tr.alternate=rr):(rr.pendingProps=er,rr.type=tr.type,rr.flags=0,rr.subtreeFlags=0,rr.deletions=null),rr.flags=tr.flags&14680064,rr.childLanes=tr.childLanes,rr.lanes=tr.lanes,rr.child=tr.child,rr.memoizedProps=tr.memoizedProps,rr.memoizedState=tr.memoizedState,rr.updateQueue=tr.updateQueue,er=tr.dependencies,rr.dependencies=er===null?null:{lanes:er.lanes,firstContext:er.firstContext},rr.sibling=tr.sibling,rr.index=tr.index,rr.ref=tr.ref,rr}function Rg(tr,er,rr,nr,ir,sr){var ar=2;if(nr=tr,typeof tr=="function")aj(tr)&&(ar=1);else if(typeof tr=="string")ar=5;else e:switch(tr){case ya:return Tg(rr.children,ir,sr,er);case za:ar=8,ir|=8;break;case Aa:return tr=Bg(12,rr,er,ir|2),tr.elementType=Aa,tr.lanes=sr,tr;case Ea:return tr=Bg(13,rr,er,ir),tr.elementType=Ea,tr.lanes=sr,tr;case Fa:return tr=Bg(19,rr,er,ir),tr.elementType=Fa,tr.lanes=sr,tr;case Ia:return pj(rr,ir,sr,er);default:if(typeof tr=="object"&&tr!==null)switch(tr.$$typeof){case Ba:ar=10;break e;case Ca:ar=9;break e;case Da:ar=11;break e;case Ga:ar=14;break e;case Ha:ar=16,nr=null;break e}throw Error(p$2(130,tr==null?tr:typeof tr,""))}return er=Bg(ar,rr,er,ir),er.elementType=tr,er.type=nr,er.lanes=sr,er}function Tg(tr,er,rr,nr){return tr=Bg(7,tr,nr,er),tr.lanes=rr,tr}function pj(tr,er,rr,nr){return tr=Bg(22,tr,nr,er),tr.elementType=Ia,tr.lanes=rr,tr.stateNode={isHidden:!1},tr}function Qg(tr,er,rr){return tr=Bg(6,tr,null,er),tr.lanes=rr,tr}function Sg(tr,er,rr){return er=Bg(4,tr.children!==null?tr.children:[],tr.key,er),er.lanes=rr,er.stateNode={containerInfo:tr.containerInfo,pendingChildren:null,implementation:tr.implementation},er}function al(tr,er,rr,nr,ir){this.tag=er,this.containerInfo=tr,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=nr,this.onRecoverableError=ir,this.mutableSourceEagerHydrationData=null}function bl(tr,er,rr,nr,ir,sr,ar,cr,lr){return tr=new al(tr,er,rr,cr,lr),er===1?(er=1,sr===!0&&(er|=8)):er=0,sr=Bg(3,null,null,er),tr.current=sr,sr.stateNode=tr,sr.memoizedState={element:nr,isDehydrated:rr,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(sr),tr}function cl(tr,er,rr){var nr=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:nr==null?null:""+nr,children:tr,containerInfo:er,implementation:rr}}function dl(tr){if(!tr)return Vf;tr=tr._reactInternals;e:{if(Vb(tr)!==tr||tr.tag!==1)throw Error(p$2(170));var er=tr;do{switch(er.tag){case 3:er=er.stateNode.context;break e;case 1:if(Zf(er.type)){er=er.stateNode.__reactInternalMemoizedMergedChildContext;break e}}er=er.return}while(er!==null);throw Error(p$2(171))}if(tr.tag===1){var rr=tr.type;if(Zf(rr))return bg(tr,rr,er)}return er}function el(tr,er,rr,nr,ir,sr,ar,cr,lr){return tr=bl(rr,nr,!0,tr,ir,sr,ar,cr,lr),tr.context=dl(null),rr=tr.current,nr=R$1(),ir=yi(rr),sr=mh(nr,ir),sr.callback=er??null,nh(rr,sr,ir),tr.current.lanes=ir,Ac(tr,ir,nr),Dk(tr,nr),tr}function fl$1(tr,er,rr,nr){var ir=er.current,sr=R$1(),ar=yi(ir);return rr=dl(rr),er.context===null?er.context=rr:er.pendingContext=rr,er=mh(sr,ar),er.payload={element:tr},nr=nr===void 0?null:nr,nr!==null&&(er.callback=nr),tr=nh(ir,er,ar),tr!==null&&(gi(tr,ir,ar,sr),oh(tr,ir,ar)),ar}function gl(tr){if(tr=tr.current,!tr.child)return null;switch(tr.child.tag){case 5:return tr.child.stateNode;default:return tr.child.stateNode}}function hl(tr,er){if(tr=tr.memoizedState,tr!==null&&tr.dehydrated!==null){var rr=tr.retryLane;tr.retryLane=rr!==0&&rr<er?rr:er}}function il(tr,er){hl(tr,er),(tr=tr.alternate)&&hl(tr,er)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(tr){console.error(tr)};function ll(tr){this._internalRoot=tr}ml.prototype.render=ll.prototype.render=function(tr){var er=this._internalRoot;if(er===null)throw Error(p$2(409));fl$1(tr,er,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var tr=this._internalRoot;if(tr!==null){this._internalRoot=null;var er=tr.containerInfo;Rk(function(){fl$1(null,tr,null,null)}),er[uf]=null}};function ml(tr){this._internalRoot=tr}ml.prototype.unstable_scheduleHydration=function(tr){if(tr){var er=Hc();tr={blockedOn:null,target:tr,priority:er};for(var rr=0;rr<Qc.length&&er!==0&&er<Qc[rr].priority;rr++);Qc.splice(rr,0,tr),rr===0&&Vc(tr)}};function nl(tr){return!(!tr||tr.nodeType!==1&&tr.nodeType!==9&&tr.nodeType!==11)}function ol(tr){return!(!tr||tr.nodeType!==1&&tr.nodeType!==9&&tr.nodeType!==11&&(tr.nodeType!==8||tr.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(tr,er,rr,nr,ir){if(ir){if(typeof nr=="function"){var sr=nr;nr=function(){var or=gl(ar);sr.call(or)}}var ar=el(er,nr,tr,0,null,!1,!1,"",pl);return tr._reactRootContainer=ar,tr[uf]=ar.current,sf(tr.nodeType===8?tr.parentNode:tr),Rk(),ar}for(;ir=tr.lastChild;)tr.removeChild(ir);if(typeof nr=="function"){var cr=nr;nr=function(){var or=gl(lr);cr.call(or)}}var lr=bl(tr,0,!1,null,null,!1,!1,"",pl);return tr._reactRootContainer=lr,tr[uf]=lr.current,sf(tr.nodeType===8?tr.parentNode:tr),Rk(function(){fl$1(er,lr,rr,nr)}),lr}function rl(tr,er,rr,nr,ir){var sr=rr._reactRootContainer;if(sr){var ar=sr;if(typeof ir=="function"){var cr=ir;ir=function(){var lr=gl(ar);cr.call(lr)}}fl$1(er,ar,tr,ir)}else ar=ql(rr,er,tr,ir,nr);return gl(ar)}Ec=function(tr){switch(tr.tag){case 3:var er=tr.stateNode;if(er.current.memoizedState.isDehydrated){var rr=tc(er.pendingLanes);rr!==0&&(Cc(er,rr|1),Dk(er,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var nr=ih(tr,1);if(nr!==null){var ir=R$1();gi(nr,tr,1,ir)}}),il(tr,1)}};Fc=function(tr){if(tr.tag===13){var er=ih(tr,134217728);if(er!==null){var rr=R$1();gi(er,tr,134217728,rr)}il(tr,134217728)}};Gc=function(tr){if(tr.tag===13){var er=yi(tr),rr=ih(tr,er);if(rr!==null){var nr=R$1();gi(rr,tr,er,nr)}il(tr,er)}};Hc=function(){return C$2};Ic=function(tr,er){var rr=C$2;try{return C$2=tr,er()}finally{C$2=rr}};yb=function(tr,er,rr){switch(er){case"input":if(bb(tr,rr),er=rr.name,rr.type==="radio"&&er!=null){for(rr=tr;rr.parentNode;)rr=rr.parentNode;for(rr=rr.querySelectorAll("input[name="+JSON.stringify(""+er)+'][type="radio"]'),er=0;er<rr.length;er++){var nr=rr[er];if(nr!==tr&&nr.form===tr.form){var ir=Db(nr);if(!ir)throw Error(p$2(90));Wa(nr),bb(nr,ir)}}}break;case"textarea":ib(tr,rr);break;case"select":er=rr.value,er!=null&&fb(tr,!!rr.multiple,er,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$2,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(tr){return tr=Zb(tr),tr===null?null:tr.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc$1=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(tr,er){var rr=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(er))throw Error(p$2(200));return cl(tr,er,null,rr)};reactDom_production_min.createRoot=function(tr,er){if(!nl(tr))throw Error(p$2(299));var rr=!1,nr="",ir=kl;return er!=null&&(er.unstable_strictMode===!0&&(rr=!0),er.identifierPrefix!==void 0&&(nr=er.identifierPrefix),er.onRecoverableError!==void 0&&(ir=er.onRecoverableError)),er=bl(tr,1,!1,null,null,rr,!1,nr,ir),tr[uf]=er.current,sf(tr.nodeType===8?tr.parentNode:tr),new ll(er)};reactDom_production_min.findDOMNode=function(tr){if(tr==null)return null;if(tr.nodeType===1)return tr;var er=tr._reactInternals;if(er===void 0)throw typeof tr.render=="function"?Error(p$2(188)):(tr=Object.keys(tr).join(","),Error(p$2(268,tr)));return tr=Zb(er),tr=tr===null?null:tr.stateNode,tr};reactDom_production_min.flushSync=function(tr){return Rk(tr)};reactDom_production_min.hydrate=function(tr,er,rr){if(!ol(er))throw Error(p$2(200));return rl(null,tr,er,!0,rr)};reactDom_production_min.hydrateRoot=function(tr,er,rr){if(!nl(tr))throw Error(p$2(405));var nr=rr!=null&&rr.hydratedSources||null,ir=!1,sr="",ar=kl;if(rr!=null&&(rr.unstable_strictMode===!0&&(ir=!0),rr.identifierPrefix!==void 0&&(sr=rr.identifierPrefix),rr.onRecoverableError!==void 0&&(ar=rr.onRecoverableError)),er=el(er,null,tr,1,rr??null,ir,!1,sr,ar),tr[uf]=er.current,sf(tr),nr)for(tr=0;tr<nr.length;tr++)rr=nr[tr],ir=rr._getVersion,ir=ir(rr._source),er.mutableSourceEagerHydrationData==null?er.mutableSourceEagerHydrationData=[rr,ir]:er.mutableSourceEagerHydrationData.push(rr,ir);return new ml(er)};reactDom_production_min.render=function(tr,er,rr){if(!ol(er))throw Error(p$2(200));return rl(null,tr,er,!1,rr)};reactDom_production_min.unmountComponentAtNode=function(tr){if(!ol(tr))throw Error(p$2(40));return tr._reactRootContainer?(Rk(function(){rl(null,null,tr,!1,function(){tr._reactRootContainer=null,tr[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(tr,er,rr,nr){if(!ol(rr))throw Error(p$2(200));if(tr==null||tr._reactInternals===void 0)throw Error(p$2(38));return rl(tr,er,rr,!1,nr)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(tr){console.error(tr)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$2=reactDomExports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(tr){const er=[];let rr=0;for(let nr=0;nr<tr.length;nr++){let ir=tr.charCodeAt(nr);ir<128?er[rr++]=ir:ir<2048?(er[rr++]=ir>>6|192,er[rr++]=ir&63|128):(ir&64512)===55296&&nr+1<tr.length&&(tr.charCodeAt(nr+1)&64512)===56320?(ir=65536+((ir&1023)<<10)+(tr.charCodeAt(++nr)&1023),er[rr++]=ir>>18|240,er[rr++]=ir>>12&63|128,er[rr++]=ir>>6&63|128,er[rr++]=ir&63|128):(er[rr++]=ir>>12|224,er[rr++]=ir>>6&63|128,er[rr++]=ir&63|128)}return er},byteArrayToString=function(tr){const er=[];let rr=0,nr=0;for(;rr<tr.length;){const ir=tr[rr++];if(ir<128)er[nr++]=String.fromCharCode(ir);else if(ir>191&&ir<224){const sr=tr[rr++];er[nr++]=String.fromCharCode((ir&31)<<6|sr&63)}else if(ir>239&&ir<365){const sr=tr[rr++],ar=tr[rr++],cr=tr[rr++],lr=((ir&7)<<18|(sr&63)<<12|(ar&63)<<6|cr&63)-65536;er[nr++]=String.fromCharCode(55296+(lr>>10)),er[nr++]=String.fromCharCode(56320+(lr&1023))}else{const sr=tr[rr++],ar=tr[rr++];er[nr++]=String.fromCharCode((ir&15)<<12|(sr&63)<<6|ar&63)}}return er.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(tr,er){if(!Array.isArray(tr))throw Error("encodeByteArray takes an array as a parameter");this.init_();const rr=er?this.byteToCharMapWebSafe_:this.byteToCharMap_,nr=[];for(let ir=0;ir<tr.length;ir+=3){const sr=tr[ir],ar=ir+1<tr.length,cr=ar?tr[ir+1]:0,lr=ir+2<tr.length,or=lr?tr[ir+2]:0,ur=sr>>2,hr=(sr&3)<<4|cr>>4;let dr=(cr&15)<<2|or>>6,fr=or&63;lr||(fr=64,ar||(dr=64)),nr.push(rr[ur],rr[hr],rr[dr],rr[fr])}return nr.join("")},encodeString(tr,er){return this.HAS_NATIVE_SUPPORT&&!er?btoa(tr):this.encodeByteArray(stringToByteArray$1(tr),er)},decodeString(tr,er){return this.HAS_NATIVE_SUPPORT&&!er?atob(tr):byteArrayToString(this.decodeStringToByteArray(tr,er))},decodeStringToByteArray(tr,er){this.init_();const rr=er?this.charToByteMapWebSafe_:this.charToByteMap_,nr=[];for(let ir=0;ir<tr.length;){const sr=rr[tr.charAt(ir++)],cr=ir<tr.length?rr[tr.charAt(ir)]:0;++ir;const or=ir<tr.length?rr[tr.charAt(ir)]:64;++ir;const hr=ir<tr.length?rr[tr.charAt(ir)]:64;if(++ir,sr==null||cr==null||or==null||hr==null)throw new DecodeBase64StringError;const dr=sr<<2|cr>>4;if(nr.push(dr),or!==64){const fr=cr<<4&240|or>>2;if(nr.push(fr),hr!==64){const gr=or<<6&192|hr;nr.push(gr)}}}return nr},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let tr=0;tr<this.ENCODED_VALS.length;tr++)this.byteToCharMap_[tr]=this.ENCODED_VALS.charAt(tr),this.charToByteMap_[this.byteToCharMap_[tr]]=tr,this.byteToCharMapWebSafe_[tr]=this.ENCODED_VALS_WEBSAFE.charAt(tr),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[tr]]=tr,tr>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(tr)]=tr,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(tr)]=tr)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(tr){const er=stringToByteArray$1(tr);return base64.encodeByteArray(er,!0)},base64urlEncodeWithoutPadding=function(tr){return base64Encode(tr).replace(/\./g,"")},base64Decode=function(tr){try{return base64.decodeString(tr,!0)}catch(er){console.error("base64Decode failed: ",er)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const tr=define_process_env_default.__FIREBASE_DEFAULTS__;if(tr)return JSON.parse(tr)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let tr;try{tr=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const er=tr&&base64Decode(tr[1]);return er&&JSON.parse(er)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(tr){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${tr}`);return}},getDefaultEmulatorHost=tr=>{var er,rr;return(rr=(er=getDefaults())===null||er===void 0?void 0:er.emulatorHosts)===null||rr===void 0?void 0:rr[tr]},getDefaultEmulatorHostnameAndPort=tr=>{const er=getDefaultEmulatorHost(tr);if(!er)return;const rr=er.lastIndexOf(":");if(rr<=0||rr+1===er.length)throw new Error(`Invalid host ${er} with no separate hostname and port!`);const nr=parseInt(er.substring(rr+1),10);return er[0]==="["?[er.substring(1,rr-1),nr]:[er.substring(0,rr),nr]},getDefaultAppConfig=()=>{var tr;return(tr=getDefaults())===null||tr===void 0?void 0:tr.config},getExperimentalSetting=tr=>{var er;return(er=getDefaults())===null||er===void 0?void 0:er[`_${tr}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((er,rr)=>{this.resolve=er,this.reject=rr})}wrapCallback(er){return(rr,nr)=>{rr?this.reject(rr):this.resolve(nr),typeof er=="function"&&(this.promise.catch(()=>{}),er.length===1?er(rr):er(rr,nr))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(tr,er){if(tr.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rr={alg:"none",type:"JWT"},nr=er||"demo-project",ir=tr.iat||0,sr=tr.sub||tr.user_id;if(!sr)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ar=Object.assign({iss:`https://securetoken.google.com/${nr}`,aud:nr,iat:ir,exp:ir+3600,auth_time:ir,sub:sr,user_id:sr,firebase:{sign_in_provider:"custom",identities:{}}},tr);return[base64urlEncodeWithoutPadding(JSON.stringify(rr)),base64urlEncodeWithoutPadding(JSON.stringify(ar)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var tr;const er=(tr=getDefaults())===null||tr===void 0?void 0:tr.forceEnvironment;if(er==="node")return!0;if(er==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const tr=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof tr=="object"&&tr.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const tr=getUA();return tr.indexOf("MSIE ")>=0||tr.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((tr,er)=>{try{let rr=!0;const nr="validate-browser-context-for-indexeddb-analytics-module",ir=self.indexedDB.open(nr);ir.onsuccess=()=>{ir.result.close(),rr||self.indexedDB.deleteDatabase(nr),tr(!0)},ir.onupgradeneeded=()=>{rr=!1},ir.onerror=()=>{var sr;er(((sr=ir.error)===null||sr===void 0?void 0:sr.message)||"")}}catch(rr){er(rr)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(er,rr,nr){super(rr),this.code=er,this.customData=nr,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(er,rr,nr){this.service=er,this.serviceName=rr,this.errors=nr}create(er,...rr){const nr=rr[0]||{},ir=`${this.service}/${er}`,sr=this.errors[er],ar=sr?replaceTemplate(sr,nr):"Error",cr=`${this.serviceName}: ${ar} (${ir}).`;return new FirebaseError(ir,cr,nr)}}function replaceTemplate(tr,er){return tr.replace(PATTERN,(rr,nr)=>{const ir=er[nr];return ir!=null?String(ir):`<${nr}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(tr){for(const er in tr)if(Object.prototype.hasOwnProperty.call(tr,er))return!1;return!0}function deepEqual$1(tr,er){if(tr===er)return!0;const rr=Object.keys(tr),nr=Object.keys(er);for(const ir of rr){if(!nr.includes(ir))return!1;const sr=tr[ir],ar=er[ir];if(isObject$9(sr)&&isObject$9(ar)){if(!deepEqual$1(sr,ar))return!1}else if(sr!==ar)return!1}for(const ir of nr)if(!rr.includes(ir))return!1;return!0}function isObject$9(tr){return tr!==null&&typeof tr=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(tr){const er=[];for(const[rr,nr]of Object.entries(tr))Array.isArray(nr)?nr.forEach(ir=>{er.push(encodeURIComponent(rr)+"="+encodeURIComponent(ir))}):er.push(encodeURIComponent(rr)+"="+encodeURIComponent(nr));return er.length?"&"+er.join("&"):""}function querystringDecode(tr){const er={};return tr.replace(/^\?/,"").split("&").forEach(nr=>{if(nr){const[ir,sr]=nr.split("=");er[decodeURIComponent(ir)]=decodeURIComponent(sr)}}),er}function extractQuerystring(tr){const er=tr.indexOf("?");if(!er)return"";const rr=tr.indexOf("#",er);return tr.substring(er,rr>0?rr:void 0)}function createSubscribe(tr,er){const rr=new ObserverProxy(tr,er);return rr.subscribe.bind(rr)}class ObserverProxy{constructor(er,rr){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=rr,this.task.then(()=>{er(this)}).catch(nr=>{this.error(nr)})}next(er){this.forEachObserver(rr=>{rr.next(er)})}error(er){this.forEachObserver(rr=>{rr.error(er)}),this.close(er)}complete(){this.forEachObserver(er=>{er.complete()}),this.close()}subscribe(er,rr,nr){let ir;if(er===void 0&&rr===void 0&&nr===void 0)throw new Error("Missing Observer.");implementsAnyMethods(er,["next","error","complete"])?ir=er:ir={next:er,error:rr,complete:nr},ir.next===void 0&&(ir.next=noop$3),ir.error===void 0&&(ir.error=noop$3),ir.complete===void 0&&(ir.complete=noop$3);const sr=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ir.error(this.finalError):ir.complete()}catch{}}),this.observers.push(ir),sr}unsubscribeOne(er){this.observers===void 0||this.observers[er]===void 0||(delete this.observers[er],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(er){if(!this.finalized)for(let rr=0;rr<this.observers.length;rr++)this.sendOne(rr,er)}sendOne(er,rr){this.task.then(()=>{if(this.observers!==void 0&&this.observers[er]!==void 0)try{rr(this.observers[er])}catch(nr){typeof console<"u"&&console.error&&console.error(nr)}})}close(er){this.finalized||(this.finalized=!0,er!==void 0&&(this.finalError=er),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(tr,er){if(typeof tr!="object"||tr===null)return!1;for(const rr of er)if(rr in tr&&typeof tr[rr]=="function")return!0;return!1}function noop$3(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(tr){return tr&&tr._delegate?tr._delegate:tr}class Component{constructor(er,rr,nr){this.name=er,this.instanceFactory=rr,this.type=nr,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(er){return this.instantiationMode=er,this}setMultipleInstances(er){return this.multipleInstances=er,this}setServiceProps(er){return this.serviceProps=er,this}setInstanceCreatedCallback(er){return this.onInstanceCreated=er,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(er,rr){this.name=er,this.container=rr,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(er){const rr=this.normalizeInstanceIdentifier(er);if(!this.instancesDeferred.has(rr)){const nr=new Deferred;if(this.instancesDeferred.set(rr,nr),this.isInitialized(rr)||this.shouldAutoInitialize())try{const ir=this.getOrInitializeService({instanceIdentifier:rr});ir&&nr.resolve(ir)}catch{}}return this.instancesDeferred.get(rr).promise}getImmediate(er){var rr;const nr=this.normalizeInstanceIdentifier(er==null?void 0:er.identifier),ir=(rr=er==null?void 0:er.optional)!==null&&rr!==void 0?rr:!1;if(this.isInitialized(nr)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:nr})}catch(sr){if(ir)return null;throw sr}else{if(ir)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(er){if(er.name!==this.name)throw Error(`Mismatching Component ${er.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=er,!!this.shouldAutoInitialize()){if(isComponentEager(er))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[rr,nr]of this.instancesDeferred.entries()){const ir=this.normalizeInstanceIdentifier(rr);try{const sr=this.getOrInitializeService({instanceIdentifier:ir});nr.resolve(sr)}catch{}}}}clearInstance(er=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(er),this.instancesOptions.delete(er),this.instances.delete(er)}async delete(){const er=Array.from(this.instances.values());await Promise.all([...er.filter(rr=>"INTERNAL"in rr).map(rr=>rr.INTERNAL.delete()),...er.filter(rr=>"_delete"in rr).map(rr=>rr._delete())])}isComponentSet(){return this.component!=null}isInitialized(er=DEFAULT_ENTRY_NAME$1){return this.instances.has(er)}getOptions(er=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(er)||{}}initialize(er={}){const{options:rr={}}=er,nr=this.normalizeInstanceIdentifier(er.instanceIdentifier);if(this.isInitialized(nr))throw Error(`${this.name}(${nr}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ir=this.getOrInitializeService({instanceIdentifier:nr,options:rr});for(const[sr,ar]of this.instancesDeferred.entries()){const cr=this.normalizeInstanceIdentifier(sr);nr===cr&&ar.resolve(ir)}return ir}onInit(er,rr){var nr;const ir=this.normalizeInstanceIdentifier(rr),sr=(nr=this.onInitCallbacks.get(ir))!==null&&nr!==void 0?nr:new Set;sr.add(er),this.onInitCallbacks.set(ir,sr);const ar=this.instances.get(ir);return ar&&er(ar,ir),()=>{sr.delete(er)}}invokeOnInitCallbacks(er,rr){const nr=this.onInitCallbacks.get(rr);if(nr)for(const ir of nr)try{ir(er,rr)}catch{}}getOrInitializeService({instanceIdentifier:er,options:rr={}}){let nr=this.instances.get(er);if(!nr&&this.component&&(nr=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(er),options:rr}),this.instances.set(er,nr),this.instancesOptions.set(er,rr),this.invokeOnInitCallbacks(nr,er),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,er,nr)}catch{}return nr||null}normalizeInstanceIdentifier(er=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?er:DEFAULT_ENTRY_NAME$1:er}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(tr){return tr===DEFAULT_ENTRY_NAME$1?void 0:tr}function isComponentEager(tr){return tr.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(er){this.name=er,this.providers=new Map}addComponent(er){const rr=this.getProvider(er.name);if(rr.isComponentSet())throw new Error(`Component ${er.name} has already been registered with ${this.name}`);rr.setComponent(er)}addOrOverwriteComponent(er){this.getProvider(er.name).isComponentSet()&&this.providers.delete(er.name),this.addComponent(er)}getProvider(er){if(this.providers.has(er))return this.providers.get(er);const rr=new Provider(er,this);return this.providers.set(er,rr),rr}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(tr){tr[tr.DEBUG=0]="DEBUG",tr[tr.VERBOSE=1]="VERBOSE",tr[tr.INFO=2]="INFO",tr[tr.WARN=3]="WARN",tr[tr.ERROR=4]="ERROR",tr[tr.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(tr,er,...rr)=>{if(er<tr.logLevel)return;const nr=new Date().toISOString(),ir=ConsoleMethod[er];if(ir)console[ir](`[${nr}]  ${tr.name}:`,...rr);else throw new Error(`Attempted to log a message with an invalid logType (value: ${er})`)};class Logger{constructor(er){this.name=er,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(er){if(!(er in LogLevel))throw new TypeError(`Invalid value "${er}" assigned to \`logLevel\``);this._logLevel=er}setLogLevel(er){this._logLevel=typeof er=="string"?levelStringToEnum[er]:er}get logHandler(){return this._logHandler}set logHandler(er){if(typeof er!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=er}get userLogHandler(){return this._userLogHandler}set userLogHandler(er){this._userLogHandler=er}debug(...er){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...er),this._logHandler(this,LogLevel.DEBUG,...er)}log(...er){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...er),this._logHandler(this,LogLevel.VERBOSE,...er)}info(...er){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...er),this._logHandler(this,LogLevel.INFO,...er)}warn(...er){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...er),this._logHandler(this,LogLevel.WARN,...er)}error(...er){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...er),this._logHandler(this,LogLevel.ERROR,...er)}}const instanceOfAny=(tr,er)=>er.some(rr=>tr instanceof rr);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(tr){const er=new Promise((rr,nr)=>{const ir=()=>{tr.removeEventListener("success",sr),tr.removeEventListener("error",ar)},sr=()=>{rr(wrap(tr.result)),ir()},ar=()=>{nr(tr.error),ir()};tr.addEventListener("success",sr),tr.addEventListener("error",ar)});return er.then(rr=>{rr instanceof IDBCursor&&cursorRequestMap.set(rr,tr)}).catch(()=>{}),reverseTransformCache.set(er,tr),er}function cacheDonePromiseForTransaction(tr){if(transactionDoneMap.has(tr))return;const er=new Promise((rr,nr)=>{const ir=()=>{tr.removeEventListener("complete",sr),tr.removeEventListener("error",ar),tr.removeEventListener("abort",ar)},sr=()=>{rr(),ir()},ar=()=>{nr(tr.error||new DOMException("AbortError","AbortError")),ir()};tr.addEventListener("complete",sr),tr.addEventListener("error",ar),tr.addEventListener("abort",ar)});transactionDoneMap.set(tr,er)}let idbProxyTraps={get(tr,er,rr){if(tr instanceof IDBTransaction){if(er==="done")return transactionDoneMap.get(tr);if(er==="objectStoreNames")return tr.objectStoreNames||transactionStoreNamesMap.get(tr);if(er==="store")return rr.objectStoreNames[1]?void 0:rr.objectStore(rr.objectStoreNames[0])}return wrap(tr[er])},set(tr,er,rr){return tr[er]=rr,!0},has(tr,er){return tr instanceof IDBTransaction&&(er==="done"||er==="store")?!0:er in tr}};function replaceTraps(tr){idbProxyTraps=tr(idbProxyTraps)}function wrapFunction(tr){return tr===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(er,...rr){const nr=tr.call(unwrap(this),er,...rr);return transactionStoreNamesMap.set(nr,er.sort?er.sort():[er]),wrap(nr)}:getCursorAdvanceMethods().includes(tr)?function(...er){return tr.apply(unwrap(this),er),wrap(cursorRequestMap.get(this))}:function(...er){return wrap(tr.apply(unwrap(this),er))}}function transformCachableValue(tr){return typeof tr=="function"?wrapFunction(tr):(tr instanceof IDBTransaction&&cacheDonePromiseForTransaction(tr),instanceOfAny(tr,getIdbProxyableTypes())?new Proxy(tr,idbProxyTraps):tr)}function wrap(tr){if(tr instanceof IDBRequest)return promisifyRequest(tr);if(transformCache.has(tr))return transformCache.get(tr);const er=transformCachableValue(tr);return er!==tr&&(transformCache.set(tr,er),reverseTransformCache.set(er,tr)),er}const unwrap=tr=>reverseTransformCache.get(tr);function openDB(tr,er,{blocked:rr,upgrade:nr,blocking:ir,terminated:sr}={}){const ar=indexedDB.open(tr,er),cr=wrap(ar);return nr&&ar.addEventListener("upgradeneeded",lr=>{nr(wrap(ar.result),lr.oldVersion,lr.newVersion,wrap(ar.transaction),lr)}),rr&&ar.addEventListener("blocked",lr=>rr(lr.oldVersion,lr.newVersion,lr)),cr.then(lr=>{sr&&lr.addEventListener("close",()=>sr()),ir&&lr.addEventListener("versionchange",or=>ir(or.oldVersion,or.newVersion,or))}).catch(()=>{}),cr}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(tr,er){if(!(tr instanceof IDBDatabase&&!(er in tr)&&typeof er=="string"))return;if(cachedMethods.get(er))return cachedMethods.get(er);const rr=er.replace(/FromIndex$/,""),nr=er!==rr,ir=writeMethods.includes(rr);if(!(rr in(nr?IDBIndex:IDBObjectStore).prototype)||!(ir||readMethods.includes(rr)))return;const sr=async function(ar,...cr){const lr=this.transaction(ar,ir?"readwrite":"readonly");let or=lr.store;return nr&&(or=or.index(cr.shift())),(await Promise.all([or[rr](...cr),ir&&lr.done]))[0]};return cachedMethods.set(er,sr),sr}replaceTraps(tr=>({...tr,get:(er,rr,nr)=>getMethod(er,rr)||tr.get(er,rr,nr),has:(er,rr)=>!!getMethod(er,rr)||tr.has(er,rr)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(er){this.container=er}getPlatformInfoString(){return this.container.getProviders().map(rr=>{if(isVersionServiceProvider(rr)){const nr=rr.getImmediate();return`${nr.library}/${nr.version}`}else return null}).filter(rr=>rr).join(" ")}}function isVersionServiceProvider(tr){const er=tr.getComponent();return(er==null?void 0:er.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/vertexai-preview",name$1$1="@firebase/firestore-compat",name$r="firebase",version$3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(tr,er){try{tr.container.addComponent(er)}catch(rr){logger.debug(`Component ${er.name} failed to register with FirebaseApp ${tr.name}`,rr)}}function _registerComponent(tr){const er=tr.name;if(_components.has(er))return logger.debug(`There were multiple attempts to register component ${er}.`),!1;_components.set(er,tr);for(const rr of _apps.values())_addComponent(rr,tr);for(const rr of _serverApps.values())_addComponent(rr,tr);return!0}function _getProvider(tr,er){const rr=tr.container.getProvider("heartbeat").getImmediate({optional:!0});return rr&&rr.triggerHeartbeat(),tr.container.getProvider(er)}function _isFirebaseServerApp(tr){return tr.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(er,rr,nr){this._isDeleted=!1,this._options=Object.assign({},er),this._config=Object.assign({},rr),this._name=rr.name,this._automaticDataCollectionEnabled=rr.automaticDataCollectionEnabled,this._container=nr,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(er){this.checkDestroyed(),this._automaticDataCollectionEnabled=er}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(er){this._isDeleted=er}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$3;function initializeApp(tr,er={}){let rr=tr;typeof er!="object"&&(er={name:er});const nr=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},er),ir=nr.name;if(typeof ir!="string"||!ir)throw ERROR_FACTORY.create("bad-app-name",{appName:String(ir)});if(rr||(rr=getDefaultAppConfig()),!rr)throw ERROR_FACTORY.create("no-options");const sr=_apps.get(ir);if(sr){if(deepEqual$1(rr,sr.options)&&deepEqual$1(nr,sr.config))return sr;throw ERROR_FACTORY.create("duplicate-app",{appName:ir})}const ar=new ComponentContainer(ir);for(const lr of _components.values())ar.addComponent(lr);const cr=new FirebaseAppImpl(rr,nr,ar);return _apps.set(ir,cr),cr}function getApp(tr=DEFAULT_ENTRY_NAME){const er=_apps.get(tr);if(!er&&tr===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!er)throw ERROR_FACTORY.create("no-app",{appName:tr});return er}function registerVersion(tr,er,rr){var nr;let ir=(nr=PLATFORM_LOG_STRING[tr])!==null&&nr!==void 0?nr:tr;rr&&(ir+=`-${rr}`);const sr=ir.match(/\s|\//),ar=er.match(/\s|\//);if(sr||ar){const cr=[`Unable to register library "${ir}" with version "${er}":`];sr&&cr.push(`library name "${ir}" contains illegal characters (whitespace or "/")`),sr&&ar&&cr.push("and"),ar&&cr.push(`version name "${er}" contains illegal characters (whitespace or "/")`),logger.warn(cr.join(" "));return}_registerComponent(new Component(`${ir}-version`,()=>({library:ir,version:er}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(tr,er)=>{switch(er){case 0:try{tr.createObjectStore(STORE_NAME)}catch(rr){console.warn(rr)}}}}).catch(tr=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:tr.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(tr){try{const rr=(await getDbPromise()).transaction(STORE_NAME),nr=await rr.objectStore(STORE_NAME).get(computeKey(tr));return await rr.done,nr}catch(er){if(er instanceof FirebaseError)logger.warn(er.message);else{const rr=ERROR_FACTORY.create("idb-get",{originalErrorMessage:er==null?void 0:er.message});logger.warn(rr.message)}}}async function writeHeartbeatsToIndexedDB(tr,er){try{const nr=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await nr.objectStore(STORE_NAME).put(er,computeKey(tr)),await nr.done}catch(rr){if(rr instanceof FirebaseError)logger.warn(rr.message);else{const nr=ERROR_FACTORY.create("idb-set",{originalErrorMessage:rr==null?void 0:rr.message});logger.warn(nr.message)}}}function computeKey(tr){return`${tr.name}!${tr.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(er){this.container=er,this._heartbeatsCache=null;const rr=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(rr),this._heartbeatsCachePromise=this._storage.read().then(nr=>(this._heartbeatsCache=nr,nr))}async triggerHeartbeat(){var er,rr;try{const ir=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sr=getUTCDateString();return((er=this._heartbeatsCache)===null||er===void 0?void 0:er.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((rr=this._heartbeatsCache)===null||rr===void 0?void 0:rr.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===sr||this._heartbeatsCache.heartbeats.some(ar=>ar.date===sr)?void 0:(this._heartbeatsCache.heartbeats.push({date:sr,agent:ir}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(ar=>{const cr=new Date(ar.date).valueOf();return Date.now()-cr<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache))}catch(nr){logger.warn(nr)}}async getHeartbeatsHeader(){var er;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((er=this._heartbeatsCache)===null||er===void 0?void 0:er.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const rr=getUTCDateString(),{heartbeatsToSend:nr,unsentEntries:ir}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),sr=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:nr}));return this._heartbeatsCache.lastSentHeartbeatDate=rr,ir.length>0?(this._heartbeatsCache.heartbeats=ir,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),sr}catch(rr){return logger.warn(rr),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(tr,er=MAX_HEADER_BYTES){const rr=[];let nr=tr.slice();for(const ir of tr){const sr=rr.find(ar=>ar.agent===ir.agent);if(sr){if(sr.dates.push(ir.date),countBytes(rr)>er){sr.dates.pop();break}}else if(rr.push({agent:ir.agent,dates:[ir.date]}),countBytes(rr)>er){rr.pop();break}nr=nr.slice(1)}return{heartbeatsToSend:rr,unsentEntries:nr}}class HeartbeatStorageImpl{constructor(er){this.app=er,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const rr=await readHeartbeatsFromIndexedDB(this.app);return rr!=null&&rr.heartbeats?rr:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(er){var rr;if(await this._canUseIndexedDBPromise){const ir=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(rr=er.lastSentHeartbeatDate)!==null&&rr!==void 0?rr:ir.lastSentHeartbeatDate,heartbeats:er.heartbeats})}else return}async add(er){var rr;if(await this._canUseIndexedDBPromise){const ir=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(rr=er.lastSentHeartbeatDate)!==null&&rr!==void 0?rr:ir.lastSentHeartbeatDate,heartbeats:[...ir.heartbeats,...er.heartbeats]})}else return}}function countBytes(tr){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:tr})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(tr){_registerComponent(new Component("platform-logger",er=>new PlatformLoggerServiceImpl(er),"PRIVATE")),_registerComponent(new Component("heartbeat",er=>new HeartbeatServiceImpl(er),"PRIVATE")),registerVersion(name$q,version$1$1,tr),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(tr,er){var rr={};for(var nr in tr)Object.prototype.hasOwnProperty.call(tr,nr)&&er.indexOf(nr)<0&&(rr[nr]=tr[nr]);if(tr!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ir=0,nr=Object.getOwnPropertySymbols(tr);ir<nr.length;ir++)er.indexOf(nr[ir])<0&&Object.prototype.propertyIsEnumerable.call(tr,nr[ir])&&(rr[nr[ir]]=tr[nr[ir]]);return rr}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(tr,...er){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${tr}`,...er)}function _logError(tr,...er){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${tr}`,...er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(tr,...er){throw createErrorInternal(tr,...er)}function _createError(tr,...er){return createErrorInternal(tr,...er)}function _errorWithCustomMessage(tr,er,rr){const nr=Object.assign(Object.assign({},prodErrorMap()),{[er]:rr});return new ErrorFactory("auth","Firebase",nr).create(er,{appName:tr.name})}function _serverAppCurrentUserOperationNotSupportedError(tr){return _errorWithCustomMessage(tr,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(tr,...er){if(typeof tr!="string"){const rr=er[0],nr=[...er.slice(1)];return nr[0]&&(nr[0].appName=tr.name),tr._errorFactory.create(rr,...nr)}return _DEFAULT_AUTH_ERROR_FACTORY.create(tr,...er)}function _assert(tr,er,...rr){if(!tr)throw createErrorInternal(er,...rr)}function debugFail(tr){const er="INTERNAL ASSERTION FAILED: "+tr;throw _logError(er),new Error(er)}function debugAssert(tr,er){tr||debugFail(er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var tr;return typeof self<"u"&&((tr=self.location)===null||tr===void 0?void 0:tr.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var tr;return typeof self<"u"&&((tr=self.location)===null||tr===void 0?void 0:tr.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const tr=navigator;return tr.languages&&tr.languages[0]||tr.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(er,rr){this.shortDelay=er,this.longDelay=rr,debugAssert(rr>er,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(tr,er){debugAssert(tr.emulator,"Emulator should always be set here");const{url:rr}=tr.emulator;return er?`${rr}${er.startsWith("/")?er.slice(1):er}`:rr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(er,rr,nr){this.fetchImpl=er,rr&&(this.headersImpl=rr),nr&&(this.responseImpl=nr)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(tr,er){return tr.tenantId&&!er.tenantId?Object.assign(Object.assign({},er),{tenantId:tr.tenantId}):er}async function _performApiRequest(tr,er,rr,nr,ir={}){return _performFetchWithErrorHandling(tr,ir,async()=>{let sr={},ar={};nr&&(er==="GET"?ar=nr:sr={body:JSON.stringify(nr)});const cr=querystring(Object.assign({key:tr.config.apiKey},ar)).slice(1),lr=await tr._getAdditionalHeaders();lr["Content-Type"]="application/json",tr.languageCode&&(lr["X-Firebase-Locale"]=tr.languageCode);const or=Object.assign({method:er,headers:lr},sr);return isCloudflareWorker()||(or.referrerPolicy="no-referrer"),FetchProvider.fetch()(_getFinalTarget(tr,tr.config.apiHost,rr,cr),or)})}async function _performFetchWithErrorHandling(tr,er,rr){tr._canInitEmulator=!1;const nr=Object.assign(Object.assign({},SERVER_ERROR_MAP),er);try{const ir=new NetworkTimeout(tr),sr=await Promise.race([rr(),ir.promise]);ir.clearNetworkTimeout();const ar=await sr.json();if("needConfirmation"in ar)throw _makeTaggedError(tr,"account-exists-with-different-credential",ar);if(sr.ok&&!("errorMessage"in ar))return ar;{const cr=sr.ok?ar.errorMessage:ar.error.message,[lr,or]=cr.split(" : ");if(lr==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(tr,"credential-already-in-use",ar);if(lr==="EMAIL_EXISTS")throw _makeTaggedError(tr,"email-already-in-use",ar);if(lr==="USER_DISABLED")throw _makeTaggedError(tr,"user-disabled",ar);const ur=nr[lr]||lr.toLowerCase().replace(/[_\s]+/g,"-");if(or)throw _errorWithCustomMessage(tr,ur,or);_fail(tr,ur)}}catch(ir){if(ir instanceof FirebaseError)throw ir;_fail(tr,"network-request-failed",{message:String(ir)})}}async function _performSignInRequest(tr,er,rr,nr,ir={}){const sr=await _performApiRequest(tr,er,rr,nr,ir);return"mfaPendingCredential"in sr&&_fail(tr,"multi-factor-auth-required",{_serverResponse:sr}),sr}function _getFinalTarget(tr,er,rr,nr){const ir=`${er}${rr}?${nr}`;return tr.config.emulator?_emulatorUrl(tr.config,ir):`${tr.config.apiScheme}://${ir}`}function _parseEnforcementState(tr){switch(tr){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{constructor(er){this.auth=er,this.timer=null,this.promise=new Promise((rr,nr)=>{this.timer=setTimeout(()=>nr(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(tr,er,rr){const nr={appName:tr.name};rr.email&&(nr.email=rr.email),rr.phoneNumber&&(nr.phoneNumber=rr.phoneNumber);const ir=_createError(tr,er,nr);return ir.customData._tokenResponse=rr,ir}function isEnterprise(tr){return tr!==void 0&&tr.enterprise!==void 0}class RecaptchaConfig{constructor(er){if(this.siteKey="",this.recaptchaEnforcementState=[],er.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=er.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=er.recaptchaEnforcementState}getProviderEnforcementState(er){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const rr of this.recaptchaEnforcementState)if(rr.provider&&rr.provider===er)return _parseEnforcementState(rr.enforcementState);return null}isProviderEnabled(er){return this.getProviderEnforcementState(er)==="ENFORCE"||this.getProviderEnforcementState(er)==="AUDIT"}}async function getRecaptchaConfig(tr,er){return _performApiRequest(tr,"GET","/v2/recaptchaConfig",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(tr,er){return _performApiRequest(tr,"POST","/v1/accounts:delete",er)}async function getAccountInfo(tr,er){return _performApiRequest(tr,"POST","/v1/accounts:lookup",er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(tr){if(tr)try{const er=new Date(Number(tr));if(!isNaN(er.getTime()))return er.toUTCString()}catch{}}async function getIdTokenResult(tr,er=!1){const rr=getModularInstance(tr),nr=await rr.getIdToken(er),ir=_parseToken(nr);_assert(ir&&ir.exp&&ir.auth_time&&ir.iat,rr.auth,"internal-error");const sr=typeof ir.firebase=="object"?ir.firebase:void 0,ar=sr==null?void 0:sr.sign_in_provider;return{claims:ir,token:nr,authTime:utcTimestampToDateString(secondsStringToMilliseconds(ir.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(ir.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(ir.exp)),signInProvider:ar||null,signInSecondFactor:(sr==null?void 0:sr.sign_in_second_factor)||null}}function secondsStringToMilliseconds(tr){return Number(tr)*1e3}function _parseToken(tr){const[er,rr,nr]=tr.split(".");if(er===void 0||rr===void 0||nr===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const ir=base64Decode(rr);return ir?JSON.parse(ir):(_logError("Failed to decode base64 JWT payload"),null)}catch(ir){return _logError("Caught error parsing JWT payload as JSON",ir==null?void 0:ir.toString()),null}}function _tokenExpiresIn(tr){const er=_parseToken(tr);return _assert(er,"internal-error"),_assert(typeof er.exp<"u","internal-error"),_assert(typeof er.iat<"u","internal-error"),Number(er.exp)-Number(er.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(tr,er,rr=!1){if(rr)return er;try{return await er}catch(nr){throw nr instanceof FirebaseError&&isUserInvalidated(nr)&&tr.auth.currentUser===tr&&await tr.auth.signOut(),nr}}function isUserInvalidated({code:tr}){return tr==="auth/user-disabled"||tr==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(er){this.user=er,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(er){var rr;if(er){const nr=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),nr}else{this.errorBackoff=3e4;const ir=((rr=this.user.stsTokenManager.expirationTime)!==null&&rr!==void 0?rr:0)-Date.now()-3e5;return Math.max(0,ir)}}schedule(er=!1){if(!this.isRunning)return;const rr=this.getInterval(er);this.timerId=setTimeout(async()=>{await this.iteration()},rr)}async iteration(){try{await this.user.getIdToken(!0)}catch(er){(er==null?void 0:er.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(er,rr){this.createdAt=er,this.lastLoginAt=rr,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(er){this.createdAt=er.createdAt,this.lastLoginAt=er.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(tr){var er;const rr=tr.auth,nr=await tr.getIdToken(),ir=await _logoutIfInvalidated(tr,getAccountInfo(rr,{idToken:nr}));_assert(ir==null?void 0:ir.users.length,rr,"internal-error");const sr=ir.users[0];tr._notifyReloadListener(sr);const ar=!((er=sr.providerUserInfo)===null||er===void 0)&&er.length?extractProviderData(sr.providerUserInfo):[],cr=mergeProviderData(tr.providerData,ar),lr=tr.isAnonymous,or=!(tr.email&&sr.passwordHash)&&!(cr!=null&&cr.length),ur=lr?or:!1,hr={uid:sr.localId,displayName:sr.displayName||null,photoURL:sr.photoUrl||null,email:sr.email||null,emailVerified:sr.emailVerified||!1,phoneNumber:sr.phoneNumber||null,tenantId:sr.tenantId||null,providerData:cr,metadata:new UserMetadata(sr.createdAt,sr.lastLoginAt),isAnonymous:ur};Object.assign(tr,hr)}async function reload(tr){const er=getModularInstance(tr);await _reloadWithoutSaving(er),await er.auth._persistUserIfCurrent(er),er.auth._notifyListenersIfCurrent(er)}function mergeProviderData(tr,er){return[...tr.filter(nr=>!er.some(ir=>ir.providerId===nr.providerId)),...er]}function extractProviderData(tr){return tr.map(er=>{var{providerId:rr}=er,nr=__rest(er,["providerId"]);return{providerId:rr,uid:nr.rawId||"",displayName:nr.displayName||null,email:nr.email||null,phoneNumber:nr.phoneNumber||null,photoURL:nr.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(tr,er){const rr=await _performFetchWithErrorHandling(tr,{},async()=>{const nr=querystring({grant_type:"refresh_token",refresh_token:er}).slice(1),{tokenApiHost:ir,apiKey:sr}=tr.config,ar=_getFinalTarget(tr,ir,"/v1/token",`key=${sr}`),cr=await tr._getAdditionalHeaders();return cr["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(ar,{method:"POST",headers:cr,body:nr})});return{accessToken:rr.access_token,expiresIn:rr.expires_in,refreshToken:rr.refresh_token}}async function revokeToken(tr,er){return _performApiRequest(tr,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(er){_assert(er.idToken,"internal-error"),_assert(typeof er.idToken<"u","internal-error"),_assert(typeof er.refreshToken<"u","internal-error");const rr="expiresIn"in er&&typeof er.expiresIn<"u"?Number(er.expiresIn):_tokenExpiresIn(er.idToken);this.updateTokensAndExpiration(er.idToken,er.refreshToken,rr)}updateFromIdToken(er){_assert(er.length!==0,"internal-error");const rr=_tokenExpiresIn(er);this.updateTokensAndExpiration(er,null,rr)}async getToken(er,rr=!1){return!rr&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,er,"user-token-expired"),this.refreshToken?(await this.refresh(er,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(er,rr){const{accessToken:nr,refreshToken:ir,expiresIn:sr}=await requestStsToken(er,rr);this.updateTokensAndExpiration(nr,ir,Number(sr))}updateTokensAndExpiration(er,rr,nr){this.refreshToken=rr||null,this.accessToken=er||null,this.expirationTime=Date.now()+nr*1e3}static fromJSON(er,rr){const{refreshToken:nr,accessToken:ir,expirationTime:sr}=rr,ar=new StsTokenManager;return nr&&(_assert(typeof nr=="string","internal-error",{appName:er}),ar.refreshToken=nr),ir&&(_assert(typeof ir=="string","internal-error",{appName:er}),ar.accessToken=ir),sr&&(_assert(typeof sr=="number","internal-error",{appName:er}),ar.expirationTime=sr),ar}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(er){this.accessToken=er.accessToken,this.refreshToken=er.refreshToken,this.expirationTime=er.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(tr,er){_assert(typeof tr=="string"||typeof tr>"u","internal-error",{appName:er})}class UserImpl{constructor(er){var{uid:rr,auth:nr,stsTokenManager:ir}=er,sr=__rest(er,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=rr,this.auth=nr,this.stsTokenManager=ir,this.accessToken=ir.accessToken,this.displayName=sr.displayName||null,this.email=sr.email||null,this.emailVerified=sr.emailVerified||!1,this.phoneNumber=sr.phoneNumber||null,this.photoURL=sr.photoURL||null,this.isAnonymous=sr.isAnonymous||!1,this.tenantId=sr.tenantId||null,this.providerData=sr.providerData?[...sr.providerData]:[],this.metadata=new UserMetadata(sr.createdAt||void 0,sr.lastLoginAt||void 0)}async getIdToken(er){const rr=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,er));return _assert(rr,this.auth,"internal-error"),this.accessToken!==rr&&(this.accessToken=rr,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),rr}getIdTokenResult(er){return getIdTokenResult(this,er)}reload(){return reload(this)}_assign(er){this!==er&&(_assert(this.uid===er.uid,this.auth,"internal-error"),this.displayName=er.displayName,this.photoURL=er.photoURL,this.email=er.email,this.emailVerified=er.emailVerified,this.phoneNumber=er.phoneNumber,this.isAnonymous=er.isAnonymous,this.tenantId=er.tenantId,this.providerData=er.providerData.map(rr=>Object.assign({},rr)),this.metadata._copy(er.metadata),this.stsTokenManager._assign(er.stsTokenManager))}_clone(er){const rr=new UserImpl(Object.assign(Object.assign({},this),{auth:er,stsTokenManager:this.stsTokenManager._clone()}));return rr.metadata._copy(this.metadata),rr}_onReload(er){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=er,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(er){this.reloadListener?this.reloadListener(er):this.reloadUserInfo=er}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(er,rr=!1){let nr=!1;er.idToken&&er.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(er),nr=!0),rr&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),nr&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const er=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:er})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(er=>Object.assign({},er)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(er,rr){var nr,ir,sr,ar,cr,lr,or,ur;const hr=(nr=rr.displayName)!==null&&nr!==void 0?nr:void 0,dr=(ir=rr.email)!==null&&ir!==void 0?ir:void 0,fr=(sr=rr.phoneNumber)!==null&&sr!==void 0?sr:void 0,gr=(ar=rr.photoURL)!==null&&ar!==void 0?ar:void 0,br=(cr=rr.tenantId)!==null&&cr!==void 0?cr:void 0,pr=(lr=rr._redirectEventId)!==null&&lr!==void 0?lr:void 0,mr=(or=rr.createdAt)!==null&&or!==void 0?or:void 0,yr=(ur=rr.lastLoginAt)!==null&&ur!==void 0?ur:void 0,{uid:xr,emailVerified:vr,isAnonymous:_r,providerData:Er,stsTokenManager:Tr}=rr;_assert(xr&&Tr,er,"internal-error");const Rr=StsTokenManager.fromJSON(this.name,Tr);_assert(typeof xr=="string",er,"internal-error"),assertStringOrUndefined(hr,er.name),assertStringOrUndefined(dr,er.name),_assert(typeof vr=="boolean",er,"internal-error"),_assert(typeof _r=="boolean",er,"internal-error"),assertStringOrUndefined(fr,er.name),assertStringOrUndefined(gr,er.name),assertStringOrUndefined(br,er.name),assertStringOrUndefined(pr,er.name),assertStringOrUndefined(mr,er.name),assertStringOrUndefined(yr,er.name);const Nr=new UserImpl({uid:xr,auth:er,email:dr,emailVerified:vr,displayName:hr,isAnonymous:_r,photoURL:gr,phoneNumber:fr,tenantId:br,stsTokenManager:Rr,createdAt:mr,lastLoginAt:yr});return Er&&Array.isArray(Er)&&(Nr.providerData=Er.map(Dr=>Object.assign({},Dr))),pr&&(Nr._redirectEventId=pr),Nr}static async _fromIdTokenResponse(er,rr,nr=!1){const ir=new StsTokenManager;ir.updateFromServerResponse(rr);const sr=new UserImpl({uid:rr.localId,auth:er,stsTokenManager:ir,isAnonymous:nr});return await _reloadWithoutSaving(sr),sr}static async _fromGetAccountInfoResponse(er,rr,nr){const ir=rr.users[0];_assert(ir.localId!==void 0,"internal-error");const sr=ir.providerUserInfo!==void 0?extractProviderData(ir.providerUserInfo):[],ar=!(ir.email&&ir.passwordHash)&&!(sr!=null&&sr.length),cr=new StsTokenManager;cr.updateFromIdToken(nr);const lr=new UserImpl({uid:ir.localId,auth:er,stsTokenManager:cr,isAnonymous:ar}),or={uid:ir.localId,displayName:ir.displayName||null,photoURL:ir.photoUrl||null,email:ir.email||null,emailVerified:ir.emailVerified||!1,phoneNumber:ir.phoneNumber||null,tenantId:ir.tenantId||null,providerData:sr,metadata:new UserMetadata(ir.createdAt,ir.lastLoginAt),isAnonymous:!(ir.email&&ir.passwordHash)&&!(sr!=null&&sr.length)};return Object.assign(lr,or),lr}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(tr){debugAssert(tr instanceof Function,"Expected a class definition");let er=instanceCache.get(tr);return er?(debugAssert(er instanceof tr,"Instance stored in cache mismatched with class"),er):(er=new tr,instanceCache.set(tr,er),er)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(er,rr){this.storage[er]=rr}async _get(er){const rr=this.storage[er];return rr===void 0?null:rr}async _remove(er){delete this.storage[er]}_addListener(er,rr){}_removeListener(er,rr){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(tr,er,rr){return`firebase:${tr}:${er}:${rr}`}class PersistenceUserManager{constructor(er,rr,nr){this.persistence=er,this.auth=rr,this.userKey=nr;const{config:ir,name:sr}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,ir.apiKey,sr),this.fullPersistenceKey=_persistenceKeyName("persistence",ir.apiKey,sr),this.boundEventHandler=rr._onStorageEvent.bind(rr),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(er){return this.persistence._set(this.fullUserKey,er.toJSON())}async getCurrentUser(){const er=await this.persistence._get(this.fullUserKey);return er?UserImpl._fromJSON(this.auth,er):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(er){if(this.persistence===er)return;const rr=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=er,rr)return this.setCurrentUser(rr)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(er,rr,nr="authUser"){if(!rr.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),er,nr);const ir=(await Promise.all(rr.map(async or=>{if(await or._isAvailable())return or}))).filter(or=>or);let sr=ir[0]||_getInstance(inMemoryPersistence);const ar=_persistenceKeyName(nr,er.config.apiKey,er.name);let cr=null;for(const or of rr)try{const ur=await or._get(ar);if(ur){const hr=UserImpl._fromJSON(er,ur);or!==sr&&(cr=hr),sr=or;break}}catch{}const lr=ir.filter(or=>or._shouldAllowMigration);return!sr._shouldAllowMigration||!lr.length?new PersistenceUserManager(sr,er,nr):(sr=lr[0],cr&&await sr._set(ar,cr.toJSON()),await Promise.all(rr.map(async or=>{if(or!==sr)try{await or._remove(ar)}catch{}})),new PersistenceUserManager(sr,er,nr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(tr){const er=tr.toLowerCase();if(er.includes("opera/")||er.includes("opr/")||er.includes("opios/"))return"Opera";if(_isIEMobile(er))return"IEMobile";if(er.includes("msie")||er.includes("trident/"))return"IE";if(er.includes("edge/"))return"Edge";if(_isFirefox(er))return"Firefox";if(er.includes("silk/"))return"Silk";if(_isBlackBerry(er))return"Blackberry";if(_isWebOS(er))return"Webos";if(_isSafari(er))return"Safari";if((er.includes("chrome/")||_isChromeIOS(er))&&!er.includes("edge/"))return"Chrome";if(_isAndroid(er))return"Android";{const rr=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,nr=tr.match(rr);if((nr==null?void 0:nr.length)===2)return nr[1]}return"Other"}function _isFirefox(tr=getUA()){return/firefox\//i.test(tr)}function _isSafari(tr=getUA()){const er=tr.toLowerCase();return er.includes("safari/")&&!er.includes("chrome/")&&!er.includes("crios/")&&!er.includes("android")}function _isChromeIOS(tr=getUA()){return/crios\//i.test(tr)}function _isIEMobile(tr=getUA()){return/iemobile/i.test(tr)}function _isAndroid(tr=getUA()){return/android/i.test(tr)}function _isBlackBerry(tr=getUA()){return/blackberry/i.test(tr)}function _isWebOS(tr=getUA()){return/webos/i.test(tr)}function _isIOS(tr=getUA()){return/iphone|ipad|ipod/i.test(tr)||/macintosh/i.test(tr)&&/mobile/i.test(tr)}function _isIOSStandalone(tr=getUA()){var er;return _isIOS(tr)&&!!(!((er=window.navigator)===null||er===void 0)&&er.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(tr=getUA()){return _isIOS(tr)||_isAndroid(tr)||_isWebOS(tr)||_isBlackBerry(tr)||/windows phone/i.test(tr)||_isIEMobile(tr)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(tr,er=[]){let rr;switch(tr){case"Browser":rr=_getBrowserName(getUA());break;case"Worker":rr=`${_getBrowserName(getUA())}-${tr}`;break;default:rr=tr}const nr=er.length?er.join(","):"FirebaseCore-web";return`${rr}/JsCore/${SDK_VERSION}/${nr}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(er){this.auth=er,this.queue=[]}pushCallback(er,rr){const nr=sr=>new Promise((ar,cr)=>{try{const lr=er(sr);ar(lr)}catch(lr){cr(lr)}});nr.onAbort=rr,this.queue.push(nr);const ir=this.queue.length-1;return()=>{this.queue[ir]=()=>Promise.resolve()}}async runMiddleware(er){if(this.auth.currentUser===er)return;const rr=[];try{for(const nr of this.queue)await nr(er),nr.onAbort&&rr.push(nr.onAbort)}catch(nr){rr.reverse();for(const ir of rr)try{ir()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:nr==null?void 0:nr.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(tr,er={}){return _performApiRequest(tr,"GET","/v2/passwordPolicy",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(er){var rr,nr,ir,sr;const ar=er.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(rr=ar.minPasswordLength)!==null&&rr!==void 0?rr:MINIMUM_MIN_PASSWORD_LENGTH,ar.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ar.maxPasswordLength),ar.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=ar.containsLowercaseCharacter),ar.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=ar.containsUppercaseCharacter),ar.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=ar.containsNumericCharacter),ar.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ar.containsNonAlphanumericCharacter),this.enforcementState=er.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(ir=(nr=er.allowedNonAlphanumericCharacters)===null||nr===void 0?void 0:nr.join(""))!==null&&ir!==void 0?ir:"",this.forceUpgradeOnSignin=(sr=er.forceUpgradeOnSignin)!==null&&sr!==void 0?sr:!1,this.schemaVersion=er.schemaVersion}validatePassword(er){var rr,nr,ir,sr,ar,cr;const lr={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(er,lr),this.validatePasswordCharacterOptions(er,lr),lr.isValid&&(lr.isValid=(rr=lr.meetsMinPasswordLength)!==null&&rr!==void 0?rr:!0),lr.isValid&&(lr.isValid=(nr=lr.meetsMaxPasswordLength)!==null&&nr!==void 0?nr:!0),lr.isValid&&(lr.isValid=(ir=lr.containsLowercaseLetter)!==null&&ir!==void 0?ir:!0),lr.isValid&&(lr.isValid=(sr=lr.containsUppercaseLetter)!==null&&sr!==void 0?sr:!0),lr.isValid&&(lr.isValid=(ar=lr.containsNumericCharacter)!==null&&ar!==void 0?ar:!0),lr.isValid&&(lr.isValid=(cr=lr.containsNonAlphanumericCharacter)!==null&&cr!==void 0?cr:!0),lr}validatePasswordLengthOptions(er,rr){const nr=this.customStrengthOptions.minPasswordLength,ir=this.customStrengthOptions.maxPasswordLength;nr&&(rr.meetsMinPasswordLength=er.length>=nr),ir&&(rr.meetsMaxPasswordLength=er.length<=ir)}validatePasswordCharacterOptions(er,rr){this.updatePasswordCharacterOptionsStatuses(rr,!1,!1,!1,!1);let nr;for(let ir=0;ir<er.length;ir++)nr=er.charAt(ir),this.updatePasswordCharacterOptionsStatuses(rr,nr>="a"&&nr<="z",nr>="A"&&nr<="Z",nr>="0"&&nr<="9",this.allowedNonAlphanumericCharacters.includes(nr))}updatePasswordCharacterOptionsStatuses(er,rr,nr,ir,sr){this.customStrengthOptions.containsLowercaseLetter&&(er.containsLowercaseLetter||(er.containsLowercaseLetter=rr)),this.customStrengthOptions.containsUppercaseLetter&&(er.containsUppercaseLetter||(er.containsUppercaseLetter=nr)),this.customStrengthOptions.containsNumericCharacter&&(er.containsNumericCharacter||(er.containsNumericCharacter=ir)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(er.containsNonAlphanumericCharacter||(er.containsNonAlphanumericCharacter=sr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(er,rr,nr,ir){this.app=er,this.heartbeatServiceProvider=rr,this.appCheckServiceProvider=nr,this.config=ir,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=er.name,this.clientVersion=ir.sdkClientVersion}_initializeWithPersistence(er,rr){return rr&&(this._popupRedirectResolver=_getInstance(rr)),this._initializationPromise=this.queue(async()=>{var nr,ir;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,er),!this._deleted)){if(!((nr=this._popupRedirectResolver)===null||nr===void 0)&&nr._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(rr),this.lastNotifiedUid=((ir=this.currentUser)===null||ir===void 0?void 0:ir.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const er=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!er)){if(this.currentUser&&er&&this.currentUser.uid===er.uid){this._currentUser._assign(er),await this.currentUser.getIdToken();return}await this._updateCurrentUser(er,!0)}}async initializeCurrentUserFromIdToken(er){try{const rr=await getAccountInfo(this,{idToken:er}),nr=await UserImpl._fromGetAccountInfoResponse(this,rr,er);await this.directlySetCurrentUser(nr)}catch(rr){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",rr),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(er){var rr;if(_isFirebaseServerApp(this.app)){const ar=this.app.settings.authIdToken;return ar?new Promise(cr=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(ar).then(cr,cr))}):this.directlySetCurrentUser(null)}const nr=await this.assertedPersistence.getCurrentUser();let ir=nr,sr=!1;if(er&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const ar=(rr=this.redirectUser)===null||rr===void 0?void 0:rr._redirectEventId,cr=ir==null?void 0:ir._redirectEventId,lr=await this.tryRedirectSignIn(er);(!ar||ar===cr)&&(lr!=null&&lr.user)&&(ir=lr.user,sr=!0)}if(!ir)return this.directlySetCurrentUser(null);if(!ir._redirectEventId){if(sr)try{await this.beforeStateQueue.runMiddleware(ir)}catch(ar){ir=nr,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ar))}return ir?this.reloadAndSetCurrentUserOrClear(ir):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===ir._redirectEventId?this.directlySetCurrentUser(ir):this.reloadAndSetCurrentUserOrClear(ir)}async tryRedirectSignIn(er){let rr=null;try{rr=await this._popupRedirectResolver._completeRedirectFn(this,er,!0)}catch{await this._setRedirectUser(null)}return rr}async reloadAndSetCurrentUserOrClear(er){try{await _reloadWithoutSaving(er)}catch(rr){if((rr==null?void 0:rr.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(er)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(er){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const rr=er?getModularInstance(er):null;return rr&&_assert(rr.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(rr&&rr._clone(this))}async _updateCurrentUser(er,rr=!1){if(!this._deleted)return er&&_assert(this.tenantId===er.tenantId,this,"tenant-id-mismatch"),rr||await this.beforeStateQueue.runMiddleware(er),this.queue(async()=>{await this.directlySetCurrentUser(er),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(er){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(er))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(er){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const rr=this._getPasswordPolicyInternal();return rr.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):rr.validatePassword(er)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const er=await _getPasswordPolicy(this),rr=new PasswordPolicyImpl(er);this.tenantId===null?this._projectPasswordPolicy=rr:this._tenantPasswordPolicies[this.tenantId]=rr}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(er){this._errorFactory=new ErrorFactory("auth","Firebase",er())}onAuthStateChanged(er,rr,nr){return this.registerStateListener(this.authStateSubscription,er,rr,nr)}beforeAuthStateChanged(er,rr){return this.beforeStateQueue.pushCallback(er,rr)}onIdTokenChanged(er,rr,nr){return this.registerStateListener(this.idTokenSubscription,er,rr,nr)}authStateReady(){return new Promise((er,rr)=>{if(this.currentUser)er();else{const nr=this.onAuthStateChanged(()=>{nr(),er()},rr)}})}async revokeAccessToken(er){if(this.currentUser){const rr=await this.currentUser.getIdToken(),nr={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:er,idToken:rr};this.tenantId!=null&&(nr.tenantId=this.tenantId),await revokeToken(this,nr)}}toJSON(){var er;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(er=this._currentUser)===null||er===void 0?void 0:er.toJSON()}}async _setRedirectUser(er,rr){const nr=await this.getOrInitRedirectPersistenceManager(rr);return er===null?nr.removeCurrentUser():nr.setCurrentUser(er)}async getOrInitRedirectPersistenceManager(er){if(!this.redirectPersistenceManager){const rr=er&&_getInstance(er)||this._popupRedirectResolver;_assert(rr,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(rr._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(er){var rr,nr;return this._isInitialized&&await this.queue(async()=>{}),((rr=this._currentUser)===null||rr===void 0?void 0:rr._redirectEventId)===er?this._currentUser:((nr=this.redirectUser)===null||nr===void 0?void 0:nr._redirectEventId)===er?this.redirectUser:null}async _persistUserIfCurrent(er){if(er===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(er))}_notifyListenersIfCurrent(er){er===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var er,rr;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const nr=(rr=(er=this.currentUser)===null||er===void 0?void 0:er.uid)!==null&&rr!==void 0?rr:null;this.lastNotifiedUid!==nr&&(this.lastNotifiedUid=nr,this.authStateSubscription.next(this.currentUser))}registerStateListener(er,rr,nr,ir){if(this._deleted)return()=>{};const sr=typeof rr=="function"?rr:rr.next.bind(rr);let ar=!1;const cr=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(cr,this,"internal-error"),cr.then(()=>{ar||sr(this.currentUser)}),typeof rr=="function"){const lr=er.addObserver(rr,nr,ir);return()=>{ar=!0,lr()}}else{const lr=er.addObserver(rr);return()=>{ar=!0,lr()}}}async directlySetCurrentUser(er){this.currentUser&&this.currentUser!==er&&this._currentUser._stopProactiveRefresh(),er&&this.isProactiveRefreshEnabled&&er._startProactiveRefresh(),this.currentUser=er,er?await this.assertedPersistence.setCurrentUser(er):await this.assertedPersistence.removeCurrentUser()}queue(er){return this.operations=this.operations.then(er,er),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(er){!er||this.frameworks.includes(er)||(this.frameworks.push(er),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var er;const rr={"X-Client-Version":this.clientVersion};this.app.options.appId&&(rr["X-Firebase-gmpid"]=this.app.options.appId);const nr=await((er=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||er===void 0?void 0:er.getHeartbeatsHeader());nr&&(rr["X-Firebase-Client"]=nr);const ir=await this._getAppCheckToken();return ir&&(rr["X-Firebase-AppCheck"]=ir),rr}async _getAppCheckToken(){var er;const rr=await((er=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||er===void 0?void 0:er.getToken());return rr!=null&&rr.error&&_logWarn(`Error while retrieving App Check token: ${rr.error}`),rr==null?void 0:rr.token}}function _castAuth(tr){return getModularInstance(tr)}class Subscription{constructor(er){this.auth=er,this.observer=null,this.addObserver=createSubscribe(rr=>this.observer=rr)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(tr){externalJSProvider=tr}function _loadJS(tr){return externalJSProvider.loadJS(tr)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(tr){return`__${tr}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(er){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(er)}async verify(er="verify",rr=!1){async function nr(sr){if(!rr){if(sr.tenantId==null&&sr._agentRecaptchaConfig!=null)return sr._agentRecaptchaConfig.siteKey;if(sr.tenantId!=null&&sr._tenantRecaptchaConfigs[sr.tenantId]!==void 0)return sr._tenantRecaptchaConfigs[sr.tenantId].siteKey}return new Promise(async(ar,cr)=>{getRecaptchaConfig(sr,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(lr=>{if(lr.recaptchaKey===void 0)cr(new Error("recaptcha Enterprise site key undefined"));else{const or=new RecaptchaConfig(lr);return sr.tenantId==null?sr._agentRecaptchaConfig=or:sr._tenantRecaptchaConfigs[sr.tenantId]=or,ar(or.siteKey)}}).catch(lr=>{cr(lr)})})}function ir(sr,ar,cr){const lr=window.grecaptcha;isEnterprise(lr)?lr.enterprise.ready(()=>{lr.enterprise.execute(sr,{action:er}).then(or=>{ar(or)}).catch(()=>{ar(FAKE_TOKEN)})}):cr(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((sr,ar)=>{nr(this.auth).then(cr=>{if(!rr&&isEnterprise(window.grecaptcha))ir(cr,sr,ar);else{if(typeof window>"u"){ar(new Error("RecaptchaVerifier is only supported in browser"));return}let lr=_recaptchaEnterpriseScriptUrl();lr.length!==0&&(lr+=cr),_loadJS(lr).then(()=>{ir(cr,sr,ar)}).catch(or=>{ar(or)})}}).catch(cr=>{ar(cr)})})}}async function injectRecaptchaFields(tr,er,rr,nr=!1){const ir=new RecaptchaEnterpriseVerifier(tr);let sr;try{sr=await ir.verify(rr)}catch{sr=await ir.verify(rr,!0)}const ar=Object.assign({},er);return nr?Object.assign(ar,{captchaResp:sr}):Object.assign(ar,{captchaResponse:sr}),Object.assign(ar,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ar,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ar}async function handleRecaptchaFlow(tr,er,rr,nr){var ir;if(!((ir=tr._getRecaptchaConfig())===null||ir===void 0)&&ir.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const sr=await injectRecaptchaFields(tr,er,rr,rr==="getOobCode");return nr(tr,sr)}else return nr(tr,er).catch(async sr=>{if(sr.code==="auth/missing-recaptcha-token"){console.log(`${rr} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ar=await injectRecaptchaFields(tr,er,rr,rr==="getOobCode");return nr(tr,ar)}else return Promise.reject(sr)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(tr,er){const rr=_getProvider(tr,"auth");if(rr.isInitialized()){const ir=rr.getImmediate(),sr=rr.getOptions();if(deepEqual$1(sr,er??{}))return ir;_fail(ir,"already-initialized")}return rr.initialize({options:er})}function _initializeAuthInstance(tr,er){const rr=(er==null?void 0:er.persistence)||[],nr=(Array.isArray(rr)?rr:[rr]).map(_getInstance);er!=null&&er.errorMap&&tr._updateErrorMap(er.errorMap),tr._initializeWithPersistence(nr,er==null?void 0:er.popupRedirectResolver)}function connectAuthEmulator(tr,er,rr){const nr=_castAuth(tr);_assert(nr._canInitEmulator,nr,"emulator-config-failed"),_assert(/^https?:\/\//.test(er),nr,"invalid-emulator-scheme");const ir=!1,sr=extractProtocol(er),{host:ar,port:cr}=extractHostAndPort(er),lr=cr===null?"":`:${cr}`;nr.config.emulator={url:`${sr}//${ar}${lr}/`},nr.settings.appVerificationDisabledForTesting=!0,nr.emulatorConfig=Object.freeze({host:ar,port:cr,protocol:sr.replace(":",""),options:Object.freeze({disableWarnings:ir})}),emitEmulatorWarning()}function extractProtocol(tr){const er=tr.indexOf(":");return er<0?"":tr.substr(0,er+1)}function extractHostAndPort(tr){const er=extractProtocol(tr),rr=/(\/\/)?([^?#/]+)/.exec(tr.substr(er.length));if(!rr)return{host:"",port:null};const nr=rr[2].split("@").pop()||"",ir=/^(\[[^\]]+\])(:|$)/.exec(nr);if(ir){const sr=ir[1];return{host:sr,port:parsePort(nr.substr(sr.length+1))}}else{const[sr,ar]=nr.split(":");return{host:sr,port:parsePort(ar)}}}function parsePort(tr){if(!tr)return null;const er=Number(tr);return isNaN(er)?null:er}function emitEmulatorWarning(){function tr(){const er=document.createElement("p"),rr=er.style;er.innerText="Running in emulator mode. Do not use with production credentials.",rr.position="fixed",rr.width="100%",rr.backgroundColor="#ffffff",rr.border=".1em solid #000000",rr.color="#b50000",rr.bottom="0px",rr.left="0px",rr.margin="0px",rr.zIndex="10000",rr.textAlign="center",er.classList.add("firebase-emulator-warning"),document.body.appendChild(er)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",tr):tr())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(er,rr){this.providerId=er,this.signInMethod=rr}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(er){return debugFail("not implemented")}_linkToIdToken(er,rr){return debugFail("not implemented")}_getReauthenticationResolver(er){return debugFail("not implemented")}}async function linkEmailPassword(tr,er){return _performApiRequest(tr,"POST","/v1/accounts:signUp",er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(tr,er){return _performSignInRequest(tr,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(tr,er){return _performSignInRequest(tr,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(tr,er))}async function signInWithEmailLinkForLinking(tr,er){return _performSignInRequest(tr,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(er,rr,nr,ir=null){super("password",nr),this._email=er,this._password=rr,this._tenantId=ir}static _fromEmailAndPassword(er,rr){return new EmailAuthCredential(er,rr,"password")}static _fromEmailAndCode(er,rr,nr=null){return new EmailAuthCredential(er,rr,"emailLink",nr)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(er){const rr=typeof er=="string"?JSON.parse(er):er;if(rr!=null&&rr.email&&(rr!=null&&rr.password)){if(rr.signInMethod==="password")return this._fromEmailAndPassword(rr.email,rr.password);if(rr.signInMethod==="emailLink")return this._fromEmailAndCode(rr.email,rr.password,rr.tenantId)}return null}async _getIdTokenResponse(er){switch(this.signInMethod){case"password":const rr={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(er,rr,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(er,{email:this._email,oobCode:this._password});default:_fail(er,"internal-error")}}async _linkToIdToken(er,rr){switch(this.signInMethod){case"password":const nr={idToken:rr,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(er,nr,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(er,{idToken:rr,email:this._email,oobCode:this._password});default:_fail(er,"internal-error")}}_getReauthenticationResolver(er){return this._getIdTokenResponse(er)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(tr,er){return _performSignInRequest(tr,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(tr,er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(er){const rr=new OAuthCredential(er.providerId,er.signInMethod);return er.idToken||er.accessToken?(er.idToken&&(rr.idToken=er.idToken),er.accessToken&&(rr.accessToken=er.accessToken),er.nonce&&!er.pendingToken&&(rr.nonce=er.nonce),er.pendingToken&&(rr.pendingToken=er.pendingToken)):er.oauthToken&&er.oauthTokenSecret?(rr.accessToken=er.oauthToken,rr.secret=er.oauthTokenSecret):_fail("argument-error"),rr}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(er){const rr=typeof er=="string"?JSON.parse(er):er,{providerId:nr,signInMethod:ir}=rr,sr=__rest(rr,["providerId","signInMethod"]);if(!nr||!ir)return null;const ar=new OAuthCredential(nr,ir);return ar.idToken=sr.idToken||void 0,ar.accessToken=sr.accessToken||void 0,ar.secret=sr.secret,ar.nonce=sr.nonce,ar.pendingToken=sr.pendingToken||null,ar}_getIdTokenResponse(er){const rr=this.buildRequest();return signInWithIdp(er,rr)}_linkToIdToken(er,rr){const nr=this.buildRequest();return nr.idToken=rr,signInWithIdp(er,nr)}_getReauthenticationResolver(er){const rr=this.buildRequest();return rr.autoCreate=!1,signInWithIdp(er,rr)}buildRequest(){const er={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)er.pendingToken=this.pendingToken;else{const rr={};this.idToken&&(rr.id_token=this.idToken),this.accessToken&&(rr.access_token=this.accessToken),this.secret&&(rr.oauth_token_secret=this.secret),rr.providerId=this.providerId,this.nonce&&!this.pendingToken&&(rr.nonce=this.nonce),er.postBody=querystring(rr)}return er}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(tr){switch(tr){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(tr){const er=querystringDecode(extractQuerystring(tr)).link,rr=er?querystringDecode(extractQuerystring(er)).deep_link_id:null,nr=querystringDecode(extractQuerystring(tr)).deep_link_id;return(nr?querystringDecode(extractQuerystring(nr)).link:null)||nr||rr||er||tr}class ActionCodeURL{constructor(er){var rr,nr,ir,sr,ar,cr;const lr=querystringDecode(extractQuerystring(er)),or=(rr=lr.apiKey)!==null&&rr!==void 0?rr:null,ur=(nr=lr.oobCode)!==null&&nr!==void 0?nr:null,hr=parseMode((ir=lr.mode)!==null&&ir!==void 0?ir:null);_assert(or&&ur&&hr,"argument-error"),this.apiKey=or,this.operation=hr,this.code=ur,this.continueUrl=(sr=lr.continueUrl)!==null&&sr!==void 0?sr:null,this.languageCode=(ar=lr.languageCode)!==null&&ar!==void 0?ar:null,this.tenantId=(cr=lr.tenantId)!==null&&cr!==void 0?cr:null}static parseLink(er){const rr=parseDeepLink(er);try{return new ActionCodeURL(rr)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(er,rr){return EmailAuthCredential._fromEmailAndPassword(er,rr)}static credentialWithLink(er,rr){const nr=ActionCodeURL.parseLink(rr);return _assert(nr,"argument-error"),EmailAuthCredential._fromEmailAndCode(er,nr.code,nr.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(er){this.providerId=er,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(er){this.defaultLanguageCode=er}setCustomParameters(er){return this.customParameters=er,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(er){return this.scopes.includes(er)||this.scopes.push(er),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(er){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:er})}static credentialFromResult(er){return FacebookAuthProvider.credentialFromTaggedObject(er)}static credentialFromError(er){return FacebookAuthProvider.credentialFromTaggedObject(er.customData||{})}static credentialFromTaggedObject({_tokenResponse:er}){if(!er||!("oauthAccessToken"in er)||!er.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(er.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(er,rr){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:er,accessToken:rr})}static credentialFromResult(er){return GoogleAuthProvider.credentialFromTaggedObject(er)}static credentialFromError(er){return GoogleAuthProvider.credentialFromTaggedObject(er.customData||{})}static credentialFromTaggedObject({_tokenResponse:er}){if(!er)return null;const{oauthIdToken:rr,oauthAccessToken:nr}=er;if(!rr&&!nr)return null;try{return GoogleAuthProvider.credential(rr,nr)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(er){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:er})}static credentialFromResult(er){return GithubAuthProvider.credentialFromTaggedObject(er)}static credentialFromError(er){return GithubAuthProvider.credentialFromTaggedObject(er.customData||{})}static credentialFromTaggedObject({_tokenResponse:er}){if(!er||!("oauthAccessToken"in er)||!er.oauthAccessToken)return null;try{return GithubAuthProvider.credential(er.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(er,rr){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:er,oauthTokenSecret:rr})}static credentialFromResult(er){return TwitterAuthProvider.credentialFromTaggedObject(er)}static credentialFromError(er){return TwitterAuthProvider.credentialFromTaggedObject(er.customData||{})}static credentialFromTaggedObject({_tokenResponse:er}){if(!er)return null;const{oauthAccessToken:rr,oauthTokenSecret:nr}=er;if(!rr||!nr)return null;try{return TwitterAuthProvider.credential(rr,nr)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(er){this.user=er.user,this.providerId=er.providerId,this._tokenResponse=er._tokenResponse,this.operationType=er.operationType}static async _fromIdTokenResponse(er,rr,nr,ir=!1){const sr=await UserImpl._fromIdTokenResponse(er,nr,ir),ar=providerIdForResponse(nr);return new UserCredentialImpl({user:sr,providerId:ar,_tokenResponse:nr,operationType:rr})}static async _forOperation(er,rr,nr){await er._updateTokensIfNecessary(nr,!0);const ir=providerIdForResponse(nr);return new UserCredentialImpl({user:er,providerId:ir,_tokenResponse:nr,operationType:rr})}}function providerIdForResponse(tr){return tr.providerId?tr.providerId:"phoneNumber"in tr?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(er,rr,nr,ir){var sr;super(rr.code,rr.message),this.operationType=nr,this.user=ir,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:er.name,tenantId:(sr=er.tenantId)!==null&&sr!==void 0?sr:void 0,_serverResponse:rr.customData._serverResponse,operationType:nr}}static _fromErrorAndOperation(er,rr,nr,ir){return new MultiFactorError(er,rr,nr,ir)}}function _processCredentialSavingMfaContextIfNecessary(tr,er,rr,nr){return(er==="reauthenticate"?rr._getReauthenticationResolver(tr):rr._getIdTokenResponse(tr)).catch(sr=>{throw sr.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(tr,sr,er,nr):sr})}async function _link$1(tr,er,rr=!1){const nr=await _logoutIfInvalidated(tr,er._linkToIdToken(tr.auth,await tr.getIdToken()),rr);return UserCredentialImpl._forOperation(tr,"link",nr)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(tr,er,rr=!1){const{auth:nr}=tr;if(_isFirebaseServerApp(nr.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(nr));const ir="reauthenticate";try{const sr=await _logoutIfInvalidated(tr,_processCredentialSavingMfaContextIfNecessary(nr,ir,er,tr),rr);_assert(sr.idToken,nr,"internal-error");const ar=_parseToken(sr.idToken);_assert(ar,nr,"internal-error");const{sub:cr}=ar;return _assert(tr.uid===cr,nr,"user-mismatch"),UserCredentialImpl._forOperation(tr,ir,sr)}catch(sr){throw(sr==null?void 0:sr.code)==="auth/user-not-found"&&_fail(nr,"user-mismatch"),sr}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(tr,er,rr=!1){if(_isFirebaseServerApp(tr.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(tr));const nr="signIn",ir=await _processCredentialSavingMfaContextIfNecessary(tr,nr,er),sr=await UserCredentialImpl._fromIdTokenResponse(tr,nr,ir);return rr||await tr._updateCurrentUser(sr.user),sr}async function signInWithCredential(tr,er){return _signInWithCredential(_castAuth(tr),er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(tr){const er=_castAuth(tr);er._getPasswordPolicyInternal()&&await er._updatePasswordPolicy()}function signInWithEmailAndPassword(tr,er,rr){return _isFirebaseServerApp(tr.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(tr)):signInWithCredential(getModularInstance(tr),EmailAuthProvider.credential(er,rr)).catch(async nr=>{throw nr.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(tr),nr})}function onIdTokenChanged(tr,er,rr,nr){return getModularInstance(tr).onIdTokenChanged(er,rr,nr)}function beforeAuthStateChanged(tr,er,rr){return getModularInstance(tr).beforeAuthStateChanged(er,rr)}function onAuthStateChanged(tr,er,rr,nr){return getModularInstance(tr).onAuthStateChanged(er,rr,nr)}function signOut(tr){return getModularInstance(tr).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(er,rr){this.storageRetriever=er,this.type=rr}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(er,rr){return this.storage.setItem(er,JSON.stringify(rr)),Promise.resolve()}_get(er){const rr=this.storage.getItem(er);return Promise.resolve(rr?JSON.parse(rr):null)}_remove(er){return this.storage.removeItem(er),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(er,rr)=>this.onStorageEvent(er,rr),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(er){for(const rr of Object.keys(this.listeners)){const nr=this.storage.getItem(rr),ir=this.localCache[rr];nr!==ir&&er(rr,ir,nr)}}onStorageEvent(er,rr=!1){if(!er.key){this.forAllChangedKeys((ar,cr,lr)=>{this.notifyListeners(ar,lr)});return}const nr=er.key;rr?this.detachListener():this.stopPolling();const ir=()=>{const ar=this.storage.getItem(nr);!rr&&this.localCache[nr]===ar||this.notifyListeners(nr,ar)},sr=this.storage.getItem(nr);_isIE10()&&sr!==er.newValue&&er.newValue!==er.oldValue?setTimeout(ir,IE10_LOCAL_STORAGE_SYNC_DELAY):ir()}notifyListeners(er,rr){this.localCache[er]=rr;const nr=this.listeners[er];if(nr)for(const ir of Array.from(nr))ir(rr&&JSON.parse(rr))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((er,rr,nr)=>{this.onStorageEvent(new StorageEvent("storage",{key:er,oldValue:rr,newValue:nr}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(er,rr){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[er]||(this.listeners[er]=new Set,this.localCache[er]=this.storage.getItem(er)),this.listeners[er].add(rr)}_removeListener(er,rr){this.listeners[er]&&(this.listeners[er].delete(rr),this.listeners[er].size===0&&delete this.listeners[er]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(er,rr){await super._set(er,rr),this.localCache[er]=JSON.stringify(rr)}async _get(er){const rr=await super._get(er);return this.localCache[er]=JSON.stringify(rr),rr}async _remove(er){await super._remove(er),delete this.localCache[er]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(er,rr){}_removeListener(er,rr){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(tr){return Promise.all(tr.map(async er=>{try{return{fulfilled:!0,value:await er}}catch(rr){return{fulfilled:!1,reason:rr}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(er){this.eventTarget=er,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(er){const rr=this.receivers.find(ir=>ir.isListeningto(er));if(rr)return rr;const nr=new Receiver(er);return this.receivers.push(nr),nr}isListeningto(er){return this.eventTarget===er}async handleEvent(er){const rr=er,{eventId:nr,eventType:ir,data:sr}=rr.data,ar=this.handlersMap[ir];if(!(ar!=null&&ar.size))return;rr.ports[0].postMessage({status:"ack",eventId:nr,eventType:ir});const cr=Array.from(ar).map(async or=>or(rr.origin,sr)),lr=await _allSettled(cr);rr.ports[0].postMessage({status:"done",eventId:nr,eventType:ir,response:lr})}_subscribe(er,rr){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[er]||(this.handlersMap[er]=new Set),this.handlersMap[er].add(rr)}_unsubscribe(er,rr){this.handlersMap[er]&&rr&&this.handlersMap[er].delete(rr),(!rr||this.handlersMap[er].size===0)&&delete this.handlersMap[er],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(tr="",er=10){let rr="";for(let nr=0;nr<er;nr++)rr+=Math.floor(Math.random()*10);return tr+rr}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(er){this.target=er,this.handlers=new Set}removeMessageHandler(er){er.messageChannel&&(er.messageChannel.port1.removeEventListener("message",er.onMessage),er.messageChannel.port1.close()),this.handlers.delete(er)}async _send(er,rr,nr=50){const ir=typeof MessageChannel<"u"?new MessageChannel:null;if(!ir)throw new Error("connection_unavailable");let sr,ar;return new Promise((cr,lr)=>{const or=_generateEventId("",20);ir.port1.start();const ur=setTimeout(()=>{lr(new Error("unsupported_event"))},nr);ar={messageChannel:ir,onMessage(hr){const dr=hr;if(dr.data.eventId===or)switch(dr.data.status){case"ack":clearTimeout(ur),sr=setTimeout(()=>{lr(new Error("timeout"))},3e3);break;case"done":clearTimeout(sr),cr(dr.data.response);break;default:clearTimeout(ur),clearTimeout(sr),lr(new Error("invalid_response"));break}}},this.handlers.add(ar),ir.port1.addEventListener("message",ar.onMessage),this.target.postMessage({eventType:er,eventId:or,data:rr},[ir.port2])}).finally(()=>{ar&&this.removeMessageHandler(ar)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(tr){_window().location.href=tr}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var tr;return((tr=navigator==null?void 0:navigator.serviceWorker)===null||tr===void 0?void 0:tr.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(er){this.request=er}toPromise(){return new Promise((er,rr)=>{this.request.addEventListener("success",()=>{er(this.request.result)}),this.request.addEventListener("error",()=>{rr(this.request.error)})})}}function getObjectStore(tr,er){return tr.transaction([DB_OBJECTSTORE_NAME],er?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const tr=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(tr).toPromise()}function _openDatabase(){const tr=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((er,rr)=>{tr.addEventListener("error",()=>{rr(tr.error)}),tr.addEventListener("upgradeneeded",()=>{const nr=tr.result;try{nr.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(ir){rr(ir)}}),tr.addEventListener("success",async()=>{const nr=tr.result;nr.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?er(nr):(nr.close(),await _deleteDatabase(),er(await _openDatabase()))})})}async function _putObject(tr,er,rr){const nr=getObjectStore(tr,!0).put({[DB_DATA_KEYPATH]:er,value:rr});return new DBPromise(nr).toPromise()}async function getObject(tr,er){const rr=getObjectStore(tr,!1).get(er),nr=await new DBPromise(rr).toPromise();return nr===void 0?null:nr.value}function _deleteObject(tr,er){const rr=getObjectStore(tr,!0).delete(er);return new DBPromise(rr).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(er){let rr=0;for(;;)try{const nr=await this._openDb();return await er(nr)}catch(nr){if(rr++>_TRANSACTION_RETRY_COUNT)throw nr;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(er,rr)=>({keyProcessed:(await this._poll()).includes(rr.key)})),this.receiver._subscribe("ping",async(er,rr)=>["keyChanged"])}async initializeSender(){var er,rr;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const nr=await this.sender._send("ping",{},800);nr&&!((er=nr[0])===null||er===void 0)&&er.fulfilled&&!((rr=nr[0])===null||rr===void 0)&&rr.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(er){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:er},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const er=await _openDatabase();return await _putObject(er,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(er,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(er){this.pendingWrites++;try{await er()}finally{this.pendingWrites--}}async _set(er,rr){return this._withPendingWrite(async()=>(await this._withRetries(nr=>_putObject(nr,er,rr)),this.localCache[er]=rr,this.notifyServiceWorker(er)))}async _get(er){const rr=await this._withRetries(nr=>getObject(nr,er));return this.localCache[er]=rr,rr}async _remove(er){return this._withPendingWrite(async()=>(await this._withRetries(rr=>_deleteObject(rr,er)),delete this.localCache[er],this.notifyServiceWorker(er)))}async _poll(){const er=await this._withRetries(ir=>{const sr=getObjectStore(ir,!1).getAll();return new DBPromise(sr).toPromise()});if(!er)return[];if(this.pendingWrites!==0)return[];const rr=[],nr=new Set;if(er.length!==0)for(const{fbase_key:ir,value:sr}of er)nr.add(ir),JSON.stringify(this.localCache[ir])!==JSON.stringify(sr)&&(this.notifyListeners(ir,sr),rr.push(ir));for(const ir of Object.keys(this.localCache))this.localCache[ir]&&!nr.has(ir)&&(this.notifyListeners(ir,null),rr.push(ir));return rr}notifyListeners(er,rr){this.localCache[er]=rr;const nr=this.listeners[er];if(nr)for(const ir of Array.from(nr))ir(rr)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(er,rr){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[er]||(this.listeners[er]=new Set,this._get(er)),this.listeners[er].add(rr)}_removeListener(er,rr){this.listeners[er]&&(this.listeners[er].delete(rr),this.listeners[er].size===0&&delete this.listeners[er]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(tr,er){return er?_getInstance(er):(_assert(tr._popupRedirectResolver,tr,"argument-error"),tr._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(er){super("custom","custom"),this.params=er}_getIdTokenResponse(er){return signInWithIdp(er,this._buildIdpRequest())}_linkToIdToken(er,rr){return signInWithIdp(er,this._buildIdpRequest(rr))}_getReauthenticationResolver(er){return signInWithIdp(er,this._buildIdpRequest())}_buildIdpRequest(er){const rr={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return er&&(rr.idToken=er),rr}}function _signIn(tr){return _signInWithCredential(tr.auth,new IdpCredential(tr),tr.bypassAuthState)}function _reauth(tr){const{auth:er,user:rr}=tr;return _assert(rr,er,"internal-error"),_reauthenticate(rr,new IdpCredential(tr),tr.bypassAuthState)}async function _link(tr){const{auth:er,user:rr}=tr;return _assert(rr,er,"internal-error"),_link$1(rr,new IdpCredential(tr),tr.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(er,rr,nr,ir,sr=!1){this.auth=er,this.resolver=nr,this.user=ir,this.bypassAuthState=sr,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(rr)?rr:[rr]}execute(){return new Promise(async(er,rr)=>{this.pendingPromise={resolve:er,reject:rr};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nr){this.reject(nr)}})}async onAuthEvent(er){const{urlResponse:rr,sessionId:nr,postBody:ir,tenantId:sr,error:ar,type:cr}=er;if(ar){this.reject(ar);return}const lr={auth:this.auth,requestUri:rr,sessionId:nr,tenantId:sr||void 0,postBody:ir||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(cr)(lr))}catch(or){this.reject(or)}}onError(er){this.reject(er)}getIdpTask(er){switch(er){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(er){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(er),this.unregisterAndCleanUp()}reject(er){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(er),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(er,rr,nr,ir,sr){super(er,rr,ir,sr),this.provider=nr,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const er=await this.execute();return _assert(er,this.auth,"internal-error"),er}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const er=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],er),this.authWindow.associatedEvent=er,this.resolver._originValidation(this.auth).catch(rr=>{this.reject(rr)}),this.resolver._isIframeWebStorageSupported(this.auth,rr=>{rr||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var er;return((er=this.authWindow)===null||er===void 0?void 0:er.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const er=()=>{var rr,nr;if(!((nr=(rr=this.authWindow)===null||rr===void 0?void 0:rr.window)===null||nr===void 0)&&nr.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(er,_POLL_WINDOW_CLOSE_TIMEOUT.get())};er()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(er,rr,nr=!1){super(er,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],rr,void 0,nr),this.eventId=null}async execute(){let er=redirectOutcomeMap.get(this.auth._key());if(!er){try{const nr=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;er=()=>Promise.resolve(nr)}catch(rr){er=()=>Promise.reject(rr)}redirectOutcomeMap.set(this.auth._key(),er)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),er()}async onAuthEvent(er){if(er.type==="signInViaRedirect")return super.onAuthEvent(er);if(er.type==="unknown"){this.resolve(null);return}if(er.eventId){const rr=await this.auth._redirectUserForId(er.eventId);if(rr)return this.user=rr,super.onAuthEvent(er);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(tr,er){const rr=pendingRedirectKey(er),nr=resolverPersistence(tr);if(!await nr._isAvailable())return!1;const ir=await nr._get(rr)==="true";return await nr._remove(rr),ir}function _overrideRedirectResult(tr,er){redirectOutcomeMap.set(tr._key(),er)}function resolverPersistence(tr){return _getInstance(tr._redirectPersistence)}function pendingRedirectKey(tr){return _persistenceKeyName(PENDING_REDIRECT_KEY,tr.config.apiKey,tr.name)}async function _getRedirectResult(tr,er,rr=!1){if(_isFirebaseServerApp(tr.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(tr));const nr=_castAuth(tr),ir=_withDefaultResolver(nr,er),ar=await new RedirectAction(nr,ir,rr).execute();return ar&&!rr&&(delete ar.user._redirectEventId,await nr._persistUserIfCurrent(ar.user),await nr._setRedirectUser(null,er)),ar}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(er){this.auth=er,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(er){this.consumers.add(er),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,er)&&(this.sendToConsumer(this.queuedRedirectEvent,er),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(er){this.consumers.delete(er)}onEvent(er){if(this.hasEventBeenHandled(er))return!1;let rr=!1;return this.consumers.forEach(nr=>{this.isEventForConsumer(er,nr)&&(rr=!0,this.sendToConsumer(er,nr),this.saveEventToCache(er))}),this.hasHandledPotentialRedirect||!isRedirectEvent(er)||(this.hasHandledPotentialRedirect=!0,rr||(this.queuedRedirectEvent=er,rr=!0)),rr}sendToConsumer(er,rr){var nr;if(er.error&&!isNullRedirectEvent(er)){const ir=((nr=er.error.code)===null||nr===void 0?void 0:nr.split("auth/")[1])||"internal-error";rr.onError(_createError(this.auth,ir))}else rr.onAuthEvent(er)}isEventForConsumer(er,rr){const nr=rr.eventId===null||!!er.eventId&&er.eventId===rr.eventId;return rr.filter.includes(er.type)&&nr}hasEventBeenHandled(er){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(er))}saveEventToCache(er){this.cachedEventUids.add(eventUid(er)),this.lastProcessedEventTime=Date.now()}}function eventUid(tr){return[tr.type,tr.eventId,tr.sessionId,tr.tenantId].filter(er=>er).join("-")}function isNullRedirectEvent({type:tr,error:er}){return tr==="unknown"&&(er==null?void 0:er.code)==="auth/no-auth-event"}function isRedirectEvent(tr){switch(tr.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(tr);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(tr,er={}){return _performApiRequest(tr,"GET","/v1/projects",er)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(tr){if(tr.config.emulator)return;const{authorizedDomains:er}=await _getProjectConfig(tr);for(const rr of er)try{if(matchDomain(rr))return}catch{}_fail(tr,"unauthorized-domain")}function matchDomain(tr){const er=_getCurrentUrl(),{protocol:rr,hostname:nr}=new URL(er);if(tr.startsWith("chrome-extension://")){const ar=new URL(tr);return ar.hostname===""&&nr===""?rr==="chrome-extension:"&&tr.replace("chrome-extension://","")===er.replace("chrome-extension://",""):rr==="chrome-extension:"&&ar.hostname===nr}if(!HTTP_REGEX.test(rr))return!1;if(IP_ADDRESS_REGEX.test(tr))return nr===tr;const ir=tr.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ir+"|"+ir+")$","i").test(nr)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const tr=_window().___jsl;if(tr!=null&&tr.H){for(const er of Object.keys(tr.H))if(tr.H[er].r=tr.H[er].r||[],tr.H[er].L=tr.H[er].L||[],tr.H[er].r=[...tr.H[er].L],tr.CP)for(let rr=0;rr<tr.CP.length;rr++)tr.CP[rr]=null}}function loadGapi(tr){return new Promise((er,rr)=>{var nr,ir,sr;function ar(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{er(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),rr(_createError(tr,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((ir=(nr=_window().gapi)===null||nr===void 0?void 0:nr.iframes)===null||ir===void 0)&&ir.Iframe)er(gapi.iframes.getContext());else if(!((sr=_window().gapi)===null||sr===void 0)&&sr.load)ar();else{const cr=_generateCallbackName("iframefcb");return _window()[cr]=()=>{gapi.load?ar():rr(_createError(tr,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${cr}`).catch(lr=>rr(lr))}}).catch(er=>{throw cachedGApiLoader=null,er})}let cachedGApiLoader=null;function _loadGapi(tr){return cachedGApiLoader=cachedGApiLoader||loadGapi(tr),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(tr){const er=tr.config;_assert(er.authDomain,tr,"auth-domain-config-required");const rr=er.emulator?_emulatorUrl(er,EMULATED_IFRAME_PATH):`https://${tr.config.authDomain}/${IFRAME_PATH}`,nr={apiKey:er.apiKey,appName:tr.name,v:SDK_VERSION},ir=EID_FROM_APIHOST.get(tr.config.apiHost);ir&&(nr.eid=ir);const sr=tr._getFrameworks();return sr.length&&(nr.fw=sr.join(",")),`${rr}?${querystring(nr).slice(1)}`}async function _openIframe(tr){const er=await _loadGapi(tr),rr=_window().gapi;return _assert(rr,tr,"internal-error"),er.open({where:document.body,url:getIframeUrl(tr),messageHandlersFilter:rr.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},nr=>new Promise(async(ir,sr)=>{await nr.restyle({setHideOnLeave:!1});const ar=_createError(tr,"network-request-failed"),cr=_window().setTimeout(()=>{sr(ar)},PING_TIMEOUT.get());function lr(){_window().clearTimeout(cr),ir(nr)}nr.ping(lr).then(lr,()=>{sr(ar)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(er){this.window=er,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(tr,er,rr,nr=DEFAULT_WIDTH,ir=DEFAULT_HEIGHT){const sr=Math.max((window.screen.availHeight-ir)/2,0).toString(),ar=Math.max((window.screen.availWidth-nr)/2,0).toString();let cr="";const lr=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:nr.toString(),height:ir.toString(),top:sr,left:ar}),or=getUA().toLowerCase();rr&&(cr=_isChromeIOS(or)?TARGET_BLANK:rr),_isFirefox(or)&&(er=er||FIREFOX_EMPTY_URL,lr.scrollbars="yes");const ur=Object.entries(lr).reduce((dr,[fr,gr])=>`${dr}${fr}=${gr},`,"");if(_isIOSStandalone(or)&&cr!=="_self")return openAsNewWindowIOS(er||"",cr),new AuthPopup(null);const hr=window.open(er||"",cr,ur);_assert(hr,tr,"popup-blocked");try{hr.focus()}catch{}return new AuthPopup(hr)}function openAsNewWindowIOS(tr,er){const rr=document.createElement("a");rr.href=tr,rr.target=er;const nr=document.createEvent("MouseEvent");nr.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),rr.dispatchEvent(nr)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(tr,er,rr,nr,ir,sr){_assert(tr.config.authDomain,tr,"auth-domain-config-required"),_assert(tr.config.apiKey,tr,"invalid-api-key");const ar={apiKey:tr.config.apiKey,appName:tr.name,authType:rr,redirectUrl:nr,v:SDK_VERSION,eventId:ir};if(er instanceof FederatedAuthProvider){er.setDefaultLanguage(tr.languageCode),ar.providerId=er.providerId||"",isEmpty$1(er.getCustomParameters())||(ar.customParameters=JSON.stringify(er.getCustomParameters()));for(const[ur,hr]of Object.entries({}))ar[ur]=hr}if(er instanceof BaseOAuthProvider){const ur=er.getScopes().filter(hr=>hr!=="");ur.length>0&&(ar.scopes=ur.join(","))}tr.tenantId&&(ar.tid=tr.tenantId);const cr=ar;for(const ur of Object.keys(cr))cr[ur]===void 0&&delete cr[ur];const lr=await tr._getAppCheckToken(),or=lr?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(lr)}`:"";return`${getHandlerBase(tr)}?${querystring(cr).slice(1)}${or}`}function getHandlerBase({config:tr}){return tr.emulator?_emulatorUrl(tr,EMULATOR_WIDGET_PATH):`https://${tr.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(er,rr,nr,ir){var sr;debugAssert((sr=this.eventManagers[er._key()])===null||sr===void 0?void 0:sr.manager,"_initialize() not called before _openPopup()");const ar=await _getRedirectUrl(er,rr,nr,_getCurrentUrl(),ir);return _open(er,ar,_generateEventId())}async _openRedirect(er,rr,nr,ir){await this._originValidation(er);const sr=await _getRedirectUrl(er,rr,nr,_getCurrentUrl(),ir);return _setWindowLocation(sr),new Promise(()=>{})}_initialize(er){const rr=er._key();if(this.eventManagers[rr]){const{manager:ir,promise:sr}=this.eventManagers[rr];return ir?Promise.resolve(ir):(debugAssert(sr,"If manager is not set, promise should be"),sr)}const nr=this.initAndGetManager(er);return this.eventManagers[rr]={promise:nr},nr.catch(()=>{delete this.eventManagers[rr]}),nr}async initAndGetManager(er){const rr=await _openIframe(er),nr=new AuthEventManager(er);return rr.register("authEvent",ir=>(_assert(ir==null?void 0:ir.authEvent,er,"invalid-auth-event"),{status:nr.onEvent(ir.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[er._key()]={manager:nr},this.iframes[er._key()]=rr,nr}_isIframeWebStorageSupported(er,rr){this.iframes[er._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},ir=>{var sr;const ar=(sr=ir==null?void 0:ir[0])===null||sr===void 0?void 0:sr[WEB_STORAGE_SUPPORT_KEY];ar!==void 0&&rr(!!ar),_fail(er,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(er){const rr=er._key();return this.originValidationPromises[rr]||(this.originValidationPromises[rr]=_validateOrigin(er)),this.originValidationPromises[rr]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$2="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(er){this.auth=er,this.internalListeners=new Map}getUid(){var er;return this.assertAuthConfigured(),((er=this.auth.currentUser)===null||er===void 0?void 0:er.uid)||null}async getToken(er){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(er)}:null}addAuthTokenListener(er){if(this.assertAuthConfigured(),this.internalListeners.has(er))return;const rr=this.auth.onIdTokenChanged(nr=>{er((nr==null?void 0:nr.stsTokenManager.accessToken)||null)});this.internalListeners.set(er,rr),this.updateProactiveRefresh()}removeAuthTokenListener(er){this.assertAuthConfigured();const rr=this.internalListeners.get(er);rr&&(this.internalListeners.delete(er),rr(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(tr){switch(tr){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(tr){_registerComponent(new Component("auth",(er,{options:rr})=>{const nr=er.getProvider("app").getImmediate(),ir=er.getProvider("heartbeat"),sr=er.getProvider("app-check-internal"),{apiKey:ar,authDomain:cr}=nr.options;_assert(ar&&!ar.includes(":"),"invalid-api-key",{appName:nr.name});const lr={apiKey:ar,authDomain:cr,clientPlatform:tr,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(tr)},or=new AuthImpl(nr,ir,sr,lr);return _initializeAuthInstance(or,rr),or},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((er,rr,nr)=>{er.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",er=>{const rr=_castAuth(er.getProvider("auth").getImmediate());return(nr=>new AuthInterop(nr))(rr)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$2,getVersionForPlatform(tr)),registerVersion(name$2,version$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=tr=>async er=>{const rr=er&&await er.getIdTokenResult(),nr=rr&&(new Date().getTime()-Date.parse(rr.issuedAtTime))/1e3;if(nr&&nr>authIdTokenMaxAge)return;const ir=rr==null?void 0:rr.token;lastPostedIdToken!==ir&&(lastPostedIdToken=ir,await fetch(tr,{method:ir?"POST":"DELETE",headers:ir?{Authorization:`Bearer ${ir}`}:{}}))};function getAuth(tr=getApp()){const er=_getProvider(tr,"auth");if(er.isInitialized())return er.getImmediate();const rr=initializeAuth(tr,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),nr=getExperimentalSetting("authTokenSyncURL");if(nr&&typeof isSecureContext=="boolean"&&isSecureContext){const sr=new URL(nr,location.origin);if(location.origin===sr.origin){const ar=mintCookieFactory(sr.toString());beforeAuthStateChanged(rr,ar,()=>ar(rr.currentUser)),onIdTokenChanged(rr,cr=>ar(cr))}}const ir=getDefaultEmulatorHost("auth");return ir&&connectAuthEmulator(rr,`http://${ir}`),rr}function getScriptParentElement(){var tr,er;return(er=(tr=document.getElementsByTagName("head"))===null||tr===void 0?void 0:tr[0])!==null&&er!==void 0?er:document}_setExternalJSProvider({loadJS(tr){return new Promise((er,rr)=>{const nr=document.createElement("script");nr.setAttribute("src",tr),nr.onload=er,nr.onerror=ir=>{const sr=_createError("internal-error");sr.customData=ir,rr(sr)},nr.type="text/javascript",nr.charset="UTF-8",getScriptParentElement().appendChild(nr)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$1="firebase",version$1="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$1,"app");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var tr;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function er(Tr,Rr){function Nr(){}Nr.prototype=Rr.prototype,Tr.D=Rr.prototype,Tr.prototype=new Nr,Tr.prototype.constructor=Tr,Tr.C=function(Dr,Ir,Or){for(var jr=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)jr[Lr-2]=arguments[Lr];return Rr.prototype[Ir].apply(Dr,jr)}}function rr(){this.blockSize=-1}function nr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}er(nr,rr),nr.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function ir(Tr,Rr,Nr){Nr||(Nr=0);var Dr=Array(16);if(typeof Rr=="string")for(var Ir=0;16>Ir;++Ir)Dr[Ir]=Rr.charCodeAt(Nr++)|Rr.charCodeAt(Nr++)<<8|Rr.charCodeAt(Nr++)<<16|Rr.charCodeAt(Nr++)<<24;else for(Ir=0;16>Ir;++Ir)Dr[Ir]=Rr[Nr++]|Rr[Nr++]<<8|Rr[Nr++]<<16|Rr[Nr++]<<24;Rr=Tr.g[0],Nr=Tr.g[1],Ir=Tr.g[2];var Or=Tr.g[3],jr=Rr+(Or^Nr&(Ir^Or))+Dr[0]+3614090360&4294967295;Rr=Nr+(jr<<7&4294967295|jr>>>25),jr=Or+(Ir^Rr&(Nr^Ir))+Dr[1]+3905402710&4294967295,Or=Rr+(jr<<12&4294967295|jr>>>20),jr=Ir+(Nr^Or&(Rr^Nr))+Dr[2]+606105819&4294967295,Ir=Or+(jr<<17&4294967295|jr>>>15),jr=Nr+(Rr^Ir&(Or^Rr))+Dr[3]+3250441966&4294967295,Nr=Ir+(jr<<22&4294967295|jr>>>10),jr=Rr+(Or^Nr&(Ir^Or))+Dr[4]+4118548399&4294967295,Rr=Nr+(jr<<7&4294967295|jr>>>25),jr=Or+(Ir^Rr&(Nr^Ir))+Dr[5]+1200080426&4294967295,Or=Rr+(jr<<12&4294967295|jr>>>20),jr=Ir+(Nr^Or&(Rr^Nr))+Dr[6]+2821735955&4294967295,Ir=Or+(jr<<17&4294967295|jr>>>15),jr=Nr+(Rr^Ir&(Or^Rr))+Dr[7]+4249261313&4294967295,Nr=Ir+(jr<<22&4294967295|jr>>>10),jr=Rr+(Or^Nr&(Ir^Or))+Dr[8]+1770035416&4294967295,Rr=Nr+(jr<<7&4294967295|jr>>>25),jr=Or+(Ir^Rr&(Nr^Ir))+Dr[9]+2336552879&4294967295,Or=Rr+(jr<<12&4294967295|jr>>>20),jr=Ir+(Nr^Or&(Rr^Nr))+Dr[10]+4294925233&4294967295,Ir=Or+(jr<<17&4294967295|jr>>>15),jr=Nr+(Rr^Ir&(Or^Rr))+Dr[11]+2304563134&4294967295,Nr=Ir+(jr<<22&4294967295|jr>>>10),jr=Rr+(Or^Nr&(Ir^Or))+Dr[12]+1804603682&4294967295,Rr=Nr+(jr<<7&4294967295|jr>>>25),jr=Or+(Ir^Rr&(Nr^Ir))+Dr[13]+4254626195&4294967295,Or=Rr+(jr<<12&4294967295|jr>>>20),jr=Ir+(Nr^Or&(Rr^Nr))+Dr[14]+2792965006&4294967295,Ir=Or+(jr<<17&4294967295|jr>>>15),jr=Nr+(Rr^Ir&(Or^Rr))+Dr[15]+1236535329&4294967295,Nr=Ir+(jr<<22&4294967295|jr>>>10),jr=Rr+(Ir^Or&(Nr^Ir))+Dr[1]+4129170786&4294967295,Rr=Nr+(jr<<5&4294967295|jr>>>27),jr=Or+(Nr^Ir&(Rr^Nr))+Dr[6]+3225465664&4294967295,Or=Rr+(jr<<9&4294967295|jr>>>23),jr=Ir+(Rr^Nr&(Or^Rr))+Dr[11]+643717713&4294967295,Ir=Or+(jr<<14&4294967295|jr>>>18),jr=Nr+(Or^Rr&(Ir^Or))+Dr[0]+3921069994&4294967295,Nr=Ir+(jr<<20&4294967295|jr>>>12),jr=Rr+(Ir^Or&(Nr^Ir))+Dr[5]+3593408605&4294967295,Rr=Nr+(jr<<5&4294967295|jr>>>27),jr=Or+(Nr^Ir&(Rr^Nr))+Dr[10]+38016083&4294967295,Or=Rr+(jr<<9&4294967295|jr>>>23),jr=Ir+(Rr^Nr&(Or^Rr))+Dr[15]+3634488961&4294967295,Ir=Or+(jr<<14&4294967295|jr>>>18),jr=Nr+(Or^Rr&(Ir^Or))+Dr[4]+3889429448&4294967295,Nr=Ir+(jr<<20&4294967295|jr>>>12),jr=Rr+(Ir^Or&(Nr^Ir))+Dr[9]+568446438&4294967295,Rr=Nr+(jr<<5&4294967295|jr>>>27),jr=Or+(Nr^Ir&(Rr^Nr))+Dr[14]+3275163606&4294967295,Or=Rr+(jr<<9&4294967295|jr>>>23),jr=Ir+(Rr^Nr&(Or^Rr))+Dr[3]+4107603335&4294967295,Ir=Or+(jr<<14&4294967295|jr>>>18),jr=Nr+(Or^Rr&(Ir^Or))+Dr[8]+1163531501&4294967295,Nr=Ir+(jr<<20&4294967295|jr>>>12),jr=Rr+(Ir^Or&(Nr^Ir))+Dr[13]+2850285829&4294967295,Rr=Nr+(jr<<5&4294967295|jr>>>27),jr=Or+(Nr^Ir&(Rr^Nr))+Dr[2]+4243563512&4294967295,Or=Rr+(jr<<9&4294967295|jr>>>23),jr=Ir+(Rr^Nr&(Or^Rr))+Dr[7]+1735328473&4294967295,Ir=Or+(jr<<14&4294967295|jr>>>18),jr=Nr+(Or^Rr&(Ir^Or))+Dr[12]+2368359562&4294967295,Nr=Ir+(jr<<20&4294967295|jr>>>12),jr=Rr+(Nr^Ir^Or)+Dr[5]+4294588738&4294967295,Rr=Nr+(jr<<4&4294967295|jr>>>28),jr=Or+(Rr^Nr^Ir)+Dr[8]+2272392833&4294967295,Or=Rr+(jr<<11&4294967295|jr>>>21),jr=Ir+(Or^Rr^Nr)+Dr[11]+1839030562&4294967295,Ir=Or+(jr<<16&4294967295|jr>>>16),jr=Nr+(Ir^Or^Rr)+Dr[14]+4259657740&4294967295,Nr=Ir+(jr<<23&4294967295|jr>>>9),jr=Rr+(Nr^Ir^Or)+Dr[1]+2763975236&4294967295,Rr=Nr+(jr<<4&4294967295|jr>>>28),jr=Or+(Rr^Nr^Ir)+Dr[4]+1272893353&4294967295,Or=Rr+(jr<<11&4294967295|jr>>>21),jr=Ir+(Or^Rr^Nr)+Dr[7]+4139469664&4294967295,Ir=Or+(jr<<16&4294967295|jr>>>16),jr=Nr+(Ir^Or^Rr)+Dr[10]+3200236656&4294967295,Nr=Ir+(jr<<23&4294967295|jr>>>9),jr=Rr+(Nr^Ir^Or)+Dr[13]+681279174&4294967295,Rr=Nr+(jr<<4&4294967295|jr>>>28),jr=Or+(Rr^Nr^Ir)+Dr[0]+3936430074&4294967295,Or=Rr+(jr<<11&4294967295|jr>>>21),jr=Ir+(Or^Rr^Nr)+Dr[3]+3572445317&4294967295,Ir=Or+(jr<<16&4294967295|jr>>>16),jr=Nr+(Ir^Or^Rr)+Dr[6]+76029189&4294967295,Nr=Ir+(jr<<23&4294967295|jr>>>9),jr=Rr+(Nr^Ir^Or)+Dr[9]+3654602809&4294967295,Rr=Nr+(jr<<4&4294967295|jr>>>28),jr=Or+(Rr^Nr^Ir)+Dr[12]+3873151461&4294967295,Or=Rr+(jr<<11&4294967295|jr>>>21),jr=Ir+(Or^Rr^Nr)+Dr[15]+530742520&4294967295,Ir=Or+(jr<<16&4294967295|jr>>>16),jr=Nr+(Ir^Or^Rr)+Dr[2]+3299628645&4294967295,Nr=Ir+(jr<<23&4294967295|jr>>>9),jr=Rr+(Ir^(Nr|~Or))+Dr[0]+4096336452&4294967295,Rr=Nr+(jr<<6&4294967295|jr>>>26),jr=Or+(Nr^(Rr|~Ir))+Dr[7]+1126891415&4294967295,Or=Rr+(jr<<10&4294967295|jr>>>22),jr=Ir+(Rr^(Or|~Nr))+Dr[14]+2878612391&4294967295,Ir=Or+(jr<<15&4294967295|jr>>>17),jr=Nr+(Or^(Ir|~Rr))+Dr[5]+4237533241&4294967295,Nr=Ir+(jr<<21&4294967295|jr>>>11),jr=Rr+(Ir^(Nr|~Or))+Dr[12]+1700485571&4294967295,Rr=Nr+(jr<<6&4294967295|jr>>>26),jr=Or+(Nr^(Rr|~Ir))+Dr[3]+2399980690&4294967295,Or=Rr+(jr<<10&4294967295|jr>>>22),jr=Ir+(Rr^(Or|~Nr))+Dr[10]+4293915773&4294967295,Ir=Or+(jr<<15&4294967295|jr>>>17),jr=Nr+(Or^(Ir|~Rr))+Dr[1]+2240044497&4294967295,Nr=Ir+(jr<<21&4294967295|jr>>>11),jr=Rr+(Ir^(Nr|~Or))+Dr[8]+1873313359&4294967295,Rr=Nr+(jr<<6&4294967295|jr>>>26),jr=Or+(Nr^(Rr|~Ir))+Dr[15]+4264355552&4294967295,Or=Rr+(jr<<10&4294967295|jr>>>22),jr=Ir+(Rr^(Or|~Nr))+Dr[6]+2734768916&4294967295,Ir=Or+(jr<<15&4294967295|jr>>>17),jr=Nr+(Or^(Ir|~Rr))+Dr[13]+1309151649&4294967295,Nr=Ir+(jr<<21&4294967295|jr>>>11),jr=Rr+(Ir^(Nr|~Or))+Dr[4]+4149444226&4294967295,Rr=Nr+(jr<<6&4294967295|jr>>>26),jr=Or+(Nr^(Rr|~Ir))+Dr[11]+3174756917&4294967295,Or=Rr+(jr<<10&4294967295|jr>>>22),jr=Ir+(Rr^(Or|~Nr))+Dr[2]+718787259&4294967295,Ir=Or+(jr<<15&4294967295|jr>>>17),jr=Nr+(Or^(Ir|~Rr))+Dr[9]+3951481745&4294967295,Tr.g[0]=Tr.g[0]+Rr&4294967295,Tr.g[1]=Tr.g[1]+(Ir+(jr<<21&4294967295|jr>>>11))&4294967295,Tr.g[2]=Tr.g[2]+Ir&4294967295,Tr.g[3]=Tr.g[3]+Or&4294967295}nr.prototype.u=function(Tr,Rr){Rr===void 0&&(Rr=Tr.length);for(var Nr=Rr-this.blockSize,Dr=this.B,Ir=this.h,Or=0;Or<Rr;){if(Ir==0)for(;Or<=Nr;)ir(this,Tr,Or),Or+=this.blockSize;if(typeof Tr=="string"){for(;Or<Rr;)if(Dr[Ir++]=Tr.charCodeAt(Or++),Ir==this.blockSize){ir(this,Dr),Ir=0;break}}else for(;Or<Rr;)if(Dr[Ir++]=Tr[Or++],Ir==this.blockSize){ir(this,Dr),Ir=0;break}}this.h=Ir,this.o+=Rr},nr.prototype.v=function(){var Tr=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Tr[0]=128;for(var Rr=1;Rr<Tr.length-8;++Rr)Tr[Rr]=0;var Nr=8*this.o;for(Rr=Tr.length-8;Rr<Tr.length;++Rr)Tr[Rr]=Nr&255,Nr/=256;for(this.u(Tr),Tr=Array(16),Rr=Nr=0;4>Rr;++Rr)for(var Dr=0;32>Dr;Dr+=8)Tr[Nr++]=this.g[Rr]>>>Dr&255;return Tr};function sr(Tr,Rr){var Nr=cr;return Object.prototype.hasOwnProperty.call(Nr,Tr)?Nr[Tr]:Nr[Tr]=Rr(Tr)}function ar(Tr,Rr){this.h=Rr;for(var Nr=[],Dr=!0,Ir=Tr.length-1;0<=Ir;Ir--){var Or=Tr[Ir]|0;Dr&&Or==Rr||(Nr[Ir]=Or,Dr=!1)}this.g=Nr}var cr={};function lr(Tr){return-128<=Tr&&128>Tr?sr(Tr,function(Rr){return new ar([Rr|0],0>Rr?-1:0)}):new ar([Tr|0],0>Tr?-1:0)}function or(Tr){if(isNaN(Tr)||!isFinite(Tr))return hr;if(0>Tr)return pr(or(-Tr));for(var Rr=[],Nr=1,Dr=0;Tr>=Nr;Dr++)Rr[Dr]=Tr/Nr|0,Nr*=4294967296;return new ar(Rr,0)}function ur(Tr,Rr){if(Tr.length==0)throw Error("number format error: empty string");if(Rr=Rr||10,2>Rr||36<Rr)throw Error("radix out of range: "+Rr);if(Tr.charAt(0)=="-")return pr(ur(Tr.substring(1),Rr));if(0<=Tr.indexOf("-"))throw Error('number format error: interior "-" character');for(var Nr=or(Math.pow(Rr,8)),Dr=hr,Ir=0;Ir<Tr.length;Ir+=8){var Or=Math.min(8,Tr.length-Ir),jr=parseInt(Tr.substring(Ir,Ir+Or),Rr);8>Or?(Or=or(Math.pow(Rr,Or)),Dr=Dr.j(Or).add(or(jr))):(Dr=Dr.j(Nr),Dr=Dr.add(or(jr)))}return Dr}var hr=lr(0),dr=lr(1),fr=lr(16777216);tr=ar.prototype,tr.m=function(){if(br(this))return-pr(this).m();for(var Tr=0,Rr=1,Nr=0;Nr<this.g.length;Nr++){var Dr=this.i(Nr);Tr+=(0<=Dr?Dr:4294967296+Dr)*Rr,Rr*=4294967296}return Tr},tr.toString=function(Tr){if(Tr=Tr||10,2>Tr||36<Tr)throw Error("radix out of range: "+Tr);if(gr(this))return"0";if(br(this))return"-"+pr(this).toString(Tr);for(var Rr=or(Math.pow(Tr,6)),Nr=this,Dr="";;){var Ir=vr(Nr,Rr).g;Nr=mr(Nr,Ir.j(Rr));var Or=((0<Nr.g.length?Nr.g[0]:Nr.h)>>>0).toString(Tr);if(Nr=Ir,gr(Nr))return Or+Dr;for(;6>Or.length;)Or="0"+Or;Dr=Or+Dr}},tr.i=function(Tr){return 0>Tr?0:Tr<this.g.length?this.g[Tr]:this.h};function gr(Tr){if(Tr.h!=0)return!1;for(var Rr=0;Rr<Tr.g.length;Rr++)if(Tr.g[Rr]!=0)return!1;return!0}function br(Tr){return Tr.h==-1}tr.l=function(Tr){return Tr=mr(this,Tr),br(Tr)?-1:gr(Tr)?0:1};function pr(Tr){for(var Rr=Tr.g.length,Nr=[],Dr=0;Dr<Rr;Dr++)Nr[Dr]=~Tr.g[Dr];return new ar(Nr,~Tr.h).add(dr)}tr.abs=function(){return br(this)?pr(this):this},tr.add=function(Tr){for(var Rr=Math.max(this.g.length,Tr.g.length),Nr=[],Dr=0,Ir=0;Ir<=Rr;Ir++){var Or=Dr+(this.i(Ir)&65535)+(Tr.i(Ir)&65535),jr=(Or>>>16)+(this.i(Ir)>>>16)+(Tr.i(Ir)>>>16);Dr=jr>>>16,Or&=65535,jr&=65535,Nr[Ir]=jr<<16|Or}return new ar(Nr,Nr[Nr.length-1]&-2147483648?-1:0)};function mr(Tr,Rr){return Tr.add(pr(Rr))}tr.j=function(Tr){if(gr(this)||gr(Tr))return hr;if(br(this))return br(Tr)?pr(this).j(pr(Tr)):pr(pr(this).j(Tr));if(br(Tr))return pr(this.j(pr(Tr)));if(0>this.l(fr)&&0>Tr.l(fr))return or(this.m()*Tr.m());for(var Rr=this.g.length+Tr.g.length,Nr=[],Dr=0;Dr<2*Rr;Dr++)Nr[Dr]=0;for(Dr=0;Dr<this.g.length;Dr++)for(var Ir=0;Ir<Tr.g.length;Ir++){var Or=this.i(Dr)>>>16,jr=this.i(Dr)&65535,Lr=Tr.i(Ir)>>>16,Cr=Tr.i(Ir)&65535;Nr[2*Dr+2*Ir]+=jr*Cr,yr(Nr,2*Dr+2*Ir),Nr[2*Dr+2*Ir+1]+=Or*Cr,yr(Nr,2*Dr+2*Ir+1),Nr[2*Dr+2*Ir+1]+=jr*Lr,yr(Nr,2*Dr+2*Ir+1),Nr[2*Dr+2*Ir+2]+=Or*Lr,yr(Nr,2*Dr+2*Ir+2)}for(Dr=0;Dr<Rr;Dr++)Nr[Dr]=Nr[2*Dr+1]<<16|Nr[2*Dr];for(Dr=Rr;Dr<2*Rr;Dr++)Nr[Dr]=0;return new ar(Nr,0)};function yr(Tr,Rr){for(;(Tr[Rr]&65535)!=Tr[Rr];)Tr[Rr+1]+=Tr[Rr]>>>16,Tr[Rr]&=65535,Rr++}function xr(Tr,Rr){this.g=Tr,this.h=Rr}function vr(Tr,Rr){if(gr(Rr))throw Error("division by zero");if(gr(Tr))return new xr(hr,hr);if(br(Tr))return Rr=vr(pr(Tr),Rr),new xr(pr(Rr.g),pr(Rr.h));if(br(Rr))return Rr=vr(Tr,pr(Rr)),new xr(pr(Rr.g),Rr.h);if(30<Tr.g.length){if(br(Tr)||br(Rr))throw Error("slowDivide_ only works with positive integers.");for(var Nr=dr,Dr=Rr;0>=Dr.l(Tr);)Nr=_r(Nr),Dr=_r(Dr);var Ir=Er(Nr,1),Or=Er(Dr,1);for(Dr=Er(Dr,2),Nr=Er(Nr,2);!gr(Dr);){var jr=Or.add(Dr);0>=jr.l(Tr)&&(Ir=Ir.add(Nr),Or=jr),Dr=Er(Dr,1),Nr=Er(Nr,1)}return Rr=mr(Tr,Ir.j(Rr)),new xr(Ir,Rr)}for(Ir=hr;0<=Tr.l(Rr);){for(Nr=Math.max(1,Math.floor(Tr.m()/Rr.m())),Dr=Math.ceil(Math.log(Nr)/Math.LN2),Dr=48>=Dr?1:Math.pow(2,Dr-48),Or=or(Nr),jr=Or.j(Rr);br(jr)||0<jr.l(Tr);)Nr-=Dr,Or=or(Nr),jr=Or.j(Rr);gr(Or)&&(Or=dr),Ir=Ir.add(Or),Tr=mr(Tr,jr)}return new xr(Ir,Tr)}tr.A=function(Tr){return vr(this,Tr).h},tr.and=function(Tr){for(var Rr=Math.max(this.g.length,Tr.g.length),Nr=[],Dr=0;Dr<Rr;Dr++)Nr[Dr]=this.i(Dr)&Tr.i(Dr);return new ar(Nr,this.h&Tr.h)},tr.or=function(Tr){for(var Rr=Math.max(this.g.length,Tr.g.length),Nr=[],Dr=0;Dr<Rr;Dr++)Nr[Dr]=this.i(Dr)|Tr.i(Dr);return new ar(Nr,this.h|Tr.h)},tr.xor=function(Tr){for(var Rr=Math.max(this.g.length,Tr.g.length),Nr=[],Dr=0;Dr<Rr;Dr++)Nr[Dr]=this.i(Dr)^Tr.i(Dr);return new ar(Nr,this.h^Tr.h)};function _r(Tr){for(var Rr=Tr.g.length+1,Nr=[],Dr=0;Dr<Rr;Dr++)Nr[Dr]=Tr.i(Dr)<<1|Tr.i(Dr-1)>>>31;return new ar(Nr,Tr.h)}function Er(Tr,Rr){var Nr=Rr>>5;Rr%=32;for(var Dr=Tr.g.length-Nr,Ir=[],Or=0;Or<Dr;Or++)Ir[Or]=0<Rr?Tr.i(Or+Nr)>>>Rr|Tr.i(Or+Nr+1)<<32-Rr:Tr.i(Or+Nr);return new ar(Ir,Tr.h)}nr.prototype.digest=nr.prototype.v,nr.prototype.reset=nr.prototype.s,nr.prototype.update=nr.prototype.u,Md5=nr,ar.prototype.add=ar.prototype.add,ar.prototype.multiply=ar.prototype.j,ar.prototype.modulo=ar.prototype.A,ar.prototype.compare=ar.prototype.l,ar.prototype.toNumber=ar.prototype.m,ar.prototype.toString=ar.prototype.toString,ar.prototype.getBits=ar.prototype.i,ar.fromNumber=or,ar.fromString=ur,Integer=ar}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode$1,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var tr,er=typeof Object.defineProperties=="function"?Object.defineProperty:function(Wr,cn,mn){return Wr==Array.prototype||Wr==Object.prototype||(Wr[cn]=mn.value),Wr};function rr(Wr){Wr=[typeof globalThis=="object"&&globalThis,Wr,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var cn=0;cn<Wr.length;++cn){var mn=Wr[cn];if(mn&&mn.Math==Math)return mn}throw Error("Cannot find global object")}var nr=rr(this);function ir(Wr,cn){if(cn)e:{var mn=nr;Wr=Wr.split(".");for(var Tn=0;Tn<Wr.length-1;Tn++){var hs=Wr[Tn];if(!(hs in mn))break e;mn=mn[hs]}Wr=Wr[Wr.length-1],Tn=mn[Wr],cn=cn(Tn),cn!=Tn&&cn!=null&&er(mn,Wr,{configurable:!0,writable:!0,value:cn})}}function sr(Wr,cn){Wr instanceof String&&(Wr+="");var mn=0,Tn=!1,hs={next:function(){if(!Tn&&mn<Wr.length){var Es=mn++;return{value:cn(Es,Wr[Es]),done:!1}}return Tn=!0,{done:!0,value:void 0}}};return hs[Symbol.iterator]=function(){return hs},hs}ir("Array.prototype.values",function(Wr){return Wr||function(){return sr(this,function(cn,mn){return mn})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var ar=ar||{},cr=this||self;function lr(Wr){var cn=typeof Wr;return cn=cn!="object"?cn:Wr?Array.isArray(Wr)?"array":cn:"null",cn=="array"||cn=="object"&&typeof Wr.length=="number"}function or(Wr){var cn=typeof Wr;return cn=="object"&&Wr!=null||cn=="function"}function ur(Wr,cn,mn){return Wr.call.apply(Wr.bind,arguments)}function hr(Wr,cn,mn){if(!Wr)throw Error();if(2<arguments.length){var Tn=Array.prototype.slice.call(arguments,2);return function(){var hs=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(hs,Tn),Wr.apply(cn,hs)}}return function(){return Wr.apply(cn,arguments)}}function dr(Wr,cn,mn){return dr=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ur:hr,dr.apply(null,arguments)}function fr(Wr,cn){var mn=Array.prototype.slice.call(arguments,1);return function(){var Tn=mn.slice();return Tn.push.apply(Tn,arguments),Wr.apply(this,Tn)}}function gr(Wr,cn){function mn(){}mn.prototype=cn.prototype,Wr.aa=cn.prototype,Wr.prototype=new mn,Wr.prototype.constructor=Wr,Wr.Qb=function(Tn,hs,Es){for(var Gs=Array(arguments.length-2),lo=2;lo<arguments.length;lo++)Gs[lo-2]=arguments[lo];return cn.prototype[hs].apply(Tn,Gs)}}function br(Wr){const cn=Wr.length;if(0<cn){const mn=Array(cn);for(let Tn=0;Tn<cn;Tn++)mn[Tn]=Wr[Tn];return mn}return[]}function pr(Wr,cn){for(let mn=1;mn<arguments.length;mn++){const Tn=arguments[mn];if(lr(Tn)){const hs=Wr.length||0,Es=Tn.length||0;Wr.length=hs+Es;for(let Gs=0;Gs<Es;Gs++)Wr[hs+Gs]=Tn[Gs]}else Wr.push(Tn)}}class mr{constructor(cn,mn){this.i=cn,this.j=mn,this.h=0,this.g=null}get(){let cn;return 0<this.h?(this.h--,cn=this.g,this.g=cn.next,cn.next=null):cn=this.i(),cn}}function yr(Wr){return/^[\s\xa0]*$/.test(Wr)}function xr(){var Wr=cr.navigator;return Wr&&(Wr=Wr.userAgent)?Wr:""}function vr(Wr){return vr[" "](Wr),Wr}vr[" "]=function(){};var _r=xr().indexOf("Gecko")!=-1&&!(xr().toLowerCase().indexOf("webkit")!=-1&&xr().indexOf("Edge")==-1)&&!(xr().indexOf("Trident")!=-1||xr().indexOf("MSIE")!=-1)&&xr().indexOf("Edge")==-1;function Er(Wr,cn,mn){for(const Tn in Wr)cn.call(mn,Wr[Tn],Tn,Wr)}function Tr(Wr,cn){for(const mn in Wr)cn.call(void 0,Wr[mn],mn,Wr)}function Rr(Wr){const cn={};for(const mn in Wr)cn[mn]=Wr[mn];return cn}const Nr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dr(Wr,cn){let mn,Tn;for(let hs=1;hs<arguments.length;hs++){Tn=arguments[hs];for(mn in Tn)Wr[mn]=Tn[mn];for(let Es=0;Es<Nr.length;Es++)mn=Nr[Es],Object.prototype.hasOwnProperty.call(Tn,mn)&&(Wr[mn]=Tn[mn])}}function Ir(Wr){var cn=1;Wr=Wr.split(":");const mn=[];for(;0<cn&&Wr.length;)mn.push(Wr.shift()),cn--;return Wr.length&&mn.push(Wr.join(":")),mn}function Or(Wr){cr.setTimeout(()=>{throw Wr},0)}function jr(){var Wr=Sr;let cn=null;return Wr.g&&(cn=Wr.g,Wr.g=Wr.g.next,Wr.g||(Wr.h=null),cn.next=null),cn}class Lr{constructor(){this.h=this.g=null}add(cn,mn){const Tn=Cr.get();Tn.set(cn,mn),this.h?this.h.next=Tn:this.g=Tn,this.h=Tn}}var Cr=new mr(()=>new wr,Wr=>Wr.reset());class wr{constructor(){this.next=this.g=this.h=null}set(cn,mn){this.h=cn,this.g=mn,this.next=null}reset(){this.next=this.g=this.h=null}}let Pr,Ar=!1,Sr=new Lr,Mr=()=>{const Wr=cr.Promise.resolve(void 0);Pr=()=>{Wr.then(qr)}};var qr=()=>{for(var Wr;Wr=jr();){try{Wr.h.call(Wr.g)}catch(mn){Or(mn)}var cn=Cr;cn.j(Wr),100>cn.h&&(cn.h++,Wr.next=cn.g,cn.g=Wr)}Ar=!1};function $r(){this.s=this.s,this.C=this.C}$r.prototype.s=!1,$r.prototype.ma=function(){this.s||(this.s=!0,this.N())},$r.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Br(Wr,cn){this.type=Wr,this.g=this.target=cn,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var zr=function(){if(!cr.addEventListener||!Object.defineProperty)return!1;var Wr=!1,cn=Object.defineProperty({},"passive",{get:function(){Wr=!0}});try{const mn=()=>{};cr.addEventListener("test",mn,cn),cr.removeEventListener("test",mn,cn)}catch{}return Wr}();function Gr(Wr,cn){if(Br.call(this,Wr?Wr.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Wr){var mn=this.type=Wr.type,Tn=Wr.changedTouches&&Wr.changedTouches.length?Wr.changedTouches[0]:null;if(this.target=Wr.target||Wr.srcElement,this.g=cn,cn=Wr.relatedTarget){if(_r){e:{try{vr(cn.nodeName);var hs=!0;break e}catch{}hs=!1}hs||(cn=null)}}else mn=="mouseover"?cn=Wr.fromElement:mn=="mouseout"&&(cn=Wr.toElement);this.relatedTarget=cn,Tn?(this.clientX=Tn.clientX!==void 0?Tn.clientX:Tn.pageX,this.clientY=Tn.clientY!==void 0?Tn.clientY:Tn.pageY,this.screenX=Tn.screenX||0,this.screenY=Tn.screenY||0):(this.clientX=Wr.clientX!==void 0?Wr.clientX:Wr.pageX,this.clientY=Wr.clientY!==void 0?Wr.clientY:Wr.pageY,this.screenX=Wr.screenX||0,this.screenY=Wr.screenY||0),this.button=Wr.button,this.key=Wr.key||"",this.ctrlKey=Wr.ctrlKey,this.altKey=Wr.altKey,this.shiftKey=Wr.shiftKey,this.metaKey=Wr.metaKey,this.pointerId=Wr.pointerId||0,this.pointerType=typeof Wr.pointerType=="string"?Wr.pointerType:Vr[Wr.pointerType]||"",this.state=Wr.state,this.i=Wr,Wr.defaultPrevented&&Gr.aa.h.call(this)}}gr(Gr,Br);var Vr={2:"touch",3:"pen",4:"mouse"};Gr.prototype.h=function(){Gr.aa.h.call(this);var Wr=this.i;Wr.preventDefault?Wr.preventDefault():Wr.returnValue=!1};var Xr="closure_listenable_"+(1e6*Math.random()|0),Ur=0;function Fr(Wr,cn,mn,Tn,hs){this.listener=Wr,this.proxy=null,this.src=cn,this.type=mn,this.capture=!!Tn,this.ha=hs,this.key=++Ur,this.da=this.fa=!1}function Kr(Wr){Wr.da=!0,Wr.listener=null,Wr.proxy=null,Wr.src=null,Wr.ha=null}function Zr(Wr){this.src=Wr,this.g={},this.h=0}Zr.prototype.add=function(Wr,cn,mn,Tn,hs){var Es=Wr.toString();Wr=this.g[Es],Wr||(Wr=this.g[Es]=[],this.h++);var Gs=tn(Wr,cn,Tn,hs);return-1<Gs?(cn=Wr[Gs],mn||(cn.fa=!1)):(cn=new Fr(cn,this.src,Es,!!Tn,hs),cn.fa=mn,Wr.push(cn)),cn};function Jr(Wr,cn){var mn=cn.type;if(mn in Wr.g){var Tn=Wr.g[mn],hs=Array.prototype.indexOf.call(Tn,cn,void 0),Es;(Es=0<=hs)&&Array.prototype.splice.call(Tn,hs,1),Es&&(Kr(cn),Wr.g[mn].length==0&&(delete Wr.g[mn],Wr.h--))}}function tn(Wr,cn,mn,Tn){for(var hs=0;hs<Wr.length;++hs){var Es=Wr[hs];if(!Es.da&&Es.listener==cn&&Es.capture==!!mn&&Es.ha==Tn)return hs}return-1}var an="closure_lm_"+(1e6*Math.random()|0),dn={};function en(Wr,cn,mn,Tn,hs){if(Array.isArray(cn)){for(var Es=0;Es<cn.length;Es++)en(Wr,cn[Es],mn,Tn,hs);return null}return mn=En(mn),Wr&&Wr[Xr]?Wr.K(cn,mn,or(Tn)?!!Tn.capture:!1,hs):rn(Wr,cn,mn,!1,Tn,hs)}function rn(Wr,cn,mn,Tn,hs,Es){if(!cn)throw Error("Invalid event type");var Gs=or(hs)?!!hs.capture:!!hs,lo=Pn(Wr);if(lo||(Wr[an]=lo=new Zr(Wr)),mn=lo.add(cn,mn,Tn,Gs,Es),mn.proxy)return mn;if(Tn=sn(),mn.proxy=Tn,Tn.src=Wr,Tn.listener=mn,Wr.addEventListener)zr||(hs=Gs),hs===void 0&&(hs=!1),Wr.addEventListener(cn.toString(),Tn,hs);else if(Wr.attachEvent)Wr.attachEvent(pn(cn.toString()),Tn);else if(Wr.addListener&&Wr.removeListener)Wr.addListener(Tn);else throw Error("addEventListener and attachEvent are unavailable.");return mn}function sn(){function Wr(mn){return cn.call(Wr.src,Wr.listener,mn)}const cn=gn;return Wr}function on(Wr,cn,mn,Tn,hs){if(Array.isArray(cn))for(var Es=0;Es<cn.length;Es++)on(Wr,cn[Es],mn,Tn,hs);else Tn=or(Tn)?!!Tn.capture:!!Tn,mn=En(mn),Wr&&Wr[Xr]?(Wr=Wr.i,cn=String(cn).toString(),cn in Wr.g&&(Es=Wr.g[cn],mn=tn(Es,mn,Tn,hs),-1<mn&&(Kr(Es[mn]),Array.prototype.splice.call(Es,mn,1),Es.length==0&&(delete Wr.g[cn],Wr.h--)))):Wr&&(Wr=Pn(Wr))&&(cn=Wr.g[cn.toString()],Wr=-1,cn&&(Wr=tn(cn,mn,Tn,hs)),(mn=-1<Wr?cn[Wr]:null)&&fn(mn))}function fn(Wr){if(typeof Wr!="number"&&Wr&&!Wr.da){var cn=Wr.src;if(cn&&cn[Xr])Jr(cn.i,Wr);else{var mn=Wr.type,Tn=Wr.proxy;cn.removeEventListener?cn.removeEventListener(mn,Tn,Wr.capture):cn.detachEvent?cn.detachEvent(pn(mn),Tn):cn.addListener&&cn.removeListener&&cn.removeListener(Tn),(mn=Pn(cn))?(Jr(mn,Wr),mn.h==0&&(mn.src=null,cn[an]=null)):Kr(Wr)}}}function pn(Wr){return Wr in dn?dn[Wr]:dn[Wr]="on"+Wr}function gn(Wr,cn){if(Wr.da)Wr=!0;else{cn=new Gr(cn,this);var mn=Wr.listener,Tn=Wr.ha||Wr.src;Wr.fa&&fn(Wr),Wr=mn.call(Tn,cn)}return Wr}function Pn(Wr){return Wr=Wr[an],Wr instanceof Zr?Wr:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(Wr){return typeof Wr=="function"?Wr:(Wr[In]||(Wr[In]=function(cn){return Wr.handleEvent(cn)}),Wr[In])}function zn(){$r.call(this),this.i=new Zr(this),this.M=this,this.F=null}gr(zn,$r),zn.prototype[Xr]=!0,zn.prototype.removeEventListener=function(Wr,cn,mn,Tn){on(this,Wr,cn,mn,Tn)};function yn(Wr,cn){var mn,Tn=Wr.F;if(Tn)for(mn=[];Tn;Tn=Tn.F)mn.push(Tn);if(Wr=Wr.M,Tn=cn.type||cn,typeof cn=="string")cn=new Br(cn,Wr);else if(cn instanceof Br)cn.target=cn.target||Wr;else{var hs=cn;cn=new Br(Tn,Wr),Dr(cn,hs)}if(hs=!0,mn)for(var Es=mn.length-1;0<=Es;Es--){var Gs=cn.g=mn[Es];hs=Vn(Gs,Tn,!0,cn)&&hs}if(Gs=cn.g=Wr,hs=Vn(Gs,Tn,!0,cn)&&hs,hs=Vn(Gs,Tn,!1,cn)&&hs,mn)for(Es=0;Es<mn.length;Es++)Gs=cn.g=mn[Es],hs=Vn(Gs,Tn,!1,cn)&&hs}zn.prototype.N=function(){if(zn.aa.N.call(this),this.i){var Wr=this.i,cn;for(cn in Wr.g){for(var mn=Wr.g[cn],Tn=0;Tn<mn.length;Tn++)Kr(mn[Tn]);delete Wr.g[cn],Wr.h--}}this.F=null},zn.prototype.K=function(Wr,cn,mn,Tn){return this.i.add(String(Wr),cn,!1,mn,Tn)},zn.prototype.L=function(Wr,cn,mn,Tn){return this.i.add(String(Wr),cn,!0,mn,Tn)};function Vn(Wr,cn,mn,Tn){if(cn=Wr.i.g[String(cn)],!cn)return!0;cn=cn.concat();for(var hs=!0,Es=0;Es<cn.length;++Es){var Gs=cn[Es];if(Gs&&!Gs.da&&Gs.capture==mn){var lo=Gs.listener,yo=Gs.ha||Gs.src;Gs.fa&&Jr(Wr.i,Gs),hs=lo.call(yo,Tn)!==!1&&hs}}return hs&&!Tn.defaultPrevented}function Kn(Wr,cn,mn){if(typeof Wr=="function")mn&&(Wr=dr(Wr,mn));else if(Wr&&typeof Wr.handleEvent=="function")Wr=dr(Wr.handleEvent,Wr);else throw Error("Invalid listener argument");return 2147483647<Number(cn)?-1:cr.setTimeout(Wr,cn||0)}function es(Wr){Wr.g=Kn(()=>{Wr.g=null,Wr.i&&(Wr.i=!1,es(Wr))},Wr.l);const cn=Wr.h;Wr.h=null,Wr.m.apply(null,cn)}class Xn extends $r{constructor(cn,mn){super(),this.m=cn,this.l=mn,this.h=null,this.i=!1,this.g=null}j(cn){this.h=arguments,this.g?this.i=!0:es(this)}N(){super.N(),this.g&&(cr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(Wr){$r.call(this),this.h=Wr,this.g={}}gr(ds,$r);var fs=[];function os(Wr){Er(Wr.g,function(cn,mn){this.g.hasOwnProperty(mn)&&fn(cn)},Wr),Wr.g={}}ds.prototype.N=function(){ds.aa.N.call(this),os(this)},ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hn=cr.JSON.stringify,Ln=cr.JSON.parse,Dn=class{stringify(Wr){return cr.JSON.stringify(Wr,void 0)}parse(Wr){return cr.JSON.parse(Wr,void 0)}};function ls(){}ls.prototype.h=null;function Ds(Wr){return Wr.h||(Wr.h=Wr.i())}function xs(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jn(){Br.call(this,"d")}gr(Jn,Br);function is(){Br.call(this,"c")}gr(is,Br);var bs={},Bn=null;function Yn(){return Bn=Bn||new zn}bs.La="serverreachability";function vn(Wr){Br.call(this,bs.La,Wr)}gr(vn,Br);function _n(Wr){const cn=Yn();yn(cn,new vn(cn))}bs.STAT_EVENT="statevent";function Mn(Wr,cn){Br.call(this,bs.STAT_EVENT,Wr),this.stat=cn}gr(Mn,Br);function Cn(Wr){const cn=Yn();yn(cn,new Mn(cn,Wr))}bs.Ma="timingevent";function Zn(Wr,cn){Br.call(this,bs.Ma,Wr),this.size=cn}gr(Zn,Br);function qn(Wr,cn){if(typeof Wr!="function")throw Error("Fn must not be null and must be a function");return cr.setTimeout(function(){Wr()},cn)}function wn(){this.g=!0}wn.prototype.xa=function(){this.g=!1};function On(Wr,cn,mn,Tn,hs,Es){Wr.info(function(){if(Wr.g)if(Es)for(var Gs="",lo=Es.split("&"),yo=0;yo<lo.length;yo++){var co=lo[yo].split("=");if(1<co.length){var So=co[0];co=co[1];var ko=So.split("_");Gs=2<=ko.length&&ko[1]=="type"?Gs+(So+"="+co+"&"):Gs+(So+"=redacted&")}}else Gs=null;else Gs=Es;return"XMLHTTP REQ ("+Tn+") [attempt "+hs+"]: "+cn+`
`+mn+`
`+Gs})}function Gn(Wr,cn,mn,Tn,hs,Es,Gs){Wr.info(function(){return"XMLHTTP RESP ("+Tn+") [ attempt "+hs+"]: "+cn+`
`+mn+`
`+Es+" "+Gs})}function Qn(Wr,cn,mn,Tn){Wr.info(function(){return"XMLHTTP TEXT ("+cn+"): "+us(Wr,mn)+(Tn?" "+Tn:"")})}function $s(Wr,cn){Wr.info(function(){return"TIMEOUT: "+cn})}wn.prototype.info=function(){};function us(Wr,cn){if(!Wr.g)return cn;if(!cn)return null;try{var mn=JSON.parse(cn);if(mn){for(Wr=0;Wr<mn.length;Wr++)if(Array.isArray(mn[Wr])){var Tn=mn[Wr];if(!(2>Tn.length)){var hs=Tn[1];if(Array.isArray(hs)&&!(1>hs.length)){var Es=hs[0];if(Es!="noop"&&Es!="stop"&&Es!="close")for(var Gs=1;Gs<hs.length;Gs++)hs[Gs]=""}}}}return Hn(mn)}catch{return cn}}var ws={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},As={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rs;function Ms(){}gr(Ms,ls),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Rs=new Ms;function Bs(Wr,cn,mn,Tn){this.j=Wr,this.i=cn,this.l=mn,this.R=Tn||1,this.U=new ds(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zs}function Zs(){this.i=null,this.g="",this.h=!1}var Qs={},eo={};function ao(Wr,cn,mn){Wr.L=1,Wr.v=Ko(jo(cn)),Wr.m=mn,Wr.P=!0,Un(Wr,null)}function Un(Wr,cn){Wr.F=Date.now(),ns(Wr),Wr.A=jo(Wr.v);var mn=Wr.A,Tn=Wr.R;Array.isArray(Tn)||(Tn=[String(Tn)]),io(mn.i,"t",Tn),Wr.C=0,mn=Wr.j.J,Wr.h=new Zs,Wr.g=bn(Wr.j,mn?cn:null,!Wr.m),0<Wr.O&&(Wr.M=new Xn(dr(Wr.Y,Wr,Wr.g),Wr.O)),cn=Wr.U,mn=Wr.g,Tn=Wr.ca;var hs="readystatechange";Array.isArray(hs)||(hs&&(fs[0]=hs.toString()),hs=fs);for(var Es=0;Es<hs.length;Es++){var Gs=en(mn,hs[Es],Tn||cn.handleEvent,!1,cn.h||cn);if(!Gs)break;cn.g[Gs.key]=Gs}cn=Wr.H?Rr(Wr.H):{},Wr.m?(Wr.u||(Wr.u="POST"),cn["Content-Type"]="application/x-www-form-urlencoded",Wr.g.ea(Wr.A,Wr.u,Wr.m,cn)):(Wr.u="GET",Wr.g.ea(Wr.A,Wr.u,null,cn)),_n(),On(Wr.i,Wr.u,Wr.A,Wr.l,Wr.R,Wr.m)}Bs.prototype.ca=function(Wr){Wr=Wr.target;const cn=this.M;cn&&Xs(Wr)==3?cn.j():this.Y(Wr)},Bs.prototype.Y=function(Wr){try{if(Wr==this.g)e:{const ko=Xs(this.g);var cn=this.g.Ba();const hu=this.g.Z();if(!(3>ko)&&(ko!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||ko!=4||cn==7||(cn==8||0>=hu?_n(3):_n(2)),Ss(this);var mn=this.g.Z();this.X=mn;t:if(Ts(this)){var Tn=xa(this.g);Wr="";var hs=Tn.length,Es=Xs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Ks(this);var Gs="";break t}this.h.i=new cr.TextDecoder}for(cn=0;cn<hs;cn++)this.h.h=!0,Wr+=this.h.i.decode(Tn[cn],{stream:!(Es&&cn==hs-1)});Tn.length=0,this.h.g+=Wr,this.C=0,Gs=this.h.g}else Gs=this.g.oa();if(this.o=mn==200,Gn(this.i,this.u,this.A,this.l,this.R,ko,mn),this.o){if(this.T&&!this.K){t:{if(this.g){var lo,yo=this.g;if((lo=yo.g?yo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yr(lo)){var co=lo;break t}}co=null}if(mn=co)Qn(this.i,this.l,mn,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,An(this,mn);else{this.o=!1,this.s=3,Cn(12),Is(this),Ks(this);break e}}if(this.P){mn=!0;let Jo;for(;!this.J&&this.C<Gs.length;)if(Jo=Nn(this,Gs),Jo==eo){ko==4&&(this.s=4,Cn(14),mn=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Jo==Qs){this.s=4,Cn(15),Qn(this.i,this.l,Gs,"[Invalid Chunk]"),mn=!1;break}else Qn(this.i,this.l,Jo,null),An(this,Jo);if(Ts(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ko!=4||Gs.length!=0||this.h.h||(this.s=1,Cn(16),mn=!1),this.o=this.o&&mn,!mn)Qn(this.i,this.l,Gs,"[Invalid Chunked Response]"),Is(this),Ks(this);else if(0<Gs.length&&!this.W){this.W=!0;var So=this.j;So.g==this&&So.ba&&!So.M&&(So.j.info("Great, no buffering proxy detected. Bytes received: "+Gs.length),Lu(So),So.M=!0,Cn(11))}}else Qn(this.i,this.l,Gs,null),An(this,Gs);ko==4&&Is(this),this.o&&!this.J&&(ko==4?Eu(this.j,this):(this.o=!1,ns(this)))}else oo(this.g),mn==400&&0<Gs.indexOf("Unknown SID")?(this.s=3,Cn(12)):(this.s=0,Cn(13)),Is(this),Ks(this)}}}catch{}finally{}};function Ts(Wr){return Wr.g?Wr.u=="GET"&&Wr.L!=2&&Wr.j.Ca:!1}function Nn(Wr,cn){var mn=Wr.C,Tn=cn.indexOf(`
`,mn);return Tn==-1?eo:(mn=Number(cn.substring(mn,Tn)),isNaN(mn)?Qs:(Tn+=1,Tn+mn>cn.length?eo:(cn=cn.slice(Tn,Tn+mn),Wr.C=Tn+mn,cn)))}Bs.prototype.cancel=function(){this.J=!0,Is(this)};function ns(Wr){Wr.S=Date.now()+Wr.I,Ps(Wr,Wr.I)}function Ps(Wr,cn){if(Wr.B!=null)throw Error("WatchDog timer not null");Wr.B=qn(dr(Wr.ba,Wr),cn)}function Ss(Wr){Wr.B&&(cr.clearTimeout(Wr.B),Wr.B=null)}Bs.prototype.ba=function(){this.B=null;const Wr=Date.now();0<=Wr-this.S?($s(this.i,this.A),this.L!=2&&(_n(),Cn(17)),Is(this),this.s=2,Ks(this)):Ps(this,this.S-Wr)};function Ks(Wr){Wr.j.G==0||Wr.J||Eu(Wr.j,Wr)}function Is(Wr){Ss(Wr);var cn=Wr.M;cn&&typeof cn.ma=="function"&&cn.ma(),Wr.M=null,os(Wr.U),Wr.g&&(cn=Wr.g,Wr.g=null,cn.abort(),cn.ma())}function An(Wr,cn){try{var mn=Wr.j;if(mn.G!=0&&(mn.g==Wr||Ys(mn.h,Wr))){if(!Wr.K&&Ys(mn.h,Wr)&&mn.G==3){try{var Tn=mn.Da.g.parse(cn)}catch{Tn=null}if(Array.isArray(Tn)&&Tn.length==3){var hs=Tn;if(hs[0]==0){e:if(!mn.u){if(mn.g)if(mn.g.F+3e3<Wr.F)du(mn),uu(mn);else break e;Tu(mn),Cn(18)}}else mn.za=hs[1],0<mn.za-mn.T&&37500>hs[2]&&mn.F&&mn.v==0&&!mn.C&&(mn.C=qn(dr(mn.Za,mn),6e3));if(1>=Ns(mn.h)&&mn.ca){try{mn.ca()}catch{}mn.ca=void 0}}else Sl(mn,11)}else if((Wr.K||mn.g==Wr)&&du(mn),!yr(cn))for(hs=mn.Da.g.parse(cn),cn=0;cn<hs.length;cn++){let co=hs[cn];if(mn.T=co[0],co=co[1],mn.G==2)if(co[0]=="c"){mn.K=co[1],mn.ia=co[2];const So=co[3];So!=null&&(mn.la=So,mn.j.info("VER="+mn.la));const ko=co[4];ko!=null&&(mn.Aa=ko,mn.j.info("SVER="+mn.Aa));const hu=co[5];hu!=null&&typeof hu=="number"&&0<hu&&(Tn=1.5*hu,mn.L=Tn,mn.j.info("backChannelRequestTimeoutMs_="+Tn)),Tn=mn;const Jo=Wr.g;if(Jo){const Su=Jo.g?Jo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Su){var Es=Tn.h;Es.g||Su.indexOf("spdy")==-1&&Su.indexOf("quic")==-1&&Su.indexOf("h2")==-1||(Es.j=Es.l,Es.g=new Set,Es.h&&(js(Es,Es.h),Es.h=null))}if(Tn.D){const Au=Jo.g?Jo.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(Tn.ya=Au,ho(Tn.I,Tn.D,Au))}}mn.G=3,mn.l&&mn.l.ua(),mn.ba&&(mn.R=Date.now()-Wr.F,mn.j.info("Handshake RTT: "+mn.R+"ms")),Tn=mn;var Gs=Wr;if(Tn.qa=Qr(Tn,Tn.J?Tn.ia:null,Tn.W),Gs.K){Js(Tn.h,Gs);var lo=Gs,yo=Tn.L;yo&&(lo.I=yo),lo.B&&(Ss(lo),ns(lo)),Tn.g=Gs}else wu(Tn);0<mn.i.length&&vu(mn)}else co[0]!="stop"&&co[0]!="close"||Sl(mn,7);else mn.G==3&&(co[0]=="stop"||co[0]=="close"?co[0]=="stop"?Sl(mn,7):Ml(mn):co[0]!="noop"&&mn.l&&mn.l.ta(co),mn.v=0)}}_n(4)}catch{}}var Vs=class{constructor(Wr,cn){this.g=Wr,this.map=cn}};function Fs(Wr){this.l=Wr||10,cr.PerformanceNavigationTiming?(Wr=cr.performance.getEntriesByType("navigation"),Wr=0<Wr.length&&(Wr[0].nextHopProtocol=="hq"||Wr[0].nextHopProtocol=="h2")):Wr=!!(cr.chrome&&cr.chrome.loadTimes&&cr.chrome.loadTimes()&&cr.chrome.loadTimes().wasFetchedViaSpdy),this.j=Wr?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cs(Wr){return Wr.h?!0:Wr.g?Wr.g.size>=Wr.j:!1}function Ns(Wr){return Wr.h?1:Wr.g?Wr.g.size:0}function Ys(Wr,cn){return Wr.h?Wr.h==cn:Wr.g?Wr.g.has(cn):!1}function js(Wr,cn){Wr.g?Wr.g.add(cn):Wr.h=cn}function Js(Wr,cn){Wr.h&&Wr.h==cn?Wr.h=null:Wr.g&&Wr.g.has(cn)&&Wr.g.delete(cn)}Fs.prototype.cancel=function(){if(this.i=to(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Wr of this.g.values())Wr.cancel();this.g.clear()}};function to(Wr){if(Wr.h!=null)return Wr.i.concat(Wr.h.D);if(Wr.g!=null&&Wr.g.size!==0){let cn=Wr.i;for(const mn of Wr.g.values())cn=cn.concat(mn.D);return cn}return br(Wr.i)}function mo(Wr){if(Wr.V&&typeof Wr.V=="function")return Wr.V();if(typeof Map<"u"&&Wr instanceof Map||typeof Set<"u"&&Wr instanceof Set)return Array.from(Wr.values());if(typeof Wr=="string")return Wr.split("");if(lr(Wr)){for(var cn=[],mn=Wr.length,Tn=0;Tn<mn;Tn++)cn.push(Wr[Tn]);return cn}cn=[],mn=0;for(Tn in Wr)cn[mn++]=Wr[Tn];return cn}function Eo(Wr){if(Wr.na&&typeof Wr.na=="function")return Wr.na();if(!Wr.V||typeof Wr.V!="function"){if(typeof Map<"u"&&Wr instanceof Map)return Array.from(Wr.keys());if(!(typeof Set<"u"&&Wr instanceof Set)){if(lr(Wr)||typeof Wr=="string"){var cn=[];Wr=Wr.length;for(var mn=0;mn<Wr;mn++)cn.push(mn);return cn}cn=[],mn=0;for(const Tn in Wr)cn[mn++]=Tn;return cn}}}function fo(Wr,cn){if(Wr.forEach&&typeof Wr.forEach=="function")Wr.forEach(cn,void 0);else if(lr(Wr)||typeof Wr=="string")Array.prototype.forEach.call(Wr,cn,void 0);else for(var mn=Eo(Wr),Tn=mo(Wr),hs=Tn.length,Es=0;Es<hs;Es++)cn.call(void 0,Tn[Es],mn&&mn[Es],Wr)}var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bo(Wr,cn){if(Wr){Wr=Wr.split("&");for(var mn=0;mn<Wr.length;mn++){var Tn=Wr[mn].indexOf("="),hs=null;if(0<=Tn){var Es=Wr[mn].substring(0,Tn);hs=Wr[mn].substring(Tn+1)}else Es=Wr[mn];cn(Es,hs?decodeURIComponent(hs.replace(/\+/g," ")):"")}}}function go(Wr){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,Wr instanceof go){this.h=Wr.h,ro(this,Wr.j),this.o=Wr.o,this.g=Wr.g,no(this,Wr.s),this.l=Wr.l;var cn=Wr.i,mn=new Wo;mn.i=cn.i,cn.g&&(mn.g=new Map(cn.g),mn.h=cn.h),Do(this,mn),this.m=Wr.m}else Wr&&(cn=String(Wr).match(No))?(this.h=!1,ro(this,cn[1]||"",!0),this.o=Io(cn[2]||""),this.g=Io(cn[3]||"",!0),no(this,cn[4]),this.l=Io(cn[5]||"",!0),Do(this,cn[6]||"",!0),this.m=Io(cn[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}go.prototype.toString=function(){var Wr=[],cn=this.j;cn&&Wr.push(Oo(cn,Al,!0),":");var mn=this.g;return(mn||cn=="file")&&(Wr.push("//"),(cn=this.o)&&Wr.push(Oo(cn,Al,!0),"@"),Wr.push(encodeURIComponent(String(mn)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),mn=this.s,mn!=null&&Wr.push(":",String(mn))),(mn=this.l)&&(this.g&&mn.charAt(0)!="/"&&Wr.push("/"),Wr.push(Oo(mn,mn.charAt(0)=="/"?Lo:Ul,!0))),(mn=this.i.toString())&&Wr.push("?",mn),(mn=this.m)&&Wr.push("#",Oo(mn,Rl)),Wr.join("")};function jo(Wr){return new go(Wr)}function ro(Wr,cn,mn){Wr.j=mn?Io(cn,!0):cn,Wr.j&&(Wr.j=Wr.j.replace(/:$/,""))}function no(Wr,cn){if(cn){if(cn=Number(cn),isNaN(cn)||0>cn)throw Error("Bad port number "+cn);Wr.s=cn}else Wr.s=null}function Do(Wr,cn,mn){cn instanceof Wo?(Wr.i=cn,Kl(Wr.i,Wr.h)):(mn||(cn=Oo(cn,zo)),Wr.i=new Wo(cn,Wr.h))}function ho(Wr,cn,mn){Wr.i.set(cn,mn)}function Ko(Wr){return ho(Wr,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Wr}function Io(Wr,cn){return Wr?cn?decodeURI(Wr.replace(/%25/g,"%2525")):decodeURIComponent(Wr):""}function Oo(Wr,cn,mn){return typeof Wr=="string"?(Wr=encodeURI(Wr).replace(cn,Zo),mn&&(Wr=Wr.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Wr):null}function Zo(Wr){return Wr=Wr.charCodeAt(0),"%"+(Wr>>4&15).toString(16)+(Wr&15).toString(16)}var Al=/[#\/\?@]/g,Ul=/[#\?:]/g,Lo=/[#\?]/g,zo=/[#\?@]/g,Rl=/#/g;function Wo(Wr,cn){this.h=this.g=null,this.i=Wr||null,this.j=!!cn}function _o(Wr){Wr.g||(Wr.g=new Map,Wr.h=0,Wr.i&&Bo(Wr.i,function(cn,mn){Wr.add(decodeURIComponent(cn.replace(/\+/g," ")),mn)}))}tr=Wo.prototype,tr.add=function(Wr,cn){_o(this),this.i=null,Wr=Qo(this,Wr);var mn=this.g.get(Wr);return mn||this.g.set(Wr,mn=[]),mn.push(cn),this.h+=1,this};function zl(Wr,cn){_o(Wr),cn=Qo(Wr,cn),Wr.g.has(cn)&&(Wr.i=null,Wr.h-=Wr.g.get(cn).length,Wr.g.delete(cn))}function _l(Wr,cn){return _o(Wr),cn=Qo(Wr,cn),Wr.g.has(cn)}tr.forEach=function(Wr,cn){_o(this),this.g.forEach(function(mn,Tn){mn.forEach(function(hs){Wr.call(cn,hs,Tn,this)},this)},this)},tr.na=function(){_o(this);const Wr=Array.from(this.g.values()),cn=Array.from(this.g.keys()),mn=[];for(let Tn=0;Tn<cn.length;Tn++){const hs=Wr[Tn];for(let Es=0;Es<hs.length;Es++)mn.push(cn[Tn])}return mn},tr.V=function(Wr){_o(this);let cn=[];if(typeof Wr=="string")_l(this,Wr)&&(cn=cn.concat(this.g.get(Qo(this,Wr))));else{Wr=Array.from(this.g.values());for(let mn=0;mn<Wr.length;mn++)cn=cn.concat(Wr[mn])}return cn},tr.set=function(Wr,cn){return _o(this),this.i=null,Wr=Qo(this,Wr),_l(this,Wr)&&(this.h-=this.g.get(Wr).length),this.g.set(Wr,[cn]),this.h+=1,this},tr.get=function(Wr,cn){return Wr?(Wr=this.V(Wr),0<Wr.length?String(Wr[0]):cn):cn};function io(Wr,cn,mn){zl(Wr,cn),0<mn.length&&(Wr.i=null,Wr.g.set(Qo(Wr,cn),br(mn)),Wr.h+=mn.length)}tr.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Wr=[],cn=Array.from(this.g.keys());for(var mn=0;mn<cn.length;mn++){var Tn=cn[mn];const Es=encodeURIComponent(String(Tn)),Gs=this.V(Tn);for(Tn=0;Tn<Gs.length;Tn++){var hs=Es;Gs[Tn]!==""&&(hs+="="+encodeURIComponent(String(Gs[Tn]))),Wr.push(hs)}}return this.i=Wr.join("&")};function Qo(Wr,cn){return cn=String(cn),Wr.j&&(cn=cn.toLowerCase()),cn}function Kl(Wr,cn){cn&&!Wr.j&&(_o(Wr),Wr.i=null,Wr.g.forEach(function(mn,Tn){var hs=Tn.toLowerCase();Tn!=hs&&(zl(this,Tn),io(this,hs,mn))},Wr)),Wr.j=cn}function Il(Wr,cn){const mn=new wn;if(cr.Image){const Tn=new Image;Tn.onload=fr(wl,mn,"TestLoadImage: loaded",!0,cn,Tn),Tn.onerror=fr(wl,mn,"TestLoadImage: error",!1,cn,Tn),Tn.onabort=fr(wl,mn,"TestLoadImage: abort",!1,cn,Tn),Tn.ontimeout=fr(wl,mn,"TestLoadImage: timeout",!1,cn,Tn),cr.setTimeout(function(){Tn.ontimeout&&Tn.ontimeout()},1e4),Tn.src=Wr}else cn(!1)}function Du(Wr,cn){const mn=new wn,Tn=new AbortController,hs=setTimeout(()=>{Tn.abort(),wl(mn,"TestPingServer: timeout",!1,cn)},1e4);fetch(Wr,{signal:Tn.signal}).then(Es=>{clearTimeout(hs),Es.ok?wl(mn,"TestPingServer: ok",!0,cn):wl(mn,"TestPingServer: server error",!1,cn)}).catch(()=>{clearTimeout(hs),wl(mn,"TestPingServer: error",!1,cn)})}function wl(Wr,cn,mn,Tn,hs){try{hs&&(hs.onload=null,hs.onerror=null,hs.onabort=null,hs.ontimeout=null),Tn(mn)}catch{}}function su(){this.g=new Dn}function au(Wr,cn,mn){const Tn=mn||"";try{fo(Wr,function(hs,Es){let Gs=hs;or(hs)&&(Gs=Hn(hs)),cn.push(Tn+Es+"="+encodeURIComponent(Gs))})}catch(hs){throw cn.push(Tn+"type="+encodeURIComponent("_badmap")),hs}}function ou(Wr){this.l=Wr.Ub||null,this.j=Wr.eb||!1}gr(ou,ls),ou.prototype.g=function(){return new lu(this.l,this.j)},ou.prototype.i=function(Wr){return function(){return Wr}}({});function lu(Wr,cn){zn.call(this),this.D=Wr,this.o=cn,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}gr(lu,zn),tr=lu.prototype,tr.open=function(Wr,cn){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=Wr,this.A=cn,this.readyState=1,El(this)},tr.send=function(Wr){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const cn={headers:this.u,method:this.B,credentials:this.m,cache:void 0};Wr&&(cn.body=Wr),(this.D||cr).fetch(new Request(this.A,cn)).then(this.Sa.bind(this),this.ga.bind(this))},tr.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ol(this)),this.readyState=0},tr.Sa=function(Wr){if(this.g&&(this.l=Wr,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Wr.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")Wr.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof cr.ReadableStream<"u"&&"body"in Wr){if(this.j=Wr.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else Wr.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(Wr){Wr.j.read().then(Wr.Pa.bind(Wr)).catch(Wr.ga.bind(Wr))}tr.Pa=function(Wr){if(this.g){if(this.o&&Wr.value)this.response.push(Wr.value);else if(!this.o){var cn=Wr.value?Wr.value:new Uint8Array(0);(cn=this.v.decode(cn,{stream:!Wr.done}))&&(this.response=this.responseText+=cn)}Wr.done?Ol(this):El(this),this.readyState==3&&Pu(this)}},tr.Ra=function(Wr){this.g&&(this.response=this.responseText=Wr,Ol(this))},tr.Qa=function(Wr){this.g&&(this.response=Wr,Ol(this))},tr.ga=function(){this.g&&Ol(this)};function Ol(Wr){Wr.readyState=4,Wr.l=null,Wr.j=null,Wr.v=null,El(Wr)}tr.setRequestHeader=function(Wr,cn){this.u.append(Wr,cn)},tr.getResponseHeader=function(Wr){return this.h&&this.h.get(Wr.toLowerCase())||""},tr.getAllResponseHeaders=function(){if(!this.h)return"";const Wr=[],cn=this.h.entries();for(var mn=cn.next();!mn.done;)mn=mn.value,Wr.push(mn[0]+": "+mn[1]),mn=cn.next();return Wr.join(`\r
`)};function El(Wr){Wr.onreadystatechange&&Wr.onreadystatechange.call(Wr)}Object.defineProperty(lu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Wr){this.m=Wr?"include":"same-origin"}});function $l(Wr){let cn="";return Er(Wr,function(mn,Tn){cn+=Tn,cn+=":",cn+=mn,cn+=`\r
`}),cn}function mu(Wr,cn,mn){e:{for(Tn in mn){var Tn=!1;break e}Tn=!0}Tn||(mn=$l(mn),typeof Wr=="string"?mn!=null&&encodeURIComponent(String(mn)):ho(Wr,cn,mn))}function xo(Wr){zn.call(this),this.headers=new Map,this.o=Wr||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}gr(xo,zn);var gu=/^https?$/i,cu=["POST","PUT"];tr=xo.prototype,tr.Ha=function(Wr){this.J=Wr},tr.ea=function(Wr,cn,mn,Tn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+Wr);cn=cn?cn.toUpperCase():"GET",this.D=Wr,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rs.g(),this.v=this.o?Ds(this.o):Ds(Rs),this.g.onreadystatechange=dr(this.Ea,this);try{this.B=!0,this.g.open(cn,String(Wr),!0),this.B=!1}catch(Es){yu(this,Es);return}if(Wr=mn||"",mn=new Map(this.headers),Tn)if(Object.getPrototypeOf(Tn)===Object.prototype)for(var hs in Tn)mn.set(hs,Tn[hs]);else if(typeof Tn.keys=="function"&&typeof Tn.get=="function")for(const Es of Tn.keys())mn.set(Es,Tn.get(Es));else throw Error("Unknown input type for opt_headers: "+String(Tn));Tn=Array.from(mn.keys()).find(Es=>Es.toLowerCase()=="content-type"),hs=cr.FormData&&Wr instanceof cr.FormData,!(0<=Array.prototype.indexOf.call(cu,cn,void 0))||Tn||hs||mn.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Es,Gs]of mn)this.g.setRequestHeader(Es,Gs);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ks(this),this.u=!0,this.g.send(Wr),this.u=!1}catch(Es){yu(this,Es)}};function yu(Wr,cn){Wr.h=!1,Wr.g&&(Wr.j=!0,Wr.g.abort(),Wr.j=!1),Wr.l=cn,Wr.m=5,bu(Wr),_i(Wr)}function bu(Wr){Wr.A||(Wr.A=!0,yn(Wr,"complete"),yn(Wr,"error"))}tr.abort=function(Wr){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=Wr||7,yn(this,"complete"),yn(this,"abort"),_i(this))},tr.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_i(this,!0)),xo.aa.N.call(this)},tr.Ea=function(){this.s||(this.B||this.u||this.j?xu(this):this.bb())},tr.bb=function(){xu(this)};function xu(Wr){if(Wr.h&&typeof ar<"u"&&(!Wr.v[1]||Xs(Wr)!=4||Wr.Z()!=2)){if(Wr.u&&Xs(Wr)==4)Kn(Wr.Ea,0,Wr);else if(yn(Wr,"readystatechange"),Xs(Wr)==4){Wr.h=!1;try{const Gs=Wr.Z();e:switch(Gs){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var cn=!0;break e;default:cn=!1}var mn;if(!(mn=cn)){var Tn;if(Tn=Gs===0){var hs=String(Wr.D).match(No)[1]||null;!hs&&cr.self&&cr.self.location&&(hs=cr.self.location.protocol.slice(0,-1)),Tn=!gu.test(hs?hs.toLowerCase():"")}mn=Tn}if(mn)yn(Wr,"complete"),yn(Wr,"success");else{Wr.m=6;try{var Es=2<Xs(Wr)?Wr.g.statusText:""}catch{Es=""}Wr.l=Es+" ["+Wr.Z()+"]",bu(Wr)}}finally{_i(Wr)}}}}function _i(Wr,cn){if(Wr.g){ks(Wr);const mn=Wr.g,Tn=Wr.v[0]?()=>{}:null;Wr.g=null,Wr.v=null,cn||yn(Wr,"ready");try{mn.onreadystatechange=Tn}catch{}}}function ks(Wr){Wr.I&&(cr.clearTimeout(Wr.I),Wr.I=null)}tr.isActive=function(){return!!this.g};function Xs(Wr){return Wr.g?Wr.g.readyState:0}tr.Z=function(){try{return 2<Xs(this)?this.g.status:-1}catch{return-1}},tr.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},tr.Oa=function(Wr){if(this.g){var cn=this.g.responseText;return Wr&&cn.indexOf(Wr)==0&&(cn=cn.substring(Wr.length)),Ln(cn)}};function xa(Wr){try{if(!Wr.g)return null;if("response"in Wr.g)return Wr.g.response;switch(Wr.H){case"":case"text":return Wr.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Wr.g)return Wr.g.mozResponseArrayBuffer}return null}catch{return null}}function oo(Wr){const cn={};Wr=(Wr.g&&2<=Xs(Wr)&&Wr.g.getAllResponseHeaders()||"").split(`\r
`);for(let Tn=0;Tn<Wr.length;Tn++){if(yr(Wr[Tn]))continue;var mn=Ir(Wr[Tn]);const hs=mn[0];if(mn=mn[1],typeof mn!="string")continue;mn=mn.trim();const Es=cn[hs]||[];cn[hs]=Es,Es.push(mn)}Tr(cn,function(Tn){return Tn.join(", ")})}tr.Ba=function(){return this.m},tr.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(Wr,cn,mn){return mn&&mn.internalChannelParams&&mn.internalChannelParams[Wr]||cn}function Xl(Wr){this.Aa=0,this.i=[],this.j=new wn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=po("failFast",!1,Wr),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=po("baseRetryDelayMs",5e3,Wr),this.cb=po("retryDelaySeedMs",1e4,Wr),this.Wa=po("forwardChannelMaxRetries",2,Wr),this.wa=po("forwardChannelRequestTimeoutMs",2e4,Wr),this.pa=Wr&&Wr.xmlHttpFactory||void 0,this.Xa=Wr&&Wr.Tb||void 0,this.Ca=Wr&&Wr.useFetchStreams||!1,this.L=void 0,this.J=Wr&&Wr.supportsCrossDomainXhr||!1,this.K="",this.h=new Fs(Wr&&Wr.concurrentRequestLimit),this.Da=new su,this.P=Wr&&Wr.fastHandshake||!1,this.O=Wr&&Wr.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=Wr&&Wr.Rb||!1,Wr&&Wr.xa&&this.j.xa(),Wr&&Wr.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&Wr&&Wr.detectBufferingProxy||!1,this.ja=void 0,Wr&&Wr.longPollingTimeout&&0<Wr.longPollingTimeout&&(this.ja=Wr.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}tr=Xl.prototype,tr.la=8,tr.G=1,tr.connect=function(Wr,cn,mn,Tn){Cn(0),this.W=Wr,this.H=cn||{},mn&&Tn!==void 0&&(this.H.OSID=mn,this.H.OAID=Tn),this.F=this.X,this.I=Qr(this,null,this.W),vu(this)};function Ml(Wr){if(Dl(Wr),Wr.G==3){var cn=Wr.U++,mn=jo(Wr.I);if(ho(mn,"SID",Wr.K),ho(mn,"RID",cn),ho(mn,"TYPE","terminate"),Pl(Wr,mn),cn=new Bs(Wr,Wr.j,cn),cn.L=2,cn.v=Ko(jo(mn)),mn=!1,cr.navigator&&cr.navigator.sendBeacon)try{mn=cr.navigator.sendBeacon(cn.v.toString(),"")}catch{}!mn&&cr.Image&&(new Image().src=cn.v,mn=!0),mn||(cn.g=bn(cn.j,null),cn.g.ea(cn.v)),cn.F=Date.now(),ns(cn)}Bu(Wr)}function uu(Wr){Wr.g&&(Lu(Wr),Wr.g.cancel(),Wr.g=null)}function Dl(Wr){uu(Wr),Wr.u&&(cr.clearTimeout(Wr.u),Wr.u=null),du(Wr),Wr.h.cancel(),Wr.s&&(typeof Wr.s=="number"&&cr.clearTimeout(Wr.s),Wr.s=null)}function vu(Wr){if(!Cs(Wr.h)&&!Wr.s){Wr.s=!0;var cn=Wr.Ga;Pr||Mr(),Ar||(Pr(),Ar=!0),Sr.add(cn,Wr),Wr.B=0}}function _u(Wr,cn){return Ns(Wr.h)>=Wr.h.j-(Wr.s?1:0)?!1:Wr.s?(Wr.i=cn.D.concat(Wr.i),!0):Wr.G==1||Wr.G==2||Wr.B>=(Wr.Va?0:Wr.Wa)?!1:(Wr.s=qn(dr(Wr.Ga,Wr,cn),Fu(Wr,Wr.B)),Wr.B++,!0)}tr.Ga=function(Wr){if(this.s)if(this.s=null,this.G==1){if(!Wr){this.U=Math.floor(1e5*Math.random()),Wr=this.U++;const hs=new Bs(this,this.j,Wr);let Es=this.o;if(this.S&&(Es?(Es=Rr(Es),Dr(Es,this.S)):Es=this.S),this.m!==null||this.O||(hs.H=Es,Es=null),this.P)e:{for(var cn=0,mn=0;mn<this.i.length;mn++){t:{var Tn=this.i[mn];if("__data__"in Tn.map&&(Tn=Tn.map.__data__,typeof Tn=="string")){Tn=Tn.length;break t}Tn=void 0}if(Tn===void 0)break;if(cn+=Tn,4096<cn){cn=mn;break e}if(cn===4096||mn===this.i.length-1){cn=mn+1;break e}}cn=1e3}else cn=1e3;cn=Zl(this,hs,cn),mn=jo(this.I),ho(mn,"RID",Wr),ho(mn,"CVER",22),this.D&&ho(mn,"X-HTTP-Session-Id",this.D),Pl(this,mn),Es&&(this.O?cn="headers="+encodeURIComponent(String($l(Es)))+"&"+cn:this.m&&mu(mn,this.m,Es)),js(this.h,hs),this.Ua&&ho(mn,"TYPE","init"),this.P?(ho(mn,"$req",cn),ho(mn,"SID","null"),hs.T=!0,ao(hs,mn,null)):ao(hs,mn,cn),this.G=2}}else this.G==3&&(Wr?Yl(this,Wr):this.i.length==0||Cs(this.h)||Yl(this))};function Yl(Wr,cn){var mn;cn?mn=cn.l:mn=Wr.U++;const Tn=jo(Wr.I);ho(Tn,"SID",Wr.K),ho(Tn,"RID",mn),ho(Tn,"AID",Wr.T),Pl(Wr,Tn),Wr.m&&Wr.o&&mu(Tn,Wr.m,Wr.o),mn=new Bs(Wr,Wr.j,mn,Wr.B+1),Wr.m===null&&(mn.H=Wr.o),cn&&(Wr.i=cn.D.concat(Wr.i)),cn=Zl(Wr,mn,1e3),mn.I=Math.round(.5*Wr.wa)+Math.round(.5*Wr.wa*Math.random()),js(Wr.h,mn),ao(mn,Tn,cn)}function Pl(Wr,cn){Wr.H&&Er(Wr.H,function(mn,Tn){ho(cn,Tn,mn)}),Wr.l&&fo({},function(mn,Tn){ho(cn,Tn,mn)})}function Zl(Wr,cn,mn){mn=Math.min(Wr.i.length,mn);var Tn=Wr.l?dr(Wr.l.Na,Wr.l,Wr):null;e:{var hs=Wr.i;let Es=-1;for(;;){const Gs=["count="+mn];Es==-1?0<mn?(Es=hs[0].g,Gs.push("ofs="+Es)):Es=0:Gs.push("ofs="+Es);let lo=!0;for(let yo=0;yo<mn;yo++){let co=hs[yo].g;const So=hs[yo].map;if(co-=Es,0>co)Es=Math.max(0,hs[yo].g-100),lo=!1;else try{au(So,Gs,"req"+co+"_")}catch{Tn&&Tn(So)}}if(lo){Tn=Gs.join("&");break e}}}return Wr=Wr.i.splice(0,mn),cn.D=Wr,Tn}function wu(Wr){if(!Wr.g&&!Wr.u){Wr.Y=1;var cn=Wr.Fa;Pr||Mr(),Ar||(Pr(),Ar=!0),Sr.add(cn,Wr),Wr.v=0}}function Tu(Wr){return Wr.g||Wr.u||3<=Wr.v?!1:(Wr.Y++,Wr.u=qn(dr(Wr.Fa,Wr),Fu(Wr,Wr.v)),Wr.v++,!0)}tr.Fa=function(){if(this.u=null,rp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var Wr=2*this.R;this.j.info("BP detection timer enabled: "+Wr),this.A=qn(dr(this.ab,this),Wr)}},tr.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cn(10),uu(this),rp(this))};function Lu(Wr){Wr.A!=null&&(cr.clearTimeout(Wr.A),Wr.A=null)}function rp(Wr){Wr.g=new Bs(Wr,Wr.j,"rpc",Wr.Y),Wr.m===null&&(Wr.g.H=Wr.o),Wr.g.O=0;var cn=jo(Wr.qa);ho(cn,"RID","rpc"),ho(cn,"SID",Wr.K),ho(cn,"AID",Wr.T),ho(cn,"CI",Wr.F?"0":"1"),!Wr.F&&Wr.ja&&ho(cn,"TO",Wr.ja),ho(cn,"TYPE","xmlhttp"),Pl(Wr,cn),Wr.m&&Wr.o&&mu(cn,Wr.m,Wr.o),Wr.L&&(Wr.g.I=Wr.L);var mn=Wr.g;Wr=Wr.ia,mn.L=1,mn.v=Ko(jo(cn)),mn.m=null,mn.P=!0,Un(mn,Wr)}tr.Za=function(){this.C!=null&&(this.C=null,uu(this),Tu(this),Cn(19))};function du(Wr){Wr.C!=null&&(cr.clearTimeout(Wr.C),Wr.C=null)}function Eu(Wr,cn){var mn=null;if(Wr.g==cn){du(Wr),Lu(Wr),Wr.g=null;var Tn=2}else if(Ys(Wr.h,cn))mn=cn.D,Js(Wr.h,cn),Tn=1;else return;if(Wr.G!=0){if(cn.o)if(Tn==1){mn=cn.m?cn.m.length:0,cn=Date.now()-cn.F;var hs=Wr.B;Tn=Yn(),yn(Tn,new Zn(Tn,mn)),vu(Wr)}else wu(Wr);else if(hs=cn.s,hs==3||hs==0&&0<cn.X||!(Tn==1&&_u(Wr,cn)||Tn==2&&Tu(Wr)))switch(mn&&0<mn.length&&(cn=Wr.h,cn.i=cn.i.concat(mn)),hs){case 1:Sl(Wr,5);break;case 4:Sl(Wr,10);break;case 3:Sl(Wr,6);break;default:Sl(Wr,2)}}}function Fu(Wr,cn){let mn=Wr.Ta+Math.floor(Math.random()*Wr.cb);return Wr.isActive()||(mn*=2),mn*cn}function Sl(Wr,cn){if(Wr.j.info("Error code "+cn),cn==2){var mn=dr(Wr.fb,Wr),Tn=Wr.Xa;const hs=!Tn;Tn=new go(Tn||"//www.google.com/images/cleardot.gif"),cr.location&&cr.location.protocol=="http"||ro(Tn,"https"),Ko(Tn),hs?Il(Tn.toString(),mn):Du(Tn.toString(),mn)}else Cn(2);Wr.G=0,Wr.l&&Wr.l.sa(cn),Bu(Wr),Dl(Wr)}tr.fb=function(Wr){Wr?(this.j.info("Successfully pinged google.com"),Cn(2)):(this.j.info("Failed to ping google.com"),Cn(1))};function Bu(Wr){if(Wr.G=0,Wr.ka=[],Wr.l){const cn=to(Wr.h);(cn.length!=0||Wr.i.length!=0)&&(pr(Wr.ka,cn),pr(Wr.ka,Wr.i),Wr.h.i.length=0,br(Wr.i),Wr.i.length=0),Wr.l.ra()}}function Qr(Wr,cn,mn){var Tn=mn instanceof go?jo(mn):new go(mn);if(Tn.g!="")cn&&(Tn.g=cn+"."+Tn.g),no(Tn,Tn.s);else{var hs=cr.location;Tn=hs.protocol,cn=cn?cn+"."+hs.hostname:hs.hostname,hs=+hs.port;var Es=new go(null);Tn&&ro(Es,Tn),cn&&(Es.g=cn),hs&&no(Es,hs),mn&&(Es.l=mn),Tn=Es}return mn=Wr.D,cn=Wr.ya,mn&&cn&&ho(Tn,mn,cn),ho(Tn,"VER",Wr.la),Pl(Wr,Tn),Tn}function bn(Wr,cn,mn){if(cn&&!Wr.J)throw Error("Can't create secondary domain capable XhrIo object.");return cn=Wr.Ca&&!Wr.pa?new xo(new ou({eb:mn})):new xo(Wr.pa),cn.Ha(Wr.J),cn}tr.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wn(){}tr=Wn.prototype,tr.ua=function(){},tr.ta=function(){},tr.sa=function(){},tr.ra=function(){},tr.isActive=function(){return!0},tr.Na=function(){};function ts(){}ts.prototype.g=function(Wr,cn){return new ms(Wr,cn)};function ms(Wr,cn){zn.call(this),this.g=new Xl(cn),this.l=Wr,this.h=cn&&cn.messageUrlParams||null,Wr=cn&&cn.messageHeaders||null,cn&&cn.clientProtocolHeaderRequired&&(Wr?Wr["X-Client-Protocol"]="webchannel":Wr={"X-Client-Protocol":"webchannel"}),this.g.o=Wr,Wr=cn&&cn.initMessageHeaders||null,cn&&cn.messageContentType&&(Wr?Wr["X-WebChannel-Content-Type"]=cn.messageContentType:Wr={"X-WebChannel-Content-Type":cn.messageContentType}),cn&&cn.va&&(Wr?Wr["X-WebChannel-Client-Profile"]=cn.va:Wr={"X-WebChannel-Client-Profile":cn.va}),this.g.S=Wr,(Wr=cn&&cn.Sb)&&!yr(Wr)&&(this.g.m=Wr),this.v=cn&&cn.supportsCrossDomainXhr||!1,this.u=cn&&cn.sendRawJson||!1,(cn=cn&&cn.httpSessionIdParam)&&!yr(cn)&&(this.g.D=cn,Wr=this.h,Wr!==null&&cn in Wr&&(Wr=this.h,cn in Wr&&delete Wr[cn])),this.j=new ga(this)}gr(ms,zn),ms.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ms.prototype.close=function(){Ml(this.g)},ms.prototype.o=function(Wr){var cn=this.g;if(typeof Wr=="string"){var mn={};mn.__data__=Wr,Wr=mn}else this.u&&(mn={},mn.__data__=Hn(Wr),Wr=mn);cn.i.push(new Vs(cn.Ya++,Wr)),cn.G==3&&vu(cn)},ms.prototype.N=function(){this.g.l=null,delete this.j,Ml(this.g),delete this.g,ms.aa.N.call(this)};function Ls(Wr){Jn.call(this),Wr.__headers__&&(this.headers=Wr.__headers__,this.statusCode=Wr.__status__,delete Wr.__headers__,delete Wr.__status__);var cn=Wr.__sm__;if(cn){e:{for(const mn in cn){Wr=mn;break e}Wr=void 0}(this.i=Wr)&&(Wr=this.i,cn=cn!==null&&Wr in cn?cn[Wr]:void 0),this.data=cn}else this.data=Wr}gr(Ls,Jn);function Ws(){is.call(this),this.status=1}gr(Ws,is);function ga(Wr){this.g=Wr}gr(ga,Wn),ga.prototype.ua=function(){yn(this.g,"a")},ga.prototype.ta=function(Wr){yn(this.g,new Ls(Wr))},ga.prototype.sa=function(Wr){yn(this.g,new Ws)},ga.prototype.ra=function(){yn(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,ms.prototype.send=ms.prototype.o,ms.prototype.open=ms.prototype.m,ms.prototype.close=ms.prototype.close,createWebChannelTransport=function(){return new ts},getStatEventTarget=function(){return Yn()},Event$1=bs,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,ErrorCode$1=ws,As.COMPLETE="complete",EventType=As,xs.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",zn.prototype.listen=zn.prototype.K,WebChannel=xs,xo.prototype.listenOnce=xo.prototype.L,xo.prototype.getLastError=xo.prototype.Ka,xo.prototype.getLastErrorCode=xo.prototype.Ba,xo.prototype.getStatus=xo.prototype.Z,xo.prototype.getResponseJson=xo.prototype.Oa,xo.prototype.getResponseText=xo.prototype.oa,xo.prototype.send=xo.prototype.ea,xo.prototype.setWithCredentials=xo.prototype.Ha,XhrIo=xo}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const w$1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(er){this.uid=er}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(er){return er.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$1="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$2=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b$2.logLevel}function __PRIVATE_logDebug(tr,...er){if(b$2.logLevel<=LogLevel.DEBUG){const rr=er.map(__PRIVATE_argToString);b$2.debug(`Firestore (${S$1}): ${tr}`,...rr)}}function __PRIVATE_logError(tr,...er){if(b$2.logLevel<=LogLevel.ERROR){const rr=er.map(__PRIVATE_argToString);b$2.error(`Firestore (${S$1}): ${tr}`,...rr)}}function __PRIVATE_logWarn(tr,...er){if(b$2.logLevel<=LogLevel.WARN){const rr=er.map(__PRIVATE_argToString);b$2.warn(`Firestore (${S$1}): ${tr}`,...rr)}}function __PRIVATE_argToString(tr){if(typeof tr=="string")return tr;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(rr){return JSON.stringify(rr)}(tr)}catch{return tr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(tr="Unexpected state"){const er=`FIRESTORE (${S$1}) INTERNAL ASSERTION FAILED: `+tr;throw __PRIVATE_logError(er),new Error(er)}function __PRIVATE_hardAssert(tr,er){tr||fail()}function __PRIVATE_debugCast(tr,er){return tr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(er,rr){super(er,rr),this.code=er,this.message=rr,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((er,rr)=>{this.resolve=er,this.reject=rr})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(er,rr){this.user=rr,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${er}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(er,rr){er.enqueueRetryable(()=>rr(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(er){this.token=er,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(er,rr){this.changeListener=rr,er.enqueueRetryable(()=>rr(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(er){this.t=er,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(er,rr){__PRIVATE_hardAssert(this.o===void 0);let nr=this.i;const ir=lr=>this.i!==nr?(nr=this.i,rr(lr)):Promise.resolve();let sr=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),sr.resolve(),sr=new __PRIVATE_Deferred,er.enqueueRetryable(()=>ir(this.currentUser))};const ar=()=>{const lr=sr;er.enqueueRetryable(async()=>{await lr.promise,await ir(this.currentUser)})},cr=lr=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=lr,this.o&&(this.auth.addAuthTokenListener(this.o),ar())};this.t.onInit(lr=>cr(lr)),setTimeout(()=>{if(!this.auth){const lr=this.t.getImmediate({optional:!0});lr?cr(lr):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),sr.resolve(),sr=new __PRIVATE_Deferred)}},0),ar()}getToken(){const er=this.i,rr=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(rr).then(nr=>this.i!==er?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):nr?(__PRIVATE_hardAssert(typeof nr.accessToken=="string"),new __PRIVATE_OAuthToken(nr.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const er=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(er===null||typeof er=="string"),new User(er)}}class __PRIVATE_FirstPartyToken{constructor(er,rr,nr){this.l=er,this.h=rr,this.P=nr,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const er=this.T();return er&&this.I.set("Authorization",er),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(er,rr,nr){this.l=er,this.h=rr,this.P=nr}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(er,rr){er.enqueueRetryable(()=>rr(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(er){this.value=er,this.type="AppCheck",this.headers=new Map,er&&er.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(er){this.A=er,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(er,rr){__PRIVATE_hardAssert(this.o===void 0);const nr=sr=>{sr.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${sr.error.message}`);const ar=sr.token!==this.R;return this.R=sr.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${ar?"new":"existing"} token.`),ar?rr(sr.token):Promise.resolve()};this.o=sr=>{er.enqueueRetryable(()=>nr(sr))};const ir=sr=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=sr,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(sr=>ir(sr)),setTimeout(()=>{if(!this.appCheck){const sr=this.A.getImmediate({optional:!0});sr?ir(sr):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const er=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(er).then(rr=>rr?(__PRIVATE_hardAssert(typeof rr.token=="string"),this.R=rr.token,new AppCheckToken(rr.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(tr){const er=typeof self<"u"&&(self.crypto||self.msCrypto),rr=new Uint8Array(tr);if(er&&typeof er.getRandomValues=="function")er.getRandomValues(rr);else for(let nr=0;nr<tr;nr++)rr[nr]=Math.floor(256*Math.random());return rr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const er="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",rr=Math.floor(256/er.length)*er.length;let nr="";for(;nr.length<20;){const ir=__PRIVATE_randomBytes(40);for(let sr=0;sr<ir.length;++sr)nr.length<20&&ir[sr]<rr&&(nr+=er.charAt(ir[sr]%er.length))}return nr}}function __PRIVATE_primitiveComparator(tr,er){return tr<er?-1:tr>er?1:0}function __PRIVATE_arrayEquals(tr,er,rr){return tr.length===er.length&&tr.every((nr,ir)=>rr(nr,er[ir]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(er,rr){if(this.seconds=er,this.nanoseconds=rr,rr<0)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+rr);if(rr>=1e9)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+rr);if(er<-62135596800)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+er);if(er>=253402300800)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+er)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(er){return Timestamp.fromMillis(er.getTime())}static fromMillis(er){const rr=Math.floor(er/1e3),nr=Math.floor(1e6*(er-1e3*rr));return new Timestamp(rr,nr)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(er){return this.seconds===er.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,er.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,er.seconds)}isEqual(er){return er.seconds===this.seconds&&er.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const er=this.seconds- -62135596800;return String(er).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(er){this.timestamp=er}static fromTimestamp(er){return new SnapshotVersion(er)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(er){return this.timestamp._compareTo(er.timestamp)}isEqual(er){return this.timestamp.isEqual(er.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(er,rr,nr){rr===void 0?rr=0:rr>er.length&&fail(),nr===void 0?nr=er.length-rr:nr>er.length-rr&&fail(),this.segments=er,this.offset=rr,this.len=nr}get length(){return this.len}isEqual(er){return BasePath.comparator(this,er)===0}child(er){const rr=this.segments.slice(this.offset,this.limit());return er instanceof BasePath?er.forEach(nr=>{rr.push(nr)}):rr.push(er),this.construct(rr)}limit(){return this.offset+this.length}popFirst(er){return er=er===void 0?1:er,this.construct(this.segments,this.offset+er,this.length-er)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(er){return this.segments[this.offset+er]}isEmpty(){return this.length===0}isPrefixOf(er){if(er.length<this.length)return!1;for(let rr=0;rr<this.length;rr++)if(this.get(rr)!==er.get(rr))return!1;return!0}isImmediateParentOf(er){if(this.length+1!==er.length)return!1;for(let rr=0;rr<this.length;rr++)if(this.get(rr)!==er.get(rr))return!1;return!0}forEach(er){for(let rr=this.offset,nr=this.limit();rr<nr;rr++)er(this.segments[rr])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(er,rr){const nr=Math.min(er.length,rr.length);for(let ir=0;ir<nr;ir++){const sr=er.get(ir),ar=rr.get(ir);if(sr<ar)return-1;if(sr>ar)return 1}return er.length<rr.length?-1:er.length>rr.length?1:0}}class ResourcePath extends BasePath{construct(er,rr,nr){return new ResourcePath(er,rr,nr)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...er){const rr=[];for(const nr of er){if(nr.indexOf("//")>=0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid segment (${nr}). Paths must not contain // in them.`);rr.push(...nr.split("/").filter(ir=>ir.length>0))}return new ResourcePath(rr)}static emptyPath(){return new ResourcePath([])}}const v$2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(er,rr,nr){return new FieldPath$1(er,rr,nr)}static isValidIdentifier(er){return v$2.test(er)}canonicalString(){return this.toArray().map(er=>(er=er.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(er)||(er="`"+er+"`"),er)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(er){const rr=[];let nr="",ir=0;const sr=()=>{if(nr.length===0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid field path (${er}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);rr.push(nr),nr=""};let ar=!1;for(;ir<er.length;){const cr=er[ir];if(cr==="\\"){if(ir+1===er.length)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Path has trailing escape character: "+er);const lr=er[ir+1];if(lr!=="\\"&&lr!=="."&&lr!=="`")throw new FirestoreError(D$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+er);nr+=lr,ir+=2}else cr==="`"?(ar=!ar,ir++):cr!=="."||ar?(nr+=cr,ir++):(sr(),ir++)}if(sr(),ar)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Unterminated ` in path: "+er);return new FieldPath$1(rr)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(er){this.path=er}static fromPath(er){return new DocumentKey(ResourcePath.fromString(er))}static fromName(er){return new DocumentKey(ResourcePath.fromString(er).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(er){return this.path.length>=2&&this.path.get(this.path.length-2)===er}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(er){return er!==null&&ResourcePath.comparator(this.path,er.path)===0}toString(){return this.path.toString()}static comparator(er,rr){return ResourcePath.comparator(er.path,rr.path)}static isDocumentKey(er){return er.length%2==0}static fromSegments(er){return new DocumentKey(new ResourcePath(er.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(tr,er){const rr=tr.toTimestamp().seconds,nr=tr.toTimestamp().nanoseconds+1,ir=SnapshotVersion.fromTimestamp(nr===1e9?new Timestamp(rr+1,0):new Timestamp(rr,nr));return new IndexOffset(ir,DocumentKey.empty(),er)}function __PRIVATE_newIndexOffsetFromDocument(tr){return new IndexOffset(tr.readTime,tr.key,-1)}class IndexOffset{constructor(er,rr,nr){this.readTime=er,this.documentKey=rr,this.largestBatchId=nr}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator(tr,er){let rr=tr.readTime.compareTo(er.readTime);return rr!==0?rr:(rr=DocumentKey.comparator(tr.documentKey,er.documentKey),rr!==0?rr:__PRIVATE_primitiveComparator(tr.largestBatchId,er.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(er){this.onCommittedListeners.push(er)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(er=>er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(tr){if(tr.code!==D$1.FAILED_PRECONDITION||tr.message!==C$1)throw tr;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(er){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,er(rr=>{this.isDone=!0,this.result=rr,this.nextCallback&&this.nextCallback(rr)},rr=>{this.isDone=!0,this.error=rr,this.catchCallback&&this.catchCallback(rr)})}catch(er){return this.next(void 0,er)}next(er,rr){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(rr,this.error):this.wrapSuccess(er,this.result):new PersistencePromise((nr,ir)=>{this.nextCallback=sr=>{this.wrapSuccess(er,sr).next(nr,ir)},this.catchCallback=sr=>{this.wrapFailure(rr,sr).next(nr,ir)}})}toPromise(){return new Promise((er,rr)=>{this.next(er,rr)})}wrapUserFunction(er){try{const rr=er();return rr instanceof PersistencePromise?rr:PersistencePromise.resolve(rr)}catch(rr){return PersistencePromise.reject(rr)}}wrapSuccess(er,rr){return er?this.wrapUserFunction(()=>er(rr)):PersistencePromise.resolve(rr)}wrapFailure(er,rr){return er?this.wrapUserFunction(()=>er(rr)):PersistencePromise.reject(rr)}static resolve(er){return new PersistencePromise((rr,nr)=>{rr(er)})}static reject(er){return new PersistencePromise((rr,nr)=>{nr(er)})}static waitFor(er){return new PersistencePromise((rr,nr)=>{let ir=0,sr=0,ar=!1;er.forEach(cr=>{++ir,cr.next(()=>{++sr,ar&&sr===ir&&rr()},lr=>nr(lr))}),ar=!0,sr===ir&&rr()})}static or(er){let rr=PersistencePromise.resolve(!1);for(const nr of er)rr=rr.next(ir=>ir?PersistencePromise.resolve(ir):nr());return rr}static forEach(er,rr){const nr=[];return er.forEach((ir,sr)=>{nr.push(rr.call(this,ir,sr))}),this.waitFor(nr)}static mapArray(er,rr){return new PersistencePromise((nr,ir)=>{const sr=er.length,ar=new Array(sr);let cr=0;for(let lr=0;lr<sr;lr++){const or=lr;rr(er[or]).next(ur=>{ar[or]=ur,++cr,cr===sr&&nr(ar)},ur=>ir(ur))}})}static doWhile(er,rr){return new PersistencePromise((nr,ir)=>{const sr=()=>{er()===!0?rr().next(()=>{sr()},ir):nr()};sr()})}}function __PRIVATE_getAndroidVersion(tr){const er=tr.match(/Android ([\d.]+)/i),rr=er?er[1].split(".").slice(0,2).join("."):"-1";return Number(rr)}function __PRIVATE_isIndexedDbTransactionError(tr){return tr.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(er,rr){this.previousValue=er,rr&&(rr.sequenceNumberHandler=nr=>this.ie(nr),this.se=nr=>rr.writeSequenceNumber(nr))}ie(er){return this.previousValue=Math.max(er,this.previousValue),this.previousValue}next(){const er=++this.previousValue;return this.se&&this.se(er),er}}__PRIVATE_ListenSequence.oe=-1;function __PRIVATE_isNullOrUndefined(tr){return tr==null}function __PRIVATE_isNegativeZero(tr){return tr===0&&1/tr==-1/0}function isSafeInteger(tr){return typeof tr=="number"&&Number.isInteger(tr)&&!__PRIVATE_isNegativeZero(tr)&&tr<=Number.MAX_SAFE_INTEGER&&tr>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(tr){let er=0;for(const rr in tr)Object.prototype.hasOwnProperty.call(tr,rr)&&er++;return er}function forEach(tr,er){for(const rr in tr)Object.prototype.hasOwnProperty.call(tr,rr)&&er(rr,tr[rr])}function isEmpty(tr){for(const er in tr)if(Object.prototype.hasOwnProperty.call(tr,er))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(er,rr){this.comparator=er,this.root=rr||LLRBNode.EMPTY}insert(er,rr){return new SortedMap(this.comparator,this.root.insert(er,rr,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(er){return new SortedMap(this.comparator,this.root.remove(er,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(er){let rr=this.root;for(;!rr.isEmpty();){const nr=this.comparator(er,rr.key);if(nr===0)return rr.value;nr<0?rr=rr.left:nr>0&&(rr=rr.right)}return null}indexOf(er){let rr=0,nr=this.root;for(;!nr.isEmpty();){const ir=this.comparator(er,nr.key);if(ir===0)return rr+nr.left.size;ir<0?nr=nr.left:(rr+=nr.left.size+1,nr=nr.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(er){return this.root.inorderTraversal(er)}forEach(er){this.inorderTraversal((rr,nr)=>(er(rr,nr),!1))}toString(){const er=[];return this.inorderTraversal((rr,nr)=>(er.push(`${rr}:${nr}`),!1)),`{${er.join(", ")}}`}reverseTraversal(er){return this.root.reverseTraversal(er)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(er){return new SortedMapIterator(this.root,er,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(er){return new SortedMapIterator(this.root,er,this.comparator,!0)}}class SortedMapIterator{constructor(er,rr,nr,ir){this.isReverse=ir,this.nodeStack=[];let sr=1;for(;!er.isEmpty();)if(sr=rr?nr(er.key,rr):1,rr&&ir&&(sr*=-1),sr<0)er=this.isReverse?er.left:er.right;else{if(sr===0){this.nodeStack.push(er);break}this.nodeStack.push(er),er=this.isReverse?er.right:er.left}}getNext(){let er=this.nodeStack.pop();const rr={key:er.key,value:er.value};if(this.isReverse)for(er=er.left;!er.isEmpty();)this.nodeStack.push(er),er=er.right;else for(er=er.right;!er.isEmpty();)this.nodeStack.push(er),er=er.left;return rr}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const er=this.nodeStack[this.nodeStack.length-1];return{key:er.key,value:er.value}}}class LLRBNode{constructor(er,rr,nr,ir,sr){this.key=er,this.value=rr,this.color=nr??LLRBNode.RED,this.left=ir??LLRBNode.EMPTY,this.right=sr??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(er,rr,nr,ir,sr){return new LLRBNode(er??this.key,rr??this.value,nr??this.color,ir??this.left,sr??this.right)}isEmpty(){return!1}inorderTraversal(er){return this.left.inorderTraversal(er)||er(this.key,this.value)||this.right.inorderTraversal(er)}reverseTraversal(er){return this.right.reverseTraversal(er)||er(this.key,this.value)||this.left.reverseTraversal(er)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(er,rr,nr){let ir=this;const sr=nr(er,ir.key);return ir=sr<0?ir.copy(null,null,null,ir.left.insert(er,rr,nr),null):sr===0?ir.copy(null,rr,null,null,null):ir.copy(null,null,null,null,ir.right.insert(er,rr,nr)),ir.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let er=this;return er.left.isRed()||er.left.left.isRed()||(er=er.moveRedLeft()),er=er.copy(null,null,null,er.left.removeMin(),null),er.fixUp()}remove(er,rr){let nr,ir=this;if(rr(er,ir.key)<0)ir.left.isEmpty()||ir.left.isRed()||ir.left.left.isRed()||(ir=ir.moveRedLeft()),ir=ir.copy(null,null,null,ir.left.remove(er,rr),null);else{if(ir.left.isRed()&&(ir=ir.rotateRight()),ir.right.isEmpty()||ir.right.isRed()||ir.right.left.isRed()||(ir=ir.moveRedRight()),rr(er,ir.key)===0){if(ir.right.isEmpty())return LLRBNode.EMPTY;nr=ir.right.min(),ir=ir.copy(nr.key,nr.value,null,null,ir.right.removeMin())}ir=ir.copy(null,null,null,null,ir.right.remove(er,rr))}return ir.fixUp()}isRed(){return this.color}fixUp(){let er=this;return er.right.isRed()&&!er.left.isRed()&&(er=er.rotateLeft()),er.left.isRed()&&er.left.left.isRed()&&(er=er.rotateRight()),er.left.isRed()&&er.right.isRed()&&(er=er.colorFlip()),er}moveRedLeft(){let er=this.colorFlip();return er.right.left.isRed()&&(er=er.copy(null,null,null,null,er.right.rotateRight()),er=er.rotateLeft(),er=er.colorFlip()),er}moveRedRight(){let er=this.colorFlip();return er.left.left.isRed()&&(er=er.rotateRight(),er=er.colorFlip()),er}rotateLeft(){const er=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,er,null)}rotateRight(){const er=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,er)}colorFlip(){const er=this.left.copy(null,null,!this.left.color,null,null),rr=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,er,rr)}checkMaxDepth(){const er=this.check();return Math.pow(2,er)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const er=this.left.check();if(er!==this.right.check())throw fail();return er+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(er,rr,nr,ir,sr){return this}insert(er,rr,nr){return new LLRBNode(er,rr)}remove(er,rr){return this}isEmpty(){return!0}inorderTraversal(er){return!1}reverseTraversal(er){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(er){this.comparator=er,this.data=new SortedMap(this.comparator)}has(er){return this.data.get(er)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(er){return this.data.indexOf(er)}forEach(er){this.data.inorderTraversal((rr,nr)=>(er(rr),!1))}forEachInRange(er,rr){const nr=this.data.getIteratorFrom(er[0]);for(;nr.hasNext();){const ir=nr.getNext();if(this.comparator(ir.key,er[1])>=0)return;rr(ir.key)}}forEachWhile(er,rr){let nr;for(nr=rr!==void 0?this.data.getIteratorFrom(rr):this.data.getIterator();nr.hasNext();)if(!er(nr.getNext().key))return}firstAfterOrEqual(er){const rr=this.data.getIteratorFrom(er);return rr.hasNext()?rr.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(er){return new SortedSetIterator(this.data.getIteratorFrom(er))}add(er){return this.copy(this.data.remove(er).insert(er,!0))}delete(er){return this.has(er)?this.copy(this.data.remove(er)):this}isEmpty(){return this.data.isEmpty()}unionWith(er){let rr=this;return rr.size<er.size&&(rr=er,er=this),er.forEach(nr=>{rr=rr.add(nr)}),rr}isEqual(er){if(!(er instanceof SortedSet)||this.size!==er.size)return!1;const rr=this.data.getIterator(),nr=er.data.getIterator();for(;rr.hasNext();){const ir=rr.getNext().key,sr=nr.getNext().key;if(this.comparator(ir,sr)!==0)return!1}return!0}toArray(){const er=[];return this.forEach(rr=>{er.push(rr)}),er}toString(){const er=[];return this.forEach(rr=>er.push(rr)),"SortedSet("+er.toString()+")"}copy(er){const rr=new SortedSet(this.comparator);return rr.data=er,rr}}class SortedSetIterator{constructor(er){this.iter=er}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(er){this.fields=er,er.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(er){let rr=new SortedSet(FieldPath$1.comparator);for(const nr of this.fields)rr=rr.add(nr);for(const nr of er)rr=rr.add(nr);return new FieldMask(rr.toArray())}covers(er){for(const rr of this.fields)if(rr.isPrefixOf(er))return!0;return!1}isEqual(er){return __PRIVATE_arrayEquals(this.fields,er.fields,(rr,nr)=>rr.isEqual(nr))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(er){this.binaryString=er}static fromBase64String(er){const rr=function(ir){try{return atob(ir)}catch(sr){throw typeof DOMException<"u"&&sr instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+sr):sr}}(er);return new ByteString(rr)}static fromUint8Array(er){const rr=function(ir){let sr="";for(let ar=0;ar<ir.length;++ar)sr+=String.fromCharCode(ir[ar]);return sr}(er);return new ByteString(rr)}[Symbol.iterator](){let er=0;return{next:()=>er<this.binaryString.length?{value:this.binaryString.charCodeAt(er++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(rr){return btoa(rr)}(this.binaryString)}toUint8Array(){return function(rr){const nr=new Uint8Array(rr.length);for(let ir=0;ir<rr.length;ir++)nr[ir]=rr.charCodeAt(ir);return nr}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(er){return __PRIVATE_primitiveComparator(this.binaryString,er.binaryString)}isEqual(er){return this.binaryString===er.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ne$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(tr){if(__PRIVATE_hardAssert(!!tr),typeof tr=="string"){let er=0;const rr=ne$1.exec(tr);if(__PRIVATE_hardAssert(!!rr),rr[1]){let ir=rr[1];ir=(ir+"000000000").substr(0,9),er=Number(ir)}const nr=new Date(tr);return{seconds:Math.floor(nr.getTime()/1e3),nanos:er}}return{seconds:__PRIVATE_normalizeNumber(tr.seconds),nanos:__PRIVATE_normalizeNumber(tr.nanos)}}function __PRIVATE_normalizeNumber(tr){return typeof tr=="number"?tr:typeof tr=="string"?Number(tr):0}function __PRIVATE_normalizeByteString(tr){return typeof tr=="string"?ByteString.fromBase64String(tr):ByteString.fromUint8Array(tr)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(tr){var er,rr;return((rr=(((er=tr==null?void 0:tr.mapValue)===null||er===void 0?void 0:er.fields)||{}).__type__)===null||rr===void 0?void 0:rr.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue(tr){const er=tr.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(er)?__PRIVATE_getPreviousValue(er):er}function __PRIVATE_getLocalWriteTime(tr){const er=__PRIVATE_normalizeTimestamp(tr.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(er.seconds,er.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(er,rr,nr,ir,sr,ar,cr,lr,or){this.databaseId=er,this.appId=rr,this.persistenceKey=nr,this.host=ir,this.ssl=sr,this.forceLongPolling=ar,this.autoDetectLongPolling=cr,this.longPollingOptions=lr,this.useFetchStreams=or}}class DatabaseId{constructor(er,rr){this.projectId=er,this.database=rr||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(er){return er instanceof DatabaseId&&er.projectId===this.projectId&&er.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re$2={mapValue:{}};function __PRIVATE_typeOrder(tr){return"nullValue"in tr?0:"booleanValue"in tr?1:"integerValue"in tr||"doubleValue"in tr?2:"timestampValue"in tr?3:"stringValue"in tr?5:"bytesValue"in tr?6:"referenceValue"in tr?7:"geoPointValue"in tr?8:"arrayValue"in tr?9:"mapValue"in tr?__PRIVATE_isServerTimestamp(tr)?4:__PRIVATE_isMaxValue(tr)?9007199254740991:__PRIVATE_isVectorValue(tr)?10:11:fail()}function __PRIVATE_valueEquals(tr,er){if(tr===er)return!0;const rr=__PRIVATE_typeOrder(tr);if(rr!==__PRIVATE_typeOrder(er))return!1;switch(rr){case 0:case 9007199254740991:return!0;case 1:return tr.booleanValue===er.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(tr).isEqual(__PRIVATE_getLocalWriteTime(er));case 3:return function(ir,sr){if(typeof ir.timestampValue=="string"&&typeof sr.timestampValue=="string"&&ir.timestampValue.length===sr.timestampValue.length)return ir.timestampValue===sr.timestampValue;const ar=__PRIVATE_normalizeTimestamp(ir.timestampValue),cr=__PRIVATE_normalizeTimestamp(sr.timestampValue);return ar.seconds===cr.seconds&&ar.nanos===cr.nanos}(tr,er);case 5:return tr.stringValue===er.stringValue;case 6:return function(ir,sr){return __PRIVATE_normalizeByteString(ir.bytesValue).isEqual(__PRIVATE_normalizeByteString(sr.bytesValue))}(tr,er);case 7:return tr.referenceValue===er.referenceValue;case 8:return function(ir,sr){return __PRIVATE_normalizeNumber(ir.geoPointValue.latitude)===__PRIVATE_normalizeNumber(sr.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(ir.geoPointValue.longitude)===__PRIVATE_normalizeNumber(sr.geoPointValue.longitude)}(tr,er);case 2:return function(ir,sr){if("integerValue"in ir&&"integerValue"in sr)return __PRIVATE_normalizeNumber(ir.integerValue)===__PRIVATE_normalizeNumber(sr.integerValue);if("doubleValue"in ir&&"doubleValue"in sr){const ar=__PRIVATE_normalizeNumber(ir.doubleValue),cr=__PRIVATE_normalizeNumber(sr.doubleValue);return ar===cr?__PRIVATE_isNegativeZero(ar)===__PRIVATE_isNegativeZero(cr):isNaN(ar)&&isNaN(cr)}return!1}(tr,er);case 9:return __PRIVATE_arrayEquals(tr.arrayValue.values||[],er.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(ir,sr){const ar=ir.mapValue.fields||{},cr=sr.mapValue.fields||{};if(__PRIVATE_objectSize(ar)!==__PRIVATE_objectSize(cr))return!1;for(const lr in ar)if(ar.hasOwnProperty(lr)&&(cr[lr]===void 0||!__PRIVATE_valueEquals(ar[lr],cr[lr])))return!1;return!0}(tr,er);default:return fail()}}function __PRIVATE_arrayValueContains(tr,er){return(tr.values||[]).find(rr=>__PRIVATE_valueEquals(rr,er))!==void 0}function __PRIVATE_valueCompare(tr,er){if(tr===er)return 0;const rr=__PRIVATE_typeOrder(tr),nr=__PRIVATE_typeOrder(er);if(rr!==nr)return __PRIVATE_primitiveComparator(rr,nr);switch(rr){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(tr.booleanValue,er.booleanValue);case 2:return function(sr,ar){const cr=__PRIVATE_normalizeNumber(sr.integerValue||sr.doubleValue),lr=__PRIVATE_normalizeNumber(ar.integerValue||ar.doubleValue);return cr<lr?-1:cr>lr?1:cr===lr?0:isNaN(cr)?isNaN(lr)?0:-1:1}(tr,er);case 3:return __PRIVATE_compareTimestamps(tr.timestampValue,er.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(tr),__PRIVATE_getLocalWriteTime(er));case 5:return __PRIVATE_primitiveComparator(tr.stringValue,er.stringValue);case 6:return function(sr,ar){const cr=__PRIVATE_normalizeByteString(sr),lr=__PRIVATE_normalizeByteString(ar);return cr.compareTo(lr)}(tr.bytesValue,er.bytesValue);case 7:return function(sr,ar){const cr=sr.split("/"),lr=ar.split("/");for(let or=0;or<cr.length&&or<lr.length;or++){const ur=__PRIVATE_primitiveComparator(cr[or],lr[or]);if(ur!==0)return ur}return __PRIVATE_primitiveComparator(cr.length,lr.length)}(tr.referenceValue,er.referenceValue);case 8:return function(sr,ar){const cr=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(sr.latitude),__PRIVATE_normalizeNumber(ar.latitude));return cr!==0?cr:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(sr.longitude),__PRIVATE_normalizeNumber(ar.longitude))}(tr.geoPointValue,er.geoPointValue);case 9:return __PRIVATE_compareArrays(tr.arrayValue,er.arrayValue);case 10:return function(sr,ar){var cr,lr,or,ur;const hr=sr.fields||{},dr=ar.fields||{},fr=(cr=hr.value)===null||cr===void 0?void 0:cr.arrayValue,gr=(lr=dr.value)===null||lr===void 0?void 0:lr.arrayValue,br=__PRIVATE_primitiveComparator(((or=fr==null?void 0:fr.values)===null||or===void 0?void 0:or.length)||0,((ur=gr==null?void 0:gr.values)===null||ur===void 0?void 0:ur.length)||0);return br!==0?br:__PRIVATE_compareArrays(fr,gr)}(tr.mapValue,er.mapValue);case 11:return function(sr,ar){if(sr===re$2.mapValue&&ar===re$2.mapValue)return 0;if(sr===re$2.mapValue)return 1;if(ar===re$2.mapValue)return-1;const cr=sr.fields||{},lr=Object.keys(cr),or=ar.fields||{},ur=Object.keys(or);lr.sort(),ur.sort();for(let hr=0;hr<lr.length&&hr<ur.length;++hr){const dr=__PRIVATE_primitiveComparator(lr[hr],ur[hr]);if(dr!==0)return dr;const fr=__PRIVATE_valueCompare(cr[lr[hr]],or[ur[hr]]);if(fr!==0)return fr}return __PRIVATE_primitiveComparator(lr.length,ur.length)}(tr.mapValue,er.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(tr,er){if(typeof tr=="string"&&typeof er=="string"&&tr.length===er.length)return __PRIVATE_primitiveComparator(tr,er);const rr=__PRIVATE_normalizeTimestamp(tr),nr=__PRIVATE_normalizeTimestamp(er),ir=__PRIVATE_primitiveComparator(rr.seconds,nr.seconds);return ir!==0?ir:__PRIVATE_primitiveComparator(rr.nanos,nr.nanos)}function __PRIVATE_compareArrays(tr,er){const rr=tr.values||[],nr=er.values||[];for(let ir=0;ir<rr.length&&ir<nr.length;++ir){const sr=__PRIVATE_valueCompare(rr[ir],nr[ir]);if(sr)return sr}return __PRIVATE_primitiveComparator(rr.length,nr.length)}function canonicalId(tr){return __PRIVATE_canonifyValue(tr)}function __PRIVATE_canonifyValue(tr){return"nullValue"in tr?"null":"booleanValue"in tr?""+tr.booleanValue:"integerValue"in tr?""+tr.integerValue:"doubleValue"in tr?""+tr.doubleValue:"timestampValue"in tr?function(rr){const nr=__PRIVATE_normalizeTimestamp(rr);return`time(${nr.seconds},${nr.nanos})`}(tr.timestampValue):"stringValue"in tr?tr.stringValue:"bytesValue"in tr?function(rr){return __PRIVATE_normalizeByteString(rr).toBase64()}(tr.bytesValue):"referenceValue"in tr?function(rr){return DocumentKey.fromName(rr).toString()}(tr.referenceValue):"geoPointValue"in tr?function(rr){return`geo(${rr.latitude},${rr.longitude})`}(tr.geoPointValue):"arrayValue"in tr?function(rr){let nr="[",ir=!0;for(const sr of rr.values||[])ir?ir=!1:nr+=",",nr+=__PRIVATE_canonifyValue(sr);return nr+"]"}(tr.arrayValue):"mapValue"in tr?function(rr){const nr=Object.keys(rr.fields||{}).sort();let ir="{",sr=!0;for(const ar of nr)sr?sr=!1:ir+=",",ir+=`${ar}:${__PRIVATE_canonifyValue(rr.fields[ar])}`;return ir+"}"}(tr.mapValue):fail()}function __PRIVATE_refValue(tr,er){return{referenceValue:`projects/${tr.projectId}/databases/${tr.database}/documents/${er.path.canonicalString()}`}}function isInteger(tr){return!!tr&&"integerValue"in tr}function isArray$f(tr){return!!tr&&"arrayValue"in tr}function __PRIVATE_isNullValue(tr){return!!tr&&"nullValue"in tr}function __PRIVATE_isNanValue(tr){return!!tr&&"doubleValue"in tr&&isNaN(Number(tr.doubleValue))}function __PRIVATE_isMapValue(tr){return!!tr&&"mapValue"in tr}function __PRIVATE_isVectorValue(tr){var er,rr;return((rr=(((er=tr==null?void 0:tr.mapValue)===null||er===void 0?void 0:er.fields)||{}).__type__)===null||rr===void 0?void 0:rr.stringValue)==="__vector__"}function __PRIVATE_deepClone(tr){if(tr.geoPointValue)return{geoPointValue:Object.assign({},tr.geoPointValue)};if(tr.timestampValue&&typeof tr.timestampValue=="object")return{timestampValue:Object.assign({},tr.timestampValue)};if(tr.mapValue){const er={mapValue:{fields:{}}};return forEach(tr.mapValue.fields,(rr,nr)=>er.mapValue.fields[rr]=__PRIVATE_deepClone(nr)),er}if(tr.arrayValue){const er={arrayValue:{values:[]}};for(let rr=0;rr<(tr.arrayValue.values||[]).length;++rr)er.arrayValue.values[rr]=__PRIVATE_deepClone(tr.arrayValue.values[rr]);return er}return Object.assign({},tr)}function __PRIVATE_isMaxValue(tr){return(((tr.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(er){this.value=er}static empty(){return new ObjectValue({mapValue:{}})}field(er){if(er.isEmpty())return this.value;{let rr=this.value;for(let nr=0;nr<er.length-1;++nr)if(rr=(rr.mapValue.fields||{})[er.get(nr)],!__PRIVATE_isMapValue(rr))return null;return rr=(rr.mapValue.fields||{})[er.lastSegment()],rr||null}}set(er,rr){this.getFieldsMap(er.popLast())[er.lastSegment()]=__PRIVATE_deepClone(rr)}setAll(er){let rr=FieldPath$1.emptyPath(),nr={},ir=[];er.forEach((ar,cr)=>{if(!rr.isImmediateParentOf(cr)){const lr=this.getFieldsMap(rr);this.applyChanges(lr,nr,ir),nr={},ir=[],rr=cr.popLast()}ar?nr[cr.lastSegment()]=__PRIVATE_deepClone(ar):ir.push(cr.lastSegment())});const sr=this.getFieldsMap(rr);this.applyChanges(sr,nr,ir)}delete(er){const rr=this.field(er.popLast());__PRIVATE_isMapValue(rr)&&rr.mapValue.fields&&delete rr.mapValue.fields[er.lastSegment()]}isEqual(er){return __PRIVATE_valueEquals(this.value,er.value)}getFieldsMap(er){let rr=this.value;rr.mapValue.fields||(rr.mapValue={fields:{}});for(let nr=0;nr<er.length;++nr){let ir=rr.mapValue.fields[er.get(nr)];__PRIVATE_isMapValue(ir)&&ir.mapValue.fields||(ir={mapValue:{fields:{}}},rr.mapValue.fields[er.get(nr)]=ir),rr=ir}return rr.mapValue.fields}applyChanges(er,rr,nr){forEach(rr,(ir,sr)=>er[ir]=sr);for(const ir of nr)delete er[ir]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(tr){const er=[];return forEach(tr.fields,(rr,nr)=>{const ir=new FieldPath$1([rr]);if(__PRIVATE_isMapValue(nr)){const sr=__PRIVATE_extractFieldMask(nr.mapValue).fields;if(sr.length===0)er.push(ir);else for(const ar of sr)er.push(ir.child(ar))}else er.push(ir)}),new FieldMask(er)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(er,rr,nr,ir,sr,ar,cr){this.key=er,this.documentType=rr,this.version=nr,this.readTime=ir,this.createTime=sr,this.data=ar,this.documentState=cr}static newInvalidDocument(er){return new MutableDocument(er,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(er,rr,nr,ir){return new MutableDocument(er,1,rr,SnapshotVersion.min(),nr,ir,0)}static newNoDocument(er,rr){return new MutableDocument(er,2,rr,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(er,rr){return new MutableDocument(er,3,rr,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(er,rr){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=er),this.version=er,this.documentType=1,this.data=rr,this.documentState=0,this}convertToNoDocument(er){return this.version=er,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(er){return this.version=er,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(er){return this.readTime=er,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(er){return er instanceof MutableDocument&&this.key.isEqual(er.key)&&this.version.isEqual(er.version)&&this.documentType===er.documentType&&this.documentState===er.documentState&&this.data.isEqual(er.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(er,rr){this.position=er,this.inclusive=rr}}function __PRIVATE_boundCompareToDocument(tr,er,rr){let nr=0;for(let ir=0;ir<tr.position.length;ir++){const sr=er[ir],ar=tr.position[ir];if(sr.field.isKeyField()?nr=DocumentKey.comparator(DocumentKey.fromName(ar.referenceValue),rr.key):nr=__PRIVATE_valueCompare(ar,rr.data.field(sr.field)),sr.dir==="desc"&&(nr*=-1),nr!==0)break}return nr}function __PRIVATE_boundEquals(tr,er){if(tr===null)return er===null;if(er===null||tr.inclusive!==er.inclusive||tr.position.length!==er.position.length)return!1;for(let rr=0;rr<tr.position.length;rr++)if(!__PRIVATE_valueEquals(tr.position[rr],er.position[rr]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(er,rr="asc"){this.field=er,this.dir=rr}}function __PRIVATE_orderByEquals(tr,er){return tr.dir===er.dir&&tr.field.isEqual(er.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Filter$1=class{};class FieldFilter extends Filter$1{constructor(er,rr,nr){super(),this.field=er,this.op=rr,this.value=nr}static create(er,rr,nr){return er.isKeyField()?rr==="in"||rr==="not-in"?this.createKeyFieldInFilter(er,rr,nr):new __PRIVATE_KeyFieldFilter(er,rr,nr):rr==="array-contains"?new __PRIVATE_ArrayContainsFilter(er,nr):rr==="in"?new __PRIVATE_InFilter(er,nr):rr==="not-in"?new __PRIVATE_NotInFilter(er,nr):rr==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(er,nr):new FieldFilter(er,rr,nr)}static createKeyFieldInFilter(er,rr,nr){return rr==="in"?new __PRIVATE_KeyFieldInFilter(er,nr):new __PRIVATE_KeyFieldNotInFilter(er,nr)}matches(er){const rr=er.data.field(this.field);return this.op==="!="?rr!==null&&this.matchesComparison(__PRIVATE_valueCompare(rr,this.value)):rr!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(rr)&&this.matchesComparison(__PRIVATE_valueCompare(rr,this.value))}matchesComparison(er){switch(this.op){case"<":return er<0;case"<=":return er<=0;case"==":return er===0;case"!=":return er!==0;case">":return er>0;case">=":return er>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter$1{constructor(er,rr){super(),this.filters=er,this.op=rr,this.ae=null}static create(er,rr){return new CompositeFilter(er,rr)}matches(er){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(rr=>!rr.matches(er))===void 0:this.filters.find(rr=>rr.matches(er))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((er,rr)=>er.concat(rr.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(tr){return tr.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(tr){return __PRIVATE_compositeFilterIsFlat(tr)&&__PRIVATE_compositeFilterIsConjunction(tr)}function __PRIVATE_compositeFilterIsFlat(tr){for(const er of tr.filters)if(er instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(tr){if(tr instanceof FieldFilter)return tr.field.canonicalString()+tr.op.toString()+canonicalId(tr.value);if(__PRIVATE_compositeFilterIsFlatConjunction(tr))return tr.filters.map(er=>__PRIVATE_canonifyFilter(er)).join(",");{const er=tr.filters.map(rr=>__PRIVATE_canonifyFilter(rr)).join(",");return`${tr.op}(${er})`}}function __PRIVATE_filterEquals(tr,er){return tr instanceof FieldFilter?function(nr,ir){return ir instanceof FieldFilter&&nr.op===ir.op&&nr.field.isEqual(ir.field)&&__PRIVATE_valueEquals(nr.value,ir.value)}(tr,er):tr instanceof CompositeFilter?function(nr,ir){return ir instanceof CompositeFilter&&nr.op===ir.op&&nr.filters.length===ir.filters.length?nr.filters.reduce((sr,ar,cr)=>sr&&__PRIVATE_filterEquals(ar,ir.filters[cr]),!0):!1}(tr,er):void fail()}function __PRIVATE_stringifyFilter(tr){return tr instanceof FieldFilter?function(rr){return`${rr.field.canonicalString()} ${rr.op} ${canonicalId(rr.value)}`}(tr):tr instanceof CompositeFilter?function(rr){return rr.op.toString()+" {"+rr.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(tr):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(er,rr,nr){super(er,rr,nr),this.key=DocumentKey.fromName(nr.referenceValue)}matches(er){const rr=DocumentKey.comparator(er.key,this.key);return this.matchesComparison(rr)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(er,rr){super(er,"in",rr),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",rr)}matches(er){return this.keys.some(rr=>rr.isEqual(er.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(er,rr){super(er,"not-in",rr),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",rr)}matches(er){return!this.keys.some(rr=>rr.isEqual(er.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(tr,er){var rr;return(((rr=er.arrayValue)===null||rr===void 0?void 0:rr.values)||[]).map(nr=>DocumentKey.fromName(nr.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(er,rr){super(er,"array-contains",rr)}matches(er){const rr=er.data.field(this.field);return isArray$f(rr)&&__PRIVATE_arrayValueContains(rr.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(er,rr){super(er,"in",rr)}matches(er){const rr=er.data.field(this.field);return rr!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,rr)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(er,rr){super(er,"not-in",rr)}matches(er){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const rr=er.data.field(this.field);return rr!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,rr)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(er,rr){super(er,"array-contains-any",rr)}matches(er){const rr=er.data.field(this.field);return!(!isArray$f(rr)||!rr.arrayValue.values)&&rr.arrayValue.values.some(nr=>__PRIVATE_arrayValueContains(this.value.arrayValue,nr))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(er,rr=null,nr=[],ir=[],sr=null,ar=null,cr=null){this.path=er,this.collectionGroup=rr,this.orderBy=nr,this.filters=ir,this.limit=sr,this.startAt=ar,this.endAt=cr,this.ue=null}}function __PRIVATE_newTarget(tr,er=null,rr=[],nr=[],ir=null,sr=null,ar=null){return new __PRIVATE_TargetImpl(tr,er,rr,nr,ir,sr,ar)}function __PRIVATE_canonifyTarget(tr){const er=__PRIVATE_debugCast(tr);if(er.ue===null){let rr=er.path.canonicalString();er.collectionGroup!==null&&(rr+="|cg:"+er.collectionGroup),rr+="|f:",rr+=er.filters.map(nr=>__PRIVATE_canonifyFilter(nr)).join(","),rr+="|ob:",rr+=er.orderBy.map(nr=>function(sr){return sr.field.canonicalString()+sr.dir}(nr)).join(","),__PRIVATE_isNullOrUndefined(er.limit)||(rr+="|l:",rr+=er.limit),er.startAt&&(rr+="|lb:",rr+=er.startAt.inclusive?"b:":"a:",rr+=er.startAt.position.map(nr=>canonicalId(nr)).join(",")),er.endAt&&(rr+="|ub:",rr+=er.endAt.inclusive?"a:":"b:",rr+=er.endAt.position.map(nr=>canonicalId(nr)).join(",")),er.ue=rr}return er.ue}function __PRIVATE_targetEquals(tr,er){if(tr.limit!==er.limit||tr.orderBy.length!==er.orderBy.length)return!1;for(let rr=0;rr<tr.orderBy.length;rr++)if(!__PRIVATE_orderByEquals(tr.orderBy[rr],er.orderBy[rr]))return!1;if(tr.filters.length!==er.filters.length)return!1;for(let rr=0;rr<tr.filters.length;rr++)if(!__PRIVATE_filterEquals(tr.filters[rr],er.filters[rr]))return!1;return tr.collectionGroup===er.collectionGroup&&!!tr.path.isEqual(er.path)&&!!__PRIVATE_boundEquals(tr.startAt,er.startAt)&&__PRIVATE_boundEquals(tr.endAt,er.endAt)}function __PRIVATE_targetIsDocumentTarget(tr){return DocumentKey.isDocumentKey(tr.path)&&tr.collectionGroup===null&&tr.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(er,rr=null,nr=[],ir=[],sr=null,ar="F",cr=null,lr=null){this.path=er,this.collectionGroup=rr,this.explicitOrderBy=nr,this.filters=ir,this.limit=sr,this.limitType=ar,this.startAt=cr,this.endAt=lr,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(tr,er,rr,nr,ir,sr,ar,cr){return new __PRIVATE_QueryImpl(tr,er,rr,nr,ir,sr,ar,cr)}function __PRIVATE_newQueryForPath(tr){return new __PRIVATE_QueryImpl(tr)}function __PRIVATE_queryMatchesAllDocuments(tr){return tr.filters.length===0&&tr.limit===null&&tr.startAt==null&&tr.endAt==null&&(tr.explicitOrderBy.length===0||tr.explicitOrderBy.length===1&&tr.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(tr){return tr.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(tr){const er=__PRIVATE_debugCast(tr);if(er.ce===null){er.ce=[];const rr=new Set;for(const sr of er.explicitOrderBy)er.ce.push(sr),rr.add(sr.field.canonicalString());const nr=er.explicitOrderBy.length>0?er.explicitOrderBy[er.explicitOrderBy.length-1].dir:"asc";(function(ar){let cr=new SortedSet(FieldPath$1.comparator);return ar.filters.forEach(lr=>{lr.getFlattenedFilters().forEach(or=>{or.isInequality()&&(cr=cr.add(or.field))})}),cr})(er).forEach(sr=>{rr.has(sr.canonicalString())||sr.isKeyField()||er.ce.push(new OrderBy(sr,nr))}),rr.has(FieldPath$1.keyField().canonicalString())||er.ce.push(new OrderBy(FieldPath$1.keyField(),nr))}return er.ce}function __PRIVATE_queryToTarget(tr){const er=__PRIVATE_debugCast(tr);return er.le||(er.le=__PRIVATE__queryToTarget(er,__PRIVATE_queryNormalizedOrderBy(tr))),er.le}function __PRIVATE__queryToTarget(tr,er){if(tr.limitType==="F")return __PRIVATE_newTarget(tr.path,tr.collectionGroup,er,tr.filters,tr.limit,tr.startAt,tr.endAt);{er=er.map(ir=>{const sr=ir.dir==="desc"?"asc":"desc";return new OrderBy(ir.field,sr)});const rr=tr.endAt?new Bound(tr.endAt.position,tr.endAt.inclusive):null,nr=tr.startAt?new Bound(tr.startAt.position,tr.startAt.inclusive):null;return __PRIVATE_newTarget(tr.path,tr.collectionGroup,er,tr.filters,tr.limit,rr,nr)}}function __PRIVATE_queryWithAddedFilter(tr,er){const rr=tr.filters.concat([er]);return new __PRIVATE_QueryImpl(tr.path,tr.collectionGroup,tr.explicitOrderBy.slice(),rr,tr.limit,tr.limitType,tr.startAt,tr.endAt)}function __PRIVATE_queryWithLimit(tr,er,rr){return new __PRIVATE_QueryImpl(tr.path,tr.collectionGroup,tr.explicitOrderBy.slice(),tr.filters.slice(),er,rr,tr.startAt,tr.endAt)}function __PRIVATE_queryEquals(tr,er){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(tr),__PRIVATE_queryToTarget(er))&&tr.limitType===er.limitType}function __PRIVATE_canonifyQuery(tr){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(tr))}|lt:${tr.limitType}`}function __PRIVATE_stringifyQuery(tr){return`Query(target=${function(rr){let nr=rr.path.canonicalString();return rr.collectionGroup!==null&&(nr+=" collectionGroup="+rr.collectionGroup),rr.filters.length>0&&(nr+=`, filters: [${rr.filters.map(ir=>__PRIVATE_stringifyFilter(ir)).join(", ")}]`),__PRIVATE_isNullOrUndefined(rr.limit)||(nr+=", limit: "+rr.limit),rr.orderBy.length>0&&(nr+=`, orderBy: [${rr.orderBy.map(ir=>function(ar){return`${ar.field.canonicalString()} (${ar.dir})`}(ir)).join(", ")}]`),rr.startAt&&(nr+=", startAt: ",nr+=rr.startAt.inclusive?"b:":"a:",nr+=rr.startAt.position.map(ir=>canonicalId(ir)).join(",")),rr.endAt&&(nr+=", endAt: ",nr+=rr.endAt.inclusive?"a:":"b:",nr+=rr.endAt.position.map(ir=>canonicalId(ir)).join(",")),`Target(${nr})`}(__PRIVATE_queryToTarget(tr))}; limitType=${tr.limitType})`}function __PRIVATE_queryMatches(tr,er){return er.isFoundDocument()&&function(nr,ir){const sr=ir.key.path;return nr.collectionGroup!==null?ir.key.hasCollectionId(nr.collectionGroup)&&nr.path.isPrefixOf(sr):DocumentKey.isDocumentKey(nr.path)?nr.path.isEqual(sr):nr.path.isImmediateParentOf(sr)}(tr,er)&&function(nr,ir){for(const sr of __PRIVATE_queryNormalizedOrderBy(nr))if(!sr.field.isKeyField()&&ir.data.field(sr.field)===null)return!1;return!0}(tr,er)&&function(nr,ir){for(const sr of nr.filters)if(!sr.matches(ir))return!1;return!0}(tr,er)&&function(nr,ir){return!(nr.startAt&&!function(ar,cr,lr){const or=__PRIVATE_boundCompareToDocument(ar,cr,lr);return ar.inclusive?or<=0:or<0}(nr.startAt,__PRIVATE_queryNormalizedOrderBy(nr),ir)||nr.endAt&&!function(ar,cr,lr){const or=__PRIVATE_boundCompareToDocument(ar,cr,lr);return ar.inclusive?or>=0:or>0}(nr.endAt,__PRIVATE_queryNormalizedOrderBy(nr),ir))}(tr,er)}function __PRIVATE_queryCollectionGroup(tr){return tr.collectionGroup||(tr.path.length%2==1?tr.path.lastSegment():tr.path.get(tr.path.length-2))}function __PRIVATE_newQueryComparator(tr){return(er,rr)=>{let nr=!1;for(const ir of __PRIVATE_queryNormalizedOrderBy(tr)){const sr=__PRIVATE_compareDocs(ir,er,rr);if(sr!==0)return sr;nr=nr||ir.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(tr,er,rr){const nr=tr.field.isKeyField()?DocumentKey.comparator(er.key,rr.key):function(sr,ar,cr){const lr=ar.data.field(sr),or=cr.data.field(sr);return lr!==null&&or!==null?__PRIVATE_valueCompare(lr,or):fail()}(tr.field,er,rr);switch(tr.dir){case"asc":return nr;case"desc":return-1*nr;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(er,rr){this.mapKeyFn=er,this.equalsFn=rr,this.inner={},this.innerSize=0}get(er){const rr=this.mapKeyFn(er),nr=this.inner[rr];if(nr!==void 0){for(const[ir,sr]of nr)if(this.equalsFn(ir,er))return sr}}has(er){return this.get(er)!==void 0}set(er,rr){const nr=this.mapKeyFn(er),ir=this.inner[nr];if(ir===void 0)return this.inner[nr]=[[er,rr]],void this.innerSize++;for(let sr=0;sr<ir.length;sr++)if(this.equalsFn(ir[sr][0],er))return void(ir[sr]=[er,rr]);ir.push([er,rr]),this.innerSize++}delete(er){const rr=this.mapKeyFn(er),nr=this.inner[rr];if(nr===void 0)return!1;for(let ir=0;ir<nr.length;ir++)if(this.equalsFn(nr[ir][0],er))return nr.length===1?delete this.inner[rr]:nr.splice(ir,1),this.innerSize--,!0;return!1}forEach(er){forEach(this.inner,(rr,nr)=>{for(const[ir,sr]of nr)er(ir,sr)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return oe$1}const _e=new SortedMap(DocumentKey.comparator);function documentMap(...tr){let er=_e;for(const rr of tr)er=er.insert(rr.key,rr);return er}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(tr){let er=_e;return tr.forEach((rr,nr)=>er=er.insert(rr,nr.overlayedDocument)),er}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(tr=>tr.toString(),(tr,er)=>tr.isEqual(er))}const ae$1=new SortedMap(DocumentKey.comparator),ue$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...tr){let er=ue$1;for(const rr of tr)er=er.add(rr);return er}const ce$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return ce$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(tr,er){if(tr.useProto3Json){if(isNaN(er))return{doubleValue:"NaN"};if(er===1/0)return{doubleValue:"Infinity"};if(er===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(er)?"-0":er}}function __PRIVATE_toInteger(tr){return{integerValue:""+tr}}function toNumber$4(tr,er){return isSafeInteger(er)?__PRIVATE_toInteger(er):__PRIVATE_toDouble(tr,er)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(tr,er,rr){return tr instanceof __PRIVATE_ServerTimestampTransform?function(ir,sr){const ar={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:ir.seconds,nanos:ir.nanoseconds}}}};return sr&&__PRIVATE_isServerTimestamp(sr)&&(sr=__PRIVATE_getPreviousValue(sr)),sr&&(ar.fields.__previous_value__=sr),{mapValue:ar}}(rr,er):tr instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(tr,er):tr instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(tr,er):function(ir,sr){const ar=__PRIVATE_computeTransformOperationBaseValue(ir,sr),cr=asNumber(ar)+asNumber(ir.Pe);return isInteger(ar)&&isInteger(ir.Pe)?__PRIVATE_toInteger(cr):__PRIVATE_toDouble(ir.serializer,cr)}(tr,er)}function __PRIVATE_applyTransformOperationToRemoteDocument(tr,er,rr){return tr instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(tr,er):tr instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(tr,er):rr}function __PRIVATE_computeTransformOperationBaseValue(tr,er){return tr instanceof __PRIVATE_NumericIncrementTransformOperation?function(nr){return isInteger(nr)||function(sr){return!!sr&&"doubleValue"in sr}(nr)}(er)?er:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(er){super(),this.elements=er}}function __PRIVATE_applyArrayUnionTransformOperation(tr,er){const rr=__PRIVATE_coercedFieldValuesArray(er);for(const nr of tr.elements)rr.some(ir=>__PRIVATE_valueEquals(ir,nr))||rr.push(nr);return{arrayValue:{values:rr}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(er){super(),this.elements=er}}function __PRIVATE_applyArrayRemoveTransformOperation(tr,er){let rr=__PRIVATE_coercedFieldValuesArray(er);for(const nr of tr.elements)rr=rr.filter(ir=>!__PRIVATE_valueEquals(ir,nr));return{arrayValue:{values:rr}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(er,rr){super(),this.serializer=er,this.Pe=rr}}function asNumber(tr){return __PRIVATE_normalizeNumber(tr.integerValue||tr.doubleValue)}function __PRIVATE_coercedFieldValuesArray(tr){return isArray$f(tr)&&tr.arrayValue.values?tr.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(tr,er){return tr.field.isEqual(er.field)&&function(nr,ir){return nr instanceof __PRIVATE_ArrayUnionTransformOperation&&ir instanceof __PRIVATE_ArrayUnionTransformOperation||nr instanceof __PRIVATE_ArrayRemoveTransformOperation&&ir instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(nr.elements,ir.elements,__PRIVATE_valueEquals):nr instanceof __PRIVATE_NumericIncrementTransformOperation&&ir instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(nr.Pe,ir.Pe):nr instanceof __PRIVATE_ServerTimestampTransform&&ir instanceof __PRIVATE_ServerTimestampTransform}(tr.transform,er.transform)}class MutationResult{constructor(er,rr){this.version=er,this.transformResults=rr}}class Precondition{constructor(er,rr){this.updateTime=er,this.exists=rr}static none(){return new Precondition}static exists(er){return new Precondition(void 0,er)}static updateTime(er){return new Precondition(er)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(er){return this.exists===er.exists&&(this.updateTime?!!er.updateTime&&this.updateTime.isEqual(er.updateTime):!er.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(tr,er){return tr.updateTime!==void 0?er.isFoundDocument()&&er.version.isEqual(tr.updateTime):tr.exists===void 0||tr.exists===er.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(tr,er){if(!tr.hasLocalMutations||er&&er.fields.length===0)return null;if(er===null)return tr.isNoDocument()?new __PRIVATE_DeleteMutation(tr.key,Precondition.none()):new __PRIVATE_SetMutation(tr.key,tr.data,Precondition.none());{const rr=tr.data,nr=ObjectValue.empty();let ir=new SortedSet(FieldPath$1.comparator);for(let sr of er.fields)if(!ir.has(sr)){let ar=rr.field(sr);ar===null&&sr.length>1&&(sr=sr.popLast(),ar=rr.field(sr)),ar===null?nr.delete(sr):nr.set(sr,ar),ir=ir.add(sr)}return new __PRIVATE_PatchMutation(tr.key,nr,new FieldMask(ir.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(tr,er,rr){tr instanceof __PRIVATE_SetMutation?function(ir,sr,ar){const cr=ir.value.clone(),lr=__PRIVATE_serverTransformResults(ir.fieldTransforms,sr,ar.transformResults);cr.setAll(lr),sr.convertToFoundDocument(ar.version,cr).setHasCommittedMutations()}(tr,er,rr):tr instanceof __PRIVATE_PatchMutation?function(ir,sr,ar){if(!__PRIVATE_preconditionIsValidForDocument(ir.precondition,sr))return void sr.convertToUnknownDocument(ar.version);const cr=__PRIVATE_serverTransformResults(ir.fieldTransforms,sr,ar.transformResults),lr=sr.data;lr.setAll(__PRIVATE_getPatch(ir)),lr.setAll(cr),sr.convertToFoundDocument(ar.version,lr).setHasCommittedMutations()}(tr,er,rr):function(ir,sr,ar){sr.convertToNoDocument(ar.version).setHasCommittedMutations()}(0,er,rr)}function __PRIVATE_mutationApplyToLocalView(tr,er,rr,nr){return tr instanceof __PRIVATE_SetMutation?function(sr,ar,cr,lr){if(!__PRIVATE_preconditionIsValidForDocument(sr.precondition,ar))return cr;const or=sr.value.clone(),ur=__PRIVATE_localTransformResults(sr.fieldTransforms,lr,ar);return or.setAll(ur),ar.convertToFoundDocument(ar.version,or).setHasLocalMutations(),null}(tr,er,rr,nr):tr instanceof __PRIVATE_PatchMutation?function(sr,ar,cr,lr){if(!__PRIVATE_preconditionIsValidForDocument(sr.precondition,ar))return cr;const or=__PRIVATE_localTransformResults(sr.fieldTransforms,lr,ar),ur=ar.data;return ur.setAll(__PRIVATE_getPatch(sr)),ur.setAll(or),ar.convertToFoundDocument(ar.version,ur).setHasLocalMutations(),cr===null?null:cr.unionWith(sr.fieldMask.fields).unionWith(sr.fieldTransforms.map(hr=>hr.field))}(tr,er,rr,nr):function(sr,ar,cr){return __PRIVATE_preconditionIsValidForDocument(sr.precondition,ar)?(ar.convertToNoDocument(ar.version).setHasLocalMutations(),null):cr}(tr,er,rr)}function __PRIVATE_mutationExtractBaseValue(tr,er){let rr=null;for(const nr of tr.fieldTransforms){const ir=er.data.field(nr.field),sr=__PRIVATE_computeTransformOperationBaseValue(nr.transform,ir||null);sr!=null&&(rr===null&&(rr=ObjectValue.empty()),rr.set(nr.field,sr))}return rr||null}function __PRIVATE_mutationEquals(tr,er){return tr.type===er.type&&!!tr.key.isEqual(er.key)&&!!tr.precondition.isEqual(er.precondition)&&!!function(nr,ir){return nr===void 0&&ir===void 0||!(!nr||!ir)&&__PRIVATE_arrayEquals(nr,ir,(sr,ar)=>__PRIVATE_fieldTransformEquals(sr,ar))}(tr.fieldTransforms,er.fieldTransforms)&&(tr.type===0?tr.value.isEqual(er.value):tr.type!==1||tr.data.isEqual(er.data)&&tr.fieldMask.isEqual(er.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(er,rr,nr,ir=[]){super(),this.key=er,this.value=rr,this.precondition=nr,this.fieldTransforms=ir,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(er,rr,nr,ir,sr=[]){super(),this.key=er,this.data=rr,this.fieldMask=nr,this.precondition=ir,this.fieldTransforms=sr,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(tr){const er=new Map;return tr.fieldMask.fields.forEach(rr=>{if(!rr.isEmpty()){const nr=tr.data.field(rr);er.set(rr,nr)}}),er}function __PRIVATE_serverTransformResults(tr,er,rr){const nr=new Map;__PRIVATE_hardAssert(tr.length===rr.length);for(let ir=0;ir<rr.length;ir++){const sr=tr[ir],ar=sr.transform,cr=er.data.field(sr.field);nr.set(sr.field,__PRIVATE_applyTransformOperationToRemoteDocument(ar,cr,rr[ir]))}return nr}function __PRIVATE_localTransformResults(tr,er,rr){const nr=new Map;for(const ir of tr){const sr=ir.transform,ar=rr.data.field(ir.field);nr.set(ir.field,__PRIVATE_applyTransformOperationToLocalView(sr,ar,er))}return nr}class __PRIVATE_DeleteMutation extends Mutation{constructor(er,rr){super(),this.key=er,this.precondition=rr,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(er,rr){super(),this.key=er,this.precondition=rr,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(er,rr,nr,ir){this.batchId=er,this.localWriteTime=rr,this.baseMutations=nr,this.mutations=ir}applyToRemoteDocument(er,rr){const nr=rr.mutationResults;for(let ir=0;ir<this.mutations.length;ir++){const sr=this.mutations[ir];sr.key.isEqual(er.key)&&__PRIVATE_mutationApplyToRemoteDocument(sr,er,nr[ir])}}applyToLocalView(er,rr){for(const nr of this.baseMutations)nr.key.isEqual(er.key)&&(rr=__PRIVATE_mutationApplyToLocalView(nr,er,rr,this.localWriteTime));for(const nr of this.mutations)nr.key.isEqual(er.key)&&(rr=__PRIVATE_mutationApplyToLocalView(nr,er,rr,this.localWriteTime));return rr}applyToLocalDocumentSet(er,rr){const nr=__PRIVATE_newMutationMap();return this.mutations.forEach(ir=>{const sr=er.get(ir.key),ar=sr.overlayedDocument;let cr=this.applyToLocalView(ar,sr.mutatedFields);cr=rr.has(ir.key)?null:cr;const lr=__PRIVATE_calculateOverlayMutation(ar,cr);lr!==null&&nr.set(ir.key,lr),ar.isValidDocument()||ar.convertToNoDocument(SnapshotVersion.min())}),nr}keys(){return this.mutations.reduce((er,rr)=>er.add(rr.key),__PRIVATE_documentKeySet())}isEqual(er){return this.batchId===er.batchId&&__PRIVATE_arrayEquals(this.mutations,er.mutations,(rr,nr)=>__PRIVATE_mutationEquals(rr,nr))&&__PRIVATE_arrayEquals(this.baseMutations,er.baseMutations,(rr,nr)=>__PRIVATE_mutationEquals(rr,nr))}}class MutationBatchResult{constructor(er,rr,nr,ir){this.batch=er,this.commitVersion=rr,this.mutationResults=nr,this.docVersions=ir}static from(er,rr,nr){__PRIVATE_hardAssert(er.mutations.length===nr.length);let ir=function(){return ae$1}();const sr=er.mutations;for(let ar=0;ar<sr.length;ar++)ir=ir.insert(sr[ar].key,nr[ar].version);return new MutationBatchResult(er,rr,nr,ir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(er,rr){this.largestBatchId=er,this.mutation=rr}getKey(){return this.mutation.key}isEqual(er){return er!==null&&this.mutation===er.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(er,rr){this.count=er,this.unchangedNames=rr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le$1,he$1;function __PRIVATE_isPermanentError(tr){switch(tr){default:return fail();case D$1.CANCELLED:case D$1.UNKNOWN:case D$1.DEADLINE_EXCEEDED:case D$1.RESOURCE_EXHAUSTED:case D$1.INTERNAL:case D$1.UNAVAILABLE:case D$1.UNAUTHENTICATED:return!1;case D$1.INVALID_ARGUMENT:case D$1.NOT_FOUND:case D$1.ALREADY_EXISTS:case D$1.PERMISSION_DENIED:case D$1.FAILED_PRECONDITION:case D$1.ABORTED:case D$1.OUT_OF_RANGE:case D$1.UNIMPLEMENTED:case D$1.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode(tr){if(tr===void 0)return __PRIVATE_logError("GRPC error has no .code"),D$1.UNKNOWN;switch(tr){case le$1.OK:return D$1.OK;case le$1.CANCELLED:return D$1.CANCELLED;case le$1.UNKNOWN:return D$1.UNKNOWN;case le$1.DEADLINE_EXCEEDED:return D$1.DEADLINE_EXCEEDED;case le$1.RESOURCE_EXHAUSTED:return D$1.RESOURCE_EXHAUSTED;case le$1.INTERNAL:return D$1.INTERNAL;case le$1.UNAVAILABLE:return D$1.UNAVAILABLE;case le$1.UNAUTHENTICATED:return D$1.UNAUTHENTICATED;case le$1.INVALID_ARGUMENT:return D$1.INVALID_ARGUMENT;case le$1.NOT_FOUND:return D$1.NOT_FOUND;case le$1.ALREADY_EXISTS:return D$1.ALREADY_EXISTS;case le$1.PERMISSION_DENIED:return D$1.PERMISSION_DENIED;case le$1.FAILED_PRECONDITION:return D$1.FAILED_PRECONDITION;case le$1.ABORTED:return D$1.ABORTED;case le$1.OUT_OF_RANGE:return D$1.OUT_OF_RANGE;case le$1.UNIMPLEMENTED:return D$1.UNIMPLEMENTED;case le$1.DATA_LOSS:return D$1.DATA_LOSS;default:return fail()}}(he$1=le$1||(le$1={}))[he$1.OK=0]="OK",he$1[he$1.CANCELLED=1]="CANCELLED",he$1[he$1.UNKNOWN=2]="UNKNOWN",he$1[he$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he$1[he$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he$1[he$1.NOT_FOUND=5]="NOT_FOUND",he$1[he$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",he$1[he$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",he$1[he$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",he$1[he$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he$1[he$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he$1[he$1.ABORTED=10]="ABORTED",he$1[he$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",he$1[he$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",he$1[he$1.INTERNAL=13]="INTERNAL",he$1[he$1.UNAVAILABLE=14]="UNAVAILABLE",he$1[he$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(tr){const er=__PRIVATE_newTextEncoder().encode(tr),rr=new Md5;return rr.update(er),new Uint8Array(rr.digest())}function __PRIVATE_get64BitUints(tr){const er=new DataView(tr.buffer),rr=er.getUint32(0,!0),nr=er.getUint32(4,!0),ir=er.getUint32(8,!0),sr=er.getUint32(12,!0);return[new Integer([rr,nr],0),new Integer([ir,sr],0)]}class BloomFilter{constructor(er,rr,nr){if(this.bitmap=er,this.padding=rr,this.hashCount=nr,rr<0||rr>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${rr}`);if(nr<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${nr}`);if(er.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${nr}`);if(er.length===0&&rr!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${rr}`);this.Ie=8*er.length-rr,this.Te=Integer.fromNumber(this.Ie)}Ee(er,rr,nr){let ir=er.add(rr.multiply(Integer.fromNumber(nr)));return ir.compare(Ie)===1&&(ir=new Integer([ir.getBits(0),ir.getBits(1)],0)),ir.modulo(this.Te).toNumber()}de(er){return(this.bitmap[Math.floor(er/8)]&1<<er%8)!=0}mightContain(er){if(this.Ie===0)return!1;const rr=__PRIVATE_getMd5HashValue(er),[nr,ir]=__PRIVATE_get64BitUints(rr);for(let sr=0;sr<this.hashCount;sr++){const ar=this.Ee(nr,ir,sr);if(!this.de(ar))return!1}return!0}static create(er,rr,nr){const ir=er%8==0?0:8-er%8,sr=new Uint8Array(Math.ceil(er/8)),ar=new BloomFilter(sr,ir,rr);return nr.forEach(cr=>ar.insert(cr)),ar}insert(er){if(this.Ie===0)return;const rr=__PRIVATE_getMd5HashValue(er),[nr,ir]=__PRIVATE_get64BitUints(rr);for(let sr=0;sr<this.hashCount;sr++){const ar=this.Ee(nr,ir,sr);this.Ae(ar)}}Ae(er){const rr=Math.floor(er/8),nr=er%8;this.bitmap[rr]|=1<<nr}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(er,rr,nr,ir,sr){this.snapshotVersion=er,this.targetChanges=rr,this.targetMismatches=nr,this.documentUpdates=ir,this.resolvedLimboDocuments=sr}static createSynthesizedRemoteEventForCurrentChange(er,rr,nr){const ir=new Map;return ir.set(er,TargetChange.createSynthesizedTargetChangeForCurrentChange(er,rr,nr)),new RemoteEvent(SnapshotVersion.min(),ir,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(er,rr,nr,ir,sr){this.resumeToken=er,this.current=rr,this.addedDocuments=nr,this.modifiedDocuments=ir,this.removedDocuments=sr}static createSynthesizedTargetChangeForCurrentChange(er,rr,nr){return new TargetChange(nr,rr,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(er,rr,nr,ir){this.Re=er,this.removedTargetIds=rr,this.key=nr,this.Ve=ir}}class __PRIVATE_ExistenceFilterChange{constructor(er,rr){this.targetId=er,this.me=rr}}class __PRIVATE_WatchTargetChange{constructor(er,rr,nr=ByteString.EMPTY_BYTE_STRING,ir=null){this.state=er,this.targetIds=rr,this.resumeToken=nr,this.cause=ir}}class __PRIVATE_TargetState{constructor(){this.fe=0,this.ge=__PRIVATE_snapshotChangesMap(),this.pe=ByteString.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(er){er.approximateByteSize()>0&&(this.we=!0,this.pe=er)}ve(){let er=__PRIVATE_documentKeySet(),rr=__PRIVATE_documentKeySet(),nr=__PRIVATE_documentKeySet();return this.ge.forEach((ir,sr)=>{switch(sr){case 0:er=er.add(ir);break;case 2:rr=rr.add(ir);break;case 1:nr=nr.add(ir);break;default:fail()}}),new TargetChange(this.pe,this.ye,er,rr,nr)}Ce(){this.we=!1,this.ge=__PRIVATE_snapshotChangesMap()}Fe(er,rr){this.we=!0,this.ge=this.ge.insert(er,rr)}Me(er){this.we=!0,this.ge=this.ge.remove(er)}xe(){this.fe+=1}Oe(){this.fe-=1,__PRIVATE_hardAssert(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class __PRIVATE_WatchChangeAggregator{constructor(er){this.Le=er,this.Be=new Map,this.ke=__PRIVATE_mutableDocumentMap(),this.qe=__PRIVATE_documentTargetMap(),this.Qe=new SortedMap(__PRIVATE_primitiveComparator)}Ke(er){for(const rr of er.Re)er.Ve&&er.Ve.isFoundDocument()?this.$e(rr,er.Ve):this.Ue(rr,er.key,er.Ve);for(const rr of er.removedTargetIds)this.Ue(rr,er.key,er.Ve)}We(er){this.forEachTarget(er,rr=>{const nr=this.Ge(rr);switch(er.state){case 0:this.ze(rr)&&nr.De(er.resumeToken);break;case 1:nr.Oe(),nr.Se||nr.Ce(),nr.De(er.resumeToken);break;case 2:nr.Oe(),nr.Se||this.removeTarget(rr);break;case 3:this.ze(rr)&&(nr.Ne(),nr.De(er.resumeToken));break;case 4:this.ze(rr)&&(this.je(rr),nr.De(er.resumeToken));break;default:fail()}})}forEachTarget(er,rr){er.targetIds.length>0?er.targetIds.forEach(rr):this.Be.forEach((nr,ir)=>{this.ze(ir)&&rr(ir)})}He(er){const rr=er.targetId,nr=er.me.count,ir=this.Je(rr);if(ir){const sr=ir.target;if(__PRIVATE_targetIsDocumentTarget(sr))if(nr===0){const ar=new DocumentKey(sr.path);this.Ue(rr,ar,MutableDocument.newNoDocument(ar,SnapshotVersion.min()))}else __PRIVATE_hardAssert(nr===1);else{const ar=this.Ye(rr);if(ar!==nr){const cr=this.Ze(er),lr=cr?this.Xe(cr,er,ar):1;if(lr!==0){this.je(rr);const or=lr===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(rr,or)}}}}}Ze(er){const rr=er.me.unchangedNames;if(!rr||!rr.bits)return null;const{bits:{bitmap:nr="",padding:ir=0},hashCount:sr=0}=rr;let ar,cr;try{ar=__PRIVATE_normalizeByteString(nr).toUint8Array()}catch(lr){if(lr instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+lr.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw lr}try{cr=new BloomFilter(ar,ir,sr)}catch(lr){return __PRIVATE_logWarn(lr instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",lr),null}return cr.Ie===0?null:cr}Xe(er,rr,nr){return rr.me.count===nr-this.nt(er,rr.targetId)?0:2}nt(er,rr){const nr=this.Le.getRemoteKeysForTarget(rr);let ir=0;return nr.forEach(sr=>{const ar=this.Le.tt(),cr=`projects/${ar.projectId}/databases/${ar.database}/documents/${sr.path.canonicalString()}`;er.mightContain(cr)||(this.Ue(rr,sr,null),ir++)}),ir}rt(er){const rr=new Map;this.Be.forEach((sr,ar)=>{const cr=this.Je(ar);if(cr){if(sr.current&&__PRIVATE_targetIsDocumentTarget(cr.target)){const lr=new DocumentKey(cr.target.path);this.ke.get(lr)!==null||this.it(ar,lr)||this.Ue(ar,lr,MutableDocument.newNoDocument(lr,er))}sr.be&&(rr.set(ar,sr.ve()),sr.Ce())}});let nr=__PRIVATE_documentKeySet();this.qe.forEach((sr,ar)=>{let cr=!0;ar.forEachWhile(lr=>{const or=this.Je(lr);return!or||or.purpose==="TargetPurposeLimboResolution"||(cr=!1,!1)}),cr&&(nr=nr.add(sr))}),this.ke.forEach((sr,ar)=>ar.setReadTime(er));const ir=new RemoteEvent(er,rr,this.Qe,this.ke,nr);return this.ke=__PRIVATE_mutableDocumentMap(),this.qe=__PRIVATE_documentTargetMap(),this.Qe=new SortedMap(__PRIVATE_primitiveComparator),ir}$e(er,rr){if(!this.ze(er))return;const nr=this.it(er,rr.key)?2:0;this.Ge(er).Fe(rr.key,nr),this.ke=this.ke.insert(rr.key,rr),this.qe=this.qe.insert(rr.key,this.st(rr.key).add(er))}Ue(er,rr,nr){if(!this.ze(er))return;const ir=this.Ge(er);this.it(er,rr)?ir.Fe(rr,1):ir.Me(rr),this.qe=this.qe.insert(rr,this.st(rr).delete(er)),nr&&(this.ke=this.ke.insert(rr,nr))}removeTarget(er){this.Be.delete(er)}Ye(er){const rr=this.Ge(er).ve();return this.Le.getRemoteKeysForTarget(er).size+rr.addedDocuments.size-rr.removedDocuments.size}xe(er){this.Ge(er).xe()}Ge(er){let rr=this.Be.get(er);return rr||(rr=new __PRIVATE_TargetState,this.Be.set(er,rr)),rr}st(er){let rr=this.qe.get(er);return rr||(rr=new SortedSet(__PRIVATE_primitiveComparator),this.qe=this.qe.insert(er,rr)),rr}ze(er){const rr=this.Je(er)!==null;return rr||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",er),rr}Je(er){const rr=this.Be.get(er);return rr&&rr.Se?null:this.Le.ot(er)}je(er){this.Be.set(er,new __PRIVATE_TargetState),this.Le.getRemoteKeysForTarget(er).forEach(rr=>{this.Ue(er,rr,null)})}it(er,rr){return this.Le.getRemoteKeysForTarget(er).has(rr)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const Te={asc:"ASCENDING",desc:"DESCENDING"},Ee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},de$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(er,rr){this.databaseId=er,this.useProto3Json=rr}}function __PRIVATE_toInt32Proto(tr,er){return tr.useProto3Json||__PRIVATE_isNullOrUndefined(er)?er:{value:er}}function toTimestamp(tr,er){return tr.useProto3Json?`${new Date(1e3*er.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+er.nanoseconds).slice(-9)}Z`:{seconds:""+er.seconds,nanos:er.nanoseconds}}function __PRIVATE_toBytes(tr,er){return tr.useProto3Json?er.toBase64():er.toUint8Array()}function __PRIVATE_toVersion(tr,er){return toTimestamp(tr,er.toTimestamp())}function __PRIVATE_fromVersion(tr){return __PRIVATE_hardAssert(!!tr),SnapshotVersion.fromTimestamp(function(rr){const nr=__PRIVATE_normalizeTimestamp(rr);return new Timestamp(nr.seconds,nr.nanos)}(tr))}function __PRIVATE_toResourceName(tr,er){return __PRIVATE_toResourcePath(tr,er).canonicalString()}function __PRIVATE_toResourcePath(tr,er){const rr=function(ir){return new ResourcePath(["projects",ir.projectId,"databases",ir.database])}(tr).child("documents");return er===void 0?rr:rr.child(er)}function __PRIVATE_fromResourceName(tr){const er=ResourcePath.fromString(tr);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(er)),er}function __PRIVATE_toName(tr,er){return __PRIVATE_toResourceName(tr.databaseId,er.path)}function fromName(tr,er){const rr=__PRIVATE_fromResourceName(er);if(rr.get(1)!==tr.databaseId.projectId)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+rr.get(1)+" vs "+tr.databaseId.projectId);if(rr.get(3)!==tr.databaseId.database)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+rr.get(3)+" vs "+tr.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(rr))}function __PRIVATE_toQueryPath(tr,er){return __PRIVATE_toResourceName(tr.databaseId,er)}function __PRIVATE_fromQueryPath(tr){const er=__PRIVATE_fromResourceName(tr);return er.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(er)}function __PRIVATE_getEncodedDatabaseId(tr){return new ResourcePath(["projects",tr.databaseId.projectId,"databases",tr.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(tr){return __PRIVATE_hardAssert(tr.length>4&&tr.get(4)==="documents"),tr.popFirst(5)}function __PRIVATE_toMutationDocument(tr,er,rr){return{name:__PRIVATE_toName(tr,er),fields:rr.value.mapValue.fields}}function __PRIVATE_fromWatchChange(tr,er){let rr;if("targetChange"in er){er.targetChange;const nr=function(or){return or==="NO_CHANGE"?0:or==="ADD"?1:or==="REMOVE"?2:or==="CURRENT"?3:or==="RESET"?4:fail()}(er.targetChange.targetChangeType||"NO_CHANGE"),ir=er.targetChange.targetIds||[],sr=function(or,ur){return or.useProto3Json?(__PRIVATE_hardAssert(ur===void 0||typeof ur=="string"),ByteString.fromBase64String(ur||"")):(__PRIVATE_hardAssert(ur===void 0||ur instanceof Buffer||ur instanceof Uint8Array),ByteString.fromUint8Array(ur||new Uint8Array))}(tr,er.targetChange.resumeToken),ar=er.targetChange.cause,cr=ar&&function(or){const ur=or.code===void 0?D$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(or.code);return new FirestoreError(ur,or.message||"")}(ar);rr=new __PRIVATE_WatchTargetChange(nr,ir,sr,cr||null)}else if("documentChange"in er){er.documentChange;const nr=er.documentChange;nr.document,nr.document.name,nr.document.updateTime;const ir=fromName(tr,nr.document.name),sr=__PRIVATE_fromVersion(nr.document.updateTime),ar=nr.document.createTime?__PRIVATE_fromVersion(nr.document.createTime):SnapshotVersion.min(),cr=new ObjectValue({mapValue:{fields:nr.document.fields}}),lr=MutableDocument.newFoundDocument(ir,sr,ar,cr),or=nr.targetIds||[],ur=nr.removedTargetIds||[];rr=new __PRIVATE_DocumentWatchChange(or,ur,lr.key,lr)}else if("documentDelete"in er){er.documentDelete;const nr=er.documentDelete;nr.document;const ir=fromName(tr,nr.document),sr=nr.readTime?__PRIVATE_fromVersion(nr.readTime):SnapshotVersion.min(),ar=MutableDocument.newNoDocument(ir,sr),cr=nr.removedTargetIds||[];rr=new __PRIVATE_DocumentWatchChange([],cr,ar.key,ar)}else if("documentRemove"in er){er.documentRemove;const nr=er.documentRemove;nr.document;const ir=fromName(tr,nr.document),sr=nr.removedTargetIds||[];rr=new __PRIVATE_DocumentWatchChange([],sr,ir,null)}else{if(!("filter"in er))return fail();{er.filter;const nr=er.filter;nr.targetId;const{count:ir=0,unchangedNames:sr}=nr,ar=new ExistenceFilter(ir,sr),cr=nr.targetId;rr=new __PRIVATE_ExistenceFilterChange(cr,ar)}}return rr}function toMutation(tr,er){let rr;if(er instanceof __PRIVATE_SetMutation)rr={update:__PRIVATE_toMutationDocument(tr,er.key,er.value)};else if(er instanceof __PRIVATE_DeleteMutation)rr={delete:__PRIVATE_toName(tr,er.key)};else if(er instanceof __PRIVATE_PatchMutation)rr={update:__PRIVATE_toMutationDocument(tr,er.key,er.data),updateMask:__PRIVATE_toDocumentMask(er.fieldMask)};else{if(!(er instanceof __PRIVATE_VerifyMutation))return fail();rr={verify:__PRIVATE_toName(tr,er.key)}}return er.fieldTransforms.length>0&&(rr.updateTransforms=er.fieldTransforms.map(nr=>function(sr,ar){const cr=ar.transform;if(cr instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:ar.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(cr instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:ar.field.canonicalString(),appendMissingElements:{values:cr.elements}};if(cr instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:ar.field.canonicalString(),removeAllFromArray:{values:cr.elements}};if(cr instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:ar.field.canonicalString(),increment:cr.Pe};throw fail()}(0,nr))),er.precondition.isNone||(rr.currentDocument=function(ir,sr){return sr.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(ir,sr.updateTime)}:sr.exists!==void 0?{exists:sr.exists}:fail()}(tr,er.precondition)),rr}function __PRIVATE_fromWriteResults(tr,er){return tr&&tr.length>0?(__PRIVATE_hardAssert(er!==void 0),tr.map(rr=>function(ir,sr){let ar=ir.updateTime?__PRIVATE_fromVersion(ir.updateTime):__PRIVATE_fromVersion(sr);return ar.isEqual(SnapshotVersion.min())&&(ar=__PRIVATE_fromVersion(sr)),new MutationResult(ar,ir.transformResults||[])}(rr,er))):[]}function __PRIVATE_toDocumentsTarget(tr,er){return{documents:[__PRIVATE_toQueryPath(tr,er.path)]}}function __PRIVATE_toQueryTarget(tr,er){const rr={structuredQuery:{}},nr=er.path;let ir;er.collectionGroup!==null?(ir=nr,rr.structuredQuery.from=[{collectionId:er.collectionGroup,allDescendants:!0}]):(ir=nr.popLast(),rr.structuredQuery.from=[{collectionId:nr.lastSegment()}]),rr.parent=__PRIVATE_toQueryPath(tr,ir);const sr=function(or){if(or.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(or,"and"))}(er.filters);sr&&(rr.structuredQuery.where=sr);const ar=function(or){if(or.length!==0)return or.map(ur=>function(dr){return{field:__PRIVATE_toFieldPathReference(dr.field),direction:__PRIVATE_toDirection(dr.dir)}}(ur))}(er.orderBy);ar&&(rr.structuredQuery.orderBy=ar);const cr=__PRIVATE_toInt32Proto(tr,er.limit);return cr!==null&&(rr.structuredQuery.limit=cr),er.startAt&&(rr.structuredQuery.startAt=function(or){return{before:or.inclusive,values:or.position}}(er.startAt)),er.endAt&&(rr.structuredQuery.endAt=function(or){return{before:!or.inclusive,values:or.position}}(er.endAt)),{_t:rr,parent:ir}}function __PRIVATE_convertQueryTargetToQuery(tr){let er=__PRIVATE_fromQueryPath(tr.parent);const rr=tr.structuredQuery,nr=rr.from?rr.from.length:0;let ir=null;if(nr>0){__PRIVATE_hardAssert(nr===1);const ur=rr.from[0];ur.allDescendants?ir=ur.collectionId:er=er.child(ur.collectionId)}let sr=[];rr.where&&(sr=function(hr){const dr=__PRIVATE_fromFilter(hr);return dr instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(dr)?dr.getFilters():[dr]}(rr.where));let ar=[];rr.orderBy&&(ar=function(hr){return hr.map(dr=>function(gr){return new OrderBy(__PRIVATE_fromFieldPathReference(gr.field),function(pr){switch(pr){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(gr.direction))}(dr))}(rr.orderBy));let cr=null;rr.limit&&(cr=function(hr){let dr;return dr=typeof hr=="object"?hr.value:hr,__PRIVATE_isNullOrUndefined(dr)?null:dr}(rr.limit));let lr=null;rr.startAt&&(lr=function(hr){const dr=!!hr.before,fr=hr.values||[];return new Bound(fr,dr)}(rr.startAt));let or=null;return rr.endAt&&(or=function(hr){const dr=!hr.before,fr=hr.values||[];return new Bound(fr,dr)}(rr.endAt)),__PRIVATE_newQuery(er,ir,ar,sr,cr,"F",lr,or)}function __PRIVATE_toListenRequestLabels(tr,er){const rr=function(ir){switch(ir){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(er.purpose);return rr==null?null:{"goog-listen-tags":rr}}function __PRIVATE_fromFilter(tr){return tr.unaryFilter!==void 0?function(rr){switch(rr.unaryFilter.op){case"IS_NAN":const nr=__PRIVATE_fromFieldPathReference(rr.unaryFilter.field);return FieldFilter.create(nr,"==",{doubleValue:NaN});case"IS_NULL":const ir=__PRIVATE_fromFieldPathReference(rr.unaryFilter.field);return FieldFilter.create(ir,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const sr=__PRIVATE_fromFieldPathReference(rr.unaryFilter.field);return FieldFilter.create(sr,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const ar=__PRIVATE_fromFieldPathReference(rr.unaryFilter.field);return FieldFilter.create(ar,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(tr):tr.fieldFilter!==void 0?function(rr){return FieldFilter.create(__PRIVATE_fromFieldPathReference(rr.fieldFilter.field),function(ir){switch(ir){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(rr.fieldFilter.op),rr.fieldFilter.value)}(tr):tr.compositeFilter!==void 0?function(rr){return CompositeFilter.create(rr.compositeFilter.filters.map(nr=>__PRIVATE_fromFilter(nr)),function(ir){switch(ir){case"AND":return"and";case"OR":return"or";default:return fail()}}(rr.compositeFilter.op))}(tr):fail()}function __PRIVATE_toDirection(tr){return Te[tr]}function __PRIVATE_toOperatorName(tr){return Ee[tr]}function __PRIVATE_toCompositeOperatorName(tr){return de$1[tr]}function __PRIVATE_toFieldPathReference(tr){return{fieldPath:tr.canonicalString()}}function __PRIVATE_fromFieldPathReference(tr){return FieldPath$1.fromServerFormat(tr.fieldPath)}function __PRIVATE_toFilter(tr){return tr instanceof FieldFilter?function(rr){if(rr.op==="=="){if(__PRIVATE_isNanValue(rr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(rr.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(rr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(rr.field),op:"IS_NULL"}}}else if(rr.op==="!="){if(__PRIVATE_isNanValue(rr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(rr.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(rr.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(rr.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(rr.field),op:__PRIVATE_toOperatorName(rr.op),value:rr.value}}}(tr):tr instanceof CompositeFilter?function(rr){const nr=rr.getFilters().map(ir=>__PRIVATE_toFilter(ir));return nr.length===1?nr[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(rr.op),filters:nr}}}(tr):fail()}function __PRIVATE_toDocumentMask(tr){const er=[];return tr.fields.forEach(rr=>er.push(rr.canonicalString())),{fieldPaths:er}}function __PRIVATE_isValidResourceName(tr){return tr.length>=4&&tr.get(0)==="projects"&&tr.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(er,rr,nr,ir,sr=SnapshotVersion.min(),ar=SnapshotVersion.min(),cr=ByteString.EMPTY_BYTE_STRING,lr=null){this.target=er,this.targetId=rr,this.purpose=nr,this.sequenceNumber=ir,this.snapshotVersion=sr,this.lastLimboFreeSnapshotVersion=ar,this.resumeToken=cr,this.expectedCount=lr}withSequenceNumber(er){return new TargetData(this.target,this.targetId,this.purpose,er,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(er,rr){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,rr,this.lastLimboFreeSnapshotVersion,er,null)}withExpectedCount(er){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,er)}withLastLimboFreeSnapshotVersion(er){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,er,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(er){this.ct=er}}function __PRIVATE_fromBundledQuery(tr){const er=__PRIVATE_convertQueryTargetToQuery({parent:tr.parent,structuredQuery:tr.structuredQuery});return tr.limitType==="LAST"?__PRIVATE_queryWithLimit(er,er.limit,"L"):er}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.un=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(er,rr){return this.un.add(rr),PersistencePromise.resolve()}getCollectionParents(er,rr){return PersistencePromise.resolve(this.un.getEntries(rr))}addFieldIndex(er,rr){return PersistencePromise.resolve()}deleteFieldIndex(er,rr){return PersistencePromise.resolve()}deleteAllFieldIndexes(er){return PersistencePromise.resolve()}createTargetIndexes(er,rr){return PersistencePromise.resolve()}getDocumentsMatchingTarget(er,rr){return PersistencePromise.resolve(null)}getIndexType(er,rr){return PersistencePromise.resolve(0)}getFieldIndexes(er,rr){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(er){return PersistencePromise.resolve(null)}getMinOffset(er,rr){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(er,rr){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(er,rr,nr){return PersistencePromise.resolve()}updateIndexEntries(er,rr){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(er){const rr=er.lastSegment(),nr=er.popLast(),ir=this.index[rr]||new SortedSet(ResourcePath.comparator),sr=!ir.has(nr);return this.index[rr]=ir.add(nr),sr}has(er){const rr=er.lastSegment(),nr=er.popLast(),ir=this.index[rr];return ir&&ir.has(nr)}getEntries(er){return(this.index[er]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(er){this.Ln=er}next(){return this.Ln+=2,this.Ln}static Bn(){return new __PRIVATE_TargetIdGenerator(0)}static kn(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(er=>er.toString(),(er,rr)=>er.isEqual(rr)),this.changesApplied=!1}addEntry(er){this.assertNotApplied(),this.changes.set(er.key,er)}removeEntry(er,rr){this.assertNotApplied(),this.changes.set(er,MutableDocument.newInvalidDocument(er).setReadTime(rr))}getEntry(er,rr){this.assertNotApplied();const nr=this.changes.get(rr);return nr!==void 0?PersistencePromise.resolve(nr):this.getFromCache(er,rr)}getEntries(er,rr){return this.getAllFromCache(er,rr)}apply(er){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(er)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(er,rr){this.overlayedDocument=er,this.mutatedFields=rr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(er,rr,nr,ir){this.remoteDocumentCache=er,this.mutationQueue=rr,this.documentOverlayCache=nr,this.indexManager=ir}getDocument(er,rr){let nr=null;return this.documentOverlayCache.getOverlay(er,rr).next(ir=>(nr=ir,this.remoteDocumentCache.getEntry(er,rr))).next(ir=>(nr!==null&&__PRIVATE_mutationApplyToLocalView(nr.mutation,ir,FieldMask.empty(),Timestamp.now()),ir))}getDocuments(er,rr){return this.remoteDocumentCache.getEntries(er,rr).next(nr=>this.getLocalViewOfDocuments(er,nr,__PRIVATE_documentKeySet()).next(()=>nr))}getLocalViewOfDocuments(er,rr,nr=__PRIVATE_documentKeySet()){const ir=__PRIVATE_newOverlayMap();return this.populateOverlays(er,ir,rr).next(()=>this.computeViews(er,rr,ir,nr).next(sr=>{let ar=documentMap();return sr.forEach((cr,lr)=>{ar=ar.insert(cr,lr.overlayedDocument)}),ar}))}getOverlayedDocuments(er,rr){const nr=__PRIVATE_newOverlayMap();return this.populateOverlays(er,nr,rr).next(()=>this.computeViews(er,rr,nr,__PRIVATE_documentKeySet()))}populateOverlays(er,rr,nr){const ir=[];return nr.forEach(sr=>{rr.has(sr)||ir.push(sr)}),this.documentOverlayCache.getOverlays(er,ir).next(sr=>{sr.forEach((ar,cr)=>{rr.set(ar,cr)})})}computeViews(er,rr,nr,ir){let sr=__PRIVATE_mutableDocumentMap();const ar=__PRIVATE_newDocumentKeyMap(),cr=function(){return __PRIVATE_newDocumentKeyMap()}();return rr.forEach((lr,or)=>{const ur=nr.get(or.key);ir.has(or.key)&&(ur===void 0||ur.mutation instanceof __PRIVATE_PatchMutation)?sr=sr.insert(or.key,or):ur!==void 0?(ar.set(or.key,ur.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(ur.mutation,or,ur.mutation.getFieldMask(),Timestamp.now())):ar.set(or.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(er,sr).next(lr=>(lr.forEach((or,ur)=>ar.set(or,ur)),rr.forEach((or,ur)=>{var hr;return cr.set(or,new OverlayedDocument(ur,(hr=ar.get(or))!==null&&hr!==void 0?hr:null))}),cr))}recalculateAndSaveOverlays(er,rr){const nr=__PRIVATE_newDocumentKeyMap();let ir=new SortedMap((ar,cr)=>ar-cr),sr=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(er,rr).next(ar=>{for(const cr of ar)cr.keys().forEach(lr=>{const or=rr.get(lr);if(or===null)return;let ur=nr.get(lr)||FieldMask.empty();ur=cr.applyToLocalView(or,ur),nr.set(lr,ur);const hr=(ir.get(cr.batchId)||__PRIVATE_documentKeySet()).add(lr);ir=ir.insert(cr.batchId,hr)})}).next(()=>{const ar=[],cr=ir.getReverseIterator();for(;cr.hasNext();){const lr=cr.getNext(),or=lr.key,ur=lr.value,hr=__PRIVATE_newMutationMap();ur.forEach(dr=>{if(!sr.has(dr)){const fr=__PRIVATE_calculateOverlayMutation(rr.get(dr),nr.get(dr));fr!==null&&hr.set(dr,fr),sr=sr.add(dr)}}),ar.push(this.documentOverlayCache.saveOverlays(er,or,hr))}return PersistencePromise.waitFor(ar)}).next(()=>nr)}recalculateAndSaveOverlaysForDocumentKeys(er,rr){return this.remoteDocumentCache.getEntries(er,rr).next(nr=>this.recalculateAndSaveOverlays(er,nr))}getDocumentsMatchingQuery(er,rr,nr,ir){return function(ar){return DocumentKey.isDocumentKey(ar.path)&&ar.collectionGroup===null&&ar.filters.length===0}(rr)?this.getDocumentsMatchingDocumentQuery(er,rr.path):__PRIVATE_isCollectionGroupQuery(rr)?this.getDocumentsMatchingCollectionGroupQuery(er,rr,nr,ir):this.getDocumentsMatchingCollectionQuery(er,rr,nr,ir)}getNextDocuments(er,rr,nr,ir){return this.remoteDocumentCache.getAllFromCollectionGroup(er,rr,nr,ir).next(sr=>{const ar=ir-sr.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(er,rr,nr.largestBatchId,ir-sr.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let cr=-1,lr=sr;return ar.next(or=>PersistencePromise.forEach(or,(ur,hr)=>(cr<hr.largestBatchId&&(cr=hr.largestBatchId),sr.get(ur)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(er,ur).next(dr=>{lr=lr.insert(ur,dr)}))).next(()=>this.populateOverlays(er,or,sr)).next(()=>this.computeViews(er,lr,or,__PRIVATE_documentKeySet())).next(ur=>({batchId:cr,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(ur)})))})}getDocumentsMatchingDocumentQuery(er,rr){return this.getDocument(er,new DocumentKey(rr)).next(nr=>{let ir=documentMap();return nr.isFoundDocument()&&(ir=ir.insert(nr.key,nr)),ir})}getDocumentsMatchingCollectionGroupQuery(er,rr,nr,ir){const sr=rr.collectionGroup;let ar=documentMap();return this.indexManager.getCollectionParents(er,sr).next(cr=>PersistencePromise.forEach(cr,lr=>{const or=function(hr,dr){return new __PRIVATE_QueryImpl(dr,null,hr.explicitOrderBy.slice(),hr.filters.slice(),hr.limit,hr.limitType,hr.startAt,hr.endAt)}(rr,lr.child(sr));return this.getDocumentsMatchingCollectionQuery(er,or,nr,ir).next(ur=>{ur.forEach((hr,dr)=>{ar=ar.insert(hr,dr)})})}).next(()=>ar))}getDocumentsMatchingCollectionQuery(er,rr,nr,ir){let sr;return this.documentOverlayCache.getOverlaysForCollection(er,rr.path,nr.largestBatchId).next(ar=>(sr=ar,this.remoteDocumentCache.getDocumentsMatchingQuery(er,rr,nr,sr,ir))).next(ar=>{sr.forEach((lr,or)=>{const ur=or.getKey();ar.get(ur)===null&&(ar=ar.insert(ur,MutableDocument.newInvalidDocument(ur)))});let cr=documentMap();return ar.forEach((lr,or)=>{const ur=sr.get(lr);ur!==void 0&&__PRIVATE_mutationApplyToLocalView(ur.mutation,or,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(rr,or)&&(cr=cr.insert(lr,or))}),cr})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(er){this.serializer=er,this.hr=new Map,this.Pr=new Map}getBundleMetadata(er,rr){return PersistencePromise.resolve(this.hr.get(rr))}saveBundleMetadata(er,rr){return this.hr.set(rr.id,function(ir){return{id:ir.id,version:ir.version,createTime:__PRIVATE_fromVersion(ir.createTime)}}(rr)),PersistencePromise.resolve()}getNamedQuery(er,rr){return PersistencePromise.resolve(this.Pr.get(rr))}saveNamedQuery(er,rr){return this.Pr.set(rr.name,function(ir){return{name:ir.name,query:__PRIVATE_fromBundledQuery(ir.bundledQuery),readTime:__PRIVATE_fromVersion(ir.readTime)}}(rr)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Ir=new Map}getOverlay(er,rr){return PersistencePromise.resolve(this.overlays.get(rr))}getOverlays(er,rr){const nr=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(rr,ir=>this.getOverlay(er,ir).next(sr=>{sr!==null&&nr.set(ir,sr)})).next(()=>nr)}saveOverlays(er,rr,nr){return nr.forEach((ir,sr)=>{this.ht(er,rr,sr)}),PersistencePromise.resolve()}removeOverlaysForBatchId(er,rr,nr){const ir=this.Ir.get(nr);return ir!==void 0&&(ir.forEach(sr=>this.overlays=this.overlays.remove(sr)),this.Ir.delete(nr)),PersistencePromise.resolve()}getOverlaysForCollection(er,rr,nr){const ir=__PRIVATE_newOverlayMap(),sr=rr.length+1,ar=new DocumentKey(rr.child("")),cr=this.overlays.getIteratorFrom(ar);for(;cr.hasNext();){const lr=cr.getNext().value,or=lr.getKey();if(!rr.isPrefixOf(or.path))break;or.path.length===sr&&lr.largestBatchId>nr&&ir.set(lr.getKey(),lr)}return PersistencePromise.resolve(ir)}getOverlaysForCollectionGroup(er,rr,nr,ir){let sr=new SortedMap((or,ur)=>or-ur);const ar=this.overlays.getIterator();for(;ar.hasNext();){const or=ar.getNext().value;if(or.getKey().getCollectionGroup()===rr&&or.largestBatchId>nr){let ur=sr.get(or.largestBatchId);ur===null&&(ur=__PRIVATE_newOverlayMap(),sr=sr.insert(or.largestBatchId,ur)),ur.set(or.getKey(),or)}}const cr=__PRIVATE_newOverlayMap(),lr=sr.getIterator();for(;lr.hasNext()&&(lr.getNext().value.forEach((or,ur)=>cr.set(or,ur)),!(cr.size()>=ir)););return PersistencePromise.resolve(cr)}ht(er,rr,nr){const ir=this.overlays.get(nr.key);if(ir!==null){const ar=this.Ir.get(ir.largestBatchId).delete(nr.key);this.Ir.set(ir.largestBatchId,ar)}this.overlays=this.overlays.insert(nr.key,new Overlay(rr,nr));let sr=this.Ir.get(rr);sr===void 0&&(sr=__PRIVATE_documentKeySet(),this.Ir.set(rr,sr)),this.Ir.set(rr,sr.add(nr.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(er){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(er,rr){return this.sessionToken=rr,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Tr=new SortedSet(__PRIVATE_DocReference.Er),this.dr=new SortedSet(__PRIVATE_DocReference.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(er,rr){const nr=new __PRIVATE_DocReference(er,rr);this.Tr=this.Tr.add(nr),this.dr=this.dr.add(nr)}Rr(er,rr){er.forEach(nr=>this.addReference(nr,rr))}removeReference(er,rr){this.Vr(new __PRIVATE_DocReference(er,rr))}mr(er,rr){er.forEach(nr=>this.removeReference(nr,rr))}gr(er){const rr=new DocumentKey(new ResourcePath([])),nr=new __PRIVATE_DocReference(rr,er),ir=new __PRIVATE_DocReference(rr,er+1),sr=[];return this.dr.forEachInRange([nr,ir],ar=>{this.Vr(ar),sr.push(ar.key)}),sr}pr(){this.Tr.forEach(er=>this.Vr(er))}Vr(er){this.Tr=this.Tr.delete(er),this.dr=this.dr.delete(er)}yr(er){const rr=new DocumentKey(new ResourcePath([])),nr=new __PRIVATE_DocReference(rr,er),ir=new __PRIVATE_DocReference(rr,er+1);let sr=__PRIVATE_documentKeySet();return this.dr.forEachInRange([nr,ir],ar=>{sr=sr.add(ar.key)}),sr}containsKey(er){const rr=new __PRIVATE_DocReference(er,0),nr=this.Tr.firstAfterOrEqual(rr);return nr!==null&&er.isEqual(nr.key)}}class __PRIVATE_DocReference{constructor(er,rr){this.key=er,this.wr=rr}static Er(er,rr){return DocumentKey.comparator(er.key,rr.key)||__PRIVATE_primitiveComparator(er.wr,rr.wr)}static Ar(er,rr){return __PRIVATE_primitiveComparator(er.wr,rr.wr)||DocumentKey.comparator(er.key,rr.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(er,rr){this.indexManager=er,this.referenceDelegate=rr,this.mutationQueue=[],this.Sr=1,this.br=new SortedSet(__PRIVATE_DocReference.Er)}checkEmpty(er){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(er,rr,nr,ir){const sr=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const ar=new MutationBatch(sr,rr,nr,ir);this.mutationQueue.push(ar);for(const cr of ir)this.br=this.br.add(new __PRIVATE_DocReference(cr.key,sr)),this.indexManager.addToCollectionParentIndex(er,cr.key.path.popLast());return PersistencePromise.resolve(ar)}lookupMutationBatch(er,rr){return PersistencePromise.resolve(this.Dr(rr))}getNextMutationBatchAfterBatchId(er,rr){const nr=rr+1,ir=this.vr(nr),sr=ir<0?0:ir;return PersistencePromise.resolve(this.mutationQueue.length>sr?this.mutationQueue[sr]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(er){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(er,rr){const nr=new __PRIVATE_DocReference(rr,0),ir=new __PRIVATE_DocReference(rr,Number.POSITIVE_INFINITY),sr=[];return this.br.forEachInRange([nr,ir],ar=>{const cr=this.Dr(ar.wr);sr.push(cr)}),PersistencePromise.resolve(sr)}getAllMutationBatchesAffectingDocumentKeys(er,rr){let nr=new SortedSet(__PRIVATE_primitiveComparator);return rr.forEach(ir=>{const sr=new __PRIVATE_DocReference(ir,0),ar=new __PRIVATE_DocReference(ir,Number.POSITIVE_INFINITY);this.br.forEachInRange([sr,ar],cr=>{nr=nr.add(cr.wr)})}),PersistencePromise.resolve(this.Cr(nr))}getAllMutationBatchesAffectingQuery(er,rr){const nr=rr.path,ir=nr.length+1;let sr=nr;DocumentKey.isDocumentKey(sr)||(sr=sr.child(""));const ar=new __PRIVATE_DocReference(new DocumentKey(sr),0);let cr=new SortedSet(__PRIVATE_primitiveComparator);return this.br.forEachWhile(lr=>{const or=lr.key.path;return!!nr.isPrefixOf(or)&&(or.length===ir&&(cr=cr.add(lr.wr)),!0)},ar),PersistencePromise.resolve(this.Cr(cr))}Cr(er){const rr=[];return er.forEach(nr=>{const ir=this.Dr(nr);ir!==null&&rr.push(ir)}),rr}removeMutationBatch(er,rr){__PRIVATE_hardAssert(this.Fr(rr.batchId,"removed")===0),this.mutationQueue.shift();let nr=this.br;return PersistencePromise.forEach(rr.mutations,ir=>{const sr=new __PRIVATE_DocReference(ir.key,rr.batchId);return nr=nr.delete(sr),this.referenceDelegate.markPotentiallyOrphaned(er,ir.key)}).next(()=>{this.br=nr})}On(er){}containsKey(er,rr){const nr=new __PRIVATE_DocReference(rr,0),ir=this.br.firstAfterOrEqual(nr);return PersistencePromise.resolve(rr.isEqual(ir&&ir.key))}performConsistencyCheck(er){return this.mutationQueue.length,PersistencePromise.resolve()}Fr(er,rr){return this.vr(er)}vr(er){return this.mutationQueue.length===0?0:er-this.mutationQueue[0].batchId}Dr(er){const rr=this.vr(er);return rr<0||rr>=this.mutationQueue.length?null:this.mutationQueue[rr]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(er){this.Mr=er,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(er){this.indexManager=er}addEntry(er,rr){const nr=rr.key,ir=this.docs.get(nr),sr=ir?ir.size:0,ar=this.Mr(rr);return this.docs=this.docs.insert(nr,{document:rr.mutableCopy(),size:ar}),this.size+=ar-sr,this.indexManager.addToCollectionParentIndex(er,nr.path.popLast())}removeEntry(er){const rr=this.docs.get(er);rr&&(this.docs=this.docs.remove(er),this.size-=rr.size)}getEntry(er,rr){const nr=this.docs.get(rr);return PersistencePromise.resolve(nr?nr.document.mutableCopy():MutableDocument.newInvalidDocument(rr))}getEntries(er,rr){let nr=__PRIVATE_mutableDocumentMap();return rr.forEach(ir=>{const sr=this.docs.get(ir);nr=nr.insert(ir,sr?sr.document.mutableCopy():MutableDocument.newInvalidDocument(ir))}),PersistencePromise.resolve(nr)}getDocumentsMatchingQuery(er,rr,nr,ir){let sr=__PRIVATE_mutableDocumentMap();const ar=rr.path,cr=new DocumentKey(ar.child("")),lr=this.docs.getIteratorFrom(cr);for(;lr.hasNext();){const{key:or,value:{document:ur}}=lr.getNext();if(!ar.isPrefixOf(or.path))break;or.path.length>ar.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(ur),nr)<=0||(ir.has(ur.key)||__PRIVATE_queryMatches(rr,ur))&&(sr=sr.insert(ur.key,ur.mutableCopy()))}return PersistencePromise.resolve(sr)}getAllFromCollectionGroup(er,rr,nr,ir){fail()}Or(er,rr){return PersistencePromise.forEach(this.docs,nr=>rr(nr))}newChangeBuffer(er){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(er){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(er){super(),this.cr=er}applyChanges(er){const rr=[];return this.changes.forEach((nr,ir)=>{ir.isValidDocument()?rr.push(this.cr.addEntry(er,ir)):this.cr.removeEntry(nr)}),PersistencePromise.waitFor(rr)}getFromCache(er,rr){return this.cr.getEntry(er,rr)}getAllFromCache(er,rr){return this.cr.getEntries(er,rr)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(er){this.persistence=er,this.Nr=new ObjectMap(rr=>__PRIVATE_canonifyTarget(rr),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Lr=0,this.Br=new __PRIVATE_ReferenceSet,this.targetCount=0,this.kr=__PRIVATE_TargetIdGenerator.Bn()}forEachTarget(er,rr){return this.Nr.forEach((nr,ir)=>rr(ir)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(er){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(er){return PersistencePromise.resolve(this.Lr)}allocateTargetId(er){return this.highestTargetId=this.kr.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(er,rr,nr){return nr&&(this.lastRemoteSnapshotVersion=nr),rr>this.Lr&&(this.Lr=rr),PersistencePromise.resolve()}Kn(er){this.Nr.set(er.target,er);const rr=er.targetId;rr>this.highestTargetId&&(this.kr=new __PRIVATE_TargetIdGenerator(rr),this.highestTargetId=rr),er.sequenceNumber>this.Lr&&(this.Lr=er.sequenceNumber)}addTargetData(er,rr){return this.Kn(rr),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(er,rr){return this.Kn(rr),PersistencePromise.resolve()}removeTargetData(er,rr){return this.Nr.delete(rr.target),this.Br.gr(rr.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(er,rr,nr){let ir=0;const sr=[];return this.Nr.forEach((ar,cr)=>{cr.sequenceNumber<=rr&&nr.get(cr.targetId)===null&&(this.Nr.delete(ar),sr.push(this.removeMatchingKeysForTargetId(er,cr.targetId)),ir++)}),PersistencePromise.waitFor(sr).next(()=>ir)}getTargetCount(er){return PersistencePromise.resolve(this.targetCount)}getTargetData(er,rr){const nr=this.Nr.get(rr)||null;return PersistencePromise.resolve(nr)}addMatchingKeys(er,rr,nr){return this.Br.Rr(rr,nr),PersistencePromise.resolve()}removeMatchingKeys(er,rr,nr){this.Br.mr(rr,nr);const ir=this.persistence.referenceDelegate,sr=[];return ir&&rr.forEach(ar=>{sr.push(ir.markPotentiallyOrphaned(er,ar))}),PersistencePromise.waitFor(sr)}removeMatchingKeysForTargetId(er,rr){return this.Br.gr(rr),PersistencePromise.resolve()}getMatchingKeysForTargetId(er,rr){const nr=this.Br.yr(rr);return PersistencePromise.resolve(nr)}containsKey(er,rr){return PersistencePromise.resolve(this.Br.containsKey(rr))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(er,rr){this.qr={},this.overlays={},this.Qr=new __PRIVATE_ListenSequence(0),this.Kr=!1,this.Kr=!0,this.$r=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=er(this),this.Ur=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(ir){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(ir)}(nr=>this.referenceDelegate.Wr(nr)),this.serializer=new __PRIVATE_LocalSerializer(rr),this.Gr=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(er){return this.indexManager}getDocumentOverlayCache(er){let rr=this.overlays[er.toKey()];return rr||(rr=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[er.toKey()]=rr),rr}getMutationQueue(er,rr){let nr=this.qr[er.toKey()];return nr||(nr=new __PRIVATE_MemoryMutationQueue(rr,this.referenceDelegate),this.qr[er.toKey()]=nr),nr}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(er,rr,nr){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",er);const ir=new __PRIVATE_MemoryTransaction(this.Qr.next());return this.referenceDelegate.zr(),nr(ir).next(sr=>this.referenceDelegate.jr(ir).next(()=>sr)).toPromise().then(sr=>(ir.raiseOnCommittedEvent(),sr))}Hr(er,rr){return PersistencePromise.or(Object.values(this.qr).map(nr=>()=>nr.containsKey(er,rr)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(er){super(),this.currentSequenceNumber=er}}class __PRIVATE_MemoryEagerDelegate{constructor(er){this.persistence=er,this.Jr=new __PRIVATE_ReferenceSet,this.Yr=null}static Zr(er){return new __PRIVATE_MemoryEagerDelegate(er)}get Xr(){if(this.Yr)return this.Yr;throw fail()}addReference(er,rr,nr){return this.Jr.addReference(nr,rr),this.Xr.delete(nr.toString()),PersistencePromise.resolve()}removeReference(er,rr,nr){return this.Jr.removeReference(nr,rr),this.Xr.add(nr.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(er,rr){return this.Xr.add(rr.toString()),PersistencePromise.resolve()}removeTarget(er,rr){this.Jr.gr(rr.targetId).forEach(ir=>this.Xr.add(ir.toString()));const nr=this.persistence.getTargetCache();return nr.getMatchingKeysForTargetId(er,rr.targetId).next(ir=>{ir.forEach(sr=>this.Xr.add(sr.toString()))}).next(()=>nr.removeTargetData(er,rr))}zr(){this.Yr=new Set}jr(er){const rr=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Xr,nr=>{const ir=DocumentKey.fromPath(nr);return this.ei(er,ir).next(sr=>{sr||rr.removeEntry(ir,SnapshotVersion.min())})}).next(()=>(this.Yr=null,rr.apply(er)))}updateLimboDocument(er,rr){return this.ei(er,rr).next(nr=>{nr?this.Xr.delete(rr.toString()):this.Xr.add(rr.toString())})}Wr(er){return 0}ei(er,rr){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Jr.containsKey(rr)),()=>this.persistence.getTargetCache().containsKey(er,rr),()=>this.persistence.Hr(er,rr)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(er,rr,nr,ir){this.targetId=er,this.fromCache=rr,this.$i=nr,this.Ui=ir}static Wi(er,rr){let nr=__PRIVATE_documentKeySet(),ir=__PRIVATE_documentKeySet();for(const sr of rr.docChanges)switch(sr.type){case 0:nr=nr.add(sr.doc.key);break;case 1:ir=ir.add(sr.doc.key)}return new __PRIVATE_LocalViewChanges(er,rr.fromCache,nr,ir)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(er){this._documentReadCount+=er}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(er,rr){this.Ji=er,this.indexManager=rr,this.Gi=!0}getDocumentsMatchingQuery(er,rr,nr,ir){const sr={result:null};return this.Yi(er,rr).next(ar=>{sr.result=ar}).next(()=>{if(!sr.result)return this.Zi(er,rr,ir,nr).next(ar=>{sr.result=ar})}).next(()=>{if(sr.result)return;const ar=new QueryContext;return this.Xi(er,rr,ar).next(cr=>{if(sr.result=cr,this.zi)return this.es(er,rr,ar,cr.size)})}).next(()=>sr.result)}es(er,rr,nr,ir){return nr.documentReadCount<this.ji?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(rr),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(rr),"scans",nr.documentReadCount,"local documents and returns",ir,"documents as results."),nr.documentReadCount>this.Hi*ir?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(rr),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(er,__PRIVATE_queryToTarget(rr))):PersistencePromise.resolve())}Yi(er,rr){if(__PRIVATE_queryMatchesAllDocuments(rr))return PersistencePromise.resolve(null);let nr=__PRIVATE_queryToTarget(rr);return this.indexManager.getIndexType(er,nr).next(ir=>ir===0?null:(rr.limit!==null&&ir===1&&(rr=__PRIVATE_queryWithLimit(rr,null,"F"),nr=__PRIVATE_queryToTarget(rr)),this.indexManager.getDocumentsMatchingTarget(er,nr).next(sr=>{const ar=__PRIVATE_documentKeySet(...sr);return this.Ji.getDocuments(er,ar).next(cr=>this.indexManager.getMinOffset(er,nr).next(lr=>{const or=this.ts(rr,cr);return this.ns(rr,or,ar,lr.readTime)?this.Yi(er,__PRIVATE_queryWithLimit(rr,null,"F")):this.rs(er,or,rr,lr)}))})))}Zi(er,rr,nr,ir){return __PRIVATE_queryMatchesAllDocuments(rr)||ir.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.Ji.getDocuments(er,nr).next(sr=>{const ar=this.ts(rr,sr);return this.ns(rr,ar,nr,ir)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",ir.toString(),__PRIVATE_stringifyQuery(rr)),this.rs(er,ar,rr,__PRIVATE_newIndexOffsetSuccessorFromReadTime(ir,-1)).next(cr=>cr))})}ts(er,rr){let nr=new SortedSet(__PRIVATE_newQueryComparator(er));return rr.forEach((ir,sr)=>{__PRIVATE_queryMatches(er,sr)&&(nr=nr.add(sr))}),nr}ns(er,rr,nr,ir){if(er.limit===null)return!1;if(nr.size!==rr.size)return!0;const sr=er.limitType==="F"?rr.last():rr.first();return!!sr&&(sr.hasPendingWrites||sr.version.compareTo(ir)>0)}Xi(er,rr,nr){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(rr)),this.Ji.getDocumentsMatchingQuery(er,rr,IndexOffset.min(),nr)}rs(er,rr,nr,ir){return this.Ji.getDocumentsMatchingQuery(er,nr,ir).next(sr=>(rr.forEach(ar=>{sr=sr.insert(ar.key,ar)}),sr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(er,rr,nr,ir){this.persistence=er,this.ss=rr,this.serializer=ir,this.os=new SortedMap(__PRIVATE_primitiveComparator),this._s=new ObjectMap(sr=>__PRIVATE_canonifyTarget(sr),__PRIVATE_targetEquals),this.us=new Map,this.cs=er.getRemoteDocumentCache(),this.Ur=er.getTargetCache(),this.Gr=er.getBundleCache(),this.ls(nr)}ls(er){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(er),this.indexManager=this.persistence.getIndexManager(er),this.mutationQueue=this.persistence.getMutationQueue(er,this.indexManager),this.localDocuments=new LocalDocumentsView(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(er){return this.persistence.runTransaction("Collect garbage","readwrite-primary",rr=>er.collect(rr,this.os))}}function __PRIVATE_newLocalStore(tr,er,rr,nr){return new __PRIVATE_LocalStoreImpl(tr,er,rr,nr)}async function __PRIVATE_localStoreHandleUserChange(tr,er){const rr=__PRIVATE_debugCast(tr);return await rr.persistence.runTransaction("Handle user change","readonly",nr=>{let ir;return rr.mutationQueue.getAllMutationBatches(nr).next(sr=>(ir=sr,rr.ls(er),rr.mutationQueue.getAllMutationBatches(nr))).next(sr=>{const ar=[],cr=[];let lr=__PRIVATE_documentKeySet();for(const or of ir){ar.push(or.batchId);for(const ur of or.mutations)lr=lr.add(ur.key)}for(const or of sr){cr.push(or.batchId);for(const ur of or.mutations)lr=lr.add(ur.key)}return rr.localDocuments.getDocuments(nr,lr).next(or=>({hs:or,removedBatchIds:ar,addedBatchIds:cr}))})})}function __PRIVATE_localStoreAcknowledgeBatch(tr,er){const rr=__PRIVATE_debugCast(tr);return rr.persistence.runTransaction("Acknowledge batch","readwrite-primary",nr=>{const ir=er.batch.keys(),sr=rr.cs.newChangeBuffer({trackRemovals:!0});return function(cr,lr,or,ur){const hr=or.batch,dr=hr.keys();let fr=PersistencePromise.resolve();return dr.forEach(gr=>{fr=fr.next(()=>ur.getEntry(lr,gr)).next(br=>{const pr=or.docVersions.get(gr);__PRIVATE_hardAssert(pr!==null),br.version.compareTo(pr)<0&&(hr.applyToRemoteDocument(br,or),br.isValidDocument()&&(br.setReadTime(or.commitVersion),ur.addEntry(br)))})}),fr.next(()=>cr.mutationQueue.removeMutationBatch(lr,hr))}(rr,nr,er,sr).next(()=>sr.apply(nr)).next(()=>rr.mutationQueue.performConsistencyCheck(nr)).next(()=>rr.documentOverlayCache.removeOverlaysForBatchId(nr,ir,er.batch.batchId)).next(()=>rr.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(nr,function(cr){let lr=__PRIVATE_documentKeySet();for(let or=0;or<cr.mutationResults.length;++or)cr.mutationResults[or].transformResults.length>0&&(lr=lr.add(cr.batch.mutations[or].key));return lr}(er))).next(()=>rr.localDocuments.getDocuments(nr,ir))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(tr){const er=__PRIVATE_debugCast(tr);return er.persistence.runTransaction("Get last remote snapshot version","readonly",rr=>er.Ur.getLastRemoteSnapshotVersion(rr))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(tr,er){const rr=__PRIVATE_debugCast(tr),nr=er.snapshotVersion;let ir=rr.os;return rr.persistence.runTransaction("Apply remote event","readwrite-primary",sr=>{const ar=rr.cs.newChangeBuffer({trackRemovals:!0});ir=rr.os;const cr=[];er.targetChanges.forEach((ur,hr)=>{const dr=ir.get(hr);if(!dr)return;cr.push(rr.Ur.removeMatchingKeys(sr,ur.removedDocuments,hr).next(()=>rr.Ur.addMatchingKeys(sr,ur.addedDocuments,hr)));let fr=dr.withSequenceNumber(sr.currentSequenceNumber);er.targetMismatches.get(hr)!==null?fr=fr.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):ur.resumeToken.approximateByteSize()>0&&(fr=fr.withResumeToken(ur.resumeToken,nr)),ir=ir.insert(hr,fr),function(br,pr,mr){return br.resumeToken.approximateByteSize()===0||pr.snapshotVersion.toMicroseconds()-br.snapshotVersion.toMicroseconds()>=3e8?!0:mr.addedDocuments.size+mr.modifiedDocuments.size+mr.removedDocuments.size>0}(dr,fr,ur)&&cr.push(rr.Ur.updateTargetData(sr,fr))});let lr=__PRIVATE_mutableDocumentMap(),or=__PRIVATE_documentKeySet();if(er.documentUpdates.forEach(ur=>{er.resolvedLimboDocuments.has(ur)&&cr.push(rr.persistence.referenceDelegate.updateLimboDocument(sr,ur))}),cr.push(__PRIVATE_populateDocumentChangeBuffer(sr,ar,er.documentUpdates).next(ur=>{lr=ur.Ps,or=ur.Is})),!nr.isEqual(SnapshotVersion.min())){const ur=rr.Ur.getLastRemoteSnapshotVersion(sr).next(hr=>rr.Ur.setTargetsMetadata(sr,sr.currentSequenceNumber,nr));cr.push(ur)}return PersistencePromise.waitFor(cr).next(()=>ar.apply(sr)).next(()=>rr.localDocuments.getLocalViewOfDocuments(sr,lr,or)).next(()=>lr)}).then(sr=>(rr.os=ir,sr))}function __PRIVATE_populateDocumentChangeBuffer(tr,er,rr){let nr=__PRIVATE_documentKeySet(),ir=__PRIVATE_documentKeySet();return rr.forEach(sr=>nr=nr.add(sr)),er.getEntries(tr,nr).next(sr=>{let ar=__PRIVATE_mutableDocumentMap();return rr.forEach((cr,lr)=>{const or=sr.get(cr);lr.isFoundDocument()!==or.isFoundDocument()&&(ir=ir.add(cr)),lr.isNoDocument()&&lr.version.isEqual(SnapshotVersion.min())?(er.removeEntry(cr,lr.readTime),ar=ar.insert(cr,lr)):!or.isValidDocument()||lr.version.compareTo(or.version)>0||lr.version.compareTo(or.version)===0&&or.hasPendingWrites?(er.addEntry(lr),ar=ar.insert(cr,lr)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",cr,". Current version:",or.version," Watch version:",lr.version)}),{Ps:ar,Is:ir}})}function __PRIVATE_localStoreGetNextMutationBatch(tr,er){const rr=__PRIVATE_debugCast(tr);return rr.persistence.runTransaction("Get next mutation batch","readonly",nr=>(er===void 0&&(er=-1),rr.mutationQueue.getNextMutationBatchAfterBatchId(nr,er)))}function __PRIVATE_localStoreAllocateTarget(tr,er){const rr=__PRIVATE_debugCast(tr);return rr.persistence.runTransaction("Allocate target","readwrite",nr=>{let ir;return rr.Ur.getTargetData(nr,er).next(sr=>sr?(ir=sr,PersistencePromise.resolve(ir)):rr.Ur.allocateTargetId(nr).next(ar=>(ir=new TargetData(er,ar,"TargetPurposeListen",nr.currentSequenceNumber),rr.Ur.addTargetData(nr,ir).next(()=>ir))))}).then(nr=>{const ir=rr.os.get(nr.targetId);return(ir===null||nr.snapshotVersion.compareTo(ir.snapshotVersion)>0)&&(rr.os=rr.os.insert(nr.targetId,nr),rr._s.set(er,nr.targetId)),nr})}async function __PRIVATE_localStoreReleaseTarget(tr,er,rr){const nr=__PRIVATE_debugCast(tr),ir=nr.os.get(er),sr=rr?"readwrite":"readwrite-primary";try{rr||await nr.persistence.runTransaction("Release target",sr,ar=>nr.persistence.referenceDelegate.removeTarget(ar,ir))}catch(ar){if(!__PRIVATE_isIndexedDbTransactionError(ar))throw ar;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${er}: ${ar}`)}nr.os=nr.os.remove(er),nr._s.delete(ir.target)}function __PRIVATE_localStoreExecuteQuery(tr,er,rr){const nr=__PRIVATE_debugCast(tr);let ir=SnapshotVersion.min(),sr=__PRIVATE_documentKeySet();return nr.persistence.runTransaction("Execute query","readwrite",ar=>function(lr,or,ur){const hr=__PRIVATE_debugCast(lr),dr=hr._s.get(ur);return dr!==void 0?PersistencePromise.resolve(hr.os.get(dr)):hr.Ur.getTargetData(or,ur)}(nr,ar,__PRIVATE_queryToTarget(er)).next(cr=>{if(cr)return ir=cr.lastLimboFreeSnapshotVersion,nr.Ur.getMatchingKeysForTargetId(ar,cr.targetId).next(lr=>{sr=lr})}).next(()=>nr.ss.getDocumentsMatchingQuery(ar,er,rr?ir:SnapshotVersion.min(),rr?sr:__PRIVATE_documentKeySet())).next(cr=>(__PRIVATE_setMaxReadTime(nr,__PRIVATE_queryCollectionGroup(er),cr),{documents:cr,Ts:sr})))}function __PRIVATE_setMaxReadTime(tr,er,rr){let nr=tr.us.get(er)||SnapshotVersion.min();rr.forEach((ir,sr)=>{sr.readTime.compareTo(nr)>0&&(nr=sr.readTime)}),tr.us.set(er,nr)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}fs(er){this.activeTargetIds=this.activeTargetIds.add(er)}gs(er){this.activeTargetIds=this.activeTargetIds.delete(er)}Vs(){const er={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(er)}}class __PRIVATE_MemorySharedClientState{constructor(){this.so=new __PRIVATE_LocalClientState,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(er){}updateMutationState(er,rr,nr){}addLocalQueryTarget(er,rr=!0){return rr&&this.so.fs(er),this.oo[er]||"not-current"}updateQueryState(er,rr,nr){this.oo[er]=rr}removeLocalQueryTarget(er){this.so.gs(er)}isLocalQueryTarget(er){return this.so.activeTargetIds.has(er)}clearQueryState(er){delete this.oo[er]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(er){return this.so.activeTargetIds.has(er)}start(){return this.so=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(er,rr,nr){}setOnlineState(er){}shutdown(){}writeSequenceNumber(er){}notifyBundleLoaded(er){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{_o(er){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(er){this.ho.push(er)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const er of this.ho)er(0)}lo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const er of this.ho)er(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let me$1=null;function __PRIVATE_generateUniqueDebugId(){return me$1===null?me$1=function(){return 268435456+Math.round(2147483648*Math.random())}():me$1++,"0x"+me$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(er){this.Io=er.Io,this.To=er.To}Eo(er){this.Ao=er}Ro(er){this.Vo=er}mo(er){this.fo=er}onMessage(er){this.po=er}close(){this.To()}send(er){this.Io(er)}yo(){this.Ao()}wo(){this.Vo()}So(er){this.fo(er)}bo(er){this.po(er)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(rr){this.databaseInfo=rr,this.databaseId=rr.databaseId;const nr=rr.ssl?"https":"http",ir=encodeURIComponent(this.databaseId.projectId),sr=encodeURIComponent(this.databaseId.database);this.Do=nr+"://"+rr.host,this.vo=`projects/${ir}/databases/${sr}`,this.Co=this.databaseId.database==="(default)"?`project_id=${ir}`:`project_id=${ir}&database_id=${sr}`}get Fo(){return!1}Mo(rr,nr,ir,sr,ar){const cr=__PRIVATE_generateUniqueDebugId(),lr=this.xo(rr,nr.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${rr}' ${cr}:`,lr,ir);const or={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(or,sr,ar),this.No(rr,lr,or,ir).then(ur=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${rr}' ${cr}: `,ur),ur),ur=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${rr}' ${cr} failed with error: `,ur,"url: ",lr,"request:",ir),ur})}Lo(rr,nr,ir,sr,ar,cr){return this.Mo(rr,nr,ir,sr,ar)}Oo(rr,nr,ir){rr["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S$1}(),rr["Content-Type"]="text/plain",this.databaseInfo.appId&&(rr["X-Firebase-GMPID"]=this.databaseInfo.appId),nr&&nr.headers.forEach((sr,ar)=>rr[ar]=sr),ir&&ir.headers.forEach((sr,ar)=>rr[ar]=sr)}xo(rr,nr){const ir=fe$1[rr];return`${this.Do}/v1/${nr}:${ir}`}terminate(){}}{constructor(er){super(er),this.forceLongPolling=er.forceLongPolling,this.autoDetectLongPolling=er.autoDetectLongPolling,this.useFetchStreams=er.useFetchStreams,this.longPollingOptions=er.longPollingOptions}No(er,rr,nr,ir){const sr=__PRIVATE_generateUniqueDebugId();return new Promise((ar,cr)=>{const lr=new XhrIo;lr.setWithCredentials(!0),lr.listenOnce(EventType.COMPLETE,()=>{try{switch(lr.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const ur=lr.getResponseJson();__PRIVATE_logDebug(ge$1,`XHR for RPC '${er}' ${sr} received:`,JSON.stringify(ur)),ar(ur);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(ge$1,`RPC '${er}' ${sr} timed out`),cr(new FirestoreError(D$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const hr=lr.getStatus();if(__PRIVATE_logDebug(ge$1,`RPC '${er}' ${sr} failed with status:`,hr,"response text:",lr.getResponseText()),hr>0){let dr=lr.getResponseJson();Array.isArray(dr)&&(dr=dr[0]);const fr=dr==null?void 0:dr.error;if(fr&&fr.status&&fr.message){const gr=function(pr){const mr=pr.toLowerCase().replace(/_/g,"-");return Object.values(D$1).indexOf(mr)>=0?mr:D$1.UNKNOWN}(fr.status);cr(new FirestoreError(gr,fr.message))}else cr(new FirestoreError(D$1.UNKNOWN,"Server responded with status "+lr.getStatus()))}else cr(new FirestoreError(D$1.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(ge$1,`RPC '${er}' ${sr} completed.`)}});const or=JSON.stringify(ir);__PRIVATE_logDebug(ge$1,`RPC '${er}' ${sr} sending request:`,ir),lr.send(rr,"POST",or,nr,15)})}Bo(er,rr,nr){const ir=__PRIVATE_generateUniqueDebugId(),sr=[this.Do,"/","google.firestore.v1.Firestore","/",er,"/channel"],ar=createWebChannelTransport(),cr=getStatEventTarget(),lr={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},or=this.longPollingOptions.timeoutSeconds;or!==void 0&&(lr.longPollingTimeout=Math.round(1e3*or)),this.useFetchStreams&&(lr.useFetchStreams=!0),this.Oo(lr.initMessageHeaders,rr,nr),lr.encodeInitMessageHeaders=!0;const ur=sr.join("");__PRIVATE_logDebug(ge$1,`Creating RPC '${er}' stream ${ir}: ${ur}`,lr);const hr=ar.createWebChannel(ur,lr);let dr=!1,fr=!1;const gr=new __PRIVATE_StreamBridge({Io:pr=>{fr?__PRIVATE_logDebug(ge$1,`Not sending because RPC '${er}' stream ${ir} is closed:`,pr):(dr||(__PRIVATE_logDebug(ge$1,`Opening RPC '${er}' stream ${ir} transport.`),hr.open(),dr=!0),__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} sending:`,pr),hr.send(pr))},To:()=>hr.close()}),br=(pr,mr,yr)=>{pr.listen(mr,xr=>{try{yr(xr)}catch(vr){setTimeout(()=>{throw vr},0)}})};return br(hr,WebChannel.EventType.OPEN,()=>{fr||(__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} transport opened.`),gr.yo())}),br(hr,WebChannel.EventType.CLOSE,()=>{fr||(fr=!0,__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} transport closed`),gr.So())}),br(hr,WebChannel.EventType.ERROR,pr=>{fr||(fr=!0,__PRIVATE_logWarn(ge$1,`RPC '${er}' stream ${ir} transport errored:`,pr),gr.So(new FirestoreError(D$1.UNAVAILABLE,"The operation could not be completed")))}),br(hr,WebChannel.EventType.MESSAGE,pr=>{var mr;if(!fr){const yr=pr.data[0];__PRIVATE_hardAssert(!!yr);const xr=yr,vr=xr.error||((mr=xr[0])===null||mr===void 0?void 0:mr.error);if(vr){__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} received error:`,vr);const _r=vr.status;let Er=function(Nr){const Dr=le$1[Nr];if(Dr!==void 0)return __PRIVATE_mapCodeFromRpcCode(Dr)}(_r),Tr=vr.message;Er===void 0&&(Er=D$1.INTERNAL,Tr="Unknown error status: "+_r+" with message "+vr.message),fr=!0,gr.So(new FirestoreError(Er,Tr)),hr.close()}else __PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} received:`,yr),gr.bo(yr)}}),br(cr,Event$1.STAT_EVENT,pr=>{pr.stat===Stat.PROXY?__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} detected buffering proxy`):pr.stat===Stat.NOPROXY&&__PRIVATE_logDebug(ge$1,`RPC '${er}' stream ${ir} detected no buffering proxy`)}),setTimeout(()=>{gr.wo()},0),gr}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(tr){return new JsonProtoSerializer(tr,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(er,rr,nr=1e3,ir=1.5,sr=6e4){this.ui=er,this.timerId=rr,this.ko=nr,this.qo=ir,this.Qo=sr,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(er){this.cancel();const rr=Math.floor(this.Ko+this.zo()),nr=Math.max(0,Date.now()-this.Uo),ir=Math.max(0,rr-nr);ir>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${ir} ms (base delay: ${this.Ko} ms, delay with jitter: ${rr} ms, last attempt: ${nr} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,ir,()=>(this.Uo=Date.now(),er())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(er,rr,nr,ir,sr,ar,cr,lr){this.ui=er,this.Ho=nr,this.Jo=ir,this.connection=sr,this.authCredentialsProvider=ar,this.appCheckCredentialsProvider=cr,this.listener=lr,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new __PRIVATE_ExponentialBackoff(er,rr)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(er){this.u_(),this.stream.send(er)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(er,rr){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,er!==4?this.t_.reset():rr&&rr.code===D$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(rr.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):rr&&rr.code===D$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=er,await this.listener.mo(rr)}l_(){}auth(){this.state=1;const er=this.h_(this.Yo),rr=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([nr,ir])=>{this.Yo===rr&&this.P_(nr,ir)},nr=>{er(()=>{const ir=new FirestoreError(D$1.UNKNOWN,"Fetching auth token failed: "+nr.message);return this.I_(ir)})})}P_(er,rr){const nr=this.h_(this.Yo);this.stream=this.T_(er,rr),this.stream.Eo(()=>{nr(()=>this.listener.Eo())}),this.stream.Ro(()=>{nr(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(ir=>{nr(()=>this.I_(ir))}),this.stream.onMessage(ir=>{nr(()=>++this.e_==1?this.E_(ir):this.onNext(ir))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(er){return __PRIVATE_logDebug("PersistentStream",`close with error: ${er}`),this.stream=null,this.close(4,er)}h_(er){return rr=>{this.ui.enqueueAndForget(()=>this.Yo===er?rr():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(er,rr,nr,ir,sr,ar){super(er,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",rr,nr,ir,ar),this.serializer=sr}T_(er,rr){return this.connection.Bo("Listen",er,rr)}E_(er){return this.onNext(er)}onNext(er){this.t_.reset();const rr=__PRIVATE_fromWatchChange(this.serializer,er),nr=function(sr){if(!("targetChange"in sr))return SnapshotVersion.min();const ar=sr.targetChange;return ar.targetIds&&ar.targetIds.length?SnapshotVersion.min():ar.readTime?__PRIVATE_fromVersion(ar.readTime):SnapshotVersion.min()}(er);return this.listener.d_(rr,nr)}A_(er){const rr={};rr.database=__PRIVATE_getEncodedDatabaseId(this.serializer),rr.addTarget=function(sr,ar){let cr;const lr=ar.target;if(cr=__PRIVATE_targetIsDocumentTarget(lr)?{documents:__PRIVATE_toDocumentsTarget(sr,lr)}:{query:__PRIVATE_toQueryTarget(sr,lr)._t},cr.targetId=ar.targetId,ar.resumeToken.approximateByteSize()>0){cr.resumeToken=__PRIVATE_toBytes(sr,ar.resumeToken);const or=__PRIVATE_toInt32Proto(sr,ar.expectedCount);or!==null&&(cr.expectedCount=or)}else if(ar.snapshotVersion.compareTo(SnapshotVersion.min())>0){cr.readTime=toTimestamp(sr,ar.snapshotVersion.toTimestamp());const or=__PRIVATE_toInt32Proto(sr,ar.expectedCount);or!==null&&(cr.expectedCount=or)}return cr}(this.serializer,er);const nr=__PRIVATE_toListenRequestLabels(this.serializer,er);nr&&(rr.labels=nr),this.a_(rr)}R_(er){const rr={};rr.database=__PRIVATE_getEncodedDatabaseId(this.serializer),rr.removeTarget=er,this.a_(rr)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(er,rr,nr,ir,sr,ar){super(er,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",rr,nr,ir,ar),this.serializer=sr}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(er,rr){return this.connection.Bo("Write",er,rr)}E_(er){return __PRIVATE_hardAssert(!!er.streamToken),this.lastStreamToken=er.streamToken,__PRIVATE_hardAssert(!er.writeResults||er.writeResults.length===0),this.listener.f_()}onNext(er){__PRIVATE_hardAssert(!!er.streamToken),this.lastStreamToken=er.streamToken,this.t_.reset();const rr=__PRIVATE_fromWriteResults(er.writeResults,er.commitTime),nr=__PRIVATE_fromVersion(er.commitTime);return this.listener.g_(nr,rr)}p_(){const er={};er.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.a_(er)}m_(er){const rr={streamToken:this.lastStreamToken,writes:er.map(nr=>toMutation(this.serializer,nr))};this.a_(rr)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(er,rr,nr,ir){super(),this.authCredentials=er,this.appCheckCredentials=rr,this.connection=nr,this.serializer=ir,this.y_=!1}w_(){if(this.y_)throw new FirestoreError(D$1.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(er,rr,nr,ir){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([sr,ar])=>this.connection.Mo(er,__PRIVATE_toResourcePath(rr,nr),ir,sr,ar)).catch(sr=>{throw sr.name==="FirebaseError"?(sr.code===D$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),sr):new FirestoreError(D$1.UNKNOWN,sr.toString())})}Lo(er,rr,nr,ir,sr){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([ar,cr])=>this.connection.Lo(er,__PRIVATE_toResourcePath(rr,nr),ir,ar,cr,sr)).catch(ar=>{throw ar.name==="FirebaseError"?(ar.code===D$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),ar):new FirestoreError(D$1.UNKNOWN,ar.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(er,rr){this.asyncQueue=er,this.onlineStateHandler=rr,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(er){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${er.toString()}`),this.C_("Offline")))}set(er){this.x_(),this.S_=0,er==="Online"&&(this.D_=!1),this.C_(er)}C_(er){er!==this.state&&(this.state=er,this.onlineStateHandler(er))}F_(er){const rr=`Could not reach Cloud Firestore backend. ${er}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(__PRIVATE_logError(rr),this.D_=!1):__PRIVATE_logDebug("OnlineStateTracker",rr)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(er,rr,nr,ir,sr){this.localStore=er,this.datastore=rr,this.asyncQueue=nr,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=sr,this.k_._o(ar=>{nr.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(lr){const or=__PRIVATE_debugCast(lr);or.L_.add(4),await __PRIVATE_disableNetworkInternal(or),or.q_.set("Unknown"),or.L_.delete(4),await __PRIVATE_enableNetworkInternal(or)}(this))})}),this.q_=new __PRIVATE_OnlineStateTracker(nr,ir)}}async function __PRIVATE_enableNetworkInternal(tr){if(__PRIVATE_canUseNetwork(tr))for(const er of tr.B_)await er(!0)}async function __PRIVATE_disableNetworkInternal(tr){for(const er of tr.B_)await er(!1)}function __PRIVATE_remoteStoreListen(tr,er){const rr=__PRIVATE_debugCast(tr);rr.N_.has(er.targetId)||(rr.N_.set(er.targetId,er),__PRIVATE_shouldStartWatchStream(rr)?__PRIVATE_startWatchStream(rr):__PRIVATE_ensureWatchStream(rr).r_()&&__PRIVATE_sendWatchRequest(rr,er))}function __PRIVATE_remoteStoreUnlisten(tr,er){const rr=__PRIVATE_debugCast(tr),nr=__PRIVATE_ensureWatchStream(rr);rr.N_.delete(er),nr.r_()&&__PRIVATE_sendUnwatchRequest(rr,er),rr.N_.size===0&&(nr.r_()?nr.o_():__PRIVATE_canUseNetwork(rr)&&rr.q_.set("Unknown"))}function __PRIVATE_sendWatchRequest(tr,er){if(tr.Q_.xe(er.targetId),er.resumeToken.approximateByteSize()>0||er.snapshotVersion.compareTo(SnapshotVersion.min())>0){const rr=tr.remoteSyncer.getRemoteKeysForTarget(er.targetId).size;er=er.withExpectedCount(rr)}__PRIVATE_ensureWatchStream(tr).A_(er)}function __PRIVATE_sendUnwatchRequest(tr,er){tr.Q_.xe(er),__PRIVATE_ensureWatchStream(tr).R_(er)}function __PRIVATE_startWatchStream(tr){tr.Q_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:er=>tr.remoteSyncer.getRemoteKeysForTarget(er),ot:er=>tr.N_.get(er)||null,tt:()=>tr.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(tr).start(),tr.q_.v_()}function __PRIVATE_shouldStartWatchStream(tr){return __PRIVATE_canUseNetwork(tr)&&!__PRIVATE_ensureWatchStream(tr).n_()&&tr.N_.size>0}function __PRIVATE_canUseNetwork(tr){return __PRIVATE_debugCast(tr).L_.size===0}function __PRIVATE_cleanUpWatchStreamState(tr){tr.Q_=void 0}async function __PRIVATE_onWatchStreamConnected(tr){tr.q_.set("Online")}async function __PRIVATE_onWatchStreamOpen(tr){tr.N_.forEach((er,rr)=>{__PRIVATE_sendWatchRequest(tr,er)})}async function __PRIVATE_onWatchStreamClose(tr,er){__PRIVATE_cleanUpWatchStreamState(tr),__PRIVATE_shouldStartWatchStream(tr)?(tr.q_.M_(er),__PRIVATE_startWatchStream(tr)):tr.q_.set("Unknown")}async function __PRIVATE_onWatchStreamChange(tr,er,rr){if(tr.q_.set("Online"),er instanceof __PRIVATE_WatchTargetChange&&er.state===2&&er.cause)try{await async function(ir,sr){const ar=sr.cause;for(const cr of sr.targetIds)ir.N_.has(cr)&&(await ir.remoteSyncer.rejectListen(cr,ar),ir.N_.delete(cr),ir.Q_.removeTarget(cr))}(tr,er)}catch(nr){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",er.targetIds.join(","),nr),await __PRIVATE_disableNetworkUntilRecovery(tr,nr)}else if(er instanceof __PRIVATE_DocumentWatchChange?tr.Q_.Ke(er):er instanceof __PRIVATE_ExistenceFilterChange?tr.Q_.He(er):tr.Q_.We(er),!rr.isEqual(SnapshotVersion.min()))try{const nr=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(tr.localStore);rr.compareTo(nr)>=0&&await function(sr,ar){const cr=sr.Q_.rt(ar);return cr.targetChanges.forEach((lr,or)=>{if(lr.resumeToken.approximateByteSize()>0){const ur=sr.N_.get(or);ur&&sr.N_.set(or,ur.withResumeToken(lr.resumeToken,ar))}}),cr.targetMismatches.forEach((lr,or)=>{const ur=sr.N_.get(lr);if(!ur)return;sr.N_.set(lr,ur.withResumeToken(ByteString.EMPTY_BYTE_STRING,ur.snapshotVersion)),__PRIVATE_sendUnwatchRequest(sr,lr);const hr=new TargetData(ur.target,lr,or,ur.sequenceNumber);__PRIVATE_sendWatchRequest(sr,hr)}),sr.remoteSyncer.applyRemoteEvent(cr)}(tr,rr)}catch(nr){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",nr),await __PRIVATE_disableNetworkUntilRecovery(tr,nr)}}async function __PRIVATE_disableNetworkUntilRecovery(tr,er,rr){if(!__PRIVATE_isIndexedDbTransactionError(er))throw er;tr.L_.add(1),await __PRIVATE_disableNetworkInternal(tr),tr.q_.set("Offline"),rr||(rr=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(tr.localStore)),tr.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await rr(),tr.L_.delete(1),await __PRIVATE_enableNetworkInternal(tr)})}function __PRIVATE_executeWithRecovery(tr,er){return er().catch(rr=>__PRIVATE_disableNetworkUntilRecovery(tr,rr,er))}async function __PRIVATE_fillWritePipeline(tr){const er=__PRIVATE_debugCast(tr),rr=__PRIVATE_ensureWriteStream(er);let nr=er.O_.length>0?er.O_[er.O_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(er);)try{const ir=await __PRIVATE_localStoreGetNextMutationBatch(er.localStore,nr);if(ir===null){er.O_.length===0&&rr.o_();break}nr=ir.batchId,__PRIVATE_addToWritePipeline(er,ir)}catch(ir){await __PRIVATE_disableNetworkUntilRecovery(er,ir)}__PRIVATE_shouldStartWriteStream(er)&&__PRIVATE_startWriteStream(er)}function __PRIVATE_canAddToWritePipeline(tr){return __PRIVATE_canUseNetwork(tr)&&tr.O_.length<10}function __PRIVATE_addToWritePipeline(tr,er){tr.O_.push(er);const rr=__PRIVATE_ensureWriteStream(tr);rr.r_()&&rr.V_&&rr.m_(er.mutations)}function __PRIVATE_shouldStartWriteStream(tr){return __PRIVATE_canUseNetwork(tr)&&!__PRIVATE_ensureWriteStream(tr).n_()&&tr.O_.length>0}function __PRIVATE_startWriteStream(tr){__PRIVATE_ensureWriteStream(tr).start()}async function __PRIVATE_onWriteStreamOpen(tr){__PRIVATE_ensureWriteStream(tr).p_()}async function __PRIVATE_onWriteHandshakeComplete(tr){const er=__PRIVATE_ensureWriteStream(tr);for(const rr of tr.O_)er.m_(rr.mutations)}async function __PRIVATE_onMutationResult(tr,er,rr){const nr=tr.O_.shift(),ir=MutationBatchResult.from(nr,er,rr);await __PRIVATE_executeWithRecovery(tr,()=>tr.remoteSyncer.applySuccessfulWrite(ir)),await __PRIVATE_fillWritePipeline(tr)}async function __PRIVATE_onWriteStreamClose(tr,er){er&&__PRIVATE_ensureWriteStream(tr).V_&&await async function(nr,ir){if(function(ar){return __PRIVATE_isPermanentError(ar)&&ar!==D$1.ABORTED}(ir.code)){const sr=nr.O_.shift();__PRIVATE_ensureWriteStream(nr).s_(),await __PRIVATE_executeWithRecovery(nr,()=>nr.remoteSyncer.rejectFailedWrite(sr.batchId,ir)),await __PRIVATE_fillWritePipeline(nr)}}(tr,er),__PRIVATE_shouldStartWriteStream(tr)&&__PRIVATE_startWriteStream(tr)}async function __PRIVATE_remoteStoreHandleCredentialChange(tr,er){const rr=__PRIVATE_debugCast(tr);rr.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const nr=__PRIVATE_canUseNetwork(rr);rr.L_.add(3),await __PRIVATE_disableNetworkInternal(rr),nr&&rr.q_.set("Unknown"),await rr.remoteSyncer.handleCredentialChange(er),rr.L_.delete(3),await __PRIVATE_enableNetworkInternal(rr)}async function __PRIVATE_remoteStoreApplyPrimaryState(tr,er){const rr=__PRIVATE_debugCast(tr);er?(rr.L_.delete(2),await __PRIVATE_enableNetworkInternal(rr)):er||(rr.L_.add(2),await __PRIVATE_disableNetworkInternal(rr),rr.q_.set("Unknown"))}function __PRIVATE_ensureWatchStream(tr){return tr.K_||(tr.K_=function(rr,nr,ir){const sr=__PRIVATE_debugCast(rr);return sr.w_(),new __PRIVATE_PersistentListenStream(nr,sr.connection,sr.authCredentials,sr.appCheckCredentials,sr.serializer,ir)}(tr.datastore,tr.asyncQueue,{Eo:__PRIVATE_onWatchStreamConnected.bind(null,tr),Ro:__PRIVATE_onWatchStreamOpen.bind(null,tr),mo:__PRIVATE_onWatchStreamClose.bind(null,tr),d_:__PRIVATE_onWatchStreamChange.bind(null,tr)}),tr.B_.push(async er=>{er?(tr.K_.s_(),__PRIVATE_shouldStartWatchStream(tr)?__PRIVATE_startWatchStream(tr):tr.q_.set("Unknown")):(await tr.K_.stop(),__PRIVATE_cleanUpWatchStreamState(tr))})),tr.K_}function __PRIVATE_ensureWriteStream(tr){return tr.U_||(tr.U_=function(rr,nr,ir){const sr=__PRIVATE_debugCast(rr);return sr.w_(),new __PRIVATE_PersistentWriteStream(nr,sr.connection,sr.authCredentials,sr.appCheckCredentials,sr.serializer,ir)}(tr.datastore,tr.asyncQueue,{Eo:()=>Promise.resolve(),Ro:__PRIVATE_onWriteStreamOpen.bind(null,tr),mo:__PRIVATE_onWriteStreamClose.bind(null,tr),f_:__PRIVATE_onWriteHandshakeComplete.bind(null,tr),g_:__PRIVATE_onMutationResult.bind(null,tr)}),tr.B_.push(async er=>{er?(tr.U_.s_(),await __PRIVATE_fillWritePipeline(tr)):(await tr.U_.stop(),tr.O_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${tr.O_.length} pending writes`),tr.O_=[]))})),tr.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(er,rr,nr,ir,sr){this.asyncQueue=er,this.timerId=rr,this.targetTimeMs=nr,this.op=ir,this.removalCallback=sr,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(ar=>{})}get promise(){return this.deferred.promise}static createAndSchedule(er,rr,nr,ir,sr){const ar=Date.now()+nr,cr=new DelayedOperation(er,rr,ar,ir,sr);return cr.start(nr),cr}start(er){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),er)}skipDelay(){return this.handleDelayElapsed()}cancel(er){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D$1.CANCELLED,"Operation cancelled"+(er?": "+er:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(er=>this.deferred.resolve(er))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(tr,er){if(__PRIVATE_logError("AsyncQueue",`${er}: ${tr}`),__PRIVATE_isIndexedDbTransactionError(tr))return new FirestoreError(D$1.UNAVAILABLE,`${er}: ${tr}`);throw tr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(er){this.comparator=er?(rr,nr)=>er(rr,nr)||DocumentKey.comparator(rr.key,nr.key):(rr,nr)=>DocumentKey.comparator(rr.key,nr.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}static emptySet(er){return new DocumentSet(er.comparator)}has(er){return this.keyedMap.get(er)!=null}get(er){return this.keyedMap.get(er)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(er){const rr=this.keyedMap.get(er);return rr?this.sortedSet.indexOf(rr):-1}get size(){return this.sortedSet.size}forEach(er){this.sortedSet.inorderTraversal((rr,nr)=>(er(rr),!1))}add(er){const rr=this.delete(er.key);return rr.copy(rr.keyedMap.insert(er.key,er),rr.sortedSet.insert(er,null))}delete(er){const rr=this.get(er);return rr?this.copy(this.keyedMap.remove(er),this.sortedSet.remove(rr)):this}isEqual(er){if(!(er instanceof DocumentSet)||this.size!==er.size)return!1;const rr=this.sortedSet.getIterator(),nr=er.sortedSet.getIterator();for(;rr.hasNext();){const ir=rr.getNext().key,sr=nr.getNext().key;if(!ir.isEqual(sr))return!1}return!0}toString(){const er=[];return this.forEach(rr=>{er.push(rr.toString())}),er.length===0?"DocumentSet ()":`DocumentSet (
  `+er.join(`  
`)+`
)`}copy(er,rr){const nr=new DocumentSet;return nr.comparator=this.comparator,nr.keyedMap=er,nr.sortedSet=rr,nr}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.W_=new SortedMap(DocumentKey.comparator)}track(er){const rr=er.doc.key,nr=this.W_.get(rr);nr?er.type!==0&&nr.type===3?this.W_=this.W_.insert(rr,er):er.type===3&&nr.type!==1?this.W_=this.W_.insert(rr,{type:nr.type,doc:er.doc}):er.type===2&&nr.type===2?this.W_=this.W_.insert(rr,{type:2,doc:er.doc}):er.type===2&&nr.type===0?this.W_=this.W_.insert(rr,{type:0,doc:er.doc}):er.type===1&&nr.type===0?this.W_=this.W_.remove(rr):er.type===1&&nr.type===2?this.W_=this.W_.insert(rr,{type:1,doc:nr.doc}):er.type===0&&nr.type===1?this.W_=this.W_.insert(rr,{type:2,doc:er.doc}):fail():this.W_=this.W_.insert(rr,er)}G_(){const er=[];return this.W_.inorderTraversal((rr,nr)=>{er.push(nr)}),er}}class ViewSnapshot{constructor(er,rr,nr,ir,sr,ar,cr,lr,or){this.query=er,this.docs=rr,this.oldDocs=nr,this.docChanges=ir,this.mutatedKeys=sr,this.fromCache=ar,this.syncStateChanged=cr,this.excludesMetadataChanges=lr,this.hasCachedResults=or}static fromInitialDocuments(er,rr,nr,ir,sr){const ar=[];return rr.forEach(cr=>{ar.push({type:0,doc:cr})}),new ViewSnapshot(er,rr,DocumentSet.emptySet(rr),ar,nr,ir,!0,!1,sr)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(er){if(!(this.fromCache===er.fromCache&&this.hasCachedResults===er.hasCachedResults&&this.syncStateChanged===er.syncStateChanged&&this.mutatedKeys.isEqual(er.mutatedKeys)&&__PRIVATE_queryEquals(this.query,er.query)&&this.docs.isEqual(er.docs)&&this.oldDocs.isEqual(er.oldDocs)))return!1;const rr=this.docChanges,nr=er.docChanges;if(rr.length!==nr.length)return!1;for(let ir=0;ir<rr.length;ir++)if(rr[ir].type!==nr[ir].type||!rr[ir].doc.isEqual(nr[ir].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(er=>er.J_())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(rr,nr){const ir=__PRIVATE_debugCast(rr),sr=ir.queries;ir.queries=__PRIVATE_newQueriesObjectMap(),sr.forEach((ar,cr)=>{for(const lr of cr.j_)lr.onError(nr)})})(this,new FirestoreError(D$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(tr=>__PRIVATE_canonifyQuery(tr),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(tr,er){const rr=__PRIVATE_debugCast(tr);let nr=3;const ir=er.query;let sr=rr.queries.get(ir);sr?!sr.H_()&&er.J_()&&(nr=2):(sr=new __PRIVATE_QueryListenersInfo,nr=er.J_()?0:1);try{switch(nr){case 0:sr.z_=await rr.onListen(ir,!0);break;case 1:sr.z_=await rr.onListen(ir,!1);break;case 2:await rr.onFirstRemoteStoreListen(ir)}}catch(ar){const cr=__PRIVATE_wrapInUserErrorIfRecoverable(ar,`Initialization of query '${__PRIVATE_stringifyQuery(er.query)}' failed`);return void er.onError(cr)}rr.queries.set(ir,sr),sr.j_.push(er),er.Z_(rr.onlineState),sr.z_&&er.X_(sr.z_)&&__PRIVATE_raiseSnapshotsInSyncEvent(rr)}async function __PRIVATE_eventManagerUnlisten(tr,er){const rr=__PRIVATE_debugCast(tr),nr=er.query;let ir=3;const sr=rr.queries.get(nr);if(sr){const ar=sr.j_.indexOf(er);ar>=0&&(sr.j_.splice(ar,1),sr.j_.length===0?ir=er.J_()?0:1:!sr.H_()&&er.J_()&&(ir=2))}switch(ir){case 0:return rr.queries.delete(nr),rr.onUnlisten(nr,!0);case 1:return rr.queries.delete(nr),rr.onUnlisten(nr,!1);case 2:return rr.onLastRemoteStoreUnlisten(nr);default:return}}function __PRIVATE_eventManagerOnWatchChange(tr,er){const rr=__PRIVATE_debugCast(tr);let nr=!1;for(const ir of er){const sr=ir.query,ar=rr.queries.get(sr);if(ar){for(const cr of ar.j_)cr.X_(ir)&&(nr=!0);ar.z_=ir}}nr&&__PRIVATE_raiseSnapshotsInSyncEvent(rr)}function __PRIVATE_eventManagerOnWatchError(tr,er,rr){const nr=__PRIVATE_debugCast(tr),ir=nr.queries.get(er);if(ir)for(const sr of ir.j_)sr.onError(rr);nr.queries.delete(er)}function __PRIVATE_raiseSnapshotsInSyncEvent(tr){tr.Y_.forEach(er=>{er.next()})}var pe$1,ye$1;(ye$1=pe$1||(pe$1={})).ea="default",ye$1.Cache="cache";class __PRIVATE_QueryListener{constructor(er,rr,nr){this.query=er,this.ta=rr,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=nr||{}}X_(er){if(!this.options.includeMetadataChanges){const nr=[];for(const ir of er.docChanges)ir.type!==3&&nr.push(ir);er=new ViewSnapshot(er.query,er.docs,er.oldDocs,nr,er.mutatedKeys,er.fromCache,er.syncStateChanged,!0,er.hasCachedResults)}let rr=!1;return this.na?this.ia(er)&&(this.ta.next(er),rr=!0):this.sa(er,this.onlineState)&&(this.oa(er),rr=!0),this.ra=er,rr}onError(er){this.ta.error(er)}Z_(er){this.onlineState=er;let rr=!1;return this.ra&&!this.na&&this.sa(this.ra,er)&&(this.oa(this.ra),rr=!0),rr}sa(er,rr){if(!er.fromCache||!this.J_())return!0;const nr=rr!=="Offline";return(!this.options._a||!nr)&&(!er.docs.isEmpty()||er.hasCachedResults||rr==="Offline")}ia(er){if(er.docChanges.length>0)return!0;const rr=this.ra&&this.ra.hasPendingWrites!==er.hasPendingWrites;return!(!er.syncStateChanged&&!rr)&&this.options.includeMetadataChanges===!0}oa(er){er=ViewSnapshot.fromInitialDocuments(er.query,er.docs,er.mutatedKeys,er.fromCache,er.hasCachedResults),this.na=!0,this.ta.next(er)}J_(){return this.options.source!==pe$1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(er){this.key=er}}class __PRIVATE_RemovedLimboDocument{constructor(er){this.key=er}}class __PRIVATE_View{constructor(er,rr){this.query=er,this.Ta=rr,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Aa=__PRIVATE_newQueryComparator(er),this.Ra=new DocumentSet(this.Aa)}get Va(){return this.Ta}ma(er,rr){const nr=rr?rr.fa:new __PRIVATE_DocumentChangeSet,ir=rr?rr.Ra:this.Ra;let sr=rr?rr.mutatedKeys:this.mutatedKeys,ar=ir,cr=!1;const lr=this.query.limitType==="F"&&ir.size===this.query.limit?ir.last():null,or=this.query.limitType==="L"&&ir.size===this.query.limit?ir.first():null;if(er.inorderTraversal((ur,hr)=>{const dr=ir.get(ur),fr=__PRIVATE_queryMatches(this.query,hr)?hr:null,gr=!!dr&&this.mutatedKeys.has(dr.key),br=!!fr&&(fr.hasLocalMutations||this.mutatedKeys.has(fr.key)&&fr.hasCommittedMutations);let pr=!1;dr&&fr?dr.data.isEqual(fr.data)?gr!==br&&(nr.track({type:3,doc:fr}),pr=!0):this.ga(dr,fr)||(nr.track({type:2,doc:fr}),pr=!0,(lr&&this.Aa(fr,lr)>0||or&&this.Aa(fr,or)<0)&&(cr=!0)):!dr&&fr?(nr.track({type:0,doc:fr}),pr=!0):dr&&!fr&&(nr.track({type:1,doc:dr}),pr=!0,(lr||or)&&(cr=!0)),pr&&(fr?(ar=ar.add(fr),sr=br?sr.add(ur):sr.delete(ur)):(ar=ar.delete(ur),sr=sr.delete(ur)))}),this.query.limit!==null)for(;ar.size>this.query.limit;){const ur=this.query.limitType==="F"?ar.last():ar.first();ar=ar.delete(ur.key),sr=sr.delete(ur.key),nr.track({type:1,doc:ur})}return{Ra:ar,fa:nr,ns:cr,mutatedKeys:sr}}ga(er,rr){return er.hasLocalMutations&&rr.hasCommittedMutations&&!rr.hasLocalMutations}applyChanges(er,rr,nr,ir){const sr=this.Ra;this.Ra=er.Ra,this.mutatedKeys=er.mutatedKeys;const ar=er.fa.G_();ar.sort((ur,hr)=>function(fr,gr){const br=pr=>{switch(pr){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return br(fr)-br(gr)}(ur.type,hr.type)||this.Aa(ur.doc,hr.doc)),this.pa(nr),ir=ir!=null&&ir;const cr=rr&&!ir?this.ya():[],lr=this.da.size===0&&this.current&&!ir?1:0,or=lr!==this.Ea;return this.Ea=lr,ar.length!==0||or?{snapshot:new ViewSnapshot(this.query,er.Ra,sr,ar,er.mutatedKeys,lr===0,or,!1,!!nr&&nr.resumeToken.approximateByteSize()>0),wa:cr}:{wa:cr}}Z_(er){return this.current&&er==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(er){return!this.Ta.has(er)&&!!this.Ra.has(er)&&!this.Ra.get(er).hasLocalMutations}pa(er){er&&(er.addedDocuments.forEach(rr=>this.Ta=this.Ta.add(rr)),er.modifiedDocuments.forEach(rr=>{}),er.removedDocuments.forEach(rr=>this.Ta=this.Ta.delete(rr)),this.current=er.current)}ya(){if(!this.current)return[];const er=this.da;this.da=__PRIVATE_documentKeySet(),this.Ra.forEach(nr=>{this.Sa(nr.key)&&(this.da=this.da.add(nr.key))});const rr=[];return er.forEach(nr=>{this.da.has(nr)||rr.push(new __PRIVATE_RemovedLimboDocument(nr))}),this.da.forEach(nr=>{er.has(nr)||rr.push(new __PRIVATE_AddedLimboDocument(nr))}),rr}ba(er){this.Ta=er.Ts,this.da=__PRIVATE_documentKeySet();const rr=this.ma(er.documents);return this.applyChanges(rr,!0)}Da(){return ViewSnapshot.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(er,rr,nr){this.query=er,this.targetId=rr,this.view=nr}}class LimboResolution{constructor(er){this.key=er,this.va=!1}}class __PRIVATE_SyncEngineImpl{constructor(er,rr,nr,ir,sr,ar){this.localStore=er,this.remoteStore=rr,this.eventManager=nr,this.sharedClientState=ir,this.currentUser=sr,this.maxConcurrentLimboResolutions=ar,this.Ca={},this.Fa=new ObjectMap(cr=>__PRIVATE_canonifyQuery(cr),__PRIVATE_queryEquals),this.Ma=new Map,this.xa=new Set,this.Oa=new SortedMap(DocumentKey.comparator),this.Na=new Map,this.La=new __PRIVATE_ReferenceSet,this.Ba={},this.ka=new Map,this.qa=__PRIVATE_TargetIdGenerator.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function __PRIVATE_syncEngineListen(tr,er,rr=!0){const nr=__PRIVATE_ensureWatchCallbacks(tr);let ir;const sr=nr.Fa.get(er);return sr?(nr.sharedClientState.addLocalQueryTarget(sr.targetId),ir=sr.view.Da()):ir=await __PRIVATE_allocateTargetAndMaybeListen(nr,er,rr,!0),ir}async function __PRIVATE_triggerRemoteStoreListen(tr,er){const rr=__PRIVATE_ensureWatchCallbacks(tr);await __PRIVATE_allocateTargetAndMaybeListen(rr,er,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(tr,er,rr,nr){const ir=await __PRIVATE_localStoreAllocateTarget(tr.localStore,__PRIVATE_queryToTarget(er)),sr=ir.targetId,ar=tr.sharedClientState.addLocalQueryTarget(sr,rr);let cr;return nr&&(cr=await __PRIVATE_initializeViewAndComputeSnapshot(tr,er,sr,ar==="current",ir.resumeToken)),tr.isPrimaryClient&&rr&&__PRIVATE_remoteStoreListen(tr.remoteStore,ir),cr}async function __PRIVATE_initializeViewAndComputeSnapshot(tr,er,rr,nr,ir){tr.Ka=(hr,dr,fr)=>async function(br,pr,mr,yr){let xr=pr.view.ma(mr);xr.ns&&(xr=await __PRIVATE_localStoreExecuteQuery(br.localStore,pr.query,!1).then(({documents:Tr})=>pr.view.ma(Tr,xr)));const vr=yr&&yr.targetChanges.get(pr.targetId),_r=yr&&yr.targetMismatches.get(pr.targetId)!=null,Er=pr.view.applyChanges(xr,br.isPrimaryClient,vr,_r);return __PRIVATE_updateTrackedLimbos(br,pr.targetId,Er.wa),Er.snapshot}(tr,hr,dr,fr);const sr=await __PRIVATE_localStoreExecuteQuery(tr.localStore,er,!0),ar=new __PRIVATE_View(er,sr.Ts),cr=ar.ma(sr.documents),lr=TargetChange.createSynthesizedTargetChangeForCurrentChange(rr,nr&&tr.onlineState!=="Offline",ir),or=ar.applyChanges(cr,tr.isPrimaryClient,lr);__PRIVATE_updateTrackedLimbos(tr,rr,or.wa);const ur=new __PRIVATE_QueryView(er,rr,ar);return tr.Fa.set(er,ur),tr.Ma.has(rr)?tr.Ma.get(rr).push(er):tr.Ma.set(rr,[er]),or.snapshot}async function __PRIVATE_syncEngineUnlisten(tr,er,rr){const nr=__PRIVATE_debugCast(tr),ir=nr.Fa.get(er),sr=nr.Ma.get(ir.targetId);if(sr.length>1)return nr.Ma.set(ir.targetId,sr.filter(ar=>!__PRIVATE_queryEquals(ar,er))),void nr.Fa.delete(er);nr.isPrimaryClient?(nr.sharedClientState.removeLocalQueryTarget(ir.targetId),nr.sharedClientState.isActiveQueryTarget(ir.targetId)||await __PRIVATE_localStoreReleaseTarget(nr.localStore,ir.targetId,!1).then(()=>{nr.sharedClientState.clearQueryState(ir.targetId),rr&&__PRIVATE_remoteStoreUnlisten(nr.remoteStore,ir.targetId),__PRIVATE_removeAndCleanupTarget(nr,ir.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(nr,ir.targetId),await __PRIVATE_localStoreReleaseTarget(nr.localStore,ir.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(tr,er){const rr=__PRIVATE_debugCast(tr),nr=rr.Fa.get(er),ir=rr.Ma.get(nr.targetId);rr.isPrimaryClient&&ir.length===1&&(rr.sharedClientState.removeLocalQueryTarget(nr.targetId),__PRIVATE_remoteStoreUnlisten(rr.remoteStore,nr.targetId))}async function __PRIVATE_syncEngineWrite(tr,er,rr){const nr=__PRIVATE_syncEngineEnsureWriteCallbacks(tr);try{const ir=await function(ar,cr){const lr=__PRIVATE_debugCast(ar),or=Timestamp.now(),ur=cr.reduce((fr,gr)=>fr.add(gr.key),__PRIVATE_documentKeySet());let hr,dr;return lr.persistence.runTransaction("Locally write mutations","readwrite",fr=>{let gr=__PRIVATE_mutableDocumentMap(),br=__PRIVATE_documentKeySet();return lr.cs.getEntries(fr,ur).next(pr=>{gr=pr,gr.forEach((mr,yr)=>{yr.isValidDocument()||(br=br.add(mr))})}).next(()=>lr.localDocuments.getOverlayedDocuments(fr,gr)).next(pr=>{hr=pr;const mr=[];for(const yr of cr){const xr=__PRIVATE_mutationExtractBaseValue(yr,hr.get(yr.key).overlayedDocument);xr!=null&&mr.push(new __PRIVATE_PatchMutation(yr.key,xr,__PRIVATE_extractFieldMask(xr.value.mapValue),Precondition.exists(!0)))}return lr.mutationQueue.addMutationBatch(fr,or,mr,cr)}).next(pr=>{dr=pr;const mr=pr.applyToLocalDocumentSet(hr,br);return lr.documentOverlayCache.saveOverlays(fr,pr.batchId,mr)})}).then(()=>({batchId:dr.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(hr)}))}(nr.localStore,er);nr.sharedClientState.addPendingMutation(ir.batchId),function(ar,cr,lr){let or=ar.Ba[ar.currentUser.toKey()];or||(or=new SortedMap(__PRIVATE_primitiveComparator)),or=or.insert(cr,lr),ar.Ba[ar.currentUser.toKey()]=or}(nr,ir.batchId,rr),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(nr,ir.changes),await __PRIVATE_fillWritePipeline(nr.remoteStore)}catch(ir){const sr=__PRIVATE_wrapInUserErrorIfRecoverable(ir,"Failed to persist write");rr.reject(sr)}}async function __PRIVATE_syncEngineApplyRemoteEvent(tr,er){const rr=__PRIVATE_debugCast(tr);try{const nr=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(rr.localStore,er);er.targetChanges.forEach((ir,sr)=>{const ar=rr.Na.get(sr);ar&&(__PRIVATE_hardAssert(ir.addedDocuments.size+ir.modifiedDocuments.size+ir.removedDocuments.size<=1),ir.addedDocuments.size>0?ar.va=!0:ir.modifiedDocuments.size>0?__PRIVATE_hardAssert(ar.va):ir.removedDocuments.size>0&&(__PRIVATE_hardAssert(ar.va),ar.va=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(rr,nr,er)}catch(nr){await __PRIVATE_ignoreIfPrimaryLeaseLoss(nr)}}function __PRIVATE_syncEngineApplyOnlineStateChange(tr,er,rr){const nr=__PRIVATE_debugCast(tr);if(nr.isPrimaryClient&&rr===0||!nr.isPrimaryClient&&rr===1){const ir=[];nr.Fa.forEach((sr,ar)=>{const cr=ar.view.Z_(er);cr.snapshot&&ir.push(cr.snapshot)}),function(ar,cr){const lr=__PRIVATE_debugCast(ar);lr.onlineState=cr;let or=!1;lr.queries.forEach((ur,hr)=>{for(const dr of hr.j_)dr.Z_(cr)&&(or=!0)}),or&&__PRIVATE_raiseSnapshotsInSyncEvent(lr)}(nr.eventManager,er),ir.length&&nr.Ca.d_(ir),nr.onlineState=er,nr.isPrimaryClient&&nr.sharedClientState.setOnlineState(er)}}async function __PRIVATE_syncEngineRejectListen(tr,er,rr){const nr=__PRIVATE_debugCast(tr);nr.sharedClientState.updateQueryState(er,"rejected",rr);const ir=nr.Na.get(er),sr=ir&&ir.key;if(sr){let ar=new SortedMap(DocumentKey.comparator);ar=ar.insert(sr,MutableDocument.newNoDocument(sr,SnapshotVersion.min()));const cr=__PRIVATE_documentKeySet().add(sr),lr=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),ar,cr);await __PRIVATE_syncEngineApplyRemoteEvent(nr,lr),nr.Oa=nr.Oa.remove(sr),nr.Na.delete(er),__PRIVATE_pumpEnqueuedLimboResolutions(nr)}else await __PRIVATE_localStoreReleaseTarget(nr.localStore,er,!1).then(()=>__PRIVATE_removeAndCleanupTarget(nr,er,rr)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(tr,er){const rr=__PRIVATE_debugCast(tr),nr=er.batch.batchId;try{const ir=await __PRIVATE_localStoreAcknowledgeBatch(rr.localStore,er);__PRIVATE_processUserCallback(rr,nr,null),__PRIVATE_triggerPendingWritesCallbacks(rr,nr),rr.sharedClientState.updateMutationState(nr,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(rr,ir)}catch(ir){await __PRIVATE_ignoreIfPrimaryLeaseLoss(ir)}}async function __PRIVATE_syncEngineRejectFailedWrite(tr,er,rr){const nr=__PRIVATE_debugCast(tr);try{const ir=await function(ar,cr){const lr=__PRIVATE_debugCast(ar);return lr.persistence.runTransaction("Reject batch","readwrite-primary",or=>{let ur;return lr.mutationQueue.lookupMutationBatch(or,cr).next(hr=>(__PRIVATE_hardAssert(hr!==null),ur=hr.keys(),lr.mutationQueue.removeMutationBatch(or,hr))).next(()=>lr.mutationQueue.performConsistencyCheck(or)).next(()=>lr.documentOverlayCache.removeOverlaysForBatchId(or,ur,cr)).next(()=>lr.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(or,ur)).next(()=>lr.localDocuments.getDocuments(or,ur))})}(nr.localStore,er);__PRIVATE_processUserCallback(nr,er,rr),__PRIVATE_triggerPendingWritesCallbacks(nr,er),nr.sharedClientState.updateMutationState(er,"rejected",rr),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(nr,ir)}catch(ir){await __PRIVATE_ignoreIfPrimaryLeaseLoss(ir)}}function __PRIVATE_triggerPendingWritesCallbacks(tr,er){(tr.ka.get(er)||[]).forEach(rr=>{rr.resolve()}),tr.ka.delete(er)}function __PRIVATE_processUserCallback(tr,er,rr){const nr=__PRIVATE_debugCast(tr);let ir=nr.Ba[nr.currentUser.toKey()];if(ir){const sr=ir.get(er);sr&&(rr?sr.reject(rr):sr.resolve(),ir=ir.remove(er)),nr.Ba[nr.currentUser.toKey()]=ir}}function __PRIVATE_removeAndCleanupTarget(tr,er,rr=null){tr.sharedClientState.removeLocalQueryTarget(er);for(const nr of tr.Ma.get(er))tr.Fa.delete(nr),rr&&tr.Ca.$a(nr,rr);tr.Ma.delete(er),tr.isPrimaryClient&&tr.La.gr(er).forEach(nr=>{tr.La.containsKey(nr)||__PRIVATE_removeLimboTarget(tr,nr)})}function __PRIVATE_removeLimboTarget(tr,er){tr.xa.delete(er.path.canonicalString());const rr=tr.Oa.get(er);rr!==null&&(__PRIVATE_remoteStoreUnlisten(tr.remoteStore,rr),tr.Oa=tr.Oa.remove(er),tr.Na.delete(rr),__PRIVATE_pumpEnqueuedLimboResolutions(tr))}function __PRIVATE_updateTrackedLimbos(tr,er,rr){for(const nr of rr)nr instanceof __PRIVATE_AddedLimboDocument?(tr.La.addReference(nr.key,er),__PRIVATE_trackLimboChange(tr,nr)):nr instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+nr.key),tr.La.removeReference(nr.key,er),tr.La.containsKey(nr.key)||__PRIVATE_removeLimboTarget(tr,nr.key)):fail()}function __PRIVATE_trackLimboChange(tr,er){const rr=er.key,nr=rr.path.canonicalString();tr.Oa.get(rr)||tr.xa.has(nr)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+rr),tr.xa.add(nr),__PRIVATE_pumpEnqueuedLimboResolutions(tr))}function __PRIVATE_pumpEnqueuedLimboResolutions(tr){for(;tr.xa.size>0&&tr.Oa.size<tr.maxConcurrentLimboResolutions;){const er=tr.xa.values().next().value;tr.xa.delete(er);const rr=new DocumentKey(ResourcePath.fromString(er)),nr=tr.qa.next();tr.Na.set(nr,new LimboResolution(rr)),tr.Oa=tr.Oa.insert(rr,nr),__PRIVATE_remoteStoreListen(tr.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(rr.path)),nr,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.oe))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(tr,er,rr){const nr=__PRIVATE_debugCast(tr),ir=[],sr=[],ar=[];nr.Fa.isEmpty()||(nr.Fa.forEach((cr,lr)=>{ar.push(nr.Ka(lr,er,rr).then(or=>{var ur;if((or||rr)&&nr.isPrimaryClient){const hr=or?!or.fromCache:(ur=rr==null?void 0:rr.targetChanges.get(lr.targetId))===null||ur===void 0?void 0:ur.current;nr.sharedClientState.updateQueryState(lr.targetId,hr?"current":"not-current")}if(or){ir.push(or);const hr=__PRIVATE_LocalViewChanges.Wi(lr.targetId,or);sr.push(hr)}}))}),await Promise.all(ar),nr.Ca.d_(ir),await async function(lr,or){const ur=__PRIVATE_debugCast(lr);try{await ur.persistence.runTransaction("notifyLocalViewChanges","readwrite",hr=>PersistencePromise.forEach(or,dr=>PersistencePromise.forEach(dr.$i,fr=>ur.persistence.referenceDelegate.addReference(hr,dr.targetId,fr)).next(()=>PersistencePromise.forEach(dr.Ui,fr=>ur.persistence.referenceDelegate.removeReference(hr,dr.targetId,fr)))))}catch(hr){if(!__PRIVATE_isIndexedDbTransactionError(hr))throw hr;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+hr)}for(const hr of or){const dr=hr.targetId;if(!hr.fromCache){const fr=ur.os.get(dr),gr=fr.snapshotVersion,br=fr.withLastLimboFreeSnapshotVersion(gr);ur.os=ur.os.insert(dr,br)}}}(nr.localStore,sr))}async function __PRIVATE_syncEngineHandleCredentialChange(tr,er){const rr=__PRIVATE_debugCast(tr);if(!rr.currentUser.isEqual(er)){__PRIVATE_logDebug("SyncEngine","User change. New user:",er.toKey());const nr=await __PRIVATE_localStoreHandleUserChange(rr.localStore,er);rr.currentUser=er,function(sr,ar){sr.ka.forEach(cr=>{cr.forEach(lr=>{lr.reject(new FirestoreError(D$1.CANCELLED,ar))})}),sr.ka.clear()}(rr,"'waitForPendingWrites' promise is rejected due to a user change."),rr.sharedClientState.handleUserChange(er,nr.removedBatchIds,nr.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(rr,nr.hs)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(tr,er){const rr=__PRIVATE_debugCast(tr),nr=rr.Na.get(er);if(nr&&nr.va)return __PRIVATE_documentKeySet().add(nr.key);{let ir=__PRIVATE_documentKeySet();const sr=rr.Ma.get(er);if(!sr)return ir;for(const ar of sr){const cr=rr.Fa.get(ar);ir=ir.unionWith(cr.view.Va)}return ir}}function __PRIVATE_ensureWatchCallbacks(tr){const er=__PRIVATE_debugCast(tr);return er.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,er),er.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,er),er.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,er),er.Ca.d_=__PRIVATE_eventManagerOnWatchChange.bind(null,er.eventManager),er.Ca.$a=__PRIVATE_eventManagerOnWatchError.bind(null,er.eventManager),er}function __PRIVATE_syncEngineEnsureWriteCallbacks(tr){const er=__PRIVATE_debugCast(tr);return er.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,er),er.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,er),er}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(er){this.serializer=__PRIVATE_newSerializer(er.databaseInfo.databaseId),this.sharedClientState=this.Wa(er),this.persistence=this.Ga(er),await this.persistence.start(),this.localStore=this.za(er),this.gcScheduler=this.ja(er,this.localStore),this.indexBackfillerScheduler=this.Ha(er,this.localStore)}ja(er,rr){return null}Ha(er,rr){return null}za(er){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,er.initialUser,this.serializer)}Ga(er){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Zr,this.serializer)}Wa(er){return new __PRIVATE_MemorySharedClientState}async terminate(){var er,rr;(er=this.gcScheduler)===null||er===void 0||er.stop(),(rr=this.indexBackfillerScheduler)===null||rr===void 0||rr.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class OnlineComponentProvider{async initialize(er,rr){this.localStore||(this.localStore=er.localStore,this.sharedClientState=er.sharedClientState,this.datastore=this.createDatastore(rr),this.remoteStore=this.createRemoteStore(rr),this.eventManager=this.createEventManager(rr),this.syncEngine=this.createSyncEngine(rr,!er.synchronizeTabs),this.sharedClientState.onlineStateHandler=nr=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,nr,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(er){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(er){const rr=__PRIVATE_newSerializer(er.databaseInfo.databaseId),nr=function(sr){return new __PRIVATE_WebChannelConnection(sr)}(er.databaseInfo);return function(sr,ar,cr,lr){return new __PRIVATE_DatastoreImpl(sr,ar,cr,lr)}(er.authCredentials,er.appCheckCredentials,nr,rr)}createRemoteStore(er){return function(nr,ir,sr,ar,cr){return new __PRIVATE_RemoteStoreImpl(nr,ir,sr,ar,cr)}(this.localStore,this.datastore,er.asyncQueue,rr=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,rr,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(er,rr){return function(ir,sr,ar,cr,lr,or,ur){const hr=new __PRIVATE_SyncEngineImpl(ir,sr,ar,cr,lr,or);return ur&&(hr.Qa=!0),hr}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,er.initialUser,er.maxConcurrentLimboResolutions,rr)}async terminate(){var er,rr;await async function(ir){const sr=__PRIVATE_debugCast(ir);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),sr.L_.add(5),await __PRIVATE_disableNetworkInternal(sr),sr.k_.shutdown(),sr.q_.set("Unknown")}(this.remoteStore),(er=this.datastore)===null||er===void 0||er.terminate(),(rr=this.eventManager)===null||rr===void 0||rr.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(er){this.observer=er,this.muted=!1}next(er){this.muted||this.observer.next&&this.Ya(this.observer.next,er)}error(er){this.muted||(this.observer.error?this.Ya(this.observer.error,er):__PRIVATE_logError("Uncaught Error in snapshot listener:",er.toString()))}Za(){this.muted=!0}Ya(er,rr){setTimeout(()=>{this.muted||er(rr)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(er,rr,nr,ir,sr){this.authCredentials=er,this.appCheckCredentials=rr,this.asyncQueue=nr,this.databaseInfo=ir,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=sr,this.authCredentials.start(nr,async ar=>{__PRIVATE_logDebug("FirestoreClient","Received user=",ar.uid),await this.authCredentialListener(ar),this.user=ar}),this.appCheckCredentials.start(nr,ar=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",ar),this.appCheckCredentialListener(ar,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(er){this.authCredentialListener=er}setAppCheckTokenChangeListener(er){this.appCheckCredentialListener=er}terminate(){this.asyncQueue.enterRestrictedMode();const er=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),er.resolve()}catch(rr){const nr=__PRIVATE_wrapInUserErrorIfRecoverable(rr,"Failed to shutdown persistence");er.reject(nr)}}),er.promise}}async function __PRIVATE_setOfflineComponentProvider(tr,er){tr.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const rr=tr.configuration;await er.initialize(rr);let nr=rr.initialUser;tr.setCredentialChangeListener(async ir=>{nr.isEqual(ir)||(await __PRIVATE_localStoreHandleUserChange(er.localStore,ir),nr=ir)}),er.persistence.setDatabaseDeletedListener(()=>tr.terminate()),tr._offlineComponents=er}async function __PRIVATE_setOnlineComponentProvider(tr,er){tr.asyncQueue.verifyOperationInProgress();const rr=await __PRIVATE_ensureOfflineComponents(tr);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await er.initialize(rr,tr.configuration),tr.setCredentialChangeListener(nr=>__PRIVATE_remoteStoreHandleCredentialChange(er.remoteStore,nr)),tr.setAppCheckTokenChangeListener((nr,ir)=>__PRIVATE_remoteStoreHandleCredentialChange(er.remoteStore,ir)),tr._onlineComponents=er}async function __PRIVATE_ensureOfflineComponents(tr){if(!tr._offlineComponents)if(tr._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(tr,tr._uninitializedComponentsProvider._offline)}catch(er){const rr=er;if(!function(ir){return ir.name==="FirebaseError"?ir.code===D$1.FAILED_PRECONDITION||ir.code===D$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&ir instanceof DOMException)||ir.code===22||ir.code===20||ir.code===11}(rr))throw rr;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+rr),await __PRIVATE_setOfflineComponentProvider(tr,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(tr,new __PRIVATE_MemoryOfflineComponentProvider);return tr._offlineComponents}async function __PRIVATE_ensureOnlineComponents(tr){return tr._onlineComponents||(tr._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(tr,tr._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(tr,new OnlineComponentProvider))),tr._onlineComponents}function __PRIVATE_getSyncEngine(tr){return __PRIVATE_ensureOnlineComponents(tr).then(er=>er.syncEngine)}async function __PRIVATE_getEventManager(tr){const er=await __PRIVATE_ensureOnlineComponents(tr),rr=er.eventManager;return rr.onListen=__PRIVATE_syncEngineListen.bind(null,er.syncEngine),rr.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,er.syncEngine),rr.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,er.syncEngine),rr.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,er.syncEngine),rr}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(tr,er,rr={}){const nr=new __PRIVATE_Deferred;return tr.asyncQueue.enqueueAndForget(async()=>function(sr,ar,cr,lr,or){const ur=new __PRIVATE_AsyncObserver({next:dr=>{ur.Za(),ar.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(sr,hr));const fr=dr.docs.has(cr);!fr&&dr.fromCache?or.reject(new FirestoreError(D$1.UNAVAILABLE,"Failed to get document because the client is offline.")):fr&&dr.fromCache&&lr&&lr.source==="server"?or.reject(new FirestoreError(D$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):or.resolve(dr)},error:dr=>or.reject(dr)}),hr=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(cr.path),ur,{includeMetadataChanges:!0,_a:!0});return __PRIVATE_eventManagerListen(sr,hr)}(await __PRIVATE_getEventManager(tr),tr.asyncQueue,er,rr,nr)),nr.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(tr,er,rr={}){const nr=new __PRIVATE_Deferred;return tr.asyncQueue.enqueueAndForget(async()=>function(sr,ar,cr,lr,or){const ur=new __PRIVATE_AsyncObserver({next:dr=>{ur.Za(),ar.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(sr,hr)),dr.fromCache&&lr.source==="server"?or.reject(new FirestoreError(D$1.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):or.resolve(dr)},error:dr=>or.reject(dr)}),hr=new __PRIVATE_QueryListener(cr,ur,{includeMetadataChanges:!0,_a:!0});return __PRIVATE_eventManagerListen(sr,hr)}(await __PRIVATE_getEventManager(tr),tr.asyncQueue,er,rr,nr)),nr.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(tr){const er={};return tr.timeoutSeconds!==void 0&&(er.timeoutSeconds=tr.timeoutSeconds),er}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we$1=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(tr,er,rr){if(!rr)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Function ${tr}() cannot be called with an empty ${er}.`)}function __PRIVATE_validateIsNotUsedTogether(tr,er,rr,nr){if(er===!0&&nr===!0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`${tr} and ${rr} cannot be used together.`)}function __PRIVATE_validateDocumentPath(tr){if(!DocumentKey.isDocumentKey(tr))throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${tr} has ${tr.length}.`)}function __PRIVATE_validateCollectionPath(tr){if(DocumentKey.isDocumentKey(tr))throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${tr} has ${tr.length}.`)}function __PRIVATE_valueDescription(tr){if(tr===void 0)return"undefined";if(tr===null)return"null";if(typeof tr=="string")return tr.length>20&&(tr=`${tr.substring(0,20)}...`),JSON.stringify(tr);if(typeof tr=="number"||typeof tr=="boolean")return""+tr;if(typeof tr=="object"){if(tr instanceof Array)return"an array";{const er=function(nr){return nr.constructor?nr.constructor.name:null}(tr);return er?`a custom ${er} object`:"an object"}}return typeof tr=="function"?"a function":fail()}function __PRIVATE_cast(tr,er){if("_delegate"in tr&&(tr=tr._delegate),!(tr instanceof er)){if(er.name===tr.constructor.name)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const rr=__PRIVATE_valueDescription(tr);throw new FirestoreError(D$1.INVALID_ARGUMENT,`Expected type '${er.name}', but it was: ${rr}`)}}return tr}function __PRIVATE_validatePositiveNumber(tr,er){if(er<=0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Function ${tr}() requires a positive number, but it was: ${er}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(er){var rr,nr;if(er.host===void 0){if(er.ssl!==void 0)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=er.host,this.ssl=(rr=er.ssl)===null||rr===void 0||rr;if(this.credentials=er.credentials,this.ignoreUndefinedProperties=!!er.ignoreUndefinedProperties,this.localCache=er.localCache,er.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(er.cacheSizeBytes!==-1&&er.cacheSizeBytes<1048576)throw new FirestoreError(D$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=er.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",er.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",er.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!er.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:er.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!er.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((nr=er.experimentalLongPollingOptions)!==null&&nr!==void 0?nr:{}),function(sr){if(sr.timeoutSeconds!==void 0){if(isNaN(sr.timeoutSeconds))throw new FirestoreError(D$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (must not be NaN)`);if(sr.timeoutSeconds<5)throw new FirestoreError(D$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (minimum allowed value is 5)`);if(sr.timeoutSeconds>30)throw new FirestoreError(D$1.INVALID_ARGUMENT,`invalid long polling timeout: ${sr.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!er.useFetchStreams}isEqual(er){return this.host===er.host&&this.ssl===er.ssl&&this.credentials===er.credentials&&this.cacheSizeBytes===er.cacheSizeBytes&&this.experimentalForceLongPolling===er.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===er.experimentalAutoDetectLongPolling&&function(nr,ir){return nr.timeoutSeconds===ir.timeoutSeconds}(this.experimentalLongPollingOptions,er.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===er.ignoreUndefinedProperties&&this.useFetchStreams===er.useFetchStreams}}class Firestore$1{constructor(er,rr,nr,ir){this._authCredentials=er,this._appCheckCredentials=rr,this._databaseId=nr,this._app=ir,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(D$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(er){if(this._settingsFrozen)throw new FirestoreError(D$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(er),er.credentials!==void 0&&(this._authCredentials=function(nr){if(!nr)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(nr.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(nr.sessionIndex||"0",nr.iamToken||null,nr.authTokenFactory||null);case"provider":return nr.client;default:throw new FirestoreError(D$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(er.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(rr){const nr=we$1.get(rr);nr&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),we$1.delete(rr),nr.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(tr,er,rr,nr={}){var ir;const sr=(tr=__PRIVATE_cast(tr,Firestore$1))._getSettings(),ar=`${er}:${rr}`;if(sr.host!=="firestore.googleapis.com"&&sr.host!==ar&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),tr._setSettings(Object.assign(Object.assign({},sr),{host:ar,ssl:!1})),nr.mockUserToken){let cr,lr;if(typeof nr.mockUserToken=="string")cr=nr.mockUserToken,lr=User.MOCK_USER;else{cr=createMockUserToken(nr.mockUserToken,(ir=tr._app)===null||ir===void 0?void 0:ir.options.projectId);const or=nr.mockUserToken.sub||nr.mockUserToken.user_id;if(!or)throw new FirestoreError(D$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");lr=new User(or)}tr._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(cr,lr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(er,rr,nr){this.converter=rr,this._query=nr,this.type="query",this.firestore=er}withConverter(er){return new Query(this.firestore,er,this._query)}}class DocumentReference{constructor(er,rr,nr){this.converter=rr,this._key=nr,this.type="document",this.firestore=er}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(er){return new DocumentReference(this.firestore,er,this._key)}}class CollectionReference extends Query{constructor(er,rr,nr){super(er,rr,__PRIVATE_newQueryForPath(nr)),this._path=nr,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const er=this._path.popLast();return er.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(er))}withConverter(er){return new CollectionReference(this.firestore,er,this._path)}}function collection(tr,er,...rr){if(tr=getModularInstance(tr),__PRIVATE_validateNonEmptyArgument("collection","path",er),tr instanceof Firestore$1){const nr=ResourcePath.fromString(er,...rr);return __PRIVATE_validateCollectionPath(nr),new CollectionReference(tr,null,nr)}{if(!(tr instanceof DocumentReference||tr instanceof CollectionReference))throw new FirestoreError(D$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const nr=tr._path.child(ResourcePath.fromString(er,...rr));return __PRIVATE_validateCollectionPath(nr),new CollectionReference(tr.firestore,null,nr)}}function collectionGroup(tr,er){if(tr=__PRIVATE_cast(tr,Firestore$1),__PRIVATE_validateNonEmptyArgument("collectionGroup","collection id",er),er.indexOf("/")>=0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid collection ID '${er}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Query(tr,null,function(nr){return new __PRIVATE_QueryImpl(ResourcePath.emptyPath(),nr)}(er))}function doc(tr,er,...rr){if(tr=getModularInstance(tr),arguments.length===1&&(er=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",er),tr instanceof Firestore$1){const nr=ResourcePath.fromString(er,...rr);return __PRIVATE_validateDocumentPath(nr),new DocumentReference(tr,null,new DocumentKey(nr))}{if(!(tr instanceof DocumentReference||tr instanceof CollectionReference))throw new FirestoreError(D$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const nr=tr._path.child(ResourcePath.fromString(er,...rr));return __PRIVATE_validateDocumentPath(nr),new DocumentReference(tr.firestore,tr instanceof CollectionReference?tr.converter:null,new DocumentKey(nr))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(er=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.Vu=()=>{const nr=getDocument();nr&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+nr.visibilityState),this.t_.jo()},this.mu=er;const rr=getDocument();rr&&typeof rr.addEventListener=="function"&&rr.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(er){this.enqueue(er)}enqueueAndForgetEvenWhileRestricted(er){this.fu(),this.gu(er)}enterRestrictedMode(er){if(!this.Iu){this.Iu=!0,this.Au=er||!1;const rr=getDocument();rr&&typeof rr.removeEventListener=="function"&&rr.removeEventListener("visibilitychange",this.Vu)}}enqueue(er){if(this.fu(),this.Iu)return new Promise(()=>{});const rr=new __PRIVATE_Deferred;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(er().then(rr.resolve,rr.reject),rr.promise)).then(()=>rr.promise)}enqueueRetryable(er){this.enqueueAndForget(()=>(this.Pu.push(er),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(er){if(!__PRIVATE_isIndexedDbTransactionError(er))throw er;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+er)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(er){const rr=this.mu.then(()=>(this.du=!0,er().catch(nr=>{this.Eu=nr,this.du=!1;const ir=function(ar){let cr=ar.message||"";return ar.stack&&(cr=ar.stack.includes(ar.message)?ar.stack:ar.message+`
`+ar.stack),cr}(nr);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",ir),nr}).then(nr=>(this.du=!1,nr))));return this.mu=rr,rr}enqueueAfterDelay(er,rr,nr){this.fu(),this.Ru.indexOf(er)>-1&&(rr=0);const ir=DelayedOperation.createAndSchedule(this,er,rr,nr,sr=>this.yu(sr));return this.Tu.push(ir),ir}fu(){this.Eu&&fail()}verifyOperationInProgress(){}async wu(){let er;do er=this.mu,await er;while(er!==this.mu)}Su(er){for(const rr of this.Tu)if(rr.timerId===er)return!0;return!1}bu(er){return this.wu().then(()=>{this.Tu.sort((rr,nr)=>rr.targetTimeMs-nr.targetTimeMs);for(const rr of this.Tu)if(rr.skipDelay(),er!=="all"&&rr.timerId===er)break;return this.wu()})}Du(er){this.Ru.push(er)}yu(er){const rr=this.Tu.indexOf(er);this.Tu.splice(rr,1)}}function __PRIVATE_isPartialObserver(tr){return function(rr,nr){if(typeof rr!="object"||rr===null)return!1;const ir=rr;for(const sr of nr)if(sr in ir&&typeof ir[sr]=="function")return!0;return!1}(tr,["next","error","complete"])}class Firestore extends Firestore$1{constructor(er,rr,nr,ir){super(er,rr,nr,ir),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(ir==null?void 0:ir.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const er=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(er),this._firestoreClient=void 0,await er}}}function getFirestore(tr,er){const rr=typeof tr=="object"?tr:getApp(),nr=typeof tr=="string"?tr:"(default)",ir=_getProvider(rr,"firestore").getImmediate({identifier:nr});if(!ir._initialized){const sr=getDefaultEmulatorHostnameAndPort("firestore");sr&&connectFirestoreEmulator(ir,...sr)}return ir}function ensureFirestoreConfigured(tr){if(tr._terminated)throw new FirestoreError(D$1.FAILED_PRECONDITION,"The client has already been terminated.");return tr._firestoreClient||__PRIVATE_configureFirestore(tr),tr._firestoreClient}function __PRIVATE_configureFirestore(tr){var er,rr,nr;const ir=tr._freezeSettings(),sr=function(cr,lr,or,ur){return new DatabaseInfo(cr,lr,or,ur.host,ur.ssl,ur.experimentalForceLongPolling,ur.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(ur.experimentalLongPollingOptions),ur.useFetchStreams)}(tr._databaseId,((er=tr._app)===null||er===void 0?void 0:er.options.appId)||"",tr._persistenceKey,ir);tr._componentsProvider||!((rr=ir.localCache)===null||rr===void 0)&&rr._offlineComponentProvider&&(!((nr=ir.localCache)===null||nr===void 0)&&nr._onlineComponentProvider)&&(tr._componentsProvider={_offline:ir.localCache._offlineComponentProvider,_online:ir.localCache._onlineComponentProvider}),tr._firestoreClient=new FirestoreClient(tr._authCredentials,tr._appCheckCredentials,tr._queue,sr,tr._componentsProvider&&function(cr){const lr=cr==null?void 0:cr._online.build();return{_offline:cr==null?void 0:cr._offline.build(lr),_online:lr}}(tr._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(er){this._byteString=er}static fromBase64String(er){try{return new Bytes(ByteString.fromBase64String(er))}catch(rr){throw new FirestoreError(D$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+rr)}}static fromUint8Array(er){return new Bytes(ByteString.fromUint8Array(er))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(er){return this._byteString.isEqual(er._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...er){for(let rr=0;rr<er.length;++rr)if(er[rr].length===0)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(er)}isEqual(er){return this._internalPath.isEqual(er._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(er){this._methodName=er}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(er,rr){if(!isFinite(er)||er<-90||er>90)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+er);if(!isFinite(rr)||rr<-180||rr>180)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+rr);this._lat=er,this._long=rr}get latitude(){return this._lat}get longitude(){return this._long}isEqual(er){return this._lat===er._lat&&this._long===er._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(er){return __PRIVATE_primitiveComparator(this._lat,er._lat)||__PRIVATE_primitiveComparator(this._long,er._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(er){this._values=(er||[]).map(rr=>rr)}toArray(){return this._values.map(er=>er)}isEqual(er){return function(nr,ir){if(nr.length!==ir.length)return!1;for(let sr=0;sr<nr.length;++sr)if(nr[sr]!==ir[sr])return!1;return!0}(this._values,er._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be$1=/^__.*__$/;class ParsedSetData{constructor(er,rr,nr){this.data=er,this.fieldMask=rr,this.fieldTransforms=nr}toMutation(er,rr){return this.fieldMask!==null?new __PRIVATE_PatchMutation(er,this.data,this.fieldMask,rr,this.fieldTransforms):new __PRIVATE_SetMutation(er,this.data,rr,this.fieldTransforms)}}class ParsedUpdateData{constructor(er,rr,nr){this.data=er,this.fieldMask=rr,this.fieldTransforms=nr}toMutation(er,rr){return new __PRIVATE_PatchMutation(er,this.data,this.fieldMask,rr,this.fieldTransforms)}}function __PRIVATE_isWrite(tr){switch(tr){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(er,rr,nr,ir,sr,ar){this.settings=er,this.databaseId=rr,this.serializer=nr,this.ignoreUndefinedProperties=ir,sr===void 0&&this.vu(),this.fieldTransforms=sr||[],this.fieldMask=ar||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(er){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),er),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(er){var rr;const nr=(rr=this.path)===null||rr===void 0?void 0:rr.child(er),ir=this.Fu({path:nr,xu:!1});return ir.Ou(er),ir}Nu(er){var rr;const nr=(rr=this.path)===null||rr===void 0?void 0:rr.child(er),ir=this.Fu({path:nr,xu:!1});return ir.vu(),ir}Lu(er){return this.Fu({path:void 0,xu:!0})}Bu(er){return __PRIVATE_createError(er,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(er){return this.fieldMask.find(rr=>er.isPrefixOf(rr))!==void 0||this.fieldTransforms.find(rr=>er.isPrefixOf(rr.field))!==void 0}vu(){if(this.path)for(let er=0;er<this.path.length;er++)this.Ou(this.path.get(er))}Ou(er){if(er.length===0)throw this.Bu("Document fields must not be empty");if(__PRIVATE_isWrite(this.Cu)&&be$1.test(er))throw this.Bu('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(er,rr,nr){this.databaseId=er,this.ignoreUndefinedProperties=rr,this.serializer=nr||__PRIVATE_newSerializer(er)}Qu(er,rr,nr,ir=!1){return new __PRIVATE_ParseContextImpl({Cu:er,methodName:rr,qu:nr,path:FieldPath$1.emptyPath(),xu:!1,ku:ir},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(tr){const er=tr._freezeSettings(),rr=__PRIVATE_newSerializer(tr._databaseId);return new __PRIVATE_UserDataReader(tr._databaseId,!!er.ignoreUndefinedProperties,rr)}function __PRIVATE_parseSetData(tr,er,rr,nr,ir,sr={}){const ar=tr.Qu(sr.merge||sr.mergeFields?2:0,er,rr,ir);__PRIVATE_validatePlainObject("Data must be an object, but it was:",ar,nr);const cr=__PRIVATE_parseObject(nr,ar);let lr,or;if(sr.merge)lr=new FieldMask(ar.fieldMask),or=ar.fieldTransforms;else if(sr.mergeFields){const ur=[];for(const hr of sr.mergeFields){const dr=__PRIVATE_fieldPathFromArgument$1(er,hr,rr);if(!ar.contains(dr))throw new FirestoreError(D$1.INVALID_ARGUMENT,`Field '${dr}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(ur,dr)||ur.push(dr)}lr=new FieldMask(ur),or=ar.fieldTransforms.filter(hr=>lr.covers(hr.field))}else lr=null,or=ar.fieldTransforms;return new ParsedSetData(new ObjectValue(cr),lr,or)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(er){if(er.Cu!==2)throw er.Cu===1?er.Bu(`${this._methodName}() can only appear at the top level of your update data`):er.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return er.fieldMask.push(er.path),null}isEqual(er){return er instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(tr,er,rr,nr){const ir=tr.Qu(1,er,rr);__PRIVATE_validatePlainObject("Data must be an object, but it was:",ir,nr);const sr=[],ar=ObjectValue.empty();forEach(nr,(lr,or)=>{const ur=__PRIVATE_fieldPathFromDotSeparatedString(er,lr,rr);or=getModularInstance(or);const hr=ir.Nu(ur);if(or instanceof __PRIVATE_DeleteFieldValueImpl)sr.push(ur);else{const dr=__PRIVATE_parseData(or,hr);dr!=null&&(sr.push(ur),ar.set(ur,dr))}});const cr=new FieldMask(sr);return new ParsedUpdateData(ar,cr,ir.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(tr,er,rr,nr,ir,sr){const ar=tr.Qu(1,er,rr),cr=[__PRIVATE_fieldPathFromArgument$1(er,nr,rr)],lr=[ir];if(sr.length%2!=0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Function ${er}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let dr=0;dr<sr.length;dr+=2)cr.push(__PRIVATE_fieldPathFromArgument$1(er,sr[dr])),lr.push(sr[dr+1]);const or=[],ur=ObjectValue.empty();for(let dr=cr.length-1;dr>=0;--dr)if(!__PRIVATE_fieldMaskContains(or,cr[dr])){const fr=cr[dr];let gr=lr[dr];gr=getModularInstance(gr);const br=ar.Nu(fr);if(gr instanceof __PRIVATE_DeleteFieldValueImpl)or.push(fr);else{const pr=__PRIVATE_parseData(gr,br);pr!=null&&(or.push(fr),ur.set(fr,pr))}}const hr=new FieldMask(or);return new ParsedUpdateData(ur,hr,ar.fieldTransforms)}function __PRIVATE_parseQueryValue(tr,er,rr,nr=!1){return __PRIVATE_parseData(rr,tr.Qu(nr?4:3,er))}function __PRIVATE_parseData(tr,er){if(__PRIVATE_looksLikeJsonObject(tr=getModularInstance(tr)))return __PRIVATE_validatePlainObject("Unsupported field value:",er,tr),__PRIVATE_parseObject(tr,er);if(tr instanceof FieldValue)return function(nr,ir){if(!__PRIVATE_isWrite(ir.Cu))throw ir.Bu(`${nr._methodName}() can only be used with update() and set()`);if(!ir.path)throw ir.Bu(`${nr._methodName}() is not currently supported inside arrays`);const sr=nr._toFieldTransform(ir);sr&&ir.fieldTransforms.push(sr)}(tr,er),null;if(tr===void 0&&er.ignoreUndefinedProperties)return null;if(er.path&&er.fieldMask.push(er.path),tr instanceof Array){if(er.settings.xu&&er.Cu!==4)throw er.Bu("Nested arrays are not supported");return function(nr,ir){const sr=[];let ar=0;for(const cr of nr){let lr=__PRIVATE_parseData(cr,ir.Lu(ar));lr==null&&(lr={nullValue:"NULL_VALUE"}),sr.push(lr),ar++}return{arrayValue:{values:sr}}}(tr,er)}return function(nr,ir){if((nr=getModularInstance(nr))===null)return{nullValue:"NULL_VALUE"};if(typeof nr=="number")return toNumber$4(ir.serializer,nr);if(typeof nr=="boolean")return{booleanValue:nr};if(typeof nr=="string")return{stringValue:nr};if(nr instanceof Date){const sr=Timestamp.fromDate(nr);return{timestampValue:toTimestamp(ir.serializer,sr)}}if(nr instanceof Timestamp){const sr=new Timestamp(nr.seconds,1e3*Math.floor(nr.nanoseconds/1e3));return{timestampValue:toTimestamp(ir.serializer,sr)}}if(nr instanceof GeoPoint)return{geoPointValue:{latitude:nr.latitude,longitude:nr.longitude}};if(nr instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(ir.serializer,nr._byteString)};if(nr instanceof DocumentReference){const sr=ir.databaseId,ar=nr.firestore._databaseId;if(!ar.isEqual(sr))throw ir.Bu(`Document reference is for database ${ar.projectId}/${ar.database} but should be for database ${sr.projectId}/${sr.database}`);return{referenceValue:__PRIVATE_toResourceName(nr.firestore._databaseId||ir.databaseId,nr._key.path)}}if(nr instanceof VectorValue)return function(ar,cr){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:ar.toArray().map(lr=>{if(typeof lr!="number")throw cr.Bu("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(cr.serializer,lr)})}}}}}}(nr,ir);throw ir.Bu(`Unsupported field value: ${__PRIVATE_valueDescription(nr)}`)}(tr,er)}function __PRIVATE_parseObject(tr,er){const rr={};return isEmpty(tr)?er.path&&er.path.length>0&&er.fieldMask.push(er.path):forEach(tr,(nr,ir)=>{const sr=__PRIVATE_parseData(ir,er.Mu(nr));sr!=null&&(rr[nr]=sr)}),{mapValue:{fields:rr}}}function __PRIVATE_looksLikeJsonObject(tr){return!(typeof tr!="object"||tr===null||tr instanceof Array||tr instanceof Date||tr instanceof Timestamp||tr instanceof GeoPoint||tr instanceof Bytes||tr instanceof DocumentReference||tr instanceof FieldValue||tr instanceof VectorValue)}function __PRIVATE_validatePlainObject(tr,er,rr){if(!__PRIVATE_looksLikeJsonObject(rr)||!function(ir){return typeof ir=="object"&&ir!==null&&(Object.getPrototypeOf(ir)===Object.prototype||Object.getPrototypeOf(ir)===null)}(rr)){const nr=__PRIVATE_valueDescription(rr);throw nr==="an object"?er.Bu(tr+" a custom object"):er.Bu(tr+" "+nr)}}function __PRIVATE_fieldPathFromArgument$1(tr,er,rr){if((er=getModularInstance(er))instanceof FieldPath)return er._internalPath;if(typeof er=="string")return __PRIVATE_fieldPathFromDotSeparatedString(tr,er);throw __PRIVATE_createError("Field path arguments must be of type string or ",tr,!1,void 0,rr)}const De=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(tr,er,rr){if(er.search(De)>=0)throw __PRIVATE_createError(`Invalid field path (${er}). Paths must not contain '~', '*', '/', '[', or ']'`,tr,!1,void 0,rr);try{return new FieldPath(...er.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${er}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,tr,!1,void 0,rr)}}function __PRIVATE_createError(tr,er,rr,nr,ir){const sr=nr&&!nr.isEmpty(),ar=ir!==void 0;let cr=`Function ${er}() called with invalid data`;rr&&(cr+=" (via `toFirestore()`)"),cr+=". ";let lr="";return(sr||ar)&&(lr+=" (found",sr&&(lr+=` in field ${nr}`),ar&&(lr+=` in document ${ir}`),lr+=")"),new FirestoreError(D$1.INVALID_ARGUMENT,cr+tr+lr)}function __PRIVATE_fieldMaskContains(tr,er){return tr.some(rr=>rr.isEqual(er))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(er,rr,nr,ir,sr){this._firestore=er,this._userDataWriter=rr,this._key=nr,this._document=ir,this._converter=sr}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const er=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(er)}return this._userDataWriter.convertValue(this._document.data.value)}}get(er){if(this._document){const rr=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",er));if(rr!==null)return this._userDataWriter.convertValue(rr)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(tr,er){return typeof er=="string"?__PRIVATE_fieldPathFromDotSeparatedString(tr,er):er instanceof FieldPath?er._internalPath:er._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(tr){if(tr.limitType==="L"&&tr.explicitOrderBy.length===0)throw new FirestoreError(D$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(tr,er,...rr){let nr=[];er instanceof AppliableConstraint&&nr.push(er),nr=nr.concat(rr),function(sr){const ar=sr.filter(lr=>lr instanceof QueryCompositeFilterConstraint).length,cr=sr.filter(lr=>lr instanceof QueryFieldFilterConstraint).length;if(ar>1||ar>0&&cr>0)throw new FirestoreError(D$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(nr);for(const ir of nr)tr=ir._apply(tr);return tr}class QueryFieldFilterConstraint extends QueryConstraint{constructor(er,rr,nr){super(),this._field=er,this._op=rr,this._value=nr,this.type="where"}static _create(er,rr,nr){return new QueryFieldFilterConstraint(er,rr,nr)}_apply(er){const rr=this._parse(er);return __PRIVATE_validateNewFieldFilter(er._query,rr),new Query(er.firestore,er.converter,__PRIVATE_queryWithAddedFilter(er._query,rr))}_parse(er){const rr=__PRIVATE_newUserDataReader(er.firestore);return function(sr,ar,cr,lr,or,ur,hr){let dr;if(or.isKeyField()){if(ur==="array-contains"||ur==="array-contains-any")throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ur}' queries on documentId().`);if(ur==="in"||ur==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(hr,ur);const fr=[];for(const gr of hr)fr.push(__PRIVATE_parseDocumentIdValue(lr,sr,gr));dr={arrayValue:{values:fr}}}else dr=__PRIVATE_parseDocumentIdValue(lr,sr,hr)}else ur!=="in"&&ur!=="not-in"&&ur!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(hr,ur),dr=__PRIVATE_parseQueryValue(cr,ar,hr,ur==="in"||ur==="not-in");return FieldFilter.create(or,ur,dr)}(er._query,"where",rr,er.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(er,rr){super(),this.type=er,this._queryConstraints=rr}static _create(er,rr){return new QueryCompositeFilterConstraint(er,rr)}_parse(er){const rr=this._queryConstraints.map(nr=>nr._parse(er)).filter(nr=>nr.getFilters().length>0);return rr.length===1?rr[0]:CompositeFilter.create(rr,this._getOperator())}_apply(er){const rr=this._parse(er);return rr.getFilters().length===0?er:(function(ir,sr){let ar=ir;const cr=sr.getFlattenedFilters();for(const lr of cr)__PRIVATE_validateNewFieldFilter(ar,lr),ar=__PRIVATE_queryWithAddedFilter(ar,lr)}(er._query,rr),new Query(er.firestore,er.converter,__PRIVATE_queryWithAddedFilter(er._query,rr)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(er,rr){super(),this._field=er,this._direction=rr,this.type="orderBy"}static _create(er,rr){return new QueryOrderByConstraint(er,rr)}_apply(er){const rr=function(ir,sr,ar){if(ir.startAt!==null)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(ir.endAt!==null)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(sr,ar)}(er._query,this._field,this._direction);return new Query(er.firestore,er.converter,function(ir,sr){const ar=ir.explicitOrderBy.concat([sr]);return new __PRIVATE_QueryImpl(ir.path,ir.collectionGroup,ar,ir.filters.slice(),ir.limit,ir.limitType,ir.startAt,ir.endAt)}(er._query,rr))}}function orderBy(tr,er="asc"){const rr=er,nr=__PRIVATE_fieldPathFromArgument("orderBy",tr);return QueryOrderByConstraint._create(nr,rr)}class QueryLimitConstraint extends QueryConstraint{constructor(er,rr,nr){super(),this.type=er,this._limit=rr,this._limitType=nr}static _create(er,rr,nr){return new QueryLimitConstraint(er,rr,nr)}_apply(er){return new Query(er.firestore,er.converter,__PRIVATE_queryWithLimit(er._query,this._limit,this._limitType))}}function limit(tr){return __PRIVATE_validatePositiveNumber("limit",tr),QueryLimitConstraint._create("limit",tr,"F")}function __PRIVATE_parseDocumentIdValue(tr,er,rr){if(typeof(rr=getModularInstance(rr))=="string"){if(rr==="")throw new FirestoreError(D$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(er)&&rr.indexOf("/")!==-1)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${rr}' contains a '/' character.`);const nr=er.path.child(ResourcePath.fromString(rr));if(!DocumentKey.isDocumentKey(nr))throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${nr}' is not because it has an odd number of segments (${nr.length}).`);return __PRIVATE_refValue(tr,new DocumentKey(nr))}if(rr instanceof DocumentReference)return __PRIVATE_refValue(tr,rr._key);throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(rr)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(tr,er){if(!Array.isArray(tr)||tr.length===0)throw new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${er.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(tr,er){const rr=function(ir,sr){for(const ar of ir)for(const cr of ar.getFlattenedFilters())if(sr.indexOf(cr.op)>=0)return cr.op;return null}(tr.filters,function(ir){switch(ir){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(er.op));if(rr!==null)throw rr===er.op?new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${er.op.toString()}' filter.`):new FirestoreError(D$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${er.op.toString()}' filters with '${rr.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(er,rr="none"){switch(__PRIVATE_typeOrder(er)){case 0:return null;case 1:return er.booleanValue;case 2:return __PRIVATE_normalizeNumber(er.integerValue||er.doubleValue);case 3:return this.convertTimestamp(er.timestampValue);case 4:return this.convertServerTimestamp(er,rr);case 5:return er.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(er.bytesValue));case 7:return this.convertReference(er.referenceValue);case 8:return this.convertGeoPoint(er.geoPointValue);case 9:return this.convertArray(er.arrayValue,rr);case 11:return this.convertObject(er.mapValue,rr);case 10:return this.convertVectorValue(er.mapValue);default:throw fail()}}convertObject(er,rr){return this.convertObjectMap(er.fields,rr)}convertObjectMap(er,rr="none"){const nr={};return forEach(er,(ir,sr)=>{nr[ir]=this.convertValue(sr,rr)}),nr}convertVectorValue(er){var rr,nr,ir;const sr=(ir=(nr=(rr=er.fields)===null||rr===void 0?void 0:rr.value.arrayValue)===null||nr===void 0?void 0:nr.values)===null||ir===void 0?void 0:ir.map(ar=>__PRIVATE_normalizeNumber(ar.doubleValue));return new VectorValue(sr)}convertGeoPoint(er){return new GeoPoint(__PRIVATE_normalizeNumber(er.latitude),__PRIVATE_normalizeNumber(er.longitude))}convertArray(er,rr){return(er.values||[]).map(nr=>this.convertValue(nr,rr))}convertServerTimestamp(er,rr){switch(rr){case"previous":const nr=__PRIVATE_getPreviousValue(er);return nr==null?null:this.convertValue(nr,rr);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(er));default:return null}}convertTimestamp(er){const rr=__PRIVATE_normalizeTimestamp(er);return new Timestamp(rr.seconds,rr.nanos)}convertDocumentKey(er,rr){const nr=ResourcePath.fromString(er);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(nr));const ir=new DatabaseId(nr.get(1),nr.get(3)),sr=new DocumentKey(nr.popFirst(5));return ir.isEqual(rr)||__PRIVATE_logError(`Document ${sr} contains a document reference within a different database (${ir.projectId}/${ir.database}) which is not supported. It will be treated as a reference in the current database (${rr.projectId}/${rr.database}) instead.`),sr}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(tr,er,rr){let nr;return nr=tr?rr&&(rr.merge||rr.mergeFields)?tr.toFirestore(er,rr):tr.toFirestore(er):er,nr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(er,rr){this.hasPendingWrites=er,this.fromCache=rr}isEqual(er){return this.hasPendingWrites===er.hasPendingWrites&&this.fromCache===er.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(er,rr,nr,ir,sr,ar){super(er,rr,nr,ir,ar),this._firestore=er,this._firestoreImpl=er,this.metadata=sr}exists(){return super.exists()}data(er={}){if(this._document){if(this._converter){const rr=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(rr,er)}return this._userDataWriter.convertValue(this._document.data.value,er.serverTimestamps)}}get(er,rr={}){if(this._document){const nr=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",er));if(nr!==null)return this._userDataWriter.convertValue(nr,rr.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(er={}){return super.data(er)}}class QuerySnapshot{constructor(er,rr,nr,ir){this._firestore=er,this._userDataWriter=rr,this._snapshot=ir,this.metadata=new SnapshotMetadata(ir.hasPendingWrites,ir.fromCache),this.query=nr}get docs(){const er=[];return this.forEach(rr=>er.push(rr)),er}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(er,rr){this._snapshot.docs.forEach(nr=>{er.call(rr,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,nr.key,nr,new SnapshotMetadata(this._snapshot.mutatedKeys.has(nr.key),this._snapshot.fromCache),this.query.converter))})}docChanges(er={}){const rr=!!er.includeMetadataChanges;if(rr&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(D$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===rr||(this._cachedChanges=function(ir,sr){if(ir._snapshot.oldDocs.isEmpty()){let ar=0;return ir._snapshot.docChanges.map(cr=>{const lr=new QueryDocumentSnapshot(ir._firestore,ir._userDataWriter,cr.doc.key,cr.doc,new SnapshotMetadata(ir._snapshot.mutatedKeys.has(cr.doc.key),ir._snapshot.fromCache),ir.query.converter);return cr.doc,{type:"added",doc:lr,oldIndex:-1,newIndex:ar++}})}{let ar=ir._snapshot.oldDocs;return ir._snapshot.docChanges.filter(cr=>sr||cr.type!==3).map(cr=>{const lr=new QueryDocumentSnapshot(ir._firestore,ir._userDataWriter,cr.doc.key,cr.doc,new SnapshotMetadata(ir._snapshot.mutatedKeys.has(cr.doc.key),ir._snapshot.fromCache),ir.query.converter);let or=-1,ur=-1;return cr.type!==0&&(or=ar.indexOf(cr.doc.key),ar=ar.delete(cr.doc.key)),cr.type!==1&&(ar=ar.add(cr.doc),ur=ar.indexOf(cr.doc.key)),{type:__PRIVATE_resultChangeType(cr.type),doc:lr,oldIndex:or,newIndex:ur}})}}(this,rr),this._cachedChangesIncludeMetadataChanges=rr),this._cachedChanges}}function __PRIVATE_resultChangeType(tr){switch(tr){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(tr){tr=__PRIVATE_cast(tr,DocumentReference);const er=__PRIVATE_cast(tr.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(er),tr._key).then(rr=>__PRIVATE_convertToDocSnapshot(er,tr,rr))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(er){super(),this.firestore=er}convertBytes(er){return new Bytes(er)}convertReference(er){const rr=this.convertDocumentKey(er,this.firestore._databaseId);return new DocumentReference(this.firestore,null,rr)}}function getDocFromServer(tr){tr=__PRIVATE_cast(tr,DocumentReference);const er=__PRIVATE_cast(tr.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(er),tr._key,{source:"server"}).then(rr=>__PRIVATE_convertToDocSnapshot(er,tr,rr))}function getDocs(tr){tr=__PRIVATE_cast(tr,Query);const er=__PRIVATE_cast(tr.firestore,Firestore),rr=ensureFirestoreConfigured(er),nr=new __PRIVATE_ExpUserDataWriter(er);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(tr._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(rr,tr._query).then(ir=>new QuerySnapshot(er,nr,tr,ir))}function setDoc(tr,er,rr){tr=__PRIVATE_cast(tr,DocumentReference);const nr=__PRIVATE_cast(tr.firestore,Firestore),ir=__PRIVATE_applyFirestoreDataConverter(tr.converter,er,rr);return executeWrite(nr,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(nr),"setDoc",tr._key,ir,tr.converter!==null,rr).toMutation(tr._key,Precondition.none())])}function updateDoc(tr,er,rr,...nr){tr=__PRIVATE_cast(tr,DocumentReference);const ir=__PRIVATE_cast(tr.firestore,Firestore),sr=__PRIVATE_newUserDataReader(ir);let ar;return ar=typeof(er=getModularInstance(er))=="string"||er instanceof FieldPath?__PRIVATE_parseUpdateVarargs(sr,"updateDoc",tr._key,er,rr,nr):__PRIVATE_parseUpdateData(sr,"updateDoc",tr._key,er),executeWrite(ir,[ar.toMutation(tr._key,Precondition.exists(!0))])}function deleteDoc(tr){return executeWrite(__PRIVATE_cast(tr.firestore,Firestore),[new __PRIVATE_DeleteMutation(tr._key,Precondition.none())])}function addDoc(tr,er){const rr=__PRIVATE_cast(tr.firestore,Firestore),nr=doc(tr),ir=__PRIVATE_applyFirestoreDataConverter(tr.converter,er);return executeWrite(rr,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(tr.firestore),"addDoc",nr._key,ir,tr.converter!==null,{}).toMutation(nr._key,Precondition.exists(!1))]).then(()=>nr)}function onSnapshot(tr,...er){var rr,nr,ir;tr=getModularInstance(tr);let sr={includeMetadataChanges:!1,source:"default"},ar=0;typeof er[ar]!="object"||__PRIVATE_isPartialObserver(er[ar])||(sr=er[ar],ar++);const cr={includeMetadataChanges:sr.includeMetadataChanges,source:sr.source};if(__PRIVATE_isPartialObserver(er[ar])){const hr=er[ar];er[ar]=(rr=hr.next)===null||rr===void 0?void 0:rr.bind(hr),er[ar+1]=(nr=hr.error)===null||nr===void 0?void 0:nr.bind(hr),er[ar+2]=(ir=hr.complete)===null||ir===void 0?void 0:ir.bind(hr)}let lr,or,ur;if(tr instanceof DocumentReference)or=__PRIVATE_cast(tr.firestore,Firestore),ur=__PRIVATE_newQueryForPath(tr._key.path),lr={next:hr=>{er[ar]&&er[ar](__PRIVATE_convertToDocSnapshot(or,tr,hr))},error:er[ar+1],complete:er[ar+2]};else{const hr=__PRIVATE_cast(tr,Query);or=__PRIVATE_cast(hr.firestore,Firestore),ur=hr._query;const dr=new __PRIVATE_ExpUserDataWriter(or);lr={next:fr=>{er[ar]&&er[ar](new QuerySnapshot(or,dr,hr,fr))},error:er[ar+1],complete:er[ar+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(tr._query)}return function(dr,fr,gr,br){const pr=new __PRIVATE_AsyncObserver(br),mr=new __PRIVATE_QueryListener(fr,pr,gr);return dr.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(dr),mr)),()=>{pr.Za(),dr.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(dr),mr))}}(ensureFirestoreConfigured(or),ur,cr,lr)}function executeWrite(tr,er){return function(nr,ir){const sr=new __PRIVATE_Deferred;return nr.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(nr),ir,sr)),sr.promise}(ensureFirestoreConfigured(tr),er)}function __PRIVATE_convertToDocSnapshot(tr,er,rr){const nr=rr.docs.get(er._key),ir=new __PRIVATE_ExpUserDataWriter(tr);return new DocumentSnapshot(tr,ir,er._key,nr,new SnapshotMetadata(rr.hasPendingWrites,rr.fromCache),er.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WriteBatch{constructor(er,rr){this._firestore=er,this._commitHandler=rr,this._mutations=[],this._committed=!1,this._dataReader=__PRIVATE_newUserDataReader(er)}set(er,rr,nr){this._verifyNotCommitted();const ir=__PRIVATE_validateReference(er,this._firestore),sr=__PRIVATE_applyFirestoreDataConverter(ir.converter,rr,nr),ar=__PRIVATE_parseSetData(this._dataReader,"WriteBatch.set",ir._key,sr,ir.converter!==null,nr);return this._mutations.push(ar.toMutation(ir._key,Precondition.none())),this}update(er,rr,nr,...ir){this._verifyNotCommitted();const sr=__PRIVATE_validateReference(er,this._firestore);let ar;return ar=typeof(rr=getModularInstance(rr))=="string"||rr instanceof FieldPath?__PRIVATE_parseUpdateVarargs(this._dataReader,"WriteBatch.update",sr._key,rr,nr,ir):__PRIVATE_parseUpdateData(this._dataReader,"WriteBatch.update",sr._key,rr),this._mutations.push(ar.toMutation(sr._key,Precondition.exists(!0))),this}delete(er){this._verifyNotCommitted();const rr=__PRIVATE_validateReference(er,this._firestore);return this._mutations=this._mutations.concat(new __PRIVATE_DeleteMutation(rr._key,Precondition.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new FirestoreError(D$1.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function __PRIVATE_validateReference(tr,er){if((tr=getModularInstance(tr)).firestore!==er)throw new FirestoreError(D$1.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return tr}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeBatch(tr){return ensureFirestoreConfigured(tr=__PRIVATE_cast(tr,Firestore)),new WriteBatch(tr,er=>executeWrite(tr,er))}(function(er,rr=!0){(function(ir){S$1=ir})(SDK_VERSION),_registerComponent(new Component("firestore",(nr,{instanceIdentifier:ir,options:sr})=>{const ar=nr.getProvider("app").getImmediate(),cr=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(nr.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(nr.getProvider("app-check-internal")),function(or,ur){if(!Object.prototype.hasOwnProperty.apply(or.options,["projectId"]))throw new FirestoreError(D$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(or.options.projectId,ur)}(ar,ir),ar);return sr=Object.assign({useFetchStreams:rr},sr),cr._setSettings(sr),cr},"PUBLIC").setMultipleInstances(!0)),registerVersion(w$1,"4.7.3",er),registerVersion(w$1,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3,DEFAULT_MIN_SLEEP_TIME_MILLIS=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(er,rr,nr=0){super(prependCode(er),`Firebase Storage: ${rr} (${prependCode(er)})`),this.status_=nr,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(er){this.status_=er}_codeEquals(er){return prependCode(er)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(er){this.customData.serverResponse=er,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(tr){tr.UNKNOWN="unknown",tr.OBJECT_NOT_FOUND="object-not-found",tr.BUCKET_NOT_FOUND="bucket-not-found",tr.PROJECT_NOT_FOUND="project-not-found",tr.QUOTA_EXCEEDED="quota-exceeded",tr.UNAUTHENTICATED="unauthenticated",tr.UNAUTHORIZED="unauthorized",tr.UNAUTHORIZED_APP="unauthorized-app",tr.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",tr.INVALID_CHECKSUM="invalid-checksum",tr.CANCELED="canceled",tr.INVALID_EVENT_NAME="invalid-event-name",tr.INVALID_URL="invalid-url",tr.INVALID_DEFAULT_BUCKET="invalid-default-bucket",tr.NO_DEFAULT_BUCKET="no-default-bucket",tr.CANNOT_SLICE_BLOB="cannot-slice-blob",tr.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",tr.NO_DOWNLOAD_URL="no-download-url",tr.INVALID_ARGUMENT="invalid-argument",tr.INVALID_ARGUMENT_COUNT="invalid-argument-count",tr.APP_DELETED="app-deleted",tr.INVALID_ROOT_OPERATION="invalid-root-operation",tr.INVALID_FORMAT="invalid-format",tr.INTERNAL_ERROR="internal-error",tr.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(tr){return"storage/"+tr}function unknown(){const tr="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,tr)}function objectNotFound(tr){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+tr+"' does not exist.")}function quotaExceeded(tr){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+tr+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const tr="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,tr)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(tr){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+tr+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(tr){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+tr+"'.")}function invalidDefaultBucket(tr){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+tr+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function serverFileWrongSize(){return new StorageError(StorageErrorCode.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(tr){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${tr} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument$1(tr){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,tr)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(tr){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+tr+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(tr,er){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+tr+"': "+er)}function internalError(tr){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+tr)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(er,rr){this.bucket=er,this.path_=rr}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const er=encodeURIComponent;return"/b/"+er(this.bucket)+"/o/"+er(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(er,rr){let nr;try{nr=Location.makeFromUrl(er,rr)}catch{return new Location(er,"")}if(nr.path==="")return nr;throw invalidDefaultBucket(er)}static makeFromUrl(er,rr){let nr=null;const ir="([A-Za-z0-9.\\-_]+)";function sr(vr){vr.path.charAt(vr.path.length-1)==="/"&&(vr.path_=vr.path_.slice(0,-1))}const ar="(/(.*))?$",cr=new RegExp("^gs://"+ir+ar,"i"),lr={bucket:1,path:3};function or(vr){vr.path_=decodeURIComponent(vr.path)}const ur="v[A-Za-z0-9_]+",hr=rr.replace(/[.]/g,"\\."),dr="(/([^?#]*).*)?$",fr=new RegExp(`^https?://${hr}/${ur}/b/${ir}/o${dr}`,"i"),gr={bucket:1,path:3},br=rr===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":rr,pr="([^?#]*)",mr=new RegExp(`^https?://${br}/${ir}/${pr}`,"i"),xr=[{regex:cr,indices:lr,postModify:sr},{regex:fr,indices:gr,postModify:or},{regex:mr,indices:{bucket:1,path:2},postModify:or}];for(let vr=0;vr<xr.length;vr++){const _r=xr[vr],Er=_r.regex.exec(er);if(Er){const Tr=Er[_r.indices.bucket];let Rr=Er[_r.indices.path];Rr||(Rr=""),nr=new Location(Tr,Rr),_r.postModify(nr);break}}if(nr==null)throw invalidUrl(er);return nr}}class FailRequest{constructor(er){this.promise_=Promise.reject(er)}getPromise(){return this.promise_}cancel(er=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(tr,er,rr){let nr=1,ir=null,sr=null,ar=!1,cr=0;function lr(){return cr===2}let or=!1;function ur(...pr){or||(or=!0,er.apply(null,pr))}function hr(pr){ir=setTimeout(()=>{ir=null,tr(fr,lr())},pr)}function dr(){sr&&clearTimeout(sr)}function fr(pr,...mr){if(or){dr();return}if(pr){dr(),ur.call(null,pr,...mr);return}if(lr()||ar){dr(),ur.call(null,pr,...mr);return}nr<64&&(nr*=2);let xr;cr===1?(cr=2,xr=0):xr=(nr+Math.random())*1e3,hr(xr)}let gr=!1;function br(pr){gr||(gr=!0,dr(),!or&&(ir!==null?(pr||(cr=2),clearTimeout(ir),hr(0)):pr||(cr=1)))}return hr(0),sr=setTimeout(()=>{ar=!0,br(!0)},rr),br}function stop(tr){tr(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(tr){return tr!==void 0}function isFunction$4(tr){return typeof tr=="function"}function isNonArrayObject(tr){return typeof tr=="object"&&!Array.isArray(tr)}function isString$2(tr){return typeof tr=="string"||tr instanceof String}function isNativeBlob(tr){return isNativeBlobDefined()&&tr instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(tr,er,rr,nr){if(nr<er)throw invalidArgument$1(`Invalid value for '${tr}'. Expected ${er} or greater.`);if(nr>rr)throw invalidArgument$1(`Invalid value for '${tr}'. Expected ${rr} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(tr,er,rr){let nr=er;return rr==null&&(nr=`https://${er}`),`${rr}://${nr}/v0${tr}`}function makeQueryString(tr){const er=encodeURIComponent;let rr="?";for(const nr in tr)if(tr.hasOwnProperty(nr)){const ir=er(nr)+"="+er(tr[nr]);rr=rr+ir+"&"}return rr=rr.slice(0,-1),rr}var ErrorCode;(function(tr){tr[tr.NO_ERROR=0]="NO_ERROR",tr[tr.NETWORK_ERROR=1]="NETWORK_ERROR",tr[tr.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(tr,er){const rr=tr>=500&&tr<600,ir=[408,429].indexOf(tr)!==-1,sr=er.indexOf(tr)!==-1;return rr||ir||sr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(er,rr,nr,ir,sr,ar,cr,lr,or,ur,hr,dr=!0){this.url_=er,this.method_=rr,this.headers_=nr,this.body_=ir,this.successCodes_=sr,this.additionalRetryCodes_=ar,this.callback_=cr,this.errorCallback_=lr,this.timeout_=or,this.progressCallback_=ur,this.connectionFactory_=hr,this.retry=dr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((fr,gr)=>{this.resolve_=fr,this.reject_=gr,this.start_()})}start_(){const er=(nr,ir)=>{if(ir){nr(!1,new RequestEndStatus(!1,null,!0));return}const sr=this.connectionFactory_();this.pendingConnection_=sr;const ar=cr=>{const lr=cr.loaded,or=cr.lengthComputable?cr.total:-1;this.progressCallback_!==null&&this.progressCallback_(lr,or)};this.progressCallback_!==null&&sr.addUploadProgressListener(ar),sr.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&sr.removeUploadProgressListener(ar),this.pendingConnection_=null;const cr=sr.getErrorCode()===ErrorCode.NO_ERROR,lr=sr.getStatus();if(!cr||isRetryStatusCode(lr,this.additionalRetryCodes_)&&this.retry){const ur=sr.getErrorCode()===ErrorCode.ABORT;nr(!1,new RequestEndStatus(!1,null,ur));return}const or=this.successCodes_.indexOf(lr)!==-1;nr(!0,new RequestEndStatus(or,sr))})},rr=(nr,ir)=>{const sr=this.resolve_,ar=this.reject_,cr=ir.connection;if(ir.wasSuccessCode)try{const lr=this.callback_(cr,cr.getResponse());isJustDef(lr)?sr(lr):sr()}catch(lr){ar(lr)}else if(cr!==null){const lr=unknown();lr.serverResponse=cr.getErrorText(),this.errorCallback_?ar(this.errorCallback_(cr,lr)):ar(lr)}else if(ir.canceled){const lr=this.appDelete_?appDeleted():canceled();ar(lr)}else{const lr=retryLimitExceeded();ar(lr)}};this.canceled_?rr(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(er,rr,this.timeout_)}getPromise(){return this.promise_}cancel(er){this.canceled_=!0,this.appDelete_=er||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(er,rr,nr){this.wasSuccessCode=er,this.connection=rr,this.canceled=!!nr}}function addAuthHeader_(tr,er){er!==null&&er.length>0&&(tr.Authorization="Firebase "+er)}function addVersionHeader_(tr,er){tr["X-Firebase-Storage-Version"]="webjs/"+(er??"AppManager")}function addGmpidHeader_(tr,er){er&&(tr["X-Firebase-GMPID"]=er)}function addAppCheckHeader_(tr,er){er!==null&&(tr["X-Firebase-AppCheck"]=er)}function makeRequest(tr,er,rr,nr,ir,sr,ar=!0){const cr=makeQueryString(tr.urlParams),lr=tr.url+cr,or=Object.assign({},tr.headers);return addGmpidHeader_(or,er),addAuthHeader_(or,rr),addVersionHeader_(or,sr),addAppCheckHeader_(or,nr),new NetworkRequest(lr,tr.method,or,tr.body,tr.successCodes,tr.additionalRetryCodes,tr.handler,tr.errorHandler,tr.timeout,tr.progressCallback,ir,ar)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...tr){const er=getBlobBuilder();if(er!==void 0){const rr=new er;for(let nr=0;nr<tr.length;nr++)rr.append(tr[nr]);return rr.getBlob()}else{if(isNativeBlobDefined())return new Blob(tr);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(tr,er,rr){return tr.webkitSlice?tr.webkitSlice(er,rr):tr.mozSlice?tr.mozSlice(er,rr):tr.slice?tr.slice(er,rr):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(tr){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(tr)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(er,rr){this.data=er,this.contentType=rr||null}}function dataFromString(tr,er){switch(tr){case StringFormat.RAW:return new StringData(utf8Bytes_(er));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(tr,er));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(er),dataURLContentType_(er))}throw unknown()}function utf8Bytes_(tr){const er=[];for(let rr=0;rr<tr.length;rr++){let nr=tr.charCodeAt(rr);if(nr<=127)er.push(nr);else if(nr<=2047)er.push(192|nr>>6,128|nr&63);else if((nr&64512)===55296)if(!(rr<tr.length-1&&(tr.charCodeAt(rr+1)&64512)===56320))er.push(239,191,189);else{const sr=nr,ar=tr.charCodeAt(++rr);nr=65536|(sr&1023)<<10|ar&1023,er.push(240|nr>>18,128|nr>>12&63,128|nr>>6&63,128|nr&63)}else(nr&64512)===56320?er.push(239,191,189):er.push(224|nr>>12,128|nr>>6&63,128|nr&63)}return new Uint8Array(er)}function percentEncodedBytes_(tr){let er;try{er=decodeURIComponent(tr)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(er)}function base64Bytes_(tr,er){switch(tr){case StringFormat.BASE64:{const ir=er.indexOf("-")!==-1,sr=er.indexOf("_")!==-1;if(ir||sr)throw invalidFormat(tr,"Invalid character '"+(ir?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const ir=er.indexOf("+")!==-1,sr=er.indexOf("/")!==-1;if(ir||sr)throw invalidFormat(tr,"Invalid character '"+(ir?"+":"/")+"' found: is it base64 encoded?");er=er.replace(/-/g,"+").replace(/_/g,"/");break}}let rr;try{rr=decodeBase64(er)}catch(ir){throw ir.message.includes("polyfill")?ir:invalidFormat(tr,"Invalid character found")}const nr=new Uint8Array(rr.length);for(let ir=0;ir<rr.length;ir++)nr[ir]=rr.charCodeAt(ir);return nr}class DataURLParts{constructor(er){this.base64=!1,this.contentType=null;const rr=er.match(/^data:([^,]+)?,/);if(rr===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const nr=rr[1]||null;nr!=null&&(this.base64=endsWith(nr,";base64"),this.contentType=this.base64?nr.substring(0,nr.length-7):nr),this.rest=er.substring(er.indexOf(",")+1)}}function dataURLBytes_(tr){const er=new DataURLParts(tr);return er.base64?base64Bytes_(StringFormat.BASE64,er.rest):percentEncodedBytes_(er.rest)}function dataURLContentType_(tr){return new DataURLParts(tr).contentType}function endsWith(tr,er){return tr.length>=er.length?tr.substring(tr.length-er.length)===er:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(er,rr){let nr=0,ir="";isNativeBlob(er)?(this.data_=er,nr=er.size,ir=er.type):er instanceof ArrayBuffer?(rr?this.data_=new Uint8Array(er):(this.data_=new Uint8Array(er.byteLength),this.data_.set(new Uint8Array(er))),nr=this.data_.length):er instanceof Uint8Array&&(rr?this.data_=er:(this.data_=new Uint8Array(er.length),this.data_.set(er)),nr=er.length),this.size_=nr,this.type_=ir}size(){return this.size_}type(){return this.type_}slice(er,rr){if(isNativeBlob(this.data_)){const nr=this.data_,ir=sliceBlob(nr,er,rr);return ir===null?null:new FbsBlob(ir)}else{const nr=new Uint8Array(this.data_.buffer,er,rr-er);return new FbsBlob(nr,!0)}}static getBlob(...er){if(isNativeBlobDefined()){const rr=er.map(nr=>nr instanceof FbsBlob?nr.data_:nr);return new FbsBlob(getBlob$1.apply(null,rr))}else{const rr=er.map(ar=>isString$2(ar)?dataFromString(StringFormat.RAW,ar).data:ar.data_);let nr=0;rr.forEach(ar=>{nr+=ar.byteLength});const ir=new Uint8Array(nr);let sr=0;return rr.forEach(ar=>{for(let cr=0;cr<ar.length;cr++)ir[sr++]=ar[cr]}),new FbsBlob(ir,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(tr){let er;try{er=JSON.parse(tr)}catch{return null}return isNonArrayObject(er)?er:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(tr){if(tr.length===0)return null;const er=tr.lastIndexOf("/");return er===-1?"":tr.slice(0,er)}function child(tr,er){const rr=er.split("/").filter(nr=>nr.length>0).join("/");return tr.length===0?rr:tr+"/"+rr}function lastComponent(tr){const er=tr.lastIndexOf("/",tr.length-2);return er===-1?tr:tr.slice(er+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(tr,er){return er}class Mapping{constructor(er,rr,nr,ir){this.server=er,this.local=rr||er,this.writable=!!nr,this.xform=ir||noXform_}}let mappings_=null;function xformPath(tr){return!isString$2(tr)||tr.length<2?tr:lastComponent(tr)}function getMappings(){if(mappings_)return mappings_;const tr=[];tr.push(new Mapping("bucket")),tr.push(new Mapping("generation")),tr.push(new Mapping("metageneration")),tr.push(new Mapping("name","fullPath",!0));function er(sr,ar){return xformPath(ar)}const rr=new Mapping("name");rr.xform=er,tr.push(rr);function nr(sr,ar){return ar!==void 0?Number(ar):ar}const ir=new Mapping("size");return ir.xform=nr,tr.push(ir),tr.push(new Mapping("timeCreated")),tr.push(new Mapping("updated")),tr.push(new Mapping("md5Hash",null,!0)),tr.push(new Mapping("cacheControl",null,!0)),tr.push(new Mapping("contentDisposition",null,!0)),tr.push(new Mapping("contentEncoding",null,!0)),tr.push(new Mapping("contentLanguage",null,!0)),tr.push(new Mapping("contentType",null,!0)),tr.push(new Mapping("metadata","customMetadata",!0)),mappings_=tr,mappings_}function addRef(tr,er){function rr(){const nr=tr.bucket,ir=tr.fullPath,sr=new Location(nr,ir);return er._makeStorageReference(sr)}Object.defineProperty(tr,"ref",{get:rr})}function fromResource(tr,er,rr){const nr={};nr.type="file";const ir=rr.length;for(let sr=0;sr<ir;sr++){const ar=rr[sr];nr[ar.local]=ar.xform(nr,er[ar.server])}return addRef(nr,tr),nr}function fromResourceString(tr,er,rr){const nr=jsonObjectOrNull(er);return nr===null?null:fromResource(tr,nr,rr)}function downloadUrlFromResourceString(tr,er,rr,nr){const ir=jsonObjectOrNull(er);if(ir===null||!isString$2(ir.downloadTokens))return null;const sr=ir.downloadTokens;if(sr.length===0)return null;const ar=encodeURIComponent;return sr.split(",").map(or=>{const ur=tr.bucket,hr=tr.fullPath,dr="/b/"+ar(ur)+"/o/"+ar(hr),fr=makeUrl(dr,rr,nr),gr=makeQueryString({alt:"media",token:or});return fr+gr})[0]}function toResourceString(tr,er){const rr={},nr=er.length;for(let ir=0;ir<nr;ir++){const sr=er[ir];sr.writable&&(rr[sr.server]=tr[sr.local])}return JSON.stringify(rr)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PREFIXES_KEY="prefixes",ITEMS_KEY="items";function fromBackendResponse(tr,er,rr){const nr={prefixes:[],items:[],nextPageToken:rr.nextPageToken};if(rr[PREFIXES_KEY])for(const ir of rr[PREFIXES_KEY]){const sr=ir.replace(/\/$/,""),ar=tr._makeStorageReference(new Location(er,sr));nr.prefixes.push(ar)}if(rr[ITEMS_KEY])for(const ir of rr[ITEMS_KEY]){const sr=tr._makeStorageReference(new Location(er,ir.name));nr.items.push(sr)}return nr}function fromResponseString(tr,er,rr){const nr=jsonObjectOrNull(rr);return nr===null?null:fromBackendResponse(tr,er,nr)}class RequestInfo{constructor(er,rr,nr,ir){this.url=er,this.method=rr,this.handler=nr,this.timeout=ir,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(tr){if(!tr)throw unknown()}function metadataHandler(tr,er){function rr(nr,ir){const sr=fromResourceString(tr,ir,er);return handlerCheck(sr!==null),sr}return rr}function listHandler(tr,er){function rr(nr,ir){const sr=fromResponseString(tr,er,ir);return handlerCheck(sr!==null),sr}return rr}function downloadUrlHandler(tr,er){function rr(nr,ir){const sr=fromResourceString(tr,ir,er);return handlerCheck(sr!==null),downloadUrlFromResourceString(sr,ir,tr.host,tr._protocol)}return rr}function sharedErrorHandler(tr){function er(rr,nr){let ir;return rr.getStatus()===401?rr.getErrorText().includes("Firebase App Check token is invalid")?ir=unauthorizedApp():ir=unauthenticated():rr.getStatus()===402?ir=quotaExceeded(tr.bucket):rr.getStatus()===403?ir=unauthorized(tr.path):ir=nr,ir.status=rr.getStatus(),ir.serverResponse=nr.serverResponse,ir}return er}function objectErrorHandler(tr){const er=sharedErrorHandler(tr);function rr(nr,ir){let sr=er(nr,ir);return nr.getStatus()===404&&(sr=objectNotFound(tr.path)),sr.serverResponse=ir.serverResponse,sr}return rr}function getMetadata$2(tr,er,rr){const nr=er.fullServerUrl(),ir=makeUrl(nr,tr.host,tr._protocol),sr="GET",ar=tr.maxOperationRetryTime,cr=new RequestInfo(ir,sr,metadataHandler(tr,rr),ar);return cr.errorHandler=objectErrorHandler(er),cr}function list$2(tr,er,rr,nr,ir){const sr={};er.isRoot?sr.prefix="":sr.prefix=er.path+"/",rr.length>0&&(sr.delimiter=rr),nr&&(sr.pageToken=nr),ir&&(sr.maxResults=ir);const ar=er.bucketOnlyServerUrl(),cr=makeUrl(ar,tr.host,tr._protocol),lr="GET",or=tr.maxOperationRetryTime,ur=new RequestInfo(cr,lr,listHandler(tr,er.bucket),or);return ur.urlParams=sr,ur.errorHandler=sharedErrorHandler(er),ur}function getDownloadUrl(tr,er,rr){const nr=er.fullServerUrl(),ir=makeUrl(nr,tr.host,tr._protocol),sr="GET",ar=tr.maxOperationRetryTime,cr=new RequestInfo(ir,sr,downloadUrlHandler(tr,rr),ar);return cr.errorHandler=objectErrorHandler(er),cr}function deleteObject$2(tr,er){const rr=er.fullServerUrl(),nr=makeUrl(rr,tr.host,tr._protocol),ir="DELETE",sr=tr.maxOperationRetryTime;function ar(lr,or){}const cr=new RequestInfo(nr,ir,ar,sr);return cr.successCodes=[200,204],cr.errorHandler=objectErrorHandler(er),cr}function determineContentType_(tr,er){return tr&&tr.contentType||er&&er.type()||"application/octet-stream"}function metadataForUpload_(tr,er,rr){const nr=Object.assign({},rr);return nr.fullPath=tr.path,nr.size=er.size(),nr.contentType||(nr.contentType=determineContentType_(null,er)),nr}function multipartUpload(tr,er,rr,nr,ir){const sr=er.bucketOnlyServerUrl(),ar={"X-Goog-Upload-Protocol":"multipart"};function cr(){let xr="";for(let vr=0;vr<2;vr++)xr=xr+Math.random().toString().slice(2);return xr}const lr=cr();ar["Content-Type"]="multipart/related; boundary="+lr;const or=metadataForUpload_(er,nr,ir),ur=toResourceString(or,rr),hr="--"+lr+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+ur+`\r
--`+lr+`\r
Content-Type: `+or.contentType+`\r
\r
`,dr=`\r
--`+lr+"--",fr=FbsBlob.getBlob(hr,nr,dr);if(fr===null)throw cannotSliceBlob();const gr={name:or.fullPath},br=makeUrl(sr,tr.host,tr._protocol),pr="POST",mr=tr.maxUploadRetryTime,yr=new RequestInfo(br,pr,metadataHandler(tr,rr),mr);return yr.urlParams=gr,yr.headers=ar,yr.body=fr.uploadData(),yr.errorHandler=sharedErrorHandler(er),yr}class ResumableUploadStatus{constructor(er,rr,nr,ir){this.current=er,this.total=rr,this.finalized=!!nr,this.metadata=ir||null}}function checkResumeHeader_(tr,er){let rr=null;try{rr=tr.getResponseHeader("X-Goog-Upload-Status")}catch{handlerCheck(!1)}return handlerCheck(!!rr&&(er||["active"]).indexOf(rr)!==-1),rr}function createResumableUpload(tr,er,rr,nr,ir){const sr=er.bucketOnlyServerUrl(),ar=metadataForUpload_(er,nr,ir),cr={name:ar.fullPath},lr=makeUrl(sr,tr.host,tr._protocol),or="POST",ur={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${nr.size()}`,"X-Goog-Upload-Header-Content-Type":ar.contentType,"Content-Type":"application/json; charset=utf-8"},hr=toResourceString(ar,rr),dr=tr.maxUploadRetryTime;function fr(br){checkResumeHeader_(br);let pr;try{pr=br.getResponseHeader("X-Goog-Upload-URL")}catch{handlerCheck(!1)}return handlerCheck(isString$2(pr)),pr}const gr=new RequestInfo(lr,or,fr,dr);return gr.urlParams=cr,gr.headers=ur,gr.body=hr,gr.errorHandler=sharedErrorHandler(er),gr}function getResumableUploadStatus(tr,er,rr,nr){const ir={"X-Goog-Upload-Command":"query"};function sr(or){const ur=checkResumeHeader_(or,["active","final"]);let hr=null;try{hr=or.getResponseHeader("X-Goog-Upload-Size-Received")}catch{handlerCheck(!1)}hr||handlerCheck(!1);const dr=Number(hr);return handlerCheck(!isNaN(dr)),new ResumableUploadStatus(dr,nr.size(),ur==="final")}const ar="POST",cr=tr.maxUploadRetryTime,lr=new RequestInfo(rr,ar,sr,cr);return lr.headers=ir,lr.errorHandler=sharedErrorHandler(er),lr}const RESUMABLE_UPLOAD_CHUNK_SIZE=256*1024;function continueResumableUpload(tr,er,rr,nr,ir,sr,ar,cr){const lr=new ResumableUploadStatus(0,0);if(ar?(lr.current=ar.current,lr.total=ar.total):(lr.current=0,lr.total=nr.size()),nr.size()!==lr.total)throw serverFileWrongSize();const or=lr.total-lr.current;let ur=or;ir>0&&(ur=Math.min(ur,ir));const hr=lr.current,dr=hr+ur;let fr="";ur===0?fr="finalize":or===ur?fr="upload, finalize":fr="upload";const gr={"X-Goog-Upload-Command":fr,"X-Goog-Upload-Offset":`${lr.current}`},br=nr.slice(hr,dr);if(br===null)throw cannotSliceBlob();function pr(vr,_r){const Er=checkResumeHeader_(vr,["active","final"]),Tr=lr.current+ur,Rr=nr.size();let Nr;return Er==="final"?Nr=metadataHandler(er,sr)(vr,_r):Nr=null,new ResumableUploadStatus(Tr,Rr,Er==="final",Nr)}const mr="POST",yr=er.maxUploadRetryTime,xr=new RequestInfo(rr,mr,pr,yr);return xr.headers=gr,xr.body=br.uploadData(),xr.progressCallback=cr||null,xr.errorHandler=sharedErrorHandler(tr),xr}const TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function taskStateFromInternalTaskState(tr){switch(tr){case"running":case"pausing":case"canceling":return TaskState.RUNNING;case"paused":return TaskState.PAUSED;case"success":return TaskState.SUCCESS;case"canceled":return TaskState.CANCELED;case"error":return TaskState.ERROR;default:return TaskState.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Observer{constructor(er,rr,nr){if(isFunction$4(er)||rr!=null||nr!=null)this.next=er,this.error=rr??void 0,this.complete=nr??void 0;else{const sr=er;this.next=sr.next,this.error=sr.error,this.complete=sr.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function async(tr){return(...er)=>{Promise.resolve().then(()=>tr(...er))}}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(er=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,er()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,er()}),this.xhr_.addEventListener("load",()=>{er()})})}send(er,rr,nr,ir){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(rr,er,!0),ir!==void 0)for(const sr in ir)ir.hasOwnProperty(sr)&&this.xhr_.setRequestHeader(sr,ir[sr].toString());return nr!==void 0?this.xhr_.send(nr):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(er){return this.xhr_.getResponseHeader(er)}addUploadProgressListener(er){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",er)}removeUploadProgressListener(er){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",er)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UploadTask{constructor(er,rr,nr=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=er,this._blob=rr,this._metadata=nr,this._mappings=getMappings(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=ir=>{if(this._request=void 0,this._chunkMultiplier=1,ir._codeEquals(StorageErrorCode.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const sr=this.isExponentialBackoffExpired();if(isRetryStatusCode(ir.status,[]))if(sr)ir=retryLimitExceeded();else{this.sleepTime=Math.max(this.sleepTime*2,DEFAULT_MIN_SLEEP_TIME_MILLIS),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=ir,this._transition("error")}},this._metadataErrorHandler=ir=>{this._request=void 0,ir._codeEquals(StorageErrorCode.CANCELED)?this.completeTransitions_():(this._error=ir,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((ir,sr)=>{this._resolve=ir,this._reject=sr,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const er=this._transferred;return rr=>this._updateProgress(er+rr)}_shouldDoResumable(er){return er.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(er){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([rr,nr])=>{switch(this._state){case"running":er(rr,nr);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((er,rr)=>{const nr=createResumableUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ir=this._ref.storage._makeRequest(nr,newTextConnection,er,rr);this._request=ir,ir.getPromise().then(sr=>{this._request=void 0,this._uploadUrl=sr,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const er=this._uploadUrl;this._resolveToken((rr,nr)=>{const ir=getResumableUploadStatus(this._ref.storage,this._ref._location,er,this._blob),sr=this._ref.storage._makeRequest(ir,newTextConnection,rr,nr);this._request=sr,sr.getPromise().then(ar=>{ar=ar,this._request=void 0,this._updateProgress(ar.current),this._needToFetchStatus=!1,ar.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const er=RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier,rr=new ResumableUploadStatus(this._transferred,this._blob.size()),nr=this._uploadUrl;this._resolveToken((ir,sr)=>{let ar;try{ar=continueResumableUpload(this._ref._location,this._ref.storage,nr,this._blob,er,this._mappings,rr,this._makeProgressCallback())}catch(lr){this._error=lr,this._transition("error");return}const cr=this._ref.storage._makeRequest(ar,newTextConnection,ir,sr,!1);this._request=cr,cr.getPromise().then(lr=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(lr.current),lr.finalized?(this._metadata=lr.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((er,rr)=>{const nr=getMetadata$2(this._ref.storage,this._ref._location,this._mappings),ir=this._ref.storage._makeRequest(nr,newTextConnection,er,rr);this._request=ir,ir.getPromise().then(sr=>{this._request=void 0,this._metadata=sr,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((er,rr)=>{const nr=multipartUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),ir=this._ref.storage._makeRequest(nr,newTextConnection,er,rr);this._request=ir,ir.getPromise().then(sr=>{this._request=void 0,this._metadata=sr,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(er){const rr=this._transferred;this._transferred=er,this._transferred!==rr&&this._notifyObservers()}_transition(er){if(this._state!==er)switch(er){case"canceling":case"pausing":this._state=er,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const rr=this._state==="paused";this._state=er,rr&&(this._notifyObservers(),this._start());break;case"paused":this._state=er,this._notifyObservers();break;case"canceled":this._error=canceled(),this._state=er,this._notifyObservers();break;case"error":this._state=er,this._notifyObservers();break;case"success":this._state=er,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const er=taskStateFromInternalTaskState(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:er,metadata:this._metadata,task:this,ref:this._ref}}on(er,rr,nr,ir){const sr=new Observer(rr||void 0,nr||void 0,ir||void 0);return this._addObserver(sr),()=>{this._removeObserver(sr)}}then(er,rr){return this._promise.then(er,rr)}catch(er){return this.then(null,er)}_addObserver(er){this._observers.push(er),this._notifyObserver(er)}_removeObserver(er){const rr=this._observers.indexOf(er);rr!==-1&&this._observers.splice(rr,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(rr=>{this._notifyObserver(rr)})}_finishPromise(){if(this._resolve!==void 0){let er=!0;switch(taskStateFromInternalTaskState(this._state)){case TaskState.SUCCESS:async(this._resolve.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:const rr=this._reject;async(rr.bind(null,this._error))();break;default:er=!1;break}er&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(er){switch(taskStateFromInternalTaskState(this._state)){case TaskState.RUNNING:case TaskState.PAUSED:er.next&&async(er.next.bind(er,this.snapshot))();break;case TaskState.SUCCESS:er.complete&&async(er.complete.bind(er))();break;case TaskState.CANCELED:case TaskState.ERROR:er.error&&async(er.error.bind(er,this._error))();break;default:er.error&&async(er.error.bind(er,this._error))()}}resume(){const er=this._state==="paused"||this._state==="pausing";return er&&this._transition("running"),er}pause(){const er=this._state==="running";return er&&this._transition("pausing"),er}cancel(){const er=this._state==="running"||this._state==="pausing";return er&&this._transition("canceling"),er}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(er,rr){this._service=er,rr instanceof Location?this._location=rr:this._location=Location.makeFromUrl(rr,er.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(er,rr){return new Reference(er,rr)}get root(){const er=new Location(this._location.bucket,"");return this._newRef(this._service,er)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const er=parent(this._location.path);if(er===null)return null;const rr=new Location(this._location.bucket,er);return new Reference(this._service,rr)}_throwIfRoot(er){if(this._location.path==="")throw invalidRootOperation(er)}}function uploadBytes$1(tr,er,rr){tr._throwIfRoot("uploadBytes");const nr=multipartUpload(tr.storage,tr._location,getMappings(),new FbsBlob(er,!0),rr);return tr.storage.makeRequestWithTokens(nr,newTextConnection).then(ir=>({metadata:ir,ref:tr}))}function uploadBytesResumable$1(tr,er,rr){return tr._throwIfRoot("uploadBytesResumable"),new UploadTask(tr,new FbsBlob(er),rr)}function listAll$1(tr){const er={prefixes:[],items:[]};return listAllHelper(tr,er).then(()=>er)}async function listAllHelper(tr,er,rr){const ir=await list$1(tr,{pageToken:rr});er.prefixes.push(...ir.prefixes),er.items.push(...ir.items),ir.nextPageToken!=null&&await listAllHelper(tr,er,ir.nextPageToken)}function list$1(tr,er){er!=null&&typeof er.maxResults=="number"&&validateNumber("options.maxResults",1,1e3,er.maxResults);const rr=er||{},nr=list$2(tr.storage,tr._location,"/",rr.pageToken,rr.maxResults);return tr.storage.makeRequestWithTokens(nr,newTextConnection)}function getDownloadURL$1(tr){tr._throwIfRoot("getDownloadURL");const er=getDownloadUrl(tr.storage,tr._location,getMappings());return tr.storage.makeRequestWithTokens(er,newTextConnection).then(rr=>{if(rr===null)throw noDownloadURL();return rr})}function deleteObject$1(tr){tr._throwIfRoot("deleteObject");const er=deleteObject$2(tr.storage,tr._location);return tr.storage.makeRequestWithTokens(er,newTextConnection)}function _getChild$1(tr,er){const rr=child(tr._location.path,er),nr=new Location(tr._location.bucket,rr);return new Reference(tr.storage,nr)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(tr){return/^[A-Za-z]+:\/\//.test(tr)}function refFromURL(tr,er){return new Reference(tr,er)}function refFromPath(tr,er){if(tr instanceof FirebaseStorageImpl){const rr=tr;if(rr._bucket==null)throw noDefaultBucket();const nr=new Reference(rr,rr._bucket);return er!=null?refFromPath(nr,er):nr}else return er!==void 0?_getChild$1(tr,er):tr}function ref$1(tr,er){if(er&&isUrl(er)){if(tr instanceof FirebaseStorageImpl)return refFromURL(tr,er);throw invalidArgument$1("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(tr,er)}function extractBucket(tr,er){const rr=er==null?void 0:er[CONFIG_STORAGE_BUCKET_KEY];return rr==null?null:Location.makeFromBucketSpec(rr,tr)}function connectStorageEmulator$1(tr,er,rr,nr={}){tr.host=`${er}:${rr}`,tr._protocol="http";const{mockUserToken:ir}=nr;ir&&(tr._overrideAuthToken=typeof ir=="string"?ir:createMockUserToken(ir,tr.app.options.projectId))}class FirebaseStorageImpl{constructor(er,rr,nr,ir,sr){this.app=er,this._authProvider=rr,this._appCheckProvider=nr,this._url=ir,this._firebaseVersion=sr,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,ir!=null?this._bucket=Location.makeFromBucketSpec(ir,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(er){this._host=er,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,er):this._bucket=extractBucket(er,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(er){validateNumber("time",0,Number.POSITIVE_INFINITY,er),this._maxUploadRetryTime=er}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(er){validateNumber("time",0,Number.POSITIVE_INFINITY,er),this._maxOperationRetryTime=er}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const er=this._authProvider.getImmediate({optional:!0});if(er){const rr=await er.getToken();if(rr!==null)return rr.accessToken}return null}async _getAppCheckToken(){const er=this._appCheckProvider.getImmediate({optional:!0});return er?(await er.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(er=>er.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(er){return new Reference(this,er)}_makeRequest(er,rr,nr,ir,sr=!0){if(this._deleted)return new FailRequest(appDeleted());{const ar=makeRequest(er,this._appId,nr,ir,rr,this._firebaseVersion,sr);return this._requests.add(ar),ar.getPromise().then(()=>this._requests.delete(ar),()=>this._requests.delete(ar)),ar}}async makeRequestWithTokens(er,rr){const[nr,ir]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(er,rr,nr,ir).getPromise()}}const name="@firebase/storage",version="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytes(tr,er,rr){return tr=getModularInstance(tr),uploadBytes$1(tr,er,rr)}function uploadBytesResumable(tr,er,rr){return tr=getModularInstance(tr),uploadBytesResumable$1(tr,er,rr)}function listAll(tr){return tr=getModularInstance(tr),listAll$1(tr)}function getDownloadURL(tr){return tr=getModularInstance(tr),getDownloadURL$1(tr)}function deleteObject(tr){return tr=getModularInstance(tr),deleteObject$1(tr)}function ref(tr,er){return tr=getModularInstance(tr),ref$1(tr,er)}function getStorage(tr=getApp(),er){tr=getModularInstance(tr);const nr=_getProvider(tr,STORAGE_TYPE).getImmediate({identifier:er}),ir=getDefaultEmulatorHostnameAndPort("storage");return ir&&connectStorageEmulator(nr,...ir),nr}function connectStorageEmulator(tr,er,rr,nr={}){connectStorageEmulator$1(tr,er,rr,nr)}function factory(tr,{instanceIdentifier:er}){const rr=tr.getProvider("app").getImmediate(),nr=tr.getProvider("auth-internal"),ir=tr.getProvider("app-check-internal");return new FirebaseStorageImpl(rr,nr,ir,er,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,""),registerVersion(name,version,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyAtzlnBQBc9sPc_gFSJp7fW3mRyA-example",authDomain:"baader-repuestos.firebaseapp.com",projectId:"baader-repuestos",storageBucket:"baader-repuestos.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890"},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app),storage=getStorage(app),AuthContext=reactExports.createContext(null);function AuthProvider({children:tr}){const[er,rr]=reactExports.useState(null),[nr,ir]=reactExports.useState(!0);reactExports.useEffect(()=>{const cr=onAuthStateChanged(auth,lr=>{rr(lr),ir(!1)});return()=>cr()},[]);const sr=async(cr,lr)=>{try{await signInWithEmailAndPassword(auth,cr,lr)}catch(or){throw console.error("Error al iniciar sesin:",or),or}},ar=async()=>{try{await signOut(auth)}catch(cr){throw console.error("Error al cerrar sesin:",cr),cr}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:er,loading:nr,signIn:sr,signOut:ar},children:tr})}function useAuth(){const tr=reactExports.useContext(AuthContext);if(!tr)throw new Error("useAuth debe usarse dentro de AuthProvider");return tr}const COLLECTION_NAME$4="machines";function useMachines(){const[tr,er]=reactExports.useState([]),[rr,nr]=reactExports.useState(!0),[ir,sr]=reactExports.useState(null),ar=async()=>{try{nr(!0),sr(null);const pr=query(collection(db,COLLECTION_NAME$4),orderBy("orden","asc")),yr=(await getDocs(pr)).docs.map(xr=>{var _r,Er;const vr=xr.data();return{id:xr.id,nombre:vr.nombre,marca:vr.marca,modelo:vr.modelo,descripcion:vr.descripcion||"",activa:vr.activa!==!1,color:vr.color||"#3b82f6",orden:vr.orden||0,manuals:vr.manuals||[],createdAt:((_r=vr.createdAt)==null?void 0:_r.toDate())||new Date,updatedAt:(Er=vr.updatedAt)==null?void 0:Er.toDate()}});if(yr.length===0){console.log(" No hay mquinas, creando Baader 200 por defecto...");const xr={nombre:"Baader 200",marca:"Baader",modelo:"200",descripcion:"Mquina principal - Datos de repuestosBaader200",activa:!0,color:"#3b82f6",orden:0,createdAt:Timestamp.now(),updatedAt:Timestamp.now()},vr=doc(db,COLLECTION_NAME$4,"baader-200");await setDoc(vr,xr),console.log(" Mquina Baader 200 creada con ID: baader-200");const Er=(await getDocs(pr)).docs.map(Tr=>{var Nr,Dr;const Rr=Tr.data();return{id:Tr.id,nombre:Rr.nombre,marca:Rr.marca,modelo:Rr.modelo,descripcion:Rr.descripcion||"",activa:Rr.activa!==!1,color:Rr.color||"#3b82f6",orden:Rr.orden||0,manuals:Rr.manuals||[],createdAt:((Nr=Rr.createdAt)==null?void 0:Nr.toDate())||new Date,updatedAt:(Dr=Rr.updatedAt)==null?void 0:Dr.toDate()}});er(Er)}else er(yr)}catch(pr){console.error("Error fetching machines:",pr),sr("Error al cargar las mquinas")}finally{nr(!1)}},cr=async pr=>{var mr,yr;try{const xr=doc(db,COLLECTION_NAME$4,pr),vr=await getDoc(xr);if(!vr.exists())return null;const _r=vr.data();return{id:vr.id,nombre:_r.nombre,marca:_r.marca,modelo:_r.modelo,descripcion:_r.descripcion||"",activa:_r.activa!==!1,color:_r.color||"#3b82f6",orden:_r.orden||0,manuals:_r.manuals||[],createdAt:((mr=_r.createdAt)==null?void 0:mr.toDate())||new Date,updatedAt:(yr=_r.updatedAt)==null?void 0:yr.toDate()}}catch(xr){return console.error("Error getting machine:",xr),null}},lr=async pr=>{try{const mr=`${pr.marca}-${pr.modelo}`.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9-]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),yr=tr.length>0?Math.max(...tr.map(Er=>Er.orden)):-1,xr={...pr,activa:pr.activa??!0,orden:yr+1,createdAt:Timestamp.now(),updatedAt:Timestamp.now()},vr=doc(db,COLLECTION_NAME$4,mr);let _r;try{_r=await getDocFromServer(vr)}catch{_r=await getDoc(vr)}if(_r.exists())throw new Error(`Ya existe una mquina con el ID "${mr}". Usa una marca/modelo diferente.`);return await setDoc(vr,xr),mr}catch(mr){throw console.error("Error creating machine:",mr),mr instanceof Error?mr:new Error("Error al crear la mquina")}},or=async(pr,mr)=>{try{const yr=doc(db,COLLECTION_NAME$4,pr);await updateDoc(yr,{...mr,updatedAt:Timestamp.now()}),await ar()}catch(yr){throw console.error("Error updating machine:",yr),new Error("Error al actualizar la mquina")}},ur=async pr=>{try{const mr=doc(db,COLLECTION_NAME$4,pr);await deleteDoc(mr),await ar()}catch(mr){throw console.error("Error deleting machine:",mr),new Error("Error al eliminar la mquina")}},hr=async pr=>{await or(pr,{activa:!1})},dr=async pr=>{await or(pr,{activa:!0})},fr=async pr=>{try{const mr=writeBatch(db);pr.forEach((yr,xr)=>{const vr=doc(db,COLLECTION_NAME$4,yr);mr.update(vr,{orden:xr,updatedAt:Timestamp.now()})}),await mr.commit(),await ar()}catch(mr){throw console.error("Error reordering machines:",mr),new Error("Error al reordenar las mquinas")}},gr=()=>tr.filter(pr=>pr.activa),br=async pr=>await cr(pr)!==null;return reactExports.useEffect(()=>{nr(!0);const pr=query(collection(db,COLLECTION_NAME$4),orderBy("orden","asc")),mr=onSnapshot(pr,yr=>{const xr=yr.docs.map(vr=>{var Tr,Rr;const _r=vr.data();return{id:vr.id,nombre:_r.nombre,marca:_r.marca,modelo:_r.modelo,descripcion:_r.descripcion||"",activa:_r.activa!==!1,color:_r.color||"#3b82f6",orden:_r.orden||0,manuals:_r.manuals||[],createdAt:((Tr=_r.createdAt)==null?void 0:Tr.toDate())||new Date,updatedAt:(Rr=_r.updatedAt)==null?void 0:Rr.toDate()}});if(er(xr),nr(!1),xr.length===0){const vr={nombre:"Baader 200",marca:"Baader",modelo:"200",descripcion:"Mquina principal",activa:!0,color:"#3b82f6",orden:0,createdAt:Timestamp.now(),updatedAt:Timestamp.now()},_r=doc(db,COLLECTION_NAME$4,"baader-200");setDoc(_r,vr)}},yr=>{console.error("Error en listener de mquinas:",yr),sr("Error al cargar las mquinas"),nr(!1)});return()=>mr()},[]),{machines:tr,loading:rr,error:ir,fetchMachines:ar,getMachine:cr,createMachine:lr,updateMachine:or,deleteMachine:ur,archiveMachine:hr,reactivateMachine:dr,reorderMachines:fr,getActiveMachines:gr,machineExists:br}}const MachineContext=reactExports.createContext(null),STORAGE_KEY$2="repuestos_current_machine_id";function MachineProvider({children:tr}){const{machines:er,loading:rr,getMachine:nr}=useMachines(),[ir,sr]=reactExports.useState(null),[ar,cr]=reactExports.useState(!0),lr=reactExports.useRef(null);reactExports.useEffect(()=>{if(rr||er.length===0||lr.current)return;(async()=>{try{const dr=localStorage.getItem(STORAGE_KEY$2),fr=er.filter(br=>br.activa);let gr=null;if(dr&&fr.some(pr=>pr.id===dr)&&(gr=dr),!gr&&fr.length>0&&(gr=fr[0].id),gr){const br=await nr(gr);br&&(lr.current=gr,sr(br),localStorage.setItem(STORAGE_KEY$2,gr))}}catch(dr){console.error("Error initializing machine:",dr)}finally{cr(!1)}})()},[er,rr,nr]),reactExports.useEffect(()=>{var dr,fr;if(!lr.current||er.length===0)return;const hr=er.find(gr=>gr.id===lr.current);if(hr){const gr=((dr=ir==null?void 0:ir.manuals)==null?void 0:dr.length)||0,br=((fr=hr.manuals)==null?void 0:fr.length)||0;gr!==br&&(console.log(" [MachineContext] Manuals actualizados:",gr,"",br),sr(hr))}},[er]);const or=reactExports.useCallback(async hr=>{var dr;console.log(`
 [MachineContext] setCurrentMachine llamado`),console.log("   machineId solicitado:",hr),console.log("   currentMachine actual:",ir==null?void 0:ir.id,ir==null?void 0:ir.nombre);try{const fr=await nr(hr);if(!fr){console.error(`    Machine ${hr} not found`);return}console.log("    Machine encontrada:",fr.nombre),console.log("    Manuals de la mquina:",((dr=fr.manuals)==null?void 0:dr.length)||0),lr.current=hr,sr(fr),localStorage.setItem(STORAGE_KEY$2,hr),console.log("    Guardado en localStorage")}catch(fr){console.error("Error setting current machine:",fr)}},[nr]),ur={currentMachine:ir,machines:er,loading:ar||rr,setCurrentMachine:or};return jsxRuntimeExports.jsx(MachineContext.Provider,{value:ur,children:tr})}function useMachineContext(){const tr=reactExports.useContext(MachineContext);if(!tr)throw new Error("useMachineContext must be used within MachineProvider");return tr}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=tr=>tr.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...tr)=>tr.filter((er,rr,nr)=>!!er&&er.trim()!==""&&nr.indexOf(er)===rr).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:tr="currentColor",size:er=24,strokeWidth:rr=2,absoluteStrokeWidth:nr,className:ir="",children:sr,iconNode:ar,...cr},lr)=>reactExports.createElement("svg",{ref:lr,...defaultAttributes,width:er,height:er,stroke:tr,strokeWidth:nr?Number(rr)*24/Number(er):rr,className:mergeClasses("lucide",ir),...cr},[...ar.map(([or,ur])=>reactExports.createElement(or,ur)),...Array.isArray(sr)?sr:[sr]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(tr,er)=>{const rr=reactExports.forwardRef(({className:nr,...ir},sr)=>reactExports.createElement(Icon,{ref:sr,iconNode:er,className:mergeClasses(`lucide-${toKebabCase(tr)}`,nr),...ir}));return rr.displayName=`${tr}`,rr};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Archive=createLucideIcon("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowDown=createLucideIcon("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUpDown=createLucideIcon("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUp=createLucideIcon("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookMarked=createLucideIcon("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BookOpen=createLucideIcon("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartColumn=createLucideIcon("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChartPie=createLucideIcon("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleAlert=createLucideIcon("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheckBig=createLucideIcon("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleCheck=createLucideIcon("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CirclePlus=createLucideIcon("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CircleX=createLucideIcon("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Columns2=createLucideIcon("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DollarSign=createLucideIcon("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EyeOff=createLucideIcon("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=createLucideIcon("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileJson=createLucideIcon("FileJson",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileSpreadsheet=createLucideIcon("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FileText=createLucideIcon("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GitCompare=createLucideIcon("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HardDriveDownload=createLucideIcon("HardDriveDownload",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HardDriveUpload=createLucideIcon("HardDriveUpload",[["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M12 2v8",key:"1q4o3n"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HardDrive=createLucideIcon("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hash$2=createLucideIcon("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const History=createLucideIcon("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const House=createLucideIcon("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Image$1=createLucideIcon("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ListPlus=createLucideIcon("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LoaderCircle=createLucideIcon("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogIn=createLucideIcon("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MapPin=createLucideIcon("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Menu=createLucideIcon("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minimize2=createLucideIcon("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minus=createLucideIcon("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Moon=createLucideIcon("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Package=createLucideIcon("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelLeftClose=createLucideIcon("PanelLeftClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelLeftOpen=createLucideIcon("PanelLeftOpen",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PanelRightClose=createLucideIcon("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PenLine=createLucideIcon("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pen=createLucideIcon("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pencil=createLucideIcon("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Percent=createLucideIcon("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Redo2=createLucideIcon("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Save=createLucideIcon("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SlidersHorizontal=createLucideIcon("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const StarOff=createLucideIcon("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Star=createLucideIcon("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sun=createLucideIcon("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tag=createLucideIcon("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingDown=createLucideIcon("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TriangleAlert=createLucideIcon("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Undo2=createLucideIcon("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wrench=createLucideIcon("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$1=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zap=createLucideIcon("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomIn=createLucideIcon("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZoomOut=createLucideIcon("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function LoginForm(){const{signIn:tr}=useAuth(),[er,rr]=reactExports.useState(""),[nr,ir]=reactExports.useState(""),[sr,ar]=reactExports.useState(""),[cr,lr]=reactExports.useState(!1),or=async ur=>{ur.preventDefault(),ar(""),lr(!0);try{await tr(er,nr)}catch(hr){ar("Credenciales invlidas. Verifica tu email y contrasea."),console.error(hr)}finally{lr(!1)}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 p-4",children:jsxRuntimeExports.jsxs("div",{className:"w-full max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-600 rounded-xl mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-white",children:"R"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Repuestos"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mt-1",children:"Gestin Multi-Mquina"})]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:jsxRuntimeExports.jsxs("form",{onSubmit:or,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo electrnico"}),jsxRuntimeExports.jsx("input",{type:"email",value:er,onChange:ur=>rr(ur.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@ejemplo.com",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrasea"}),jsxRuntimeExports.jsx("input",{type:"password",value:nr,onChange:ur=>ir(ur.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"",required:!0})]}),sr&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-600 text-sm",children:sr}),jsxRuntimeExports.jsxs("button",{type:"submit",disabled:cr,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-primary-600 text-white rounded-lg font-medium hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[cr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-5 h-5 animate-spin"}):jsxRuntimeExports.jsx(LogIn,{className:"w-5 h-5"}),cr?"Ingresando...":"Ingresar"]})]})}),jsxRuntimeExports.jsx("p",{className:"text-center text-sm text-gray-500 mt-6",children:"Acceso exclusivo para administradores"})]})})}const scriptRel="modulepreload",assetsURL=function(tr){return"/Repuestos-App/"+tr},seen={},__vitePreload=function(er,rr,nr){let ir=Promise.resolve();if(rr&&rr.length>0){document.getElementsByTagName("link");const ar=document.querySelector("meta[property=csp-nonce]"),cr=(ar==null?void 0:ar.nonce)||(ar==null?void 0:ar.getAttribute("nonce"));ir=Promise.allSettled(rr.map(lr=>{if(lr=assetsURL(lr),lr in seen)return;seen[lr]=!0;const or=lr.endsWith(".css"),ur=or?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${lr}"]${ur}`))return;const hr=document.createElement("link");if(hr.rel=or?"stylesheet":scriptRel,or||(hr.as="script"),hr.crossOrigin="",hr.href=lr,cr&&hr.setAttribute("nonce",cr),document.head.appendChild(hr),or)return new Promise((dr,fr)=>{hr.addEventListener("load",dr),hr.addEventListener("error",()=>fr(new Error(`Unable to preload CSS for ${lr}`)))})}))}function sr(ar){const cr=new Event("vite:preloadError",{cancelable:!0});if(cr.payload=ar,window.dispatchEvent(cr),!cr.defaultPrevented)throw ar}return ir.then(ar=>{for(const cr of ar||[])cr.status==="rejected"&&sr(cr.reason);return er().catch(sr)})};function isTagAsignado(tr){return typeof tr=="object"&&"nombre"in tr&&"tipo"in tr}function getTagNombre(tr){return isTagAsignado(tr)?tr.nombre:tr}const TAGS_PREDEFINIDOS=["Overhaul temporada baja","Urgentes este mes","Crticos","En espera proveedor","Pedido realizado","Stock mnimo","Repuestos varios","Preventivo mensual"],computeTotalFromTags=(tr,er)=>!Array.isArray(tr)||!Number.isFinite(er)?0:tr.reduce((rr,nr)=>isTagAsignado(nr)?rr+(nr.cantidad||0)*er:rr,0),hasAnyStockFromTags=tr=>Array.isArray(tr)?tr.some(er=>isTagAsignado(er)&&er.tipo==="stock"&&(er.cantidad||0)>0):!1,normalizeKey$1=tr=>tr.trim().toUpperCase(),upsertTagAsignado=(tr,er,rr,nr)=>{const ir=Array.isArray(tr)?tr:[];return ir.some(ar=>isTagAsignado(ar)&&ar.nombre===er&&ar.tipo===rr)?ir.map(ar=>isTagAsignado(ar)&&ar.nombre===er&&ar.tipo===rr?{...ar,cantidad:nr}:ar):[...ir,{nombre:er,tipo:rr,cantidad:nr,fecha:new Date}]},toFiniteNumber=(tr,er=0)=>{const rr=typeof tr=="number"?tr:typeof tr=="string"?Number(tr):NaN;return Number.isFinite(rr)?rr:er},chunk=(tr,er)=>{const rr=[];for(let nr=0;nr<tr.length;nr+=er)rr.push(tr.slice(nr,nr+er));return rr},getCollectionPath=tr=>tr==="baader-200"?(console.log("    [getCollectionPath] Usando coleccin legacy para baader-200"),"repuestosBaader200"):(console.log(`    [getCollectionPath] Usando subcoleccin para ${tr}`),`machines/${tr}/repuestos`);function useRepuestos(tr){const[er,rr]=reactExports.useState([]),[nr,ir]=reactExports.useState(!0),[sr,ar]=reactExports.useState(null);reactExports.useEffect(()=>{if(console.log(`
 [useRepuestos] useEffect triggered`),console.log("   machineId:",tr),!tr){console.log("    No machineId, limpiando repuestos"),rr([]),ir(!1);return}const vr=getCollectionPath(tr);console.log(`    Collection path: ${vr}`);const _r=query(collection(db,vr),orderBy("codigoSAP")),Er=onSnapshot(_r,Tr=>{console.log(`    Snapshot recibido: ${Tr.docs.length} repuestos`),console.log("    IDs de repuestos:",Tr.docs.map(Nr=>Nr.id));const Rr=Tr.docs.map(Nr=>{var Dr,Ir,Or;return{id:Nr.id,...Nr.data(),createdAt:((Dr=Nr.data().createdAt)==null?void 0:Dr.toDate())||new Date,updatedAt:((Ir=Nr.data().updatedAt)==null?void 0:Ir.toDate())||new Date,fechaUltimaActualizacionInventario:((Or=Nr.data().fechaUltimaActualizacionInventario)==null?void 0:Or.toDate())||null}});console.log("    Actualizando estado de repuestos"),rr(Rr),ir(!1)},Tr=>{console.error("Error al obtener repuestos:",Tr),ar(Tr.message),ir(!1)});return()=>Er()},[tr]);const cr=async(vr,_r,Er,Tr)=>{if(tr)try{const Rr=getCollectionPath(tr),Nr=Er===void 0?null:Er,Dr=Tr===void 0?null:Tr;await addDoc(collection(db,`${Rr}/${vr}/historial`),{campo:_r,valorAnterior:Nr,valorNuevo:Dr,fecha:Timestamp.now()})}catch(Rr){console.error("Error al agregar historial:",Rr)}},lr=reactExports.useCallback(async vr=>{if(!tr)throw new Error("Machine ID is required");console.log(`
 [useRepuestos] createRepuesto llamado`),console.log("   machineId:",tr);try{const _r=getCollectionPath(tr);console.log("    Guardando en collection:",_r),console.log("    Datos del repuesto:",{codigoSAP:vr.codigoSAP,textoBreve:vr.textoBreve});const Er=computeTotalFromTags(vr.tags,vr.valorUnitario),Tr=vr.cantidadSolicitada*vr.valorUnitario+vr.cantidadStockBodega*vr.valorUnitario,Rr=Er>0?Er:Tr,Nr=hasAnyStockFromTags(vr.tags)||vr.cantidadStockBodega>0,Dr={...vr,total:Rr,fechaUltimaActualizacionInventario:Nr?Timestamp.now():null,vinculosManual:[],imagenesManual:[],fotosReales:[],createdAt:Timestamp.now(),updatedAt:Timestamp.now()},Ir=await addDoc(collection(db,_r),Dr);return console.log("    Repuesto creado con ID:",Ir.id),await cr(Ir.id,"creacion",null,JSON.stringify(vr)),Ir.id}catch(_r){throw console.error("Error al crear repuesto:",_r),_r}},[tr]),or=reactExports.useCallback(async(vr,_r,Er)=>{if(!tr)throw new Error("Machine ID is required");try{const Tr=getCollectionPath(tr),Rr={..._r,updatedAt:Timestamp.now()};if(_r.tags!==void 0||_r.cantidadSolicitada!==void 0||_r.cantidadStockBodega!==void 0||_r.valorUnitario!==void 0){const Nr=_r.valorUnitario??(Er==null?void 0:Er.valorUnitario)??0,Dr=_r.tags??(Er==null?void 0:Er.tags),Ir=computeTotalFromTags(Dr,Nr),Or=_r.cantidadSolicitada??(Er==null?void 0:Er.cantidadSolicitada)??0,jr=_r.cantidadStockBodega??(Er==null?void 0:Er.cantidadStockBodega)??0,Lr=Or*Nr+jr*Nr;if(Rr.total=Ir>0?Ir:Lr,_r.tags!==void 0||_r.cantidadStockBodega!==void 0){const Cr=hasAnyStockFromTags(Dr)||jr>0;Rr.fechaUltimaActualizacionInventario=Cr?Timestamp.now():null}}if(await updateDoc(doc(db,Tr,vr),Rr),Er)for(const Nr of Object.keys(_r))_r[Nr]!==Er[Nr]&&await cr(vr,Nr,Er[Nr],_r[Nr])}catch(Tr){throw console.error("Error al actualizar repuesto:",Tr),Tr}},[tr]),ur=reactExports.useCallback(async vr=>{if(!tr)throw new Error("Machine ID is required");try{const _r=getCollectionPath(tr),Er=collection(db,`${_r}/${vr}/historial`),Tr=await getDocs(Er),Rr=writeBatch(db);Tr.docs.forEach(Nr=>{Rr.delete(Nr.ref)}),await Rr.commit(),await deleteDoc(doc(db,_r,vr))}catch(_r){throw console.error("Error al eliminar repuesto:",_r),_r}},[tr]),hr=reactExports.useCallback(async vr=>{if(!tr)return[];try{const _r=getCollectionPath(tr),Er=query(collection(db,`${_r}/${vr}/historial`),orderBy("fecha","desc"));return(await getDocs(Er)).docs.map(Rr=>{var Nr;return{id:Rr.id,repuestoId:vr,...Rr.data(),fecha:((Nr=Rr.data().fecha)==null?void 0:Nr.toDate())||new Date}})}catch(_r){return console.error("Error al obtener historial:",_r),[]}},[tr]),dr=reactExports.useCallback(async vr=>{if(!tr)throw new Error("Machine ID is required");try{const _r=getCollectionPath(tr),Er=writeBatch(db);for(const Tr of vr){const Rr=doc(collection(db,_r));Er.set(Rr,{...Tr,total:Tr.cantidadSolicitada*Tr.valorUnitario,fechaUltimaActualizacionInventario:Tr.cantidadStockBodega>0?Timestamp.now():null,vinculosManual:[],imagenesManual:[],fotosReales:[],createdAt:Timestamp.now(),updatedAt:Timestamp.now()})}await Er.commit()}catch(_r){throw console.error("Error al importar repuestos:",_r),_r}},[tr]),fr=reactExports.useCallback(async vr=>{if(!tr)throw new Error("Machine ID is required");const{rows:_r,tagName:Er,tipo:Tr,placeholder:Rr="pendiente"}=vr;if(!Er)throw new Error("tagName is required");const Nr=getCollectionPath(tr),Dr=wr=>wr.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),Ir=new Map,Or=new Map,jr=new Map;er.forEach(wr=>{wr.codigoSAP&&wr.codigoSAP!==Rr&&Ir.set(normalizeKey$1(wr.codigoSAP),wr),wr.codigoBaader&&wr.codigoBaader!==Rr&&Or.set(normalizeKey$1(wr.codigoBaader),wr);const Pr=Dr(wr.descripcion||wr.textoBreve||"");Pr.length>5&&jr.set(Pr,wr)});const Lr=_r.map(wr=>{const Pr=(wr.codigoSAP||"").trim()||Rr,Ar=(wr.codigoBaader||"").trim()||Rr,Sr=Pr!==Rr?normalizeKey$1(Pr):"",Mr=Ar!==Rr?normalizeKey$1(Ar):"";let qr=Sr&&Ir.get(Sr)||Mr&&Or.get(Mr)||null;const $r=Math.max(0,toFiniteNumber(wr.cantidad,0)),Br=Math.max(0,toFiniteNumber(wr.valorUnitario,0)),zr=(wr.textoBreve||"").trim(),Gr=(wr.descripcion||"").trim(),Vr=wr.forceOverride||{};if(!qr&&Pr===Rr&&Ar===Rr){const Xr=Dr(Gr||zr||"");Xr.length>5&&(qr=jr.get(Xr)||null)}return{existing:qr,codigoSAP:Pr,codigoBaader:Ar,cantidad:$r,valorUnitario:Br,textoBreve:zr,descripcion:Gr,forceOverride:Vr}}),Cr=chunk(Lr,400);for(const wr of Cr){const Pr=writeBatch(db);for(const Ar of wr)if(Ar.existing){const Sr=Ar.existing,Mr=upsertTagAsignado(Sr.tags,Er,Tr,Ar.cantidad),qr=Ar.forceOverride.valorUnitario||Sr.valorUnitario===0&&Ar.valorUnitario>0?Ar.valorUnitario:Sr.valorUnitario,$r=Ar.forceOverride.codigoSAP||Sr.codigoSAP===Rr&&Ar.codigoSAP!==Rr?Ar.codigoSAP:Sr.codigoSAP,Br=Ar.forceOverride.codigoBaader||Sr.codigoBaader===Rr&&Ar.codigoBaader!==Rr?Ar.codigoBaader:Sr.codigoBaader,zr=Ar.forceOverride.textoBreve||(!Sr.textoBreve||Sr.textoBreve.trim().length===0)&&Ar.textoBreve?Ar.textoBreve:Sr.textoBreve,Gr=Ar.forceOverride.descripcion?Ar.descripcion:(!Sr.descripcion||Sr.descripcion.trim().length===0)&&(Ar.descripcion||Ar.textoBreve)||Sr.descripcion,Vr=computeTotalFromTags(Mr,qr),Xr={tags:Mr,valorUnitario:qr,codigoSAP:$r,codigoBaader:Br,textoBreve:zr,descripcion:Gr,total:Vr,updatedAt:Timestamp.now()};Tr==="stock"&&(Xr.fechaUltimaActualizacionInventario=Ar.cantidad>0?Timestamp.now():null),Pr.update(doc(db,Nr,Sr.id),Xr)}else{const Sr=Ar.valorUnitario,Mr=[{nombre:Er,tipo:Tr,cantidad:Ar.cantidad,fecha:new Date}],qr=computeTotalFromTags(Mr,Sr),$r=Tr==="stock"?Ar.cantidad>0:!1,Br=doc(collection(db,Nr));Pr.set(Br,{codigoSAP:Ar.codigoSAP,codigoBaader:Ar.codigoBaader,textoBreve:Ar.textoBreve||"",descripcion:Ar.descripcion||Ar.textoBreve||"",cantidadSolicitada:0,cantidadStockBodega:0,valorUnitario:Sr,total:qr,fechaUltimaActualizacionInventario:$r?Timestamp.now():null,tags:Mr,vinculosManual:[],imagenesManual:[],fotosReales:[],createdAt:Timestamp.now(),updatedAt:Timestamp.now()})}await Pr.commit()}},[tr,er]),gr=reactExports.useCallback(async vr=>{if(!tr)throw new Error("Machine ID is required");const{rows:_r,placeholder:Er="pendiente"}=vr,Tr=getCollectionPath(tr),Rr=Lr=>Lr.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),Nr=new Map,Dr=new Map,Ir=new Map;er.forEach(Lr=>{Lr.codigoSAP&&Lr.codigoSAP!==Er&&Nr.set(normalizeKey$1(Lr.codigoSAP),Lr),Lr.codigoBaader&&Lr.codigoBaader!==Er&&Dr.set(normalizeKey$1(Lr.codigoBaader),Lr);const Cr=Rr(Lr.descripcion||Lr.textoBreve||"");Cr.length>5&&Ir.set(Cr,Lr)});const Or=_r.map(Lr=>{const Cr=(Lr.codigoSAP||"").trim()||Er,wr=(Lr.codigoBaader||"").trim()||Er,Pr=Cr!==Er?normalizeKey$1(Cr):"",Ar=wr!==Er?normalizeKey$1(wr):"";let Sr=Pr&&Nr.get(Pr)||Ar&&Dr.get(Ar)||null;const Mr=Math.max(0,toFiniteNumber(Lr.valorUnitario,0)),qr=(Lr.textoBreve||"").trim(),$r=(Lr.descripcion||"").trim(),Br=Lr.forceOverride||{};if(!Sr&&Cr===Er&&wr===Er){const zr=Rr($r||qr||"");zr.length>5&&(Sr=Ir.get(zr)||null)}return{existing:Sr,codigoSAP:Cr,codigoBaader:wr,valorUnitario:Mr,textoBreve:qr,descripcion:$r,forceOverride:Br}}),jr=chunk(Or,400);for(const Lr of jr){const Cr=writeBatch(db);for(const wr of Lr)if(wr.existing){const Pr=wr.existing,Ar=wr.forceOverride.valorUnitario||Pr.valorUnitario===0&&wr.valorUnitario>0?wr.valorUnitario:Pr.valorUnitario,Sr=wr.forceOverride.codigoSAP||Pr.codigoSAP===Er&&wr.codigoSAP!==Er?wr.codigoSAP:Pr.codigoSAP,Mr=wr.forceOverride.codigoBaader||Pr.codigoBaader===Er&&wr.codigoBaader!==Er?wr.codigoBaader:Pr.codigoBaader,qr=wr.forceOverride.textoBreve||(!Pr.textoBreve||Pr.textoBreve.trim().length===0)&&wr.textoBreve?wr.textoBreve:Pr.textoBreve,$r=wr.forceOverride.descripcion?wr.descripcion:(!Pr.descripcion||Pr.descripcion.trim().length===0)&&(wr.descripcion||wr.textoBreve)||Pr.descripcion,Br=computeTotalFromTags(Pr.tags,Ar);Cr.update(doc(db,Tr,Pr.id),{codigoSAP:Sr,codigoBaader:Mr,textoBreve:qr,descripcion:$r,valorUnitario:Ar,total:Br,updatedAt:Timestamp.now()})}else{const Pr=wr.valorUnitario,Ar=doc(collection(db,Tr));Cr.set(Ar,{codigoSAP:wr.codigoSAP,codigoBaader:wr.codigoBaader,textoBreve:wr.textoBreve||"",descripcion:wr.descripcion||wr.textoBreve||"",cantidadSolicitada:0,cantidadStockBodega:0,valorUnitario:Pr,total:0,fechaUltimaActualizacionInventario:null,tags:[],vinculosManual:[],imagenesManual:[],fotosReales:[],createdAt:Timestamp.now(),updatedAt:Timestamp.now()})}await Cr.commit()}},[tr,er]),br=reactExports.useCallback(async(vr,_r)=>{var Er;if(!tr)throw new Error("Machine ID is required");try{const Tr=getCollectionPath(tr),Rr=writeBatch(db);let Nr=0;for(const Dr of er){if(!((Er=Dr.tags)==null?void 0:Er.some(jr=>getTagNombre(jr)===vr)))continue;const Or=(Dr.tags||[]).map(jr=>isTagAsignado(jr)?jr.nombre===vr?{...jr,nombre:_r}:jr:jr===vr?_r:jr);Rr.update(doc(db,Tr,Dr.id),{tags:Or,updatedAt:Timestamp.now()}),Nr++}return Nr>0&&await Rr.commit(),Nr}catch(Tr){throw console.error("Error al renombrar tag:",Tr),Tr}},[er,tr]),pr=reactExports.useCallback(async vr=>{var _r;if(!tr)throw new Error("Machine ID is required");try{const Er=getCollectionPath(tr),Tr=writeBatch(db);let Rr=0;for(const Nr of er){if(!((_r=Nr.tags)==null?void 0:_r.some(Or=>getTagNombre(Or)===vr)))continue;const Ir=(Nr.tags||[]).filter(Or=>isTagAsignado(Or)?Or.nombre!==vr:Or!==vr);Tr.update(doc(db,Er,Nr.id),{tags:Ir,updatedAt:Timestamp.now()}),Rr++}return Rr>0&&await Tr.commit(),Rr}catch(Er){throw console.error("Error al eliminar tag:",Er),Er}},[er,tr]),mr=reactExports.useCallback(async()=>{if(!tr)throw new Error("Machine ID is required");const vr="Cantidad Solicitada Dic 2025",_r="Stock en bodega Dic 2025";try{const Er=getCollectionPath(tr),Tr=writeBatch(db);let Rr=0,Nr=0,Dr=0;const Ir=[];for(const Or of er){const jr=[];let Lr=!1;const Cr=Or.cantidadSolicitada||0,wr=Or.cantidadStockBodega||0;Cr>0&&(jr.push({nombre:vr,tipo:"solicitud",cantidad:Cr,fecha:new Date}),Nr++,Lr=!0),wr>0&&(jr.push({nombre:_r,tipo:"stock",cantidad:wr,fecha:new Date}),Dr++,Lr=!0),Cr>0&&wr>0&&Ir.push(`${Or.codigoSAP} (Sol:${Cr}, Stock:${wr})`),Lr?(Tr.update(doc(db,Er,Or.id),{tags:jr,updatedAt:Timestamp.now()}),Rr++):Or.tags&&Or.tags.length>0&&Tr.update(doc(db,Er,Or.id),{tags:[],updatedAt:Timestamp.now()})}return await Tr.commit(),Ir.length>0&&(console.log(" Repuestos con AMBAS cantidades:",Ir),alert(` Hay ${Ir.length} repuestos con AMBAS cantidades:
${Ir.join(`
`)}

Revisa la consola para ms detalles.`)),{migratedCount:Rr,solicitudCount:Nr,stockCount:Dr,conAmbos:Ir}}catch(Er){throw console.error("Error al migrar tags:",Er),Er}},[er,tr]),yr=reactExports.useCallback(async()=>{if(!tr)throw new Error("Machine ID is required");try{const vr=getCollectionPath(tr);let _r=0;const Er=[];for(const Tr of er)try{const Rr=collection(db,`${vr}/${Tr.id}/historial`),Nr=query(Rr,orderBy("fecha","desc")),Dr=await getDocs(Nr);for(const Ir of Dr.docs){const Or=Ir.data();if(Or.campo==="tags"&&Or.valorAnterior){let jr=Or.valorAnterior;if(typeof jr=="string")try{jr=JSON.parse(jr)}catch{continue}if(Array.isArray(jr)){await updateDoc(doc(db,vr,Tr.id),{tags:jr,updatedAt:Timestamp.now()}),_r++;break}}}}catch{Er.push(Tr.codigoSAP)}return{restoredCount:_r,errors:Er}}catch(vr){throw console.error("Error al restaurar tags:",vr),vr}},[er,tr]),xr=reactExports.useCallback(async(vr,_r,Er,Tr)=>{if(!tr)throw new Error("Machine ID is required");try{const Rr=getCollectionPath(tr),Nr=writeBatch(db);let Dr=0;const Ir=[];for(const Or of vr){const jr=er.find(Ar=>Ar.codigoSAP===Or);if(!jr){Ir.push(Or);continue}const Lr=jr.tags||[];if(Lr.some(Ar=>typeof Ar=="string"?Ar===_r:Ar.nombre===_r))continue;const wr={nombre:_r,tipo:Er,cantidad:Tr[Or]||0,fecha:Timestamp.now()},Pr=[...Lr,wr];Nr.update(doc(db,Rr,jr.id),{tags:Pr,updatedAt:Timestamp.now()}),Dr++}return Dr>0&&await Nr.commit(),{addedCount:Dr,errors:Ir}}catch(Rr){throw console.error("Error al agregar tag a repuestos:",Rr),Rr}},[er,tr]);return{repuestos:er,loading:nr,error:sr,createRepuesto:lr,updateRepuesto:or,deleteRepuesto:ur,getHistorial:hr,importRepuestos:dr,importCantidadesPorTag:fr,importCatalogoDesdeExcel:gr,renameTag:br,deleteTag:pr,migrateTagsToNewSystem:mr,restoreTagsFromHistory:yr,addTagToRepuestosByCodigo:xr}}async function sniffImageFormat(tr){try{const er=await tr.slice(0,16).arrayBuffer(),rr=new Uint8Array(er);if(rr.length>=3&&rr[0]===255&&rr[1]===216&&rr[2]===255)return"jpeg";if(rr.length>=8&&rr[0]===137&&rr[1]===80&&rr[2]===78&&rr[3]===71&&rr[4]===13&&rr[5]===10&&rr[6]===26&&rr[7]===10)return"png";const nr=ar=>String.fromCharCode(rr[ar]??0),ir=nr(0)+nr(1)+nr(2)+nr(3),sr=nr(8)+nr(9)+nr(10)+nr(11);if(ir==="RIFF"&&sr==="WEBP")return"webp"}catch{}return"unknown"}async function convertWithCanvas(tr,er){const{mimeType:rr,quality:nr,maxWidth:ir,maxHeight:sr,fileNameSuffix:ar}=er,lr=await(async()=>{if(typeof createImageBitmap=="function")try{return await createImageBitmap(tr)}catch{}return new Promise((ur,hr)=>{const dr=new Image,fr=URL.createObjectURL(tr);dr.onload=()=>{URL.revokeObjectURL(fr),ur(dr)},dr.onerror=()=>{URL.revokeObjectURL(fr),hr(new Error("Error al cargar la imagen"))},dr.src=fr})})(),or=typeof ImageBitmap<"u"&&lr instanceof ImageBitmap;try{const ur=or?lr.width:lr.naturalWidth||lr.width,hr=or?lr.height:lr.naturalHeight||lr.height;let dr=ur,fr=hr;dr>ir&&(fr=fr*ir/dr,dr=ir),fr>sr&&(dr=dr*sr/fr,fr=sr);const gr=Math.max(1,Math.round(dr)),br=Math.max(1,Math.round(fr)),pr=typeof OffscreenCanvas<"u"?new OffscreenCanvas(gr,br):Object.assign(document.createElement("canvas"),{width:gr,height:br}),mr=pr.getContext("2d");if(!mr)throw new Error("No se pudo crear contexto de canvas");mr.drawImage(lr,0,0,gr,br);const yr=await(async()=>{const vr=pr;return typeof vr.convertToBlob=="function"?vr.convertToBlob({type:rr,quality:nr}):new Promise((_r,Er)=>{pr.toBlob(Tr=>Tr?_r(Tr):Er(new Error("No se pudo convertir la imagen")),rr,nr)})})();if(yr.type&&yr.type!==rr)throw new Error(`Formato no soportado en este navegador: solicitado ${rr}, obtenido ${yr.type}`);if(!yr.type){const vr=await sniffImageFormat(yr),_r=rr==="image/webp"?"webp":"jpeg";if(vr!==_r)throw new Error(`Conversin invlida: solicitado ${_r}, detectado ${vr}`)}const xr=tr.name.replace(/\.[^.]+$/,"");return new File([yr],`${xr}.${ar}`,{type:rr,lastModified:Date.now()})}finally{if(or){const ur=lr;typeof ur.close=="function"&&ur.close()}}}async function convertToWebP(tr,er=.85,rr=1920,nr=1920){return convertWithCanvas(tr,{mimeType:"image/webp",quality:er,maxWidth:rr,maxHeight:nr,fileNameSuffix:"webp"})}async function convertToJpeg(tr,er=.85,rr=1920,nr=1920){return convertWithCanvas(tr,{mimeType:"image/jpeg",quality:er,maxWidth:rr,maxHeight:nr,fileNameSuffix:"jpg"})}async function optimizeImage(tr,er=.95){const rr=[],nr=tr.size,ir=Math.max(.3,Math.min(.95,er)),sr=1920,ar=1920;rr.push(`Original: ${formatFileSize(nr)} (${tr.type||"tipo desconocido"})`);try{const cr=await convertToWebP(tr,ir,sr,ar);if(rr.push(`WebP generado: ${formatFileSize(cr.size)} (${cr.type})`),cr.size<nr){const lr=Math.round((1-cr.size/nr)*100);return rr.push(` WebP reduce ${lr}%`),{file:cr,chosen:{format:"webp",quality:ir,maxWidth:sr,maxHeight:ar},log:rr}}rr.push(`WebP no reduce (${formatFileSize(cr.size)} >= ${formatFileSize(nr)})`)}catch(cr){rr.push(`WebP fall: ${cr instanceof Error?cr.message:String(cr)}`)}try{const cr=await convertToJpeg(tr,ir,sr,ar);if(rr.push(`JPEG generado: ${formatFileSize(cr.size)} (${cr.type})`),cr.size<nr){const lr=Math.round((1-cr.size/nr)*100);return rr.push(` JPEG reduce ${lr}%`),{file:cr,chosen:{format:"jpeg",quality:ir,maxWidth:sr,maxHeight:ar},log:rr}}rr.push(`JPEG no reduce (${formatFileSize(cr.size)} >= ${formatFileSize(nr)})`)}catch(cr){rr.push(`JPEG fall: ${cr instanceof Error?cr.message:String(cr)}`)}return rr.push(" Devolviendo original sin optimizar"),{file:tr,chosen:{format:"original"},log:rr}}function formatFileSize(tr){return tr<1024?`${tr} B`:tr<1024*1024?`${(tr/1024).toFixed(1)} KB`:`${(tr/(1024*1024)).toFixed(2)} MB`}async function imageUrlToBase64WithDimensions(tr){return tr?new Promise(er=>{const rr=new Image;rr.crossOrigin="anonymous";const nr=setTimeout(()=>{console.warn("Timeout cargando imagen:",tr.substring(0,50)+"..."),er(null)},15e3);rr.onload=()=>{clearTimeout(nr);try{const ir=rr.naturalWidth||rr.width||200,sr=rr.naturalHeight||rr.height||200;if(ir===0||sr===0){console.warn("Imagen con dimensiones 0"),er(null);return}const ar=document.createElement("canvas");ar.width=ir,ar.height=sr;const cr=ar.getContext("2d");if(cr){cr.drawImage(rr,0,0);const lr=ar.toDataURL("image/jpeg",.85);er({base64:lr,width:ir,height:sr})}else console.warn("No se pudo obtener context 2d"),er(null)}catch(ir){console.error("Error en canvas:",ir),er(null)}},rr.onerror=ir=>{clearTimeout(nr),console.warn("Error cargando imagen (onerror):",ir),fetchImageAsBase64WithDimensions(tr).then(er)},rr.src=tr}):(console.warn("URL vaca proporcionada"),null)}async function fetchImageAsBase64WithDimensions(tr){try{const er=await fetch(tr,{mode:"cors",credentials:"omit"});if(!er.ok)return console.warn("Fetch failed:",er.status),null;const rr=await er.blob();return new Promise(nr=>{const ir=new FileReader;ir.onloadend=()=>{const sr=ir.result,ar=new Image;ar.onload=()=>{nr({base64:sr,width:ar.naturalWidth||200,height:ar.naturalHeight||200})},ar.onerror=()=>nr({base64:sr,width:200,height:200}),ar.src=sr},ir.onerror=()=>nr(null),ir.readAsDataURL(rr)})}catch(er){return console.error("Error en fetch:",er),null}}async function preloadImagesWithDimensions(tr){const er=new Map,rr=new Set;for(const cr of tr){for(const lr of cr.imagenesManual)lr.url&&rr.add(lr.url);for(const lr of cr.fotosReales)lr.url&&rr.add(lr.url)}console.log("URLs de imgenes encontradas:",rr.size);const nr=Array.from(rr),ir=3;let sr=0,ar=0;for(let cr=0;cr<nr.length;cr+=ir){const lr=nr.slice(cr,cr+ir),or=await Promise.all(lr.map(async ur=>{console.log("Procesando imagen:",ur.substring(0,60)+"...");const hr=await imageUrlToBase64WithDimensions(ur);return hr?(console.log(` Imagen OK (${hr.width}x${hr.height})`),sr++):(console.log(" Imagen fall"),ar++),{url:ur,data:hr}}));for(const{url:ur,data:hr}of or)hr&&er.set(ur,hr)}return console.log(`Imgenes convertidas: ${sr} xito, ${ar} fallos`),er}const imageUtils=Object.freeze(Object.defineProperty({__proto__:null,convertToJpeg,convertToWebP,formatFileSize,imageUrlToBase64WithDimensions,optimizeImage,preloadImagesWithDimensions},Symbol.toStringTag,{value:"Module"}));function useStorage(tr){const[er,rr]=reactExports.useState(!1),[nr,ir]=reactExports.useState(0),sr=reactExports.useCallback(async(ur,hr,dr,fr)=>{var gr,br,pr,mr,yr;if(!tr)throw new Error("Machine ID is required");rr(!0),ir(0);try{const xr=!(fr!=null&&fr.skipOptimize)&&ur.type.startsWith("image/")&&!["image/gif","image/svg+xml"].includes(ur.type);let vr=ur;if(xr)try{const jr=(fr==null?void 0:fr.quality)??.85;vr=(await optimizeImage(ur,jr)).file}catch(jr){console.warn("[useStorage] No se pudo optimizar imagen; subiendo original",jr),vr=ur}const _r=Date.now(),Er=`${_r}_${vr.name}`,Tr=tr==="baader-200"?`repuestos/${hr}/${dr}/${Er}`:`machines/${tr}/repuestos/${hr}/${dr}/${Er}`,Rr=ref(storage,Tr);await uploadBytes(Rr,vr),ir(100);const Nr=await getDownloadURL(Rr),Dr=(br=(gr=fr==null?void 0:fr.meta)==null?void 0:gr.chosen)!=null&&br.format?fr.meta.chosen.format:vr.type==="image/webp"?"webp":vr.type==="image/jpeg"?"jpeg":"original",Ir=((pr=fr==null?void 0:fr.meta)==null?void 0:pr.sizeOriginal)??(fr!=null&&fr.skipOptimize?void 0:ur.size);return{id:`${_r}`,url:Nr,descripcion:"",orden:0,esPrincipal:!1,tipo:dr,createdAt:new Date,sizeOriginal:Ir,sizeFinal:vr.size,formatFinal:Dr,qualityFinal:(yr=(mr=fr==null?void 0:fr.meta)==null?void 0:mr.chosen)==null?void 0:yr.quality}}catch(xr){throw console.error("Error al subir imagen:",xr),xr}finally{rr(!1),ir(0)}},[tr]),ar=reactExports.useCallback(async ur=>{try{const hr=ref(storage,ur);await deleteObject(hr)}catch(hr){console.error("Error al eliminar imagen:",hr)}},[]),cr=reactExports.useCallback(async(ur,hr="manual_principal")=>{if(!tr)throw new Error("Machine ID is required");rr(!0),ir(0);try{const dr=Date.now(),fr=hr||"manual",gr=ur.name.split(".").pop()||"pdf",br=`${fr}_${dr}.${gr}`,pr=`machines/${tr}/manuales/${br}`;console.log(" [useStorage] Upload path for machine",tr,":",pr);const mr=ref(storage,pr),yr=uploadBytesResumable(mr,ur);return await new Promise((vr,_r)=>{yr.on("state_changed",Er=>{const Tr=Er.totalBytes>0?Math.round(Er.bytesTransferred/Er.totalBytes*100):0;ir(Tr)},Er=>{_r(Er)},async()=>{try{ir(100);const Er=await getDownloadURL(yr.snapshot.ref);vr(Er)}catch(Er){_r(Er)}})})}catch(dr){throw console.error("Error al subir PDF:",dr),dr}finally{rr(!1)}},[tr]),lr=reactExports.useCallback(async(ur="manual_principal")=>{if(!tr)return null;const hr=`machines/${tr}/manuales`;try{const dr=ref(storage,hr),fr=await listAll(dr);for(const gr of fr.items)if(gr.name.toLowerCase().endsWith(".pdf")){const br=await getDownloadURL(gr);return console.log(` Manual encontrado: ${hr}/${gr.name}`),br}}catch{return null}return null},[tr]),or=reactExports.useCallback(async(ur,hr)=>{if(!tr)throw new Error("Machine ID is required");rr(!0),ir(0);try{const dr=Date.now(),fr=hr||ur.name.replace(/\.[^/.]+$/,"")||"infografia",gr=ur.name.split(".").pop()||"png",br=`${fr}_${dr}.${gr}`,pr=`machines/${tr}/infografias/${br}`;console.log(" [useStorage] Upload infografia path for machine",tr,":",pr);const mr=ref(storage,pr);return await uploadBytes(mr,ur),ir(100),await getDownloadURL(mr)}catch(dr){throw console.error("Error al subir infografa:",dr),dr}finally{rr(!1),ir(0)}},[tr]);return{uploading:er,progress:nr,uploadImage:sr,deleteImage:ar,uploadManualPDF:cr,getManualURL:lr,uploadInfografia:or}}const STORAGE_KEY$1="baader_app_state";function useLocalStorage(){const[tr,er]=reactExports.useState({lastSelectedRepuestoId:null});reactExports.useEffect(()=>{try{const ir=localStorage.getItem(STORAGE_KEY$1);ir&&er(JSON.parse(ir))}catch(ir){console.error("Error al cargar estado local:",ir)}},[]);const rr=reactExports.useCallback(ir=>{er(sr=>{const ar={...sr,lastSelectedRepuestoId:ir};return localStorage.setItem(STORAGE_KEY$1,JSON.stringify(ar)),ar})},[]),nr=reactExports.useCallback(()=>tr.lastSelectedRepuestoId,[tr.lastSelectedRepuestoId]);return{lastSelectedRepuestoId:tr.lastSelectedRepuestoId,setLastSelectedRepuesto:rr,getLastSelectedRepuesto:nr}}function useToast(){const[tr,er]=reactExports.useState([]),rr=reactExports.useCallback((lr,or="info",ur=3e3)=>{const hr=`toast_${Date.now()}`,dr={id:hr,message:lr,type:or,duration:ur};return er(fr=>[...fr,dr]),ur>0&&setTimeout(()=>{er(fr=>fr.filter(gr=>gr.id!==hr))},ur),hr},[]),nr=reactExports.useCallback(lr=>{er(or=>or.filter(ur=>ur.id!==lr))},[]),ir=reactExports.useCallback(lr=>rr(lr,"success"),[rr]),sr=reactExports.useCallback(lr=>rr(lr,"error",5e3),[rr]),ar=reactExports.useCallback(lr=>rr(lr,"warning"),[rr]),cr=reactExports.useCallback(lr=>rr(lr,"info"),[rr]);return{toasts:tr,addToast:rr,removeToast:nr,success:ir,error:sr,warning:ar,info:cr}}const THEME_KEY="baader_theme";function useTheme(){const[tr,er]=reactExports.useState(()=>{if(typeof window<"u"){const sr=localStorage.getItem(THEME_KEY);if(sr==="light"||sr==="dark")return sr;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"});reactExports.useEffect(()=>{const sr=document.documentElement;tr==="dark"?sr.classList.add("dark"):sr.classList.remove("dark"),localStorage.setItem(THEME_KEY,tr)},[tr]),reactExports.useEffect(()=>{const sr=window.matchMedia("(prefers-color-scheme: dark)"),ar=cr=>{localStorage.getItem(THEME_KEY)||er(cr.matches?"dark":"light")};return sr.addEventListener("change",ar),()=>sr.removeEventListener("change",ar)},[]);const rr=reactExports.useCallback(sr=>{er(sr)},[]),nr=reactExports.useCallback(()=>{er(sr=>sr==="light"?"dark":"light")},[]);return{theme:tr,setTheme:rr,toggleTheme:nr,isDark:tr==="dark"}}const MAX_HISTORY_SIZE=50;function useUndoRedo(){const[tr,er]=reactExports.useState([]),[rr,nr]=reactExports.useState([]),ir=reactExports.useRef(!1),sr=reactExports.useCallback(fr=>{if(ir.current)return;const gr={...fr,id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date};er(br=>[gr,...br].slice(0,MAX_HISTORY_SIZE)),nr([])},[]),ar=reactExports.useCallback(()=>tr[0]||null,[tr]),cr=reactExports.useCallback(()=>{if(tr.length===0)return null;const[fr,...gr]=tr;return er(gr),nr(br=>[fr,...br].slice(0,MAX_HISTORY_SIZE)),fr},[tr]),lr=reactExports.useCallback(()=>{if(rr.length===0)return null;const[fr,...gr]=rr;return nr(gr),er(br=>[fr,...br].slice(0,MAX_HISTORY_SIZE)),fr},[rr]),or=reactExports.useCallback(()=>{ir.current=!0},[]),ur=reactExports.useCallback(()=>{ir.current=!1},[]),hr=reactExports.useCallback(()=>{er([]),nr([])},[]),dr=reactExports.useCallback(fr=>{var br;const gr=fr.repuestoCode||fr.repuestoId.slice(0,8);switch(fr.type){case"update":return`Editado ${fr.campo} en ${gr}`;case"create":return`Creado repuesto ${gr}`;case"delete":return`Eliminado repuesto ${gr}`;case"addTag":return`Tag agregado a ${gr}`;case"removeTag":return`Tag eliminado de ${gr}`;case"bulkUpdate":return`Actualizacin masiva (${((br=fr.affectedIds)==null?void 0:br.length)||0} items)`;default:return fr.description}},[]);return{undoStack:tr,redoStack:rr,canUndo:tr.length>0,canRedo:rr.length>0,recordAction:sr,peekUndo:ar,popUndo:cr,popRedo:lr,startRestoring:or,endRestoring:ur,clearHistory:hr,getActionDescription:dr}}function commonjsRequire(tr){throw new Error('Could not dynamically require "'+tr+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports$1){(function(er,rr){module.exports=er.pdfjsLib=rr()})(globalThis,()=>(()=>{var __webpack_modules__=[,(tr,er)=>{var os;Object.defineProperty(er,"__esModule",{value:!0}),er.VerbosityLevel=er.Util=er.UnknownErrorException=er.UnexpectedResponseException=er.TextRenderingMode=er.RenderingIntentFlag=er.PromiseCapability=er.PermissionFlag=er.PasswordResponses=er.PasswordException=er.PageActionEventType=er.OPS=er.MissingPDFException=er.MAX_IMAGE_SIZE_TO_CACHE=er.LINE_FACTOR=er.LINE_DESCENT_FACTOR=er.InvalidPDFException=er.ImageKind=er.IDENTITY_MATRIX=er.FormatError=er.FeatureTest=er.FONT_IDENTITY_MATRIX=er.DocumentActionEventType=er.CMapCompressionType=er.BaseException=er.BASELINE_FACTOR=er.AnnotationType=er.AnnotationReplyType=er.AnnotationPrefix=er.AnnotationMode=er.AnnotationFlag=er.AnnotationFieldFlag=er.AnnotationEditorType=er.AnnotationEditorPrefix=er.AnnotationEditorParamsType=er.AnnotationBorderStyleType=er.AnnotationActionEventType=er.AbortException=void 0,er.assert=Sr,er.bytesToString=Zr,er.createValidAbsoluteUrl=qr,er.getModificationDate=yn,er.getUuid=ds,er.getVerbosityLevel=Cr,er.info=wr,er.isArrayBuffer=En,er.isArrayEqual=zn,er.isNodeJS=void 0,er.normalizeUnicode=Xn,er.objectFromMap=dn,er.objectSize=an,er.setVerbosityLevel=Lr,er.shadow=$r,er.string32=tn,er.stringToBytes=Jr,er.stringToPDFString=gn,er.stringToUTF8String=Pn,er.unreachable=Ar,er.utf8StringToString=In,er.warn=Pr;const rr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");er.isNodeJS=rr;const nr=[1,0,0,1,0,0];er.IDENTITY_MATRIX=nr;const ir=[.001,0,0,.001,0,0];er.FONT_IDENTITY_MATRIX=ir;const sr=1e7;er.MAX_IMAGE_SIZE_TO_CACHE=sr;const ar=1.35;er.LINE_FACTOR=ar;const cr=.35;er.LINE_DESCENT_FACTOR=cr;const lr=cr/ar;er.BASELINE_FACTOR=lr;const or={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};er.RenderingIntentFlag=or;const ur={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};er.AnnotationMode=ur;const hr="pdfjs_internal_editor_";er.AnnotationEditorPrefix=hr;const dr={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};er.AnnotationEditorType=dr;const fr={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};er.AnnotationEditorParamsType=fr;const gr={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};er.PermissionFlag=gr;const br={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};er.TextRenderingMode=br;const pr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};er.ImageKind=pr;const mr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};er.AnnotationType=mr;const yr={GROUP:"Group",REPLY:"R"};er.AnnotationReplyType=yr;const xr={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};er.AnnotationFlag=xr;const vr={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};er.AnnotationFieldFlag=vr;const _r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};er.AnnotationBorderStyleType=_r;const Er={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};er.AnnotationActionEventType=Er;const Tr={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};er.DocumentActionEventType=Tr;const Rr={O:"PageOpen",C:"PageClose"};er.PageActionEventType=Rr;const Nr={ERRORS:0,WARNINGS:1,INFOS:5};er.VerbosityLevel=Nr;const Dr={NONE:0,BINARY:1};er.CMapCompressionType=Dr;const Ir={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};er.OPS=Ir;const Or={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};er.PasswordResponses=Or;let jr=Nr.WARNINGS;function Lr(Hn){Number.isInteger(Hn)&&(jr=Hn)}function Cr(){return jr}function wr(Hn){jr>=Nr.INFOS&&console.log(`Info: ${Hn}`)}function Pr(Hn){jr>=Nr.WARNINGS&&console.log(`Warning: ${Hn}`)}function Ar(Hn){throw new Error(Hn)}function Sr(Hn,Ln){Hn||Ar(Ln)}function Mr(Hn){switch(Hn==null?void 0:Hn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function qr(Hn,Ln=null,Dn=null){if(!Hn)return null;try{if(Dn&&typeof Hn=="string"){if(Dn.addDefaultProtocol&&Hn.startsWith("www.")){const Ds=Hn.match(/\./g);(Ds==null?void 0:Ds.length)>=2&&(Hn=`http://${Hn}`)}if(Dn.tryConvertEncoding)try{Hn=Pn(Hn)}catch{}}const ls=Ln?new URL(Hn,Ln):new URL(Hn);if(Mr(ls))return ls}catch{}return null}function $r(Hn,Ln,Dn,ls=!1){return Object.defineProperty(Hn,Ln,{value:Dn,enumerable:!ls,configurable:!0,writable:!1}),Dn}const Br=function(){function Ln(Dn,ls){this.constructor===Ln&&Ar("Cannot initialize BaseException."),this.message=Dn,this.name=ls}return Ln.prototype=new Error,Ln.constructor=Ln,Ln}();er.BaseException=Br;class zr extends Br{constructor(Ln,Dn){super(Ln,"PasswordException"),this.code=Dn}}er.PasswordException=zr;class Gr extends Br{constructor(Ln,Dn){super(Ln,"UnknownErrorException"),this.details=Dn}}er.UnknownErrorException=Gr;class Vr extends Br{constructor(Ln){super(Ln,"InvalidPDFException")}}er.InvalidPDFException=Vr;class Xr extends Br{constructor(Ln){super(Ln,"MissingPDFException")}}er.MissingPDFException=Xr;class Ur extends Br{constructor(Ln,Dn){super(Ln,"UnexpectedResponseException"),this.status=Dn}}er.UnexpectedResponseException=Ur;class Fr extends Br{constructor(Ln){super(Ln,"FormatError")}}er.FormatError=Fr;class Kr extends Br{constructor(Ln){super(Ln,"AbortException")}}er.AbortException=Kr;function Zr(Hn){(typeof Hn!="object"||(Hn==null?void 0:Hn.length)===void 0)&&Ar("Invalid argument for bytesToString");const Ln=Hn.length,Dn=8192;if(Ln<Dn)return String.fromCharCode.apply(null,Hn);const ls=[];for(let Ds=0;Ds<Ln;Ds+=Dn){const xs=Math.min(Ds+Dn,Ln),kn=Hn.subarray(Ds,xs);ls.push(String.fromCharCode.apply(null,kn))}return ls.join("")}function Jr(Hn){typeof Hn!="string"&&Ar("Invalid argument for stringToBytes");const Ln=Hn.length,Dn=new Uint8Array(Ln);for(let ls=0;ls<Ln;++ls)Dn[ls]=Hn.charCodeAt(ls)&255;return Dn}function tn(Hn){return String.fromCharCode(Hn>>24&255,Hn>>16&255,Hn>>8&255,Hn&255)}function an(Hn){return Object.keys(Hn).length}function dn(Hn){const Ln=Object.create(null);for(const[Dn,ls]of Hn)Ln[Dn]=ls;return Ln}function en(){const Hn=new Uint8Array(4);return Hn[0]=1,new Uint32Array(Hn.buffer,0,1)[0]===1}function rn(){try{return new Function(""),!0}catch{return!1}}class sn{static get isLittleEndian(){return $r(this,"isLittleEndian",en())}static get isEvalSupported(){return $r(this,"isEvalSupported",rn())}static get isOffscreenCanvasSupported(){return $r(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?$r(this,"platform",{isWin:!1,isMac:!1}):$r(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Ln,Dn;return $r(this,"isCSSRoundSupported",(Dn=(Ln=globalThis.CSS)==null?void 0:Ln.supports)==null?void 0:Dn.call(Ln,"width: round(1.5px, 1px)"))}}er.FeatureTest=sn;const on=[...Array(256).keys()].map(Hn=>Hn.toString(16).padStart(2,"0"));class fn{static makeHexColor(Ln,Dn,ls){return`#${on[Ln]}${on[Dn]}${on[ls]}`}static scaleMinMax(Ln,Dn){let ls;Ln[0]?(Ln[0]<0&&(ls=Dn[0],Dn[0]=Dn[1],Dn[1]=ls),Dn[0]*=Ln[0],Dn[1]*=Ln[0],Ln[3]<0&&(ls=Dn[2],Dn[2]=Dn[3],Dn[3]=ls),Dn[2]*=Ln[3],Dn[3]*=Ln[3]):(ls=Dn[0],Dn[0]=Dn[2],Dn[2]=ls,ls=Dn[1],Dn[1]=Dn[3],Dn[3]=ls,Ln[1]<0&&(ls=Dn[2],Dn[2]=Dn[3],Dn[3]=ls),Dn[2]*=Ln[1],Dn[3]*=Ln[1],Ln[2]<0&&(ls=Dn[0],Dn[0]=Dn[1],Dn[1]=ls),Dn[0]*=Ln[2],Dn[1]*=Ln[2]),Dn[0]+=Ln[4],Dn[1]+=Ln[4],Dn[2]+=Ln[5],Dn[3]+=Ln[5]}static transform(Ln,Dn){return[Ln[0]*Dn[0]+Ln[2]*Dn[1],Ln[1]*Dn[0]+Ln[3]*Dn[1],Ln[0]*Dn[2]+Ln[2]*Dn[3],Ln[1]*Dn[2]+Ln[3]*Dn[3],Ln[0]*Dn[4]+Ln[2]*Dn[5]+Ln[4],Ln[1]*Dn[4]+Ln[3]*Dn[5]+Ln[5]]}static applyTransform(Ln,Dn){const ls=Ln[0]*Dn[0]+Ln[1]*Dn[2]+Dn[4],Ds=Ln[0]*Dn[1]+Ln[1]*Dn[3]+Dn[5];return[ls,Ds]}static applyInverseTransform(Ln,Dn){const ls=Dn[0]*Dn[3]-Dn[1]*Dn[2],Ds=(Ln[0]*Dn[3]-Ln[1]*Dn[2]+Dn[2]*Dn[5]-Dn[4]*Dn[3])/ls,xs=(-Ln[0]*Dn[1]+Ln[1]*Dn[0]+Dn[4]*Dn[1]-Dn[5]*Dn[0])/ls;return[Ds,xs]}static getAxialAlignedBoundingBox(Ln,Dn){const ls=this.applyTransform(Ln,Dn),Ds=this.applyTransform(Ln.slice(2,4),Dn),xs=this.applyTransform([Ln[0],Ln[3]],Dn),kn=this.applyTransform([Ln[2],Ln[1]],Dn);return[Math.min(ls[0],Ds[0],xs[0],kn[0]),Math.min(ls[1],Ds[1],xs[1],kn[1]),Math.max(ls[0],Ds[0],xs[0],kn[0]),Math.max(ls[1],Ds[1],xs[1],kn[1])]}static inverseTransform(Ln){const Dn=Ln[0]*Ln[3]-Ln[1]*Ln[2];return[Ln[3]/Dn,-Ln[1]/Dn,-Ln[2]/Dn,Ln[0]/Dn,(Ln[2]*Ln[5]-Ln[4]*Ln[3])/Dn,(Ln[4]*Ln[1]-Ln[5]*Ln[0])/Dn]}static singularValueDecompose2dScale(Ln){const Dn=[Ln[0],Ln[2],Ln[1],Ln[3]],ls=Ln[0]*Dn[0]+Ln[1]*Dn[2],Ds=Ln[0]*Dn[1]+Ln[1]*Dn[3],xs=Ln[2]*Dn[0]+Ln[3]*Dn[2],kn=Ln[2]*Dn[1]+Ln[3]*Dn[3],Jn=(ls+kn)/2,is=Math.sqrt((ls+kn)**2-4*(ls*kn-xs*Ds))/2,bs=Jn+is||1,Bn=Jn-is||1;return[Math.sqrt(bs),Math.sqrt(Bn)]}static normalizeRect(Ln){const Dn=Ln.slice(0);return Ln[0]>Ln[2]&&(Dn[0]=Ln[2],Dn[2]=Ln[0]),Ln[1]>Ln[3]&&(Dn[1]=Ln[3],Dn[3]=Ln[1]),Dn}static intersect(Ln,Dn){const ls=Math.max(Math.min(Ln[0],Ln[2]),Math.min(Dn[0],Dn[2])),Ds=Math.min(Math.max(Ln[0],Ln[2]),Math.max(Dn[0],Dn[2]));if(ls>Ds)return null;const xs=Math.max(Math.min(Ln[1],Ln[3]),Math.min(Dn[1],Dn[3])),kn=Math.min(Math.max(Ln[1],Ln[3]),Math.max(Dn[1],Dn[3]));return xs>kn?null:[ls,xs,Ds,kn]}static bezierBoundingBox(Ln,Dn,ls,Ds,xs,kn,Jn,is){const bs=[],Bn=[[],[]];let Yn,vn,_n,Mn,Cn,Zn,qn,wn;for(let $s=0;$s<2;++$s){if($s===0?(vn=6*Ln-12*ls+6*xs,Yn=-3*Ln+9*ls-9*xs+3*Jn,_n=3*ls-3*Ln):(vn=6*Dn-12*Ds+6*kn,Yn=-3*Dn+9*Ds-9*kn+3*is,_n=3*Ds-3*Dn),Math.abs(Yn)<1e-12){if(Math.abs(vn)<1e-12)continue;Mn=-_n/vn,0<Mn&&Mn<1&&bs.push(Mn);continue}qn=vn*vn-4*_n*Yn,wn=Math.sqrt(qn),!(qn<0)&&(Cn=(-vn+wn)/(2*Yn),0<Cn&&Cn<1&&bs.push(Cn),Zn=(-vn-wn)/(2*Yn),0<Zn&&Zn<1&&bs.push(Zn))}let On=bs.length,Gn;const Qn=On;for(;On--;)Mn=bs[On],Gn=1-Mn,Bn[0][On]=Gn*Gn*Gn*Ln+3*Gn*Gn*Mn*ls+3*Gn*Mn*Mn*xs+Mn*Mn*Mn*Jn,Bn[1][On]=Gn*Gn*Gn*Dn+3*Gn*Gn*Mn*Ds+3*Gn*Mn*Mn*kn+Mn*Mn*Mn*is;return Bn[0][Qn]=Ln,Bn[1][Qn]=Dn,Bn[0][Qn+1]=Jn,Bn[1][Qn+1]=is,Bn[0].length=Bn[1].length=Qn+2,[Math.min(...Bn[0]),Math.min(...Bn[1]),Math.max(...Bn[0]),Math.max(...Bn[1])]}}er.Util=fn;const pn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function gn(Hn){if(Hn[0]>=""){let Dn;if(Hn[0]===""&&Hn[1]===""?Dn="utf-16be":Hn[0]===""&&Hn[1]===""?Dn="utf-16le":Hn[0]===""&&Hn[1]===""&&Hn[2]===""&&(Dn="utf-8"),Dn)try{const ls=new TextDecoder(Dn,{fatal:!0}),Ds=Jr(Hn);return ls.decode(Ds)}catch(ls){Pr(`stringToPDFString: "${ls}".`)}}const Ln=[];for(let Dn=0,ls=Hn.length;Dn<ls;Dn++){const Ds=pn[Hn.charCodeAt(Dn)];Ln.push(Ds?String.fromCharCode(Ds):Hn.charAt(Dn))}return Ln.join("")}function Pn(Hn){return decodeURIComponent(escape(Hn))}function In(Hn){return unescape(encodeURIComponent(Hn))}function En(Hn){return typeof Hn=="object"&&(Hn==null?void 0:Hn.byteLength)!==void 0}function zn(Hn,Ln){if(Hn.length!==Ln.length)return!1;for(let Dn=0,ls=Hn.length;Dn<ls;Dn++)if(Hn[Dn]!==Ln[Dn])return!1;return!0}function yn(Hn=new Date){return[Hn.getUTCFullYear().toString(),(Hn.getUTCMonth()+1).toString().padStart(2,"0"),Hn.getUTCDate().toString().padStart(2,"0"),Hn.getUTCHours().toString().padStart(2,"0"),Hn.getUTCMinutes().toString().padStart(2,"0"),Hn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Vn{constructor(){ps(this,os,!1);this.promise=new Promise((Ln,Dn)=>{this.resolve=ls=>{ys(this,os,!0),Ln(ls)},this.reject=ls=>{ys(this,os,!0),Dn(ls)}})}get settled(){return un(this,os)}}os=new WeakMap,er.PromiseCapability=Vn;let Kn=null,es=null;function Xn(Hn){return Kn||(Kn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,es=new Map([["","t"]])),Hn.replaceAll(Kn,(Ln,Dn,ls)=>Dn?Dn.normalize("NFKC"):es.get(ls))}function ds(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Hn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Hn);else for(let Ln=0;Ln<32;Ln++)Hn[Ln]=Math.floor(Math.random()*255);return Zr(Hn)}const fs="pdfjs_internal_id_";er.AnnotationPrefix=fs},(__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{var tr,rr,nr,ir,gp,fm,cr,lr,or,ur,hr,dr,fr,gr,br,pm,mr,yr,Wm,vr,_r;Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Tr){if(typeof Tr=="string"||Tr instanceof URL?Tr={url:Tr}:(0,_util.isArrayBuffer)(Tr)&&(Tr={data:Tr}),typeof Tr!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Tr.url&&!Tr.data&&!Tr.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Rr=new PDFDocumentLoadingTask,{docId:Nr}=Rr,Dr=Tr.url?getUrlProp(Tr.url):null,Ir=Tr.data?getDataProp(Tr.data):null,Or=Tr.httpHeaders||null,jr=Tr.withCredentials===!0,Lr=Tr.password??null,Cr=Tr.range instanceof PDFDataRangeTransport?Tr.range:null,wr=Number.isInteger(Tr.rangeChunkSize)&&Tr.rangeChunkSize>0?Tr.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Pr=Tr.worker instanceof PDFWorker?Tr.worker:null;const Ar=Tr.verbosity,Sr=typeof Tr.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Tr.docBaseUrl)?Tr.docBaseUrl:null,Mr=typeof Tr.cMapUrl=="string"?Tr.cMapUrl:null,qr=Tr.cMapPacked!==!1,$r=Tr.CMapReaderFactory||DefaultCMapReaderFactory,Br=typeof Tr.standardFontDataUrl=="string"?Tr.standardFontDataUrl:null,zr=Tr.StandardFontDataFactory||DefaultStandardFontDataFactory,Gr=Tr.stopAtErrors!==!0,Vr=Number.isInteger(Tr.maxImageSize)&&Tr.maxImageSize>-1?Tr.maxImageSize:-1,Xr=Tr.isEvalSupported!==!1,Ur=typeof Tr.isOffscreenCanvasSupported=="boolean"?Tr.isOffscreenCanvasSupported:!_util.isNodeJS,Fr=Number.isInteger(Tr.canvasMaxAreaInBytes)?Tr.canvasMaxAreaInBytes:-1,Kr=typeof Tr.disableFontFace=="boolean"?Tr.disableFontFace:_util.isNodeJS,Zr=Tr.fontExtraProperties===!0,Jr=Tr.enableXfa===!0,tn=Tr.ownerDocument||globalThis.document,an=Tr.disableRange===!0,dn=Tr.disableStream===!0,en=Tr.disableAutoFetch===!0,rn=Tr.pdfBug===!0,sn=Cr?Cr.length:Tr.length??NaN,on=typeof Tr.useSystemFonts=="boolean"?Tr.useSystemFonts:!_util.isNodeJS&&!Kr,fn=typeof Tr.useWorkerFetch=="boolean"?Tr.useWorkerFetch:$r===_display_utils.DOMCMapReaderFactory&&zr===_display_utils.DOMStandardFontDataFactory&&Mr&&Br&&(0,_display_utils.isValidFetchUrl)(Mr,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Br,document.baseURI),pn=Tr.canvasFactory||new DefaultCanvasFactory({ownerDocument:tn}),gn=Tr.filterFactory||new DefaultFilterFactory({docId:Nr,ownerDocument:tn}),Pn=null;(0,_util.setVerbosityLevel)(Ar);const In={canvasFactory:pn,filterFactory:gn};if(fn||(In.cMapReaderFactory=new $r({baseUrl:Mr,isCompressed:qr}),In.standardFontDataFactory=new zr({baseUrl:Br})),!Pr){const yn={verbosity:Ar,port:_worker_options.GlobalWorkerOptions.workerPort};Pr=yn.port?PDFWorker.fromPort(yn):new PDFWorker(yn),Rr._worker=Pr}const En={docId:Nr,apiVersion:"3.11.174",data:Ir,password:Lr,disableAutoFetch:en,rangeChunkSize:wr,length:sn,docBaseUrl:Sr,enableXfa:Jr,evaluatorOptions:{maxImageSize:Vr,disableFontFace:Kr,ignoreErrors:Gr,isEvalSupported:Xr,isOffscreenCanvasSupported:Ur,canvasMaxAreaInBytes:Fr,fontExtraProperties:Zr,useSystemFonts:on,cMapUrl:fn?Mr:null,standardFontDataUrl:fn?Br:null}},zn={ignoreErrors:Gr,isEvalSupported:Xr,disableFontFace:Kr,fontExtraProperties:Zr,enableXfa:Jr,ownerDocument:tn,disableAutoFetch:en,pdfBug:rn,styleElement:Pn};return Pr.promise.then(function(){if(Rr.destroyed)throw new Error("Loading aborted");const yn=_fetchDocument(Pr,En),Vn=new Promise(function(Kn){let es;Cr?es=new _transport_stream.PDFDataTransportStream({length:sn,initialData:Cr.initialData,progressiveDone:Cr.progressiveDone,contentDispositionFilename:Cr.contentDispositionFilename,disableRange:an,disableStream:dn},Cr):Ir||(es=(ds=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ds):(0,_display_utils.isValidFetchUrl)(ds.url)?new _displayFetch_stream.PDFFetchStream(ds):new _displayNetwork.PDFNetworkStream(ds))({url:Dr,length:sn,httpHeaders:Or,withCredentials:jr,rangeChunkSize:wr,disableRange:an,disableStream:dn})),Kn(es)});return Promise.all([yn,Vn]).then(function([Kn,es]){if(Rr.destroyed)throw new Error("Loading aborted");const Xn=new _message_handler.MessageHandler(Nr,Kn,Pr.port),ds=new WorkerTransport(Xn,Rr,es,zn,In);Rr._transport=ds,Xn.send("Ready",null)})}).catch(Rr._capability.reject),Rr}async function _fetchDocument(Tr,Rr){if(Tr.destroyed)throw new Error("Worker was destroyed");const Nr=await Tr.messageHandler.sendWithPromise("GetDocRequest",Rr,Rr.data?[Rr.data.buffer]:null);if(Tr.destroyed)throw new Error("Worker was destroyed");return Nr}function getUrlProp(Tr){if(Tr instanceof URL)return Tr.href;try{return new URL(Tr,window.location).href}catch{if(_util.isNodeJS&&typeof Tr=="string")return Tr}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Tr){if(_util.isNodeJS&&typeof Buffer<"u"&&Tr instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Tr instanceof Uint8Array&&Tr.byteLength===Tr.buffer.byteLength)return Tr;if(typeof Tr=="string")return(0,_util.stringToBytes)(Tr);if(typeof Tr=="object"&&!isNaN(Tr==null?void 0:Tr.length)||(0,_util.isArrayBuffer)(Tr))return new Uint8Array(Tr);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const er=class er{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${$p(er,tr)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Rr,Nr,Dr;this.destroyed=!0;try{(Rr=this._worker)!=null&&Rr.port&&(this._worker._pendingDestroy=!0),await((Nr=this._transport)==null?void 0:Nr.destroy())}catch(Ir){throw(Dr=this._worker)!=null&&Dr.port&&delete this._worker._pendingDestroy,Ir}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};tr=new WeakMap,ps(er,tr,0);let PDFDocumentLoadingTask=er;exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Rr,Nr,Dr=!1,Ir=null){this.length=Rr,this.initialData=Nr,this.progressiveDone=Dr,this.contentDispositionFilename=Ir,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Rr){this._rangeListeners.push(Rr)}addProgressListener(Rr){this._progressListeners.push(Rr)}addProgressiveReadListener(Rr){this._progressiveReadListeners.push(Rr)}addProgressiveDoneListener(Rr){this._progressiveDoneListeners.push(Rr)}onDataRange(Rr,Nr){for(const Dr of this._rangeListeners)Dr(Rr,Nr)}onDataProgress(Rr,Nr){this._readyCapability.promise.then(()=>{for(const Dr of this._progressListeners)Dr(Rr,Nr)})}onDataProgressiveRead(Rr){this._readyCapability.promise.then(()=>{for(const Nr of this._progressiveReadListeners)Nr(Rr)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Rr of this._progressiveDoneListeners)Rr()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Rr,Nr){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Rr,Nr){this._pdfInfo=Rr,this._transport=Nr,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Dr=>{if(!Dr)return Dr;const Ir=[];for(const Or in Dr)Ir.push(...Dr[Or]);return Ir}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Rr){return this._transport.getPage(Rr)}getPageIndex(Rr){return this._transport.getPageIndex(Rr)}getDestinations(){return this._transport.getDestinations()}getDestination(Rr){return this._transport.getDestination(Rr)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Rr=!1){return this._transport.startCleanup(Rr||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Rr,Nr,Dr,Ir=!1){ps(this,ir);ps(this,rr,null);ps(this,nr,!1);this._pageIndex=Rr,this._pageInfo=Nr,this._transport=Dr,this._stats=Ir?new _display_utils.StatTimer:null,this._pdfBug=Ir,this.commonObjs=Dr.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Rr,rotation:Nr=this.rotate,offsetX:Dr=0,offsetY:Ir=0,dontFlip:Or=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Rr,rotation:Nr,offsetX:Dr,offsetY:Ir,dontFlip:Or})}getAnnotations({intent:Rr="display"}={}){const Nr=this._transport.getRenderingIntent(Rr);return this._transport.getAnnotations(this._pageIndex,Nr.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Rr;return((Rr=this._transport._htmlForXfa)==null?void 0:Rr.children[this._pageIndex])||null}render({canvasContext:Rr,viewport:Nr,intent:Dr="display",annotationMode:Ir=_util.AnnotationMode.ENABLE,transform:Or=null,background:jr=null,optionalContentConfigPromise:Lr=null,annotationCanvasMap:Cr=null,pageColors:wr=null,printAnnotationStorage:Pr=null}){var zr,Gr;(zr=this._stats)==null||zr.time("Overall");const Ar=this._transport.getRenderingIntent(Dr,Ir,Pr);ys(this,nr,!1),rs(this,ir,fm).call(this),Lr||(Lr=this._transport.getOptionalContentConfig());let Sr=this._intentStates.get(Ar.cacheKey);Sr||(Sr=Object.create(null),this._intentStates.set(Ar.cacheKey,Sr)),Sr.streamReaderCancelTimeout&&(clearTimeout(Sr.streamReaderCancelTimeout),Sr.streamReaderCancelTimeout=null);const Mr=!!(Ar.renderingIntent&_util.RenderingIntentFlag.PRINT);Sr.displayReadyCapability||(Sr.displayReadyCapability=new _util.PromiseCapability,Sr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Gr=this._stats)==null||Gr.time("Page Request"),this._pumpOperatorList(Ar));const qr=Vr=>{var Xr,Ur;Sr.renderTasks.delete($r),(this._maybeCleanupAfterRender||Mr)&&ys(this,nr,!0),rs(this,ir,gp).call(this,!Mr),Vr?($r.capability.reject(Vr),this._abortOperatorList({intentState:Sr,reason:Vr instanceof Error?Vr:new Error(Vr)})):$r.capability.resolve(),(Xr=this._stats)==null||Xr.timeEnd("Rendering"),(Ur=this._stats)==null||Ur.timeEnd("Overall")},$r=new InternalRenderTask({callback:qr,params:{canvasContext:Rr,viewport:Nr,transform:Or,background:jr},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Cr,operatorList:Sr.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Mr,pdfBug:this._pdfBug,pageColors:wr});(Sr.renderTasks||(Sr.renderTasks=new Set)).add($r);const Br=$r.task;return Promise.all([Sr.displayReadyCapability.promise,Lr]).then(([Vr,Xr])=>{var Ur;if(this.destroyed){qr();return}(Ur=this._stats)==null||Ur.time("Rendering"),$r.initializeGraphics({transparency:Vr,optionalContentConfig:Xr}),$r.operatorListChanged()}).catch(qr),Br}getOperatorList({intent:Rr="display",annotationMode:Nr=_util.AnnotationMode.ENABLE,printAnnotationStorage:Dr=null}={}){var Cr;function Ir(){jr.operatorList.lastChunk&&(jr.opListReadCapability.resolve(jr.operatorList),jr.renderTasks.delete(Lr))}const Or=this._transport.getRenderingIntent(Rr,Nr,Dr,!0);let jr=this._intentStates.get(Or.cacheKey);jr||(jr=Object.create(null),this._intentStates.set(Or.cacheKey,jr));let Lr;return jr.opListReadCapability||(Lr=Object.create(null),Lr.operatorListChanged=Ir,jr.opListReadCapability=new _util.PromiseCapability,(jr.renderTasks||(jr.renderTasks=new Set)).add(Lr),jr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Cr=this._stats)==null||Cr.time("Page Request"),this._pumpOperatorList(Or)),jr.opListReadCapability.promise}streamTextContent({includeMarkedContent:Rr=!1,disableNormalization:Nr=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Rr===!0,disableNormalization:Nr===!0},{highWaterMark:100,size(Ir){return Ir.items.length}})}getTextContent(Rr={}){if(this._transport._htmlForXfa)return this.getXfa().then(Dr=>_xfa_text.XfaText.textContent(Dr));const Nr=this.streamTextContent(Rr);return new Promise(function(Dr,Ir){function Or(){jr.read().then(function({value:Cr,done:wr}){if(wr){Dr(Lr);return}Object.assign(Lr.styles,Cr.styles),Lr.items.push(...Cr.items),Or()},Ir)}const jr=Nr.getReader(),Lr={items:[],styles:Object.create(null)};Or()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Rr=[];for(const Nr of this._intentStates.values())if(this._abortOperatorList({intentState:Nr,reason:new Error("Page was destroyed."),force:!0}),!Nr.opListReadCapability)for(const Dr of Nr.renderTasks)Rr.push(Dr.completed),Dr.cancel();return this.objs.clear(),ys(this,nr,!1),rs(this,ir,fm).call(this),Promise.all(Rr)}cleanup(Rr=!1){ys(this,nr,!0);const Nr=rs(this,ir,gp).call(this,!1);return Rr&&Nr&&this._stats&&(this._stats=new _display_utils.StatTimer),Nr}_startRenderPage(Rr,Nr){var Ir,Or;const Dr=this._intentStates.get(Nr);Dr&&((Ir=this._stats)==null||Ir.timeEnd("Page Request"),(Or=Dr.displayReadyCapability)==null||Or.resolve(Rr))}_renderPageChunk(Rr,Nr){for(let Dr=0,Ir=Rr.length;Dr<Ir;Dr++)Nr.operatorList.fnArray.push(Rr.fnArray[Dr]),Nr.operatorList.argsArray.push(Rr.argsArray[Dr]);Nr.operatorList.lastChunk=Rr.lastChunk,Nr.operatorList.separateAnnots=Rr.separateAnnots;for(const Dr of Nr.renderTasks)Dr.operatorListChanged();Rr.lastChunk&&rs(this,ir,gp).call(this,!0)}_pumpOperatorList({renderingIntent:Rr,cacheKey:Nr,annotationStorageSerializable:Dr}){const{map:Ir,transfers:Or}=Dr,Lr=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Rr,cacheKey:Nr,annotationStorage:Ir},Or).getReader(),Cr=this._intentStates.get(Nr);Cr.streamReader=Lr;const wr=()=>{Lr.read().then(({value:Pr,done:Ar})=>{if(Ar){Cr.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Pr,Cr),wr())},Pr=>{if(Cr.streamReader=null,!this._transport.destroyed){if(Cr.operatorList){Cr.operatorList.lastChunk=!0;for(const Ar of Cr.renderTasks)Ar.operatorListChanged();rs(this,ir,gp).call(this,!0)}if(Cr.displayReadyCapability)Cr.displayReadyCapability.reject(Pr);else if(Cr.opListReadCapability)Cr.opListReadCapability.reject(Pr);else throw Pr}})};wr()}_abortOperatorList({intentState:Rr,reason:Nr,force:Dr=!1}){if(Rr.streamReader){if(Rr.streamReaderCancelTimeout&&(clearTimeout(Rr.streamReaderCancelTimeout),Rr.streamReaderCancelTimeout=null),!Dr){if(Rr.renderTasks.size>0)return;if(Nr instanceof _display_utils.RenderingCancelledException){let Ir=RENDERING_CANCELLED_TIMEOUT;Nr.extraDelay>0&&Nr.extraDelay<1e3&&(Ir+=Nr.extraDelay),Rr.streamReaderCancelTimeout=setTimeout(()=>{Rr.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Rr,reason:Nr,force:!0})},Ir);return}}if(Rr.streamReader.cancel(new _util.AbortException(Nr.message)).catch(()=>{}),Rr.streamReader=null,!this._transport.destroyed){for(const[Ir,Or]of this._intentStates)if(Or===Rr){this._intentStates.delete(Ir);break}this.cleanup()}}}get stats(){return this._stats}}rr=new WeakMap,nr=new WeakMap,ir=new WeakSet,gp=function(Rr=!1){if(rs(this,ir,fm).call(this),!un(this,nr)||this.destroyed)return!1;if(Rr)return ys(this,rr,setTimeout(()=>{ys(this,rr,null),rs(this,ir,gp).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Nr,operatorList:Dr}of this._intentStates.values())if(Nr.size>0||!Dr.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ys(this,nr,!1),!0},fm=function(){un(this,rr)&&(clearTimeout(un(this,rr)),ys(this,rr,null))},exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ps(this,cr,new Set);ps(this,lr,Promise.resolve())}postMessage(Rr,Nr){const Dr={data:structuredClone(Rr,Nr?{transfer:Nr}:null)};un(this,lr).then(()=>{for(const Ir of un(this,cr))Ir.call(this,Dr)})}addEventListener(Rr,Nr){un(this,cr).add(Nr)}removeEventListener(Rr,Nr){un(this,cr).delete(Nr)}terminate(){un(this,cr).clear()}}cr=new WeakMap,lr=new WeakMap,exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Tr=(or=document==null?void 0:document.currentScript)==null?void 0:or.src;Tr&&(PDFWorkerUtil.fallbackWorkerSrc=Tr.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Tr,Rr){let Nr;try{if(Nr=new URL(Tr),!Nr.origin||Nr.origin==="null")return!1}catch{return!1}const Dr=new URL(Rr,Nr);return Nr.origin===Dr.origin},PDFWorkerUtil.createCDNWrapper=function(Tr){const Rr=`importScripts("${Tr}");`;return URL.createObjectURL(new Blob([Rr]))}}const _PDFWorker=class _PDFWorker{constructor({name:Tr=null,port:Rr=null,verbosity:Nr=(0,_util.getVerbosityLevel)()}={}){var Dr;if(this.name=Tr,this.destroyed=!1,this.verbosity=Nr,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Rr){if((Dr=un(_PDFWorker,ur))!=null&&Dr.has(Rr))throw new Error("Cannot use more than one PDFWorker per port.");(un(_PDFWorker,ur)||ys(_PDFWorker,ur,new WeakMap)).set(Rr,this),this._initializeFromPort(Rr);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Tr){this._port=Tr,this._messageHandler=new _message_handler.MessageHandler("main","worker",Tr),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Tr}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Tr)||(Tr=PDFWorkerUtil.createCDNWrapper(new URL(Tr,window.location).href));const Rr=new Worker(Tr),Nr=new _message_handler.MessageHandler("main","worker",Rr),Dr=()=>{Rr.removeEventListener("error",Ir),Nr.destroy(),Rr.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Ir=()=>{this._webWorker||Dr()};Rr.addEventListener("error",Ir),Nr.on("test",jr=>{if(Rr.removeEventListener("error",Ir),this.destroyed){Dr();return}jr?(this._messageHandler=Nr,this._port=Rr,this._webWorker=Rr,this._readyCapability.resolve(),Nr.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Nr.destroy(),Rr.terminate())}),Nr.on("ready",jr=>{if(Rr.removeEventListener("error",Ir),this.destroyed){Dr();return}try{Or()}catch{this._setupFakeWorker()}});const Or=()=>{const jr=new Uint8Array;Nr.send("test",jr,[jr.buffer])};Or();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Tr=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Rr=new LoopbackPort;this._port=Rr;const Nr=`fake${PDFWorkerUtil.fakeWorkerId++}`,Dr=new _message_handler.MessageHandler(Nr+"_worker",Nr,Rr);Tr.setup(Dr,Rr);const Ir=new _message_handler.MessageHandler(Nr,Nr+"_worker",Rr);this._messageHandler=Ir,this._readyCapability.resolve(),Ir.send("configure",{verbosity:this.verbosity})}).catch(Tr=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Tr.message}".`))})}destroy(){var Tr;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Tr=un(_PDFWorker,ur))==null||Tr.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Tr){var Nr;if(!(Tr!=null&&Tr.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Rr=(Nr=un(this,ur))==null?void 0:Nr.get(Tr.port);if(Rr){if(Rr._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Rr}return new _PDFWorker(Tr)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Tr;try{return((Tr=globalThis.pdfjsWorker)==null?void 0:Tr.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};ur=new WeakMap,ps(_PDFWorker,ur);let PDFWorker=_PDFWorker;exports$1.PDFWorker=PDFWorker;class WorkerTransport{constructor(Rr,Nr,Dr,Ir,Or){ps(this,br);ps(this,hr,new Map);ps(this,dr,new Map);ps(this,fr,new Map);ps(this,gr,null);this.messageHandler=Rr,this.loadingTask=Nr,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Ir.ownerDocument,styleElement:Ir.styleElement}),this._params=Ir,this.canvasFactory=Or.canvasFactory,this.filterFactory=Or.filterFactory,this.cMapReaderFactory=Or.cMapReaderFactory,this.standardFontDataFactory=Or.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Dr,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Rr,Nr=_util.AnnotationMode.ENABLE,Dr=null,Ir=!1){let Or=_util.RenderingIntentFlag.DISPLAY,jr=_annotation_storage.SerializableEmpty;switch(Rr){case"any":Or=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Or=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Rr}`)}switch(Nr){case _util.AnnotationMode.DISABLE:Or+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Or+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Or+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,jr=(Or&_util.RenderingIntentFlag.PRINT&&Dr instanceof _annotation_storage.PrintAnnotationStorage?Dr:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Nr}`)}return Ir&&(Or+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Or,cacheKey:`${Or}_${jr.hash}`,annotationStorageSerializable:jr}}destroy(){var Dr;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Dr=un(this,gr))==null||Dr.reject(new Error("Worker was destroyed during onPassword callback"));const Rr=[];for(const Ir of un(this,dr).values())Rr.push(Ir._destroy());un(this,dr).clear(),un(this,fr).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Nr=this.messageHandler.sendWithPromise("Terminate",null);return Rr.push(Nr),Promise.all(Rr).then(()=>{var Ir;this.commonObjs.clear(),this.fontLoader.clear(),un(this,hr).clear(),this.filterFactory.destroy(),(Ir=this._networkStream)==null||Ir.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Rr,loadingTask:Nr}=this;Rr.on("GetReader",(Dr,Ir)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Or=>{this._lastProgress={loaded:Or.loaded,total:Or.total}},Ir.onPull=()=>{this._fullReader.read().then(function({value:Or,done:jr}){if(jr){Ir.close();return}(0,_util.assert)(Or instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Ir.enqueue(new Uint8Array(Or),1,[Or])}).catch(Or=>{Ir.error(Or)})},Ir.onCancel=Or=>{this._fullReader.cancel(Or),Ir.ready.catch(jr=>{if(!this.destroyed)throw jr})}}),Rr.on("ReaderHeadersReady",Dr=>{const Ir=new _util.PromiseCapability,Or=this._fullReader;return Or.headersReady.then(()=>{var jr;(!Or.isStreamingSupported||!Or.isRangeSupported)&&(this._lastProgress&&((jr=Nr.onProgress)==null||jr.call(Nr,this._lastProgress)),Or.onProgress=Lr=>{var Cr;(Cr=Nr.onProgress)==null||Cr.call(Nr,{loaded:Lr.loaded,total:Lr.total})}),Ir.resolve({isStreamingSupported:Or.isStreamingSupported,isRangeSupported:Or.isRangeSupported,contentLength:Or.contentLength})},Ir.reject),Ir.promise}),Rr.on("GetRangeReader",(Dr,Ir)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Or=this._networkStream.getRangeReader(Dr.begin,Dr.end);if(!Or){Ir.close();return}Ir.onPull=()=>{Or.read().then(function({value:jr,done:Lr}){if(Lr){Ir.close();return}(0,_util.assert)(jr instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Ir.enqueue(new Uint8Array(jr),1,[jr])}).catch(jr=>{Ir.error(jr)})},Ir.onCancel=jr=>{Or.cancel(jr),Ir.ready.catch(Lr=>{if(!this.destroyed)throw Lr})}}),Rr.on("GetDoc",({pdfInfo:Dr})=>{this._numPages=Dr.numPages,this._htmlForXfa=Dr.htmlForXfa,delete Dr.htmlForXfa,Nr._capability.resolve(new PDFDocumentProxy(Dr,this))}),Rr.on("DocException",function(Dr){let Ir;switch(Dr.name){case"PasswordException":Ir=new _util.PasswordException(Dr.message,Dr.code);break;case"InvalidPDFException":Ir=new _util.InvalidPDFException(Dr.message);break;case"MissingPDFException":Ir=new _util.MissingPDFException(Dr.message);break;case"UnexpectedResponseException":Ir=new _util.UnexpectedResponseException(Dr.message,Dr.status);break;case"UnknownErrorException":Ir=new _util.UnknownErrorException(Dr.message,Dr.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Nr._capability.reject(Ir)}),Rr.on("PasswordRequest",Dr=>{if(ys(this,gr,new _util.PromiseCapability),Nr.onPassword){const Ir=Or=>{Or instanceof Error?un(this,gr).reject(Or):un(this,gr).resolve({password:Or})};try{Nr.onPassword(Ir,Dr.code)}catch(Or){un(this,gr).reject(Or)}}else un(this,gr).reject(new _util.PasswordException(Dr.message,Dr.code));return un(this,gr).promise}),Rr.on("DataLoaded",Dr=>{var Ir;(Ir=Nr.onProgress)==null||Ir.call(Nr,{loaded:Dr.length,total:Dr.length}),this.downloadInfoCapability.resolve(Dr)}),Rr.on("StartRenderPage",Dr=>{if(this.destroyed)return;un(this,dr).get(Dr.pageIndex)._startRenderPage(Dr.transparency,Dr.cacheKey)}),Rr.on("commonobj",([Dr,Ir,Or])=>{var jr;if(!this.destroyed&&!this.commonObjs.has(Dr))switch(Ir){case"Font":const Lr=this._params;if("error"in Or){const Pr=Or.error;(0,_util.warn)(`Error during font loading: ${Pr}`),this.commonObjs.resolve(Dr,Pr);break}const Cr=Lr.pdfBug&&((jr=globalThis.FontInspector)!=null&&jr.enabled)?(Pr,Ar)=>globalThis.FontInspector.fontAdded(Pr,Ar):null,wr=new _font_loader.FontFaceObject(Or,{isEvalSupported:Lr.isEvalSupported,disableFontFace:Lr.disableFontFace,ignoreErrors:Lr.ignoreErrors,inspectFont:Cr});this.fontLoader.bind(wr).catch(Pr=>Rr.sendWithPromise("FontFallback",{id:Dr})).finally(()=>{!Lr.fontExtraProperties&&wr.data&&(wr.data=null),this.commonObjs.resolve(Dr,wr)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Dr,Or);break;default:throw new Error(`Got unknown common object type ${Ir}`)}}),Rr.on("obj",([Dr,Ir,Or,jr])=>{var Cr;if(this.destroyed)return;const Lr=un(this,dr).get(Ir);if(!Lr.objs.has(Dr))switch(Or){case"Image":if(Lr.objs.resolve(Dr,jr),jr){let wr;if(jr.bitmap){const{width:Pr,height:Ar}=jr;wr=Pr*Ar*4}else wr=((Cr=jr.data)==null?void 0:Cr.length)||0;wr>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Lr._maybeCleanupAfterRender=!0)}break;case"Pattern":Lr.objs.resolve(Dr,jr);break;default:throw new Error(`Got unknown object type ${Or}`)}}),Rr.on("DocProgress",Dr=>{var Ir;this.destroyed||(Ir=Nr.onProgress)==null||Ir.call(Nr,{loaded:Dr.loaded,total:Dr.total})}),Rr.on("FetchBuiltInCMap",Dr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Dr):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Rr.on("FetchStandardFontData",Dr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Dr):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Dr;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Rr,transfers:Nr}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Rr,filename:((Dr=this._fullReader)==null?void 0:Dr.filename)??null},Nr).finally(()=>{this.annotationStorage.resetModified()})}getPage(Rr){if(!Number.isInteger(Rr)||Rr<=0||Rr>this._numPages)return Promise.reject(new Error("Invalid page request."));const Nr=Rr-1,Dr=un(this,fr).get(Nr);if(Dr)return Dr;const Ir=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Nr}).then(Or=>{if(this.destroyed)throw new Error("Transport destroyed");const jr=new PDFPageProxy(Nr,Or,this,this._params.pdfBug);return un(this,dr).set(Nr,jr),jr});return un(this,fr).set(Nr,Ir),Ir}getPageIndex(Rr){return typeof Rr!="object"||Rr===null||!Number.isInteger(Rr.num)||Rr.num<0||!Number.isInteger(Rr.gen)||Rr.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Rr.num,gen:Rr.gen})}getAnnotations(Rr,Nr){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Rr,intent:Nr})}getFieldObjects(){return rs(this,br,pm).call(this,"GetFieldObjects")}hasJSActions(){return rs(this,br,pm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Rr){return typeof Rr!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Rr})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return rs(this,br,pm).call(this,"GetDocJSActions")}getPageJSActions(Rr){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Rr})}getStructTree(Rr){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Rr})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Rr=>new _optional_content_config.OptionalContentConfig(Rr))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Rr="GetMetadata",Nr=un(this,hr).get(Rr);if(Nr)return Nr;const Dr=this.messageHandler.sendWithPromise(Rr,null).then(Ir=>{var Or,jr;return{info:Ir[0],metadata:Ir[1]?new _metadata.Metadata(Ir[1]):null,contentDispositionFilename:((Or=this._fullReader)==null?void 0:Or.filename)??null,contentLength:((jr=this._fullReader)==null?void 0:jr.contentLength)??null}});return un(this,hr).set(Rr,Dr),Dr}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Rr=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Nr of un(this,dr).values())if(!Nr.cleanup())throw new Error(`startCleanup: Page ${Nr.pageNumber} is currently rendering.`);this.commonObjs.clear(),Rr||this.fontLoader.clear(),un(this,hr).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Rr,enableXfa:Nr}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Rr,enableXfa:Nr})}}hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakSet,pm=function(Rr,Nr=null){const Dr=un(this,hr).get(Rr);if(Dr)return Dr;const Ir=this.messageHandler.sendWithPromise(Rr,Nr);return un(this,hr).set(Rr,Ir),Ir};class PDFObjects{constructor(){ps(this,yr);ps(this,mr,Object.create(null))}get(Rr,Nr=null){if(Nr){const Ir=rs(this,yr,Wm).call(this,Rr);return Ir.capability.promise.then(()=>Nr(Ir.data)),null}const Dr=un(this,mr)[Rr];if(!(Dr!=null&&Dr.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Rr}.`);return Dr.data}has(Rr){const Nr=un(this,mr)[Rr];return(Nr==null?void 0:Nr.capability.settled)||!1}resolve(Rr,Nr=null){const Dr=rs(this,yr,Wm).call(this,Rr);Dr.data=Nr,Dr.capability.resolve()}clear(){var Rr;for(const Nr in un(this,mr)){const{data:Dr}=un(this,mr)[Nr];(Rr=Dr==null?void 0:Dr.bitmap)==null||Rr.close()}ys(this,mr,Object.create(null))}}mr=new WeakMap,yr=new WeakSet,Wm=function(Rr){var Nr;return(Nr=un(this,mr))[Rr]||(Nr[Rr]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Rr){ps(this,vr,null);ys(this,vr,Rr),this.onContinue=null}get promise(){return un(this,vr).capability.promise}cancel(Rr=0){un(this,vr).cancel(null,Rr)}get separateAnnots(){const{separateAnnots:Rr}=un(this,vr).operatorList;if(!Rr)return!1;const{annotationCanvasMap:Nr}=un(this,vr);return Rr.form||Rr.canvas&&(Nr==null?void 0:Nr.size)>0}}vr=new WeakMap,exports$1.RenderTask=RenderTask;const Er=class Er{constructor({callback:Rr,params:Nr,objs:Dr,commonObjs:Ir,annotationCanvasMap:Or,operatorList:jr,pageIndex:Lr,canvasFactory:Cr,filterFactory:wr,useRequestAnimationFrame:Pr=!1,pdfBug:Ar=!1,pageColors:Sr=null}){this.callback=Rr,this.params=Nr,this.objs=Dr,this.commonObjs=Ir,this.annotationCanvasMap=Or,this.operatorListIdx=null,this.operatorList=jr,this._pageIndex=Lr,this.canvasFactory=Cr,this.filterFactory=wr,this._pdfBug=Ar,this.pageColors=Sr,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Pr===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Nr.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Rr=!1,optionalContentConfig:Nr}){var Lr,Cr;if(this.cancelled)return;if(this._canvas){if(un(Er,_r).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");un(Er,_r).add(this._canvas)}this._pdfBug&&((Lr=globalThis.StepperManager)!=null&&Lr.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Dr,viewport:Ir,transform:Or,background:jr}=this.params;this.gfx=new _canvas.CanvasGraphics(Dr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Nr},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Or,viewport:Ir,transparency:Rr,background:jr}),this.operatorListIdx=0,this.graphicsReady=!0,(Cr=this.graphicsReadyCallback)==null||Cr.call(this)}cancel(Rr=null,Nr=0){var Dr;this.running=!1,this.cancelled=!0,(Dr=this.gfx)==null||Dr.endDrawing(),un(Er,_r).delete(this._canvas),this.callback(Rr||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Nr))}operatorListChanged(){var Rr;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Rr=this.stepper)==null||Rr.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),un(Er,_r).delete(this._canvas),this.callback())))}};_r=new WeakMap,ps(Er,_r,new WeakSet);let InternalRenderTask=Er;const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build},(tr,er,rr)=>{var or,ur,hr,ey,fr;Object.defineProperty(er,"__esModule",{value:!0}),er.SerializableEmpty=er.PrintAnnotationStorage=er.AnnotationStorage=void 0;var nr=rr(1),ir=rr(4),sr=rr(8);const ar=Object.freeze({map:null,hash:"",transfers:void 0});er.SerializableEmpty=ar;class cr{constructor(){ps(this,hr);ps(this,or,!1);ps(this,ur,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(br,pr){const mr=un(this,ur).get(br);return mr===void 0?pr:Object.assign(pr,mr)}getRawValue(br){return un(this,ur).get(br)}remove(br){if(un(this,ur).delete(br),un(this,ur).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const pr of un(this,ur).values())if(pr instanceof ir.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(br,pr){const mr=un(this,ur).get(br);let yr=!1;if(mr!==void 0)for(const[xr,vr]of Object.entries(pr))mr[xr]!==vr&&(yr=!0,mr[xr]=vr);else yr=!0,un(this,ur).set(br,pr);yr&&rs(this,hr,ey).call(this),pr instanceof ir.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(pr.constructor._type)}has(br){return un(this,ur).has(br)}getAll(){return un(this,ur).size>0?(0,nr.objectFromMap)(un(this,ur)):null}setAll(br){for(const[pr,mr]of Object.entries(br))this.setValue(pr,mr)}get size(){return un(this,ur).size}resetModified(){un(this,or)&&(ys(this,or,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new lr(this)}get serializable(){if(un(this,ur).size===0)return ar;const br=new Map,pr=new sr.MurmurHash3_64,mr=[],yr=Object.create(null);let xr=!1;for(const[vr,_r]of un(this,ur)){const Er=_r instanceof ir.AnnotationEditor?_r.serialize(!1,yr):_r;Er&&(br.set(vr,Er),pr.update(`${vr}:${JSON.stringify(Er)}`),xr||(xr=!!Er.bitmap))}if(xr)for(const vr of br.values())vr.bitmap&&mr.push(vr.bitmap);return br.size>0?{map:br,hash:pr.hexdigest(),transfers:mr}:ar}}or=new WeakMap,ur=new WeakMap,hr=new WeakSet,ey=function(){un(this,or)||(ys(this,or,!0),typeof this.onSetModified=="function"&&this.onSetModified())},er.AnnotationStorage=cr;class lr extends cr{constructor(pr){super();ps(this,fr);const{map:mr,hash:yr,transfers:xr}=pr.serializable,vr=structuredClone(mr,xr?{transfer:xr}:null);ys(this,fr,{map:vr,hash:yr,transfers:xr})}get print(){(0,nr.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return un(this,fr)}}fr=new WeakMap,er.PrintAnnotationStorage=lr},(tr,er,rr)=>{var lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr,vr,_r,Er,Gm,Km,Nr,Xm,Ym,ty,ry,ny,Zm,iy;Object.defineProperty(er,"__esModule",{value:!0}),er.AnnotationEditor=void 0;var nr=rr(5),ir=rr(1),sr=rr(6);const Pr=class Pr{constructor(Sr){ps(this,Er);ps(this,lr,"");ps(this,or,!1);ps(this,ur,null);ps(this,hr,null);ps(this,dr,null);ps(this,fr,!1);ps(this,gr,null);ps(this,br,this.focusin.bind(this));ps(this,pr,this.focusout.bind(this));ps(this,mr,!1);ps(this,yr,!1);ps(this,xr,!1);Po(this,"_initialOptions",Object.create(null));Po(this,"_uiManager",null);Po(this,"_focusEventsAllowed",!0);Po(this,"_l10nPromise",null);ps(this,vr,!1);ps(this,_r,Pr._zIndex++);this.constructor===Pr&&(0,ir.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Sr.parent,this.id=Sr.id,this.width=this.height=null,this.pageIndex=Sr.parent.pageIndex,this.name=Sr.name,this.div=null,this._uiManager=Sr.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Sr.isCentered,this._structTreeParentId=null;const{rotation:Mr,rawDims:{pageWidth:qr,pageHeight:$r,pageX:Br,pageY:zr}}=this.parent.viewport;this.rotation=Mr,this.pageRotation=(360+Mr-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[qr,$r],this.pageTranslation=[Br,zr];const[Gr,Vr]=this.parentDimensions;this.x=Sr.x/Gr,this.y=Sr.y/Vr,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,ir.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Sr){const Mr=new cr({id:Sr.parent.getNextId(),parent:Sr.parent,uiManager:Sr._uiManager});Mr.annotationElementId=Sr.annotationElementId,Mr.deleted=!0,Mr._uiManager.addToAnnotationStorage(Mr)}static initialize(Sr,Mr=null){if(Pr._l10nPromise||(Pr._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map($r=>[$r,Sr.get($r)]))),Mr!=null&&Mr.strings)for(const $r of Mr.strings)Pr._l10nPromise.set($r,Sr.get($r));if(Pr._borderLineWidth!==-1)return;const qr=getComputedStyle(document.documentElement);Pr._borderLineWidth=parseFloat(qr.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Sr,Mr){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Sr){return!1}static paste(Sr,Mr){(0,ir.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return un(this,vr)}set _isDraggable(Sr){var Mr;ys(this,vr,Sr),(Mr=this.div)==null||Mr.classList.toggle("draggable",Sr)}center(){const[Sr,Mr]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Mr/(Sr*2),this.y+=this.width*Sr/(Mr*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Mr/(Sr*2),this.y-=this.width*Sr/(Mr*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Sr){this._uiManager.addCommands(Sr)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=un(this,_r)}setParent(Sr){Sr!==null&&(this.pageIndex=Sr.pageIndex,this.pageDimensions=Sr.pageDimensions),this.parent=Sr}focusin(Sr){this._focusEventsAllowed&&(un(this,mr)?ys(this,mr,!1):this.parent.setSelected(this))}focusout(Sr){var qr;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Mr=Sr.relatedTarget;Mr!=null&&Mr.closest(`#${this.id}`)||(Sr.preventDefault(),(qr=this.parent)!=null&&qr.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Sr,Mr,qr,$r){const[Br,zr]=this.parentDimensions;[qr,$r]=this.screenToPageTranslation(qr,$r),this.x=(Sr+qr)/Br,this.y=(Mr+$r)/zr,this.fixAndSetPosition()}translate(Sr,Mr){rs(this,Er,Gm).call(this,this.parentDimensions,Sr,Mr)}translateInPage(Sr,Mr){rs(this,Er,Gm).call(this,this.pageDimensions,Sr,Mr),this.div.scrollIntoView({block:"nearest"})}drag(Sr,Mr){const[qr,$r]=this.parentDimensions;if(this.x+=Sr/qr,this.y+=Mr/$r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Xr,y:Ur}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Xr,Ur)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Br,y:zr}=this;const[Gr,Vr]=rs(this,Er,Km).call(this);Br+=Gr,zr+=Vr,this.div.style.left=`${(100*Br).toFixed(2)}%`,this.div.style.top=`${(100*zr).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Sr,Mr]=this.pageDimensions;let{x:qr,y:$r,width:Br,height:zr}=this;switch(Br*=Sr,zr*=Mr,qr*=Sr,$r*=Mr,this.rotation){case 0:qr=Math.max(0,Math.min(Sr-Br,qr)),$r=Math.max(0,Math.min(Mr-zr,$r));break;case 90:qr=Math.max(0,Math.min(Sr-zr,qr)),$r=Math.min(Mr,Math.max(Br,$r));break;case 180:qr=Math.min(Sr,Math.max(Br,qr)),$r=Math.min(Mr,Math.max(zr,$r));break;case 270:qr=Math.min(Sr,Math.max(zr,qr)),$r=Math.max(0,Math.min(Mr-Br,$r));break}this.x=qr/=Sr,this.y=$r/=Mr;const[Gr,Vr]=rs(this,Er,Km).call(this);qr+=Gr,$r+=Vr;const{style:Xr}=this.div;Xr.left=`${(100*qr).toFixed(2)}%`,Xr.top=`${(100*$r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Sr,Mr){var qr;return rs(qr=Pr,Nr,Xm).call(qr,Sr,Mr,this.parentRotation)}pageTranslationToScreen(Sr,Mr){var qr;return rs(qr=Pr,Nr,Xm).call(qr,Sr,Mr,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Sr,pageDimensions:[Mr,qr]}=this,$r=Mr*Sr,Br=qr*Sr;return ir.FeatureTest.isCSSRoundSupported?[Math.round($r),Math.round(Br)]:[$r,Br]}setDims(Sr,Mr){var Br;const[qr,$r]=this.parentDimensions;this.div.style.width=`${(100*Sr/qr).toFixed(2)}%`,un(this,fr)||(this.div.style.height=`${(100*Mr/$r).toFixed(2)}%`),(Br=un(this,ur))==null||Br.classList.toggle("small",Sr<Pr.SMALL_EDITOR_SIZE||Mr<Pr.SMALL_EDITOR_SIZE)}fixDims(){const{style:Sr}=this.div,{height:Mr,width:qr}=Sr,$r=qr.endsWith("%"),Br=!un(this,fr)&&Mr.endsWith("%");if($r&&Br)return;const[zr,Gr]=this.parentDimensions;$r||(Sr.width=`${(100*parseFloat(qr)/zr).toFixed(2)}%`),!un(this,fr)&&!Br&&(Sr.height=`${(100*parseFloat(Mr)/Gr).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(un(this,ur))return;const Sr=ys(this,ur,document.createElement("button"));Sr.className="altText";const Mr=await Pr._l10nPromise.get("editor_alt_text_button_label");Sr.textContent=Mr,Sr.setAttribute("aria-label",Mr),Sr.tabIndex="0",Sr.addEventListener("contextmenu",sr.noContextMenu),Sr.addEventListener("pointerdown",qr=>qr.stopPropagation()),Sr.addEventListener("click",qr=>{qr.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Sr.addEventListener("keydown",qr=>{qr.target===Sr&&qr.key==="Enter"&&(qr.preventDefault(),this._uiManager.editAltText(this))}),rs(this,Er,Zm).call(this),this.div.append(Sr),Pr.SMALL_EDITOR_SIZE||(Pr.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Sr.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:un(this,lr),decorative:un(this,or)}}set altTextData({altText:Sr,decorative:Mr}){un(this,lr)===Sr&&un(this,or)===Mr||(ys(this,lr,Sr),ys(this,or,Mr),rs(this,Er,Zm).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",un(this,br)),this.div.addEventListener("focusout",un(this,pr));const[Sr,Mr]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Mr/Sr).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Sr/Mr).toFixed(2)}%`);const[qr,$r]=this.getInitialTranslation();return this.translate(qr,$r),(0,nr.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Sr){const{isMac:Mr}=ir.FeatureTest.platform;if(Sr.button!==0||Sr.ctrlKey&&Mr){Sr.preventDefault();return}ys(this,mr,!0),rs(this,Er,iy).call(this,Sr)}moveInDOM(){var Sr;(Sr=this.parent)==null||Sr.moveEditorInDOM(this)}_setParentAndPosition(Sr,Mr,qr){Sr.changeParent(this),this.x=Mr,this.y=qr,this.fixAndSetPosition()}getRect(Sr,Mr){const qr=this.parentScale,[$r,Br]=this.pageDimensions,[zr,Gr]=this.pageTranslation,Vr=Sr/qr,Xr=Mr/qr,Ur=this.x*$r,Fr=this.y*Br,Kr=this.width*$r,Zr=this.height*Br;switch(this.rotation){case 0:return[Ur+Vr+zr,Br-Fr-Xr-Zr+Gr,Ur+Vr+Kr+zr,Br-Fr-Xr+Gr];case 90:return[Ur+Xr+zr,Br-Fr+Vr+Gr,Ur+Xr+Zr+zr,Br-Fr+Vr+Kr+Gr];case 180:return[Ur-Vr-Kr+zr,Br-Fr+Xr+Gr,Ur-Vr+zr,Br-Fr+Xr+Zr+Gr];case 270:return[Ur-Xr-Zr+zr,Br-Fr-Vr-Kr+Gr,Ur-Xr+zr,Br-Fr-Vr+Gr];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Sr,Mr){const[qr,$r,Br,zr]=Sr,Gr=Br-qr,Vr=zr-$r;switch(this.rotation){case 0:return[qr,Mr-zr,Gr,Vr];case 90:return[qr,Mr-$r,Vr,Gr];case 180:return[Br,Mr-$r,Gr,Vr];case 270:return[Br,Mr-zr,Vr,Gr];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ys(this,xr,!0)}disableEditMode(){ys(this,xr,!1)}isInEditMode(){return un(this,xr)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Sr,Mr;(Sr=this.div)==null||Sr.addEventListener("focusin",un(this,br)),(Mr=this.div)==null||Mr.addEventListener("focusout",un(this,pr))}serialize(Sr=!1,Mr=null){(0,ir.unreachable)("An editor must be serializable")}static deserialize(Sr,Mr,qr){const $r=new this.prototype.constructor({parent:Mr,id:Mr.getNextId(),uiManager:qr});$r.rotation=Sr.rotation;const[Br,zr]=$r.pageDimensions,[Gr,Vr,Xr,Ur]=$r.getRectInCurrentCoords(Sr.rect,zr);return $r.x=Gr/Br,$r.y=Vr/zr,$r.width=Xr/Br,$r.height=Ur/zr,$r}remove(){var Sr;this.div.removeEventListener("focusin",un(this,br)),this.div.removeEventListener("focusout",un(this,pr)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Sr=un(this,ur))==null||Sr.remove(),ys(this,ur,null),ys(this,hr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(rs(this,Er,ty).call(this),un(this,gr).classList.remove("hidden"))}select(){var Sr;this.makeResizable(),(Sr=this.div)==null||Sr.classList.add("selectedEditor")}unselect(){var Sr,Mr,qr;(Sr=un(this,gr))==null||Sr.classList.add("hidden"),(Mr=this.div)==null||Mr.classList.remove("selectedEditor"),(qr=this.div)!=null&&qr.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Sr,Mr){}disableEditing(){un(this,ur)&&(un(this,ur).hidden=!0)}enableEditing(){un(this,ur)&&(un(this,ur).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return un(this,yr)}set isEditing(Sr){ys(this,yr,Sr),this.parent&&(Sr?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Sr,Mr){ys(this,fr,!0);const qr=Sr/Mr,{style:$r}=this.div;$r.aspectRatio=qr,$r.height="auto"}static get MIN_SIZE(){return 16}};lr=new WeakMap,or=new WeakMap,ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakMap,yr=new WeakMap,xr=new WeakMap,vr=new WeakMap,_r=new WeakMap,Er=new WeakSet,Gm=function([Sr,Mr],qr,$r){[qr,$r]=this.screenToPageTranslation(qr,$r),this.x+=qr/Sr,this.y+=$r/Mr,this.fixAndSetPosition()},Km=function(){const[Sr,Mr]=this.parentDimensions,{_borderLineWidth:qr}=Pr,$r=qr/Sr,Br=qr/Mr;switch(this.rotation){case 90:return[-$r,Br];case 180:return[$r,Br];case 270:return[$r,-Br];default:return[-$r,-Br]}},Nr=new WeakSet,Xm=function(Sr,Mr,qr){switch(qr){case 90:return[Mr,-Sr];case 180:return[-Sr,-Mr];case 270:return[-Mr,Sr];default:return[Sr,Mr]}},Ym=function(Sr){switch(Sr){case 90:{const[Mr,qr]=this.pageDimensions;return[0,-Mr/qr,qr/Mr,0]}case 180:return[-1,0,0,-1];case 270:{const[Mr,qr]=this.pageDimensions;return[0,Mr/qr,-qr/Mr,0]}default:return[1,0,0,1]}},ty=function(){if(un(this,gr))return;ys(this,gr,document.createElement("div")),un(this,gr).classList.add("resizers");const Sr=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Sr.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Mr of Sr){const qr=document.createElement("div");un(this,gr).append(qr),qr.classList.add("resizer",Mr),qr.addEventListener("pointerdown",rs(this,Er,ry).bind(this,Mr)),qr.addEventListener("contextmenu",sr.noContextMenu)}this.div.prepend(un(this,gr))},ry=function(Sr,Mr){Mr.preventDefault();const{isMac:qr}=ir.FeatureTest.platform;if(Mr.button!==0||Mr.ctrlKey&&qr)return;const $r=rs(this,Er,ny).bind(this,Sr),Br=this._isDraggable;this._isDraggable=!1;const zr={passive:!0,capture:!0};window.addEventListener("pointermove",$r,zr);const Gr=this.x,Vr=this.y,Xr=this.width,Ur=this.height,Fr=this.parent.div.style.cursor,Kr=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Mr.target).cursor;const Zr=()=>{this._isDraggable=Br,window.removeEventListener("pointerup",Zr),window.removeEventListener("blur",Zr),window.removeEventListener("pointermove",$r,zr),this.parent.div.style.cursor=Fr,this.div.style.cursor=Kr;const Jr=this.x,tn=this.y,an=this.width,dn=this.height;Jr===Gr&&tn===Vr&&an===Xr&&dn===Ur||this.addCommands({cmd:()=>{this.width=an,this.height=dn,this.x=Jr,this.y=tn;const[en,rn]=this.parentDimensions;this.setDims(en*an,rn*dn),this.fixAndSetPosition()},undo:()=>{this.width=Xr,this.height=Ur,this.x=Gr,this.y=Vr;const[en,rn]=this.parentDimensions;this.setDims(en*Xr,rn*Ur),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Zr),window.addEventListener("blur",Zr)},ny=function(Sr,Mr){const[qr,$r]=this.parentDimensions,Br=this.x,zr=this.y,Gr=this.width,Vr=this.height,Xr=Pr.MIN_SIZE/qr,Ur=Pr.MIN_SIZE/$r,Fr=Xn=>Math.round(Xn*1e4)/1e4,Kr=rs(this,Er,Ym).call(this,this.rotation),Zr=(Xn,ds)=>[Kr[0]*Xn+Kr[2]*ds,Kr[1]*Xn+Kr[3]*ds],Jr=rs(this,Er,Ym).call(this,360-this.rotation),tn=(Xn,ds)=>[Jr[0]*Xn+Jr[2]*ds,Jr[1]*Xn+Jr[3]*ds];let an,dn,en=!1,rn=!1;switch(Sr){case"topLeft":en=!0,an=(Xn,ds)=>[0,0],dn=(Xn,ds)=>[Xn,ds];break;case"topMiddle":an=(Xn,ds)=>[Xn/2,0],dn=(Xn,ds)=>[Xn/2,ds];break;case"topRight":en=!0,an=(Xn,ds)=>[Xn,0],dn=(Xn,ds)=>[0,ds];break;case"middleRight":rn=!0,an=(Xn,ds)=>[Xn,ds/2],dn=(Xn,ds)=>[0,ds/2];break;case"bottomRight":en=!0,an=(Xn,ds)=>[Xn,ds],dn=(Xn,ds)=>[0,0];break;case"bottomMiddle":an=(Xn,ds)=>[Xn/2,ds],dn=(Xn,ds)=>[Xn/2,0];break;case"bottomLeft":en=!0,an=(Xn,ds)=>[0,ds],dn=(Xn,ds)=>[Xn,0];break;case"middleLeft":rn=!0,an=(Xn,ds)=>[0,ds/2],dn=(Xn,ds)=>[Xn,ds/2];break}const sn=an(Gr,Vr),on=dn(Gr,Vr);let fn=Zr(...on);const pn=Fr(Br+fn[0]),gn=Fr(zr+fn[1]);let Pn=1,In=1,[En,zn]=this.screenToPageTranslation(Mr.movementX,Mr.movementY);if([En,zn]=tn(En/qr,zn/$r),en){const Xn=Math.hypot(Gr,Vr);Pn=In=Math.max(Math.min(Math.hypot(on[0]-sn[0]-En,on[1]-sn[1]-zn)/Xn,1/Gr,1/Vr),Xr/Gr,Ur/Vr)}else rn?Pn=Math.max(Xr,Math.min(1,Math.abs(on[0]-sn[0]-En)))/Gr:In=Math.max(Ur,Math.min(1,Math.abs(on[1]-sn[1]-zn)))/Vr;const yn=Fr(Gr*Pn),Vn=Fr(Vr*In);fn=Zr(...dn(yn,Vn));const Kn=pn-fn[0],es=gn-fn[1];this.width=yn,this.height=Vn,this.x=Kn,this.y=es,this.setDims(qr*yn,$r*Vn),this.fixAndSetPosition()},Zm=async function(){var qr;const Sr=un(this,ur);if(!Sr)return;if(!un(this,lr)&&!un(this,or)){Sr.classList.remove("done"),(qr=un(this,hr))==null||qr.remove();return}Pr._l10nPromise.get("editor_alt_text_edit_button_label").then($r=>{Sr.setAttribute("aria-label",$r)});let Mr=un(this,hr);if(!Mr){ys(this,hr,Mr=document.createElement("span")),Mr.className="tooltip",Mr.setAttribute("role","tooltip");const $r=Mr.id=`alt-text-tooltip-${this.id}`;Sr.setAttribute("aria-describedby",$r);const Br=100;Sr.addEventListener("mouseenter",()=>{ys(this,dr,setTimeout(()=>{ys(this,dr,null),un(this,hr).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Br))}),Sr.addEventListener("mouseleave",()=>{var zr;clearTimeout(un(this,dr)),ys(this,dr,null),(zr=un(this,hr))==null||zr.classList.remove("show")})}Sr.classList.add("done"),Mr.innerText=un(this,or)?await Pr._l10nPromise.get("editor_alt_text_decorative_tooltip"):un(this,lr),Mr.parentNode||Sr.append(Mr)},iy=function(Sr){if(!this._isDraggable)return;const Mr=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let qr,$r;Mr&&(qr={passive:!0,capture:!0},$r=zr=>{const[Gr,Vr]=this.screenToPageTranslation(zr.movementX,zr.movementY);this._uiManager.dragSelectedEditors(Gr,Vr)},window.addEventListener("pointermove",$r,qr));const Br=()=>{if(window.removeEventListener("pointerup",Br),window.removeEventListener("blur",Br),Mr&&window.removeEventListener("pointermove",$r,qr),ys(this,mr,!1),!this._uiManager.endDragSession()){const{isMac:zr}=ir.FeatureTest.platform;Sr.ctrlKey&&!zr||Sr.shiftKey||Sr.metaKey&&zr?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Br),window.addEventListener("blur",Br)},ps(Pr,Nr),Po(Pr,"_borderLineWidth",-1),Po(Pr,"_colorManager",new nr.ColorManager),Po(Pr,"_zIndex",1),Po(Pr,"SMALL_EDITOR_SIZE",0);let ar=Pr;er.AnnotationEditor=ar;class cr extends ar{constructor(Sr){super(Sr),this.annotationElementId=Sr.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(tr,er,rr)=>{var fr,gr,br,pr,mr,Qm,vr,_r,Er,Tr,Rr,sy,Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr,Mr,qr,$r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr,Jr,tn,an,dn,en,rn,sn,on,fn,pn,gn,Pn,In,En,ay,Jm,_g,mm,e0,r0,iu,Mp,oy,ly,n0,Dp,i0;Object.defineProperty(er,"__esModule",{value:!0}),er.KeyboardManager=er.CommandManager=er.ColorManager=er.AnnotationEditorUIManager=void 0,er.bindEvents=sr,er.opacityToHex=ar;var nr=rr(1),ir=rr(6);function sr(xs,kn,Jn){for(const is of Jn)kn.addEventListener(is,xs[is].bind(xs))}function ar(xs){return Math.round(Math.min(255,Math.max(1,255*xs))).toString(16).padStart(2,"0")}class cr{constructor(){ps(this,fr,0)}getId(){return`${nr.AnnotationEditorPrefix}${$p(this,fr)._++}`}}fr=new WeakMap;const xr=class xr{constructor(){ps(this,mr);ps(this,gr,(0,nr.getUuid)());ps(this,br,0);ps(this,pr,null)}static get _isSVGFittingCanvas(){const kn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',is=new OffscreenCanvas(1,3).getContext("2d"),bs=new Image;bs.src=kn;const Bn=bs.decode().then(()=>(is.drawImage(bs,0,0,1,1,0,0,1,3),new Uint32Array(is.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,nr.shadow)(this,"_isSVGFittingCanvas",Bn)}async getFromFile(kn){const{lastModified:Jn,name:is,size:bs,type:Bn}=kn;return rs(this,mr,Qm).call(this,`${Jn}_${is}_${bs}_${Bn}`,kn)}async getFromUrl(kn){return rs(this,mr,Qm).call(this,kn,kn)}async getFromId(kn){un(this,pr)||ys(this,pr,new Map);const Jn=un(this,pr).get(kn);return Jn?Jn.bitmap?(Jn.refCounter+=1,Jn):Jn.file?this.getFromFile(Jn.file):this.getFromUrl(Jn.url):null}getSvgUrl(kn){const Jn=un(this,pr).get(kn);return Jn!=null&&Jn.isSvg?Jn.svgUrl:null}deleteId(kn){un(this,pr)||ys(this,pr,new Map);const Jn=un(this,pr).get(kn);Jn&&(Jn.refCounter-=1,Jn.refCounter===0&&(Jn.bitmap=null))}isValidId(kn){return kn.startsWith(`image_${un(this,gr)}_`)}};gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakSet,Qm=async function(kn,Jn){un(this,pr)||ys(this,pr,new Map);let is=un(this,pr).get(kn);if(is===null)return null;if(is!=null&&is.bitmap)return is.refCounter+=1,is;try{is||(is={bitmap:null,id:`image_${un(this,gr)}_${$p(this,br)._++}`,refCounter:0,isSvg:!1});let bs;if(typeof Jn=="string"){is.url=Jn;const Bn=await fetch(Jn);if(!Bn.ok)throw new Error(Bn.statusText);bs=await Bn.blob()}else bs=is.file=Jn;if(bs.type==="image/svg+xml"){const Bn=xr._isSVGFittingCanvas,Yn=new FileReader,vn=new Image,_n=new Promise((Mn,Cn)=>{vn.onload=()=>{is.bitmap=vn,is.isSvg=!0,Mn()},Yn.onload=async()=>{const Zn=is.svgUrl=Yn.result;vn.src=await Bn?`${Zn}#svgView(preserveAspectRatio(none))`:Zn},vn.onerror=Yn.onerror=Cn});Yn.readAsDataURL(bs),await _n}else is.bitmap=await createImageBitmap(bs);is.refCounter=1}catch(bs){console.error(bs),is=null}return un(this,pr).set(kn,is),is&&un(this,pr).set(is.id,is),is};let lr=xr;class or{constructor(kn=128){ps(this,vr,[]);ps(this,_r,!1);ps(this,Er);ps(this,Tr,-1);ys(this,Er,kn)}add({cmd:kn,undo:Jn,mustExec:is,type:bs=NaN,overwriteIfSameType:Bn=!1,keepUndo:Yn=!1}){if(is&&kn(),un(this,_r))return;const vn={cmd:kn,undo:Jn,type:bs};if(un(this,Tr)===-1){un(this,vr).length>0&&(un(this,vr).length=0),ys(this,Tr,0),un(this,vr).push(vn);return}if(Bn&&un(this,vr)[un(this,Tr)].type===bs){Yn&&(vn.undo=un(this,vr)[un(this,Tr)].undo),un(this,vr)[un(this,Tr)]=vn;return}const _n=un(this,Tr)+1;_n===un(this,Er)?un(this,vr).splice(0,1):(ys(this,Tr,_n),_n<un(this,vr).length&&un(this,vr).splice(_n)),un(this,vr).push(vn)}undo(){un(this,Tr)!==-1&&(ys(this,_r,!0),un(this,vr)[un(this,Tr)].undo(),ys(this,_r,!1),ys(this,Tr,un(this,Tr)-1))}redo(){un(this,Tr)<un(this,vr).length-1&&(ys(this,Tr,un(this,Tr)+1),ys(this,_r,!0),un(this,vr)[un(this,Tr)].cmd(),ys(this,_r,!1))}hasSomethingToUndo(){return un(this,Tr)!==-1}hasSomethingToRedo(){return un(this,Tr)<un(this,vr).length-1}destroy(){ys(this,vr,null)}}vr=new WeakMap,_r=new WeakMap,Er=new WeakMap,Tr=new WeakMap,er.CommandManager=or;class ur{constructor(kn){ps(this,Rr);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Jn}=nr.FeatureTest.platform;for(const[is,bs,Bn={}]of kn)for(const Yn of is){const vn=Yn.startsWith("mac+");Jn&&vn?(this.callbacks.set(Yn.slice(4),{callback:bs,options:Bn}),this.allKeys.add(Yn.split("+").at(-1))):!Jn&&!vn&&(this.callbacks.set(Yn,{callback:bs,options:Bn}),this.allKeys.add(Yn.split("+").at(-1)))}}exec(kn,Jn){if(!this.allKeys.has(Jn.key))return;const is=this.callbacks.get(rs(this,Rr,sy).call(this,Jn));if(!is)return;const{callback:bs,options:{bubbles:Bn=!1,args:Yn=[],checker:vn=null}}=is;vn&&!vn(kn,Jn)||(bs.bind(kn,...Yn)(),Bn||(Jn.stopPropagation(),Jn.preventDefault()))}}Rr=new WeakSet,sy=function(kn){kn.altKey&&this.buffer.push("alt"),kn.ctrlKey&&this.buffer.push("ctrl"),kn.metaKey&&this.buffer.push("meta"),kn.shiftKey&&this.buffer.push("shift"),this.buffer.push(kn.key);const Jn=this.buffer.join("+");return this.buffer.length=0,Jn},er.KeyboardManager=ur;const Dr=class Dr{get _colors(){const kn=new Map([["CanvasText",null],["Canvas",null]]);return(0,ir.getColorValues)(kn),(0,nr.shadow)(this,"_colors",kn)}convert(kn){const Jn=(0,ir.getRGB)(kn);if(!window.matchMedia("(forced-colors: active)").matches)return Jn;for(const[is,bs]of this._colors)if(bs.every((Bn,Yn)=>Bn===Jn[Yn]))return Dr._colorsMapping.get(is);return Jn}getHexCode(kn){const Jn=this._colors.get(kn);return Jn?nr.Util.makeHexColor(...Jn):kn}};Po(Dr,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let hr=Dr;er.ColorManager=hr;const Ds=class Ds{constructor(kn,Jn,is,bs,Bn,Yn){ps(this,En);ps(this,Ir,null);ps(this,Or,new Map);ps(this,jr,new Map);ps(this,Lr,null);ps(this,Cr,null);ps(this,wr,new or);ps(this,Pr,0);ps(this,Ar,new Set);ps(this,Sr,null);ps(this,Mr,null);ps(this,qr,new Set);ps(this,$r,null);ps(this,Br,new cr);ps(this,zr,!1);ps(this,Gr,!1);ps(this,Vr,null);ps(this,Xr,nr.AnnotationEditorType.NONE);ps(this,Ur,new Set);ps(this,Fr,null);ps(this,Kr,this.blur.bind(this));ps(this,Zr,this.focus.bind(this));ps(this,Jr,this.copy.bind(this));ps(this,tn,this.cut.bind(this));ps(this,an,this.paste.bind(this));ps(this,dn,this.keydown.bind(this));ps(this,en,this.onEditingAction.bind(this));ps(this,rn,this.onPageChanging.bind(this));ps(this,sn,this.onScaleChanging.bind(this));ps(this,on,this.onRotationChanging.bind(this));ps(this,fn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ps(this,pn,[0,0]);ps(this,gn,null);ps(this,Pn,null);ps(this,In,null);ys(this,Pn,kn),ys(this,In,Jn),ys(this,Lr,is),this._eventBus=bs,this._eventBus._on("editingaction",un(this,en)),this._eventBus._on("pagechanging",un(this,rn)),this._eventBus._on("scalechanging",un(this,sn)),this._eventBus._on("rotationchanging",un(this,on)),ys(this,Cr,Bn.annotationStorage),ys(this,$r,Bn.filterFactory),ys(this,Fr,Yn),this.viewParameters={realScale:ir.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const kn=Ds.prototype,Jn=Bn=>{const{activeElement:Yn}=document;return Yn&&un(Bn,Pn).contains(Yn)&&Bn.hasSomethingToControl()},is=this.TRANSLATE_SMALL,bs=this.TRANSLATE_BIG;return(0,nr.shadow)(this,"_keyboardManager",new ur([[["ctrl+a","mac+meta+a"],kn.selectAll],[["ctrl+z","mac+meta+z"],kn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],kn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],kn.delete],[["Escape","mac+Escape"],kn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],kn.translateSelectedEditors,{args:[-is,0],checker:Jn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],kn.translateSelectedEditors,{args:[-bs,0],checker:Jn}],[["ArrowRight","mac+ArrowRight"],kn.translateSelectedEditors,{args:[is,0],checker:Jn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],kn.translateSelectedEditors,{args:[bs,0],checker:Jn}],[["ArrowUp","mac+ArrowUp"],kn.translateSelectedEditors,{args:[0,-is],checker:Jn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],kn.translateSelectedEditors,{args:[0,-bs],checker:Jn}],[["ArrowDown","mac+ArrowDown"],kn.translateSelectedEditors,{args:[0,is],checker:Jn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],kn.translateSelectedEditors,{args:[0,bs],checker:Jn}]]))}destroy(){rs(this,En,mm).call(this),rs(this,En,Jm).call(this),this._eventBus._off("editingaction",un(this,en)),this._eventBus._off("pagechanging",un(this,rn)),this._eventBus._off("scalechanging",un(this,sn)),this._eventBus._off("rotationchanging",un(this,on));for(const kn of un(this,jr).values())kn.destroy();un(this,jr).clear(),un(this,Or).clear(),un(this,qr).clear(),ys(this,Ir,null),un(this,Ur).clear(),un(this,wr).destroy(),un(this,Lr).destroy()}get hcmFilter(){return(0,nr.shadow)(this,"hcmFilter",un(this,Fr)?un(this,$r).addHCMFilter(un(this,Fr).foreground,un(this,Fr).background):"none")}get direction(){return(0,nr.shadow)(this,"direction",getComputedStyle(un(this,Pn)).direction)}editAltText(kn){var Jn;(Jn=un(this,Lr))==null||Jn.editAltText(this,kn)}onPageChanging({pageNumber:kn}){ys(this,Pr,kn-1)}focusMainContainer(){un(this,Pn).focus()}findParent(kn,Jn){for(const is of un(this,jr).values()){const{x:bs,y:Bn,width:Yn,height:vn}=is.div.getBoundingClientRect();if(kn>=bs&&kn<=bs+Yn&&Jn>=Bn&&Jn<=Bn+vn)return is}return null}disableUserSelect(kn=!1){un(this,In).classList.toggle("noUserSelect",kn)}addShouldRescale(kn){un(this,qr).add(kn)}removeShouldRescale(kn){un(this,qr).delete(kn)}onScaleChanging({scale:kn}){this.commitOrRemove(),this.viewParameters.realScale=kn*ir.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Jn of un(this,qr))Jn.onScaleChanging()}onRotationChanging({pagesRotation:kn}){this.commitOrRemove(),this.viewParameters.rotation=kn}addToAnnotationStorage(kn){!kn.isEmpty()&&un(this,Cr)&&!un(this,Cr).has(kn.id)&&un(this,Cr).setValue(kn.id,kn)}blur(){if(!this.hasSelection)return;const{activeElement:kn}=document;for(const Jn of un(this,Ur))if(Jn.div.contains(kn)){ys(this,Vr,[Jn,kn]),Jn._focusEventsAllowed=!1;break}}focus(){if(!un(this,Vr))return;const[kn,Jn]=un(this,Vr);ys(this,Vr,null),Jn.addEventListener("focusin",()=>{kn._focusEventsAllowed=!0},{once:!0}),Jn.focus()}addEditListeners(){rs(this,En,_g).call(this),rs(this,En,e0).call(this)}removeEditListeners(){rs(this,En,mm).call(this),rs(this,En,r0).call(this)}copy(kn){var is;if(kn.preventDefault(),(is=un(this,Ir))==null||is.commitOrRemove(),!this.hasSelection)return;const Jn=[];for(const bs of un(this,Ur)){const Bn=bs.serialize(!0);Bn&&Jn.push(Bn)}Jn.length!==0&&kn.clipboardData.setData("application/pdfjs",JSON.stringify(Jn))}cut(kn){this.copy(kn),this.delete()}paste(kn){kn.preventDefault();const{clipboardData:Jn}=kn;for(const Bn of Jn.items)for(const Yn of un(this,Mr))if(Yn.isHandlingMimeForPasting(Bn.type)){Yn.paste(Bn,this.currentLayer);return}let is=Jn.getData("application/pdfjs");if(!is)return;try{is=JSON.parse(is)}catch(Bn){(0,nr.warn)(`paste: "${Bn.message}".`);return}if(!Array.isArray(is))return;this.unselectAll();const bs=this.currentLayer;try{const Bn=[];for(const _n of is){const Mn=bs.deserialize(_n);if(!Mn)return;Bn.push(Mn)}const Yn=()=>{for(const _n of Bn)rs(this,En,n0).call(this,_n);rs(this,En,i0).call(this,Bn)},vn=()=>{for(const _n of Bn)_n.remove()};this.addCommands({cmd:Yn,undo:vn,mustExec:!0})}catch(Bn){(0,nr.warn)(`paste: "${Bn.message}".`)}}keydown(kn){var Jn;(Jn=this.getActive())!=null&&Jn.shouldGetKeyboardEvents()||Ds._keyboardManager.exec(this,kn)}onEditingAction(kn){["undo","redo","delete","selectAll"].includes(kn.name)&&this[kn.name]()}setEditingState(kn){kn?(rs(this,En,ay).call(this),rs(this,En,_g).call(this),rs(this,En,e0).call(this),rs(this,En,iu).call(this,{isEditing:un(this,Xr)!==nr.AnnotationEditorType.NONE,isEmpty:rs(this,En,Dp).call(this),hasSomethingToUndo:un(this,wr).hasSomethingToUndo(),hasSomethingToRedo:un(this,wr).hasSomethingToRedo(),hasSelectedEditor:!1})):(rs(this,En,Jm).call(this),rs(this,En,mm).call(this),rs(this,En,r0).call(this),rs(this,En,iu).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(kn){if(!un(this,Mr)){ys(this,Mr,kn);for(const Jn of un(this,Mr))rs(this,En,Mp).call(this,Jn.defaultPropertiesToUpdate)}}getId(){return un(this,Br).getId()}get currentLayer(){return un(this,jr).get(un(this,Pr))}getLayer(kn){return un(this,jr).get(kn)}get currentPageIndex(){return un(this,Pr)}addLayer(kn){un(this,jr).set(kn.pageIndex,kn),un(this,zr)?kn.enable():kn.disable()}removeLayer(kn){un(this,jr).delete(kn.pageIndex)}updateMode(kn,Jn=null){if(un(this,Xr)!==kn){if(ys(this,Xr,kn),kn===nr.AnnotationEditorType.NONE){this.setEditingState(!1),rs(this,En,ly).call(this);return}this.setEditingState(!0),rs(this,En,oy).call(this),this.unselectAll();for(const is of un(this,jr).values())is.updateMode(kn);if(Jn){for(const is of un(this,Or).values())if(is.annotationElementId===Jn){this.setSelected(is),is.enterInEditMode();break}}}}updateToolbar(kn){kn!==un(this,Xr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:kn})}updateParams(kn,Jn){if(un(this,Mr)){if(kn===nr.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(kn);return}for(const is of un(this,Ur))is.updateParams(kn,Jn);for(const is of un(this,Mr))is.updateDefaultParams(kn,Jn)}}enableWaiting(kn=!1){if(un(this,Gr)!==kn){ys(this,Gr,kn);for(const Jn of un(this,jr).values())kn?Jn.disableClick():Jn.enableClick(),Jn.div.classList.toggle("waiting",kn)}}getEditors(kn){const Jn=[];for(const is of un(this,Or).values())is.pageIndex===kn&&Jn.push(is);return Jn}getEditor(kn){return un(this,Or).get(kn)}addEditor(kn){un(this,Or).set(kn.id,kn)}removeEditor(kn){var Jn;un(this,Or).delete(kn.id),this.unselect(kn),(!kn.annotationElementId||!un(this,Ar).has(kn.annotationElementId))&&((Jn=un(this,Cr))==null||Jn.remove(kn.id))}addDeletedAnnotationElement(kn){un(this,Ar).add(kn.annotationElementId),kn.deleted=!0}isDeletedAnnotationElement(kn){return un(this,Ar).has(kn)}removeDeletedAnnotationElement(kn){un(this,Ar).delete(kn.annotationElementId),kn.deleted=!1}setActiveEditor(kn){un(this,Ir)!==kn&&(ys(this,Ir,kn),kn&&rs(this,En,Mp).call(this,kn.propertiesToUpdate))}toggleSelected(kn){if(un(this,Ur).has(kn)){un(this,Ur).delete(kn),kn.unselect(),rs(this,En,iu).call(this,{hasSelectedEditor:this.hasSelection});return}un(this,Ur).add(kn),kn.select(),rs(this,En,Mp).call(this,kn.propertiesToUpdate),rs(this,En,iu).call(this,{hasSelectedEditor:!0})}setSelected(kn){for(const Jn of un(this,Ur))Jn!==kn&&Jn.unselect();un(this,Ur).clear(),un(this,Ur).add(kn),kn.select(),rs(this,En,Mp).call(this,kn.propertiesToUpdate),rs(this,En,iu).call(this,{hasSelectedEditor:!0})}isSelected(kn){return un(this,Ur).has(kn)}unselect(kn){kn.unselect(),un(this,Ur).delete(kn),rs(this,En,iu).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return un(this,Ur).size!==0}undo(){un(this,wr).undo(),rs(this,En,iu).call(this,{hasSomethingToUndo:un(this,wr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:rs(this,En,Dp).call(this)})}redo(){un(this,wr).redo(),rs(this,En,iu).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:un(this,wr).hasSomethingToRedo(),isEmpty:rs(this,En,Dp).call(this)})}addCommands(kn){un(this,wr).add(kn),rs(this,En,iu).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:rs(this,En,Dp).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const kn=[...un(this,Ur)],Jn=()=>{for(const bs of kn)bs.remove()},is=()=>{for(const bs of kn)rs(this,En,n0).call(this,bs)};this.addCommands({cmd:Jn,undo:is,mustExec:!0})}commitOrRemove(){var kn;(kn=un(this,Ir))==null||kn.commitOrRemove()}hasSomethingToControl(){return un(this,Ir)||this.hasSelection}selectAll(){for(const kn of un(this,Ur))kn.commit();rs(this,En,i0).call(this,un(this,Or).values())}unselectAll(){if(un(this,Ir)){un(this,Ir).commitOrRemove();return}if(this.hasSelection){for(const kn of un(this,Ur))kn.unselect();un(this,Ur).clear(),rs(this,En,iu).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(kn,Jn,is=!1){if(is||this.commitOrRemove(),!this.hasSelection)return;un(this,pn)[0]+=kn,un(this,pn)[1]+=Jn;const[bs,Bn]=un(this,pn),Yn=[...un(this,Ur)],vn=1e3;un(this,gn)&&clearTimeout(un(this,gn)),ys(this,gn,setTimeout(()=>{ys(this,gn,null),un(this,pn)[0]=un(this,pn)[1]=0,this.addCommands({cmd:()=>{for(const _n of Yn)un(this,Or).has(_n.id)&&_n.translateInPage(bs,Bn)},undo:()=>{for(const _n of Yn)un(this,Or).has(_n.id)&&_n.translateInPage(-bs,-Bn)},mustExec:!1})},vn));for(const _n of Yn)_n.translateInPage(kn,Jn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ys(this,Sr,new Map);for(const kn of un(this,Ur))un(this,Sr).set(kn,{savedX:kn.x,savedY:kn.y,savedPageIndex:kn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!un(this,Sr))return!1;this.disableUserSelect(!1);const kn=un(this,Sr);ys(this,Sr,null);let Jn=!1;for(const[{x:bs,y:Bn,pageIndex:Yn},vn]of kn)vn.newX=bs,vn.newY=Bn,vn.newPageIndex=Yn,Jn||(Jn=bs!==vn.savedX||Bn!==vn.savedY||Yn!==vn.savedPageIndex);if(!Jn)return!1;const is=(bs,Bn,Yn,vn)=>{if(un(this,Or).has(bs.id)){const _n=un(this,jr).get(vn);_n?bs._setParentAndPosition(_n,Bn,Yn):(bs.pageIndex=vn,bs.x=Bn,bs.y=Yn)}};return this.addCommands({cmd:()=>{for(const[bs,{newX:Bn,newY:Yn,newPageIndex:vn}]of kn)is(bs,Bn,Yn,vn)},undo:()=>{for(const[bs,{savedX:Bn,savedY:Yn,savedPageIndex:vn}]of kn)is(bs,Bn,Yn,vn)},mustExec:!0}),!0}dragSelectedEditors(kn,Jn){if(un(this,Sr))for(const is of un(this,Sr).keys())is.drag(kn,Jn)}rebuild(kn){if(kn.parent===null){const Jn=this.getLayer(kn.pageIndex);Jn?(Jn.changeParent(kn),Jn.addOrRebuild(kn)):(this.addEditor(kn),this.addToAnnotationStorage(kn),kn.rebuild())}else kn.parent.addOrRebuild(kn)}isActive(kn){return un(this,Ir)===kn}getActive(){return un(this,Ir)}getMode(){return un(this,Xr)}get imageManager(){return(0,nr.shadow)(this,"imageManager",new lr)}};Ir=new WeakMap,Or=new WeakMap,jr=new WeakMap,Lr=new WeakMap,Cr=new WeakMap,wr=new WeakMap,Pr=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,Mr=new WeakMap,qr=new WeakMap,$r=new WeakMap,Br=new WeakMap,zr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Xr=new WeakMap,Ur=new WeakMap,Fr=new WeakMap,Kr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,tn=new WeakMap,an=new WeakMap,dn=new WeakMap,en=new WeakMap,rn=new WeakMap,sn=new WeakMap,on=new WeakMap,fn=new WeakMap,pn=new WeakMap,gn=new WeakMap,Pn=new WeakMap,In=new WeakMap,En=new WeakSet,ay=function(){window.addEventListener("focus",un(this,Zr)),window.addEventListener("blur",un(this,Kr))},Jm=function(){window.removeEventListener("focus",un(this,Zr)),window.removeEventListener("blur",un(this,Kr))},_g=function(){window.addEventListener("keydown",un(this,dn),{capture:!0})},mm=function(){window.removeEventListener("keydown",un(this,dn),{capture:!0})},e0=function(){document.addEventListener("copy",un(this,Jr)),document.addEventListener("cut",un(this,tn)),document.addEventListener("paste",un(this,an))},r0=function(){document.removeEventListener("copy",un(this,Jr)),document.removeEventListener("cut",un(this,tn)),document.removeEventListener("paste",un(this,an))},iu=function(kn){Object.entries(kn).some(([is,bs])=>un(this,fn)[is]!==bs)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(un(this,fn),kn)})},Mp=function(kn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:kn})},oy=function(){if(!un(this,zr)){ys(this,zr,!0);for(const kn of un(this,jr).values())kn.enable()}},ly=function(){if(this.unselectAll(),un(this,zr)){ys(this,zr,!1);for(const kn of un(this,jr).values())kn.disable()}},n0=function(kn){const Jn=un(this,jr).get(kn.pageIndex);Jn?Jn.addOrRebuild(kn):this.addEditor(kn)},Dp=function(){if(un(this,Or).size===0)return!0;if(un(this,Or).size===1)for(const kn of un(this,Or).values())return kn.isEmpty();return!1},i0=function(kn){un(this,Ur).clear();for(const Jn of kn)Jn.isEmpty()||(un(this,Ur).add(Jn),Jn.select());rs(this,En,iu).call(this,{hasSelectedEditor:!0})},Po(Ds,"TRANSLATE_SMALL",1),Po(Ds,"TRANSLATE_BIG",10);let dr=Ds;er.AnnotationEditorUIManager=dr},(tr,er,rr)=>{var Pr,Ar,Sr,Mr,qr,$r,Br,zr,Gr,Vr,Xr,Ur,yp,bp,s0,gm,ym,Lp,Fp;Object.defineProperty(er,"__esModule",{value:!0}),er.StatTimer=er.RenderingCancelledException=er.PixelsPerInch=er.PageViewport=er.PDFDateString=er.DOMStandardFontDataFactory=er.DOMSVGFactory=er.DOMFilterFactory=er.DOMCanvasFactory=er.DOMCMapReaderFactory=void 0,er.deprecated=Tr,er.getColorValues=Or,er.getCurrentTransform=jr,er.getCurrentTransformInverse=Lr,er.getFilenameFromUrl=mr,er.getPdfFilenameFromUrl=yr,er.getRGB=Ir,er.getXfaPageViewport=Dr,er.isDataScheme=br,er.isPdfFile=pr,er.isValidFetchUrl=vr,er.loadScript=Er,er.noContextMenu=_r,er.setLayerDimensions=Cr;var nr=rr(7),ir=rr(1);const sr="http://www.w3.org/2000/svg",wr=class wr{};Po(wr,"CSS",96),Po(wr,"PDF",72),Po(wr,"PDF_TO_CSS_UNITS",wr.CSS/wr.PDF);let ar=wr;er.PixelsPerInch=ar;class cr extends nr.BaseFilterFactory{constructor({docId:sn,ownerDocument:on=globalThis.document}={}){super();ps(this,Ur);ps(this,Pr);ps(this,Ar);ps(this,Sr);ps(this,Mr);ps(this,qr);ps(this,$r);ps(this,Br);ps(this,zr);ps(this,Gr);ps(this,Vr);ps(this,Xr,0);ys(this,Sr,sn),ys(this,Mr,on)}addFilter(sn){if(!sn)return"none";let on=un(this,Ur,yp).get(sn);if(on)return on;let fn,pn,gn,Pn;if(sn.length===1){const yn=sn[0],Vn=new Array(256);for(let Kn=0;Kn<256;Kn++)Vn[Kn]=yn[Kn]/255;Pn=fn=pn=gn=Vn.join(",")}else{const[yn,Vn,Kn]=sn,es=new Array(256),Xn=new Array(256),ds=new Array(256);for(let fs=0;fs<256;fs++)es[fs]=yn[fs]/255,Xn[fs]=Vn[fs]/255,ds[fs]=Kn[fs]/255;fn=es.join(","),pn=Xn.join(","),gn=ds.join(","),Pn=`${fn}${pn}${gn}`}if(on=un(this,Ur,yp).get(Pn),on)return un(this,Ur,yp).set(sn,on),on;const In=`g_${un(this,Sr)}_transfer_map_${$p(this,Xr)._++}`,En=`url(#${In})`;un(this,Ur,yp).set(sn,En),un(this,Ur,yp).set(Pn,En);const zn=rs(this,Ur,gm).call(this,In);return rs(this,Ur,Lp).call(this,fn,pn,gn,zn),En}addHCMFilter(sn,on){var Vn;const fn=`${sn}-${on}`;if(un(this,$r)===fn)return un(this,Br);if(ys(this,$r,fn),ys(this,Br,"none"),(Vn=un(this,qr))==null||Vn.remove(),!sn||!on)return un(this,Br);const pn=rs(this,Ur,Fp).call(this,sn);sn=ir.Util.makeHexColor(...pn);const gn=rs(this,Ur,Fp).call(this,on);if(on=ir.Util.makeHexColor(...gn),un(this,Ur,bp).style.color="",sn==="#000000"&&on==="#ffffff"||sn===on)return un(this,Br);const Pn=new Array(256);for(let Kn=0;Kn<=255;Kn++){const es=Kn/255;Pn[Kn]=es<=.03928?es/12.92:((es+.055)/1.055)**2.4}const In=Pn.join(","),En=`g_${un(this,Sr)}_hcm_filter`,zn=ys(this,zr,rs(this,Ur,gm).call(this,En));rs(this,Ur,Lp).call(this,In,In,In,zn),rs(this,Ur,s0).call(this,zn);const yn=(Kn,es)=>{const Xn=pn[Kn]/255,ds=gn[Kn]/255,fs=new Array(es+1);for(let os=0;os<=es;os++)fs[os]=Xn+os/es*(ds-Xn);return fs.join(",")};return rs(this,Ur,Lp).call(this,yn(0,5),yn(1,5),yn(2,5),zn),ys(this,Br,`url(#${En})`),un(this,Br)}addHighlightHCMFilter(sn,on,fn,pn){var ds;const gn=`${sn}-${on}-${fn}-${pn}`;if(un(this,Gr)===gn)return un(this,Vr);if(ys(this,Gr,gn),ys(this,Vr,"none"),(ds=un(this,zr))==null||ds.remove(),!sn||!on)return un(this,Vr);const[Pn,In]=[sn,on].map(rs(this,Ur,Fp).bind(this));let En=Math.round(.2126*Pn[0]+.7152*Pn[1]+.0722*Pn[2]),zn=Math.round(.2126*In[0]+.7152*In[1]+.0722*In[2]),[yn,Vn]=[fn,pn].map(rs(this,Ur,Fp).bind(this));zn<En&&([En,zn,yn,Vn]=[zn,En,Vn,yn]),un(this,Ur,bp).style.color="";const Kn=(fs,os,Hn)=>{const Ln=new Array(256),Dn=(zn-En)/Hn,ls=fs/255,Ds=(os-fs)/(255*Hn);let xs=0;for(let kn=0;kn<=Hn;kn++){const Jn=Math.round(En+kn*Dn),is=ls+kn*Ds;for(let bs=xs;bs<=Jn;bs++)Ln[bs]=is;xs=Jn+1}for(let kn=xs;kn<256;kn++)Ln[kn]=Ln[xs-1];return Ln.join(",")},es=`g_${un(this,Sr)}_hcm_highlight_filter`,Xn=ys(this,zr,rs(this,Ur,gm).call(this,es));return rs(this,Ur,s0).call(this,Xn),rs(this,Ur,Lp).call(this,Kn(yn[0],Vn[0],5),Kn(yn[1],Vn[1],5),Kn(yn[2],Vn[2],5),Xn),ys(this,Vr,`url(#${es})`),un(this,Vr)}destroy(sn=!1){sn&&(un(this,Br)||un(this,Vr))||(un(this,Ar)&&(un(this,Ar).parentNode.parentNode.remove(),ys(this,Ar,null)),un(this,Pr)&&(un(this,Pr).clear(),ys(this,Pr,null)),ys(this,Xr,0))}}Pr=new WeakMap,Ar=new WeakMap,Sr=new WeakMap,Mr=new WeakMap,qr=new WeakMap,$r=new WeakMap,Br=new WeakMap,zr=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Xr=new WeakMap,Ur=new WeakSet,yp=function(){return un(this,Pr)||ys(this,Pr,new Map)},bp=function(){if(!un(this,Ar)){const sn=un(this,Mr).createElement("div"),{style:on}=sn;on.visibility="hidden",on.contain="strict",on.width=on.height=0,on.position="absolute",on.top=on.left=0,on.zIndex=-1;const fn=un(this,Mr).createElementNS(sr,"svg");fn.setAttribute("width",0),fn.setAttribute("height",0),ys(this,Ar,un(this,Mr).createElementNS(sr,"defs")),sn.append(fn),fn.append(un(this,Ar)),un(this,Mr).body.append(sn)}return un(this,Ar)},s0=function(sn){const on=un(this,Mr).createElementNS(sr,"feColorMatrix");on.setAttribute("type","matrix"),on.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),sn.append(on)},gm=function(sn){const on=un(this,Mr).createElementNS(sr,"filter");return on.setAttribute("color-interpolation-filters","sRGB"),on.setAttribute("id",sn),un(this,Ur,bp).append(on),on},ym=function(sn,on,fn){const pn=un(this,Mr).createElementNS(sr,on);pn.setAttribute("type","discrete"),pn.setAttribute("tableValues",fn),sn.append(pn)},Lp=function(sn,on,fn,pn){const gn=un(this,Mr).createElementNS(sr,"feComponentTransfer");pn.append(gn),rs(this,Ur,ym).call(this,gn,"feFuncR",sn),rs(this,Ur,ym).call(this,gn,"feFuncG",on),rs(this,Ur,ym).call(this,gn,"feFuncB",fn)},Fp=function(sn){return un(this,Ur,bp).style.color=sn,Ir(getComputedStyle(un(this,Ur,bp)).getPropertyValue("color"))},er.DOMFilterFactory=cr;class lr extends nr.BaseCanvasFactory{constructor({ownerDocument:rn=globalThis.document}={}){super(),this._document=rn}_createCanvas(rn,sn){const on=this._document.createElement("canvas");return on.width=rn,on.height=sn,on}}er.DOMCanvasFactory=lr;async function or(en,rn=!1){if(vr(en,document.baseURI)){const sn=await fetch(en);if(!sn.ok)throw new Error(sn.statusText);return rn?new Uint8Array(await sn.arrayBuffer()):(0,ir.stringToBytes)(await sn.text())}return new Promise((sn,on)=>{const fn=new XMLHttpRequest;fn.open("GET",en,!0),rn&&(fn.responseType="arraybuffer"),fn.onreadystatechange=()=>{if(fn.readyState===XMLHttpRequest.DONE){if(fn.status===200||fn.status===0){let pn;if(rn&&fn.response?pn=new Uint8Array(fn.response):!rn&&fn.responseText&&(pn=(0,ir.stringToBytes)(fn.responseText)),pn){sn(pn);return}}on(new Error(fn.statusText))}},fn.send(null)})}class ur extends nr.BaseCMapReaderFactory{_fetchData(rn,sn){return or(rn,this.isCompressed).then(on=>({cMapData:on,compressionType:sn}))}}er.DOMCMapReaderFactory=ur;class hr extends nr.BaseStandardFontDataFactory{_fetchData(rn){return or(rn,!0)}}er.DOMStandardFontDataFactory=hr;class dr extends nr.BaseSVGFactory{_createSVG(rn){return document.createElementNS(sr,rn)}}er.DOMSVGFactory=dr;class fr{constructor({viewBox:rn,scale:sn,rotation:on,offsetX:fn=0,offsetY:pn=0,dontFlip:gn=!1}){this.viewBox=rn,this.scale=sn,this.rotation=on,this.offsetX=fn,this.offsetY=pn;const Pn=(rn[2]+rn[0])/2,In=(rn[3]+rn[1])/2;let En,zn,yn,Vn;switch(on%=360,on<0&&(on+=360),on){case 180:En=-1,zn=0,yn=0,Vn=1;break;case 90:En=0,zn=1,yn=1,Vn=0;break;case 270:En=0,zn=-1,yn=-1,Vn=0;break;case 0:En=1,zn=0,yn=0,Vn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}gn&&(yn=-yn,Vn=-Vn);let Kn,es,Xn,ds;En===0?(Kn=Math.abs(In-rn[1])*sn+fn,es=Math.abs(Pn-rn[0])*sn+pn,Xn=(rn[3]-rn[1])*sn,ds=(rn[2]-rn[0])*sn):(Kn=Math.abs(Pn-rn[0])*sn+fn,es=Math.abs(In-rn[1])*sn+pn,Xn=(rn[2]-rn[0])*sn,ds=(rn[3]-rn[1])*sn),this.transform=[En*sn,zn*sn,yn*sn,Vn*sn,Kn-En*sn*Pn-yn*sn*In,es-zn*sn*Pn-Vn*sn*In],this.width=Xn,this.height=ds}get rawDims(){const{viewBox:rn}=this;return(0,ir.shadow)(this,"rawDims",{pageWidth:rn[2]-rn[0],pageHeight:rn[3]-rn[1],pageX:rn[0],pageY:rn[1]})}clone({scale:rn=this.scale,rotation:sn=this.rotation,offsetX:on=this.offsetX,offsetY:fn=this.offsetY,dontFlip:pn=!1}={}){return new fr({viewBox:this.viewBox.slice(),scale:rn,rotation:sn,offsetX:on,offsetY:fn,dontFlip:pn})}convertToViewportPoint(rn,sn){return ir.Util.applyTransform([rn,sn],this.transform)}convertToViewportRectangle(rn){const sn=ir.Util.applyTransform([rn[0],rn[1]],this.transform),on=ir.Util.applyTransform([rn[2],rn[3]],this.transform);return[sn[0],sn[1],on[0],on[1]]}convertToPdfPoint(rn,sn){return ir.Util.applyInverseTransform([rn,sn],this.transform)}}er.PageViewport=fr;class gr extends ir.BaseException{constructor(rn,sn=0){super(rn,"RenderingCancelledException"),this.extraDelay=sn}}er.RenderingCancelledException=gr;function br(en){const rn=en.length;let sn=0;for(;sn<rn&&en[sn].trim()==="";)sn++;return en.substring(sn,sn+5).toLowerCase()==="data:"}function pr(en){return typeof en=="string"&&/\.pdf$/i.test(en)}function mr(en,rn=!1){return rn||([en]=en.split(/[#?]/,1)),en.substring(en.lastIndexOf("/")+1)}function yr(en,rn="document.pdf"){if(typeof en!="string")return rn;if(br(en))return(0,ir.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),rn;const sn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,on=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,fn=sn.exec(en);let pn=on.exec(fn[1])||on.exec(fn[2])||on.exec(fn[3]);if(pn&&(pn=pn[0],pn.includes("%")))try{pn=on.exec(decodeURIComponent(pn))[0]}catch{}return pn||rn}class xr{constructor(){Po(this,"started",Object.create(null));Po(this,"times",[])}time(rn){rn in this.started&&(0,ir.warn)(`Timer is already running for ${rn}`),this.started[rn]=Date.now()}timeEnd(rn){rn in this.started||(0,ir.warn)(`Timer has not been started for ${rn}`),this.times.push({name:rn,start:this.started[rn],end:Date.now()}),delete this.started[rn]}toString(){const rn=[];let sn=0;for(const{name:on}of this.times)sn=Math.max(on.length,sn);for(const{name:on,start:fn,end:pn}of this.times)rn.push(`${on.padEnd(sn)} ${pn-fn}ms
`);return rn.join("")}}er.StatTimer=xr;function vr(en,rn){try{const{protocol:sn}=rn?new URL(en,rn):new URL(en);return sn==="http:"||sn==="https:"}catch{return!1}}function _r(en){en.preventDefault()}function Er(en,rn=!1){return new Promise((sn,on)=>{const fn=document.createElement("script");fn.src=en,fn.onload=function(pn){rn&&fn.remove(),sn(pn)},fn.onerror=function(){on(new Error(`Cannot load script at: ${fn.src}`))},(document.head||document.documentElement).append(fn)})}function Tr(en){console.log("Deprecated API usage: "+en)}let Rr;class Nr{static toDateObject(rn){if(!rn||typeof rn!="string")return null;Rr||(Rr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const sn=Rr.exec(rn);if(!sn)return null;const on=parseInt(sn[1],10);let fn=parseInt(sn[2],10);fn=fn>=1&&fn<=12?fn-1:0;let pn=parseInt(sn[3],10);pn=pn>=1&&pn<=31?pn:1;let gn=parseInt(sn[4],10);gn=gn>=0&&gn<=23?gn:0;let Pn=parseInt(sn[5],10);Pn=Pn>=0&&Pn<=59?Pn:0;let In=parseInt(sn[6],10);In=In>=0&&In<=59?In:0;const En=sn[7]||"Z";let zn=parseInt(sn[8],10);zn=zn>=0&&zn<=23?zn:0;let yn=parseInt(sn[9],10)||0;return yn=yn>=0&&yn<=59?yn:0,En==="-"?(gn+=zn,Pn+=yn):En==="+"&&(gn-=zn,Pn-=yn),new Date(Date.UTC(on,fn,pn,gn,Pn,In))}}er.PDFDateString=Nr;function Dr(en,{scale:rn=1,rotation:sn=0}){const{width:on,height:fn}=en.attributes.style,pn=[0,0,parseInt(on),parseInt(fn)];return new fr({viewBox:pn,scale:rn,rotation:sn})}function Ir(en){if(en.startsWith("#")){const rn=parseInt(en.slice(1),16);return[(rn&16711680)>>16,(rn&65280)>>8,rn&255]}return en.startsWith("rgb(")?en.slice(4,-1).split(",").map(rn=>parseInt(rn)):en.startsWith("rgba(")?en.slice(5,-1).split(",").map(rn=>parseInt(rn)).slice(0,3):((0,ir.warn)(`Not a valid color format: "${en}"`),[0,0,0])}function Or(en){const rn=document.createElement("span");rn.style.visibility="hidden",document.body.append(rn);for(const sn of en.keys()){rn.style.color=sn;const on=window.getComputedStyle(rn).color;en.set(sn,Ir(on))}rn.remove()}function jr(en){const{a:rn,b:sn,c:on,d:fn,e:pn,f:gn}=en.getTransform();return[rn,sn,on,fn,pn,gn]}function Lr(en){const{a:rn,b:sn,c:on,d:fn,e:pn,f:gn}=en.getTransform().invertSelf();return[rn,sn,on,fn,pn,gn]}function Cr(en,rn,sn=!1,on=!0){if(rn instanceof fr){const{pageWidth:fn,pageHeight:pn}=rn.rawDims,{style:gn}=en,Pn=ir.FeatureTest.isCSSRoundSupported,In=`var(--scale-factor) * ${fn}px`,En=`var(--scale-factor) * ${pn}px`,zn=Pn?`round(${In}, 1px)`:`calc(${In})`,yn=Pn?`round(${En}, 1px)`:`calc(${En})`;!sn||rn.rotation%180===0?(gn.width=zn,gn.height=yn):(gn.width=yn,gn.height=zn)}on&&en.setAttribute("data-main-rotation",rn.rotation)}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.BaseStandardFontDataFactory=er.BaseSVGFactory=er.BaseFilterFactory=er.BaseCanvasFactory=er.BaseCMapReaderFactory=void 0;var nr=rr(1);class ir{constructor(){this.constructor===ir&&(0,nr.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(ur){return"none"}addHCMFilter(ur,hr){return"none"}addHighlightHCMFilter(ur,hr,dr,fr){return"none"}destroy(ur=!1){}}er.BaseFilterFactory=ir;class sr{constructor(){this.constructor===sr&&(0,nr.unreachable)("Cannot initialize BaseCanvasFactory.")}create(ur,hr){if(ur<=0||hr<=0)throw new Error("Invalid canvas size");const dr=this._createCanvas(ur,hr);return{canvas:dr,context:dr.getContext("2d")}}reset(ur,hr,dr){if(!ur.canvas)throw new Error("Canvas is not specified");if(hr<=0||dr<=0)throw new Error("Invalid canvas size");ur.canvas.width=hr,ur.canvas.height=dr}destroy(ur){if(!ur.canvas)throw new Error("Canvas is not specified");ur.canvas.width=0,ur.canvas.height=0,ur.canvas=null,ur.context=null}_createCanvas(ur,hr){(0,nr.unreachable)("Abstract method `_createCanvas` called.")}}er.BaseCanvasFactory=sr;class ar{constructor({baseUrl:ur=null,isCompressed:hr=!0}){this.constructor===ar&&(0,nr.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=ur,this.isCompressed=hr}async fetch({name:ur}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!ur)throw new Error("CMap name must be specified.");const hr=this.baseUrl+ur+(this.isCompressed?".bcmap":""),dr=this.isCompressed?nr.CMapCompressionType.BINARY:nr.CMapCompressionType.NONE;return this._fetchData(hr,dr).catch(fr=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${hr}`)})}_fetchData(ur,hr){(0,nr.unreachable)("Abstract method `_fetchData` called.")}}er.BaseCMapReaderFactory=ar;class cr{constructor({baseUrl:ur=null}){this.constructor===cr&&(0,nr.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=ur}async fetch({filename:ur}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!ur)throw new Error("Font filename must be specified.");const hr=`${this.baseUrl}${ur}`;return this._fetchData(hr).catch(dr=>{throw new Error(`Unable to load font data at: ${hr}`)})}_fetchData(ur){(0,nr.unreachable)("Abstract method `_fetchData` called.")}}er.BaseStandardFontDataFactory=cr;class lr{constructor(){this.constructor===lr&&(0,nr.unreachable)("Cannot initialize BaseSVGFactory.")}create(ur,hr,dr=!1){if(ur<=0||hr<=0)throw new Error("Invalid SVG dimensions");const fr=this._createSVG("svg:svg");return fr.setAttribute("version","1.1"),dr||(fr.setAttribute("width",`${ur}px`),fr.setAttribute("height",`${hr}px`)),fr.setAttribute("preserveAspectRatio","none"),fr.setAttribute("viewBox",`0 0 ${ur} ${hr}`),fr}createElement(ur){if(typeof ur!="string")throw new Error("Invalid SVG element type");return this._createSVG(ur)}_createSVG(ur){(0,nr.unreachable)("Abstract method `_createSVG` called.")}}er.BaseSVGFactory=lr},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.MurmurHash3_64=void 0;var nr=rr(1);const ir=3285377520,sr=4294901760,ar=65535;class cr{constructor(or){this.h1=or?or&4294967295:ir,this.h2=or?or&4294967295:ir}update(or){let ur,hr;if(typeof or=="string"){ur=new Uint8Array(or.length*2),hr=0;for(let Tr=0,Rr=or.length;Tr<Rr;Tr++){const Nr=or.charCodeAt(Tr);Nr<=255?ur[hr++]=Nr:(ur[hr++]=Nr>>>8,ur[hr++]=Nr&255)}}else if((0,nr.isArrayBuffer)(or))ur=or.slice(),hr=ur.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const dr=hr>>2,fr=hr-dr*4,gr=new Uint32Array(ur.buffer,0,dr);let br=0,pr=0,mr=this.h1,yr=this.h2;const xr=3432918353,vr=461845907,_r=xr&ar,Er=vr&ar;for(let Tr=0;Tr<dr;Tr++)Tr&1?(br=gr[Tr],br=br*xr&sr|br*_r&ar,br=br<<15|br>>>17,br=br*vr&sr|br*Er&ar,mr^=br,mr=mr<<13|mr>>>19,mr=mr*5+3864292196):(pr=gr[Tr],pr=pr*xr&sr|pr*_r&ar,pr=pr<<15|pr>>>17,pr=pr*vr&sr|pr*Er&ar,yr^=pr,yr=yr<<13|yr>>>19,yr=yr*5+3864292196);switch(br=0,fr){case 3:br^=ur[dr*4+2]<<16;case 2:br^=ur[dr*4+1]<<8;case 1:br^=ur[dr*4],br=br*xr&sr|br*_r&ar,br=br<<15|br>>>17,br=br*vr&sr|br*Er&ar,dr&1?mr^=br:yr^=br}this.h1=mr,this.h2=yr}hexdigest(){let or=this.h1,ur=this.h2;return or^=ur>>>1,or=or*3981806797&sr|or*36045&ar,ur=ur*4283543511&sr|((ur<<16|or>>>16)*2950163797&sr)>>>16,or^=ur>>>1,or=or*444984403&sr|or*60499&ar,ur=ur*3301882366&sr|((ur<<16|or>>>16)*3120437893&sr)>>>16,or^=ur>>>1,(or>>>0).toString(16).padStart(8,"0")+(ur>>>0).toString(16).padStart(8,"0")}}er.MurmurHash3_64=cr},(tr,er,rr)=>{var ar;Object.defineProperty(er,"__esModule",{value:!0}),er.FontLoader=er.FontFaceObject=void 0;var nr=rr(1);class ir{constructor({ownerDocument:lr=globalThis.document,styleElement:or=null}){ps(this,ar,new Set);this._document=lr,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(lr){this.nativeFontFaces.add(lr),this._document.fonts.add(lr)}removeNativeFontFace(lr){this.nativeFontFaces.delete(lr),this._document.fonts.delete(lr)}insertRule(lr){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const or=this.styleElement.sheet;or.insertRule(lr,or.cssRules.length)}clear(){for(const lr of this.nativeFontFaces)this._document.fonts.delete(lr);this.nativeFontFaces.clear(),un(this,ar).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(lr){if(!(!lr||un(this,ar).has(lr.loadedName))){if((0,nr.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:or,src:ur,style:hr}=lr,dr=new FontFace(or,ur,hr);this.addNativeFontFace(dr);try{await dr.load(),un(this,ar).add(or)}catch{(0,nr.warn)(`Cannot load system font: ${lr.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(dr)}return}(0,nr.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(lr){if(lr.attached||lr.missingFile&&!lr.systemFontInfo)return;if(lr.attached=!0,lr.systemFontInfo){await this.loadSystemFont(lr.systemFontInfo);return}if(this.isFontLoadingAPISupported){const ur=lr.createNativeFontFace();if(ur){this.addNativeFontFace(ur);try{await ur.loaded}catch(hr){throw(0,nr.warn)(`Failed to load font '${ur.family}': '${hr}'.`),lr.disableFontFace=!0,hr}}return}const or=lr.createFontFaceRule();if(or){if(this.insertRule(or),this.isSyncFontLoadingSupported)return;await new Promise(ur=>{const hr=this._queueLoadingCallback(ur);this._prepareFontLoadEvent(lr,hr)})}}get isFontLoadingAPISupported(){var or;const lr=!!((or=this._document)!=null&&or.fonts);return(0,nr.shadow)(this,"isFontLoadingAPISupported",lr)}get isSyncFontLoadingSupported(){let lr=!1;return(nr.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(lr=!0),(0,nr.shadow)(this,"isSyncFontLoadingSupported",lr)}_queueLoadingCallback(lr){function or(){for((0,nr.assert)(!hr.done,"completeRequest() cannot be called twice."),hr.done=!0;ur.length>0&&ur[0].done;){const dr=ur.shift();setTimeout(dr.callback,0)}}const{loadingRequests:ur}=this,hr={done:!1,complete:or,callback:lr};return ur.push(hr),hr}get _loadTestFont(){const lr=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,nr.shadow)(this,"_loadTestFont",lr)}_prepareFontLoadEvent(lr,or){function ur(Ir,Or){return Ir.charCodeAt(Or)<<24|Ir.charCodeAt(Or+1)<<16|Ir.charCodeAt(Or+2)<<8|Ir.charCodeAt(Or+3)&255}function hr(Ir,Or,jr,Lr){const Cr=Ir.substring(0,Or),wr=Ir.substring(Or+jr);return Cr+Lr+wr}let dr,fr;const gr=this._document.createElement("canvas");gr.width=1,gr.height=1;const br=gr.getContext("2d");let pr=0;function mr(Ir,Or){if(++pr>30){(0,nr.warn)("Load test font never loaded."),Or();return}if(br.font="30px "+Ir,br.fillText(".",0,20),br.getImageData(0,0,1,1).data[3]>0){Or();return}setTimeout(mr.bind(null,Ir,Or))}const yr=`lt${Date.now()}${this.loadTestFontId++}`;let xr=this._loadTestFont;xr=hr(xr,976,yr.length,yr);const _r=16,Er=1482184792;let Tr=ur(xr,_r);for(dr=0,fr=yr.length-3;dr<fr;dr+=4)Tr=Tr-Er+ur(yr,dr)|0;dr<yr.length&&(Tr=Tr-Er+ur(yr+"XXX",dr)|0),xr=hr(xr,_r,4,(0,nr.string32)(Tr));const Rr=`url(data:font/opentype;base64,${btoa(xr)});`,Nr=`@font-face {font-family:"${yr}";src:${Rr}}`;this.insertRule(Nr);const Dr=this._document.createElement("div");Dr.style.visibility="hidden",Dr.style.width=Dr.style.height="10px",Dr.style.position="absolute",Dr.style.top=Dr.style.left="0px";for(const Ir of[lr.loadedName,yr]){const Or=this._document.createElement("span");Or.textContent="Hi",Or.style.fontFamily=Ir,Dr.append(Or)}this._document.body.append(Dr),mr(yr,()=>{Dr.remove(),or.complete()})}}ar=new WeakMap,er.FontLoader=ir;class sr{constructor(lr,{isEvalSupported:or=!0,disableFontFace:ur=!1,ignoreErrors:hr=!1,inspectFont:dr=null}){this.compiledGlyphs=Object.create(null);for(const fr in lr)this[fr]=lr[fr];this.isEvalSupported=or!==!1,this.disableFontFace=ur===!0,this.ignoreErrors=hr===!0,this._inspectFont=dr}createNativeFontFace(){var or;if(!this.data||this.disableFontFace)return null;let lr;if(!this.cssFontInfo)lr=new FontFace(this.loadedName,this.data,{});else{const ur={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(ur.style=`oblique ${this.cssFontInfo.italicAngle}deg`),lr=new FontFace(this.cssFontInfo.fontFamily,this.data,ur)}return(or=this._inspectFont)==null||or.call(this,this),lr}createFontFaceRule(){var hr;if(!this.data||this.disableFontFace)return null;const lr=(0,nr.bytesToString)(this.data),or=`url(data:${this.mimetype};base64,${btoa(lr)});`;let ur;if(!this.cssFontInfo)ur=`@font-face {font-family:"${this.loadedName}";src:${or}}`;else{let dr=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(dr+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),ur=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${dr}src:${or}}`}return(hr=this._inspectFont)==null||hr.call(this,this,or),ur}getPathGenerator(lr,or){if(this.compiledGlyphs[or]!==void 0)return this.compiledGlyphs[or];let ur;try{ur=lr.get(this.loadedName+"_path_"+or)}catch(hr){if(!this.ignoreErrors)throw hr;return(0,nr.warn)(`getPathGenerator - ignoring character: "${hr}".`),this.compiledGlyphs[or]=function(dr,fr){}}if(this.isEvalSupported&&nr.FeatureTest.isEvalSupported){const hr=[];for(const dr of ur){const fr=dr.args!==void 0?dr.args.join(","):"";hr.push("c.",dr.cmd,"(",fr,`);
`)}return this.compiledGlyphs[or]=new Function("c","size",hr.join(""))}return this.compiledGlyphs[or]=function(hr,dr){for(const fr of ur)fr.cmd==="scale"&&(fr.args=[dr,-dr]),hr[fr.cmd].apply(hr,fr.args)}}}er.FontFaceObject=sr},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.NodeStandardFontDataFactory=er.NodeFilterFactory=er.NodeCanvasFactory=er.NodeCMapReaderFactory=void 0;var nr=rr(7);rr(1);const ir=function(or){return new Promise((ur,hr)=>{require$$5.readFile(or,(fr,gr)=>{if(fr||!gr){hr(new Error(fr));return}ur(new Uint8Array(gr))})})};class sr extends nr.BaseFilterFactory{}er.NodeFilterFactory=sr;class ar extends nr.BaseCanvasFactory{_createCanvas(ur,hr){return require$$5.createCanvas(ur,hr)}}er.NodeCanvasFactory=ar;class cr extends nr.BaseCMapReaderFactory{_fetchData(ur,hr){return ir(ur).then(dr=>({cMapData:dr,compressionType:hr}))}}er.NodeCMapReaderFactory=cr;class lr extends nr.BaseStandardFontDataFactory{_fetchData(ur){return ir(ur)}}er.NodeStandardFontDataFactory=lr},(tr,er,rr)=>{var Ar,a0,o0;Object.defineProperty(er,"__esModule",{value:!0}),er.CanvasGraphics=void 0;var nr=rr(1),ir=rr(6),sr=rr(12),ar=rr(13);const cr=16,lr=100,or=4096,ur=15,hr=10,dr=1e3,fr=16;function gr($r,Br){if($r._removeMirroring)throw new Error("Context is already forwarding operations.");$r.__originalSave=$r.save,$r.__originalRestore=$r.restore,$r.__originalRotate=$r.rotate,$r.__originalScale=$r.scale,$r.__originalTranslate=$r.translate,$r.__originalTransform=$r.transform,$r.__originalSetTransform=$r.setTransform,$r.__originalResetTransform=$r.resetTransform,$r.__originalClip=$r.clip,$r.__originalMoveTo=$r.moveTo,$r.__originalLineTo=$r.lineTo,$r.__originalBezierCurveTo=$r.bezierCurveTo,$r.__originalRect=$r.rect,$r.__originalClosePath=$r.closePath,$r.__originalBeginPath=$r.beginPath,$r._removeMirroring=()=>{$r.save=$r.__originalSave,$r.restore=$r.__originalRestore,$r.rotate=$r.__originalRotate,$r.scale=$r.__originalScale,$r.translate=$r.__originalTranslate,$r.transform=$r.__originalTransform,$r.setTransform=$r.__originalSetTransform,$r.resetTransform=$r.__originalResetTransform,$r.clip=$r.__originalClip,$r.moveTo=$r.__originalMoveTo,$r.lineTo=$r.__originalLineTo,$r.bezierCurveTo=$r.__originalBezierCurveTo,$r.rect=$r.__originalRect,$r.closePath=$r.__originalClosePath,$r.beginPath=$r.__originalBeginPath,delete $r._removeMirroring},$r.save=function(){Br.save(),this.__originalSave()},$r.restore=function(){Br.restore(),this.__originalRestore()},$r.translate=function(Gr,Vr){Br.translate(Gr,Vr),this.__originalTranslate(Gr,Vr)},$r.scale=function(Gr,Vr){Br.scale(Gr,Vr),this.__originalScale(Gr,Vr)},$r.transform=function(Gr,Vr,Xr,Ur,Fr,Kr){Br.transform(Gr,Vr,Xr,Ur,Fr,Kr),this.__originalTransform(Gr,Vr,Xr,Ur,Fr,Kr)},$r.setTransform=function(Gr,Vr,Xr,Ur,Fr,Kr){Br.setTransform(Gr,Vr,Xr,Ur,Fr,Kr),this.__originalSetTransform(Gr,Vr,Xr,Ur,Fr,Kr)},$r.resetTransform=function(){Br.resetTransform(),this.__originalResetTransform()},$r.rotate=function(Gr){Br.rotate(Gr),this.__originalRotate(Gr)},$r.clip=function(Gr){Br.clip(Gr),this.__originalClip(Gr)},$r.moveTo=function(zr,Gr){Br.moveTo(zr,Gr),this.__originalMoveTo(zr,Gr)},$r.lineTo=function(zr,Gr){Br.lineTo(zr,Gr),this.__originalLineTo(zr,Gr)},$r.bezierCurveTo=function(zr,Gr,Vr,Xr,Ur,Fr){Br.bezierCurveTo(zr,Gr,Vr,Xr,Ur,Fr),this.__originalBezierCurveTo(zr,Gr,Vr,Xr,Ur,Fr)},$r.rect=function(zr,Gr,Vr,Xr){Br.rect(zr,Gr,Vr,Xr),this.__originalRect(zr,Gr,Vr,Xr)},$r.closePath=function(){Br.closePath(),this.__originalClosePath()},$r.beginPath=function(){Br.beginPath(),this.__originalBeginPath()}}class br{constructor(Br){this.canvasFactory=Br,this.cache=Object.create(null)}getCanvas(Br,zr,Gr){let Vr;return this.cache[Br]!==void 0?(Vr=this.cache[Br],this.canvasFactory.reset(Vr,zr,Gr)):(Vr=this.canvasFactory.create(zr,Gr),this.cache[Br]=Vr),Vr}delete(Br){delete this.cache[Br]}clear(){for(const Br in this.cache){const zr=this.cache[Br];this.canvasFactory.destroy(zr),delete this.cache[Br]}}}function pr($r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr){const[Jr,tn,an,dn,en,rn]=(0,ir.getCurrentTransform)($r);if(tn===0&&an===0){const fn=Ur*Jr+en,pn=Math.round(fn),gn=Fr*dn+rn,Pn=Math.round(gn),In=(Ur+Kr)*Jr+en,En=Math.abs(Math.round(In)-pn)||1,zn=(Fr+Zr)*dn+rn,yn=Math.abs(Math.round(zn)-Pn)||1;return $r.setTransform(Math.sign(Jr),0,0,Math.sign(dn),pn,Pn),$r.drawImage(Br,zr,Gr,Vr,Xr,0,0,En,yn),$r.setTransform(Jr,tn,an,dn,en,rn),[En,yn]}if(Jr===0&&dn===0){const fn=Fr*an+en,pn=Math.round(fn),gn=Ur*tn+rn,Pn=Math.round(gn),In=(Fr+Zr)*an+en,En=Math.abs(Math.round(In)-pn)||1,zn=(Ur+Kr)*tn+rn,yn=Math.abs(Math.round(zn)-Pn)||1;return $r.setTransform(0,Math.sign(tn),Math.sign(an),0,pn,Pn),$r.drawImage(Br,zr,Gr,Vr,Xr,0,0,yn,En),$r.setTransform(Jr,tn,an,dn,en,rn),[yn,En]}$r.drawImage(Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr);const sn=Math.hypot(Jr,tn),on=Math.hypot(an,dn);return[sn*Kr,on*Zr]}function mr($r){const{width:Br,height:zr}=$r;if(Br>dr||zr>dr)return null;const Gr=1e3,Vr=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Xr=Br+1;let Ur=new Uint8Array(Xr*(zr+1)),Fr,Kr,Zr;const Jr=Br+7&-8;let tn=new Uint8Array(Jr*zr),an=0;for(const on of $r.data){let fn=128;for(;fn>0;)tn[an++]=on&fn?0:255,fn>>=1}let dn=0;for(an=0,tn[an]!==0&&(Ur[0]=1,++dn),Kr=1;Kr<Br;Kr++)tn[an]!==tn[an+1]&&(Ur[Kr]=tn[an]?2:1,++dn),an++;for(tn[an]!==0&&(Ur[Kr]=2,++dn),Fr=1;Fr<zr;Fr++){an=Fr*Jr,Zr=Fr*Xr,tn[an-Jr]!==tn[an]&&(Ur[Zr]=tn[an]?1:8,++dn);let on=(tn[an]?4:0)+(tn[an-Jr]?8:0);for(Kr=1;Kr<Br;Kr++)on=(on>>2)+(tn[an+1]?4:0)+(tn[an-Jr+1]?8:0),Vr[on]&&(Ur[Zr+Kr]=Vr[on],++dn),an++;if(tn[an-Jr]!==tn[an]&&(Ur[Zr+Kr]=tn[an]?2:4,++dn),dn>Gr)return null}for(an=Jr*(zr-1),Zr=Fr*Xr,tn[an]!==0&&(Ur[Zr]=8,++dn),Kr=1;Kr<Br;Kr++)tn[an]!==tn[an+1]&&(Ur[Zr+Kr]=tn[an]?4:8,++dn),an++;if(tn[an]!==0&&(Ur[Zr+Kr]=4,++dn),dn>Gr)return null;const en=new Int32Array([0,Xr,-1,0,-Xr,0,0,0,1]),rn=new Path2D;for(Fr=0;dn&&Fr<=zr;Fr++){let on=Fr*Xr;const fn=on+Br;for(;on<fn&&!Ur[on];)on++;if(on===fn)continue;rn.moveTo(on%Xr,Fr);const pn=on;let gn=Ur[on];do{const Pn=en[gn];do on+=Pn;while(!Ur[on]);const In=Ur[on];In!==5&&In!==10?(gn=In,Ur[on]=0):(gn=In&51*gn>>4,Ur[on]&=gn>>2|gn<<2),rn.lineTo(on%Xr,on/Xr|0),Ur[on]||--dn}while(pn!==on);--Fr}return tn=null,Ur=null,function(on){on.save(),on.scale(1/Br,-1/zr),on.translate(0,-zr),on.fill(rn),on.beginPath(),on.restore()}}class yr{constructor(Br,zr){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=nr.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=nr.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=nr.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Br,zr])}clone(){const Br=Object.create(this);return Br.clipBox=this.clipBox.slice(),Br}setCurrentPoint(Br,zr){this.x=Br,this.y=zr}updatePathMinMax(Br,zr,Gr){[zr,Gr]=nr.Util.applyTransform([zr,Gr],Br),this.minX=Math.min(this.minX,zr),this.minY=Math.min(this.minY,Gr),this.maxX=Math.max(this.maxX,zr),this.maxY=Math.max(this.maxY,Gr)}updateRectMinMax(Br,zr){const Gr=nr.Util.applyTransform(zr,Br),Vr=nr.Util.applyTransform(zr.slice(2),Br);this.minX=Math.min(this.minX,Gr[0],Vr[0]),this.minY=Math.min(this.minY,Gr[1],Vr[1]),this.maxX=Math.max(this.maxX,Gr[0],Vr[0]),this.maxY=Math.max(this.maxY,Gr[1],Vr[1])}updateScalingPathMinMax(Br,zr){nr.Util.scaleMinMax(Br,zr),this.minX=Math.min(this.minX,zr[0]),this.maxX=Math.max(this.maxX,zr[1]),this.minY=Math.min(this.minY,zr[2]),this.maxY=Math.max(this.maxY,zr[3])}updateCurvePathMinMax(Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr,Jr){const tn=nr.Util.bezierBoundingBox(zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr);if(Jr){Jr[0]=Math.min(Jr[0],tn[0],tn[2]),Jr[1]=Math.max(Jr[1],tn[0],tn[2]),Jr[2]=Math.min(Jr[2],tn[1],tn[3]),Jr[3]=Math.max(Jr[3],tn[1],tn[3]);return}this.updateRectMinMax(Br,tn)}getPathBoundingBox(Br=sr.PathType.FILL,zr=null){const Gr=[this.minX,this.minY,this.maxX,this.maxY];if(Br===sr.PathType.STROKE){zr||(0,nr.unreachable)("Stroke bounding box must include transform.");const Vr=nr.Util.singularValueDecompose2dScale(zr),Xr=Vr[0]*this.lineWidth/2,Ur=Vr[1]*this.lineWidth/2;Gr[0]-=Xr,Gr[1]-=Ur,Gr[2]+=Xr,Gr[3]+=Ur}return Gr}updateClipFromPath(){const Br=nr.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Br||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Br){this.clipBox=Br,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Br=sr.PathType.FILL,zr=null){return nr.Util.intersect(this.clipBox,this.getPathBoundingBox(Br,zr))}}function xr($r,Br){if(typeof ImageData<"u"&&Br instanceof ImageData){$r.putImageData(Br,0,0);return}const zr=Br.height,Gr=Br.width,Vr=zr%fr,Xr=(zr-Vr)/fr,Ur=Vr===0?Xr:Xr+1,Fr=$r.createImageData(Gr,fr);let Kr=0,Zr;const Jr=Br.data,tn=Fr.data;let an,dn,en,rn;if(Br.kind===nr.ImageKind.GRAYSCALE_1BPP){const sn=Jr.byteLength,on=new Uint32Array(tn.buffer,0,tn.byteLength>>2),fn=on.length,pn=Gr+7>>3,gn=4294967295,Pn=nr.FeatureTest.isLittleEndian?4278190080:255;for(an=0;an<Ur;an++){for(en=an<Xr?fr:Vr,Zr=0,dn=0;dn<en;dn++){const In=sn-Kr;let En=0;const zn=In>pn?Gr:In*8-7,yn=zn&-8;let Vn=0,Kn=0;for(;En<yn;En+=8)Kn=Jr[Kr++],on[Zr++]=Kn&128?gn:Pn,on[Zr++]=Kn&64?gn:Pn,on[Zr++]=Kn&32?gn:Pn,on[Zr++]=Kn&16?gn:Pn,on[Zr++]=Kn&8?gn:Pn,on[Zr++]=Kn&4?gn:Pn,on[Zr++]=Kn&2?gn:Pn,on[Zr++]=Kn&1?gn:Pn;for(;En<zn;En++)Vn===0&&(Kn=Jr[Kr++],Vn=128),on[Zr++]=Kn&Vn?gn:Pn,Vn>>=1}for(;Zr<fn;)on[Zr++]=0;$r.putImageData(Fr,0,an*fr)}}else if(Br.kind===nr.ImageKind.RGBA_32BPP){for(dn=0,rn=Gr*fr*4,an=0;an<Xr;an++)tn.set(Jr.subarray(Kr,Kr+rn)),Kr+=rn,$r.putImageData(Fr,0,dn),dn+=fr;an<Ur&&(rn=Gr*Vr*4,tn.set(Jr.subarray(Kr,Kr+rn)),$r.putImageData(Fr,0,dn))}else if(Br.kind===nr.ImageKind.RGB_24BPP)for(en=fr,rn=Gr*en,an=0;an<Ur;an++){for(an>=Xr&&(en=Vr,rn=Gr*en),Zr=0,dn=rn;dn--;)tn[Zr++]=Jr[Kr++],tn[Zr++]=Jr[Kr++],tn[Zr++]=Jr[Kr++],tn[Zr++]=255;$r.putImageData(Fr,0,an*fr)}else throw new Error(`bad image kind: ${Br.kind}`)}function vr($r,Br){if(Br.bitmap){$r.drawImage(Br.bitmap,0,0);return}const zr=Br.height,Gr=Br.width,Vr=zr%fr,Xr=(zr-Vr)/fr,Ur=Vr===0?Xr:Xr+1,Fr=$r.createImageData(Gr,fr);let Kr=0;const Zr=Br.data,Jr=Fr.data;for(let tn=0;tn<Ur;tn++){const an=tn<Xr?fr:Vr;({srcPos:Kr}=(0,ar.convertBlackAndWhiteToRGBA)({src:Zr,srcPos:Kr,dest:Jr,width:Gr,height:an,nonBlackColor:0})),$r.putImageData(Fr,0,tn*fr)}}function _r($r,Br){const zr=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Gr of zr)$r[Gr]!==void 0&&(Br[Gr]=$r[Gr]);$r.setLineDash!==void 0&&(Br.setLineDash($r.getLineDash()),Br.lineDashOffset=$r.lineDashOffset)}function Er($r){if($r.strokeStyle=$r.fillStyle="#000000",$r.fillRule="nonzero",$r.globalAlpha=1,$r.lineWidth=1,$r.lineCap="butt",$r.lineJoin="miter",$r.miterLimit=10,$r.globalCompositeOperation="source-over",$r.font="10px sans-serif",$r.setLineDash!==void 0&&($r.setLineDash([]),$r.lineDashOffset=0),!nr.isNodeJS){const{filter:Br}=$r;Br!=="none"&&Br!==""&&($r.filter="none")}}function Tr($r,Br,zr,Gr){const Vr=$r.length;for(let Xr=3;Xr<Vr;Xr+=4){const Ur=$r[Xr];if(Ur===0)$r[Xr-3]=Br,$r[Xr-2]=zr,$r[Xr-1]=Gr;else if(Ur<255){const Fr=255-Ur;$r[Xr-3]=$r[Xr-3]*Ur+Br*Fr>>8,$r[Xr-2]=$r[Xr-2]*Ur+zr*Fr>>8,$r[Xr-1]=$r[Xr-1]*Ur+Gr*Fr>>8}}}function Rr($r,Br,zr){const Gr=$r.length,Vr=1/255;for(let Xr=3;Xr<Gr;Xr+=4){const Ur=zr?zr[$r[Xr]]:$r[Xr];Br[Xr]=Br[Xr]*Ur*Vr|0}}function Nr($r,Br,zr){const Gr=$r.length;for(let Vr=3;Vr<Gr;Vr+=4){const Xr=$r[Vr-3]*77+$r[Vr-2]*152+$r[Vr-1]*28;Br[Vr]=zr?Br[Vr]*zr[Xr>>8]>>8:Br[Vr]*Xr>>16}}function Dr($r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr,Jr){const tn=!!Xr,an=tn?Xr[0]:0,dn=tn?Xr[1]:0,en=tn?Xr[2]:0,rn=Vr==="Luminosity"?Nr:Rr,on=Math.min(Gr,Math.ceil(1048576/zr));for(let fn=0;fn<Gr;fn+=on){const pn=Math.min(on,Gr-fn),gn=$r.getImageData(Fr-Zr,fn+(Kr-Jr),zr,pn),Pn=Br.getImageData(Fr,fn+Kr,zr,pn);tn&&Tr(gn.data,an,dn,en),rn(gn.data,Pn.data,Ur),Br.putImageData(Pn,Fr,fn+Kr)}}function Ir($r,Br,zr,Gr){const Vr=Gr[0],Xr=Gr[1],Ur=Gr[2]-Vr,Fr=Gr[3]-Xr;Ur===0||Fr===0||(Dr(Br.context,zr,Ur,Fr,Br.subtype,Br.backdrop,Br.transferMap,Vr,Xr,Br.offsetX,Br.offsetY),$r.save(),$r.globalAlpha=1,$r.globalCompositeOperation="source-over",$r.setTransform(1,0,0,1,0,0),$r.drawImage(zr.canvas,0,0),$r.restore())}function Or($r,Br){const zr=nr.Util.singularValueDecompose2dScale($r);zr[0]=Math.fround(zr[0]),zr[1]=Math.fround(zr[1]);const Gr=Math.fround((globalThis.devicePixelRatio||1)*ir.PixelsPerInch.PDF_TO_CSS_UNITS);return Br!==void 0?Br:zr[0]<=Gr||zr[1]<=Gr}const jr=["butt","round","square"],Lr=["miter","round","bevel"],Cr={},wr={},qr=class qr{constructor(Br,zr,Gr,Vr,Xr,{optionalContentConfig:Ur,markedContentStack:Fr=null},Kr,Zr){ps(this,Ar);this.ctx=Br,this.current=new yr(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=zr,this.objs=Gr,this.canvasFactory=Vr,this.filterFactory=Xr,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Fr||[],this.optionalContentConfig=Ur,this.cachedCanvases=new br(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Kr,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Zr,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Br,zr=null){return typeof Br=="string"?Br.startsWith("g_")?this.commonObjs.get(Br):this.objs.get(Br):zr}beginDrawing({transform:Br,viewport:zr,transparency:Gr=!1,background:Vr=null}){const Xr=this.ctx.canvas.width,Ur=this.ctx.canvas.height,Fr=this.ctx.fillStyle;if(this.ctx.fillStyle=Vr||"#ffffff",this.ctx.fillRect(0,0,Xr,Ur),this.ctx.fillStyle=Fr,Gr){const Kr=this.cachedCanvases.getCanvas("transparent",Xr,Ur);this.compositeCtx=this.ctx,this.transparentCanvas=Kr.canvas,this.ctx=Kr.context,this.ctx.save(),this.ctx.transform(...(0,ir.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Er(this.ctx),Br&&(this.ctx.transform(...Br),this.outputScaleX=Br[0],this.outputScaleY=Br[0]),this.ctx.transform(...zr.transform),this.viewportScale=zr.scale,this.baseTransform=(0,ir.getCurrentTransform)(this.ctx)}executeOperatorList(Br,zr,Gr,Vr){const Xr=Br.argsArray,Ur=Br.fnArray;let Fr=zr||0;const Kr=Xr.length;if(Kr===Fr)return Fr;const Zr=Kr-Fr>hr&&typeof Gr=="function",Jr=Zr?Date.now()+ur:0;let tn=0;const an=this.commonObjs,dn=this.objs;let en;for(;;){if(Vr!==void 0&&Fr===Vr.nextBreakPoint)return Vr.breakIt(Fr,Gr),Fr;if(en=Ur[Fr],en!==nr.OPS.dependency)this[en].apply(this,Xr[Fr]);else for(const rn of Xr[Fr]){const sn=rn.startsWith("g_")?an:dn;if(!sn.has(rn))return sn.get(rn,Gr),Fr}if(Fr++,Fr===Kr)return Fr;if(Zr&&++tn>hr){if(Date.now()>Jr)return Gr(),Fr;tn=0}}}endDrawing(){rs(this,Ar,a0).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Br of this._cachedBitmapsMap.values()){for(const zr of Br.values())typeof HTMLCanvasElement<"u"&&zr instanceof HTMLCanvasElement&&(zr.width=zr.height=0);Br.clear()}this._cachedBitmapsMap.clear(),rs(this,Ar,o0).call(this)}_scaleImage(Br,zr){const Gr=Br.width,Vr=Br.height;let Xr=Math.max(Math.hypot(zr[0],zr[1]),1),Ur=Math.max(Math.hypot(zr[2],zr[3]),1),Fr=Gr,Kr=Vr,Zr="prescale1",Jr,tn;for(;Xr>2&&Fr>1||Ur>2&&Kr>1;){let an=Fr,dn=Kr;Xr>2&&Fr>1&&(an=Fr>=16384?Math.floor(Fr/2)-1||1:Math.ceil(Fr/2),Xr/=Fr/an),Ur>2&&Kr>1&&(dn=Kr>=16384?Math.floor(Kr/2)-1||1:Math.ceil(Kr)/2,Ur/=Kr/dn),Jr=this.cachedCanvases.getCanvas(Zr,an,dn),tn=Jr.context,tn.clearRect(0,0,an,dn),tn.drawImage(Br,0,0,Fr,Kr,0,0,an,dn),Br=Jr.canvas,Fr=an,Kr=dn,Zr=Zr==="prescale1"?"prescale2":"prescale1"}return{img:Br,paintWidth:Fr,paintHeight:Kr}}_createMaskCanvas(Br){const zr=this.ctx,{width:Gr,height:Vr}=Br,Xr=this.current.fillColor,Ur=this.current.patternFill,Fr=(0,ir.getCurrentTransform)(zr);let Kr,Zr,Jr,tn;if((Br.bitmap||Br.data)&&Br.count>1){const En=Br.bitmap||Br.data.buffer;Zr=JSON.stringify(Ur?Fr:[Fr.slice(0,4),Xr]),Kr=this._cachedBitmapsMap.get(En),Kr||(Kr=new Map,this._cachedBitmapsMap.set(En,Kr));const zn=Kr.get(Zr);if(zn&&!Ur){const yn=Math.round(Math.min(Fr[0],Fr[2])+Fr[4]),Vn=Math.round(Math.min(Fr[1],Fr[3])+Fr[5]);return{canvas:zn,offsetX:yn,offsetY:Vn}}Jr=zn}Jr||(tn=this.cachedCanvases.getCanvas("maskCanvas",Gr,Vr),vr(tn.context,Br));let an=nr.Util.transform(Fr,[1/Gr,0,0,-1/Vr,0,0]);an=nr.Util.transform(an,[1,0,0,1,0,-Vr]);const dn=nr.Util.applyTransform([0,0],an),en=nr.Util.applyTransform([Gr,Vr],an),rn=nr.Util.normalizeRect([dn[0],dn[1],en[0],en[1]]),sn=Math.round(rn[2]-rn[0])||1,on=Math.round(rn[3]-rn[1])||1,fn=this.cachedCanvases.getCanvas("fillCanvas",sn,on),pn=fn.context,gn=Math.min(dn[0],en[0]),Pn=Math.min(dn[1],en[1]);pn.translate(-gn,-Pn),pn.transform(...an),Jr||(Jr=this._scaleImage(tn.canvas,(0,ir.getCurrentTransformInverse)(pn)),Jr=Jr.img,Kr&&Ur&&Kr.set(Zr,Jr)),pn.imageSmoothingEnabled=Or((0,ir.getCurrentTransform)(pn),Br.interpolate),pr(pn,Jr,0,0,Jr.width,Jr.height,0,0,Gr,Vr),pn.globalCompositeOperation="source-in";const In=nr.Util.transform((0,ir.getCurrentTransformInverse)(pn),[1,0,0,1,-gn,-Pn]);return pn.fillStyle=Ur?Xr.getPattern(zr,this,In,sr.PathType.FILL):Xr,pn.fillRect(0,0,Gr,Vr),Kr&&!Ur&&(this.cachedCanvases.delete("fillCanvas"),Kr.set(Zr,fn.canvas)),{canvas:fn.canvas,offsetX:Math.round(gn),offsetY:Math.round(Pn)}}setLineWidth(Br){Br!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Br,this.ctx.lineWidth=Br}setLineCap(Br){this.ctx.lineCap=jr[Br]}setLineJoin(Br){this.ctx.lineJoin=Lr[Br]}setMiterLimit(Br){this.ctx.miterLimit=Br}setDash(Br,zr){const Gr=this.ctx;Gr.setLineDash!==void 0&&(Gr.setLineDash(Br),Gr.lineDashOffset=zr)}setRenderingIntent(Br){}setFlatness(Br){}setGState(Br){for(const[zr,Gr]of Br)switch(zr){case"LW":this.setLineWidth(Gr);break;case"LC":this.setLineCap(Gr);break;case"LJ":this.setLineJoin(Gr);break;case"ML":this.setMiterLimit(Gr);break;case"D":this.setDash(Gr[0],Gr[1]);break;case"RI":this.setRenderingIntent(Gr);break;case"FL":this.setFlatness(Gr);break;case"Font":this.setFont(Gr[0],Gr[1]);break;case"CA":this.current.strokeAlpha=Gr;break;case"ca":this.current.fillAlpha=Gr,this.ctx.globalAlpha=Gr;break;case"BM":this.ctx.globalCompositeOperation=Gr;break;case"SMask":this.current.activeSMask=Gr?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Gr);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Br=this.inSMaskMode;this.current.activeSMask&&!Br?this.beginSMaskMode():!this.current.activeSMask&&Br&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Br=this.ctx.canvas.width,zr=this.ctx.canvas.height,Gr="smaskGroupAt"+this.groupLevel,Vr=this.cachedCanvases.getCanvas(Gr,Br,zr);this.suspendedCtx=this.ctx,this.ctx=Vr.context;const Xr=this.ctx;Xr.setTransform(...(0,ir.getCurrentTransform)(this.suspendedCtx)),_r(this.suspendedCtx,Xr),gr(Xr,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_r(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Br){if(!this.current.activeSMask)return;Br?(Br[0]=Math.floor(Br[0]),Br[1]=Math.floor(Br[1]),Br[2]=Math.ceil(Br[2]),Br[3]=Math.ceil(Br[3])):Br=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const zr=this.current.activeSMask,Gr=this.suspendedCtx;Ir(Gr,zr,this.ctx,Br),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(_r(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Br=this.current;this.stateStack.push(Br),this.current=Br.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_r(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Br,zr,Gr,Vr,Xr,Ur){this.ctx.transform(Br,zr,Gr,Vr,Xr,Ur),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Br,zr,Gr){const Vr=this.ctx,Xr=this.current;let Ur=Xr.x,Fr=Xr.y,Kr,Zr;const Jr=(0,ir.getCurrentTransform)(Vr),tn=Jr[0]===0&&Jr[3]===0||Jr[1]===0&&Jr[2]===0,an=tn?Gr.slice(0):null;for(let dn=0,en=0,rn=Br.length;dn<rn;dn++)switch(Br[dn]|0){case nr.OPS.rectangle:Ur=zr[en++],Fr=zr[en++];const sn=zr[en++],on=zr[en++],fn=Ur+sn,pn=Fr+on;Vr.moveTo(Ur,Fr),sn===0||on===0?Vr.lineTo(fn,pn):(Vr.lineTo(fn,Fr),Vr.lineTo(fn,pn),Vr.lineTo(Ur,pn)),tn||Xr.updateRectMinMax(Jr,[Ur,Fr,fn,pn]),Vr.closePath();break;case nr.OPS.moveTo:Ur=zr[en++],Fr=zr[en++],Vr.moveTo(Ur,Fr),tn||Xr.updatePathMinMax(Jr,Ur,Fr);break;case nr.OPS.lineTo:Ur=zr[en++],Fr=zr[en++],Vr.lineTo(Ur,Fr),tn||Xr.updatePathMinMax(Jr,Ur,Fr);break;case nr.OPS.curveTo:Kr=Ur,Zr=Fr,Ur=zr[en+4],Fr=zr[en+5],Vr.bezierCurveTo(zr[en],zr[en+1],zr[en+2],zr[en+3],Ur,Fr),Xr.updateCurvePathMinMax(Jr,Kr,Zr,zr[en],zr[en+1],zr[en+2],zr[en+3],Ur,Fr,an),en+=6;break;case nr.OPS.curveTo2:Kr=Ur,Zr=Fr,Vr.bezierCurveTo(Ur,Fr,zr[en],zr[en+1],zr[en+2],zr[en+3]),Xr.updateCurvePathMinMax(Jr,Kr,Zr,Ur,Fr,zr[en],zr[en+1],zr[en+2],zr[en+3],an),Ur=zr[en+2],Fr=zr[en+3],en+=4;break;case nr.OPS.curveTo3:Kr=Ur,Zr=Fr,Ur=zr[en+2],Fr=zr[en+3],Vr.bezierCurveTo(zr[en],zr[en+1],Ur,Fr,Ur,Fr),Xr.updateCurvePathMinMax(Jr,Kr,Zr,zr[en],zr[en+1],Ur,Fr,Ur,Fr,an),en+=4;break;case nr.OPS.closePath:Vr.closePath();break}tn&&Xr.updateScalingPathMinMax(Jr,an),Xr.setCurrentPoint(Ur,Fr)}closePath(){this.ctx.closePath()}stroke(Br=!0){const zr=this.ctx,Gr=this.current.strokeColor;zr.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Gr=="object"&&(Gr!=null&&Gr.getPattern)?(zr.save(),zr.strokeStyle=Gr.getPattern(zr,this,(0,ir.getCurrentTransformInverse)(zr),sr.PathType.STROKE),this.rescaleAndStroke(!1),zr.restore()):this.rescaleAndStroke(!0)),Br&&this.consumePath(this.current.getClippedPathBoundingBox()),zr.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Br=!0){const zr=this.ctx,Gr=this.current.fillColor,Vr=this.current.patternFill;let Xr=!1;Vr&&(zr.save(),zr.fillStyle=Gr.getPattern(zr,this,(0,ir.getCurrentTransformInverse)(zr),sr.PathType.FILL),Xr=!0);const Ur=this.current.getClippedPathBoundingBox();this.contentVisible&&Ur!==null&&(this.pendingEOFill?(zr.fill("evenodd"),this.pendingEOFill=!1):zr.fill()),Xr&&zr.restore(),Br&&this.consumePath(Ur)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Cr}eoClip(){this.pendingClip=wr}beginText(){this.current.textMatrix=nr.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Br=this.pendingTextPaths,zr=this.ctx;if(Br===void 0){zr.beginPath();return}zr.save(),zr.beginPath();for(const Gr of Br)zr.setTransform(...Gr.transform),zr.translate(Gr.x,Gr.y),Gr.addToPath(zr,Gr.fontSize);zr.restore(),zr.clip(),zr.beginPath(),delete this.pendingTextPaths}setCharSpacing(Br){this.current.charSpacing=Br}setWordSpacing(Br){this.current.wordSpacing=Br}setHScale(Br){this.current.textHScale=Br/100}setLeading(Br){this.current.leading=-Br}setFont(Br,zr){var Jr;const Gr=this.commonObjs.get(Br),Vr=this.current;if(!Gr)throw new Error(`Can't find font for ${Br}`);if(Vr.fontMatrix=Gr.fontMatrix||nr.FONT_IDENTITY_MATRIX,(Vr.fontMatrix[0]===0||Vr.fontMatrix[3]===0)&&(0,nr.warn)("Invalid font matrix for font "+Br),zr<0?(zr=-zr,Vr.fontDirection=-1):Vr.fontDirection=1,this.current.font=Gr,this.current.fontSize=zr,Gr.isType3Font)return;const Xr=Gr.loadedName||"sans-serif",Ur=((Jr=Gr.systemFontInfo)==null?void 0:Jr.css)||`"${Xr}", ${Gr.fallbackName}`;let Fr="normal";Gr.black?Fr="900":Gr.bold&&(Fr="bold");const Kr=Gr.italic?"italic":"normal";let Zr=zr;zr<cr?Zr=cr:zr>lr&&(Zr=lr),this.current.fontSizeScale=zr/Zr,this.ctx.font=`${Kr} ${Fr} ${Zr}px ${Ur}`}setTextRenderingMode(Br){this.current.textRenderingMode=Br}setTextRise(Br){this.current.textRise=Br}moveText(Br,zr){this.current.x=this.current.lineX+=Br,this.current.y=this.current.lineY+=zr}setLeadingMoveText(Br,zr){this.setLeading(-zr),this.moveText(Br,zr)}setTextMatrix(Br,zr,Gr,Vr,Xr,Ur){this.current.textMatrix=[Br,zr,Gr,Vr,Xr,Ur],this.current.textMatrixScale=Math.hypot(Br,zr),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Br,zr,Gr,Vr){const Xr=this.ctx,Ur=this.current,Fr=Ur.font,Kr=Ur.textRenderingMode,Zr=Ur.fontSize/Ur.fontSizeScale,Jr=Kr&nr.TextRenderingMode.FILL_STROKE_MASK,tn=!!(Kr&nr.TextRenderingMode.ADD_TO_PATH_FLAG),an=Ur.patternFill&&!Fr.missingFile;let dn;(Fr.disableFontFace||tn||an)&&(dn=Fr.getPathGenerator(this.commonObjs,Br)),Fr.disableFontFace||an?(Xr.save(),Xr.translate(zr,Gr),Xr.beginPath(),dn(Xr,Zr),Vr&&Xr.setTransform(...Vr),(Jr===nr.TextRenderingMode.FILL||Jr===nr.TextRenderingMode.FILL_STROKE)&&Xr.fill(),(Jr===nr.TextRenderingMode.STROKE||Jr===nr.TextRenderingMode.FILL_STROKE)&&Xr.stroke(),Xr.restore()):((Jr===nr.TextRenderingMode.FILL||Jr===nr.TextRenderingMode.FILL_STROKE)&&Xr.fillText(Br,zr,Gr),(Jr===nr.TextRenderingMode.STROKE||Jr===nr.TextRenderingMode.FILL_STROKE)&&Xr.strokeText(Br,zr,Gr)),tn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,ir.getCurrentTransform)(Xr),x:zr,y:Gr,fontSize:Zr,addToPath:dn})}get isFontSubpixelAAEnabled(){const{context:Br}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Br.scale(1.5,1),Br.fillText("I",0,10);const zr=Br.getImageData(0,0,10,10).data;let Gr=!1;for(let Vr=3;Vr<zr.length;Vr+=4)if(zr[Vr]>0&&zr[Vr]<255){Gr=!0;break}return(0,nr.shadow)(this,"isFontSubpixelAAEnabled",Gr)}showText(Br){const zr=this.current,Gr=zr.font;if(Gr.isType3Font)return this.showType3Text(Br);const Vr=zr.fontSize;if(Vr===0)return;const Xr=this.ctx,Ur=zr.fontSizeScale,Fr=zr.charSpacing,Kr=zr.wordSpacing,Zr=zr.fontDirection,Jr=zr.textHScale*Zr,tn=Br.length,an=Gr.vertical,dn=an?1:-1,en=Gr.defaultVMetrics,rn=Vr*zr.fontMatrix[0],sn=zr.textRenderingMode===nr.TextRenderingMode.FILL&&!Gr.disableFontFace&&!zr.patternFill;Xr.save(),Xr.transform(...zr.textMatrix),Xr.translate(zr.x,zr.y+zr.textRise),Zr>0?Xr.scale(Jr,-1):Xr.scale(Jr,1);let on;if(zr.patternFill){Xr.save();const In=zr.fillColor.getPattern(Xr,this,(0,ir.getCurrentTransformInverse)(Xr),sr.PathType.FILL);on=(0,ir.getCurrentTransform)(Xr),Xr.restore(),Xr.fillStyle=In}let fn=zr.lineWidth;const pn=zr.textMatrixScale;if(pn===0||fn===0){const In=zr.textRenderingMode&nr.TextRenderingMode.FILL_STROKE_MASK;(In===nr.TextRenderingMode.STROKE||In===nr.TextRenderingMode.FILL_STROKE)&&(fn=this.getSinglePixelWidth())}else fn/=pn;if(Ur!==1&&(Xr.scale(Ur,Ur),fn/=Ur),Xr.lineWidth=fn,Gr.isInvalidPDFjsFont){const In=[];let En=0;for(const zn of Br)In.push(zn.unicode),En+=zn.width;Xr.fillText(In.join(""),0,0),zr.x+=En*rn*Jr,Xr.restore(),this.compose();return}let gn=0,Pn;for(Pn=0;Pn<tn;++Pn){const In=Br[Pn];if(typeof In=="number"){gn+=dn*In*Vr/1e3;continue}let En=!1;const zn=(In.isSpace?Kr:0)+Fr,yn=In.fontChar,Vn=In.accent;let Kn,es,Xn=In.width;if(an){const fs=In.vmetric||en,os=-(In.vmetric?fs[1]:Xn*.5)*rn,Hn=fs[2]*rn;Xn=fs?-fs[0]:Xn,Kn=os/Ur,es=(gn+Hn)/Ur}else Kn=gn/Ur,es=0;if(Gr.remeasure&&Xn>0){const fs=Xr.measureText(yn).width*1e3/Vr*Ur;if(Xn<fs&&this.isFontSubpixelAAEnabled){const os=Xn/fs;En=!0,Xr.save(),Xr.scale(os,1),Kn/=os}else Xn!==fs&&(Kn+=(Xn-fs)/2e3*Vr/Ur)}if(this.contentVisible&&(In.isInFont||Gr.missingFile)){if(sn&&!Vn)Xr.fillText(yn,Kn,es);else if(this.paintChar(yn,Kn,es,on),Vn){const fs=Kn+Vr*Vn.offset.x/Ur,os=es-Vr*Vn.offset.y/Ur;this.paintChar(Vn.fontChar,fs,os,on)}}const ds=an?Xn*rn-zn*Zr:Xn*rn+zn*Zr;gn+=ds,En&&Xr.restore()}an?zr.y-=gn:zr.x+=gn*Jr,Xr.restore(),this.compose()}showType3Text(Br){const zr=this.ctx,Gr=this.current,Vr=Gr.font,Xr=Gr.fontSize,Ur=Gr.fontDirection,Fr=Vr.vertical?1:-1,Kr=Gr.charSpacing,Zr=Gr.wordSpacing,Jr=Gr.textHScale*Ur,tn=Gr.fontMatrix||nr.FONT_IDENTITY_MATRIX,an=Br.length,dn=Gr.textRenderingMode===nr.TextRenderingMode.INVISIBLE;let en,rn,sn,on;if(!(dn||Xr===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,zr.save(),zr.transform(...Gr.textMatrix),zr.translate(Gr.x,Gr.y),zr.scale(Jr,Ur),en=0;en<an;++en){if(rn=Br[en],typeof rn=="number"){on=Fr*rn*Xr/1e3,this.ctx.translate(on,0),Gr.x+=on*Jr;continue}const fn=(rn.isSpace?Zr:0)+Kr,pn=Vr.charProcOperatorList[rn.operatorListId];if(!pn){(0,nr.warn)(`Type3 character "${rn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=rn,this.save(),zr.scale(Xr,Xr),zr.transform(...tn),this.executeOperatorList(pn),this.restore()),sn=nr.Util.applyTransform([rn.width,0],tn)[0]*Xr+fn,zr.translate(sn,0),Gr.x+=sn*Jr}zr.restore(),this.processingType3=null}}setCharWidth(Br,zr){}setCharWidthAndBounds(Br,zr,Gr,Vr,Xr,Ur){this.ctx.rect(Gr,Vr,Xr-Gr,Ur-Vr),this.ctx.clip(),this.endPath()}getColorN_Pattern(Br){let zr;if(Br[0]==="TilingPattern"){const Gr=Br[1],Vr=this.baseTransform||(0,ir.getCurrentTransform)(this.ctx),Xr={createCanvasGraphics:Ur=>new qr(Ur,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};zr=new sr.TilingPattern(Br,Gr,this.ctx,Xr,Vr)}else zr=this._getPattern(Br[1],Br[2]);return zr}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Br,zr,Gr){const Vr=nr.Util.makeHexColor(Br,zr,Gr);this.ctx.strokeStyle=Vr,this.current.strokeColor=Vr}setFillRGBColor(Br,zr,Gr){const Vr=nr.Util.makeHexColor(Br,zr,Gr);this.ctx.fillStyle=Vr,this.current.fillColor=Vr,this.current.patternFill=!1}_getPattern(Br,zr=null){let Gr;return this.cachedPatterns.has(Br)?Gr=this.cachedPatterns.get(Br):(Gr=(0,sr.getShadingPattern)(this.getObject(Br)),this.cachedPatterns.set(Br,Gr)),zr&&(Gr.matrix=zr),Gr}shadingFill(Br){if(!this.contentVisible)return;const zr=this.ctx;this.save();const Gr=this._getPattern(Br);zr.fillStyle=Gr.getPattern(zr,this,(0,ir.getCurrentTransformInverse)(zr),sr.PathType.SHADING);const Vr=(0,ir.getCurrentTransformInverse)(zr);if(Vr){const{width:Xr,height:Ur}=zr.canvas,[Fr,Kr,Zr,Jr]=nr.Util.getAxialAlignedBoundingBox([0,0,Xr,Ur],Vr);this.ctx.fillRect(Fr,Kr,Zr-Fr,Jr-Kr)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,nr.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,nr.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Br,zr){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Br)&&Br.length===6&&this.transform(...Br),this.baseTransform=(0,ir.getCurrentTransform)(this.ctx),zr)){const Gr=zr[2]-zr[0],Vr=zr[3]-zr[1];this.ctx.rect(zr[0],zr[1],Gr,Vr),this.current.updateRectMinMax((0,ir.getCurrentTransform)(this.ctx),zr),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Br){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const zr=this.ctx;Br.isolated||(0,nr.info)("TODO: Support non-isolated groups."),Br.knockout&&(0,nr.warn)("Knockout groups not supported.");const Gr=(0,ir.getCurrentTransform)(zr);if(Br.matrix&&zr.transform(...Br.matrix),!Br.bbox)throw new Error("Bounding box is required.");let Vr=nr.Util.getAxialAlignedBoundingBox(Br.bbox,(0,ir.getCurrentTransform)(zr));const Xr=[0,0,zr.canvas.width,zr.canvas.height];Vr=nr.Util.intersect(Vr,Xr)||[0,0,0,0];const Ur=Math.floor(Vr[0]),Fr=Math.floor(Vr[1]);let Kr=Math.max(Math.ceil(Vr[2])-Ur,1),Zr=Math.max(Math.ceil(Vr[3])-Fr,1),Jr=1,tn=1;Kr>or&&(Jr=Kr/or,Kr=or),Zr>or&&(tn=Zr/or,Zr=or),this.current.startNewPathAndClipBox([0,0,Kr,Zr]);let an="groupAt"+this.groupLevel;Br.smask&&(an+="_smask_"+this.smaskCounter++%2);const dn=this.cachedCanvases.getCanvas(an,Kr,Zr),en=dn.context;en.scale(1/Jr,1/tn),en.translate(-Ur,-Fr),en.transform(...Gr),Br.smask?this.smaskStack.push({canvas:dn.canvas,context:en,offsetX:Ur,offsetY:Fr,scaleX:Jr,scaleY:tn,subtype:Br.smask.subtype,backdrop:Br.smask.backdrop,transferMap:Br.smask.transferMap||null,startTransformInverse:null}):(zr.setTransform(1,0,0,1,0,0),zr.translate(Ur,Fr),zr.scale(Jr,tn),zr.save()),_r(zr,en),this.ctx=en,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(zr),this.groupLevel++}endGroup(Br){if(!this.contentVisible)return;this.groupLevel--;const zr=this.ctx,Gr=this.groupStack.pop();if(this.ctx=Gr,this.ctx.imageSmoothingEnabled=!1,Br.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Vr=(0,ir.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Vr);const Xr=nr.Util.getAxialAlignedBoundingBox([0,0,zr.canvas.width,zr.canvas.height],Vr);this.ctx.drawImage(zr.canvas,0,0),this.ctx.restore(),this.compose(Xr)}}beginAnnotation(Br,zr,Gr,Vr,Xr){if(rs(this,Ar,a0).call(this),Er(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(zr)&&zr.length===4){const Ur=zr[2]-zr[0],Fr=zr[3]-zr[1];if(Xr&&this.annotationCanvasMap){Gr=Gr.slice(),Gr[4]-=zr[0],Gr[5]-=zr[1],zr=zr.slice(),zr[0]=zr[1]=0,zr[2]=Ur,zr[3]=Fr;const[Kr,Zr]=nr.Util.singularValueDecompose2dScale((0,ir.getCurrentTransform)(this.ctx)),{viewportScale:Jr}=this,tn=Math.ceil(Ur*this.outputScaleX*Jr),an=Math.ceil(Fr*this.outputScaleY*Jr);this.annotationCanvas=this.canvasFactory.create(tn,an);const{canvas:dn,context:en}=this.annotationCanvas;this.annotationCanvasMap.set(Br,dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=en,this.ctx.save(),this.ctx.setTransform(Kr,0,0,-Zr,0,Fr*Zr),Er(this.ctx)}else Er(this.ctx),this.ctx.rect(zr[0],zr[1],Ur,Fr),this.ctx.clip(),this.endPath()}this.current=new yr(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Gr),this.transform(...Vr)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),rs(this,Ar,o0).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Br){if(!this.contentVisible)return;const zr=Br.count;Br=this.getObject(Br.data,Br),Br.count=zr;const Gr=this.ctx,Vr=this.processingType3;if(Vr&&(Vr.compiled===void 0&&(Vr.compiled=mr(Br)),Vr.compiled)){Vr.compiled(Gr);return}const Xr=this._createMaskCanvas(Br),Ur=Xr.canvas;Gr.save(),Gr.setTransform(1,0,0,1,0,0),Gr.drawImage(Ur,Xr.offsetX,Xr.offsetY),Gr.restore(),this.compose()}paintImageMaskXObjectRepeat(Br,zr,Gr=0,Vr=0,Xr,Ur){if(!this.contentVisible)return;Br=this.getObject(Br.data,Br);const Fr=this.ctx;Fr.save();const Kr=(0,ir.getCurrentTransform)(Fr);Fr.transform(zr,Gr,Vr,Xr,0,0);const Zr=this._createMaskCanvas(Br);Fr.setTransform(1,0,0,1,Zr.offsetX-Kr[4],Zr.offsetY-Kr[5]);for(let Jr=0,tn=Ur.length;Jr<tn;Jr+=2){const an=nr.Util.transform(Kr,[zr,Gr,Vr,Xr,Ur[Jr],Ur[Jr+1]]),[dn,en]=nr.Util.applyTransform([0,0],an);Fr.drawImage(Zr.canvas,dn,en)}Fr.restore(),this.compose()}paintImageMaskXObjectGroup(Br){if(!this.contentVisible)return;const zr=this.ctx,Gr=this.current.fillColor,Vr=this.current.patternFill;for(const Xr of Br){const{data:Ur,width:Fr,height:Kr,transform:Zr}=Xr,Jr=this.cachedCanvases.getCanvas("maskCanvas",Fr,Kr),tn=Jr.context;tn.save();const an=this.getObject(Ur,Xr);vr(tn,an),tn.globalCompositeOperation="source-in",tn.fillStyle=Vr?Gr.getPattern(tn,this,(0,ir.getCurrentTransformInverse)(zr),sr.PathType.FILL):Gr,tn.fillRect(0,0,Fr,Kr),tn.restore(),zr.save(),zr.transform(...Zr),zr.scale(1,-1),pr(zr,Jr.canvas,0,0,Fr,Kr,0,-1,1,1),zr.restore()}this.compose()}paintImageXObject(Br){if(!this.contentVisible)return;const zr=this.getObject(Br);if(!zr){(0,nr.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(zr)}paintImageXObjectRepeat(Br,zr,Gr,Vr){if(!this.contentVisible)return;const Xr=this.getObject(Br);if(!Xr){(0,nr.warn)("Dependent image isn't ready yet");return}const Ur=Xr.width,Fr=Xr.height,Kr=[];for(let Zr=0,Jr=Vr.length;Zr<Jr;Zr+=2)Kr.push({transform:[zr,0,0,Gr,Vr[Zr],Vr[Zr+1]],x:0,y:0,w:Ur,h:Fr});this.paintInlineImageXObjectGroup(Xr,Kr)}applyTransferMapsToCanvas(Br){return this.current.transferMaps!=="none"&&(Br.filter=this.current.transferMaps,Br.drawImage(Br.canvas,0,0),Br.filter="none"),Br.canvas}applyTransferMapsToBitmap(Br){if(this.current.transferMaps==="none")return Br.bitmap;const{bitmap:zr,width:Gr,height:Vr}=Br,Xr=this.cachedCanvases.getCanvas("inlineImage",Gr,Vr),Ur=Xr.context;return Ur.filter=this.current.transferMaps,Ur.drawImage(zr,0,0),Ur.filter="none",Xr.canvas}paintInlineImageXObject(Br){if(!this.contentVisible)return;const zr=Br.width,Gr=Br.height,Vr=this.ctx;if(this.save(),!nr.isNodeJS){const{filter:Fr}=Vr;Fr!=="none"&&Fr!==""&&(Vr.filter="none")}Vr.scale(1/zr,-1/Gr);let Xr;if(Br.bitmap)Xr=this.applyTransferMapsToBitmap(Br);else if(typeof HTMLElement=="function"&&Br instanceof HTMLElement||!Br.data)Xr=Br;else{const Kr=this.cachedCanvases.getCanvas("inlineImage",zr,Gr).context;xr(Kr,Br),Xr=this.applyTransferMapsToCanvas(Kr)}const Ur=this._scaleImage(Xr,(0,ir.getCurrentTransformInverse)(Vr));Vr.imageSmoothingEnabled=Or((0,ir.getCurrentTransform)(Vr),Br.interpolate),pr(Vr,Ur.img,0,0,Ur.paintWidth,Ur.paintHeight,0,-Gr,zr,Gr),this.compose(),this.restore()}paintInlineImageXObjectGroup(Br,zr){if(!this.contentVisible)return;const Gr=this.ctx;let Vr;if(Br.bitmap)Vr=Br.bitmap;else{const Xr=Br.width,Ur=Br.height,Kr=this.cachedCanvases.getCanvas("inlineImage",Xr,Ur).context;xr(Kr,Br),Vr=this.applyTransferMapsToCanvas(Kr)}for(const Xr of zr)Gr.save(),Gr.transform(...Xr.transform),Gr.scale(1,-1),pr(Gr,Vr,Xr.x,Xr.y,Xr.w,Xr.h,0,-1,1,1),Gr.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Br){}markPointProps(Br,zr){}beginMarkedContent(Br){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Br,zr){Br==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(zr)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Br){const zr=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Br);const Gr=this.ctx;this.pendingClip&&(zr||(this.pendingClip===wr?Gr.clip("evenodd"):Gr.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Gr.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Br=(0,ir.getCurrentTransform)(this.ctx);if(Br[1]===0&&Br[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Br[0]),Math.abs(Br[3]));else{const zr=Math.abs(Br[0]*Br[3]-Br[2]*Br[1]),Gr=Math.hypot(Br[0],Br[2]),Vr=Math.hypot(Br[1],Br[3]);this._cachedGetSinglePixelWidth=Math.max(Gr,Vr)/zr}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Br}=this.current,{a:zr,b:Gr,c:Vr,d:Xr}=this.ctx.getTransform();let Ur,Fr;if(Gr===0&&Vr===0){const Kr=Math.abs(zr),Zr=Math.abs(Xr);if(Kr===Zr)if(Br===0)Ur=Fr=1/Kr;else{const Jr=Kr*Br;Ur=Fr=Jr<1?1/Jr:1}else if(Br===0)Ur=1/Kr,Fr=1/Zr;else{const Jr=Kr*Br,tn=Zr*Br;Ur=Jr<1?1/Jr:1,Fr=tn<1?1/tn:1}}else{const Kr=Math.abs(zr*Xr-Gr*Vr),Zr=Math.hypot(zr,Gr),Jr=Math.hypot(Vr,Xr);if(Br===0)Ur=Jr/Kr,Fr=Zr/Kr;else{const tn=Br*Kr;Ur=Jr>tn?Jr/tn:1,Fr=Zr>tn?Zr/tn:1}}this._cachedScaleForStroking[0]=Ur,this._cachedScaleForStroking[1]=Fr}return this._cachedScaleForStroking}rescaleAndStroke(Br){const{ctx:zr}=this,{lineWidth:Gr}=this.current,[Vr,Xr]=this.getScaleForStroking();if(zr.lineWidth=Gr||1,Vr===1&&Xr===1){zr.stroke();return}const Ur=zr.getLineDash();if(Br&&zr.save(),zr.scale(Vr,Xr),Ur.length>0){const Fr=Math.max(Vr,Xr);zr.setLineDash(Ur.map(Kr=>Kr/Fr)),zr.lineDashOffset/=Fr}zr.stroke(),Br&&zr.restore()}isContentVisible(){for(let Br=this.markedContentStack.length-1;Br>=0;Br--)if(!this.markedContentStack[Br].visible)return!1;return!0}};Ar=new WeakSet,a0=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},o0=function(){if(this.pageColors){const Br=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Br!=="none"){const zr=this.ctx.filter;this.ctx.filter=Br,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=zr}}};let Pr=qr;er.CanvasGraphics=Pr;for(const $r in nr.OPS)Pr.prototype[$r]!==void 0&&(Pr.prototype[nr.OPS[$r]]=Pr.prototype[$r])},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.TilingPattern=er.PathType=void 0,er.getShadingPattern=fr;var nr=rr(1),ir=rr(6);const sr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};er.PathType=sr;function ar(mr,yr){if(!yr)return;const xr=yr[2]-yr[0],vr=yr[3]-yr[1],_r=new Path2D;_r.rect(yr[0],yr[1],xr,vr),mr.clip(_r)}class cr{constructor(){this.constructor===cr&&(0,nr.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,nr.unreachable)("Abstract method `getPattern` called.")}}class lr extends cr{constructor(yr){super(),this._type=yr[1],this._bbox=yr[2],this._colorStops=yr[3],this._p0=yr[4],this._p1=yr[5],this._r0=yr[6],this._r1=yr[7],this.matrix=null}_createGradient(yr){let xr;this._type==="axial"?xr=yr.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(xr=yr.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const vr of this._colorStops)xr.addColorStop(vr[0],vr[1]);return xr}getPattern(yr,xr,vr,_r){let Er;if(_r===sr.STROKE||_r===sr.FILL){const Tr=xr.current.getClippedPathBoundingBox(_r,(0,ir.getCurrentTransform)(yr))||[0,0,0,0],Rr=Math.ceil(Tr[2]-Tr[0])||1,Nr=Math.ceil(Tr[3]-Tr[1])||1,Dr=xr.cachedCanvases.getCanvas("pattern",Rr,Nr,!0),Ir=Dr.context;Ir.clearRect(0,0,Ir.canvas.width,Ir.canvas.height),Ir.beginPath(),Ir.rect(0,0,Ir.canvas.width,Ir.canvas.height),Ir.translate(-Tr[0],-Tr[1]),vr=nr.Util.transform(vr,[1,0,0,1,Tr[0],Tr[1]]),Ir.transform(...xr.baseTransform),this.matrix&&Ir.transform(...this.matrix),ar(Ir,this._bbox),Ir.fillStyle=this._createGradient(Ir),Ir.fill(),Er=yr.createPattern(Dr.canvas,"no-repeat");const Or=new DOMMatrix(vr);Er.setTransform(Or)}else ar(yr,this._bbox),Er=this._createGradient(yr);return Er}}function or(mr,yr,xr,vr,_r,Er,Tr,Rr){const Nr=yr.coords,Dr=yr.colors,Ir=mr.data,Or=mr.width*4;let jr;Nr[xr+1]>Nr[vr+1]&&(jr=xr,xr=vr,vr=jr,jr=Er,Er=Tr,Tr=jr),Nr[vr+1]>Nr[_r+1]&&(jr=vr,vr=_r,_r=jr,jr=Tr,Tr=Rr,Rr=jr),Nr[xr+1]>Nr[vr+1]&&(jr=xr,xr=vr,vr=jr,jr=Er,Er=Tr,Tr=jr);const Lr=(Nr[xr]+yr.offsetX)*yr.scaleX,Cr=(Nr[xr+1]+yr.offsetY)*yr.scaleY,wr=(Nr[vr]+yr.offsetX)*yr.scaleX,Pr=(Nr[vr+1]+yr.offsetY)*yr.scaleY,Ar=(Nr[_r]+yr.offsetX)*yr.scaleX,Sr=(Nr[_r+1]+yr.offsetY)*yr.scaleY;if(Cr>=Sr)return;const Mr=Dr[Er],qr=Dr[Er+1],$r=Dr[Er+2],Br=Dr[Tr],zr=Dr[Tr+1],Gr=Dr[Tr+2],Vr=Dr[Rr],Xr=Dr[Rr+1],Ur=Dr[Rr+2],Fr=Math.round(Cr),Kr=Math.round(Sr);let Zr,Jr,tn,an,dn,en,rn,sn;for(let on=Fr;on<=Kr;on++){if(on<Pr){const In=on<Cr?0:(Cr-on)/(Cr-Pr);Zr=Lr-(Lr-wr)*In,Jr=Mr-(Mr-Br)*In,tn=qr-(qr-zr)*In,an=$r-($r-Gr)*In}else{let In;on>Sr?In=1:Pr===Sr?In=0:In=(Pr-on)/(Pr-Sr),Zr=wr-(wr-Ar)*In,Jr=Br-(Br-Vr)*In,tn=zr-(zr-Xr)*In,an=Gr-(Gr-Ur)*In}let fn;on<Cr?fn=0:on>Sr?fn=1:fn=(Cr-on)/(Cr-Sr),dn=Lr-(Lr-Ar)*fn,en=Mr-(Mr-Vr)*fn,rn=qr-(qr-Xr)*fn,sn=$r-($r-Ur)*fn;const pn=Math.round(Math.min(Zr,dn)),gn=Math.round(Math.max(Zr,dn));let Pn=Or*on+pn*4;for(let In=pn;In<=gn;In++)fn=(Zr-In)/(Zr-dn),fn<0?fn=0:fn>1&&(fn=1),Ir[Pn++]=Jr-(Jr-en)*fn|0,Ir[Pn++]=tn-(tn-rn)*fn|0,Ir[Pn++]=an-(an-sn)*fn|0,Ir[Pn++]=255}}function ur(mr,yr,xr){const vr=yr.coords,_r=yr.colors;let Er,Tr;switch(yr.type){case"lattice":const Rr=yr.verticesPerRow,Nr=Math.floor(vr.length/Rr)-1,Dr=Rr-1;for(Er=0;Er<Nr;Er++){let Ir=Er*Rr;for(let Or=0;Or<Dr;Or++,Ir++)or(mr,xr,vr[Ir],vr[Ir+1],vr[Ir+Rr],_r[Ir],_r[Ir+1],_r[Ir+Rr]),or(mr,xr,vr[Ir+Rr+1],vr[Ir+1],vr[Ir+Rr],_r[Ir+Rr+1],_r[Ir+1],_r[Ir+Rr])}break;case"triangles":for(Er=0,Tr=vr.length;Er<Tr;Er+=3)or(mr,xr,vr[Er],vr[Er+1],vr[Er+2],_r[Er],_r[Er+1],_r[Er+2]);break;default:throw new Error("illegal figure")}}class hr extends cr{constructor(yr){super(),this._coords=yr[2],this._colors=yr[3],this._figures=yr[4],this._bounds=yr[5],this._bbox=yr[7],this._background=yr[8],this.matrix=null}_createMeshCanvas(yr,xr,vr){const Rr=Math.floor(this._bounds[0]),Nr=Math.floor(this._bounds[1]),Dr=Math.ceil(this._bounds[2])-Rr,Ir=Math.ceil(this._bounds[3])-Nr,Or=Math.min(Math.ceil(Math.abs(Dr*yr[0]*1.1)),3e3),jr=Math.min(Math.ceil(Math.abs(Ir*yr[1]*1.1)),3e3),Lr=Dr/Or,Cr=Ir/jr,wr={coords:this._coords,colors:this._colors,offsetX:-Rr,offsetY:-Nr,scaleX:1/Lr,scaleY:1/Cr},Pr=Or+2*2,Ar=jr+2*2,Sr=vr.getCanvas("mesh",Pr,Ar,!1),Mr=Sr.context,qr=Mr.createImageData(Or,jr);if(xr){const Br=qr.data;for(let zr=0,Gr=Br.length;zr<Gr;zr+=4)Br[zr]=xr[0],Br[zr+1]=xr[1],Br[zr+2]=xr[2],Br[zr+3]=255}for(const Br of this._figures)ur(qr,Br,wr);return Mr.putImageData(qr,2,2),{canvas:Sr.canvas,offsetX:Rr-2*Lr,offsetY:Nr-2*Cr,scaleX:Lr,scaleY:Cr}}getPattern(yr,xr,vr,_r){ar(yr,this._bbox);let Er;if(_r===sr.SHADING)Er=nr.Util.singularValueDecompose2dScale((0,ir.getCurrentTransform)(yr));else if(Er=nr.Util.singularValueDecompose2dScale(xr.baseTransform),this.matrix){const Rr=nr.Util.singularValueDecompose2dScale(this.matrix);Er=[Er[0]*Rr[0],Er[1]*Rr[1]]}const Tr=this._createMeshCanvas(Er,_r===sr.SHADING?null:this._background,xr.cachedCanvases);return _r!==sr.SHADING&&(yr.setTransform(...xr.baseTransform),this.matrix&&yr.transform(...this.matrix)),yr.translate(Tr.offsetX,Tr.offsetY),yr.scale(Tr.scaleX,Tr.scaleY),yr.createPattern(Tr.canvas,"no-repeat")}}class dr extends cr{getPattern(){return"hotpink"}}function fr(mr){switch(mr[0]){case"RadialAxial":return new lr(mr);case"Mesh":return new hr(mr);case"Dummy":return new dr}throw new Error(`Unknown IR type: ${mr[0]}`)}const gr={COLORED:1,UNCOLORED:2},pr=class pr{constructor(yr,xr,vr,_r,Er){this.operatorList=yr[2],this.matrix=yr[3]||[1,0,0,1,0,0],this.bbox=yr[4],this.xstep=yr[5],this.ystep=yr[6],this.paintType=yr[7],this.tilingType=yr[8],this.color=xr,this.ctx=vr,this.canvasGraphicsFactory=_r,this.baseTransform=Er}createPatternCanvas(yr){const xr=this.operatorList,vr=this.bbox,_r=this.xstep,Er=this.ystep,Tr=this.paintType,Rr=this.tilingType,Nr=this.color,Dr=this.canvasGraphicsFactory;(0,nr.info)("TilingType: "+Rr);const Ir=vr[0],Or=vr[1],jr=vr[2],Lr=vr[3],Cr=nr.Util.singularValueDecompose2dScale(this.matrix),wr=nr.Util.singularValueDecompose2dScale(this.baseTransform),Pr=[Cr[0]*wr[0],Cr[1]*wr[1]],Ar=this.getSizeAndScale(_r,this.ctx.canvas.width,Pr[0]),Sr=this.getSizeAndScale(Er,this.ctx.canvas.height,Pr[1]),Mr=yr.cachedCanvases.getCanvas("pattern",Ar.size,Sr.size,!0),qr=Mr.context,$r=Dr.createCanvasGraphics(qr);$r.groupLevel=yr.groupLevel,this.setFillAndStrokeStyleToContext($r,Tr,Nr);let Br=Ir,zr=Or,Gr=jr,Vr=Lr;return Ir<0&&(Br=0,Gr+=Math.abs(Ir)),Or<0&&(zr=0,Vr+=Math.abs(Or)),qr.translate(-(Ar.scale*Br),-(Sr.scale*zr)),$r.transform(Ar.scale,0,0,Sr.scale,0,0),qr.save(),this.clipBbox($r,Br,zr,Gr,Vr),$r.baseTransform=(0,ir.getCurrentTransform)($r.ctx),$r.executeOperatorList(xr),$r.endDrawing(),{canvas:Mr.canvas,scaleX:Ar.scale,scaleY:Sr.scale,offsetX:Br,offsetY:zr}}getSizeAndScale(yr,xr,vr){yr=Math.abs(yr);const _r=Math.max(pr.MAX_PATTERN_SIZE,xr);let Er=Math.ceil(yr*vr);return Er>=_r?Er=_r:vr=Er/yr,{scale:vr,size:Er}}clipBbox(yr,xr,vr,_r,Er){const Tr=_r-xr,Rr=Er-vr;yr.ctx.rect(xr,vr,Tr,Rr),yr.current.updateRectMinMax((0,ir.getCurrentTransform)(yr.ctx),[xr,vr,_r,Er]),yr.clip(),yr.endPath()}setFillAndStrokeStyleToContext(yr,xr,vr){const _r=yr.ctx,Er=yr.current;switch(xr){case gr.COLORED:const Tr=this.ctx;_r.fillStyle=Tr.fillStyle,_r.strokeStyle=Tr.strokeStyle,Er.fillColor=Tr.fillStyle,Er.strokeColor=Tr.strokeStyle;break;case gr.UNCOLORED:const Rr=nr.Util.makeHexColor(vr[0],vr[1],vr[2]);_r.fillStyle=Rr,_r.strokeStyle=Rr,Er.fillColor=Rr,Er.strokeColor=Rr;break;default:throw new nr.FormatError(`Unsupported paint type: ${xr}`)}}getPattern(yr,xr,vr,_r){let Er=vr;_r!==sr.SHADING&&(Er=nr.Util.transform(Er,xr.baseTransform),this.matrix&&(Er=nr.Util.transform(Er,this.matrix)));const Tr=this.createPatternCanvas(xr);let Rr=new DOMMatrix(Er);Rr=Rr.translate(Tr.offsetX,Tr.offsetY),Rr=Rr.scale(1/Tr.scaleX,1/Tr.scaleY);const Nr=yr.createPattern(Tr.canvas,"repeat");return Nr.setTransform(Rr),Nr}};Po(pr,"MAX_PATTERN_SIZE",3e3);let br=pr;er.TilingPattern=br},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.convertBlackAndWhiteToRGBA=sr,er.convertToRGBA=ir,er.grayToRGBA=cr;var nr=rr(1);function ir(lr){switch(lr.kind){case nr.ImageKind.GRAYSCALE_1BPP:return sr(lr);case nr.ImageKind.RGB_24BPP:return ar(lr)}return null}function sr({src:lr,srcPos:or=0,dest:ur,width:hr,height:dr,nonBlackColor:fr=4294967295,inverseDecode:gr=!1}){const br=nr.FeatureTest.isLittleEndian?4278190080:255,[pr,mr]=gr?[fr,br]:[br,fr],yr=hr>>3,xr=hr&7,vr=lr.length;ur=new Uint32Array(ur.buffer);let _r=0;for(let Er=0;Er<dr;Er++){for(const Rr=or+yr;or<Rr;or++){const Nr=or<vr?lr[or]:255;ur[_r++]=Nr&128?mr:pr,ur[_r++]=Nr&64?mr:pr,ur[_r++]=Nr&32?mr:pr,ur[_r++]=Nr&16?mr:pr,ur[_r++]=Nr&8?mr:pr,ur[_r++]=Nr&4?mr:pr,ur[_r++]=Nr&2?mr:pr,ur[_r++]=Nr&1?mr:pr}if(xr===0)continue;const Tr=or<vr?lr[or++]:255;for(let Rr=0;Rr<xr;Rr++)ur[_r++]=Tr&1<<7-Rr?mr:pr}return{srcPos:or,destPos:_r}}function ar({src:lr,srcPos:or=0,dest:ur,destPos:hr=0,width:dr,height:fr}){let gr=0;const br=lr.length>>2,pr=new Uint32Array(lr.buffer,or,br);if(nr.FeatureTest.isLittleEndian){for(;gr<br-2;gr+=3,hr+=4){const mr=pr[gr],yr=pr[gr+1],xr=pr[gr+2];ur[hr]=mr|4278190080,ur[hr+1]=mr>>>24|yr<<8|4278190080,ur[hr+2]=yr>>>16|xr<<16|4278190080,ur[hr+3]=xr>>>8|4278190080}for(let mr=gr*4,yr=lr.length;mr<yr;mr+=3)ur[hr++]=lr[mr]|lr[mr+1]<<8|lr[mr+2]<<16|4278190080}else{for(;gr<br-2;gr+=3,hr+=4){const mr=pr[gr],yr=pr[gr+1],xr=pr[gr+2];ur[hr]=mr|255,ur[hr+1]=mr<<24|yr>>>8|255,ur[hr+2]=yr<<16|xr>>>16|255,ur[hr+3]=xr<<8|255}for(let mr=gr*4,yr=lr.length;mr<yr;mr+=3)ur[hr++]=lr[mr]<<24|lr[mr+1]<<16|lr[mr+2]<<8|255}return{srcPos:or,destPos:hr}}function cr(lr,or){if(nr.FeatureTest.isLittleEndian)for(let ur=0,hr=lr.length;ur<hr;ur++)or[ur]=lr[ur]*65793|4278190080;else for(let ur=0,hr=lr.length;ur<hr;ur++)or[ur]=lr[ur]*16843008|255}},(tr,er)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.GlobalWorkerOptions=void 0;const rr=Object.create(null);er.GlobalWorkerOptions=rr,rr.workerPort=null,rr.workerSrc=""},(tr,er,rr)=>{var lr,cy,uy,bm;Object.defineProperty(er,"__esModule",{value:!0}),er.MessageHandler=void 0;var nr=rr(1);const ir={DATA:1,ERROR:2},sr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ar(dr){switch(dr instanceof Error||typeof dr=="object"&&dr!==null||(0,nr.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),dr.name){case"AbortException":return new nr.AbortException(dr.message);case"MissingPDFException":return new nr.MissingPDFException(dr.message);case"PasswordException":return new nr.PasswordException(dr.message,dr.code);case"UnexpectedResponseException":return new nr.UnexpectedResponseException(dr.message,dr.status);case"UnknownErrorException":return new nr.UnknownErrorException(dr.message,dr.details);default:return new nr.UnknownErrorException(dr.message,dr.toString())}}class cr{constructor(fr,gr,br){ps(this,lr);this.sourceName=fr,this.targetName=gr,this.comObj=br,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=pr=>{const mr=pr.data;if(mr.targetName!==this.sourceName)return;if(mr.stream){rs(this,lr,uy).call(this,mr);return}if(mr.callback){const xr=mr.callbackId,vr=this.callbackCapabilities[xr];if(!vr)throw new Error(`Cannot resolve callback ${xr}`);if(delete this.callbackCapabilities[xr],mr.callback===ir.DATA)vr.resolve(mr.data);else if(mr.callback===ir.ERROR)vr.reject(ar(mr.reason));else throw new Error("Unexpected callback case");return}const yr=this.actionHandler[mr.action];if(!yr)throw new Error(`Unknown action from worker: ${mr.action}`);if(mr.callbackId){const xr=this.sourceName,vr=mr.sourceName;new Promise(function(_r){_r(yr(mr.data))}).then(function(_r){br.postMessage({sourceName:xr,targetName:vr,callback:ir.DATA,callbackId:mr.callbackId,data:_r})},function(_r){br.postMessage({sourceName:xr,targetName:vr,callback:ir.ERROR,callbackId:mr.callbackId,reason:ar(_r)})});return}if(mr.streamId){rs(this,lr,cy).call(this,mr);return}yr(mr.data)},br.addEventListener("message",this._onComObjOnMessage)}on(fr,gr){const br=this.actionHandler;if(br[fr])throw new Error(`There is already an actionName called "${fr}"`);br[fr]=gr}send(fr,gr,br){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:fr,data:gr},br)}sendWithPromise(fr,gr,br){const pr=this.callbackId++,mr=new nr.PromiseCapability;this.callbackCapabilities[pr]=mr;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:fr,callbackId:pr,data:gr},br)}catch(yr){mr.reject(yr)}return mr.promise}sendWithStream(fr,gr,br,pr){const mr=this.streamId++,yr=this.sourceName,xr=this.targetName,vr=this.comObj;return new ReadableStream({start:_r=>{const Er=new nr.PromiseCapability;return this.streamControllers[mr]={controller:_r,startCall:Er,pullCall:null,cancelCall:null,isClosed:!1},vr.postMessage({sourceName:yr,targetName:xr,action:fr,streamId:mr,data:gr,desiredSize:_r.desiredSize},pr),Er.promise},pull:_r=>{const Er=new nr.PromiseCapability;return this.streamControllers[mr].pullCall=Er,vr.postMessage({sourceName:yr,targetName:xr,stream:sr.PULL,streamId:mr,desiredSize:_r.desiredSize}),Er.promise},cancel:_r=>{(0,nr.assert)(_r instanceof Error,"cancel must have a valid reason");const Er=new nr.PromiseCapability;return this.streamControllers[mr].cancelCall=Er,this.streamControllers[mr].isClosed=!0,vr.postMessage({sourceName:yr,targetName:xr,stream:sr.CANCEL,streamId:mr,reason:ar(_r)}),Er.promise}},br)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}lr=new WeakSet,cy=function(fr){const gr=fr.streamId,br=this.sourceName,pr=fr.sourceName,mr=this.comObj,yr=this,xr=this.actionHandler[fr.action],vr={enqueue(_r,Er=1,Tr){if(this.isCancelled)return;const Rr=this.desiredSize;this.desiredSize-=Er,Rr>0&&this.desiredSize<=0&&(this.sinkCapability=new nr.PromiseCapability,this.ready=this.sinkCapability.promise),mr.postMessage({sourceName:br,targetName:pr,stream:sr.ENQUEUE,streamId:gr,chunk:_r},Tr)},close(){this.isCancelled||(this.isCancelled=!0,mr.postMessage({sourceName:br,targetName:pr,stream:sr.CLOSE,streamId:gr}),delete yr.streamSinks[gr])},error(_r){(0,nr.assert)(_r instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,mr.postMessage({sourceName:br,targetName:pr,stream:sr.ERROR,streamId:gr,reason:ar(_r)}))},sinkCapability:new nr.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:fr.desiredSize,ready:null};vr.sinkCapability.resolve(),vr.ready=vr.sinkCapability.promise,this.streamSinks[gr]=vr,new Promise(function(_r){_r(xr(fr.data,vr))}).then(function(){mr.postMessage({sourceName:br,targetName:pr,stream:sr.START_COMPLETE,streamId:gr,success:!0})},function(_r){mr.postMessage({sourceName:br,targetName:pr,stream:sr.START_COMPLETE,streamId:gr,reason:ar(_r)})})},uy=function(fr){const gr=fr.streamId,br=this.sourceName,pr=fr.sourceName,mr=this.comObj,yr=this.streamControllers[gr],xr=this.streamSinks[gr];switch(fr.stream){case sr.START_COMPLETE:fr.success?yr.startCall.resolve():yr.startCall.reject(ar(fr.reason));break;case sr.PULL_COMPLETE:fr.success?yr.pullCall.resolve():yr.pullCall.reject(ar(fr.reason));break;case sr.PULL:if(!xr){mr.postMessage({sourceName:br,targetName:pr,stream:sr.PULL_COMPLETE,streamId:gr,success:!0});break}xr.desiredSize<=0&&fr.desiredSize>0&&xr.sinkCapability.resolve(),xr.desiredSize=fr.desiredSize,new Promise(function(vr){var _r;vr((_r=xr.onPull)==null?void 0:_r.call(xr))}).then(function(){mr.postMessage({sourceName:br,targetName:pr,stream:sr.PULL_COMPLETE,streamId:gr,success:!0})},function(vr){mr.postMessage({sourceName:br,targetName:pr,stream:sr.PULL_COMPLETE,streamId:gr,reason:ar(vr)})});break;case sr.ENQUEUE:if((0,nr.assert)(yr,"enqueue should have stream controller"),yr.isClosed)break;yr.controller.enqueue(fr.chunk);break;case sr.CLOSE:if((0,nr.assert)(yr,"close should have stream controller"),yr.isClosed)break;yr.isClosed=!0,yr.controller.close(),rs(this,lr,bm).call(this,yr,gr);break;case sr.ERROR:(0,nr.assert)(yr,"error should have stream controller"),yr.controller.error(ar(fr.reason)),rs(this,lr,bm).call(this,yr,gr);break;case sr.CANCEL_COMPLETE:fr.success?yr.cancelCall.resolve():yr.cancelCall.reject(ar(fr.reason)),rs(this,lr,bm).call(this,yr,gr);break;case sr.CANCEL:if(!xr)break;new Promise(function(vr){var _r;vr((_r=xr.onCancel)==null?void 0:_r.call(xr,ar(fr.reason)))}).then(function(){mr.postMessage({sourceName:br,targetName:pr,stream:sr.CANCEL_COMPLETE,streamId:gr,success:!0})},function(vr){mr.postMessage({sourceName:br,targetName:pr,stream:sr.CANCEL_COMPLETE,streamId:gr,reason:ar(vr)})}),xr.sinkCapability.reject(ar(fr.reason)),xr.isCancelled=!0,delete this.streamSinks[gr];break;default:throw new Error("Unexpected stream case")}},bm=async function(fr,gr){var br,pr,mr;await Promise.allSettled([(br=fr.startCall)==null?void 0:br.promise,(pr=fr.pullCall)==null?void 0:pr.promise,(mr=fr.cancelCall)==null?void 0:mr.promise]),delete this.streamControllers[gr]},er.MessageHandler=cr},(tr,er,rr)=>{var sr,ar;Object.defineProperty(er,"__esModule",{value:!0}),er.Metadata=void 0;var nr=rr(1);class ir{constructor({parsedData:lr,rawData:or}){ps(this,sr);ps(this,ar);ys(this,sr,lr),ys(this,ar,or)}getRaw(){return un(this,ar)}get(lr){return un(this,sr).get(lr)??null}getAll(){return(0,nr.objectFromMap)(un(this,sr))}has(lr){return un(this,sr).has(lr)}}sr=new WeakMap,ar=new WeakMap,er.Metadata=ir},(tr,er,rr)=>{var lr,or,ur,hr,dr,fr,l0;Object.defineProperty(er,"__esModule",{value:!0}),er.OptionalContentConfig=void 0;var nr=rr(1),ir=rr(8);const sr=Symbol("INTERNAL");class ar{constructor(pr,mr){ps(this,lr,!0);this.name=pr,this.intent=mr}get visible(){return un(this,lr)}_setVisible(pr,mr){pr!==sr&&(0,nr.unreachable)("Internal method `_setVisible` called."),ys(this,lr,mr)}}lr=new WeakMap;class cr{constructor(pr){ps(this,fr);ps(this,or,null);ps(this,ur,new Map);ps(this,hr,null);ps(this,dr,null);if(this.name=null,this.creator=null,pr!==null){this.name=pr.name,this.creator=pr.creator,ys(this,dr,pr.order);for(const mr of pr.groups)un(this,ur).set(mr.id,new ar(mr.name,mr.intent));if(pr.baseState==="OFF")for(const mr of un(this,ur).values())mr._setVisible(sr,!1);for(const mr of pr.on)un(this,ur).get(mr)._setVisible(sr,!0);for(const mr of pr.off)un(this,ur).get(mr)._setVisible(sr,!1);ys(this,hr,this.getHash())}}isVisible(pr){if(un(this,ur).size===0)return!0;if(!pr)return(0,nr.warn)("Optional content group not defined."),!0;if(pr.type==="OCG")return un(this,ur).has(pr.id)?un(this,ur).get(pr.id).visible:((0,nr.warn)(`Optional content group not found: ${pr.id}`),!0);if(pr.type==="OCMD"){if(pr.expression)return rs(this,fr,l0).call(this,pr.expression);if(!pr.policy||pr.policy==="AnyOn"){for(const mr of pr.ids){if(!un(this,ur).has(mr))return(0,nr.warn)(`Optional content group not found: ${mr}`),!0;if(un(this,ur).get(mr).visible)return!0}return!1}else if(pr.policy==="AllOn"){for(const mr of pr.ids){if(!un(this,ur).has(mr))return(0,nr.warn)(`Optional content group not found: ${mr}`),!0;if(!un(this,ur).get(mr).visible)return!1}return!0}else if(pr.policy==="AnyOff"){for(const mr of pr.ids){if(!un(this,ur).has(mr))return(0,nr.warn)(`Optional content group not found: ${mr}`),!0;if(!un(this,ur).get(mr).visible)return!0}return!1}else if(pr.policy==="AllOff"){for(const mr of pr.ids){if(!un(this,ur).has(mr))return(0,nr.warn)(`Optional content group not found: ${mr}`),!0;if(un(this,ur).get(mr).visible)return!1}return!0}return(0,nr.warn)(`Unknown optional content policy ${pr.policy}.`),!0}return(0,nr.warn)(`Unknown group type ${pr.type}.`),!0}setVisibility(pr,mr=!0){if(!un(this,ur).has(pr)){(0,nr.warn)(`Optional content group not found: ${pr}`);return}un(this,ur).get(pr)._setVisible(sr,!!mr),ys(this,or,null)}get hasInitialVisibility(){return un(this,hr)===null||this.getHash()===un(this,hr)}getOrder(){return un(this,ur).size?un(this,dr)?un(this,dr).slice():[...un(this,ur).keys()]:null}getGroups(){return un(this,ur).size>0?(0,nr.objectFromMap)(un(this,ur)):null}getGroup(pr){return un(this,ur).get(pr)||null}getHash(){if(un(this,or)!==null)return un(this,or);const pr=new ir.MurmurHash3_64;for(const[mr,yr]of un(this,ur))pr.update(`${mr}:${yr.visible}`);return ys(this,or,pr.hexdigest())}}or=new WeakMap,ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakSet,l0=function(pr){const mr=pr.length;if(mr<2)return!0;const yr=pr[0];for(let xr=1;xr<mr;xr++){const vr=pr[xr];let _r;if(Array.isArray(vr))_r=rs(this,fr,l0).call(this,vr);else if(un(this,ur).has(vr))_r=un(this,ur).get(vr).visible;else return(0,nr.warn)(`Optional content group not found: ${vr}`),!0;switch(yr){case"And":if(!_r)return!1;break;case"Or":if(_r)return!0;break;case"Not":return!_r;default:return!0}}return yr==="And"},er.OptionalContentConfig=cr},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.PDFDataTransportStream=void 0;var nr=rr(1),ir=rr(6);class sr{constructor({length:or,initialData:ur,progressiveDone:hr=!1,contentDispositionFilename:dr=null,disableRange:fr=!1,disableStream:gr=!1},br){if((0,nr.assert)(br,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=hr,this._contentDispositionFilename=dr,(ur==null?void 0:ur.length)>0){const pr=ur instanceof Uint8Array&&ur.byteLength===ur.buffer.byteLength?ur.buffer:new Uint8Array(ur).buffer;this._queuedChunks.push(pr)}this._pdfDataRangeTransport=br,this._isStreamingSupported=!gr,this._isRangeSupported=!fr,this._contentLength=or,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((pr,mr)=>{this._onReceiveData({begin:pr,chunk:mr})}),this._pdfDataRangeTransport.addProgressListener((pr,mr)=>{this._onProgress({loaded:pr,total:mr})}),this._pdfDataRangeTransport.addProgressiveReadListener(pr=>{this._onReceiveData({chunk:pr})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:or,chunk:ur}){const hr=ur instanceof Uint8Array&&ur.byteLength===ur.buffer.byteLength?ur.buffer:new Uint8Array(ur).buffer;if(or===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(hr):this._queuedChunks.push(hr);else{const dr=this._rangeReaders.some(function(fr){return fr._begin!==or?!1:(fr._enqueue(hr),!0)});(0,nr.assert)(dr,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var or;return((or=this._fullRequestReader)==null?void 0:or._loaded)??0}_onProgress(or){var ur,hr,dr,fr;or.total===void 0?(hr=(ur=this._rangeReaders[0])==null?void 0:ur.onProgress)==null||hr.call(ur,{loaded:or.loaded}):(fr=(dr=this._fullRequestReader)==null?void 0:dr.onProgress)==null||fr.call(dr,{loaded:or.loaded,total:or.total})}_onProgressiveDone(){var or;(or=this._fullRequestReader)==null||or.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(or){const ur=this._rangeReaders.indexOf(or);ur>=0&&this._rangeReaders.splice(ur,1)}getFullReader(){(0,nr.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const or=this._queuedChunks;return this._queuedChunks=null,new ar(this,or,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(or,ur){if(ur<=this._progressiveDataLength)return null;const hr=new cr(this,or,ur);return this._pdfDataRangeTransport.requestDataRange(or,ur),this._rangeReaders.push(hr),hr}cancelAllRequests(or){var ur;(ur=this._fullRequestReader)==null||ur.cancel(or);for(const hr of this._rangeReaders.slice(0))hr.cancel(or);this._pdfDataRangeTransport.abort()}}er.PDFDataTransportStream=sr;class ar{constructor(or,ur,hr=!1,dr=null){this._stream=or,this._done=hr||!1,this._filename=(0,ir.isPdfFile)(dr)?dr:null,this._queuedChunks=ur||[],this._loaded=0;for(const fr of this._queuedChunks)this._loaded+=fr.byteLength;this._requests=[],this._headersReady=Promise.resolve(),or._fullRequestReader=this,this.onProgress=null}_enqueue(or){this._done||(this._requests.length>0?this._requests.shift().resolve({value:or,done:!1}):this._queuedChunks.push(or),this._loaded+=or.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const or=new nr.PromiseCapability;return this._requests.push(or),or.promise}cancel(or){this._done=!0;for(const ur of this._requests)ur.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cr{constructor(or,ur,hr){this._stream=or,this._begin=ur,this._end=hr,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(or){if(!this._done){if(this._requests.length===0)this._queuedChunk=or;else{this._requests.shift().resolve({value:or,done:!1});for(const hr of this._requests)hr.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const ur=this._queuedChunk;return this._queuedChunk=null,{value:ur,done:!1}}if(this._done)return{value:void 0,done:!0};const or=new nr.PromiseCapability;return this._requests.push(or),or.promise}cancel(or){this._done=!0;for(const ur of this._requests)ur.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.PDFFetchStream=void 0;var nr=rr(1),ir=rr(20);function sr(hr,dr,fr){return{method:"GET",headers:hr,signal:fr.signal,mode:"cors",credentials:dr?"include":"same-origin",redirect:"follow"}}function ar(hr){const dr=new Headers;for(const fr in hr){const gr=hr[fr];gr!==void 0&&dr.append(fr,gr)}return dr}function cr(hr){return hr instanceof Uint8Array?hr.buffer:hr instanceof ArrayBuffer?hr:((0,nr.warn)(`getArrayBuffer - unexpected data format: ${hr}`),new Uint8Array(hr).buffer)}class lr{constructor(dr){this.source=dr,this.isHttp=/^https?:/i.test(dr.url),this.httpHeaders=this.isHttp&&dr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var dr;return((dr=this._fullRequestReader)==null?void 0:dr._loaded)??0}getFullReader(){return(0,nr.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new or(this),this._fullRequestReader}getRangeReader(dr,fr){if(fr<=this._progressiveDataLength)return null;const gr=new ur(this,dr,fr);return this._rangeRequestReaders.push(gr),gr}cancelAllRequests(dr){var fr;(fr=this._fullRequestReader)==null||fr.cancel(dr);for(const gr of this._rangeRequestReaders.slice(0))gr.cancel(dr)}}er.PDFFetchStream=lr;class or{constructor(dr){this._stream=dr,this._reader=null,this._loaded=0,this._filename=null;const fr=dr.source;this._withCredentials=fr.withCredentials||!1,this._contentLength=fr.length,this._headersCapability=new nr.PromiseCapability,this._disableRange=fr.disableRange||!1,this._rangeChunkSize=fr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!fr.disableStream,this._isRangeSupported=!fr.disableRange,this._headers=ar(this._stream.httpHeaders);const gr=fr.url;fetch(gr,sr(this._headers,this._withCredentials,this._abortController)).then(br=>{if(!(0,ir.validateResponseStatus)(br.status))throw(0,ir.createResponseStatusError)(br.status,gr);this._reader=br.body.getReader(),this._headersCapability.resolve();const pr=xr=>br.headers.get(xr),{allowRangeRequests:mr,suggestedLength:yr}=(0,ir.validateRangeRequestCapabilities)({getResponseHeader:pr,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=mr,this._contentLength=yr||this._contentLength,this._filename=(0,ir.extractFilenameFromHeader)(pr),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new nr.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var gr;await this._headersCapability.promise;const{value:dr,done:fr}=await this._reader.read();return fr?{value:dr,done:fr}:(this._loaded+=dr.byteLength,(gr=this.onProgress)==null||gr.call(this,{loaded:this._loaded,total:this._contentLength}),{value:cr(dr),done:!1})}cancel(dr){var fr;(fr=this._reader)==null||fr.cancel(dr),this._abortController.abort()}}class ur{constructor(dr,fr,gr){this._stream=dr,this._reader=null,this._loaded=0;const br=dr.source;this._withCredentials=br.withCredentials||!1,this._readCapability=new nr.PromiseCapability,this._isStreamingSupported=!br.disableStream,this._abortController=new AbortController,this._headers=ar(this._stream.httpHeaders),this._headers.append("Range",`bytes=${fr}-${gr-1}`);const pr=br.url;fetch(pr,sr(this._headers,this._withCredentials,this._abortController)).then(mr=>{if(!(0,ir.validateResponseStatus)(mr.status))throw(0,ir.createResponseStatusError)(mr.status,pr);this._readCapability.resolve(),this._reader=mr.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var gr;await this._readCapability.promise;const{value:dr,done:fr}=await this._reader.read();return fr?{value:dr,done:fr}:(this._loaded+=dr.byteLength,(gr=this.onProgress)==null||gr.call(this,{loaded:this._loaded}),{value:cr(dr),done:!1})}cancel(dr){var fr;(fr=this._reader)==null||fr.cancel(dr),this._abortController.abort()}}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.createResponseStatusError=lr,er.extractFilenameFromHeader=cr,er.validateRangeRequestCapabilities=ar,er.validateResponseStatus=or;var nr=rr(1),ir=rr(21),sr=rr(6);function ar({getResponseHeader:ur,isHttp:hr,rangeChunkSize:dr,disableRange:fr}){const gr={allowRangeRequests:!1,suggestedLength:void 0},br=parseInt(ur("Content-Length"),10);return!Number.isInteger(br)||(gr.suggestedLength=br,br<=2*dr)||fr||!hr||ur("Accept-Ranges")!=="bytes"||(ur("Content-Encoding")||"identity")!=="identity"||(gr.allowRangeRequests=!0),gr}function cr(ur){const hr=ur("Content-Disposition");if(hr){let dr=(0,ir.getFilenameFromContentDispositionHeader)(hr);if(dr.includes("%"))try{dr=decodeURIComponent(dr)}catch{}if((0,sr.isPdfFile)(dr))return dr}return null}function lr(ur,hr){return ur===404||ur===0&&hr.startsWith("file:")?new nr.MissingPDFException('Missing PDF "'+hr+'".'):new nr.UnexpectedResponseException(`Unexpected server response (${ur}) while retrieving PDF "${hr}".`,ur)}function or(ur){return ur===200||ur===206}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.getFilenameFromContentDispositionHeader=ir;var nr=rr(1);function ir(sr){let ar=!0,cr=lr("filename\\*","i").exec(sr);if(cr){cr=cr[1];let br=dr(cr);return br=unescape(br),br=fr(br),br=gr(br),ur(br)}if(cr=hr(sr),cr){const br=gr(cr);return ur(br)}if(cr=lr("filename","i").exec(sr),cr){cr=cr[1];let br=dr(cr);return br=gr(br),ur(br)}function lr(br,pr){return new RegExp("(?:^|;)\\s*"+br+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',pr)}function or(br,pr){if(br){if(!/^[\x00-\xFF]+$/.test(pr))return pr;try{const mr=new TextDecoder(br,{fatal:!0}),yr=(0,nr.stringToBytes)(pr);pr=mr.decode(yr),ar=!1}catch{}}return pr}function ur(br){return ar&&/[\x80-\xff]/.test(br)&&(br=or("utf-8",br),ar&&(br=or("iso-8859-1",br))),br}function hr(br){const pr=[];let mr;const yr=lr("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(mr=yr.exec(br))!==null;){let[,vr,_r,Er]=mr;if(vr=parseInt(vr,10),vr in pr){if(vr===0)break;continue}pr[vr]=[_r,Er]}const xr=[];for(let vr=0;vr<pr.length&&vr in pr;++vr){let[_r,Er]=pr[vr];Er=dr(Er),_r&&(Er=unescape(Er),vr===0&&(Er=fr(Er))),xr.push(Er)}return xr.join("")}function dr(br){if(br.startsWith('"')){const pr=br.slice(1).split('\\"');for(let mr=0;mr<pr.length;++mr){const yr=pr[mr].indexOf('"');yr!==-1&&(pr[mr]=pr[mr].slice(0,yr),pr.length=mr+1),pr[mr]=pr[mr].replaceAll(/\\(.)/g,"$1")}br=pr.join('"')}return br}function fr(br){const pr=br.indexOf("'");if(pr===-1)return br;const mr=br.slice(0,pr),xr=br.slice(pr+1).replace(/^[^']*'/,"");return or(mr,xr)}function gr(br){return!br.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(br)?br:br.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(pr,mr,yr,xr){if(yr==="q"||yr==="Q")return xr=xr.replaceAll("_"," "),xr=xr.replaceAll(/=([0-9a-fA-F]{2})/g,function(vr,_r){return String.fromCharCode(parseInt(_r,16))}),or(mr,xr);try{xr=atob(xr)}catch{}return or(mr,xr)})}return""}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.PDFNetworkStream=void 0;var nr=rr(1),ir=rr(20);const sr=200,ar=206;function cr(dr){const fr=dr.response;return typeof fr!="string"?fr:(0,nr.stringToBytes)(fr).buffer}class lr{constructor(fr,gr={}){this.url=fr,this.isHttp=/^https?:/i.test(fr),this.httpHeaders=this.isHttp&&gr.httpHeaders||Object.create(null),this.withCredentials=gr.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(fr,gr,br){const pr={begin:fr,end:gr};for(const mr in br)pr[mr]=br[mr];return this.request(pr)}requestFull(fr){return this.request(fr)}request(fr){const gr=new XMLHttpRequest,br=this.currXhrId++,pr=this.pendingRequests[br]={xhr:gr};gr.open("GET",this.url),gr.withCredentials=this.withCredentials;for(const mr in this.httpHeaders){const yr=this.httpHeaders[mr];yr!==void 0&&gr.setRequestHeader(mr,yr)}return this.isHttp&&"begin"in fr&&"end"in fr?(gr.setRequestHeader("Range",`bytes=${fr.begin}-${fr.end-1}`),pr.expectedStatus=ar):pr.expectedStatus=sr,gr.responseType="arraybuffer",fr.onError&&(gr.onerror=function(mr){fr.onError(gr.status)}),gr.onreadystatechange=this.onStateChange.bind(this,br),gr.onprogress=this.onProgress.bind(this,br),pr.onHeadersReceived=fr.onHeadersReceived,pr.onDone=fr.onDone,pr.onError=fr.onError,pr.onProgress=fr.onProgress,gr.send(null),br}onProgress(fr,gr){var pr;const br=this.pendingRequests[fr];br&&((pr=br.onProgress)==null||pr.call(br,gr))}onStateChange(fr,gr){var vr,_r,Er;const br=this.pendingRequests[fr];if(!br)return;const pr=br.xhr;if(pr.readyState>=2&&br.onHeadersReceived&&(br.onHeadersReceived(),delete br.onHeadersReceived),pr.readyState!==4||!(fr in this.pendingRequests))return;if(delete this.pendingRequests[fr],pr.status===0&&this.isHttp){(vr=br.onError)==null||vr.call(br,pr.status);return}const mr=pr.status||sr;if(!(mr===sr&&br.expectedStatus===ar)&&mr!==br.expectedStatus){(_r=br.onError)==null||_r.call(br,pr.status);return}const xr=cr(pr);if(mr===ar){const Tr=pr.getResponseHeader("Content-Range"),Rr=/bytes (\d+)-(\d+)\/(\d+)/.exec(Tr);br.onDone({begin:parseInt(Rr[1],10),chunk:xr})}else xr?br.onDone({begin:0,chunk:xr}):(Er=br.onError)==null||Er.call(br,pr.status)}getRequestXhr(fr){return this.pendingRequests[fr].xhr}isPendingRequest(fr){return fr in this.pendingRequests}abortRequest(fr){const gr=this.pendingRequests[fr].xhr;delete this.pendingRequests[fr],gr.abort()}}class or{constructor(fr){this._source=fr,this._manager=new lr(fr.url,{httpHeaders:fr.httpHeaders,withCredentials:fr.withCredentials}),this._rangeChunkSize=fr.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(fr){const gr=this._rangeRequestReaders.indexOf(fr);gr>=0&&this._rangeRequestReaders.splice(gr,1)}getFullReader(){return(0,nr.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ur(this._manager,this._source),this._fullRequestReader}getRangeReader(fr,gr){const br=new hr(this._manager,fr,gr);return br.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(br),br}cancelAllRequests(fr){var gr;(gr=this._fullRequestReader)==null||gr.cancel(fr);for(const br of this._rangeRequestReaders.slice(0))br.cancel(fr)}}er.PDFNetworkStream=or;class ur{constructor(fr,gr){this._manager=fr;const br={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=gr.url,this._fullRequestId=fr.requestFull(br),this._headersReceivedCapability=new nr.PromiseCapability,this._disableRange=gr.disableRange||!1,this._contentLength=gr.length,this._rangeChunkSize=gr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const fr=this._fullRequestId,gr=this._manager.getRequestXhr(fr),br=yr=>gr.getResponseHeader(yr),{allowRangeRequests:pr,suggestedLength:mr}=(0,ir.validateRangeRequestCapabilities)({getResponseHeader:br,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});pr&&(this._isRangeSupported=!0),this._contentLength=mr||this._contentLength,this._filename=(0,ir.extractFilenameFromHeader)(br),this._isRangeSupported&&this._manager.abortRequest(fr),this._headersReceivedCapability.resolve()}_onDone(fr){if(fr&&(this._requests.length>0?this._requests.shift().resolve({value:fr.chunk,done:!1}):this._cachedChunks.push(fr.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const gr of this._requests)gr.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(fr){this._storedError=(0,ir.createResponseStatusError)(fr,this._url),this._headersReceivedCapability.reject(this._storedError);for(const gr of this._requests)gr.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(fr){var gr;(gr=this.onProgress)==null||gr.call(this,{loaded:fr.loaded,total:fr.lengthComputable?fr.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const fr=new nr.PromiseCapability;return this._requests.push(fr),fr.promise}cancel(fr){this._done=!0,this._headersReceivedCapability.reject(fr);for(const gr of this._requests)gr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class hr{constructor(fr,gr,br){this._manager=fr;const pr={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=fr.url,this._requestId=fr.requestRange(gr,br,pr),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var fr;(fr=this.onClosed)==null||fr.call(this,this)}_onDone(fr){const gr=fr.chunk;this._requests.length>0?this._requests.shift().resolve({value:gr,done:!1}):this._queuedChunk=gr,this._done=!0;for(const br of this._requests)br.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(fr){this._storedError=(0,ir.createResponseStatusError)(fr,this._url);for(const gr of this._requests)gr.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(fr){var gr;this.isStreamingSupported||(gr=this.onProgress)==null||gr.call(this,{loaded:fr.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const gr=this._queuedChunk;return this._queuedChunk=null,{value:gr,done:!1}}if(this._done)return{value:void 0,done:!0};const fr=new nr.PromiseCapability;return this._requests.push(fr),fr.promise}cancel(fr){this._done=!0;for(const gr of this._requests)gr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.PDFNodeStream=void 0;var nr=rr(1),ir=rr(20);const sr=/^file:\/\/\/[a-zA-Z]:\//;function ar(br){const pr=require$$5,mr=pr.parse(br);return mr.protocol==="file:"||mr.host?mr:/^[a-z]:[/\\]/i.test(br)?pr.parse(`file:///${br}`):(mr.host||(mr.protocol="file:"),mr)}class cr{constructor(pr){this.source=pr,this.url=ar(pr.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&pr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var pr;return((pr=this._fullRequestReader)==null?void 0:pr._loaded)??0}getFullReader(){return(0,nr.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new fr(this):new hr(this),this._fullRequestReader}getRangeReader(pr,mr){if(mr<=this._progressiveDataLength)return null;const yr=this.isFsUrl?new gr(this,pr,mr):new dr(this,pr,mr);return this._rangeRequestReaders.push(yr),yr}cancelAllRequests(pr){var mr;(mr=this._fullRequestReader)==null||mr.cancel(pr);for(const yr of this._rangeRequestReaders.slice(0))yr.cancel(pr)}}er.PDFNodeStream=cr;class lr{constructor(pr){this._url=pr.url,this._done=!1,this._storedError=null,this.onProgress=null;const mr=pr.source;this._contentLength=mr.length,this._loaded=0,this._filename=null,this._disableRange=mr.disableRange||!1,this._rangeChunkSize=mr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!mr.disableStream,this._isRangeSupported=!mr.disableRange,this._readableStream=null,this._readCapability=new nr.PromiseCapability,this._headersCapability=new nr.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var yr;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const pr=this._readableStream.read();return pr===null?(this._readCapability=new nr.PromiseCapability,this.read()):(this._loaded+=pr.length,(yr=this.onProgress)==null||yr.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(pr).buffer,done:!1})}cancel(pr){if(!this._readableStream){this._error(pr);return}this._readableStream.destroy(pr)}_error(pr){this._storedError=pr,this._readCapability.resolve()}_setReadableStream(pr){this._readableStream=pr,pr.on("readable",()=>{this._readCapability.resolve()}),pr.on("end",()=>{pr.destroy(),this._done=!0,this._readCapability.resolve()}),pr.on("error",mr=>{this._error(mr)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new nr.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class or{constructor(pr){this._url=pr.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new nr.PromiseCapability;const mr=pr.source;this._isStreamingSupported=!mr.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var yr;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const pr=this._readableStream.read();return pr===null?(this._readCapability=new nr.PromiseCapability,this.read()):(this._loaded+=pr.length,(yr=this.onProgress)==null||yr.call(this,{loaded:this._loaded}),{value:new Uint8Array(pr).buffer,done:!1})}cancel(pr){if(!this._readableStream){this._error(pr);return}this._readableStream.destroy(pr)}_error(pr){this._storedError=pr,this._readCapability.resolve()}_setReadableStream(pr){this._readableStream=pr,pr.on("readable",()=>{this._readCapability.resolve()}),pr.on("end",()=>{pr.destroy(),this._done=!0,this._readCapability.resolve()}),pr.on("error",mr=>{this._error(mr)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function ur(br,pr){return{protocol:br.protocol,auth:br.auth,host:br.hostname,port:br.port,path:br.path,method:"GET",headers:pr}}class hr extends lr{constructor(pr){super(pr);const mr=yr=>{if(yr.statusCode===404){const Er=new nr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Er,this._headersCapability.reject(Er);return}this._headersCapability.resolve(),this._setReadableStream(yr);const xr=Er=>this._readableStream.headers[Er.toLowerCase()],{allowRangeRequests:vr,suggestedLength:_r}=(0,ir.validateRangeRequestCapabilities)({getResponseHeader:xr,isHttp:pr.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=vr,this._contentLength=_r||this._contentLength,this._filename=(0,ir.extractFilenameFromHeader)(xr)};if(this._request=null,this._url.protocol==="http:"){const yr=require$$5;this._request=yr.request(ur(this._url,pr.httpHeaders),mr)}else{const yr=require$$5;this._request=yr.request(ur(this._url,pr.httpHeaders),mr)}this._request.on("error",yr=>{this._storedError=yr,this._headersCapability.reject(yr)}),this._request.end()}}class dr extends or{constructor(pr,mr,yr){super(pr),this._httpHeaders={};for(const vr in pr.httpHeaders){const _r=pr.httpHeaders[vr];_r!==void 0&&(this._httpHeaders[vr]=_r)}this._httpHeaders.Range=`bytes=${mr}-${yr-1}`;const xr=vr=>{if(vr.statusCode===404){const _r=new nr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_r;return}this._setReadableStream(vr)};if(this._request=null,this._url.protocol==="http:"){const vr=require$$5;this._request=vr.request(ur(this._url,this._httpHeaders),xr)}else{const vr=require$$5;this._request=vr.request(ur(this._url,this._httpHeaders),xr)}this._request.on("error",vr=>{this._storedError=vr}),this._request.end()}}class fr extends lr{constructor(pr){super(pr);let mr=decodeURIComponent(this._url.path);sr.test(this._url.href)&&(mr=mr.replace(/^\//,""));const yr=require$$5;yr.lstat(mr,(xr,vr)=>{if(xr){xr.code==="ENOENT"&&(xr=new nr.MissingPDFException(`Missing PDF "${mr}".`)),this._storedError=xr,this._headersCapability.reject(xr);return}this._contentLength=vr.size,this._setReadableStream(yr.createReadStream(mr)),this._headersCapability.resolve()})}}class gr extends or{constructor(pr,mr,yr){super(pr);let xr=decodeURIComponent(this._url.path);sr.test(this._url.href)&&(xr=xr.replace(/^\//,""));const vr=require$$5;this._setReadableStream(vr.createReadStream(xr,{start:mr,end:yr-1}))}}},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.SVGGraphics=void 0;var nr=rr(6),ir=rr(1);const sr={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ar="http://www.w3.org/XML/1998/namespace",cr="http://www.w3.org/1999/xlink",lr=["butt","round","square"],or=["miter","round","bevel"],ur=function(vr,_r="",Er=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Er)return URL.createObjectURL(new Blob([vr],{type:_r}));const Tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Rr=`data:${_r};base64,`;for(let Nr=0,Dr=vr.length;Nr<Dr;Nr+=3){const Ir=vr[Nr]&255,Or=vr[Nr+1]&255,jr=vr[Nr+2]&255,Lr=Ir>>2,Cr=(Ir&3)<<4|Or>>4,wr=Nr+1<Dr?(Or&15)<<2|jr>>6:64,Pr=Nr+2<Dr?jr&63:64;Rr+=Tr[Lr]+Tr[Cr]+Tr[wr]+Tr[Pr]}return Rr},hr=function(){const vr=new Uint8Array([137,80,78,71,13,10,26,10]),_r=12,Er=new Int32Array(256);for(let jr=0;jr<256;jr++){let Lr=jr;for(let Cr=0;Cr<8;Cr++)Lr=Lr&1?3988292384^Lr>>1&2147483647:Lr>>1&2147483647;Er[jr]=Lr}function Tr(jr,Lr,Cr){let wr=-1;for(let Pr=Lr;Pr<Cr;Pr++){const Ar=(wr^jr[Pr])&255,Sr=Er[Ar];wr=wr>>>8^Sr}return wr^-1}function Rr(jr,Lr,Cr,wr){let Pr=wr;const Ar=Lr.length;Cr[Pr]=Ar>>24&255,Cr[Pr+1]=Ar>>16&255,Cr[Pr+2]=Ar>>8&255,Cr[Pr+3]=Ar&255,Pr+=4,Cr[Pr]=jr.charCodeAt(0)&255,Cr[Pr+1]=jr.charCodeAt(1)&255,Cr[Pr+2]=jr.charCodeAt(2)&255,Cr[Pr+3]=jr.charCodeAt(3)&255,Pr+=4,Cr.set(Lr,Pr),Pr+=Lr.length;const Sr=Tr(Cr,wr+4,Pr);Cr[Pr]=Sr>>24&255,Cr[Pr+1]=Sr>>16&255,Cr[Pr+2]=Sr>>8&255,Cr[Pr+3]=Sr&255}function Nr(jr,Lr,Cr){let wr=1,Pr=0;for(let Ar=Lr;Ar<Cr;++Ar)wr=(wr+(jr[Ar]&255))%65521,Pr=(Pr+wr)%65521;return Pr<<16|wr}function Dr(jr){if(!ir.isNodeJS)return Ir(jr);try{const Lr=parseInt(process.versions.node)>=8?jr:Buffer.from(jr),Cr=require$$5.deflateSync(Lr,{level:9});return Cr instanceof Uint8Array?Cr:new Uint8Array(Cr)}catch(Lr){(0,ir.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Lr)}return Ir(jr)}function Ir(jr){let Lr=jr.length;const Cr=65535,wr=Math.ceil(Lr/Cr),Pr=new Uint8Array(2+Lr+wr*5+4);let Ar=0;Pr[Ar++]=120,Pr[Ar++]=156;let Sr=0;for(;Lr>Cr;)Pr[Ar++]=0,Pr[Ar++]=255,Pr[Ar++]=255,Pr[Ar++]=0,Pr[Ar++]=0,Pr.set(jr.subarray(Sr,Sr+Cr),Ar),Ar+=Cr,Sr+=Cr,Lr-=Cr;Pr[Ar++]=1,Pr[Ar++]=Lr&255,Pr[Ar++]=Lr>>8&255,Pr[Ar++]=~Lr&65535&255,Pr[Ar++]=(~Lr&65535)>>8&255,Pr.set(jr.subarray(Sr),Ar),Ar+=jr.length-Sr;const Mr=Nr(jr,0,jr.length);return Pr[Ar++]=Mr>>24&255,Pr[Ar++]=Mr>>16&255,Pr[Ar++]=Mr>>8&255,Pr[Ar++]=Mr&255,Pr}function Or(jr,Lr,Cr,wr){const Pr=jr.width,Ar=jr.height;let Sr,Mr,qr;const $r=jr.data;switch(Lr){case ir.ImageKind.GRAYSCALE_1BPP:Mr=0,Sr=1,qr=Pr+7>>3;break;case ir.ImageKind.RGB_24BPP:Mr=2,Sr=8,qr=Pr*3;break;case ir.ImageKind.RGBA_32BPP:Mr=6,Sr=8,qr=Pr*4;break;default:throw new Error("invalid format")}const Br=new Uint8Array((1+qr)*Ar);let zr=0,Gr=0;for(let Zr=0;Zr<Ar;++Zr)Br[zr++]=0,Br.set($r.subarray(Gr,Gr+qr),zr),Gr+=qr,zr+=qr;if(Lr===ir.ImageKind.GRAYSCALE_1BPP&&wr){zr=0;for(let Zr=0;Zr<Ar;Zr++){zr++;for(let Jr=0;Jr<qr;Jr++)Br[zr++]^=255}}const Vr=new Uint8Array([Pr>>24&255,Pr>>16&255,Pr>>8&255,Pr&255,Ar>>24&255,Ar>>16&255,Ar>>8&255,Ar&255,Sr,Mr,0,0,0]),Xr=Dr(Br),Ur=vr.length+_r*3+Vr.length+Xr.length,Fr=new Uint8Array(Ur);let Kr=0;return Fr.set(vr,Kr),Kr+=vr.length,Rr("IHDR",Vr,Fr,Kr),Kr+=_r+Vr.length,Rr("IDATA",Xr,Fr,Kr),Kr+=_r+Xr.length,Rr("IEND",new Uint8Array(0),Fr,Kr),ur(Fr,"image/png",Cr)}return function(Lr,Cr,wr){const Pr=Lr.kind===void 0?ir.ImageKind.GRAYSCALE_1BPP:Lr.kind;return Or(Lr,Pr,Cr,wr)}}();class dr{constructor(){this.fontSizeScale=1,this.fontWeight=sr.fontWeight,this.fontSize=0,this.textMatrix=ir.IDENTITY_MATRIX,this.fontMatrix=ir.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=ir.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=sr.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(_r,Er){this.x=_r,this.y=Er}}function fr(vr){let _r=[];const Er=[];for(const Tr of vr){if(Tr.fn==="save"){_r.push({fnId:92,fn:"group",items:[]}),Er.push(_r),_r=_r.at(-1).items;continue}Tr.fn==="restore"?_r=Er.pop():_r.push(Tr)}return _r}function gr(vr){if(Number.isInteger(vr))return vr.toString();const _r=vr.toFixed(10);let Er=_r.length-1;if(_r[Er]!=="0")return _r;do Er--;while(_r[Er]==="0");return _r.substring(0,_r[Er]==="."?Er:Er+1)}function br(vr){if(vr[4]===0&&vr[5]===0){if(vr[1]===0&&vr[2]===0)return vr[0]===1&&vr[3]===1?"":`scale(${gr(vr[0])} ${gr(vr[3])})`;if(vr[0]===vr[3]&&vr[1]===-vr[2]){const _r=Math.acos(vr[0])*180/Math.PI;return`rotate(${gr(_r)})`}}else if(vr[0]===1&&vr[1]===0&&vr[2]===0&&vr[3]===1)return`translate(${gr(vr[4])} ${gr(vr[5])})`;return`matrix(${gr(vr[0])} ${gr(vr[1])} ${gr(vr[2])} ${gr(vr[3])} ${gr(vr[4])} ${gr(vr[5])})`}let pr=0,mr=0,yr=0;class xr{constructor(_r,Er,Tr=!1){(0,nr.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new nr.DOMSVGFactory,this.current=new dr,this.transformMatrix=ir.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_r,this.objs=Er,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Tr,this._operatorIdMapping=[];for(const Rr in ir.OPS)this._operatorIdMapping[ir.OPS[Rr]]=Rr}getObject(_r,Er=null){return typeof _r=="string"?_r.startsWith("g_")?this.commonObjs.get(_r):this.objs.get(_r):Er}save(){this.transformStack.push(this.transformMatrix);const _r=this.current;this.extraStack.push(_r),this.current=_r.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_r){this.save(),this.executeOpTree(_r),this.restore()}loadDependencies(_r){const Er=_r.fnArray,Tr=_r.argsArray;for(let Rr=0,Nr=Er.length;Rr<Nr;Rr++)if(Er[Rr]===ir.OPS.dependency)for(const Dr of Tr[Rr]){const Ir=Dr.startsWith("g_")?this.commonObjs:this.objs,Or=new Promise(jr=>{Ir.get(Dr,jr)});this.current.dependencies.push(Or)}return Promise.all(this.current.dependencies)}transform(_r,Er,Tr,Rr,Nr,Dr){const Ir=[_r,Er,Tr,Rr,Nr,Dr];this.transformMatrix=ir.Util.transform(this.transformMatrix,Ir),this.tgrp=null}getSVG(_r,Er){this.viewport=Er;const Tr=this._initialize(Er);return this.loadDependencies(_r).then(()=>(this.transformMatrix=ir.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_r)),Tr))}convertOpList(_r){const Er=this._operatorIdMapping,Tr=_r.argsArray,Rr=_r.fnArray,Nr=[];for(let Dr=0,Ir=Rr.length;Dr<Ir;Dr++){const Or=Rr[Dr];Nr.push({fnId:Or,fn:Er[Or],args:Tr[Dr]})}return fr(Nr)}executeOpTree(_r){for(const Er of _r){const Tr=Er.fn,Rr=Er.fnId,Nr=Er.args;switch(Rr|0){case ir.OPS.beginText:this.beginText();break;case ir.OPS.dependency:break;case ir.OPS.setLeading:this.setLeading(Nr);break;case ir.OPS.setLeadingMoveText:this.setLeadingMoveText(Nr[0],Nr[1]);break;case ir.OPS.setFont:this.setFont(Nr);break;case ir.OPS.showText:this.showText(Nr[0]);break;case ir.OPS.showSpacedText:this.showText(Nr[0]);break;case ir.OPS.endText:this.endText();break;case ir.OPS.moveText:this.moveText(Nr[0],Nr[1]);break;case ir.OPS.setCharSpacing:this.setCharSpacing(Nr[0]);break;case ir.OPS.setWordSpacing:this.setWordSpacing(Nr[0]);break;case ir.OPS.setHScale:this.setHScale(Nr[0]);break;case ir.OPS.setTextMatrix:this.setTextMatrix(Nr[0],Nr[1],Nr[2],Nr[3],Nr[4],Nr[5]);break;case ir.OPS.setTextRise:this.setTextRise(Nr[0]);break;case ir.OPS.setTextRenderingMode:this.setTextRenderingMode(Nr[0]);break;case ir.OPS.setLineWidth:this.setLineWidth(Nr[0]);break;case ir.OPS.setLineJoin:this.setLineJoin(Nr[0]);break;case ir.OPS.setLineCap:this.setLineCap(Nr[0]);break;case ir.OPS.setMiterLimit:this.setMiterLimit(Nr[0]);break;case ir.OPS.setFillRGBColor:this.setFillRGBColor(Nr[0],Nr[1],Nr[2]);break;case ir.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Nr[0],Nr[1],Nr[2]);break;case ir.OPS.setStrokeColorN:this.setStrokeColorN(Nr);break;case ir.OPS.setFillColorN:this.setFillColorN(Nr);break;case ir.OPS.shadingFill:this.shadingFill(Nr[0]);break;case ir.OPS.setDash:this.setDash(Nr[0],Nr[1]);break;case ir.OPS.setRenderingIntent:this.setRenderingIntent(Nr[0]);break;case ir.OPS.setFlatness:this.setFlatness(Nr[0]);break;case ir.OPS.setGState:this.setGState(Nr[0]);break;case ir.OPS.fill:this.fill();break;case ir.OPS.eoFill:this.eoFill();break;case ir.OPS.stroke:this.stroke();break;case ir.OPS.fillStroke:this.fillStroke();break;case ir.OPS.eoFillStroke:this.eoFillStroke();break;case ir.OPS.clip:this.clip("nonzero");break;case ir.OPS.eoClip:this.clip("evenodd");break;case ir.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case ir.OPS.paintImageXObject:this.paintImageXObject(Nr[0]);break;case ir.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Nr[0]);break;case ir.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Nr[0]);break;case ir.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Nr[0],Nr[1]);break;case ir.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case ir.OPS.closePath:this.closePath();break;case ir.OPS.closeStroke:this.closeStroke();break;case ir.OPS.closeFillStroke:this.closeFillStroke();break;case ir.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case ir.OPS.nextLine:this.nextLine();break;case ir.OPS.transform:this.transform(Nr[0],Nr[1],Nr[2],Nr[3],Nr[4],Nr[5]);break;case ir.OPS.constructPath:this.constructPath(Nr[0],Nr[1]);break;case ir.OPS.endPath:this.endPath();break;case 92:this.group(Er.items);break;default:(0,ir.warn)(`Unimplemented operator ${Tr}`);break}}}setWordSpacing(_r){this.current.wordSpacing=_r}setCharSpacing(_r){this.current.charSpacing=_r}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_r,Er,Tr,Rr,Nr,Dr){const Ir=this.current;Ir.textMatrix=Ir.lineMatrix=[_r,Er,Tr,Rr,Nr,Dr],Ir.textMatrixScale=Math.hypot(_r,Er),Ir.x=Ir.lineX=0,Ir.y=Ir.lineY=0,Ir.xcoords=[],Ir.ycoords=[],Ir.tspan=this.svgFactory.createElement("svg:tspan"),Ir.tspan.setAttributeNS(null,"font-family",Ir.fontFamily),Ir.tspan.setAttributeNS(null,"font-size",`${gr(Ir.fontSize)}px`),Ir.tspan.setAttributeNS(null,"y",gr(-Ir.y)),Ir.txtElement=this.svgFactory.createElement("svg:text"),Ir.txtElement.append(Ir.tspan)}beginText(){const _r=this.current;_r.x=_r.lineX=0,_r.y=_r.lineY=0,_r.textMatrix=ir.IDENTITY_MATRIX,_r.lineMatrix=ir.IDENTITY_MATRIX,_r.textMatrixScale=1,_r.tspan=this.svgFactory.createElement("svg:tspan"),_r.txtElement=this.svgFactory.createElement("svg:text"),_r.txtgrp=this.svgFactory.createElement("svg:g"),_r.xcoords=[],_r.ycoords=[]}moveText(_r,Er){const Tr=this.current;Tr.x=Tr.lineX+=_r,Tr.y=Tr.lineY+=Er,Tr.xcoords=[],Tr.ycoords=[],Tr.tspan=this.svgFactory.createElement("svg:tspan"),Tr.tspan.setAttributeNS(null,"font-family",Tr.fontFamily),Tr.tspan.setAttributeNS(null,"font-size",`${gr(Tr.fontSize)}px`),Tr.tspan.setAttributeNS(null,"y",gr(-Tr.y))}showText(_r){const Er=this.current,Tr=Er.font,Rr=Er.fontSize;if(Rr===0)return;const Nr=Er.fontSizeScale,Dr=Er.charSpacing,Ir=Er.wordSpacing,Or=Er.fontDirection,jr=Er.textHScale*Or,Lr=Tr.vertical,Cr=Lr?1:-1,wr=Tr.defaultVMetrics,Pr=Rr*Er.fontMatrix[0];let Ar=0;for(const qr of _r){if(qr===null){Ar+=Or*Ir;continue}else if(typeof qr=="number"){Ar+=Cr*qr*Rr/1e3;continue}const $r=(qr.isSpace?Ir:0)+Dr,Br=qr.fontChar;let zr,Gr,Vr=qr.width;if(Lr){let Ur;const Fr=qr.vmetric||wr;Ur=qr.vmetric?Fr[1]:Vr*.5,Ur=-Ur*Pr;const Kr=Fr[2]*Pr;Vr=Fr?-Fr[0]:Vr,zr=Ur/Nr,Gr=(Ar+Kr)/Nr}else zr=Ar/Nr,Gr=0;(qr.isInFont||Tr.missingFile)&&(Er.xcoords.push(Er.x+zr),Lr&&Er.ycoords.push(-Er.y+Gr),Er.tspan.textContent+=Br);const Xr=Lr?Vr*Pr-$r*Or:Vr*Pr+$r*Or;Ar+=Xr}Er.tspan.setAttributeNS(null,"x",Er.xcoords.map(gr).join(" ")),Lr?Er.tspan.setAttributeNS(null,"y",Er.ycoords.map(gr).join(" ")):Er.tspan.setAttributeNS(null,"y",gr(-Er.y)),Lr?Er.y-=Ar:Er.x+=Ar*jr,Er.tspan.setAttributeNS(null,"font-family",Er.fontFamily),Er.tspan.setAttributeNS(null,"font-size",`${gr(Er.fontSize)}px`),Er.fontStyle!==sr.fontStyle&&Er.tspan.setAttributeNS(null,"font-style",Er.fontStyle),Er.fontWeight!==sr.fontWeight&&Er.tspan.setAttributeNS(null,"font-weight",Er.fontWeight);const Sr=Er.textRenderingMode&ir.TextRenderingMode.FILL_STROKE_MASK;if(Sr===ir.TextRenderingMode.FILL||Sr===ir.TextRenderingMode.FILL_STROKE?(Er.fillColor!==sr.fillColor&&Er.tspan.setAttributeNS(null,"fill",Er.fillColor),Er.fillAlpha<1&&Er.tspan.setAttributeNS(null,"fill-opacity",Er.fillAlpha)):Er.textRenderingMode===ir.TextRenderingMode.ADD_TO_PATH?Er.tspan.setAttributeNS(null,"fill","transparent"):Er.tspan.setAttributeNS(null,"fill","none"),Sr===ir.TextRenderingMode.STROKE||Sr===ir.TextRenderingMode.FILL_STROKE){const qr=1/(Er.textMatrixScale||1);this._setStrokeAttributes(Er.tspan,qr)}let Mr=Er.textMatrix;Er.textRise!==0&&(Mr=Mr.slice(),Mr[5]+=Er.textRise),Er.txtElement.setAttributeNS(null,"transform",`${br(Mr)} scale(${gr(jr)}, -1)`),Er.txtElement.setAttributeNS(ar,"xml:space","preserve"),Er.txtElement.append(Er.tspan),Er.txtgrp.append(Er.txtElement),this._ensureTransformGroup().append(Er.txtElement)}setLeadingMoveText(_r,Er){this.setLeading(-Er),this.moveText(_r,Er)}addFontStyle(_r){if(!_r.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Er=ur(_r.data,_r.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_r.loadedName}"; src: url(${Er}); }
`}setFont(_r){const Er=this.current,Tr=this.commonObjs.get(_r[0]);let Rr=_r[1];Er.font=Tr,this.embedFonts&&!Tr.missingFile&&!this.embeddedFonts[Tr.loadedName]&&(this.addFontStyle(Tr),this.embeddedFonts[Tr.loadedName]=Tr),Er.fontMatrix=Tr.fontMatrix||ir.FONT_IDENTITY_MATRIX;let Nr="normal";Tr.black?Nr="900":Tr.bold&&(Nr="bold");const Dr=Tr.italic?"italic":"normal";Rr<0?(Rr=-Rr,Er.fontDirection=-1):Er.fontDirection=1,Er.fontSize=Rr,Er.fontFamily=Tr.loadedName,Er.fontWeight=Nr,Er.fontStyle=Dr,Er.tspan=this.svgFactory.createElement("svg:tspan"),Er.tspan.setAttributeNS(null,"y",gr(-Er.y)),Er.xcoords=[],Er.ycoords=[]}endText(){var Er;const _r=this.current;_r.textRenderingMode&ir.TextRenderingMode.ADD_TO_PATH_FLAG&&((Er=_r.txtElement)!=null&&Er.hasChildNodes())&&(_r.element=_r.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_r){_r>0&&(this.current.lineWidth=_r)}setLineCap(_r){this.current.lineCap=lr[_r]}setLineJoin(_r){this.current.lineJoin=or[_r]}setMiterLimit(_r){this.current.miterLimit=_r}setStrokeAlpha(_r){this.current.strokeAlpha=_r}setStrokeRGBColor(_r,Er,Tr){this.current.strokeColor=ir.Util.makeHexColor(_r,Er,Tr)}setFillAlpha(_r){this.current.fillAlpha=_r}setFillRGBColor(_r,Er,Tr){this.current.fillColor=ir.Util.makeHexColor(_r,Er,Tr),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_r){this.current.strokeColor=this._makeColorN_Pattern(_r)}setFillColorN(_r){this.current.fillColor=this._makeColorN_Pattern(_r)}shadingFill(_r){const{width:Er,height:Tr}=this.viewport,Rr=ir.Util.inverseTransform(this.transformMatrix),[Nr,Dr,Ir,Or]=ir.Util.getAxialAlignedBoundingBox([0,0,Er,Tr],Rr),jr=this.svgFactory.createElement("svg:rect");jr.setAttributeNS(null,"x",Nr),jr.setAttributeNS(null,"y",Dr),jr.setAttributeNS(null,"width",Ir-Nr),jr.setAttributeNS(null,"height",Or-Dr),jr.setAttributeNS(null,"fill",this._makeShadingPattern(_r)),this.current.fillAlpha<1&&jr.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(jr)}_makeColorN_Pattern(_r){return _r[0]==="TilingPattern"?this._makeTilingPattern(_r):this._makeShadingPattern(_r)}_makeTilingPattern(_r){const Er=_r[1],Tr=_r[2],Rr=_r[3]||ir.IDENTITY_MATRIX,[Nr,Dr,Ir,Or]=_r[4],jr=_r[5],Lr=_r[6],Cr=_r[7],wr=`shading${yr++}`,[Pr,Ar,Sr,Mr]=ir.Util.normalizeRect([...ir.Util.applyTransform([Nr,Dr],Rr),...ir.Util.applyTransform([Ir,Or],Rr)]),[qr,$r]=ir.Util.singularValueDecompose2dScale(Rr),Br=jr*qr,zr=Lr*$r,Gr=this.svgFactory.createElement("svg:pattern");Gr.setAttributeNS(null,"id",wr),Gr.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Gr.setAttributeNS(null,"width",Br),Gr.setAttributeNS(null,"height",zr),Gr.setAttributeNS(null,"x",`${Pr}`),Gr.setAttributeNS(null,"y",`${Ar}`);const Vr=this.svg,Xr=this.transformMatrix,Ur=this.current.fillColor,Fr=this.current.strokeColor,Kr=this.svgFactory.create(Sr-Pr,Mr-Ar);if(this.svg=Kr,this.transformMatrix=Rr,Cr===2){const Zr=ir.Util.makeHexColor(...Er);this.current.fillColor=Zr,this.current.strokeColor=Zr}return this.executeOpTree(this.convertOpList(Tr)),this.svg=Vr,this.transformMatrix=Xr,this.current.fillColor=Ur,this.current.strokeColor=Fr,Gr.append(Kr.childNodes[0]),this.defs.append(Gr),`url(#${wr})`}_makeShadingPattern(_r){switch(typeof _r=="string"&&(_r=this.objs.get(_r)),_r[0]){case"RadialAxial":const Er=`shading${yr++}`,Tr=_r[3];let Rr;switch(_r[1]){case"axial":const Nr=_r[4],Dr=_r[5];Rr=this.svgFactory.createElement("svg:linearGradient"),Rr.setAttributeNS(null,"id",Er),Rr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Rr.setAttributeNS(null,"x1",Nr[0]),Rr.setAttributeNS(null,"y1",Nr[1]),Rr.setAttributeNS(null,"x2",Dr[0]),Rr.setAttributeNS(null,"y2",Dr[1]);break;case"radial":const Ir=_r[4],Or=_r[5],jr=_r[6],Lr=_r[7];Rr=this.svgFactory.createElement("svg:radialGradient"),Rr.setAttributeNS(null,"id",Er),Rr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Rr.setAttributeNS(null,"cx",Or[0]),Rr.setAttributeNS(null,"cy",Or[1]),Rr.setAttributeNS(null,"r",Lr),Rr.setAttributeNS(null,"fx",Ir[0]),Rr.setAttributeNS(null,"fy",Ir[1]),Rr.setAttributeNS(null,"fr",jr);break;default:throw new Error(`Unknown RadialAxial type: ${_r[1]}`)}for(const Nr of Tr){const Dr=this.svgFactory.createElement("svg:stop");Dr.setAttributeNS(null,"offset",Nr[0]),Dr.setAttributeNS(null,"stop-color",Nr[1]),Rr.append(Dr)}return this.defs.append(Rr),`url(#${Er})`;case"Mesh":return(0,ir.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_r[0]}`)}}setDash(_r,Er){this.current.dashArray=_r,this.current.dashPhase=Er}constructPath(_r,Er){const Tr=this.current;let Rr=Tr.x,Nr=Tr.y,Dr=[],Ir=0;for(const Or of _r)switch(Or|0){case ir.OPS.rectangle:Rr=Er[Ir++],Nr=Er[Ir++];const jr=Er[Ir++],Lr=Er[Ir++],Cr=Rr+jr,wr=Nr+Lr;Dr.push("M",gr(Rr),gr(Nr),"L",gr(Cr),gr(Nr),"L",gr(Cr),gr(wr),"L",gr(Rr),gr(wr),"Z");break;case ir.OPS.moveTo:Rr=Er[Ir++],Nr=Er[Ir++],Dr.push("M",gr(Rr),gr(Nr));break;case ir.OPS.lineTo:Rr=Er[Ir++],Nr=Er[Ir++],Dr.push("L",gr(Rr),gr(Nr));break;case ir.OPS.curveTo:Rr=Er[Ir+4],Nr=Er[Ir+5],Dr.push("C",gr(Er[Ir]),gr(Er[Ir+1]),gr(Er[Ir+2]),gr(Er[Ir+3]),gr(Rr),gr(Nr)),Ir+=6;break;case ir.OPS.curveTo2:Dr.push("C",gr(Rr),gr(Nr),gr(Er[Ir]),gr(Er[Ir+1]),gr(Er[Ir+2]),gr(Er[Ir+3])),Rr=Er[Ir+2],Nr=Er[Ir+3],Ir+=4;break;case ir.OPS.curveTo3:Rr=Er[Ir+2],Nr=Er[Ir+3],Dr.push("C",gr(Er[Ir]),gr(Er[Ir+1]),gr(Rr),gr(Nr),gr(Rr),gr(Nr)),Ir+=4;break;case ir.OPS.closePath:Dr.push("Z");break}Dr=Dr.join(" "),Tr.path&&_r.length>0&&_r[0]!==ir.OPS.rectangle&&_r[0]!==ir.OPS.moveTo?Dr=Tr.path.getAttributeNS(null,"d")+Dr:(Tr.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Tr.path)),Tr.path.setAttributeNS(null,"d",Dr),Tr.path.setAttributeNS(null,"fill","none"),Tr.element=Tr.path,Tr.setCurrentPoint(Rr,Nr)}endPath(){const _r=this.current;if(_r.path=null,!this.pendingClip)return;if(!_r.element){this.pendingClip=null;return}const Er=`clippath${pr++}`,Tr=this.svgFactory.createElement("svg:clipPath");Tr.setAttributeNS(null,"id",Er),Tr.setAttributeNS(null,"transform",br(this.transformMatrix));const Rr=_r.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Rr.setAttributeNS(null,"clip-rule","evenodd"):Rr.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Tr.append(Rr),this.defs.append(Tr),_r.activeClipUrl){_r.clipGroup=null;for(const Nr of this.extraStack)Nr.clipGroup=null;Tr.setAttributeNS(null,"clip-path",_r.activeClipUrl)}_r.activeClipUrl=`url(#${Er})`,this.tgrp=null}clip(_r){this.pendingClip=_r}closePath(){const _r=this.current;if(_r.path){const Er=`${_r.path.getAttributeNS(null,"d")}Z`;_r.path.setAttributeNS(null,"d",Er)}}setLeading(_r){this.current.leading=-_r}setTextRise(_r){this.current.textRise=_r}setTextRenderingMode(_r){this.current.textRenderingMode=_r}setHScale(_r){this.current.textHScale=_r/100}setRenderingIntent(_r){}setFlatness(_r){}setGState(_r){for(const[Er,Tr]of _r)switch(Er){case"LW":this.setLineWidth(Tr);break;case"LC":this.setLineCap(Tr);break;case"LJ":this.setLineJoin(Tr);break;case"ML":this.setMiterLimit(Tr);break;case"D":this.setDash(Tr[0],Tr[1]);break;case"RI":this.setRenderingIntent(Tr);break;case"FL":this.setFlatness(Tr);break;case"Font":this.setFont(Tr);break;case"CA":this.setStrokeAlpha(Tr);break;case"ca":this.setFillAlpha(Tr);break;default:(0,ir.warn)(`Unimplemented graphic state operator ${Er}`);break}}fill(){const _r=this.current;_r.element&&(_r.element.setAttributeNS(null,"fill",_r.fillColor),_r.element.setAttributeNS(null,"fill-opacity",_r.fillAlpha),this.endPath())}stroke(){const _r=this.current;_r.element&&(this._setStrokeAttributes(_r.element),_r.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_r,Er=1){const Tr=this.current;let Rr=Tr.dashArray;Er!==1&&Rr.length>0&&(Rr=Rr.map(function(Nr){return Er*Nr})),_r.setAttributeNS(null,"stroke",Tr.strokeColor),_r.setAttributeNS(null,"stroke-opacity",Tr.strokeAlpha),_r.setAttributeNS(null,"stroke-miterlimit",gr(Tr.miterLimit)),_r.setAttributeNS(null,"stroke-linecap",Tr.lineCap),_r.setAttributeNS(null,"stroke-linejoin",Tr.lineJoin),_r.setAttributeNS(null,"stroke-width",gr(Er*Tr.lineWidth)+"px"),_r.setAttributeNS(null,"stroke-dasharray",Rr.map(gr).join(" ")),_r.setAttributeNS(null,"stroke-dashoffset",gr(Er*Tr.dashPhase)+"px")}eoFill(){var _r;(_r=this.current.element)==null||_r.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var _r;(_r=this.current.element)==null||_r.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const _r=this.svgFactory.createElement("svg:rect");_r.setAttributeNS(null,"x","0"),_r.setAttributeNS(null,"y","0"),_r.setAttributeNS(null,"width","1px"),_r.setAttributeNS(null,"height","1px"),_r.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_r)}paintImageXObject(_r){const Er=this.getObject(_r);if(!Er){(0,ir.warn)(`Dependent image with object ID ${_r} is not ready yet`);return}this.paintInlineImageXObject(Er)}paintInlineImageXObject(_r,Er){const Tr=_r.width,Rr=_r.height,Nr=hr(_r,this.forceDataSchema,!!Er),Dr=this.svgFactory.createElement("svg:rect");Dr.setAttributeNS(null,"x","0"),Dr.setAttributeNS(null,"y","0"),Dr.setAttributeNS(null,"width",gr(Tr)),Dr.setAttributeNS(null,"height",gr(Rr)),this.current.element=Dr,this.clip("nonzero");const Ir=this.svgFactory.createElement("svg:image");Ir.setAttributeNS(cr,"xlink:href",Nr),Ir.setAttributeNS(null,"x","0"),Ir.setAttributeNS(null,"y",gr(-Rr)),Ir.setAttributeNS(null,"width",gr(Tr)+"px"),Ir.setAttributeNS(null,"height",gr(Rr)+"px"),Ir.setAttributeNS(null,"transform",`scale(${gr(1/Tr)} ${gr(-1/Rr)})`),Er?Er.append(Ir):this._ensureTransformGroup().append(Ir)}paintImageMaskXObject(_r){const Er=this.getObject(_r.data,_r);if(Er.bitmap){(0,ir.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Tr=this.current,Rr=Er.width,Nr=Er.height,Dr=Tr.fillColor;Tr.maskId=`mask${mr++}`;const Ir=this.svgFactory.createElement("svg:mask");Ir.setAttributeNS(null,"id",Tr.maskId);const Or=this.svgFactory.createElement("svg:rect");Or.setAttributeNS(null,"x","0"),Or.setAttributeNS(null,"y","0"),Or.setAttributeNS(null,"width",gr(Rr)),Or.setAttributeNS(null,"height",gr(Nr)),Or.setAttributeNS(null,"fill",Dr),Or.setAttributeNS(null,"mask",`url(#${Tr.maskId})`),this.defs.append(Ir),this._ensureTransformGroup().append(Or),this.paintInlineImageXObject(Er,Ir)}paintFormXObjectBegin(_r,Er){if(Array.isArray(_r)&&_r.length===6&&this.transform(_r[0],_r[1],_r[2],_r[3],_r[4],_r[5]),Er){const Tr=Er[2]-Er[0],Rr=Er[3]-Er[1],Nr=this.svgFactory.createElement("svg:rect");Nr.setAttributeNS(null,"x",Er[0]),Nr.setAttributeNS(null,"y",Er[1]),Nr.setAttributeNS(null,"width",gr(Tr)),Nr.setAttributeNS(null,"height",gr(Rr)),this.current.element=Nr,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_r){const Er=this.svgFactory.create(_r.width,_r.height),Tr=this.svgFactory.createElement("svg:defs");Er.append(Tr),this.defs=Tr;const Rr=this.svgFactory.createElement("svg:g");return Rr.setAttributeNS(null,"transform",br(_r.transform)),Er.append(Rr),this.svg=Rr,Er}_ensureClipGroup(){if(!this.current.clipGroup){const _r=this.svgFactory.createElement("svg:g");_r.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_r),this.current.clipGroup=_r}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",br(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}er.SVGGraphics=xr},(tr,er)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.XfaText=void 0;class rr{static textContent(ir){const sr=[],ar={items:sr,styles:Object.create(null)};function cr(lr){var hr;if(!lr)return;let or=null;const ur=lr.name;if(ur==="#text")or=lr.value;else if(rr.shouldBuildText(ur))(hr=lr==null?void 0:lr.attributes)!=null&&hr.textContent?or=lr.attributes.textContent:lr.value&&(or=lr.value);else return;if(or!==null&&sr.push({str:or}),!!lr.children)for(const dr of lr.children)cr(dr)}return cr(ir),ar}static shouldBuildText(ir){return!(ir==="textarea"||ir==="input"||ir==="option"||ir==="select")}}er.XfaText=rr},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.TextLayerRenderTask=void 0,er.renderTextLayer=br,er.updateTextLayer=pr;var nr=rr(1),ir=rr(6);const sr=1e5,ar=30,cr=.8,lr=new Map;function or(mr,yr){let xr;if(yr&&nr.FeatureTest.isOffscreenCanvasSupported)xr=new OffscreenCanvas(mr,mr).getContext("2d",{alpha:!1});else{const vr=document.createElement("canvas");vr.width=vr.height=mr,xr=vr.getContext("2d",{alpha:!1})}return xr}function ur(mr,yr){const xr=lr.get(mr);if(xr)return xr;const vr=or(ar,yr);vr.font=`${ar}px ${mr}`;const _r=vr.measureText("");let Er=_r.fontBoundingBoxAscent,Tr=Math.abs(_r.fontBoundingBoxDescent);if(Er){const Nr=Er/(Er+Tr);return lr.set(mr,Nr),vr.canvas.width=vr.canvas.height=0,Nr}vr.strokeStyle="red",vr.clearRect(0,0,ar,ar),vr.strokeText("g",0,0);let Rr=vr.getImageData(0,0,ar,ar).data;Tr=0;for(let Nr=Rr.length-1-3;Nr>=0;Nr-=4)if(Rr[Nr]>0){Tr=Math.ceil(Nr/4/ar);break}vr.clearRect(0,0,ar,ar),vr.strokeText("A",0,ar),Rr=vr.getImageData(0,0,ar,ar).data,Er=0;for(let Nr=0,Dr=Rr.length;Nr<Dr;Nr+=4)if(Rr[Nr]>0){Er=ar-Math.floor(Nr/4/ar);break}if(vr.canvas.width=vr.canvas.height=0,Er){const Nr=Er/(Er+Tr);return lr.set(mr,Nr),Nr}return lr.set(mr,cr),cr}function hr(mr,yr,xr){const vr=document.createElement("span"),_r={angle:0,canvasWidth:0,hasText:yr.str!=="",hasEOL:yr.hasEOL,fontSize:0};mr._textDivs.push(vr);const Er=nr.Util.transform(mr._transform,yr.transform);let Tr=Math.atan2(Er[1],Er[0]);const Rr=xr[yr.fontName];Rr.vertical&&(Tr+=Math.PI/2);const Nr=Math.hypot(Er[2],Er[3]),Dr=Nr*ur(Rr.fontFamily,mr._isOffscreenCanvasSupported);let Ir,Or;Tr===0?(Ir=Er[4],Or=Er[5]-Dr):(Ir=Er[4]+Dr*Math.sin(Tr),Or=Er[5]-Dr*Math.cos(Tr));const jr="calc(var(--scale-factor)*",Lr=vr.style;mr._container===mr._rootContainer?(Lr.left=`${(100*Ir/mr._pageWidth).toFixed(2)}%`,Lr.top=`${(100*Or/mr._pageHeight).toFixed(2)}%`):(Lr.left=`${jr}${Ir.toFixed(2)}px)`,Lr.top=`${jr}${Or.toFixed(2)}px)`),Lr.fontSize=`${jr}${Nr.toFixed(2)}px)`,Lr.fontFamily=Rr.fontFamily,_r.fontSize=Nr,vr.setAttribute("role","presentation"),vr.textContent=yr.str,vr.dir=yr.dir,mr._fontInspectorEnabled&&(vr.dataset.fontName=yr.fontName),Tr!==0&&(_r.angle=Tr*(180/Math.PI));let Cr=!1;if(yr.str.length>1)Cr=!0;else if(yr.str!==" "&&yr.transform[0]!==yr.transform[3]){const wr=Math.abs(yr.transform[0]),Pr=Math.abs(yr.transform[3]);wr!==Pr&&Math.max(wr,Pr)/Math.min(wr,Pr)>1.5&&(Cr=!0)}Cr&&(_r.canvasWidth=Rr.vertical?yr.height:yr.width),mr._textDivProperties.set(vr,_r),mr._isReadableStream&&mr._layoutText(vr)}function dr(mr){const{div:yr,scale:xr,properties:vr,ctx:_r,prevFontSize:Er,prevFontFamily:Tr}=mr,{style:Rr}=yr;let Nr="";if(vr.canvasWidth!==0&&vr.hasText){const{fontFamily:Dr}=Rr,{canvasWidth:Ir,fontSize:Or}=vr;(Er!==Or||Tr!==Dr)&&(_r.font=`${Or*xr}px ${Dr}`,mr.prevFontSize=Or,mr.prevFontFamily=Dr);const{width:jr}=_r.measureText(yr.textContent);jr>0&&(Nr=`scaleX(${Ir*xr/jr})`)}vr.angle!==0&&(Nr=`rotate(${vr.angle}deg) ${Nr}`),Nr.length>0&&(Rr.transform=Nr)}function fr(mr){if(mr._canceled)return;const yr=mr._textDivs,xr=mr._capability;if(yr.length>sr){xr.resolve();return}if(!mr._isReadableStream)for(const _r of yr)mr._layoutText(_r);xr.resolve()}class gr{constructor({textContentSource:yr,container:xr,viewport:vr,textDivs:_r,textDivProperties:Er,textContentItemsStr:Tr,isOffscreenCanvasSupported:Rr}){var jr;this._textContentSource=yr,this._isReadableStream=yr instanceof ReadableStream,this._container=this._rootContainer=xr,this._textDivs=_r||[],this._textContentItemsStr=Tr||[],this._isOffscreenCanvasSupported=Rr,this._fontInspectorEnabled=!!((jr=globalThis.FontInspector)!=null&&jr.enabled),this._reader=null,this._textDivProperties=Er||new WeakMap,this._canceled=!1,this._capability=new nr.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:vr.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:or(0,Rr)};const{pageWidth:Nr,pageHeight:Dr,pageX:Ir,pageY:Or}=vr.rawDims;this._transform=[1,0,0,-1,-Ir,Or+Dr],this._pageWidth=Nr,this._pageHeight=Dr,(0,ir.setLayerDimensions)(xr,vr),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new nr.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new nr.AbortException("TextLayer task cancelled."))}_processItems(yr,xr){for(const vr of yr){if(vr.str===void 0){if(vr.type==="beginMarkedContentProps"||vr.type==="beginMarkedContent"){const _r=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),vr.id!==null&&this._container.setAttribute("id",`${vr.id}`),_r.append(this._container)}else vr.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(vr.str),hr(this,vr,xr)}}_layoutText(yr){const xr=this._layoutTextParams.properties=this._textDivProperties.get(yr);if(this._layoutTextParams.div=yr,dr(this._layoutTextParams),xr.hasText&&this._container.append(yr),xr.hasEOL){const vr=document.createElement("br");vr.setAttribute("role","presentation"),this._container.append(vr)}}_render(){const yr=new nr.PromiseCapability;let xr=Object.create(null);if(this._isReadableStream){const vr=()=>{this._reader.read().then(({value:_r,done:Er})=>{if(Er){yr.resolve();return}Object.assign(xr,_r.styles),this._processItems(_r.items,xr),vr()},yr.reject)};this._reader=this._textContentSource.getReader(),vr()}else if(this._textContentSource){const{items:vr,styles:_r}=this._textContentSource;this._processItems(vr,_r),yr.resolve()}else throw new Error('No "textContentSource" parameter specified.');yr.promise.then(()=>{xr=null,fr(this)},this._capability.reject)}}er.TextLayerRenderTask=gr;function br(mr){!mr.textContentSource&&(mr.textContent||mr.textContentStream)&&((0,ir.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),mr.textContentSource=mr.textContent||mr.textContentStream);const{container:yr,viewport:xr}=mr,vr=getComputedStyle(yr),_r=vr.getPropertyValue("visibility"),Er=parseFloat(vr.getPropertyValue("--scale-factor"));_r==="visible"&&(!Er||Math.abs(Er-xr.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Tr=new gr(mr);return Tr._render(),Tr}function pr({container:mr,viewport:yr,textDivs:xr,textDivProperties:vr,isOffscreenCanvasSupported:_r,mustRotate:Er=!0,mustRescale:Tr=!0}){if(Er&&(0,ir.setLayerDimensions)(mr,{rotation:yr.rotation}),Tr){const Rr=or(0,_r),Dr={prevFontSize:null,prevFontFamily:null,div:null,scale:yr.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Rr};for(const Ir of xr)Dr.properties=vr.get(Ir),Dr.div=Ir,dr(Dr)}}},(tr,er,rr)=>{var ur,hr,dr,fr,gr,br,pr,mr,yr,xr,vr,c0,xm,u0,d0;Object.defineProperty(er,"__esModule",{value:!0}),er.AnnotationEditorLayer=void 0;var nr=rr(1),ir=rr(4),sr=rr(28),ar=rr(33),cr=rr(6),lr=rr(34);const Nr=class Nr{constructor({uiManager:Ir,pageIndex:Or,div:jr,accessibilityManager:Lr,annotationLayer:Cr,viewport:wr,l10n:Pr}){ps(this,vr);ps(this,ur);ps(this,hr,!1);ps(this,dr,null);ps(this,fr,this.pointerup.bind(this));ps(this,gr,this.pointerdown.bind(this));ps(this,br,new Map);ps(this,pr,!1);ps(this,mr,!1);ps(this,yr,!1);ps(this,xr);const Ar=[sr.FreeTextEditor,ar.InkEditor,lr.StampEditor];if(!Nr._initialized){Nr._initialized=!0;for(const Sr of Ar)Sr.initialize(Pr)}Ir.registerEditorTypes(Ar),ys(this,xr,Ir),this.pageIndex=Or,this.div=jr,ys(this,ur,Lr),ys(this,dr,Cr),this.viewport=wr,un(this,xr).addLayer(this)}get isEmpty(){return un(this,br).size===0}updateToolbar(Ir){un(this,xr).updateToolbar(Ir)}updateMode(Ir=un(this,xr).getMode()){rs(this,vr,d0).call(this),Ir===nr.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Ir!==nr.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Ir===nr.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Ir===nr.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Ir===nr.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Ir){if(!Ir&&un(this,xr).getMode()!==nr.AnnotationEditorType.INK)return;if(!Ir){for(const jr of un(this,br).values())if(jr.isEmpty()){jr.setInBackground();return}}rs(this,vr,xm).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Ir){un(this,xr).setEditingState(Ir)}addCommands(Ir){un(this,xr).addCommands(Ir)}enable(){this.div.style.pointerEvents="auto";const Ir=new Set;for(const jr of un(this,br).values())jr.enableEditing(),jr.annotationElementId&&Ir.add(jr.annotationElementId);if(!un(this,dr))return;const Or=un(this,dr).getEditableAnnotations();for(const jr of Or){if(jr.hide(),un(this,xr).isDeletedAnnotationElement(jr.data.id)||Ir.has(jr.data.id))continue;const Lr=this.deserialize(jr);Lr&&(this.addOrRebuild(Lr),Lr.enableEditing())}}disable(){var Or;ys(this,yr,!0),this.div.style.pointerEvents="none";const Ir=new Set;for(const jr of un(this,br).values()){if(jr.disableEditing(),!jr.annotationElementId||jr.serialize()!==null){Ir.add(jr.annotationElementId);continue}(Or=this.getEditableAnnotation(jr.annotationElementId))==null||Or.show(),jr.remove()}if(un(this,dr)){const jr=un(this,dr).getEditableAnnotations();for(const Lr of jr){const{id:Cr}=Lr.data;Ir.has(Cr)||un(this,xr).isDeletedAnnotationElement(Cr)||Lr.show()}}rs(this,vr,d0).call(this),this.isEmpty&&(this.div.hidden=!0),ys(this,yr,!1)}getEditableAnnotation(Ir){var Or;return((Or=un(this,dr))==null?void 0:Or.getEditableAnnotation(Ir))||null}setActiveEditor(Ir){un(this,xr).getActive()!==Ir&&un(this,xr).setActiveEditor(Ir)}enableClick(){this.div.addEventListener("pointerdown",un(this,gr)),this.div.addEventListener("pointerup",un(this,fr))}disableClick(){this.div.removeEventListener("pointerdown",un(this,gr)),this.div.removeEventListener("pointerup",un(this,fr))}attach(Ir){un(this,br).set(Ir.id,Ir);const{annotationElementId:Or}=Ir;Or&&un(this,xr).isDeletedAnnotationElement(Or)&&un(this,xr).removeDeletedAnnotationElement(Ir)}detach(Ir){var Or;un(this,br).delete(Ir.id),(Or=un(this,ur))==null||Or.removePointerInTextLayer(Ir.contentDiv),!un(this,yr)&&Ir.annotationElementId&&un(this,xr).addDeletedAnnotationElement(Ir)}remove(Ir){this.detach(Ir),un(this,xr).removeEditor(Ir),Ir.div.contains(document.activeElement)&&setTimeout(()=>{un(this,xr).focusMainContainer()},0),Ir.div.remove(),Ir.isAttachedToDOM=!1,un(this,mr)||this.addInkEditorIfNeeded(!1)}changeParent(Ir){var Or;Ir.parent!==this&&(Ir.annotationElementId&&(un(this,xr).addDeletedAnnotationElement(Ir.annotationElementId),ir.AnnotationEditor.deleteAnnotationElement(Ir),Ir.annotationElementId=null),this.attach(Ir),(Or=Ir.parent)==null||Or.detach(Ir),Ir.setParent(this),Ir.div&&Ir.isAttachedToDOM&&(Ir.div.remove(),this.div.append(Ir.div)))}add(Ir){if(this.changeParent(Ir),un(this,xr).addEditor(Ir),this.attach(Ir),!Ir.isAttachedToDOM){const Or=Ir.render();this.div.append(Or),Ir.isAttachedToDOM=!0}Ir.fixAndSetPosition(),Ir.onceAdded(),un(this,xr).addToAnnotationStorage(Ir)}moveEditorInDOM(Ir){var jr;if(!Ir.isAttachedToDOM)return;const{activeElement:Or}=document;Ir.div.contains(Or)&&(Ir._focusEventsAllowed=!1,setTimeout(()=>{Ir.div.contains(document.activeElement)?Ir._focusEventsAllowed=!0:(Ir.div.addEventListener("focusin",()=>{Ir._focusEventsAllowed=!0},{once:!0}),Or.focus())},0)),Ir._structTreeParentId=(jr=un(this,ur))==null?void 0:jr.moveElementInDOM(this.div,Ir.div,Ir.contentDiv,!0)}addOrRebuild(Ir){Ir.needsToBeRebuilt()?Ir.rebuild():this.add(Ir)}addUndoableEditor(Ir){const Or=()=>Ir._uiManager.rebuild(Ir),jr=()=>{Ir.remove()};this.addCommands({cmd:Or,undo:jr,mustExec:!1})}getNextId(){return un(this,xr).getId()}pasteEditor(Ir,Or){un(this,xr).updateToolbar(Ir),un(this,xr).updateMode(Ir);const{offsetX:jr,offsetY:Lr}=rs(this,vr,u0).call(this),Cr=this.getNextId(),wr=rs(this,vr,c0).call(this,{parent:this,id:Cr,x:jr,y:Lr,uiManager:un(this,xr),isCentered:!0,...Or});wr&&this.add(wr)}deserialize(Ir){switch(Ir.annotationType??Ir.annotationEditorType){case nr.AnnotationEditorType.FREETEXT:return sr.FreeTextEditor.deserialize(Ir,this,un(this,xr));case nr.AnnotationEditorType.INK:return ar.InkEditor.deserialize(Ir,this,un(this,xr));case nr.AnnotationEditorType.STAMP:return lr.StampEditor.deserialize(Ir,this,un(this,xr))}return null}addNewEditor(){rs(this,vr,xm).call(this,rs(this,vr,u0).call(this),!0)}setSelected(Ir){un(this,xr).setSelected(Ir)}toggleSelected(Ir){un(this,xr).toggleSelected(Ir)}isSelected(Ir){return un(this,xr).isSelected(Ir)}unselect(Ir){un(this,xr).unselect(Ir)}pointerup(Ir){const{isMac:Or}=nr.FeatureTest.platform;if(!(Ir.button!==0||Ir.ctrlKey&&Or)&&Ir.target===this.div&&un(this,pr)){if(ys(this,pr,!1),!un(this,hr)){ys(this,hr,!0);return}if(un(this,xr).getMode()===nr.AnnotationEditorType.STAMP){un(this,xr).unselectAll();return}rs(this,vr,xm).call(this,Ir,!1)}}pointerdown(Ir){if(un(this,pr)){ys(this,pr,!1);return}const{isMac:Or}=nr.FeatureTest.platform;if(Ir.button!==0||Ir.ctrlKey&&Or||Ir.target!==this.div)return;ys(this,pr,!0);const jr=un(this,xr).getActive();ys(this,hr,!jr||jr.isEmpty())}findNewParent(Ir,Or,jr){const Lr=un(this,xr).findParent(Or,jr);return Lr===null||Lr===this?!1:(Lr.changeParent(Ir),!0)}destroy(){var Ir,Or;((Ir=un(this,xr).getActive())==null?void 0:Ir.parent)===this&&(un(this,xr).commitOrRemove(),un(this,xr).setActiveEditor(null));for(const jr of un(this,br).values())(Or=un(this,ur))==null||Or.removePointerInTextLayer(jr.contentDiv),jr.setParent(null),jr.isAttachedToDOM=!1,jr.div.remove();this.div=null,un(this,br).clear(),un(this,xr).removeLayer(this)}render({viewport:Ir}){this.viewport=Ir,(0,cr.setLayerDimensions)(this.div,Ir);for(const Or of un(this,xr).getEditors(this.pageIndex))this.add(Or);this.updateMode()}update({viewport:Ir}){un(this,xr).commitOrRemove(),this.viewport=Ir,(0,cr.setLayerDimensions)(this.div,{rotation:Ir.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Ir,pageHeight:Or}=this.viewport.rawDims;return[Ir,Or]}};ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakMap,yr=new WeakMap,xr=new WeakMap,vr=new WeakSet,c0=function(Ir){switch(un(this,xr).getMode()){case nr.AnnotationEditorType.FREETEXT:return new sr.FreeTextEditor(Ir);case nr.AnnotationEditorType.INK:return new ar.InkEditor(Ir);case nr.AnnotationEditorType.STAMP:return new lr.StampEditor(Ir)}return null},xm=function(Ir,Or){const jr=this.getNextId(),Lr=rs(this,vr,c0).call(this,{parent:this,id:jr,x:Ir.offsetX,y:Ir.offsetY,uiManager:un(this,xr),isCentered:Or});return Lr&&this.add(Lr),Lr},u0=function(){const{x:Ir,y:Or,width:jr,height:Lr}=this.div.getBoundingClientRect(),Cr=Math.max(0,Ir),wr=Math.max(0,Or),Pr=Math.min(window.innerWidth,Ir+jr),Ar=Math.min(window.innerHeight,Or+Lr),Sr=(Cr+Pr)/2-Ir,Mr=(wr+Ar)/2-Or,[qr,$r]=this.viewport.rotation%180===0?[Sr,Mr]:[Mr,Sr];return{offsetX:qr,offsetY:$r}},d0=function(){ys(this,mr,!0);for(const Ir of un(this,br).values())Ir.isEmpty()&&Ir.remove();ys(this,mr,!1)},Po(Nr,"_initialized",!1);let or=Nr;er.AnnotationEditorLayer=or},(tr,er,rr)=>{var lr,or,ur,hr,dr,fr,gr,br,pr,mr,dy,hy,fy,Bp,h0,py,f0;Object.defineProperty(er,"__esModule",{value:!0}),er.FreeTextEditor=void 0;var nr=rr(1),ir=rr(5),sr=rr(4),ar=rr(29);const Nr=class Nr extends sr.AnnotationEditor{constructor(Or){super({...Or,name:"freeTextEditor"});ps(this,mr);ps(this,lr,this.editorDivBlur.bind(this));ps(this,or,this.editorDivFocus.bind(this));ps(this,ur,this.editorDivInput.bind(this));ps(this,hr,this.editorDivKeydown.bind(this));ps(this,dr);ps(this,fr,"");ps(this,gr,`${this.id}-editor`);ps(this,br);ps(this,pr,null);ys(this,dr,Or.color||Nr._defaultColor||sr.AnnotationEditor._defaultLineColor),ys(this,br,Or.fontSize||Nr._defaultFontSize)}static get _keyboardManager(){const Or=Nr.prototype,jr=wr=>wr.isEmpty(),Lr=ir.AnnotationEditorUIManager.TRANSLATE_SMALL,Cr=ir.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,nr.shadow)(this,"_keyboardManager",new ir.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Or.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Or.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Or._translateEmpty,{args:[-Lr,0],checker:jr}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Or._translateEmpty,{args:[-Cr,0],checker:jr}],[["ArrowRight","mac+ArrowRight"],Or._translateEmpty,{args:[Lr,0],checker:jr}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Or._translateEmpty,{args:[Cr,0],checker:jr}],[["ArrowUp","mac+ArrowUp"],Or._translateEmpty,{args:[0,-Lr],checker:jr}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Or._translateEmpty,{args:[0,-Cr],checker:jr}],[["ArrowDown","mac+ArrowDown"],Or._translateEmpty,{args:[0,Lr],checker:jr}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Or._translateEmpty,{args:[0,Cr],checker:jr}]]))}static initialize(Or){sr.AnnotationEditor.initialize(Or,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const jr=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(jr.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Or,jr){switch(Or){case nr.AnnotationEditorParamsType.FREETEXT_SIZE:Nr._defaultFontSize=jr;break;case nr.AnnotationEditorParamsType.FREETEXT_COLOR:Nr._defaultColor=jr;break}}updateParams(Or,jr){switch(Or){case nr.AnnotationEditorParamsType.FREETEXT_SIZE:rs(this,mr,dy).call(this,jr);break;case nr.AnnotationEditorParamsType.FREETEXT_COLOR:rs(this,mr,hy).call(this,jr);break}}static get defaultPropertiesToUpdate(){return[[nr.AnnotationEditorParamsType.FREETEXT_SIZE,Nr._defaultFontSize],[nr.AnnotationEditorParamsType.FREETEXT_COLOR,Nr._defaultColor||sr.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[nr.AnnotationEditorParamsType.FREETEXT_SIZE,un(this,br)],[nr.AnnotationEditorParamsType.FREETEXT_COLOR,un(this,dr)]]}_translateEmpty(Or,jr){this._uiManager.translateSelectedEditors(Or,jr,!0)}getInitialTranslation(){const Or=this.parentScale;return[-Nr._internalPadding*Or,-(Nr._internalPadding+un(this,br))*Or]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(nr.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",un(this,hr)),this.editorDiv.addEventListener("focus",un(this,or)),this.editorDiv.addEventListener("blur",un(this,lr)),this.editorDiv.addEventListener("input",un(this,ur)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",un(this,gr)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",un(this,hr)),this.editorDiv.removeEventListener("focus",un(this,or)),this.editorDiv.removeEventListener("blur",un(this,lr)),this.editorDiv.removeEventListener("input",un(this,ur)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Or){this._focusEventsAllowed&&(super.focusin(Or),Or.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Or;if(this.width){rs(this,mr,f0).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Or=this._initialOptions)!=null&&Or.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Or=un(this,fr),jr=ys(this,fr,rs(this,mr,fy).call(this).trimEnd());if(Or===jr)return;const Lr=Cr=>{if(ys(this,fr,Cr),!Cr){this.remove();return}rs(this,mr,h0).call(this),this._uiManager.rebuild(this),rs(this,mr,Bp).call(this)};this.addCommands({cmd:()=>{Lr(jr)},undo:()=>{Lr(Or)},mustExec:!1}),rs(this,mr,Bp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Or){this.enterInEditMode()}keydown(Or){Or.target===this.div&&Or.key==="Enter"&&(this.enterInEditMode(),Or.preventDefault())}editorDivKeydown(Or){Nr._keyboardManager.exec(this,Or)}editorDivFocus(Or){this.isEditing=!0}editorDivBlur(Or){this.isEditing=!1}editorDivInput(Or){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Or,jr;this.width&&(Or=this.x,jr=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",un(this,gr)),this.enableEditing(),sr.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Cr=>{var wr;return(wr=this.editorDiv)==null?void 0:wr.setAttribute("aria-label",Cr)}),sr.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Cr=>{var wr;return(wr=this.editorDiv)==null?void 0:wr.setAttribute("default-content",Cr)}),this.editorDiv.contentEditable=!0;const{style:Lr}=this.editorDiv;if(Lr.fontSize=`calc(${un(this,br)}px * var(--scale-factor))`,Lr.color=un(this,dr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,ir.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Cr,wr]=this.parentDimensions;if(this.annotationElementId){const{position:Pr}=un(this,pr);let[Ar,Sr]=this.getInitialTranslation();[Ar,Sr]=this.pageTranslationToScreen(Ar,Sr);const[Mr,qr]=this.pageDimensions,[$r,Br]=this.pageTranslation;let zr,Gr;switch(this.rotation){case 0:zr=Or+(Pr[0]-$r)/Mr,Gr=jr+this.height-(Pr[1]-Br)/qr;break;case 90:zr=Or+(Pr[0]-$r)/Mr,Gr=jr-(Pr[1]-Br)/qr,[Ar,Sr]=[Sr,-Ar];break;case 180:zr=Or-this.width+(Pr[0]-$r)/Mr,Gr=jr-(Pr[1]-Br)/qr,[Ar,Sr]=[-Ar,-Sr];break;case 270:zr=Or+(Pr[0]-$r-this.height*qr)/Mr,Gr=jr+(Pr[1]-Br-this.width*Mr)/qr,[Ar,Sr]=[-Sr,Ar];break}this.setAt(zr*Cr,Gr*wr,Ar,Sr)}else this.setAt(Or*Cr,jr*wr,this.width*Cr,this.height*wr);rs(this,mr,h0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Or,jr,Lr){let Cr=null;if(Or instanceof ar.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Pr,fontColor:Ar},rect:Sr,rotation:Mr,id:qr},textContent:$r,textPosition:Br,parent:{page:{pageNumber:zr}}}=Or;if(!$r||$r.length===0)return null;Cr=Or={annotationType:nr.AnnotationEditorType.FREETEXT,color:Array.from(Ar),fontSize:Pr,value:$r.join(`
`),position:Br,pageIndex:zr-1,rect:Sr,rotation:Mr,id:qr,deleted:!1}}const wr=super.deserialize(Or,jr,Lr);return ys(wr,br,Or.fontSize),ys(wr,dr,nr.Util.makeHexColor(...Or.color)),ys(wr,fr,Or.value),wr.annotationElementId=Or.id||null,ys(wr,pr,Cr),wr}serialize(Or=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const jr=Nr._internalPadding*this.parentScale,Lr=this.getRect(jr,jr),Cr=sr.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:un(this,dr)),wr={annotationType:nr.AnnotationEditorType.FREETEXT,color:Cr,fontSize:un(this,br),value:un(this,fr),pageIndex:this.pageIndex,rect:Lr,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Or?wr:this.annotationElementId&&!rs(this,mr,py).call(this,wr)?null:(wr.id=this.annotationElementId,wr)}};lr=new WeakMap,or=new WeakMap,ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakSet,dy=function(Or){const jr=Cr=>{this.editorDiv.style.fontSize=`calc(${Cr}px * var(--scale-factor))`,this.translate(0,-(Cr-un(this,br))*this.parentScale),ys(this,br,Cr),rs(this,mr,Bp).call(this)},Lr=un(this,br);this.addCommands({cmd:()=>{jr(Or)},undo:()=>{jr(Lr)},mustExec:!0,type:nr.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},hy=function(Or){const jr=un(this,dr);this.addCommands({cmd:()=>{ys(this,dr,this.editorDiv.style.color=Or)},undo:()=>{ys(this,dr,this.editorDiv.style.color=jr)},mustExec:!0,type:nr.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},fy=function(){const Or=this.editorDiv.getElementsByTagName("div");if(Or.length===0)return this.editorDiv.innerText;const jr=[];for(const Lr of Or)jr.push(Lr.innerText.replace(/\r\n?|\n/,""));return jr.join(`
`)},Bp=function(){const[Or,jr]=this.parentDimensions;let Lr;if(this.isAttachedToDOM)Lr=this.div.getBoundingClientRect();else{const{currentLayer:Cr,div:wr}=this,Pr=wr.style.display;wr.style.display="hidden",Cr.div.append(this.div),Lr=wr.getBoundingClientRect(),wr.remove(),wr.style.display=Pr}this.rotation%180===this.parentRotation%180?(this.width=Lr.width/Or,this.height=Lr.height/jr):(this.width=Lr.height/Or,this.height=Lr.width/jr),this.fixAndSetPosition()},h0=function(){if(this.editorDiv.replaceChildren(),!!un(this,fr))for(const Or of un(this,fr).split(`
`)){const jr=document.createElement("div");jr.append(Or?document.createTextNode(Or):document.createElement("br")),this.editorDiv.append(jr)}},py=function(Or){const{value:jr,fontSize:Lr,color:Cr,rect:wr,pageIndex:Pr}=un(this,pr);return Or.value!==jr||Or.fontSize!==Lr||Or.rect.some((Ar,Sr)=>Math.abs(Ar-wr[Sr])>=1)||Or.color.some((Ar,Sr)=>Ar!==Cr[Sr])||Or.pageIndex!==Pr},f0=function(Or=!1){if(!this.annotationElementId)return;if(rs(this,mr,Bp).call(this),!Or&&(this.width===0||this.height===0)){setTimeout(()=>rs(this,mr,f0).call(this,!0),0);return}const jr=Nr._internalPadding*this.parentScale;un(this,pr).rect=this.getRect(jr,jr)},Po(Nr,"_freeTextDefaultContent",""),Po(Nr,"_internalPadding",0),Po(Nr,"_defaultColor",null),Po(Nr,"_defaultFontSize",10),Po(Nr,"_type","freetext");let cr=Nr;er.FreeTextEditor=cr},(tr,er,rr)=>{var Gr,Xr,tp,my,Kr,Zr,Jr,tn,an,dn,en,rn,sn,on,fn,pn,gn,Pn,In,En,zn,yn,gy,vm,p0,m0,ds,fs,os,Hn,Ln,Dn,ls,g0,xs,kn,Jn,is,yy,y0;Object.defineProperty(er,"__esModule",{value:!0}),er.StampAnnotationElement=er.InkAnnotationElement=er.FreeTextAnnotationElement=er.AnnotationLayer=void 0;var nr=rr(1),ir=rr(6),sr=rr(3),ar=rr(30),cr=rr(31),lr=rr(32);const or=1e3,ur=9,hr=new WeakSet;function dr(Yn){return{width:Yn[2]-Yn[0],height:Yn[3]-Yn[1]}}class fr{static create(vn){switch(vn.data.annotationType){case nr.AnnotationType.LINK:return new br(vn);case nr.AnnotationType.TEXT:return new pr(vn);case nr.AnnotationType.WIDGET:switch(vn.data.fieldType){case"Tx":return new yr(vn);case"Btn":return vn.data.radioButton?new _r(vn):vn.data.checkBox?new vr(vn):new Er(vn);case"Ch":return new Tr(vn);case"Sig":return new xr(vn)}return new mr(vn);case nr.AnnotationType.POPUP:return new Rr(vn);case nr.AnnotationType.FREETEXT:return new Dr(vn);case nr.AnnotationType.LINE:return new Ir(vn);case nr.AnnotationType.SQUARE:return new Or(vn);case nr.AnnotationType.CIRCLE:return new jr(vn);case nr.AnnotationType.POLYLINE:return new Lr(vn);case nr.AnnotationType.CARET:return new wr(vn);case nr.AnnotationType.INK:return new Pr(vn);case nr.AnnotationType.POLYGON:return new Cr(vn);case nr.AnnotationType.HIGHLIGHT:return new Ar(vn);case nr.AnnotationType.UNDERLINE:return new Sr(vn);case nr.AnnotationType.SQUIGGLY:return new Mr(vn);case nr.AnnotationType.STRIKEOUT:return new qr(vn);case nr.AnnotationType.STAMP:return new $r(vn);case nr.AnnotationType.FILEATTACHMENT:return new Br(vn);default:return new gr(vn)}}}const Vr=class Vr{constructor(vn,{isRenderable:_n=!1,ignoreBorder:Mn=!1,createQuadrilaterals:Cn=!1}={}){ps(this,Gr,!1);this.isRenderable=_n,this.data=vn.data,this.layer=vn.layer,this.linkService=vn.linkService,this.downloadManager=vn.downloadManager,this.imageResourcesPath=vn.imageResourcesPath,this.renderForms=vn.renderForms,this.svgFactory=vn.svgFactory,this.annotationStorage=vn.annotationStorage,this.enableScripting=vn.enableScripting,this.hasJSActions=vn.hasJSActions,this._fieldObjects=vn.fieldObjects,this.parent=vn.parent,_n&&(this.container=this._createContainer(Mn)),Cn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:vn,contentsObj:_n,richText:Mn}){return!!(vn!=null&&vn.str||_n!=null&&_n.str||Mn!=null&&Mn.str)}get hasPopupData(){return Vr._hasPopupData(this.data)}_createContainer(vn){const{data:_n,parent:{page:Mn,viewport:Cn}}=this,Zn=document.createElement("section");Zn.setAttribute("data-annotation-id",_n.id),this instanceof mr||(Zn.tabIndex=or),Zn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Zn.setAttribute("aria-haspopup","dialog"),_n.noRotate&&Zn.classList.add("norotate");const{pageWidth:qn,pageHeight:wn,pageX:On,pageY:Gn}=Cn.rawDims;if(!_n.rect||this instanceof Rr){const{rotation:As}=_n;return!_n.hasOwnCanvas&&As!==0&&this.setRotation(As,Zn),Zn}const{width:Qn,height:$s}=dr(_n.rect),us=nr.Util.normalizeRect([_n.rect[0],Mn.view[3]-_n.rect[1]+Mn.view[1],_n.rect[2],Mn.view[3]-_n.rect[3]+Mn.view[1]]);if(!vn&&_n.borderStyle.width>0){Zn.style.borderWidth=`${_n.borderStyle.width}px`;const As=_n.borderStyle.horizontalCornerRadius,Rs=_n.borderStyle.verticalCornerRadius;if(As>0||Rs>0){const Bs=`calc(${As}px * var(--scale-factor)) / calc(${Rs}px * var(--scale-factor))`;Zn.style.borderRadius=Bs}else if(this instanceof _r){const Bs=`calc(${Qn}px * var(--scale-factor)) / calc(${$s}px * var(--scale-factor))`;Zn.style.borderRadius=Bs}switch(_n.borderStyle.style){case nr.AnnotationBorderStyleType.SOLID:Zn.style.borderStyle="solid";break;case nr.AnnotationBorderStyleType.DASHED:Zn.style.borderStyle="dashed";break;case nr.AnnotationBorderStyleType.BEVELED:(0,nr.warn)("Unimplemented border style: beveled");break;case nr.AnnotationBorderStyleType.INSET:(0,nr.warn)("Unimplemented border style: inset");break;case nr.AnnotationBorderStyleType.UNDERLINE:Zn.style.borderBottomStyle="solid";break}const Ms=_n.borderColor||null;Ms?(ys(this,Gr,!0),Zn.style.borderColor=nr.Util.makeHexColor(Ms[0]|0,Ms[1]|0,Ms[2]|0)):Zn.style.borderWidth=0}Zn.style.left=`${100*(us[0]-On)/qn}%`,Zn.style.top=`${100*(us[1]-Gn)/wn}%`;const{rotation:ws}=_n;return _n.hasOwnCanvas||ws===0?(Zn.style.width=`${100*Qn/qn}%`,Zn.style.height=`${100*$s/wn}%`):this.setRotation(ws,Zn),Zn}setRotation(vn,_n=this.container){if(!this.data.rect)return;const{pageWidth:Mn,pageHeight:Cn}=this.parent.viewport.rawDims,{width:Zn,height:qn}=dr(this.data.rect);let wn,On;vn%180===0?(wn=100*Zn/Mn,On=100*qn/Cn):(wn=100*qn/Mn,On=100*Zn/Cn),_n.style.width=`${wn}%`,_n.style.height=`${On}%`,_n.setAttribute("data-main-rotation",(360-vn)%360)}get _commonActions(){const vn=(_n,Mn,Cn)=>{const Zn=Cn.detail[_n],qn=Zn[0],wn=Zn.slice(1);Cn.target.style[Mn]=ar.ColorConverters[`${qn}_HTML`](wn),this.annotationStorage.setValue(this.data.id,{[Mn]:ar.ColorConverters[`${qn}_rgb`](wn)})};return(0,nr.shadow)(this,"_commonActions",{display:_n=>{const{display:Mn}=_n.detail,Cn=Mn%2===1;this.container.style.visibility=Cn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Cn,noPrint:Mn===1||Mn===2})},print:_n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!_n.detail.print})},hidden:_n=>{const{hidden:Mn}=_n.detail;this.container.style.visibility=Mn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Mn,noView:Mn})},focus:_n=>{setTimeout(()=>_n.target.focus({preventScroll:!1}),0)},userName:_n=>{_n.target.title=_n.detail.userName},readonly:_n=>{_n.target.disabled=_n.detail.readonly},required:_n=>{this._setRequired(_n.target,_n.detail.required)},bgColor:_n=>{vn("bgColor","backgroundColor",_n)},fillColor:_n=>{vn("fillColor","backgroundColor",_n)},fgColor:_n=>{vn("fgColor","color",_n)},textColor:_n=>{vn("textColor","color",_n)},borderColor:_n=>{vn("borderColor","borderColor",_n)},strokeColor:_n=>{vn("strokeColor","borderColor",_n)},rotation:_n=>{const Mn=_n.detail.rotation;this.setRotation(Mn),this.annotationStorage.setValue(this.data.id,{rotation:Mn})}})}_dispatchEventFromSandbox(vn,_n){const Mn=this._commonActions;for(const Cn of Object.keys(_n.detail)){const Zn=vn[Cn]||Mn[Cn];Zn==null||Zn(_n)}}_setDefaultPropertiesFromJS(vn){if(!this.enableScripting)return;const _n=this.annotationStorage.getRawValue(this.data.id);if(!_n)return;const Mn=this._commonActions;for(const[Cn,Zn]of Object.entries(_n)){const qn=Mn[Cn];if(qn){const wn={detail:{[Cn]:Zn},target:vn};qn(wn),delete _n[Cn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:vn}=this.data;if(!vn)return;const[_n,Mn,Cn,Zn]=this.data.rect;if(vn.length===1){const[,{x:Rs,y:Ms},{x:Bs,y:Zs}]=vn[0];if(Cn===Rs&&Zn===Ms&&_n===Bs&&Mn===Zs)return}const{style:qn}=this.container;let wn;if(un(this,Gr)){const{borderColor:Rs,borderWidth:Ms}=qn;qn.borderWidth=0,wn=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Rs}" stroke-width="${Ms}">`],this.container.classList.add("hasBorder")}const On=Cn-_n,Gn=Zn-Mn,{svgFactory:Qn}=this,$s=Qn.createElement("svg");$s.classList.add("quadrilateralsContainer"),$s.setAttribute("width",0),$s.setAttribute("height",0);const us=Qn.createElement("defs");$s.append(us);const ws=Qn.createElement("clipPath"),As=`clippath_${this.data.id}`;ws.setAttribute("id",As),ws.setAttribute("clipPathUnits","objectBoundingBox"),us.append(ws);for(const[,{x:Rs,y:Ms},{x:Bs,y:Zs}]of vn){const Qs=Qn.createElement("rect"),eo=(Bs-_n)/On,ao=(Zn-Ms)/Gn,Un=(Rs-Bs)/On,Ts=(Ms-Zs)/Gn;Qs.setAttribute("x",eo),Qs.setAttribute("y",ao),Qs.setAttribute("width",Un),Qs.setAttribute("height",Ts),ws.append(Qs),wn==null||wn.push(`<rect vector-effect="non-scaling-stroke" x="${eo}" y="${ao}" width="${Un}" height="${Ts}"/>`)}un(this,Gr)&&(wn.push("</g></svg>')"),qn.backgroundImage=wn.join("")),this.container.append($s),this.container.style.clipPath=`url(#${As})`}_createPopup(){const{container:vn,data:_n}=this;vn.setAttribute("aria-haspopup","dialog");const Mn=new Rr({data:{color:_n.color,titleObj:_n.titleObj,modificationDate:_n.modificationDate,contentsObj:_n.contentsObj,richText:_n.richText,parentRect:_n.rect,borderStyle:0,id:`popup_${_n.id}`,rotation:_n.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Mn.render())}render(){(0,nr.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(vn,_n=null){const Mn=[];if(this._fieldObjects){const Cn=this._fieldObjects[vn];if(Cn)for(const{page:Zn,id:qn,exportValues:wn}of Cn){if(Zn===-1||qn===_n)continue;const On=typeof wn=="string"?wn:null,Gn=document.querySelector(`[data-element-id="${qn}"]`);if(Gn&&!hr.has(Gn)){(0,nr.warn)(`_getElementsByName - element not allowed: ${qn}`);continue}Mn.push({id:qn,exportValue:On,domElement:Gn})}return Mn}for(const Cn of document.getElementsByName(vn)){const{exportValue:Zn}=Cn,qn=Cn.getAttribute("data-element-id");qn!==_n&&hr.has(Cn)&&Mn.push({id:qn,exportValue:Zn,domElement:Cn})}return Mn}show(){var vn;this.container&&(this.container.hidden=!1),(vn=this.popup)==null||vn.maybeShow()}hide(){var vn;this.container&&(this.container.hidden=!0),(vn=this.popup)==null||vn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const vn=this.getElementsToTriggerPopup();if(Array.isArray(vn))for(const _n of vn)_n.classList.add("highlightArea");else vn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:vn,data:{id:_n}}=this;this.container.addEventListener("dblclick",()=>{var Mn;(Mn=this.linkService.eventBus)==null||Mn.dispatch("switchannotationeditormode",{source:this,mode:vn,editId:_n})})}};Gr=new WeakMap;let gr=Vr;class br extends gr{constructor(_n,Mn=null){super(_n,{isRenderable:!0,ignoreBorder:!!(Mn!=null&&Mn.ignoreBorder),createQuadrilaterals:!0});ps(this,Xr);this.isTooltipOnly=_n.data.isTooltipOnly}render(){const{data:_n,linkService:Mn}=this,Cn=document.createElement("a");Cn.setAttribute("data-element-id",_n.id);let Zn=!1;return _n.url?(Mn.addLinkAttributes(Cn,_n.url,_n.newWindow),Zn=!0):_n.action?(this._bindNamedAction(Cn,_n.action),Zn=!0):_n.attachment?(this._bindAttachment(Cn,_n.attachment),Zn=!0):_n.setOCGState?(rs(this,Xr,my).call(this,Cn,_n.setOCGState),Zn=!0):_n.dest?(this._bindLink(Cn,_n.dest),Zn=!0):(_n.actions&&(_n.actions.Action||_n.actions["Mouse Up"]||_n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Cn,_n),Zn=!0),_n.resetForm?(this._bindResetFormAction(Cn,_n.resetForm),Zn=!0):this.isTooltipOnly&&!Zn&&(this._bindLink(Cn,""),Zn=!0)),this.container.classList.add("linkAnnotation"),Zn&&this.container.append(Cn),this.container}_bindLink(_n,Mn){_n.href=this.linkService.getDestinationHash(Mn),_n.onclick=()=>(Mn&&this.linkService.goToDestination(Mn),!1),(Mn||Mn==="")&&rs(this,Xr,tp).call(this)}_bindNamedAction(_n,Mn){_n.href=this.linkService.getAnchorUrl(""),_n.onclick=()=>(this.linkService.executeNamedAction(Mn),!1),rs(this,Xr,tp).call(this)}_bindAttachment(_n,Mn){_n.href=this.linkService.getAnchorUrl(""),_n.onclick=()=>{var Cn;return(Cn=this.downloadManager)==null||Cn.openOrDownloadData(this.container,Mn.content,Mn.filename),!1},rs(this,Xr,tp).call(this)}_bindJSAction(_n,Mn){_n.href=this.linkService.getAnchorUrl("");const Cn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Zn of Object.keys(Mn.actions)){const qn=Cn.get(Zn);qn&&(_n[qn]=()=>{var wn;return(wn=this.linkService.eventBus)==null||wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Mn.id,name:Zn}}),!1})}_n.onclick||(_n.onclick=()=>!1),rs(this,Xr,tp).call(this)}_bindResetFormAction(_n,Mn){const Cn=_n.onclick;if(Cn||(_n.href=this.linkService.getAnchorUrl("")),rs(this,Xr,tp).call(this),!this._fieldObjects){(0,nr.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Cn||(_n.onclick=()=>!1);return}_n.onclick=()=>{var $s;Cn==null||Cn();const{fields:Zn,refs:qn,include:wn}=Mn,On=[];if(Zn.length!==0||qn.length!==0){const us=new Set(qn);for(const ws of Zn){const As=this._fieldObjects[ws]||[];for(const{id:Rs}of As)us.add(Rs)}for(const ws of Object.values(this._fieldObjects))for(const As of ws)us.has(As.id)===wn&&On.push(As)}else for(const us of Object.values(this._fieldObjects))On.push(...us);const Gn=this.annotationStorage,Qn=[];for(const us of On){const{id:ws}=us;switch(Qn.push(ws),us.type){case"text":{const Rs=us.defaultValue||"";Gn.setValue(ws,{value:Rs});break}case"checkbox":case"radiobutton":{const Rs=us.defaultValue===us.exportValues;Gn.setValue(ws,{value:Rs});break}case"combobox":case"listbox":{const Rs=us.defaultValue||"";Gn.setValue(ws,{value:Rs});break}default:continue}const As=document.querySelector(`[data-element-id="${ws}"]`);if(As){if(!hr.has(As)){(0,nr.warn)(`_bindResetFormAction - element not allowed: ${ws}`);continue}}else continue;As.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($s=this.linkService.eventBus)==null||$s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Qn,name:"ResetForm"}})),!1}}}Xr=new WeakSet,tp=function(){this.container.setAttribute("data-internal-link","")},my=function(_n,Mn){_n.href=this.linkService.getAnchorUrl(""),_n.onclick=()=>(this.linkService.executeSetOCGState(Mn),!1),rs(this,Xr,tp).call(this)};class pr extends gr{constructor(vn){super(vn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const vn=document.createElement("img");return vn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",vn.alt="[{{type}} Annotation]",vn.dataset.l10nId="text_annotation_type",vn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(vn),this.container}}class mr extends gr{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(vn){var _n;this.data.hasOwnCanvas&&(((_n=vn.previousSibling)==null?void 0:_n.nodeName)==="CANVAS"&&(vn.previousSibling.hidden=!0),vn.hidden=!1)}_getKeyModifier(vn){const{isWin:_n,isMac:Mn}=nr.FeatureTest.platform;return _n&&vn.ctrlKey||Mn&&vn.metaKey}_setEventListener(vn,_n,Mn,Cn,Zn){Mn.includes("mouse")?vn.addEventListener(Mn,qn=>{var wn;(wn=this.linkService.eventBus)==null||wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Cn,value:Zn(qn),shift:qn.shiftKey,modifier:this._getKeyModifier(qn)}})}):vn.addEventListener(Mn,qn=>{var wn;if(Mn==="blur"){if(!_n.focused||!qn.relatedTarget)return;_n.focused=!1}else if(Mn==="focus"){if(_n.focused)return;_n.focused=!0}Zn&&((wn=this.linkService.eventBus)==null||wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Cn,value:Zn(qn)}}))})}_setEventListeners(vn,_n,Mn,Cn){var Zn,qn,wn;for(const[On,Gn]of Mn)(Gn==="Action"||(Zn=this.data.actions)!=null&&Zn[Gn])&&((Gn==="Focus"||Gn==="Blur")&&(_n||(_n={focused:!1})),this._setEventListener(vn,_n,On,Gn,Cn),Gn==="Focus"&&!((qn=this.data.actions)!=null&&qn.Blur)?this._setEventListener(vn,_n,"blur","Blur",null):Gn==="Blur"&&!((wn=this.data.actions)!=null&&wn.Focus)&&this._setEventListener(vn,_n,"focus","Focus",null))}_setBackgroundColor(vn){const _n=this.data.backgroundColor||null;vn.style.backgroundColor=_n===null?"transparent":nr.Util.makeHexColor(_n[0],_n[1],_n[2])}_setTextStyle(vn){const _n=["left","center","right"],{fontColor:Mn}=this.data.defaultAppearanceData,Cn=this.data.defaultAppearanceData.fontSize||ur,Zn=vn.style;let qn;const wn=2,On=Gn=>Math.round(10*Gn)/10;if(this.data.multiLine){const Gn=Math.abs(this.data.rect[3]-this.data.rect[1]-wn),Qn=Math.round(Gn/(nr.LINE_FACTOR*Cn))||1,$s=Gn/Qn;qn=Math.min(Cn,On($s/nr.LINE_FACTOR))}else{const Gn=Math.abs(this.data.rect[3]-this.data.rect[1]-wn);qn=Math.min(Cn,On(Gn/nr.LINE_FACTOR))}Zn.fontSize=`calc(${qn}px * var(--scale-factor))`,Zn.color=nr.Util.makeHexColor(Mn[0],Mn[1],Mn[2]),this.data.textAlignment!==null&&(Zn.textAlign=_n[this.data.textAlignment])}_setRequired(vn,_n){_n?vn.setAttribute("required",!0):vn.removeAttribute("required"),vn.setAttribute("aria-required",_n)}}class yr extends mr{constructor(vn){const _n=vn.renderForms||!vn.data.hasAppearance&&!!vn.data.fieldValue;super(vn,{isRenderable:_n})}setPropertyOnSiblings(vn,_n,Mn,Cn){const Zn=this.annotationStorage;for(const qn of this._getElementsByName(vn.name,vn.id))qn.domElement&&(qn.domElement[_n]=Mn),Zn.setValue(qn.id,{[Cn]:Mn})}render(){var Cn,Zn;const vn=this.annotationStorage,_n=this.data.id;this.container.classList.add("textWidgetAnnotation");let Mn=null;if(this.renderForms){const qn=vn.getValue(_n,{value:this.data.fieldValue});let wn=qn.value||"";const On=vn.getValue(_n,{charLimit:this.data.maxLen}).charLimit;On&&wn.length>On&&(wn=wn.slice(0,On));let Gn=qn.formattedValue||((Cn=this.data.textContent)==null?void 0:Cn.join(`
`))||null;Gn&&this.data.comb&&(Gn=Gn.replaceAll(/\s+/g,""));const Qn={userValue:wn,formattedValue:Gn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Mn=document.createElement("textarea"),Mn.textContent=Gn??wn,this.data.doNotScroll&&(Mn.style.overflowY="hidden")):(Mn=document.createElement("input"),Mn.type="text",Mn.setAttribute("value",Gn??wn),this.data.doNotScroll&&(Mn.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Mn.hidden=!0),hr.add(Mn),Mn.setAttribute("data-element-id",_n),Mn.disabled=this.data.readOnly,Mn.name=this.data.fieldName,Mn.tabIndex=or,this._setRequired(Mn,this.data.required),On&&(Mn.maxLength=On),Mn.addEventListener("input",us=>{vn.setValue(_n,{value:us.target.value}),this.setPropertyOnSiblings(Mn,"value",us.target.value,"value"),Qn.formattedValue=null}),Mn.addEventListener("resetform",us=>{const ws=this.data.defaultFieldValue??"";Mn.value=Qn.userValue=ws,Qn.formattedValue=null});let $s=us=>{const{formattedValue:ws}=Qn;ws!=null&&(us.target.value=ws),us.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Mn.addEventListener("focus",ws=>{if(Qn.focused)return;const{target:As}=ws;Qn.userValue&&(As.value=Qn.userValue),Qn.lastCommittedValue=As.value,Qn.commitKey=1,Qn.focused=!0}),Mn.addEventListener("updatefromsandbox",ws=>{this.showElementAndHideCanvas(ws.target);const As={value(Rs){Qn.userValue=Rs.detail.value??"",vn.setValue(_n,{value:Qn.userValue.toString()}),Rs.target.value=Qn.userValue},formattedValue(Rs){const{formattedValue:Ms}=Rs.detail;Qn.formattedValue=Ms,Ms!=null&&Rs.target!==document.activeElement&&(Rs.target.value=Ms),vn.setValue(_n,{formattedValue:Ms})},selRange(Rs){Rs.target.setSelectionRange(...Rs.detail.selRange)},charLimit:Rs=>{var Qs;const{charLimit:Ms}=Rs.detail,{target:Bs}=Rs;if(Ms===0){Bs.removeAttribute("maxLength");return}Bs.setAttribute("maxLength",Ms);let Zs=Qn.userValue;!Zs||Zs.length<=Ms||(Zs=Zs.slice(0,Ms),Bs.value=Qn.userValue=Zs,vn.setValue(_n,{value:Zs}),(Qs=this.linkService.eventBus)==null||Qs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_n,name:"Keystroke",value:Zs,willCommit:!0,commitKey:1,selStart:Bs.selectionStart,selEnd:Bs.selectionEnd}}))}};this._dispatchEventFromSandbox(As,ws)}),Mn.addEventListener("keydown",ws=>{var Ms;Qn.commitKey=1;let As=-1;if(ws.key==="Escape"?As=0:ws.key==="Enter"&&!this.data.multiLine?As=2:ws.key==="Tab"&&(Qn.commitKey=3),As===-1)return;const{value:Rs}=ws.target;Qn.lastCommittedValue!==Rs&&(Qn.lastCommittedValue=Rs,Qn.userValue=Rs,(Ms=this.linkService.eventBus)==null||Ms.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_n,name:"Keystroke",value:Rs,willCommit:!0,commitKey:As,selStart:ws.target.selectionStart,selEnd:ws.target.selectionEnd}}))});const us=$s;$s=null,Mn.addEventListener("blur",ws=>{var Rs;if(!Qn.focused||!ws.relatedTarget)return;Qn.focused=!1;const{value:As}=ws.target;Qn.userValue=As,Qn.lastCommittedValue!==As&&((Rs=this.linkService.eventBus)==null||Rs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_n,name:"Keystroke",value:As,willCommit:!0,commitKey:Qn.commitKey,selStart:ws.target.selectionStart,selEnd:ws.target.selectionEnd}})),us(ws)}),(Zn=this.data.actions)!=null&&Zn.Keystroke&&Mn.addEventListener("beforeinput",ws=>{var ao;Qn.lastCommittedValue=null;const{data:As,target:Rs}=ws,{value:Ms,selectionStart:Bs,selectionEnd:Zs}=Rs;let Qs=Bs,eo=Zs;switch(ws.inputType){case"deleteWordBackward":{const Un=Ms.substring(0,Bs).match(/\w*[^\w]*$/);Un&&(Qs-=Un[0].length);break}case"deleteWordForward":{const Un=Ms.substring(Bs).match(/^[^\w]*\w*/);Un&&(eo+=Un[0].length);break}case"deleteContentBackward":Bs===Zs&&(Qs-=1);break;case"deleteContentForward":Bs===Zs&&(eo+=1);break}ws.preventDefault(),(ao=this.linkService.eventBus)==null||ao.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_n,name:"Keystroke",value:Ms,change:As||"",willCommit:!1,selStart:Qs,selEnd:eo}})}),this._setEventListeners(Mn,Qn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ws=>ws.target.value)}if($s&&Mn.addEventListener("blur",$s),this.data.comb){const ws=(this.data.rect[2]-this.data.rect[0])/On;Mn.classList.add("comb"),Mn.style.letterSpacing=`calc(${ws}px * var(--scale-factor) - 1ch)`}}else Mn=document.createElement("div"),Mn.textContent=this.data.fieldValue,Mn.style.verticalAlign="middle",Mn.style.display="table-cell";return this._setTextStyle(Mn),this._setBackgroundColor(Mn),this._setDefaultPropertiesFromJS(Mn),this.container.append(Mn),this.container}}class xr extends mr{constructor(vn){super(vn,{isRenderable:!!vn.data.hasOwnCanvas})}}class vr extends mr{constructor(vn){super(vn,{isRenderable:vn.renderForms})}render(){const vn=this.annotationStorage,_n=this.data,Mn=_n.id;let Cn=vn.getValue(Mn,{value:_n.exportValue===_n.fieldValue}).value;typeof Cn=="string"&&(Cn=Cn!=="Off",vn.setValue(Mn,{value:Cn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Zn=document.createElement("input");return hr.add(Zn),Zn.setAttribute("data-element-id",Mn),Zn.disabled=_n.readOnly,this._setRequired(Zn,this.data.required),Zn.type="checkbox",Zn.name=_n.fieldName,Cn&&Zn.setAttribute("checked",!0),Zn.setAttribute("exportValue",_n.exportValue),Zn.tabIndex=or,Zn.addEventListener("change",qn=>{const{name:wn,checked:On}=qn.target;for(const Gn of this._getElementsByName(wn,Mn)){const Qn=On&&Gn.exportValue===_n.exportValue;Gn.domElement&&(Gn.domElement.checked=Qn),vn.setValue(Gn.id,{value:Qn})}vn.setValue(Mn,{value:On})}),Zn.addEventListener("resetform",qn=>{const wn=_n.defaultFieldValue||"Off";qn.target.checked=wn===_n.exportValue}),this.enableScripting&&this.hasJSActions&&(Zn.addEventListener("updatefromsandbox",qn=>{const wn={value(On){On.target.checked=On.detail.value!=="Off",vn.setValue(Mn,{value:On.target.checked})}};this._dispatchEventFromSandbox(wn,qn)}),this._setEventListeners(Zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],qn=>qn.target.checked)),this._setBackgroundColor(Zn),this._setDefaultPropertiesFromJS(Zn),this.container.append(Zn),this.container}}class _r extends mr{constructor(vn){super(vn,{isRenderable:vn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const vn=this.annotationStorage,_n=this.data,Mn=_n.id;let Cn=vn.getValue(Mn,{value:_n.fieldValue===_n.buttonValue}).value;typeof Cn=="string"&&(Cn=Cn!==_n.buttonValue,vn.setValue(Mn,{value:Cn}));const Zn=document.createElement("input");if(hr.add(Zn),Zn.setAttribute("data-element-id",Mn),Zn.disabled=_n.readOnly,this._setRequired(Zn,this.data.required),Zn.type="radio",Zn.name=_n.fieldName,Cn&&Zn.setAttribute("checked",!0),Zn.tabIndex=or,Zn.addEventListener("change",qn=>{const{name:wn,checked:On}=qn.target;for(const Gn of this._getElementsByName(wn,Mn))vn.setValue(Gn.id,{value:!1});vn.setValue(Mn,{value:On})}),Zn.addEventListener("resetform",qn=>{const wn=_n.defaultFieldValue;qn.target.checked=wn!=null&&wn===_n.buttonValue}),this.enableScripting&&this.hasJSActions){const qn=_n.buttonValue;Zn.addEventListener("updatefromsandbox",wn=>{const On={value:Gn=>{const Qn=qn===Gn.detail.value;for(const $s of this._getElementsByName(Gn.target.name)){const us=Qn&&$s.id===Mn;$s.domElement&&($s.domElement.checked=us),vn.setValue($s.id,{value:us})}}};this._dispatchEventFromSandbox(On,wn)}),this._setEventListeners(Zn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],wn=>wn.target.checked)}return this._setBackgroundColor(Zn),this._setDefaultPropertiesFromJS(Zn),this.container.append(Zn),this.container}}class Er extends br{constructor(vn){super(vn,{ignoreBorder:vn.data.hasAppearance})}render(){const vn=super.render();vn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(vn.title=this.data.alternativeText);const _n=vn.lastChild;return this.enableScripting&&this.hasJSActions&&_n&&(this._setDefaultPropertiesFromJS(_n),_n.addEventListener("updatefromsandbox",Mn=>{this._dispatchEventFromSandbox({},Mn)})),vn}}class Tr extends mr{constructor(vn){super(vn,{isRenderable:vn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const vn=this.annotationStorage,_n=this.data.id,Mn=vn.getValue(_n,{value:this.data.fieldValue}),Cn=document.createElement("select");hr.add(Cn),Cn.setAttribute("data-element-id",_n),Cn.disabled=this.data.readOnly,this._setRequired(Cn,this.data.required),Cn.name=this.data.fieldName,Cn.tabIndex=or;let Zn=this.data.combo&&this.data.options.length>0;this.data.combo||(Cn.size=this.data.options.length,this.data.multiSelect&&(Cn.multiple=!0)),Cn.addEventListener("resetform",Qn=>{const $s=this.data.defaultFieldValue;for(const us of Cn.options)us.selected=us.value===$s});for(const Qn of this.data.options){const $s=document.createElement("option");$s.textContent=Qn.displayValue,$s.value=Qn.exportValue,Mn.value.includes(Qn.exportValue)&&($s.setAttribute("selected",!0),Zn=!1),Cn.append($s)}let qn=null;if(Zn){const Qn=document.createElement("option");Qn.value=" ",Qn.setAttribute("hidden",!0),Qn.setAttribute("selected",!0),Cn.prepend(Qn),qn=()=>{Qn.remove(),Cn.removeEventListener("input",qn),qn=null},Cn.addEventListener("input",qn)}const wn=Qn=>{const $s=Qn?"value":"textContent",{options:us,multiple:ws}=Cn;return ws?Array.prototype.filter.call(us,As=>As.selected).map(As=>As[$s]):us.selectedIndex===-1?null:us[us.selectedIndex][$s]};let On=wn(!1);const Gn=Qn=>{const $s=Qn.target.options;return Array.prototype.map.call($s,us=>({displayValue:us.textContent,exportValue:us.value}))};return this.enableScripting&&this.hasJSActions?(Cn.addEventListener("updatefromsandbox",Qn=>{const $s={value(us){qn==null||qn();const ws=us.detail.value,As=new Set(Array.isArray(ws)?ws:[ws]);for(const Rs of Cn.options)Rs.selected=As.has(Rs.value);vn.setValue(_n,{value:wn(!0)}),On=wn(!1)},multipleSelection(us){Cn.multiple=!0},remove(us){const ws=Cn.options,As=us.detail.remove;ws[As].selected=!1,Cn.remove(As),ws.length>0&&Array.prototype.findIndex.call(ws,Ms=>Ms.selected)===-1&&(ws[0].selected=!0),vn.setValue(_n,{value:wn(!0),items:Gn(us)}),On=wn(!1)},clear(us){for(;Cn.length!==0;)Cn.remove(0);vn.setValue(_n,{value:null,items:[]}),On=wn(!1)},insert(us){const{index:ws,displayValue:As,exportValue:Rs}=us.detail.insert,Ms=Cn.children[ws],Bs=document.createElement("option");Bs.textContent=As,Bs.value=Rs,Ms?Ms.before(Bs):Cn.append(Bs),vn.setValue(_n,{value:wn(!0),items:Gn(us)}),On=wn(!1)},items(us){const{items:ws}=us.detail;for(;Cn.length!==0;)Cn.remove(0);for(const As of ws){const{displayValue:Rs,exportValue:Ms}=As,Bs=document.createElement("option");Bs.textContent=Rs,Bs.value=Ms,Cn.append(Bs)}Cn.options.length>0&&(Cn.options[0].selected=!0),vn.setValue(_n,{value:wn(!0),items:Gn(us)}),On=wn(!1)},indices(us){const ws=new Set(us.detail.indices);for(const As of us.target.options)As.selected=ws.has(As.index);vn.setValue(_n,{value:wn(!0)}),On=wn(!1)},editable(us){us.target.disabled=!us.detail.editable}};this._dispatchEventFromSandbox($s,Qn)}),Cn.addEventListener("input",Qn=>{var us;const $s=wn(!0);vn.setValue(_n,{value:$s}),Qn.preventDefault(),(us=this.linkService.eventBus)==null||us.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_n,name:"Keystroke",value:On,changeEx:$s,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Cn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Qn=>Qn.target.value)):Cn.addEventListener("input",function(Qn){vn.setValue(_n,{value:wn(!0)})}),this.data.combo&&this._setTextStyle(Cn),this._setBackgroundColor(Cn),this._setDefaultPropertiesFromJS(Cn),this.container.append(Cn),this.container}}class Rr extends gr{constructor(vn){const{data:_n,elements:Mn}=vn;super(vn,{isRenderable:gr._hasPopupData(_n)}),this.elements=Mn}render(){this.container.classList.add("popupAnnotation");const vn=new Nr({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),_n=[];for(const Mn of this.elements)Mn.popup=vn,_n.push(Mn.data.id),Mn.addHighlightArea();return this.container.setAttribute("aria-controls",_n.map(Mn=>`${nr.AnnotationPrefix}${Mn}`).join(",")),this.container}}class Nr{constructor({container:vn,color:_n,elements:Mn,titleObj:Cn,modificationDate:Zn,contentsObj:qn,richText:wn,parent:On,rect:Gn,parentRect:Qn,open:$s}){ps(this,yn);ps(this,Kr,null);ps(this,Zr,rs(this,yn,gy).bind(this));ps(this,Jr,rs(this,yn,m0).bind(this));ps(this,tn,rs(this,yn,p0).bind(this));ps(this,an,rs(this,yn,vm).bind(this));ps(this,dn,null);ps(this,en,null);ps(this,rn,null);ps(this,sn,null);ps(this,on,null);ps(this,fn,null);ps(this,pn,!1);ps(this,gn,null);ps(this,Pn,null);ps(this,In,null);ps(this,En,null);ps(this,zn,!1);var ws;ys(this,en,vn),ys(this,En,Cn),ys(this,rn,qn),ys(this,In,wn),ys(this,on,On),ys(this,dn,_n),ys(this,Pn,Gn),ys(this,fn,Qn),ys(this,sn,Mn);const us=ir.PDFDateString.toDateObject(Zn);us&&ys(this,Kr,On.l10n.get("annotation_date_string",{date:us.toLocaleDateString(),time:us.toLocaleTimeString()})),this.trigger=Mn.flatMap(As=>As.getElementsToTriggerPopup());for(const As of this.trigger)As.addEventListener("click",un(this,an)),As.addEventListener("mouseenter",un(this,tn)),As.addEventListener("mouseleave",un(this,Jr)),As.classList.add("popupTriggerArea");for(const As of Mn)(ws=As.container)==null||ws.addEventListener("keydown",un(this,Zr));un(this,en).hidden=!0,$s&&rs(this,yn,vm).call(this)}render(){if(un(this,gn))return;const{page:{view:vn},viewport:{rawDims:{pageWidth:_n,pageHeight:Mn,pageX:Cn,pageY:Zn}}}=un(this,on),qn=ys(this,gn,document.createElement("div"));if(qn.className="popup",un(this,dn)){const Qs=qn.style.outlineColor=nr.Util.makeHexColor(...un(this,dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?qn.style.backgroundColor=`color-mix(in srgb, ${Qs} 30%, white)`:qn.style.backgroundColor=nr.Util.makeHexColor(...un(this,dn).map(ao=>Math.floor(.7*(255-ao)+ao)))}const wn=document.createElement("span");wn.className="header";const On=document.createElement("h1");if(wn.append(On),{dir:On.dir,str:On.textContent}=un(this,En),qn.append(wn),un(this,Kr)){const Qs=document.createElement("span");Qs.classList.add("popupDate"),un(this,Kr).then(eo=>{Qs.textContent=eo}),wn.append(Qs)}const Gn=un(this,rn),Qn=un(this,In);if(Qn!=null&&Qn.str&&(!(Gn!=null&&Gn.str)||Gn.str===Qn.str))lr.XfaLayer.render({xfaHtml:Qn.html,intent:"richText",div:qn}),qn.lastChild.classList.add("richText","popupContent");else{const Qs=this._formatContents(Gn);qn.append(Qs)}let $s=!!un(this,fn),us=$s?un(this,fn):un(this,Pn);for(const Qs of un(this,sn))if(!us||nr.Util.intersect(Qs.data.rect,us)!==null){us=Qs.data.rect,$s=!0;break}const ws=nr.Util.normalizeRect([us[0],vn[3]-us[1]+vn[1],us[2],vn[3]-us[3]+vn[1]]),Rs=$s?us[2]-us[0]+5:0,Ms=ws[0]+Rs,Bs=ws[1],{style:Zs}=un(this,en);Zs.left=`${100*(Ms-Cn)/_n}%`,Zs.top=`${100*(Bs-Zn)/Mn}%`,un(this,en).append(qn)}_formatContents({str:vn,dir:_n}){const Mn=document.createElement("p");Mn.classList.add("popupContent"),Mn.dir=_n;const Cn=vn.split(/(?:\r\n?|\n)/);for(let Zn=0,qn=Cn.length;Zn<qn;++Zn){const wn=Cn[Zn];Mn.append(document.createTextNode(wn)),Zn<qn-1&&Mn.append(document.createElement("br"))}return Mn}forceHide(){ys(this,zn,this.isVisible),un(this,zn)&&(un(this,en).hidden=!0)}maybeShow(){un(this,zn)&&(ys(this,zn,!1),un(this,en).hidden=!1)}get isVisible(){return un(this,en).hidden===!1}}Kr=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,tn=new WeakMap,an=new WeakMap,dn=new WeakMap,en=new WeakMap,rn=new WeakMap,sn=new WeakMap,on=new WeakMap,fn=new WeakMap,pn=new WeakMap,gn=new WeakMap,Pn=new WeakMap,In=new WeakMap,En=new WeakMap,zn=new WeakMap,yn=new WeakSet,gy=function(vn){vn.altKey||vn.shiftKey||vn.ctrlKey||vn.metaKey||(vn.key==="Enter"||vn.key==="Escape"&&un(this,pn))&&rs(this,yn,vm).call(this)},vm=function(){ys(this,pn,!un(this,pn)),un(this,pn)?(rs(this,yn,p0).call(this),un(this,en).addEventListener("click",un(this,an)),un(this,en).addEventListener("keydown",un(this,Zr))):(rs(this,yn,m0).call(this),un(this,en).removeEventListener("click",un(this,an)),un(this,en).removeEventListener("keydown",un(this,Zr)))},p0=function(){un(this,gn)||this.render(),this.isVisible?un(this,pn)&&un(this,en).classList.add("focused"):(un(this,en).hidden=!1,un(this,en).style.zIndex=parseInt(un(this,en).style.zIndex)+1e3)},m0=function(){un(this,en).classList.remove("focused"),!(un(this,pn)||!this.isVisible)&&(un(this,en).hidden=!0,un(this,en).style.zIndex=parseInt(un(this,en).style.zIndex)-1e3)};class Dr extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=vn.data.textContent,this.textPosition=vn.data.textPosition,this.annotationEditorType=nr.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const vn=document.createElement("div");vn.classList.add("annotationTextContent"),vn.setAttribute("role","comment");for(const _n of this.textContent){const Mn=document.createElement("span");Mn.textContent=_n,vn.append(Mn)}this.container.append(vn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}er.FreeTextAnnotationElement=Dr;class Ir extends gr{constructor(_n){super(_n,{isRenderable:!0,ignoreBorder:!0});ps(this,ds,null)}render(){this.container.classList.add("lineAnnotation");const _n=this.data,{width:Mn,height:Cn}=dr(_n.rect),Zn=this.svgFactory.create(Mn,Cn,!0),qn=ys(this,ds,this.svgFactory.createElement("svg:line"));return qn.setAttribute("x1",_n.rect[2]-_n.lineCoordinates[0]),qn.setAttribute("y1",_n.rect[3]-_n.lineCoordinates[1]),qn.setAttribute("x2",_n.rect[2]-_n.lineCoordinates[2]),qn.setAttribute("y2",_n.rect[3]-_n.lineCoordinates[3]),qn.setAttribute("stroke-width",_n.borderStyle.width||1),qn.setAttribute("stroke","transparent"),qn.setAttribute("fill","transparent"),Zn.append(qn),this.container.append(Zn),!_n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,ds)}addHighlightArea(){this.container.classList.add("highlightArea")}}ds=new WeakMap;class Or extends gr{constructor(_n){super(_n,{isRenderable:!0,ignoreBorder:!0});ps(this,fs,null)}render(){this.container.classList.add("squareAnnotation");const _n=this.data,{width:Mn,height:Cn}=dr(_n.rect),Zn=this.svgFactory.create(Mn,Cn,!0),qn=_n.borderStyle.width,wn=ys(this,fs,this.svgFactory.createElement("svg:rect"));return wn.setAttribute("x",qn/2),wn.setAttribute("y",qn/2),wn.setAttribute("width",Mn-qn),wn.setAttribute("height",Cn-qn),wn.setAttribute("stroke-width",qn||1),wn.setAttribute("stroke","transparent"),wn.setAttribute("fill","transparent"),Zn.append(wn),this.container.append(Zn),!_n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,fs)}addHighlightArea(){this.container.classList.add("highlightArea")}}fs=new WeakMap;class jr extends gr{constructor(_n){super(_n,{isRenderable:!0,ignoreBorder:!0});ps(this,os,null)}render(){this.container.classList.add("circleAnnotation");const _n=this.data,{width:Mn,height:Cn}=dr(_n.rect),Zn=this.svgFactory.create(Mn,Cn,!0),qn=_n.borderStyle.width,wn=ys(this,os,this.svgFactory.createElement("svg:ellipse"));return wn.setAttribute("cx",Mn/2),wn.setAttribute("cy",Cn/2),wn.setAttribute("rx",Mn/2-qn/2),wn.setAttribute("ry",Cn/2-qn/2),wn.setAttribute("stroke-width",qn||1),wn.setAttribute("stroke","transparent"),wn.setAttribute("fill","transparent"),Zn.append(wn),this.container.append(Zn),!_n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,os)}addHighlightArea(){this.container.classList.add("highlightArea")}}os=new WeakMap;class Lr extends gr{constructor(_n){super(_n,{isRenderable:!0,ignoreBorder:!0});ps(this,Hn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const _n=this.data,{width:Mn,height:Cn}=dr(_n.rect),Zn=this.svgFactory.create(Mn,Cn,!0);let qn=[];for(const On of _n.vertices){const Gn=On.x-_n.rect[0],Qn=_n.rect[3]-On.y;qn.push(Gn+","+Qn)}qn=qn.join(" ");const wn=ys(this,Hn,this.svgFactory.createElement(this.svgElementName));return wn.setAttribute("points",qn),wn.setAttribute("stroke-width",_n.borderStyle.width||1),wn.setAttribute("stroke","transparent"),wn.setAttribute("fill","transparent"),Zn.append(wn),this.container.append(Zn),!_n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return un(this,Hn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hn=new WeakMap;class Cr extends Lr{constructor(vn){super(vn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class wr extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Pr extends gr{constructor(_n){super(_n,{isRenderable:!0,ignoreBorder:!0});ps(this,Ln,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=nr.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const _n=this.data,{width:Mn,height:Cn}=dr(_n.rect),Zn=this.svgFactory.create(Mn,Cn,!0);for(const qn of _n.inkLists){let wn=[];for(const Gn of qn){const Qn=Gn.x-_n.rect[0],$s=_n.rect[3]-Gn.y;wn.push(`${Qn},${$s}`)}wn=wn.join(" ");const On=this.svgFactory.createElement(this.svgElementName);un(this,Ln).push(On),On.setAttribute("points",wn),On.setAttribute("stroke-width",_n.borderStyle.width||1),On.setAttribute("stroke","transparent"),On.setAttribute("fill","transparent"),!_n.popupRef&&this.hasPopupData&&this._createPopup(),Zn.append(On)}return this.container.append(Zn),this.container}getElementsToTriggerPopup(){return un(this,Ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ln=new WeakMap,er.InkAnnotationElement=Pr;class Ar extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Sr extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Mr extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class qr extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class $r extends gr{constructor(vn){super(vn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}er.StampAnnotationElement=$r;class Br extends gr{constructor(_n){var Zn;super(_n,{isRenderable:!0});ps(this,ls);ps(this,Dn,null);const{filename:Mn,content:Cn}=this.data.file;this.filename=(0,ir.getFilenameFromUrl)(Mn,!0),this.content=Cn,(Zn=this.linkService.eventBus)==null||Zn.dispatch("fileattachmentannotation",{source:this,filename:Mn,content:Cn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:_n,data:Mn}=this;let Cn;Mn.hasAppearance||Mn.fillAlpha===0?Cn=document.createElement("div"):(Cn=document.createElement("img"),Cn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Mn.name)?"paperclip":"pushpin"}.svg`,Mn.fillAlpha&&Mn.fillAlpha<1&&(Cn.style=`filter: opacity(${Math.round(Mn.fillAlpha*100)}%);`)),Cn.addEventListener("dblclick",rs(this,ls,g0).bind(this)),ys(this,Dn,Cn);const{isMac:Zn}=nr.FeatureTest.platform;return _n.addEventListener("keydown",qn=>{qn.key==="Enter"&&(Zn?qn.metaKey:qn.ctrlKey)&&rs(this,ls,g0).call(this)}),!Mn.popupRef&&this.hasPopupData?this._createPopup():Cn.classList.add("popupTriggerArea"),_n.append(Cn),_n}getElementsToTriggerPopup(){return un(this,Dn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dn=new WeakMap,ls=new WeakSet,g0=function(){var _n;(_n=this.downloadManager)==null||_n.openOrDownloadData(this.container,this.content,this.filename)};class zr{constructor({div:vn,accessibilityManager:_n,annotationCanvasMap:Mn,l10n:Cn,page:Zn,viewport:qn}){ps(this,is);ps(this,xs,null);ps(this,kn,null);ps(this,Jn,new Map);this.div=vn,ys(this,xs,_n),ys(this,kn,Mn),this.l10n=Cn,this.page=Zn,this.viewport=qn,this.zIndex=0,this.l10n||(this.l10n=cr.NullL10n)}async render(vn){const{annotations:_n}=vn,Mn=this.div;(0,ir.setLayerDimensions)(Mn,this.viewport);const Cn=new Map,Zn={data:null,layer:Mn,linkService:vn.linkService,downloadManager:vn.downloadManager,imageResourcesPath:vn.imageResourcesPath||"",renderForms:vn.renderForms!==!1,svgFactory:new ir.DOMSVGFactory,annotationStorage:vn.annotationStorage||new sr.AnnotationStorage,enableScripting:vn.enableScripting===!0,hasJSActions:vn.hasJSActions,fieldObjects:vn.fieldObjects,parent:this,elements:null};for(const qn of _n){if(qn.noHTML)continue;const wn=qn.annotationType===nr.AnnotationType.POPUP;if(wn){const Qn=Cn.get(qn.id);if(!Qn)continue;Zn.elements=Qn}else{const{width:Qn,height:$s}=dr(qn.rect);if(Qn<=0||$s<=0)continue}Zn.data=qn;const On=fr.create(Zn);if(!On.isRenderable)continue;if(!wn&&qn.popupRef){const Qn=Cn.get(qn.popupRef);Qn?Qn.push(On):Cn.set(qn.popupRef,[On])}On.annotationEditorType>0&&un(this,Jn).set(On.data.id,On);const Gn=On.render();qn.hidden&&(Gn.style.visibility="hidden"),rs(this,is,yy).call(this,Gn,qn.id)}rs(this,is,y0).call(this),await this.l10n.translate(Mn)}update({viewport:vn}){const _n=this.div;this.viewport=vn,(0,ir.setLayerDimensions)(_n,{rotation:vn.rotation}),rs(this,is,y0).call(this),_n.hidden=!1}getEditableAnnotations(){return Array.from(un(this,Jn).values())}getEditableAnnotation(vn){return un(this,Jn).get(vn)}}xs=new WeakMap,kn=new WeakMap,Jn=new WeakMap,is=new WeakSet,yy=function(vn,_n){var Cn;const Mn=vn.firstChild||vn;Mn.id=`${nr.AnnotationPrefix}${_n}`,this.div.append(vn),(Cn=un(this,xs))==null||Cn.moveElementInDOM(this.div,vn,Mn,!1)},y0=function(){if(!un(this,kn))return;const vn=this.div;for(const[_n,Mn]of un(this,kn)){const Cn=vn.querySelector(`[data-annotation-id="${_n}"]`);if(!Cn)continue;const{firstChild:Zn}=Cn;Zn?Zn.nodeName==="CANVAS"?Zn.replaceWith(Mn):Zn.before(Mn):Cn.append(Mn)}un(this,kn).clear()},er.AnnotationLayer=zr},(tr,er)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.ColorConverters=void 0;function rr(sr){return Math.floor(Math.max(0,Math.min(1,sr))*255).toString(16).padStart(2,"0")}function nr(sr){return Math.max(0,Math.min(255,255*sr))}class ir{static CMYK_G([ar,cr,lr,or]){return["G",1-Math.min(1,.3*ar+.59*lr+.11*cr+or)]}static G_CMYK([ar]){return["CMYK",0,0,0,1-ar]}static G_RGB([ar]){return["RGB",ar,ar,ar]}static G_rgb([ar]){return ar=nr(ar),[ar,ar,ar]}static G_HTML([ar]){const cr=rr(ar);return`#${cr}${cr}${cr}`}static RGB_G([ar,cr,lr]){return["G",.3*ar+.59*cr+.11*lr]}static RGB_rgb(ar){return ar.map(nr)}static RGB_HTML(ar){return`#${ar.map(rr).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ar,cr,lr,or]){return["RGB",1-Math.min(1,ar+or),1-Math.min(1,lr+or),1-Math.min(1,cr+or)]}static CMYK_rgb([ar,cr,lr,or]){return[nr(1-Math.min(1,ar+or)),nr(1-Math.min(1,lr+or)),nr(1-Math.min(1,cr+or))]}static CMYK_HTML(ar){const cr=this.CMYK_RGB(ar).slice(1);return this.RGB_HTML(cr)}static RGB_CMYK([ar,cr,lr]){const or=1-ar,ur=1-cr,hr=1-lr,dr=Math.min(or,ur,hr);return["CMYK",or,ur,hr,dr]}}er.ColorConverters=ir},(tr,er)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.NullL10n=void 0,er.getL10nFallback=nr;const rr={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};rr.print_progress_percent="{{progress}}%";function nr(ar,cr){switch(ar){case"find_match_count":ar=`find_match_count[${cr.total===1?"one":"other"}]`;break;case"find_match_count_limit":ar=`find_match_count_limit[${cr.limit===1?"one":"other"}]`;break}return rr[ar]||""}function ir(ar,cr){return cr?ar.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(lr,or)=>or in cr?cr[or]:"{{"+or+"}}"):ar}const sr={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ar,cr=null,lr=nr(ar,cr)){return ir(lr,cr)},async translate(ar){}};er.NullL10n=sr},(tr,er,rr)=>{Object.defineProperty(er,"__esModule",{value:!0}),er.XfaLayer=void 0;var nr=rr(25);class ir{static setupStorage(ar,cr,lr,or,ur){const hr=or.getValue(cr,{value:null});switch(lr.name){case"textarea":if(hr.value!==null&&(ar.textContent=hr.value),ur==="print")break;ar.addEventListener("input",dr=>{or.setValue(cr,{value:dr.target.value})});break;case"input":if(lr.attributes.type==="radio"||lr.attributes.type==="checkbox"){if(hr.value===lr.attributes.xfaOn?ar.setAttribute("checked",!0):hr.value===lr.attributes.xfaOff&&ar.removeAttribute("checked"),ur==="print")break;ar.addEventListener("change",dr=>{or.setValue(cr,{value:dr.target.checked?dr.target.getAttribute("xfaOn"):dr.target.getAttribute("xfaOff")})})}else{if(hr.value!==null&&ar.setAttribute("value",hr.value),ur==="print")break;ar.addEventListener("input",dr=>{or.setValue(cr,{value:dr.target.value})})}break;case"select":if(hr.value!==null){ar.setAttribute("value",hr.value);for(const dr of lr.children)dr.attributes.value===hr.value?dr.attributes.selected=!0:dr.attributes.hasOwnProperty("selected")&&delete dr.attributes.selected}ar.addEventListener("input",dr=>{const fr=dr.target.options,gr=fr.selectedIndex===-1?"":fr[fr.selectedIndex].value;or.setValue(cr,{value:gr})});break}}static setAttributes({html:ar,element:cr,storage:lr=null,intent:or,linkService:ur}){const{attributes:hr}=cr,dr=ar instanceof HTMLAnchorElement;hr.type==="radio"&&(hr.name=`${hr.name}-${or}`);for(const[fr,gr]of Object.entries(hr))if(gr!=null)switch(fr){case"class":gr.length&&ar.setAttribute(fr,gr.join(" "));break;case"dataId":break;case"id":ar.setAttribute("data-element-id",gr);break;case"style":Object.assign(ar.style,gr);break;case"textContent":ar.textContent=gr;break;default:(!dr||fr!=="href"&&fr!=="newWindow")&&ar.setAttribute(fr,gr)}dr&&ur.addLinkAttributes(ar,hr.href,hr.newWindow),lr&&hr.dataId&&this.setupStorage(ar,hr.dataId,cr,lr)}static render(ar){var br;const cr=ar.annotationStorage,lr=ar.linkService,or=ar.xfaHtml,ur=ar.intent||"display",hr=document.createElement(or.name);or.attributes&&this.setAttributes({html:hr,element:or,intent:ur,linkService:lr});const dr=[[or,-1,hr]],fr=ar.div;if(fr.append(hr),ar.viewport){const pr=`matrix(${ar.viewport.transform.join(",")})`;fr.style.transform=pr}ur!=="richText"&&fr.setAttribute("class","xfaLayer xfaFont");const gr=[];for(;dr.length>0;){const[pr,mr,yr]=dr.at(-1);if(mr+1===pr.children.length){dr.pop();continue}const xr=pr.children[++dr.at(-1)[1]];if(xr===null)continue;const{name:vr}=xr;if(vr==="#text"){const Er=document.createTextNode(xr.value);gr.push(Er),yr.append(Er);continue}const _r=(br=xr==null?void 0:xr.attributes)!=null&&br.xmlns?document.createElementNS(xr.attributes.xmlns,vr):document.createElement(vr);if(yr.append(_r),xr.attributes&&this.setAttributes({html:_r,element:xr,storage:cr,intent:ur,linkService:lr}),xr.children&&xr.children.length>0)dr.push([xr,-1,_r]);else if(xr.value){const Er=document.createTextNode(xr.value);nr.XfaText.shouldBuildText(vr)&&gr.push(Er),_r.append(Er)}}for(const pr of fr.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))pr.setAttribute("readOnly",!0);return{textDivs:gr}}static update(ar){const cr=`matrix(${ar.viewport.transform.join(",")})`;ar.div.style.transform=cr,ar.div.hidden=!1}}er.XfaLayer=ir},(tr,er,rr)=>{var or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr,vr,_r,Er,Tr,by,xy,vy,_y,b0,wy,x0,Ey,Sy,Ay,Ry,Py,Mu,v0,_m,wm,xp,_0,Em,Xr,Ty,w0,jy,Cy,E0,Sm,vp;Object.defineProperty(er,"__esModule",{value:!0}),er.InkEditor=void 0;var nr=rr(1),ir=rr(4),sr=rr(29),ar=rr(6),cr=rr(5);const dn=class dn extends ir.AnnotationEditor{constructor(sn){super({...sn,name:"inkEditor"});ps(this,Tr);ps(this,or,0);ps(this,ur,0);ps(this,hr,this.canvasPointermove.bind(this));ps(this,dr,this.canvasPointerleave.bind(this));ps(this,fr,this.canvasPointerup.bind(this));ps(this,gr,this.canvasPointerdown.bind(this));ps(this,br,new Path2D);ps(this,pr,!1);ps(this,mr,!1);ps(this,yr,!1);ps(this,xr,null);ps(this,vr,0);ps(this,_r,0);ps(this,Er,null);this.color=sn.color||null,this.thickness=sn.thickness||null,this.opacity=sn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(sn){ir.AnnotationEditor.initialize(sn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(sn,on){switch(sn){case nr.AnnotationEditorParamsType.INK_THICKNESS:dn._defaultThickness=on;break;case nr.AnnotationEditorParamsType.INK_COLOR:dn._defaultColor=on;break;case nr.AnnotationEditorParamsType.INK_OPACITY:dn._defaultOpacity=on/100;break}}updateParams(sn,on){switch(sn){case nr.AnnotationEditorParamsType.INK_THICKNESS:rs(this,Tr,by).call(this,on);break;case nr.AnnotationEditorParamsType.INK_COLOR:rs(this,Tr,xy).call(this,on);break;case nr.AnnotationEditorParamsType.INK_OPACITY:rs(this,Tr,vy).call(this,on);break}}static get defaultPropertiesToUpdate(){return[[nr.AnnotationEditorParamsType.INK_THICKNESS,dn._defaultThickness],[nr.AnnotationEditorParamsType.INK_COLOR,dn._defaultColor||ir.AnnotationEditor._defaultLineColor],[nr.AnnotationEditorParamsType.INK_OPACITY,Math.round(dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[nr.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||dn._defaultThickness],[nr.AnnotationEditorParamsType.INK_COLOR,this.color||dn._defaultColor||ir.AnnotationEditor._defaultLineColor],[nr.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(rs(this,Tr,_m).call(this),rs(this,Tr,wm).call(this)),this.isAttachedToDOM||(this.parent.add(this),rs(this,Tr,xp).call(this)),rs(this,Tr,vp).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,un(this,xr).disconnect(),ys(this,xr,null),super.remove())}setParent(sn){!this.parent&&sn?this._uiManager.removeShouldRescale(this):this.parent&&sn===null&&this._uiManager.addShouldRescale(this),super.setParent(sn)}onScaleChanging(){const[sn,on]=this.parentDimensions,fn=this.width*sn,pn=this.height*on;this.setDimensions(fn,pn)}enableEditMode(){un(this,pr)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",un(this,gr)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",un(this,gr)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){un(this,pr)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ys(this,pr,!0),this.div.classList.add("disabled"),rs(this,Tr,vp).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(sn){this._focusEventsAllowed&&(super.focusin(sn),this.enableEditMode())}canvasPointerdown(sn){sn.button!==0||!this.isInEditMode()||un(this,pr)||(this.setInForeground(),sn.preventDefault(),sn.type!=="mouse"&&this.div.focus(),rs(this,Tr,wy).call(this,sn.offsetX,sn.offsetY))}canvasPointermove(sn){sn.preventDefault(),rs(this,Tr,x0).call(this,sn.offsetX,sn.offsetY)}canvasPointerup(sn){sn.preventDefault(),rs(this,Tr,v0).call(this,sn)}canvasPointerleave(sn){rs(this,Tr,v0).call(this,sn)}get isResizable(){return!this.isEmpty()&&un(this,pr)}render(){if(this.div)return this.div;let sn,on;this.width&&(sn=this.x,on=this.y),super.render(),ir.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(In=>{var En;return(En=this.div)==null?void 0:En.setAttribute("aria-label",In)});const[fn,pn,gn,Pn]=rs(this,Tr,_y).call(this);if(this.setAt(fn,pn,0,0),this.setDims(gn,Pn),rs(this,Tr,_m).call(this),this.width){const[In,En]=this.parentDimensions;this.setAspectRatio(this.width*In,this.height*En),this.setAt(sn*In,on*En,this.width*In,this.height*En),ys(this,yr,!0),rs(this,Tr,xp).call(this),this.setDims(this.width*In,this.height*En),rs(this,Tr,Mu).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return rs(this,Tr,wm).call(this),this.div}setDimensions(sn,on){const fn=Math.round(sn),pn=Math.round(on);if(un(this,vr)===fn&&un(this,_r)===pn)return;ys(this,vr,fn),ys(this,_r,pn),this.canvas.style.visibility="hidden";const[gn,Pn]=this.parentDimensions;this.width=sn/gn,this.height=on/Pn,this.fixAndSetPosition(),un(this,pr)&&rs(this,Tr,_0).call(this,sn,on),rs(this,Tr,xp).call(this),rs(this,Tr,Mu).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(sn,on,fn){var ds,fs,os;if(sn instanceof sr.InkAnnotationElement)return null;const pn=super.deserialize(sn,on,fn);pn.thickness=sn.thickness,pn.color=nr.Util.makeHexColor(...sn.color),pn.opacity=sn.opacity;const[gn,Pn]=pn.pageDimensions,In=pn.width*gn,En=pn.height*Pn,zn=pn.parentScale,yn=sn.thickness/2;ys(pn,pr,!0),ys(pn,vr,Math.round(In)),ys(pn,_r,Math.round(En));const{paths:Vn,rect:Kn,rotation:es}=sn;for(let{bezier:Hn}of Vn){Hn=rs(ds=dn,Xr,jy).call(ds,Hn,Kn,es);const Ln=[];pn.paths.push(Ln);let Dn=zn*(Hn[0]-yn),ls=zn*(Hn[1]-yn);for(let xs=2,kn=Hn.length;xs<kn;xs+=6){const Jn=zn*(Hn[xs]-yn),is=zn*(Hn[xs+1]-yn),bs=zn*(Hn[xs+2]-yn),Bn=zn*(Hn[xs+3]-yn),Yn=zn*(Hn[xs+4]-yn),vn=zn*(Hn[xs+5]-yn);Ln.push([[Dn,ls],[Jn,is],[bs,Bn],[Yn,vn]]),Dn=Yn,ls=vn}const Ds=rs(this,Xr,Ty).call(this,Ln);pn.bezierPath2D.push(Ds)}const Xn=rs(fs=pn,Tr,E0).call(fs);return ys(pn,ur,Math.max(ir.AnnotationEditor.MIN_SIZE,Xn[2]-Xn[0])),ys(pn,or,Math.max(ir.AnnotationEditor.MIN_SIZE,Xn[3]-Xn[1])),rs(os=pn,Tr,_0).call(os,In,En),pn}serialize(){if(this.isEmpty())return null;const sn=this.getRect(0,0),on=ir.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:nr.AnnotationEditorType.INK,color:on,thickness:this.thickness,opacity:this.opacity,paths:rs(this,Tr,Cy).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,sn),pageIndex:this.pageIndex,rect:sn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};or=new WeakMap,ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakMap,yr=new WeakMap,xr=new WeakMap,vr=new WeakMap,_r=new WeakMap,Er=new WeakMap,Tr=new WeakSet,by=function(sn){const on=this.thickness;this.addCommands({cmd:()=>{this.thickness=sn,rs(this,Tr,vp).call(this)},undo:()=>{this.thickness=on,rs(this,Tr,vp).call(this)},mustExec:!0,type:nr.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},xy=function(sn){const on=this.color;this.addCommands({cmd:()=>{this.color=sn,rs(this,Tr,Mu).call(this)},undo:()=>{this.color=on,rs(this,Tr,Mu).call(this)},mustExec:!0,type:nr.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vy=function(sn){sn/=100;const on=this.opacity;this.addCommands({cmd:()=>{this.opacity=sn,rs(this,Tr,Mu).call(this)},undo:()=>{this.opacity=on,rs(this,Tr,Mu).call(this)},mustExec:!0,type:nr.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},_y=function(){const{parentRotation:sn,parentDimensions:[on,fn]}=this;switch(sn){case 90:return[0,fn,fn,on];case 180:return[on,fn,on,fn];case 270:return[on,0,fn,on];default:return[0,0,on,fn]}},b0=function(){const{ctx:sn,color:on,opacity:fn,thickness:pn,parentScale:gn,scaleFactor:Pn}=this;sn.lineWidth=pn*gn/Pn,sn.lineCap="round",sn.lineJoin="round",sn.miterLimit=10,sn.strokeStyle=`${on}${(0,cr.opacityToHex)(fn)}`},wy=function(sn,on){this.canvas.addEventListener("contextmenu",ar.noContextMenu),this.canvas.addEventListener("pointerleave",un(this,dr)),this.canvas.addEventListener("pointermove",un(this,hr)),this.canvas.addEventListener("pointerup",un(this,fr)),this.canvas.removeEventListener("pointerdown",un(this,gr)),this.isEditing=!0,un(this,yr)||(ys(this,yr,!0),rs(this,Tr,xp).call(this),this.thickness||(this.thickness=dn._defaultThickness),this.color||(this.color=dn._defaultColor||ir.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=dn._defaultOpacity)),this.currentPath.push([sn,on]),ys(this,mr,!1),rs(this,Tr,b0).call(this),ys(this,Er,()=>{rs(this,Tr,Ay).call(this),un(this,Er)&&window.requestAnimationFrame(un(this,Er))}),window.requestAnimationFrame(un(this,Er))},x0=function(sn,on){const[fn,pn]=this.currentPath.at(-1);if(this.currentPath.length>1&&sn===fn&&on===pn)return;const gn=this.currentPath;let Pn=un(this,br);if(gn.push([sn,on]),ys(this,mr,!0),gn.length<=2){Pn.moveTo(...gn[0]),Pn.lineTo(sn,on);return}gn.length===3&&(ys(this,br,Pn=new Path2D),Pn.moveTo(...gn[0])),rs(this,Tr,Ry).call(this,Pn,...gn.at(-3),...gn.at(-2),sn,on)},Ey=function(){if(this.currentPath.length===0)return;const sn=this.currentPath.at(-1);un(this,br).lineTo(...sn)},Sy=function(sn,on){ys(this,Er,null),sn=Math.min(Math.max(sn,0),this.canvas.width),on=Math.min(Math.max(on,0),this.canvas.height),rs(this,Tr,x0).call(this,sn,on),rs(this,Tr,Ey).call(this);let fn;if(this.currentPath.length!==1)fn=rs(this,Tr,Py).call(this);else{const En=[sn,on];fn=[[En,En.slice(),En.slice(),En]]}const pn=un(this,br),gn=this.currentPath;this.currentPath=[],ys(this,br,new Path2D);const Pn=()=>{this.allRawPaths.push(gn),this.paths.push(fn),this.bezierPath2D.push(pn),this.rebuild()},In=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(rs(this,Tr,_m).call(this),rs(this,Tr,wm).call(this)),rs(this,Tr,vp).call(this))};this.addCommands({cmd:Pn,undo:In,mustExec:!0})},Ay=function(){if(!un(this,mr))return;ys(this,mr,!1);const sn=Math.ceil(this.thickness*this.parentScale),on=this.currentPath.slice(-3),fn=on.map(Pn=>Pn[0]),pn=on.map(Pn=>Pn[1]);Math.min(...fn)-sn,Math.max(...fn)+sn,Math.min(...pn)-sn,Math.max(...pn)+sn;const{ctx:gn}=this;gn.save(),gn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Pn of this.bezierPath2D)gn.stroke(Pn);gn.stroke(un(this,br)),gn.restore()},Ry=function(sn,on,fn,pn,gn,Pn,In){const En=(on+pn)/2,zn=(fn+gn)/2,yn=(pn+Pn)/2,Vn=(gn+In)/2;sn.bezierCurveTo(En+2*(pn-En)/3,zn+2*(gn-zn)/3,yn+2*(pn-yn)/3,Vn+2*(gn-Vn)/3,yn,Vn)},Py=function(){const sn=this.currentPath;if(sn.length<=2)return[[sn[0],sn[0],sn.at(-1),sn.at(-1)]];const on=[];let fn,[pn,gn]=sn[0];for(fn=1;fn<sn.length-2;fn++){const[Kn,es]=sn[fn],[Xn,ds]=sn[fn+1],fs=(Kn+Xn)/2,os=(es+ds)/2,Hn=[pn+2*(Kn-pn)/3,gn+2*(es-gn)/3],Ln=[fs+2*(Kn-fs)/3,os+2*(es-os)/3];on.push([[pn,gn],Hn,Ln,[fs,os]]),[pn,gn]=[fs,os]}const[Pn,In]=sn[fn],[En,zn]=sn[fn+1],yn=[pn+2*(Pn-pn)/3,gn+2*(In-gn)/3],Vn=[En+2*(Pn-En)/3,zn+2*(In-zn)/3];return on.push([[pn,gn],yn,Vn,[En,zn]]),on},Mu=function(){if(this.isEmpty()){rs(this,Tr,Em).call(this);return}rs(this,Tr,b0).call(this);const{canvas:sn,ctx:on}=this;on.setTransform(1,0,0,1,0,0),on.clearRect(0,0,sn.width,sn.height),rs(this,Tr,Em).call(this);for(const fn of this.bezierPath2D)on.stroke(fn)},v0=function(sn){this.canvas.removeEventListener("pointerleave",un(this,dr)),this.canvas.removeEventListener("pointermove",un(this,hr)),this.canvas.removeEventListener("pointerup",un(this,fr)),this.canvas.addEventListener("pointerdown",un(this,gr)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ar.noContextMenu)},10),rs(this,Tr,Sy).call(this,sn.offsetX,sn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},_m=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ir.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(sn=>{var on;return(on=this.canvas)==null?void 0:on.setAttribute("aria-label",sn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},wm=function(){ys(this,xr,new ResizeObserver(sn=>{const on=sn[0].contentRect;on.width&&on.height&&this.setDimensions(on.width,on.height)})),un(this,xr).observe(this.div)},xp=function(){if(!un(this,yr))return;const[sn,on]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*sn),this.canvas.height=Math.ceil(this.height*on),rs(this,Tr,Em).call(this)},_0=function(sn,on){const fn=rs(this,Tr,Sm).call(this),pn=(sn-fn)/un(this,ur),gn=(on-fn)/un(this,or);this.scaleFactor=Math.min(pn,gn)},Em=function(){const sn=rs(this,Tr,Sm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+sn,this.translationY*this.scaleFactor+sn)},Xr=new WeakSet,Ty=function(sn){const on=new Path2D;for(let fn=0,pn=sn.length;fn<pn;fn++){const[gn,Pn,In,En]=sn[fn];fn===0&&on.moveTo(...gn),on.bezierCurveTo(Pn[0],Pn[1],In[0],In[1],En[0],En[1])}return on},w0=function(sn,on,fn){const[pn,gn,Pn,In]=on;switch(fn){case 0:for(let En=0,zn=sn.length;En<zn;En+=2)sn[En]+=pn,sn[En+1]=In-sn[En+1];break;case 90:for(let En=0,zn=sn.length;En<zn;En+=2){const yn=sn[En];sn[En]=sn[En+1]+pn,sn[En+1]=yn+gn}break;case 180:for(let En=0,zn=sn.length;En<zn;En+=2)sn[En]=Pn-sn[En],sn[En+1]+=gn;break;case 270:for(let En=0,zn=sn.length;En<zn;En+=2){const yn=sn[En];sn[En]=Pn-sn[En+1],sn[En+1]=In-yn}break;default:throw new Error("Invalid rotation")}return sn},jy=function(sn,on,fn){const[pn,gn,Pn,In]=on;switch(fn){case 0:for(let En=0,zn=sn.length;En<zn;En+=2)sn[En]-=pn,sn[En+1]=In-sn[En+1];break;case 90:for(let En=0,zn=sn.length;En<zn;En+=2){const yn=sn[En];sn[En]=sn[En+1]-gn,sn[En+1]=yn-pn}break;case 180:for(let En=0,zn=sn.length;En<zn;En+=2)sn[En]=Pn-sn[En],sn[En+1]-=gn;break;case 270:for(let En=0,zn=sn.length;En<zn;En+=2){const yn=sn[En];sn[En]=In-sn[En+1],sn[En+1]=Pn-yn}break;default:throw new Error("Invalid rotation")}return sn},Cy=function(sn,on,fn,pn){var zn,yn;const gn=[],Pn=this.thickness/2,In=sn*on+Pn,En=sn*fn+Pn;for(const Vn of this.paths){const Kn=[],es=[];for(let Xn=0,ds=Vn.length;Xn<ds;Xn++){const[fs,os,Hn,Ln]=Vn[Xn],Dn=sn*fs[0]+In,ls=sn*fs[1]+En,Ds=sn*os[0]+In,xs=sn*os[1]+En,kn=sn*Hn[0]+In,Jn=sn*Hn[1]+En,is=sn*Ln[0]+In,bs=sn*Ln[1]+En;Xn===0&&(Kn.push(Dn,ls),es.push(Dn,ls)),Kn.push(Ds,xs,kn,Jn,is,bs),es.push(Ds,xs),Xn===ds-1&&es.push(is,bs)}gn.push({bezier:rs(zn=dn,Xr,w0).call(zn,Kn,pn,this.rotation),points:rs(yn=dn,Xr,w0).call(yn,es,pn,this.rotation)})}return gn},E0=function(){let sn=1/0,on=-1/0,fn=1/0,pn=-1/0;for(const gn of this.paths)for(const[Pn,In,En,zn]of gn){const yn=nr.Util.bezierBoundingBox(...Pn,...In,...En,...zn);sn=Math.min(sn,yn[0]),fn=Math.min(fn,yn[1]),on=Math.max(on,yn[2]),pn=Math.max(pn,yn[3])}return[sn,fn,on,pn]},Sm=function(){return un(this,pr)?Math.ceil(this.thickness*this.parentScale):0},vp=function(sn=!1){if(this.isEmpty())return;if(!un(this,pr)){rs(this,Tr,Mu).call(this);return}const on=rs(this,Tr,E0).call(this),fn=rs(this,Tr,Sm).call(this);ys(this,ur,Math.max(ir.AnnotationEditor.MIN_SIZE,on[2]-on[0])),ys(this,or,Math.max(ir.AnnotationEditor.MIN_SIZE,on[3]-on[1]));const pn=Math.ceil(fn+un(this,ur)*this.scaleFactor),gn=Math.ceil(fn+un(this,or)*this.scaleFactor),[Pn,In]=this.parentDimensions;this.width=pn/Pn,this.height=gn/In,this.setAspectRatio(pn,gn);const En=this.translationX,zn=this.translationY;this.translationX=-on[0],this.translationY=-on[1],rs(this,Tr,xp).call(this),rs(this,Tr,Mu).call(this),ys(this,vr,pn),ys(this,_r,gn),this.setDims(pn,gn);const yn=sn?fn/this.scaleFactor/2:0;this.translate(En-this.translationX-yn,zn-this.translationY-yn)},ps(dn,Xr),Po(dn,"_defaultColor",null),Po(dn,"_defaultOpacity",1),Po(dn,"_defaultThickness",1),Po(dn,"_type","ink");let lr=dn;er.InkEditor=lr},(tr,er,rr)=>{var lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,Vp,Up,Am,S0,Ny,Iy,A0,Rm,Oy;Object.defineProperty(er,"__esModule",{value:!0}),er.StampEditor=void 0;var nr=rr(1),ir=rr(4),sr=rr(6),ar=rr(29);const Or=class Or extends ir.AnnotationEditor{constructor(Cr){super({...Cr,name:"stampEditor"});ps(this,yr);ps(this,lr,null);ps(this,or,null);ps(this,ur,null);ps(this,hr,null);ps(this,dr,null);ps(this,fr,null);ps(this,gr,null);ps(this,br,null);ps(this,pr,!1);ps(this,mr,!1);ys(this,hr,Cr.bitmapUrl),ys(this,dr,Cr.bitmapFile)}static initialize(Cr){ir.AnnotationEditor.initialize(Cr)}static get supportedTypes(){const Cr=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,nr.shadow)(this,"supportedTypes",Cr.map(wr=>`image/${wr}`))}static get supportedTypesStr(){return(0,nr.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Cr){return this.supportedTypes.includes(Cr)}static paste(Cr,wr){wr.pasteEditor(nr.AnnotationEditorType.STAMP,{bitmapFile:Cr.getAsFile()})}remove(){var Cr,wr;un(this,or)&&(ys(this,lr,null),this._uiManager.imageManager.deleteId(un(this,or)),(Cr=un(this,fr))==null||Cr.remove(),ys(this,fr,null),(wr=un(this,gr))==null||wr.disconnect(),ys(this,gr,null)),super.remove()}rebuild(){if(!this.parent){un(this,or)&&rs(this,yr,Am).call(this);return}super.rebuild(),this.div!==null&&(un(this,or)&&rs(this,yr,Am).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(un(this,ur)||un(this,lr)||un(this,hr)||un(this,dr))}get isResizable(){return!0}render(){if(this.div)return this.div;let Cr,wr;if(this.width&&(Cr=this.x,wr=this.y),super.render(),this.div.hidden=!0,un(this,lr)?rs(this,yr,S0).call(this):rs(this,yr,Am).call(this),this.width){const[Pr,Ar]=this.parentDimensions;this.setAt(Cr*Pr,wr*Ar,this.width*Pr,this.height*Ar)}return this.div}static deserialize(Cr,wr,Pr){if(Cr instanceof ar.StampAnnotationElement)return null;const Ar=super.deserialize(Cr,wr,Pr),{rect:Sr,bitmapUrl:Mr,bitmapId:qr,isSvg:$r,accessibilityData:Br}=Cr;qr&&Pr.imageManager.isValidId(qr)?ys(Ar,or,qr):ys(Ar,hr,Mr),ys(Ar,pr,$r);const[zr,Gr]=Ar.pageDimensions;return Ar.width=(Sr[2]-Sr[0])/zr,Ar.height=(Sr[3]-Sr[1])/Gr,Br&&(Ar.altTextData=Br),Ar}serialize(Cr=!1,wr=null){if(this.isEmpty())return null;const Pr={annotationType:nr.AnnotationEditorType.STAMP,bitmapId:un(this,or),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:un(this,pr),structTreeParentId:this._structTreeParentId};if(Cr)return Pr.bitmapUrl=rs(this,yr,Rm).call(this,!0),Pr.accessibilityData=this.altTextData,Pr;const{decorative:Ar,altText:Sr}=this.altTextData;if(!Ar&&Sr&&(Pr.accessibilityData={type:"Figure",alt:Sr}),wr===null)return Pr;wr.stamps||(wr.stamps=new Map);const Mr=un(this,pr)?(Pr.rect[2]-Pr.rect[0])*(Pr.rect[3]-Pr.rect[1]):null;if(!wr.stamps.has(un(this,or)))wr.stamps.set(un(this,or),{area:Mr,serialized:Pr}),Pr.bitmap=rs(this,yr,Rm).call(this,!1);else if(un(this,pr)){const qr=wr.stamps.get(un(this,or));Mr>qr.area&&(qr.area=Mr,qr.serialized.bitmap.close(),qr.serialized.bitmap=rs(this,yr,Rm).call(this,!1))}return Pr}};lr=new WeakMap,or=new WeakMap,ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,gr=new WeakMap,br=new WeakMap,pr=new WeakMap,mr=new WeakMap,yr=new WeakSet,Vp=function(Cr,wr=!1){if(!Cr){this.remove();return}ys(this,lr,Cr.bitmap),wr||(ys(this,or,Cr.id),ys(this,pr,Cr.isSvg)),rs(this,yr,S0).call(this)},Up=function(){ys(this,ur,null),this._uiManager.enableWaiting(!1),un(this,fr)&&this.div.focus()},Am=function(){if(un(this,or)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(un(this,or)).then(wr=>rs(this,yr,Vp).call(this,wr,!0)).finally(()=>rs(this,yr,Up).call(this));return}if(un(this,hr)){const wr=un(this,hr);ys(this,hr,null),this._uiManager.enableWaiting(!0),ys(this,ur,this._uiManager.imageManager.getFromUrl(wr).then(Pr=>rs(this,yr,Vp).call(this,Pr)).finally(()=>rs(this,yr,Up).call(this)));return}if(un(this,dr)){const wr=un(this,dr);ys(this,dr,null),this._uiManager.enableWaiting(!0),ys(this,ur,this._uiManager.imageManager.getFromFile(wr).then(Pr=>rs(this,yr,Vp).call(this,Pr)).finally(()=>rs(this,yr,Up).call(this)));return}const Cr=document.createElement("input");Cr.type="file",Cr.accept=Or.supportedTypesStr,ys(this,ur,new Promise(wr=>{Cr.addEventListener("change",async()=>{if(!Cr.files||Cr.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Pr=await this._uiManager.imageManager.getFromFile(Cr.files[0]);rs(this,yr,Vp).call(this,Pr)}wr()}),Cr.addEventListener("cancel",()=>{this.remove(),wr()})}).finally(()=>rs(this,yr,Up).call(this))),Cr.click()},S0=function(){const{div:Cr}=this;let{width:wr,height:Pr}=un(this,lr);const[Ar,Sr]=this.pageDimensions,Mr=.75;if(this.width)wr=this.width*Ar,Pr=this.height*Sr;else if(wr>Mr*Ar||Pr>Mr*Sr){const zr=Math.min(Mr*Ar/wr,Mr*Sr/Pr);wr*=zr,Pr*=zr}const[qr,$r]=this.parentDimensions;this.setDims(wr*qr/Ar,Pr*$r/Sr),this._uiManager.enableWaiting(!1);const Br=ys(this,fr,document.createElement("canvas"));Cr.append(Br),Cr.hidden=!1,rs(this,yr,A0).call(this,wr,Pr),rs(this,yr,Oy).call(this),un(this,mr)||(this.parent.addUndoableEditor(this),ys(this,mr,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Ny=function(Cr,wr){var Mr;const[Pr,Ar]=this.parentDimensions;this.width=Cr/Pr,this.height=wr/Ar,this.setDims(Cr,wr),(Mr=this._initialOptions)!=null&&Mr.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,un(this,br)!==null&&clearTimeout(un(this,br)),ys(this,br,setTimeout(()=>{ys(this,br,null),rs(this,yr,A0).call(this,Cr,wr)},200))},Iy=function(Cr,wr){const{width:Pr,height:Ar}=un(this,lr);let Sr=Pr,Mr=Ar,qr=un(this,lr);for(;Sr>2*Cr||Mr>2*wr;){const $r=Sr,Br=Mr;Sr>2*Cr&&(Sr=Sr>=16384?Math.floor(Sr/2)-1:Math.ceil(Sr/2)),Mr>2*wr&&(Mr=Mr>=16384?Math.floor(Mr/2)-1:Math.ceil(Mr/2));const zr=new OffscreenCanvas(Sr,Mr);zr.getContext("2d").drawImage(qr,0,0,$r,Br,0,0,Sr,Mr),qr=zr.transferToImageBitmap()}return qr},A0=function(Cr,wr){Cr=Math.ceil(Cr),wr=Math.ceil(wr);const Pr=un(this,fr);if(!Pr||Pr.width===Cr&&Pr.height===wr)return;Pr.width=Cr,Pr.height=wr;const Ar=un(this,pr)?un(this,lr):rs(this,yr,Iy).call(this,Cr,wr),Sr=Pr.getContext("2d");Sr.filter=this._uiManager.hcmFilter,Sr.drawImage(Ar,0,0,Ar.width,Ar.height,0,0,Cr,wr)},Rm=function(Cr){if(Cr){if(un(this,pr)){const Ar=this._uiManager.imageManager.getSvgUrl(un(this,or));if(Ar)return Ar}const wr=document.createElement("canvas");return{width:wr.width,height:wr.height}=un(this,lr),wr.getContext("2d").drawImage(un(this,lr),0,0),wr.toDataURL()}if(un(this,pr)){const[wr,Pr]=this.pageDimensions,Ar=Math.round(this.width*wr*sr.PixelsPerInch.PDF_TO_CSS_UNITS),Sr=Math.round(this.height*Pr*sr.PixelsPerInch.PDF_TO_CSS_UNITS),Mr=new OffscreenCanvas(Ar,Sr);return Mr.getContext("2d").drawImage(un(this,lr),0,0,un(this,lr).width,un(this,lr).height,0,0,Ar,Sr),Mr.transferToImageBitmap()}return structuredClone(un(this,lr))},Oy=function(){ys(this,gr,new ResizeObserver(Cr=>{const wr=Cr[0].contentRect;wr.width&&wr.height&&rs(this,yr,Ny).call(this,wr.width,wr.height)})),un(this,gr).observe(this.div)},Po(Or,"_type","stamp");let cr=Or;er.StampEditor=cr}],__webpack_module_cache__={};function __w_pdfjs_require__(tr){var er=__webpack_module_cache__[tr];if(er!==void 0)return er.exports;var rr=__webpack_module_cache__[tr]={exports:{}};return __webpack_modules__[tr](rr,rr.exports,__w_pdfjs_require__),rr.exports}var __webpack_exports__={};return(()=>{var tr=__webpack_exports__;Object.defineProperty(tr,"__esModule",{value:!0}),Object.defineProperty(tr,"AbortException",{enumerable:!0,get:function(){return er.AbortException}}),Object.defineProperty(tr,"AnnotationEditorLayer",{enumerable:!0,get:function(){return sr.AnnotationEditorLayer}}),Object.defineProperty(tr,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return er.AnnotationEditorParamsType}}),Object.defineProperty(tr,"AnnotationEditorType",{enumerable:!0,get:function(){return er.AnnotationEditorType}}),Object.defineProperty(tr,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ar.AnnotationEditorUIManager}}),Object.defineProperty(tr,"AnnotationLayer",{enumerable:!0,get:function(){return cr.AnnotationLayer}}),Object.defineProperty(tr,"AnnotationMode",{enumerable:!0,get:function(){return er.AnnotationMode}}),Object.defineProperty(tr,"CMapCompressionType",{enumerable:!0,get:function(){return er.CMapCompressionType}}),Object.defineProperty(tr,"DOMSVGFactory",{enumerable:!0,get:function(){return nr.DOMSVGFactory}}),Object.defineProperty(tr,"FeatureTest",{enumerable:!0,get:function(){return er.FeatureTest}}),Object.defineProperty(tr,"GlobalWorkerOptions",{enumerable:!0,get:function(){return lr.GlobalWorkerOptions}}),Object.defineProperty(tr,"ImageKind",{enumerable:!0,get:function(){return er.ImageKind}}),Object.defineProperty(tr,"InvalidPDFException",{enumerable:!0,get:function(){return er.InvalidPDFException}}),Object.defineProperty(tr,"MissingPDFException",{enumerable:!0,get:function(){return er.MissingPDFException}}),Object.defineProperty(tr,"OPS",{enumerable:!0,get:function(){return er.OPS}}),Object.defineProperty(tr,"PDFDataRangeTransport",{enumerable:!0,get:function(){return rr.PDFDataRangeTransport}}),Object.defineProperty(tr,"PDFDateString",{enumerable:!0,get:function(){return nr.PDFDateString}}),Object.defineProperty(tr,"PDFWorker",{enumerable:!0,get:function(){return rr.PDFWorker}}),Object.defineProperty(tr,"PasswordResponses",{enumerable:!0,get:function(){return er.PasswordResponses}}),Object.defineProperty(tr,"PermissionFlag",{enumerable:!0,get:function(){return er.PermissionFlag}}),Object.defineProperty(tr,"PixelsPerInch",{enumerable:!0,get:function(){return nr.PixelsPerInch}}),Object.defineProperty(tr,"PromiseCapability",{enumerable:!0,get:function(){return er.PromiseCapability}}),Object.defineProperty(tr,"RenderingCancelledException",{enumerable:!0,get:function(){return nr.RenderingCancelledException}}),Object.defineProperty(tr,"SVGGraphics",{enumerable:!0,get:function(){return rr.SVGGraphics}}),Object.defineProperty(tr,"UnexpectedResponseException",{enumerable:!0,get:function(){return er.UnexpectedResponseException}}),Object.defineProperty(tr,"Util",{enumerable:!0,get:function(){return er.Util}}),Object.defineProperty(tr,"VerbosityLevel",{enumerable:!0,get:function(){return er.VerbosityLevel}}),Object.defineProperty(tr,"XfaLayer",{enumerable:!0,get:function(){return or.XfaLayer}}),Object.defineProperty(tr,"build",{enumerable:!0,get:function(){return rr.build}}),Object.defineProperty(tr,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return er.createValidAbsoluteUrl}}),Object.defineProperty(tr,"getDocument",{enumerable:!0,get:function(){return rr.getDocument}}),Object.defineProperty(tr,"getFilenameFromUrl",{enumerable:!0,get:function(){return nr.getFilenameFromUrl}}),Object.defineProperty(tr,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return nr.getPdfFilenameFromUrl}}),Object.defineProperty(tr,"getXfaPageViewport",{enumerable:!0,get:function(){return nr.getXfaPageViewport}}),Object.defineProperty(tr,"isDataScheme",{enumerable:!0,get:function(){return nr.isDataScheme}}),Object.defineProperty(tr,"isPdfFile",{enumerable:!0,get:function(){return nr.isPdfFile}}),Object.defineProperty(tr,"loadScript",{enumerable:!0,get:function(){return nr.loadScript}}),Object.defineProperty(tr,"noContextMenu",{enumerable:!0,get:function(){return nr.noContextMenu}}),Object.defineProperty(tr,"normalizeUnicode",{enumerable:!0,get:function(){return er.normalizeUnicode}}),Object.defineProperty(tr,"renderTextLayer",{enumerable:!0,get:function(){return ir.renderTextLayer}}),Object.defineProperty(tr,"setLayerDimensions",{enumerable:!0,get:function(){return nr.setLayerDimensions}}),Object.defineProperty(tr,"shadow",{enumerable:!0,get:function(){return er.shadow}}),Object.defineProperty(tr,"updateTextLayer",{enumerable:!0,get:function(){return ir.updateTextLayer}}),Object.defineProperty(tr,"version",{enumerable:!0,get:function(){return rr.version}});var er=__w_pdfjs_require__(1),rr=__w_pdfjs_require__(2),nr=__w_pdfjs_require__(6),ir=__w_pdfjs_require__(26),sr=__w_pdfjs_require__(27),ar=__w_pdfjs_require__(5),cr=__w_pdfjs_require__(29),lr=__w_pdfjs_require__(14),or=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;pdfExports.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";function usePDFPreloader(tr,er=3e3){const[rr,nr]=reactExports.useState({url:null,pdf:null,loading:!1,loaded:!1,error:null,totalPages:0,textContent:new Map}),ir=reactExports.useRef(null),sr=reactExports.useCallback(async cr=>{const lr=new Map;for(let or=1;or<=cr.numPages;or++)try{const dr=(await(await cr.getPage(or)).getTextContent()).items.filter(br=>"str"in br&&"transform"in br).map(br=>({str:br.str,transform:br.transform}));let fr="",gr=-1;for(const br of dr){const pr=br.transform[4];gr!==-1&&pr-gr>10&&(fr+=" "),fr+=br.str,gr=pr+br.str.length*5}lr.set(or,{text:fr,items:dr})}catch(ur){console.error(`Error precargando texto de pgina ${or}:`,ur)}return lr},[]),ar=reactExports.useCallback(async cr=>{if(!(rr.url===cr&&(rr.loaded||rr.loading))){rr.url!==cr&&nr({url:cr,pdf:null,loading:!1,loaded:!1,error:null,totalPages:0,textContent:new Map}),nr(lr=>({...lr,url:cr,loading:!0,error:null}));try{console.log("[PDFPreloader] Iniciando precarga del manual...");const lr=performance.now(),or=await pdfExports.getDocument(cr).promise,ur=performance.now()-lr;console.log(`[PDFPreloader] PDF cargado en ${ur.toFixed(0)}ms (${or.numPages} pginas)`);const hr=await sr(or);console.log(`[PDFPreloader] Texto precargado para ${hr.size} pginas`),nr({url:cr,pdf:or,loading:!1,loaded:!0,error:null,totalPages:or.numPages,textContent:hr})}catch(lr){console.error("[PDFPreloader] Error al precargar PDF:",lr),nr(or=>({...or,url:cr,loading:!1,error:"Error al precargar el manual PDF"}))}}},[rr.loaded,rr.loading,sr]);return reactExports.useEffect(()=>{if(tr&&!(rr.url===tr&&(rr.loaded||rr.loading)))return ir.current=setTimeout(()=>{ar(tr)},er),()=>{ir.current&&clearTimeout(ir.current)}},[tr,er,ar,rr.url,rr.loaded,rr.loading]),{...rr,preloadPDF:ar,isReady:rr.loaded&&!rr.error}}let globalPDFCache=null;function getGlobalPDFCache(){return globalPDFCache}function setGlobalPDFCache(tr,er,rr){globalPDFCache={url:tr,pdf:er,textContent:rr}}const APP_VERSION="4.9.94",getCollectionPathForMachine=tr=>tr==="baader-200"?"repuestosBaader200":`machines/${tr}/repuestos`;function useGlobalCatalog(tr){const{enabled:er,machines:rr}=tr,nr=reactExports.useMemo(()=>rr.filter(dr=>dr.activa),[rr]),ir=reactExports.useMemo(()=>nr.map(dr=>dr.id).sort().join("|"),[nr]),[sr,ar]=reactExports.useState([]),[cr,lr]=reactExports.useState(!1),[or,ur]=reactExports.useState(null),hr=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!er)return;if(!ir){ar([]),ur(null);return}if(hr.current===ir&&sr.length>0)return;let dr=!1;return(async()=>{lr(!0),ur(null);try{const br=(await Promise.all(nr.map(async pr=>{const mr=getCollectionPathForMachine(pr.id);return(await getDocs(collection(db,mr))).docs.map(xr=>{var _r,Er,Tr,Rr,Nr,Dr;const vr=xr.data();return{id:xr.id,...vr,createdAt:((Er=(_r=vr.createdAt)==null?void 0:_r.toDate)==null?void 0:Er.call(_r))||new Date,updatedAt:((Rr=(Tr=vr.updatedAt)==null?void 0:Tr.toDate)==null?void 0:Rr.call(Tr))||new Date,fechaUltimaActualizacionInventario:((Dr=(Nr=vr.fechaUltimaActualizacionInventario)==null?void 0:Nr.toDate)==null?void 0:Dr.call(Nr))||null,machineId:pr.id,machineNombre:pr.nombre}})}))).flat();if(dr)return;ar(br),hr.current=ir}catch(gr){if(dr)return;ur(gr instanceof Error?gr.message:"Error cargando catlogo global")}finally{dr||lr(!1)}})(),()=>{dr=!0}},[er,ir]),{items:sr,loading:cr,error:or}}const COLLECTION_NAME$3="repuestosBaader200",SETTINGS_DOC="settings/tags",REPUESTOS_INFORME_V2=[{codigoSAP:"3300067749",codigoBaader:"2004166018",cantidad:5},{codigoSAP:"3300077568",codigoBaader:"511057",cantidad:5},{codigoSAP:"3300066936",codigoBaader:"515447",cantidad:1},{codigoSAP:"3300011620",codigoBaader:"2005902029",cantidad:1},{codigoSAP:"3300012202",codigoBaader:"1890312000",cantidad:8},{codigoSAP:"3300011616",codigoBaader:"2005902030",cantidad:1},{codigoSAP:"3300051217",codigoBaader:"52746-7",cantidad:2},{codigoSAP:"3300012252",codigoBaader:"512247",cantidad:12},{codigoSAP:"3300074855",codigoBaader:"1890311000",cantidad:1},{codigoSAP:"3300053761",codigoBaader:"95270010",cantidad:1},{codigoSAP:"3300058277",codigoBaader:"515517",cantidad:1},{codigoSAP:"3300012369",codigoBaader:"95060121",cantidad:9},{codigoSAP:"3300011775",codigoBaader:"515737",cantidad:2},{codigoSAP:"3300074743",codigoBaader:"513867",cantidad:1},{codigoSAP:"3300074824",codigoBaader:"513897",cantidad:1},{codigoSAP:"3300051216",codigoBaader:"513497",cantidad:4},{codigoSAP:"3300074825",codigoBaader:"514017",cantidad:1},{codigoSAP:"3300074826",codigoBaader:"514047",cantidad:1},{codigoSAP:"3300070230",codigoBaader:"95250063",cantidad:2},{codigoSAP:"3300015735",codigoBaader:"515467",cantidad:2},{codigoSAP:"3300012253",codigoBaader:"632697",cantidad:4},{codigoSAP:"3300070245",codigoBaader:"636997",cantidad:2},{codigoSAP:"3300135529",codigoBaader:"2004002000 A4",cantidad:2},{codigoSAP:"3300081177",codigoBaader:"526467",cantidad:2},{codigoSAP:"3300054470",codigoBaader:"1890310006",cantidad:4},{codigoSAP:"3300074856",codigoBaader:"2000300021",cantidad:2},{codigoSAP:"3300061895",codigoBaader:"401107",cantidad:4},{codigoSAP:"3300054480",codigoBaader:"516127",cantidad:2},{codigoSAP:"3300017418",codigoBaader:"2001202002",cantidad:1},{codigoSAP:"3300012203",codigoBaader:"519337",cantidad:1},{codigoSAP:"3300017417",codigoBaader:"2001202004",cantidad:1},{codigoSAP:"3300106411",codigoBaader:"2000300002",cantidad:1},{codigoSAP:"3300012149",codigoBaader:"519317",cantidad:1},{codigoSAP:"3300070227",codigoBaader:"95250023",cantidad:2},{codigoSAP:"3300058278",codigoBaader:"634817",cantidad:1},{codigoSAP:"3300012201",codigoBaader:"1870510012",cantidad:1},{codigoSAP:"3300012151",codigoBaader:"1870520008",cantidad:1},{codigoSAP:"3300012205",codigoBaader:"51508-7",cantidad:2},{codigoSAP:"3300054469",codigoBaader:"511207",cantidad:4},{codigoSAP:"3300111060",codigoBaader:"515487",cantidad:1},{codigoSAP:"3300054482",codigoBaader:"1890420001",cantidad:1},{codigoSAP:"3300073833",codigoBaader:"2000300012",cantidad:1},{codigoSAP:"3300011830",codigoBaader:"92461630",cantidad:5},{codigoSAP:"3300074831",codigoBaader:"2001203001",cantidad:1},{codigoSAP:"3300063798",codigoBaader:"515997",cantidad:2},{codigoSAP:"3300054471",codigoBaader:"517977",cantidad:1},{codigoSAP:"3300037826",codigoBaader:"512757",cantidad:1},{codigoSAP:"3300063797",codigoBaader:"515987",cantidad:2},{codigoSAP:"3300080954",codigoBaader:"513727",cantidad:3},{codigoSAP:"3300063795",codigoBaader:"513457",cantidad:2},{codigoSAP:"3300106403",codigoBaader:"94011760",cantidad:6},{codigoSAP:"3300051228",codigoBaader:"521727",cantidad:2},{codigoSAP:"3300035292",codigoBaader:"94000006",cantidad:12},{codigoSAP:"3300083560",codigoBaader:"513607",cantidad:2},{codigoSAP:"3300035291",codigoBaader:"94000005",cantidad:12},{codigoSAP:"3300051231",codigoBaader:"401167",cantidad:9},{codigoSAP:"3300074736",codigoBaader:"512107",cantidad:2},{codigoSAP:"3300071219",codigoBaader:"2004902019",cantidad:1},{codigoSAP:"3300106419",codigoBaader:"2004902018",cantidad:1},{codigoSAP:"3300038765",codigoBaader:"513617",cantidad:2},{codigoSAP:"3300091371",codigoBaader:"2004179077",cantidad:1},{codigoSAP:"3300090774",codigoBaader:"2004179078",cantidad:1},{codigoSAP:"3300037808",codigoBaader:"510397",cantidad:1},{codigoSAP:"3300038770",codigoBaader:"519447",cantidad:1},{codigoSAP:"3300051219",codigoBaader:"631687",cantidad:1},{codigoSAP:"3300038854",codigoBaader:"2001202011",cantidad:1},{codigoSAP:"3300011831",codigoBaader:"92461620",cantidad:3},{codigoSAP:"3300106305",codigoBaader:"1870240002",cantidad:10},{codigoSAP:"3300073834",codigoBaader:"92204032",cantidad:2},{codigoSAP:"3300035274",codigoBaader:"2001202010",cantidad:1},{codigoSAP:"3300053757",codigoBaader:"512907",cantidad:2},{codigoSAP:"3300035295",codigoBaader:"2002601004",cantidad:1},{codigoSAP:"3300011882",codigoBaader:"42303087 F",cantidad:2},{codigoSAP:"3300017044",codigoBaader:"92461640",cantidad:2},{codigoSAP:"3300061900",codigoBaader:"401247",cantidad:1},{codigoSAP:"3300011617",codigoBaader:"2001400009",cantidad:1},{codigoSAP:"3300012367",codigoBaader:"517007",cantidad:2},{codigoSAP:"3300037854",codigoBaader:"522417",cantidad:2},{codigoSAP:"3300012318",codigoBaader:"37021202",cantidad:2},{codigoSAP:"3300037820",codigoBaader:"35406052",cantidad:18},{codigoSAP:"3300051789",codigoBaader:"200260100xx",cantidad:1},{codigoSAP:"3300037856",codigoBaader:"2002603001",cantidad:1},{codigoSAP:"3300071105",codigoBaader:"2004008001",cantidad:2},{codigoSAP:"3300135530",codigoBaader:"910822535",cantidad:1},{codigoSAP:"3300011618",codigoBaader:"2001400010",cantidad:1},{codigoSAP:"3300037815",codigoBaader:"92504025",cantidad:4},{codigoSAP:"3300035288",codigoBaader:"513417",cantidad:6},{codigoSAP:"3300103278",codigoBaader:"94011918",cantidad:3},{codigoSAP:"3300103277",codigoBaader:"94011910",cantidad:3},{codigoSAP:"3300037807",codigoBaader:"91082524",cantidad:1},{codigoSAP:"3300071150",codigoBaader:"2004008002",cantidad:1},{codigoSAP:"3300035287",codigoBaader:"631677",cantidad:1},{codigoSAP:"3300100619",codigoBaader:"37290121",cantidad:2},{codigoSAP:"3300061894",codigoBaader:"92461650",cantidad:1},{codigoSAP:"3300014746",codigoBaader:"1886510007",cantidad:1},{codigoSAP:"3300017043",codigoBaader:"92462030",cantidad:1},{codigoSAP:"3300037835",codigoBaader:"512087",cantidad:2},{codigoSAP:"3300051229",codigoBaader:"91193222",cantidad:1},{codigoSAP:"3300011829",codigoBaader:"37290120",cantidad:5},{codigoSAP:"3300012255",codigoBaader:"92204025",cantidad:2},{codigoSAP:"3300016817",codigoBaader:"92141620",cantidad:4},{codigoSAP:"3300011770",codigoBaader:"33136006",cantidad:2},{codigoSAP:"3300012375",codigoBaader:"1891910001",cantidad:8},{codigoSAP:"3300012377",codigoBaader:"1890770006",cantidad:4},{codigoSAP:"3300012366",codigoBaader:"39200205",cantidad:10},{codigoSAP:"3300037849",codigoBaader:"513227",cantidad:2},{codigoSAP:"3300048094",codigoBaader:"35008001",cantidad:2},{codigoSAP:"3300038755",codigoBaader:"513527",cantidad:2},{codigoSAP:"3300011869",codigoBaader:"519647",cantidad:2},{codigoSAP:"3300038764",codigoBaader:"401257",cantidad:2},{codigoSAP:"3300011719",codigoBaader:"92143223",cantidad:2},{codigoSAP:"3300011720",codigoBaader:"92143218",cantidad:2},{codigoSAP:"3300012254",codigoBaader:"92162525",cantidad:2},{codigoSAP:"3300070280",codigoBaader:"92162030",cantidad:2},{codigoSAP:"3300012317",codigoBaader:"37021068",cantidad:1},{codigoSAP:"3300012145",codigoBaader:"520097",cantidad:1},{codigoSAP:"3300037811",codigoBaader:"35004007",cantidad:2},{codigoSAP:"3300045152",codigoBaader:"39100548",cantidad:1},{codigoSAP:"3300011776",codigoBaader:"35023201",cantidad:4},{codigoSAP:"3300070557",codigoBaader:"32810070",cantidad:42},{codigoSAP:"3300011772",codigoBaader:"33066003",cantidad:6},{codigoSAP:"3300011657",codigoBaader:"34700251",cantidad:30},{codigoSAP:"3300011777",codigoBaader:"35012502",cantidad:2},{codigoSAP:"3300037840",codigoBaader:"35013001",cantidad:2},{codigoSAP:"3300012370",codigoBaader:"30050830",cantidad:40},{codigoSAP:"3300011820",codigoBaader:"37310102",cantidad:4},{codigoSAP:"3300012150",codigoBaader:"39200181",cantidad:8},{codigoSAP:"3300011823",codigoBaader:"37021079",cantidad:1},{codigoSAP:"3300011773",codigoBaader:"38000082",cantidad:2},{codigoSAP:"3300011771",codigoBaader:"33066002",cantidad:2},{codigoSAP:"3300011819",codigoBaader:"37310100",cantidad:5},{codigoSAP:"3300012422",codigoBaader:"38000367",cantidad:4},{codigoSAP:"3300012431",codigoBaader:"38010603",cantidad:3},{codigoSAP:"3300037825",codigoBaader:"33006205",cantidad:2},{codigoSAP:"3300011623",codigoBaader:"519167",cantidad:1},{codigoSAP:"3300011622",codigoBaader:"519157",cantidad:1},{codigoSAP:"3300011612",codigoBaader:"519437",cantidad:2},{codigoSAP:"3300106506",codigoBaader:"38010132",cantidad:2},{codigoSAP:"3300012421",codigoBaader:"38010107",cantidad:2},{codigoSAP:"3300011774",codigoBaader:"38000081",cantidad:4},{codigoSAP:"3300035294",codigoBaader:"31010351",cantidad:12},{codigoSAP:"3300037836",codigoBaader:"35300233",cantidad:2},{codigoSAP:"3300012313",codigoBaader:"31800084",cantidad:40},{codigoSAP:"3300012420",codigoBaader:"38010161",cantidad:2},{codigoSAP:"3300070720",codigoBaader:"30834010",cantidad:6},{codigoSAP:"3300012142",codigoBaader:"37310103",cantidad:1},{codigoSAP:"3300070716",codigoBaader:"30031045",cantidad:4}],TAG_NAME="Solicitud inicial dic 2025 Informe Baader 200v2",TAG_TIPO="solicitud";async function importarRepuestosInformeV2(){console.log(" Iniciando importacin de Informe Baader 200 v2..."),console.log(` Total repuestos a procesar: ${REPUESTOS_INFORME_V2.length}`),console.log(` Tag: "${TAG_NAME}" (tipo: ${TAG_TIPO})`);try{const sr=doc(db,SETTINGS_DOC),ar=await getDoc(sr),cr=ar.exists()?ar.data().tags||[]:[];if(cr.some(or=>or.nombre===TAG_NAME))console.log(` Tag "${TAG_NAME}" ya existe en la lista global`);else{const or={nombre:TAG_NAME,tipo:TAG_TIPO};await setDoc(sr,{tags:[...cr,or],updatedAt:new Date}),console.log(` Tag "${TAG_NAME}" agregado a la lista global`)}}catch(sr){console.error(" Error agregando tag a lista global:",sr)}const tr=await getDocs(collection(db,COLLECTION_NAME$3)),er=new Map;tr.forEach(sr=>{const ar=sr.data();er.set(ar.codigoSAP,{id:sr.id,tags:ar.tags||[]})}),console.log(` Encontrados ${er.size} repuestos en la base de datos`);let rr=0,nr=0,ir=[];for(const sr of REPUESTOS_INFORME_V2){const ar=er.get(sr.codigoSAP);if(ar)if(ar.tags.some(lr=>typeof lr=="object"&&lr.nombre===TAG_NAME))nr++,console.log(` ${sr.codigoSAP}: Ya tiene el tag, omitiendo`);else{const lr={nombre:TAG_NAME,tipo:TAG_TIPO,cantidad:sr.cantidad,fecha:new Date},or=[...ar.tags,lr];await updateDoc(doc(db,COLLECTION_NAME$3,ar.id),{tags:or,updatedAt:Timestamp.now()}),rr++,console.log(` ${sr.codigoSAP}: Tag agregado (cantidad: ${sr.cantidad})`)}else ir.push(sr.codigoSAP),console.log(` ${sr.codigoSAP}: No encontrado en la BD`)}return console.log(`
`+"=".repeat(50)),console.log(" RESUMEN IMPORTACIN:"),console.log("=".repeat(50)),console.log(`    Actualizados: ${rr}`),console.log(`    Ya tenan tag: ${nr}`),console.log(`    No encontrados: ${ir.length}`),ir.length>0&&(console.log(`
 Cdigos SAP no encontrados en la BD:`),ir.forEach(sr=>console.log(`   - ${sr}`))),{actualizados:rr,yaExistia:nr,noEncontrados:ir}}const DEFAULT_COLUMNS=[{key:"codigoSAP",label:"Cdigo SAP",visible:!0,required:!0,group:"general",order:0},{key:"codigoBaader",label:"Nmero Parte Manual",visible:!0,group:"general",order:1},{key:"textoBreve",label:"Descripcin SAP",visible:!0,group:"general",order:2},{key:"descripcion",label:"Descripcin Extendida",visible:!0,group:"general",order:3},{key:"nombreManual",label:"Nombre Manual",visible:!0,group:"general",order:4},{key:"tagsSolicitud",label:"Tags Solicitud",visible:!1,group:"solicitada",order:5},{key:"tagsStock",label:"Tags Stock",visible:!1,group:"stock",order:6},{key:"cantidadSolicitada",label:"Cantidad Solicitada",visible:!0,group:"solicitada",order:7},{key:"totalSolicitadoUSD",label:"Total Solicitado USD",visible:!0,group:"solicitada",order:8},{key:"cantidadStockBodega",label:"Stock en Bodega",visible:!0,group:"stock",order:9},{key:"totalStockUSD",label:"Total Stock USD",visible:!0,group:"stock",order:10},{key:"valorUnitario",label:"Valor Unitario",visible:!0,group:"general",order:11},{key:"totalUSD",label:"Total General USD",visible:!0,group:"general",order:12},{key:"acciones",label:"Acciones",visible:!0,required:!0,group:"general",order:13}],STORAGE_KEY="table_columns_config";function useTableColumns(){const[tr,er]=reactExports.useState(()=>{try{const or=localStorage.getItem(STORAGE_KEY);if(or){const ur=JSON.parse(or);return DEFAULT_COLUMNS.map(hr=>{const dr=ur.find(fr=>fr.key===hr.key);return dr?{...hr,visible:dr.visible}:hr})}}catch(or){console.error("Error loading column config:",or)}return DEFAULT_COLUMNS});reactExports.useEffect(()=>{try{localStorage.setItem(STORAGE_KEY,JSON.stringify(tr))}catch(or){console.error("Error saving column config:",or)}},[tr]);const rr=reactExports.useCallback(or=>{er(ur=>ur.map(hr=>hr.key===or&&!hr.required?{...hr,visible:!hr.visible}:hr))},[]),nr=reactExports.useCallback(()=>{er(or=>or.map(ur=>({...ur,visible:!0})))},[]),ir=reactExports.useCallback(()=>{er(DEFAULT_COLUMNS)},[]),sr=reactExports.useCallback(or=>{const ur=tr.find(hr=>hr.key===or);return ur?ur.visible:!0},[tr]),ar=reactExports.useCallback((or,ur)=>{er(hr=>{const dr=[...hr],[fr]=dr.splice(or,1);return dr.splice(ur,0,fr),dr.map((gr,br)=>({...gr,order:br}))})},[]),cr=tr.filter(or=>or.visible),lr=reactExports.useCallback(or=>tr.find(ur=>ur.key===or),[tr]);return{columns:tr,visibleColumns:cr,toggleColumn:rr,showAllColumns:nr,resetColumns:ir,isColumnVisible:sr,reorderColumns:ar,getColumn:lr}}const DEFAULT_TAGS=[{nombre:"Overhaul temporada baja",tipo:"solicitud"},{nombre:"Urgentes este mes",tipo:"solicitud"},{nombre:"Crticos",tipo:"solicitud"},{nombre:"En espera proveedor",tipo:"solicitud"},{nombre:"Pedido realizado",tipo:"solicitud"},{nombre:"Stock mnimo",tipo:"stock"},{nombre:"Stock actual",tipo:"stock"},{nombre:"Preventivo mensual",tipo:"solicitud"}],getSettingsDocPath=tr=>tr==="baader-200"?"settings/tags":`machines/${tr}/settings/tags`;function migrateOldTags(tr){return tr.map(er=>{if(typeof er=="string"){const rr=er.toLowerCase().includes("stock")?"stock":"solicitud";return{nombre:er,tipo:rr}}return er})}function useTags(tr,er){const[rr,nr]=reactExports.useState(DEFAULT_TAGS),[ir,sr]=reactExports.useState(!0),[ar,cr]=reactExports.useState(null),lr=reactExports.useMemo(()=>{if(!tr)return[];const mr=new Map;return tr.forEach(yr=>{(yr.tags||[]).forEach(xr=>{const vr=isTagAsignado(xr)?xr.nombre:xr,_r=isTagAsignado(xr)?xr.tipo:vr.toLowerCase().includes("stock")?"stock":"solicitud";mr.has(vr)||mr.set(vr,{nombre:vr,tipo:_r})})}),Array.from(mr.values())},[tr]),or=reactExports.useMemo(()=>{const mr=[...rr];return lr.forEach(yr=>{mr.some(xr=>xr.nombre===yr.nombre)||mr.push(yr)}),mr.sort((yr,xr)=>yr.nombre.localeCompare(xr.nombre,"es",{sensitivity:"base"}))},[rr,lr]);reactExports.useEffect(()=>{if(!er){nr(DEFAULT_TAGS),sr(!1);return}const mr=getSettingsDocPath(er),yr=doc(db,mr),xr=onSnapshot(yr,vr=>{if(vr.exists()){const Er=vr.data().tags||DEFAULT_TAGS,Tr=migrateOldTags(Er);nr(Tr),Er.some(Rr=>typeof Rr=="string")&&setDoc(yr,{tags:Tr,updatedAt:new Date}).catch(console.error)}else setDoc(yr,{tags:DEFAULT_TAGS,updatedAt:new Date}).catch(console.error),nr(DEFAULT_TAGS);sr(!1)},vr=>{console.error("Error al obtener tags:",vr),cr(vr.message),sr(!1),nr(DEFAULT_TAGS)});return()=>xr()},[er]);const ur=reactExports.useCallback(async mr=>{if(er)try{const yr=getSettingsDocPath(er),xr=doc(db,yr);return await setDoc(xr,{tags:mr,updatedAt:new Date}),!0}catch(yr){return console.error("Error al guardar tags:",yr),cr(yr.message),!1}},[er]),hr=reactExports.useCallback(async(mr,yr="solicitud")=>{const xr=mr.trim();if(!xr||rr.some(Er=>Er.nombre===xr))return!1;const vr={nombre:xr,tipo:yr,createdAt:new Date},_r=[...rr,vr].sort((Er,Tr)=>Er.nombre.localeCompare(Tr.nombre,"es",{sensitivity:"base"}));return await ur(_r)},[rr,ur]),dr=reactExports.useCallback(async mr=>{const yr=rr.filter(xr=>xr.nombre!==mr);return await ur(yr)},[rr,ur]),fr=reactExports.useCallback(async(mr,yr)=>{const xr=yr.trim();if(!xr||rr.some(_r=>_r.nombre===xr)&&xr!==mr)return!1;const vr=rr.map(_r=>_r.nombre===mr?{..._r,nombre:xr}:_r).sort((_r,Er)=>_r.nombre.localeCompare(Er.nombre,"es",{sensitivity:"base"}));return await ur(vr)},[rr,ur]),gr=reactExports.useCallback(async(mr,yr)=>{const xr=rr.map(vr=>vr.nombre===mr?{...vr,tipo:yr}:vr);return await ur(xr)},[rr,ur]);reactExports.useCallback(mr=>{const yr=rr.find(xr=>xr.nombre===mr);return yr?yr.tipo:null},[rr]);const br=reactExports.useCallback(async mr=>{const yr=mr.filter(vr=>vr.nombre.trim()&&!rr.some(_r=>_r.nombre===vr.nombre.trim())).map(vr=>({...vr,nombre:vr.nombre.trim(),createdAt:new Date}));if(yr.length===0)return!0;const xr=[...rr,...yr].sort((vr,_r)=>vr.nombre.localeCompare(_r.nombre,"es",{sensitivity:"base"}));return await ur(xr)},[rr,ur]),pr=reactExports.useCallback(mr=>{const yr=or.find(xr=>xr.nombre===mr);return yr?yr.tipo:null},[or]);return{tags:or,tagsGlobales:rr,tagsEnUso:lr,loading:ir,error:ar,addTag:hr,removeTag:dr,renameTag:fr,changeTagTipo:gr,getTagTipo:pr,addMultipleTags:br,saveTags:ur,DEFAULT_TAGS}}function AddToListModal({isOpen:tr,onClose:er,allRepuestos:rr,currentContextTag:nr,currentContextTipo:ir,onAddToList:sr}){const[ar,cr]=reactExports.useState(""),[lr,or]=reactExports.useState({}),[ur,hr]=reactExports.useState(new Set),dr=reactExports.useMemo(()=>rr.filter(mr=>{var xr;return!((xr=mr.tags)==null?void 0:xr.some(vr=>getTagNombre(vr)===nr))}),[rr,nr]),fr=reactExports.useMemo(()=>{if(!ar.trim())return dr.slice(0,50);const mr=ar.toLowerCase();return dr.filter(yr=>{var xr,vr;return yr.codigoSAP.toLowerCase().includes(mr)||((xr=yr.codigoBaader)==null?void 0:xr.toLowerCase().includes(mr))||yr.textoBreve.toLowerCase().includes(mr)||((vr=yr.descripcion)==null?void 0:vr.toLowerCase().includes(mr))}).slice(0,100)},[dr,ar]),gr=(mr,yr)=>{or(xr=>({...xr,[mr]:Math.max(0,yr)}))},br=mr=>{const yr=lr[mr.id]||1;sr(mr.id,yr),hr(xr=>new Set(xr).add(mr.id))},pr=()=>{cr(""),or({}),hr(new Set),er()};return tr?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onMouseDown:mr=>{mr.target===mr.currentTarget&&pr()},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",onMouseDown:mr=>mr.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${ir==="solicitud"?"bg-blue-100":"bg-green-100"}`,children:ir==="solicitud"?jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-blue-600"}):jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Agregar repuestos a la lista"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Contexto: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:nr}),jsxRuntimeExports.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${ir==="solicitud"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:ir==="solicitud"?" Solicitud":" Stock"})]})]})]}),jsxRuntimeExports.jsx("button",{onClick:pr,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"px-5 py-3 border-b border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:ar,onChange:mr=>cr(mr.target.value),placeholder:"Buscar por cdigo SAP, nmero parte, descripcin...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500",autoFocus:!0})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[dr.length," repuestos disponibles para agregar  Mostrando ",fr.length]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:fr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 text-gray-500",children:[jsxRuntimeExports.jsx(Search,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:"No se encontraron repuestos disponibles"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Todos los repuestos ya estn en esta lista o prueba otra bsqueda"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:fr.map(mr=>{const yr=ur.has(mr.id),xr=lr[mr.id]??1;return jsxRuntimeExports.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border transition-colors ${yr?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm bg-white px-2 py-1 rounded border border-gray-200 font-semibold",children:mr.codigoSAP}),mr.codigoBaader&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-0.5 rounded",children:mr.codigoBaader})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 mt-1 truncate",children:mr.textoBreve}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Valor: $",mr.valorUnitario.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 ml-4",children:yr?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[jsxRuntimeExports.jsx(Check,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Agregado"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:ir==="solicitud"?"Cant:":"Stock:"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:xr,onChange:vr=>gr(mr.id,parseInt(vr.target.value)||0),className:"w-20 px-2 py-1.5 text-center border border-gray-300 rounded-lg focus:ring-1 focus:ring-primary-500"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>br(mr),disabled:xr<=0,className:`flex items-center gap-1 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ir==="solicitud"?"bg-blue-600 hover:bg-blue-700 text-white disabled:bg-gray-300":"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-300"}`,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Agregar"]})]})})]},mr.id)})})}),jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:ur.size>0&&jsxRuntimeExports.jsxs("span",{className:"text-green-600 font-medium",children:[" ",ur.size," repuesto",ur.size!==1?"s":""," agregado",ur.size!==1?"s":""]})}),jsxRuntimeExports.jsx("button",{onClick:pr,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Listo"})]})]})}):null}var exceljs_min={exports:{}};/*! ExcelJS 19-10-2023 */(function(tr,er){(function(rr){tr.exports=rr()})(function(){return function rr(nr,ir,sr){function ar(or,ur){if(!ir[or]){if(!nr[or]){var hr=typeof commonjsRequire=="function"&&commonjsRequire;if(!ur&&hr)return hr(or,!0);if(cr)return cr(or,!0);var dr=new Error("Cannot find module '"+or+"'");throw dr.code="MODULE_NOT_FOUND",dr}var fr=ir[or]={exports:{}};nr[or][0].call(fr.exports,function(gr){return ar(nr[or][1][gr]||gr)},fr,fr.exports,rr,nr,ir,sr)}return ir[or].exports}for(var cr=typeof commonjsRequire=="function"&&commonjsRequire,lr=0;lr<sr.length;lr++)ar(sr[lr]);return ar}({1:[function(rr,nr,ir){const sr=rr("fs"),ar=rr("fast-csv"),cr=rr("dayjs/plugin/customParseFormat"),lr=rr("dayjs/plugin/utc"),or=rr("dayjs").extend(cr).extend(lr),ur=rr("../utils/stream-buf"),{fs:{exists:hr}}=rr("../utils/utils"),dr={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};nr.exports=class{constructor(fr){this.workbook=fr,this.worksheet=null}async readFile(fr,gr){if(gr=gr||{},!await hr(fr))throw new Error("File not found: "+fr);const br=sr.createReadStream(fr),pr=await this.read(br,gr);return br.close(),pr}read(fr,gr){return gr=gr||{},new Promise((br,pr)=>{const mr=this.workbook.addWorksheet(gr.sheetName),yr=gr.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],xr=gr.map||function(_r){if(_r==="")return null;const Er=Number(_r);if(!Number.isNaN(Er)&&Er!==1/0)return Er;const Tr=yr.reduce((Nr,Dr)=>{if(Nr)return Nr;const Ir=or(_r,Dr,!0);return Ir.isValid()?Ir:null},null);if(Tr)return new Date(Tr.valueOf());const Rr=dr[_r];return Rr!==void 0?Rr:_r},vr=ar.parse(gr.parserOptions).on("data",_r=>{mr.addRow(_r.map(xr))}).on("end",()=>{vr.emit("worksheet",mr)});vr.on("worksheet",br).on("error",pr),fr.pipe(vr)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(fr,gr){return new Promise((br,pr)=>{gr=gr||{};const mr=this.workbook.getWorksheet(gr.sheetName||gr.sheetId),yr=ar.format(gr.formatterOptions);fr.on("finish",()=>{br()}),yr.on("error",pr),yr.pipe(fr);const{dateFormat:xr,dateUTC:vr}=gr,_r=gr.map||(Rr=>{if(Rr){if(Rr.text||Rr.hyperlink)return Rr.hyperlink||Rr.text||"";if(Rr.formula||Rr.result)return Rr.result||"";if(Rr instanceof Date)return xr?vr?or.utc(Rr).format(xr):or(Rr).format(xr):vr?or.utc(Rr).format():or(Rr).format();if(Rr.error)return Rr.error;if(typeof Rr=="object")return JSON.stringify(Rr)}return Rr}),Er=gr.includeEmptyRows===void 0||gr.includeEmptyRows;let Tr=1;mr&&mr.eachRow((Rr,Nr)=>{if(Er)for(;Tr++<Nr-1;)yr.write([]);const{values:Dr}=Rr;Dr.shift(),yr.write(Dr.map(_r)),Tr=Nr}),yr.end()})}writeFile(fr,gr){const br={encoding:(gr=gr||{}).encoding||"utf8"},pr=sr.createWriteStream(fr,br);return this.write(pr,gr)}async writeBuffer(fr){const gr=new ur;return await this.write(gr,fr),gr.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(rr,nr,ir){const sr=rr("../utils/col-cache");class ar{constructor(lr,or){let ur=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=lr,or)if(typeof or=="string"){const hr=sr.decodeAddress(or);this.nativeCol=hr.col+ur,this.nativeColOff=0,this.nativeRow=hr.row+ur,this.nativeRowOff=0}else or.nativeCol!==void 0?(this.nativeCol=or.nativeCol||0,this.nativeColOff=or.nativeColOff||0,this.nativeRow=or.nativeRow||0,this.nativeRowOff=or.nativeRowOff||0):or.col!==void 0?(this.col=or.col+ur,this.row=or.row+ur):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(lr){return lr instanceof ar||lr==null?lr:new ar(lr)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(lr){this.nativeCol=Math.floor(lr),this.nativeColOff=Math.floor((lr-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(lr){this.nativeRow=Math.floor(lr),this.nativeRowOff=Math.floor((lr-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(lr){this.nativeCol=lr.nativeCol,this.nativeColOff=lr.nativeColOff,this.nativeRow=lr.nativeRow,this.nativeRowOff=lr.nativeRowOff}}nr.exports=ar},{"../utils/col-cache":19}],3:[function(rr,nr,ir){const sr=rr("../utils/col-cache"),ar=rr("../utils/under-dash"),cr=rr("./enums"),{slideFormula:lr}=rr("../utils/shared-formula"),or=rr("./note");class ur{constructor(fr,gr,br){if(!fr||!gr)throw new Error("A Cell needs a Row");this._row=fr,this._column=gr,sr.validateAddress(br),this._address=br,this._value=hr.create(ur.Types.Null,this),this.style=this._mergeStyle(fr.style,gr.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(fr){this.style.numFmt=fr}get font(){return this.style.font}set font(fr){this.style.font=fr}get alignment(){return this.style.alignment}set alignment(fr){this.style.alignment=fr}get border(){return this.style.border}set border(fr){this.style.border=fr}get fill(){return this.style.fill}set fill(fr){this.style.fill=fr}get protection(){return this.style.protection}set protection(fr){this.style.protection=fr}_mergeStyle(fr,gr,br){const pr=fr&&fr.numFmt||gr&&gr.numFmt;pr&&(br.numFmt=pr);const mr=fr&&fr.font||gr&&gr.font;mr&&(br.font=mr);const yr=fr&&fr.alignment||gr&&gr.alignment;yr&&(br.alignment=yr);const xr=fr&&fr.border||gr&&gr.border;xr&&(br.border=xr);const vr=fr&&fr.fill||gr&&gr.fill;vr&&(br.fill=vr);const _r=fr&&fr.protection||gr&&gr.protection;return _r&&(br.protection=_r),br}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===ur.Types.Merge}merge(fr,gr){this._value.release(),this._value=hr.create(ur.Types.Merge,this,fr),gr||(this.style=fr.style)}unmerge(){this.type===ur.Types.Merge&&(this._value.release(),this._value=hr.create(ur.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(fr){return this._value.type===ur.Types.Merge&&this._value.isMergedTo(fr)}get master(){return this.type===ur.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===ur.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(fr){this.type!==ur.Types.Merge?(this._value.release(),this._value=hr.create(hr.getType(fr),this,fr)):this._value.master.value=fr}get note(){return this._comment&&this._comment.note}set note(fr){this._comment=new or(fr)}get text(){return this._value.toString()}get html(){return ar.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(fr){this.type===ur.Types.String&&(this._value=hr.create(ur.Types.Hyperlink,this,{text:this._value.value,hyperlink:fr}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:fr}=this._row;return{sheetName:fr.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(fr){this.names=[fr]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(fr){const{definedNames:gr}=this.workbook;gr.removeAllNames(this.fullAddress),fr.forEach(br=>{gr.addEx(this.fullAddress,br)})}addName(fr){this.workbook.definedNames.addEx(this.fullAddress,fr)}removeName(fr){this.workbook.definedNames.removeEx(this.fullAddress,fr)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(fr){this._dataValidations.add(this.address,fr)}get model(){const{model:fr}=this._value;return fr.style=this.style,this._comment&&(fr.comment=this._comment.model),fr}set model(fr){if(this._value.release(),this._value=hr.create(fr.type,this),this._value.model=fr,fr.comment)switch(fr.comment.type){case"note":this._comment=or.fromModel(fr.comment)}fr.style?this.style=fr.style:this.style={}}}ur.Types=cr.ValueType;const hr={getType:dr=>dr==null?ur.Types.Null:dr instanceof String||typeof dr=="string"?ur.Types.String:typeof dr=="number"?ur.Types.Number:typeof dr=="boolean"?ur.Types.Boolean:dr instanceof Date?ur.Types.Date:dr.text&&dr.hyperlink?ur.Types.Hyperlink:dr.formula||dr.sharedFormula?ur.Types.Formula:dr.richText?ur.Types.RichText:dr.sharedString?ur.Types.SharedString:dr.error?ur.Types.Error:ur.Types.JSON,types:[{t:ur.Types.Null,f:class{constructor(dr){this.model={address:dr.address,type:ur.Types.Null}}get value(){return null}set value(dr){}get type(){return ur.Types.Null}get effectiveType(){return ur.Types.Null}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return""}release(){}toString(){return""}}},{t:ur.Types.Number,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Number,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.Number}get effectiveType(){return ur.Types.Number}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:ur.Types.String,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.String,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.String}get effectiveType(){return ur.Types.String}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:ur.Types.Date,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Date,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.Date}get effectiveType(){return ur.Types.Date}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:ur.Types.Hyperlink,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Hyperlink,text:fr?fr.text:void 0,hyperlink:fr?fr.hyperlink:void 0},fr&&fr.tooltip&&(this.model.tooltip=fr.tooltip)}get value(){const dr={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(dr.tooltip=this.model.tooltip),dr}set value(dr){this.model={text:dr.text,hyperlink:dr.hyperlink},dr.tooltip&&(this.model.tooltip=dr.tooltip)}get text(){return this.model.text}set text(dr){this.model.text=dr}get hyperlink(){return this.model.hyperlink}set hyperlink(dr){this.model.hyperlink=dr}get type(){return ur.Types.Hyperlink}get effectiveType(){return ur.Types.Hyperlink}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:ur.Types.Formula,f:class{constructor(dr,fr){this.cell=dr,this.model={address:dr.address,type:ur.Types.Formula,shareType:fr?fr.shareType:void 0,ref:fr?fr.ref:void 0,formula:fr?fr.formula:void 0,sharedFormula:fr?fr.sharedFormula:void 0,result:fr?fr.result:void 0}}_copyModel(dr){const fr={},gr=br=>{const pr=dr[br];pr&&(fr[br]=pr)};return gr("formula"),gr("result"),gr("ref"),gr("shareType"),gr("sharedFormula"),fr}get value(){return this._copyModel(this.model)}set value(dr){this.model=this._copyModel(dr)}validate(dr){switch(hr.getType(dr)){case ur.Types.Null:case ur.Types.String:case ur.Types.Number:case ur.Types.Date:break;case ur.Types.Hyperlink:case ur.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(dr){this.model.formula=dr}get formulaType(){return this.model.formula?cr.FormulaType.Master:this.model.sharedFormula?cr.FormulaType.Shared:cr.FormulaType.None}get result(){return this.model.result}set result(dr){this.model.result=dr}get type(){return ur.Types.Formula}get effectiveType(){const dr=this.model.result;return dr==null?cr.ValueType.Null:dr instanceof String||typeof dr=="string"?cr.ValueType.String:typeof dr=="number"?cr.ValueType.Number:dr instanceof Date?cr.ValueType.Date:dr.text&&dr.hyperlink?cr.ValueType.Hyperlink:dr.formula?cr.ValueType.Formula:cr.ValueType.Null}get address(){return this.model.address}set address(dr){this.model.address=dr}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:dr}=this.cell,fr=dr.findCell(this.model.sharedFormula);this._translatedFormula=fr&&lr(fr.formula,fr.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:ur.Types.Merge,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Merge,master:fr?fr.address:void 0},this._master=fr,fr&&fr.addMergeRef()}get value(){return this._master.value}set value(dr){dr instanceof ur?(this._master&&this._master.releaseMergeRef(),dr.addMergeRef(),this._master=dr):this._master.value=dr}isMergedTo(dr){return dr===this._master}get master(){return this._master}get type(){return ur.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:ur.Types.JSON,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.String,value:JSON.stringify(fr),rawValue:fr}}get value(){return this.model.rawValue}set value(dr){this.model.rawValue=dr,this.model.value=JSON.stringify(dr)}get type(){return ur.Types.String}get effectiveType(){return ur.Types.String}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:ur.Types.SharedString,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.SharedString,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.SharedString}get effectiveType(){return ur.Types.SharedString}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:ur.Types.RichText,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.String,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}toString(){return this.model.value.richText.map(dr=>dr.text).join("")}get type(){return ur.Types.RichText}get effectiveType(){return ur.Types.RichText}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:ur.Types.Boolean,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Boolean,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.Boolean}get effectiveType(){return ur.Types.Boolean}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:ur.Types.Error,f:class{constructor(dr,fr){this.model={address:dr.address,type:ur.Types.Error,value:fr}}get value(){return this.model.value}set value(dr){this.model.value=dr}get type(){return ur.Types.Error}get effectiveType(){return ur.Types.Error}get address(){return this.model.address}set address(dr){this.model.address=dr}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((dr,fr)=>(dr[fr.t]=fr.f,dr),[]),create(dr,fr,gr){const br=this.types[dr];if(!br)throw new Error("Could not create Value of type "+dr);return new br(fr,gr)}};nr.exports=ur},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(rr,nr,ir){const sr=rr("../utils/under-dash"),ar=rr("./enums"),cr=rr("../utils/col-cache");class lr{constructor(ur,hr,dr){this._worksheet=ur,this._number=hr,dr!==!1&&(this.defn=dr)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return cr.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(ur){ur?(this.key=ur.key,this.width=ur.width!==void 0?ur.width:9,this.outlineLevel=ur.outlineLevel,ur.style?this.style=ur.style:this.style={},this.header=ur.header,this._hidden=!!ur.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(ur){ur!==void 0?(this._header=ur,this.headers.forEach((hr,dr)=>{this._worksheet.getCell(dr+1,this.number).value=hr})):this._header=void 0}get key(){return this._key}set key(ur){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=ur,ur&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(ur){this._hidden=ur}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(ur){this._outlineLevel=ur}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(ur){return this.width===ur.width&&this.hidden===ur.hidden&&this.outlineLevel===ur.outlineLevel&&sr.isEqual(this.style,ur.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const ur=this.style;return!ur||!(ur.font||ur.numFmt||ur.alignment||ur.border||ur.fill||ur.protection)}get headerCount(){return this.headers.length}eachCell(ur,hr){const dr=this.number;hr||(hr=ur,ur=null),this._worksheet.eachRow(ur,(fr,gr)=>{hr(fr.getCell(dr),gr)})}get values(){const ur=[];return this.eachCell((hr,dr)=>{hr&&hr.type!==ar.ValueType.Null&&(ur[dr]=hr.value)}),ur}set values(ur){if(!ur)return;const hr=this.number;let dr=0;ur.hasOwnProperty("0")&&(dr=1),ur.forEach((fr,gr)=>{this._worksheet.getCell(gr+dr,hr).value=fr})}_applyStyle(ur,hr){return this.style[ur]=hr,this.eachCell(dr=>{dr[ur]=hr}),hr}get numFmt(){return this.style.numFmt}set numFmt(ur){this._applyStyle("numFmt",ur)}get font(){return this.style.font}set font(ur){this._applyStyle("font",ur)}get alignment(){return this.style.alignment}set alignment(ur){this._applyStyle("alignment",ur)}get protection(){return this.style.protection}set protection(ur){this._applyStyle("protection",ur)}get border(){return this.style.border}set border(ur){this._applyStyle("border",ur)}get fill(){return this.style.fill}set fill(ur){this._applyStyle("fill",ur)}static toModel(ur){const hr=[];let dr=null;return ur&&ur.forEach((fr,gr)=>{fr.isDefault?dr&&(dr=null):dr&&fr.equivalentTo(dr)?dr.max=gr+1:(dr={min:gr+1,max:gr+1,width:fr.width!==void 0?fr.width:9,style:fr.style,isCustomWidth:fr.isCustomWidth,hidden:fr.hidden,outlineLevel:fr.outlineLevel,collapsed:fr.collapsed},hr.push(dr))}),hr.length?hr:void 0}static fromModel(ur,hr){const dr=[];let fr=1,gr=0;for(hr=(hr=hr||[]).sort(function(br,pr){return br.min-pr.min});gr<hr.length;){const br=hr[gr++];for(;fr<br.min;)dr.push(new lr(ur,fr++));for(;fr<=br.max;)dr.push(new lr(ur,fr++,br))}return dr.length?dr:null}}nr.exports=lr},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(rr,nr,ir){nr.exports=class{constructor(sr){this.model=sr||{}}add(sr,ar){return this.model[sr]=ar}find(sr){return this.model[sr]}remove(sr){this.model[sr]=void 0}}},{}],6:[function(rr,nr,ir){const sr=rr("../utils/under-dash"),ar=rr("../utils/col-cache"),cr=rr("../utils/cell-matrix"),lr=rr("./range"),or=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;nr.exports=class{constructor(){this.matrixMap={}}getMatrix(ur){return this.matrixMap[ur]||(this.matrixMap[ur]=new cr)}add(ur,hr){const dr=ar.decodeEx(ur);this.addEx(dr,hr)}addEx(ur,hr){const dr=this.getMatrix(hr);if(ur.top)for(let fr=ur.left;fr<=ur.right;fr++)for(let gr=ur.top;gr<=ur.bottom;gr++){const br={sheetName:ur.sheetName,address:ar.n2l(fr)+gr,row:gr,col:fr};dr.addCellEx(br)}else dr.addCellEx(ur)}remove(ur,hr){const dr=ar.decodeEx(ur);this.removeEx(dr,hr)}removeEx(ur,hr){this.getMatrix(hr).removeCellEx(ur)}removeAllNames(ur){sr.each(this.matrixMap,hr=>{hr.removeCellEx(ur)})}forEach(ur){sr.each(this.matrixMap,(hr,dr)=>{hr.forEach(fr=>{ur(dr,fr)})})}getNames(ur){return this.getNamesEx(ar.decodeEx(ur))}getNamesEx(ur){return sr.map(this.matrixMap,(hr,dr)=>hr.findCellEx(ur)&&dr).filter(Boolean)}_explore(ur,hr){hr.mark=!1;const{sheetName:dr}=hr,fr=new lr(hr.row,hr.col,hr.row,hr.col,dr);let gr,br;function pr(yr,xr){const vr=ur.findCellAt(dr,yr,hr.col);return!(!vr||!vr.mark)&&(fr[xr]=yr,vr.mark=!1,!0)}for(br=hr.row-1;pr(br,"top");br--);for(br=hr.row+1;pr(br,"bottom");br++);function mr(yr,xr){const vr=[];for(br=fr.top;br<=fr.bottom;br++){const _r=ur.findCellAt(dr,br,yr);if(!_r||!_r.mark)return!1;vr.push(_r)}fr[xr]=yr;for(let _r=0;_r<vr.length;_r++)vr[_r].mark=!1;return!0}for(gr=hr.col-1;mr(gr,"left");gr--);for(gr=hr.col+1;mr(gr,"right");gr++);return fr}getRanges(ur,hr){return(hr=hr||this.matrixMap[ur])?(hr.forEach(dr=>{dr.mark=!0}),{name:ur,ranges:hr.map(dr=>dr.mark&&this._explore(hr,dr)).filter(Boolean).map(dr=>dr.$shortRange)}):{name:ur,ranges:[]}}normaliseMatrix(ur,hr){ur.forEachInSheet(hr,(dr,fr,gr)=>{dr&&(dr.row===fr&&dr.col===gr||(dr.row=fr,dr.col=gr,dr.address=ar.n2l(gr)+fr))})}spliceRows(ur,hr,dr,fr){sr.each(this.matrixMap,gr=>{gr.spliceRows(ur,hr,dr,fr),this.normaliseMatrix(gr,ur)})}spliceColumns(ur,hr,dr,fr){sr.each(this.matrixMap,gr=>{gr.spliceColumns(ur,hr,dr,fr),this.normaliseMatrix(gr,ur)})}get model(){return sr.map(this.matrixMap,(ur,hr)=>this.getRanges(hr,ur)).filter(ur=>ur.ranges.length)}set model(ur){const hr=this.matrixMap={};ur.forEach(dr=>{const fr=hr[dr.name]=new cr;dr.ranges.forEach(gr=>{or.test(gr.split("!").pop()||"")&&fr.addCell(gr)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(rr,nr,ir){nr.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(rr,nr,ir){const sr=rr("../utils/col-cache"),ar=rr("./anchor");nr.exports=class{constructor(cr,lr){this.worksheet=cr,this.model=lr}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(cr){let{type:lr,imageId:or,range:ur,hyperlinks:hr}=cr;if(this.type=lr,this.imageId=or,lr==="image")if(typeof ur=="string"){const dr=sr.decode(ur);this.range={tl:new ar(this.worksheet,{col:dr.left,row:dr.top},-1),br:new ar(this.worksheet,{col:dr.right,row:dr.bottom},0),editAs:"oneCell"}}else this.range={tl:new ar(this.worksheet,ur.tl,0),br:ur.br&&new ar(this.worksheet,ur.br,0),ext:ur.ext,editAs:ur.editAs,hyperlinks:hr||ur.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(rr,nr,ir){const sr=rr("../utils/under-dash");class ar{constructor(lr){this.note=lr}get model(){let lr=null;switch(typeof this.note){case"string":lr={type:"note",note:{texts:[{text:this.note}]}};break;default:lr={type:"note",note:this.note}}return sr.deepMerge({},ar.DEFAULT_CONFIGS,lr)}set model(lr){const{note:or}=lr,{texts:ur}=or;ur.length===1&&Object.keys(ur[0]).length===1?this.note=ur[0].text:this.note=or}static fromModel(lr){const or=new ar;return or.model=lr,or}}ar.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},nr.exports=ar},{"../utils/under-dash":26}],10:[function(rr,nr,ir){const sr=rr("../utils/col-cache");class ar{constructor(){this.decode(arguments)}setTLBR(lr,or,ur,hr,dr){if(arguments.length<4){const fr=sr.decodeAddress(lr),gr=sr.decodeAddress(or);this.model={top:Math.min(fr.row,gr.row),left:Math.min(fr.col,gr.col),bottom:Math.max(fr.row,gr.row),right:Math.max(fr.col,gr.col),sheetName:ur},this.setTLBR(fr.row,fr.col,gr.row,gr.col,dr)}else this.model={top:Math.min(lr,ur),left:Math.min(or,hr),bottom:Math.max(lr,ur),right:Math.max(or,hr),sheetName:dr}}decode(lr){switch(lr.length){case 5:this.setTLBR(lr[0],lr[1],lr[2],lr[3],lr[4]);break;case 4:this.setTLBR(lr[0],lr[1],lr[2],lr[3]);break;case 3:this.setTLBR(lr[0],lr[1],lr[2]);break;case 2:this.setTLBR(lr[0],lr[1]);break;case 1:{const or=lr[0];if(or instanceof ar)this.model={top:or.model.top,left:or.model.left,bottom:or.model.bottom,right:or.model.right,sheetName:or.sheetName};else if(or instanceof Array)this.decode(or);else if(or.top&&or.left&&or.bottom&&or.right)this.model={top:or.top,left:or.left,bottom:or.bottom,right:or.right,sheetName:or.sheetName};else{const ur=sr.decodeEx(or);ur.top?this.model={top:ur.top,left:ur.left,bottom:ur.bottom,right:ur.right,sheetName:ur.sheetName}:this.model={top:ur.row,left:ur.col,bottom:ur.row,right:ur.col,sheetName:ur.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+lr.length)}}get top(){return this.model.top||1}set top(lr){this.model.top=lr}get left(){return this.model.left||1}set left(lr){this.model.left=lr}get bottom(){return this.model.bottom||1}set bottom(lr){this.model.bottom=lr}get right(){return this.model.right||1}set right(lr){this.model.right=lr}get sheetName(){return this.model.sheetName}set sheetName(lr){this.model.sheetName=lr}get _serialisedSheetName(){const{sheetName:lr}=this.model;return lr?/^[a-zA-Z0-9]*$/.test(lr)?lr+"!":`'${lr}'!`:""}expand(lr,or,ur,hr){(!this.model.top||lr<this.top)&&(this.top=lr),(!this.model.left||or<this.left)&&(this.left=or),(!this.model.bottom||ur>this.bottom)&&(this.bottom=ur),(!this.model.right||hr>this.right)&&(this.right=hr)}expandRow(lr){if(lr){const{dimensions:or,number:ur}=lr;or&&this.expand(ur,or.min,ur,or.max)}}expandToAddress(lr){const or=sr.decodeEx(lr);this.expand(or.row,or.col,or.row,or.col)}get tl(){return sr.n2l(this.left)+this.top}get $t$l(){return`$${sr.n2l(this.left)}$${this.top}`}get br(){return sr.n2l(this.right)+this.bottom}get $b$r(){return`$${sr.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(lr){return(!lr.sheetName||!this.sheetName||lr.sheetName===this.sheetName)&&!(lr.bottom<this.top)&&!(lr.top>this.bottom)&&!(lr.right<this.left)&&!(lr.left>this.right)}contains(lr){const or=sr.decodeEx(lr);return this.containsEx(or)}containsEx(lr){return(!lr.sheetName||!this.sheetName||lr.sheetName===this.sheetName)&&lr.row>=this.top&&lr.row<=this.bottom&&lr.col>=this.left&&lr.col<=this.right}forEachAddress(lr){for(let or=this.left;or<=this.right;or++)for(let ur=this.top;ur<=this.bottom;ur++)lr(sr.encodeAddress(ur,or),ur,or)}}nr.exports=ar},{"../utils/col-cache":19}],11:[function(rr,nr,ir){const sr=rr("../utils/under-dash"),ar=rr("./enums"),cr=rr("../utils/col-cache"),lr=rr("./cell");nr.exports=class{constructor(or,ur){this._worksheet=or,this._number=ur,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(or){return this._cells[or-1]}getCellEx(or){let ur=this._cells[or.col-1];if(!ur){const hr=this._worksheet.getColumn(or.col);ur=new lr(this,hr,or.address),this._cells[or.col-1]=ur}return ur}getCell(or){if(typeof or=="string"){const ur=this._worksheet.getColumnKey(or);or=ur?ur.number:cr.l2n(or)}return this._cells[or-1]||this.getCellEx({address:cr.encodeAddress(this._number,or),row:this._number,col:or})}splice(or,ur){const hr=or+ur;for(var dr=arguments.length,fr=new Array(dr>2?dr-2:0),gr=2;gr<dr;gr++)fr[gr-2]=arguments[gr];const br=fr.length-ur,pr=this._cells.length;let mr,yr,xr;if(br<0)for(mr=or+fr.length;mr<=pr;mr++)xr=this._cells[mr-1],yr=this._cells[mr-br-1],yr?(xr=this.getCell(mr),xr.value=yr.value,xr.style=yr.style,xr._comment=yr._comment):xr&&(xr.value=null,xr.style={},xr._comment=void 0);else if(br>0)for(mr=pr;mr>=hr;mr--)yr=this._cells[mr-1],yr?(xr=this.getCell(mr+br),xr.value=yr.value,xr.style=yr.style,xr._comment=yr._comment):this._cells[mr+br-1]=void 0;for(mr=0;mr<fr.length;mr++)xr=this.getCell(or+mr),xr.value=fr[mr],xr.style={},xr._comment=void 0}eachCell(or,ur){if(ur||(ur=or,or=null),or&&or.includeEmpty){const hr=this._cells.length;for(let dr=1;dr<=hr;dr++)ur(this.getCell(dr),dr)}else this._cells.forEach((hr,dr)=>{hr&&hr.type!==ar.ValueType.Null&&ur(hr,dr+1)})}addPageBreak(or,ur){const hr=this._worksheet,dr=Math.max(0,or-1)||0,fr=Math.max(0,ur-1)||16838,gr={id:this._number,max:fr,man:1};dr&&(gr.min=dr),hr.rowBreaks.push(gr)}get values(){const or=[];return this._cells.forEach(ur=>{ur&&ur.type!==ar.ValueType.Null&&(or[ur.col]=ur.value)}),or}set values(or){if(this._cells=[],or)if(or instanceof Array){let ur=0;or.hasOwnProperty("0")&&(ur=1),or.forEach((hr,dr)=>{hr!==void 0&&(this.getCellEx({address:cr.encodeAddress(this._number,dr+ur),row:this._number,col:dr+ur}).value=hr)})}else this._worksheet.eachColumnKey((ur,hr)=>{or[hr]!==void 0&&(this.getCellEx({address:cr.encodeAddress(this._number,ur.number),row:this._number,col:ur.number}).value=or[hr])})}get hasValues(){return sr.some(this._cells,or=>or&&or.type!==ar.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let or=0;return this.eachCell(()=>{or++}),or}get dimensions(){let or=0,ur=0;return this._cells.forEach(hr=>{hr&&hr.type!==ar.ValueType.Null&&((!or||or>hr.col)&&(or=hr.col),ur<hr.col&&(ur=hr.col))}),or>0?{min:or,max:ur}:null}_applyStyle(or,ur){return this.style[or]=ur,this._cells.forEach(hr=>{hr&&(hr[or]=ur)}),ur}get numFmt(){return this.style.numFmt}set numFmt(or){this._applyStyle("numFmt",or)}get font(){return this.style.font}set font(or){this._applyStyle("font",or)}get alignment(){return this.style.alignment}set alignment(or){this._applyStyle("alignment",or)}get protection(){return this.style.protection}set protection(or){this._applyStyle("protection",or)}get border(){return this.style.border}set border(or){this._applyStyle("border",or)}get fill(){return this.style.fill}set fill(or){this._applyStyle("fill",or)}get hidden(){return!!this._hidden}set hidden(or){this._hidden=or}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(or){this._outlineLevel=or}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const or=[];let ur=0,hr=0;return this._cells.forEach(dr=>{if(dr){const fr=dr.model;fr&&((!ur||ur>dr.col)&&(ur=dr.col),hr<dr.col&&(hr=dr.col),or.push(fr))}}),this.height||or.length?{cells:or,number:this.number,min:ur,max:hr,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(or){if(or.number!==this._number)throw new Error("Invalid row number in model");let ur;this._cells=[],or.cells.forEach(hr=>{switch(hr.type){case lr.Types.Merge:break;default:{let dr;if(hr.address)dr=cr.decodeAddress(hr.address);else if(ur){const{row:fr}=ur,gr=ur.col+1;dr={row:fr,col:gr,address:cr.encodeAddress(fr,gr),$col$row:`$${cr.n2l(gr)}$${fr}`}}ur=dr,this.getCellEx(dr).model=hr;break}}}),or.height?this.height=or.height:delete this.height,this.hidden=or.hidden,this.outlineLevel=or.outlineLevel||0,this.style=or.style&&JSON.parse(JSON.stringify(or.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(rr,nr,ir){const sr=rr("../utils/col-cache");class ar{constructor(lr,or,ur){this.table=lr,this.column=or,this.index=ur}_set(lr,or){this.table.cacheState(),this.column[lr]=or}get name(){return this.column.name}set name(lr){this._set("name",lr)}get filterButton(){return this.column.filterButton}set filterButton(lr){this.column.filterButton=lr}get style(){return this.column.style}set style(lr){this.column.style=lr}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(lr){this._set("totalsRowLabel",lr)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(lr){this._set("totalsRowFunction",lr)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(lr){this._set("totalsRowResult",lr)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(lr){this._set("totalsRowFormula",lr)}}nr.exports=class{constructor(cr,lr){this.worksheet=cr,lr&&(this.table=lr,this.validate(),this.store())}getFormula(cr){switch(cr.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${cr.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${cr.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${cr.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${cr.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${cr.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${cr.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${cr.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${cr.name}])`;case"custom":return cr.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+cr.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:cr}=this,lr=(br,pr,mr)=>{br[pr]===void 0&&(br[pr]=mr)};lr(cr,"headerRow",!0),lr(cr,"totalsRow",!1),lr(cr,"style",{}),lr(cr.style,"theme","TableStyleMedium2"),lr(cr.style,"showFirstColumn",!1),lr(cr.style,"showLastColumn",!1),lr(cr.style,"showRowStripes",!1),lr(cr.style,"showColumnStripes",!1);const or=(br,pr)=>{if(!br)throw new Error(pr)};or(cr.ref,"Table must have ref"),or(cr.columns,"Table must have column definitions"),or(cr.rows,"Table must have row definitions"),cr.tl=sr.decodeAddress(cr.ref);const{row:ur,col:hr}=cr.tl;or(ur>0,"Table must be on valid row"),or(hr>0,"Table must be on valid col");const{width:dr,filterHeight:fr,tableHeight:gr}=this;cr.autoFilterRef=sr.encode(ur,hr,ur+fr-1,hr+dr-1),cr.tableRef=sr.encode(ur,hr,ur+gr-1,hr+dr-1),cr.columns.forEach((br,pr)=>{or(br.name,`Column ${pr} must have a name`),pr===0?lr(br,"totalsRowLabel","Total"):(lr(br,"totalsRowFunction","none"),br.totalsRowFormula=this.getFormula(br))})}store(){const cr=(fr,gr)=>{gr&&Object.keys(gr).forEach(br=>{fr[br]=gr[br]})},{worksheet:lr,table:or}=this,{row:ur,col:hr}=or.tl;let dr=0;if(or.headerRow){const fr=lr.getRow(ur+dr++);or.columns.forEach((gr,br)=>{const{style:pr,name:mr}=gr,yr=fr.getCell(hr+br);yr.value=mr,cr(yr,pr)})}if(or.rows.forEach(fr=>{const gr=lr.getRow(ur+dr++);fr.forEach((br,pr)=>{const mr=gr.getCell(hr+pr);mr.value=br,cr(mr,or.columns[pr].style)})}),or.totalsRow){const fr=lr.getRow(ur+dr++);or.columns.forEach((gr,br)=>{const pr=fr.getCell(hr+br);if(br===0)pr.value=gr.totalsRowLabel;else{const mr=this.getFormula(gr);pr.value=mr?{formula:gr.totalsRowFormula,result:gr.totalsRowResult}:null}cr(pr,gr.style)})}}load(cr){const{table:lr}=this,{row:or,col:ur}=lr.tl;let hr=0;if(lr.headerRow){const dr=cr.getRow(or+hr++);lr.columns.forEach((fr,gr)=>{dr.getCell(ur+gr).value=fr.name})}if(lr.rows.forEach(dr=>{const fr=cr.getRow(or+hr++);dr.forEach((gr,br)=>{fr.getCell(ur+br).value=gr})}),lr.totalsRow){const dr=cr.getRow(or+hr++);lr.columns.forEach((fr,gr)=>{const br=dr.getCell(ur+gr);gr===0?br.value=fr.totalsRowLabel:this.getFormula(fr)&&(br.value={formula:fr.totalsRowFormula,result:fr.totalsRowResult})})}}get model(){return this.table}set model(cr){this.table=cr}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const cr=sr.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let lr=0;lr<this._cache.tableHeight;lr++){const or=this.worksheet.getRow(cr.row+lr);for(let ur=0;ur<this._cache.width;ur++)or.getCell(cr.col+ur).value=null}else{for(let lr=this.tableHeight;lr<this._cache.tableHeight;lr++){const or=this.worksheet.getRow(cr.row+lr);for(let ur=0;ur<this._cache.width;ur++)or.getCell(cr.col+ur).value=null}for(let lr=0;lr<this.tableHeight;lr++){const or=this.worksheet.getRow(cr.row+lr);for(let ur=this.width;ur<this._cache.width;ur++)or.getCell(cr.col+ur).value=null}}this.store()}addRow(cr,lr){this.cacheState(),lr===void 0?this.table.rows.push(cr):this.table.rows.splice(lr,0,cr)}removeRows(cr){let lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(cr,lr)}getColumn(cr){const lr=this.table.columns[cr];return new ar(this,lr,cr)}addColumn(cr,lr,or){this.cacheState(),or===void 0?(this.table.columns.push(cr),this.table.rows.forEach((ur,hr)=>{ur.push(lr[hr])})):(this.table.columns.splice(or,0,cr),this.table.rows.forEach((ur,hr)=>{ur.splice(or,0,lr[hr])}))}removeColumns(cr){let lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(cr,lr),this.table.rows.forEach(or=>{or.splice(cr,lr)})}_assign(cr,lr,or){this.cacheState(),cr[lr]=or}get ref(){return this.table.ref}set ref(cr){this._assign(this.table,"ref",cr)}get name(){return this.table.name}set name(cr){this.table.name=cr}get displayName(){return this.table.displyName||this.table.name}set displayNamename(cr){this.table.displayName=cr}get headerRow(){return this.table.headerRow}set headerRow(cr){this._assign(this.table,"headerRow",cr)}get totalsRow(){return this.table.totalsRow}set totalsRow(cr){this._assign(this.table,"totalsRow",cr)}get theme(){return this.table.style.name}set theme(cr){this.table.style.name=cr}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(cr){this.table.style.showFirstColumn=cr}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(cr){this.table.style.showLastColumn=cr}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(cr){this.table.style.showRowStripes=cr}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(cr){this.table.style.showColumnStripes=cr}}},{"../utils/col-cache":19}],13:[function(rr,nr,ir){const sr=rr("./worksheet"),ar=rr("./defined-names"),cr=rr("../xlsx/xlsx"),lr=rr("../csv/csv");nr.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new ar}get xlsx(){return this._xlsx||(this._xlsx=new cr(this)),this._xlsx}get csv(){return this._csv||(this._csv=new lr(this)),this._csv}get nextId(){for(let or=1;or<this._worksheets.length;or++)if(!this._worksheets[or])return or;return this._worksheets.length||1}addWorksheet(or,ur){const hr=this.nextId;ur&&(typeof ur=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),ur={properties:{tabColor:{argb:ur}}}):(ur.argb||ur.theme||ur.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),ur={properties:{tabColor:ur}}));const dr=this._worksheets.reduce((br,pr)=>(pr&&pr.orderNo)>br?pr.orderNo:br,0),fr=Object.assign({},ur,{id:hr,name:or,orderNo:dr+1,workbook:this}),gr=new sr(fr);return this._worksheets[hr]=gr,gr}removeWorksheetEx(or){delete this._worksheets[or.id]}removeWorksheet(or){const ur=this.getWorksheet(or);ur&&ur.destroy()}getWorksheet(or){return or===void 0?this._worksheets.find(Boolean):typeof or=="number"?this._worksheets[or]:typeof or=="string"?this._worksheets.find(ur=>ur&&ur.name===or):void 0}get worksheets(){return this._worksheets.slice(1).sort((or,ur)=>or.orderNo-ur.orderNo).filter(Boolean)}eachSheet(or){this.worksheets.forEach(ur=>{or(ur,ur.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(or){const ur=this.media.length;return this.media.push(Object.assign({},or,{type:"image"})),ur}getImage(or){return this.media[or]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(or=>or.model),sheets:this.worksheets.map(or=>or.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(or){this.creator=or.creator,this.lastModifiedBy=or.lastModifiedBy,this.lastPrinted=or.lastPrinted,this.created=or.created,this.modified=or.modified,this.company=or.company,this.manager=or.manager,this.title=or.title,this.subject=or.subject,this.keywords=or.keywords,this.category=or.category,this.description=or.description,this.language=or.language,this.revision=or.revision,this.contentStatus=or.contentStatus,this.properties=or.properties,this.calcProperties=or.calcProperties,this._worksheets=[],or.worksheets.forEach(ur=>{const{id:hr,name:dr,state:fr}=ur,gr=or.sheets&&or.sheets.findIndex(br=>br.id===hr);(this._worksheets[hr]=new sr({id:hr,name:dr,orderNo:gr,state:fr,workbook:this})).model=ur}),this._definedNames.model=or.definedNames,this.views=or.views,this._themes=or.themes,this.media=or.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(rr,nr,ir){const sr=rr("../utils/under-dash"),ar=rr("../utils/col-cache"),cr=rr("./range"),lr=rr("./row"),or=rr("./column"),ur=rr("./enums"),hr=rr("./image"),dr=rr("./table"),fr=rr("./data-validations"),gr=rr("../utils/encryptor"),{copyStyle:br}=rr("../utils/copy-style");nr.exports=class{constructor(pr){pr=pr||{},this._workbook=pr.workbook,this.id=pr.id,this.orderNo=pr.orderNo,this.name=pr.name,this.state=pr.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},pr.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!pr.pageSetup||!pr.pageSetup.fitToWidth&&!pr.pageSetup.fitToHeight||pr.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},pr.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},pr.headerFooter),this.dataValidations=new fr,this.views=pr.views||[],this.autoFilter=pr.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(pr){if(pr===void 0&&(pr="sheet"+this.id),this._name!==pr){if(typeof pr!="string")throw new Error("The name has to be a string.");if(pr==="")throw new Error("The name can't be empty.");if(pr==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(pr))throw new Error(`Worksheet name ${pr} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(pr))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+pr);if(pr&&pr.length>31&&(console.warn(`Worksheet name ${pr} exceeds 31 chars. This will be truncated`),pr=pr.substring(0,31)),this._workbook._worksheets.find(mr=>mr&&mr.name.toLowerCase()===pr.toLowerCase()))throw new Error("Worksheet name already exists: "+pr);this._name=pr}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const pr=new cr;return this._rows.forEach(mr=>{if(mr){const yr=mr.dimensions;yr&&pr.expand(mr.number,yr.min,mr.number,yr.max)}}),pr}get columns(){return this._columns}set columns(pr){this._headerRowCount=pr.reduce((xr,vr)=>{const _r=(vr.header?1:vr.headers&&vr.headers.length)||0;return Math.max(xr,_r)},0);let mr=1;const yr=this._columns=[];pr.forEach(xr=>{const vr=new or(this,mr++,!1);yr.push(vr),vr.defn=xr})}getColumnKey(pr){return this._keys[pr]}setColumnKey(pr,mr){this._keys[pr]=mr}deleteColumnKey(pr){delete this._keys[pr]}eachColumnKey(pr){sr.each(this._keys,pr)}getColumn(pr){if(typeof pr=="string"){const mr=this._keys[pr];if(mr)return mr;pr=ar.l2n(pr)}if(this._columns||(this._columns=[]),pr>this._columns.length){let mr=this._columns.length+1;for(;mr<=pr;)this._columns.push(new or(this,mr++))}return this._columns[pr-1]}spliceColumns(pr,mr){const yr=this._rows.length;for(var xr=arguments.length,vr=new Array(xr>2?xr-2:0),_r=2;_r<xr;_r++)vr[_r-2]=arguments[_r];if(vr.length>0)for(let Nr=0;Nr<yr;Nr++){const Dr=[pr,mr];vr.forEach(Or=>{Dr.push(Or[Nr]||null)});const Ir=this.getRow(Nr+1);Ir.splice.apply(Ir,Dr)}else this._rows.forEach(Nr=>{Nr&&Nr.splice(pr,mr)});const Er=vr.length-mr,Tr=pr+mr,Rr=this._columns.length;if(Er<0)for(let Nr=pr+vr.length;Nr<=Rr;Nr++)this.getColumn(Nr).defn=this.getColumn(Nr-Er).defn;else if(Er>0)for(let Nr=Rr;Nr>=Tr;Nr--)this.getColumn(Nr+Er).defn=this.getColumn(Nr).defn;for(let Nr=pr;Nr<pr+vr.length;Nr++)this.getColumn(Nr).defn=null;this.workbook.definedNames.spliceColumns(this.name,pr,mr,vr.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let pr=0;return this.eachRow(mr=>{pr=Math.max(pr,mr.cellCount)}),pr}get actualColumnCount(){const pr=[];let mr=0;return this.eachRow(yr=>{yr.eachCell(xr=>{let{col:vr}=xr;pr[vr]||(pr[vr]=!0,mr++)})}),mr}_commitRow(){}get _lastRowNumber(){const pr=this._rows;let mr=pr.length;for(;mr>0&&pr[mr-1]===void 0;)mr--;return mr}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(pr){return this._rows[pr-1]}findRows(pr,mr){return this._rows.slice(pr-1,pr-1+mr)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let pr=0;return this.eachRow(()=>{pr++}),pr}getRow(pr){let mr=this._rows[pr-1];return mr||(mr=this._rows[pr-1]=new lr(this,pr)),mr}getRows(pr,mr){if(mr<1)return;const yr=[];for(let xr=pr;xr<pr+mr;xr++)yr.push(this.getRow(xr));return yr}addRow(pr){let mr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const yr=this._nextRow,xr=this.getRow(yr);return xr.values=pr,this._setStyleOption(yr,mr[0]==="i"?mr:"n"),xr}addRows(pr){let mr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const yr=[];return pr.forEach(xr=>{yr.push(this.addRow(xr,mr))}),yr}insertRow(pr,mr){let yr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(pr,0,mr),this._setStyleOption(pr,yr),this.getRow(pr)}insertRows(pr,mr){let yr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(pr,0,...mr),yr!=="n")for(let xr=0;xr<mr.length;xr++)yr[0]==="o"&&this.findRow(mr.length+pr+xr)!==void 0?this._copyStyle(mr.length+pr+xr,pr+xr,yr[1]==="+"):yr[0]==="i"&&this.findRow(pr-1)!==void 0&&this._copyStyle(pr-1,pr+xr,yr[1]==="+");return this.getRows(pr,mr.length)}_setStyleOption(pr){let mr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";mr[0]==="o"&&this.findRow(pr+1)!==void 0?this._copyStyle(pr+1,pr,mr[1]==="+"):mr[0]==="i"&&this.findRow(pr-1)!==void 0&&this._copyStyle(pr-1,pr,mr[1]==="+")}_copyStyle(pr,mr){let yr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const xr=this.getRow(pr),vr=this.getRow(mr);vr.style=br(xr.style),xr.eachCell({includeEmpty:yr},(_r,Er)=>{vr.getCell(Er).style=br(_r.style)}),vr.height=xr.height}duplicateRow(pr,mr){let yr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const xr=this._rows[pr-1],vr=new Array(mr).fill(xr.values);this.spliceRows(pr+1,yr?0:mr,...vr);for(let _r=0;_r<mr;_r++){const Er=this._rows[pr+_r];Er.style=xr.style,Er.height=xr.height,xr.eachCell({includeEmpty:!0},(Tr,Rr)=>{Er.getCell(Rr).style=Tr.style})}}spliceRows(pr,mr){const yr=pr+mr;for(var xr=arguments.length,vr=new Array(xr>2?xr-2:0),_r=2;_r<xr;_r++)vr[_r-2]=arguments[_r];const Er=vr.length,Tr=Er-mr,Rr=this._rows.length;let Nr,Dr;if(Tr<0)for(pr===Rr&&(this._rows[Rr-1]=void 0),Nr=yr;Nr<=Rr;Nr++)if(Dr=this._rows[Nr-1],Dr){const Ir=this.getRow(Nr+Tr);Ir.values=Dr.values,Ir.style=Dr.style,Ir.height=Dr.height,Dr.eachCell({includeEmpty:!0},(Or,jr)=>{Ir.getCell(jr).style=Or.style}),this._rows[Nr-1]=void 0}else this._rows[Nr+Tr-1]=void 0;else if(Tr>0)for(Nr=Rr;Nr>=yr;Nr--)if(Dr=this._rows[Nr-1],Dr){const Ir=this.getRow(Nr+Tr);Ir.values=Dr.values,Ir.style=Dr.style,Ir.height=Dr.height,Dr.eachCell({includeEmpty:!0},(Or,jr)=>{if(Ir.getCell(jr).style=Or.style,Or._value.constructor.name==="MergeValue"){const Lr=this.getRow(Or._row._number+Er).getCell(jr),Cr=Or._value._master,wr=this.getRow(Cr._row._number+Er).getCell(Cr._column._number);Lr.merge(wr)}})}else this._rows[Nr+Tr-1]=void 0;for(Nr=0;Nr<Er;Nr++){const Ir=this.getRow(pr+Nr);Ir.style={},Ir.values=vr[Nr]}this.workbook.definedNames.spliceRows(this.name,pr,mr,Er)}eachRow(pr,mr){if(mr||(mr=pr,pr=void 0),pr&&pr.includeEmpty){const yr=this._rows.length;for(let xr=1;xr<=yr;xr++)mr(this.getRow(xr),xr)}else this._rows.forEach(yr=>{yr&&yr.hasValues&&mr(yr,yr.number)})}getSheetValues(){const pr=[];return this._rows.forEach(mr=>{mr&&(pr[mr.number]=mr.values)}),pr}findCell(pr,mr){const yr=ar.getAddress(pr,mr),xr=this._rows[yr.row-1];return xr?xr.findCell(yr.col):void 0}getCell(pr,mr){const yr=ar.getAddress(pr,mr);return this.getRow(yr.row).getCellEx(yr)}mergeCells(){for(var pr=arguments.length,mr=new Array(pr),yr=0;yr<pr;yr++)mr[yr]=arguments[yr];const xr=new cr(mr);this._mergeCellsInternal(xr)}mergeCellsWithoutStyle(){for(var pr=arguments.length,mr=new Array(pr),yr=0;yr<pr;yr++)mr[yr]=arguments[yr];const xr=new cr(mr);this._mergeCellsInternal(xr,!0)}_mergeCellsInternal(pr,mr){sr.each(this._merges,xr=>{if(xr.intersects(pr))throw new Error("Cannot merge already merged cells")});const yr=this.getCell(pr.top,pr.left);for(let xr=pr.top;xr<=pr.bottom;xr++)for(let vr=pr.left;vr<=pr.right;vr++)(xr>pr.top||vr>pr.left)&&this.getCell(xr,vr).merge(yr,mr);this._merges[yr.address]=pr}_unMergeMaster(pr){const mr=this._merges[pr.address];if(mr){for(let yr=mr.top;yr<=mr.bottom;yr++)for(let xr=mr.left;xr<=mr.right;xr++)this.getCell(yr,xr).unmerge();delete this._merges[pr.address]}}get hasMerges(){return sr.some(this._merges,Boolean)}unMergeCells(){for(var pr=arguments.length,mr=new Array(pr),yr=0;yr<pr;yr++)mr[yr]=arguments[yr];const xr=new cr(mr);for(let vr=xr.top;vr<=xr.bottom;vr++)for(let _r=xr.left;_r<=xr.right;_r++){const Er=this.findCell(vr,_r);Er&&(Er.type===ur.ValueType.Merge?this._unMergeMaster(Er.master):this._merges[Er.address]&&this._unMergeMaster(Er))}}fillFormula(pr,mr,yr){let xr=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const vr=ar.decode(pr),{top:_r,left:Er,bottom:Tr,right:Rr}=vr,Nr=Rr-Er+1,Dr=ar.encodeAddress(_r,Er),Ir=xr==="shared";let Or;Or=typeof yr=="function"?yr:Array.isArray(yr)?Array.isArray(yr[0])?(Lr,Cr)=>yr[Lr-_r][Cr-Er]:(Lr,Cr)=>yr[(Lr-_r)*Nr+(Cr-Er)]:()=>{};let jr=!0;for(let Lr=_r;Lr<=Tr;Lr++)for(let Cr=Er;Cr<=Rr;Cr++)jr?(this.getCell(Lr,Cr).value={shareType:xr,formula:mr,ref:pr,result:Or(Lr,Cr)},jr=!1):this.getCell(Lr,Cr).value=Ir?{sharedFormula:Dr,result:Or(Lr,Cr)}:Or(Lr,Cr)}addImage(pr,mr){const yr={type:"image",imageId:pr,range:mr};this._media.push(new hr(this,yr))}getImages(){return this._media.filter(pr=>pr.type==="image")}addBackgroundImage(pr){const mr={type:"background",imageId:pr};this._media.push(new hr(this,mr))}getBackgroundImageId(){const pr=this._media.find(mr=>mr.type==="background");return pr&&pr.imageId}protect(pr,mr){return new Promise(yr=>{this.sheetProtection={sheet:!0},mr&&"spinCount"in mr&&(mr.spinCount=Number.isFinite(mr.spinCount)?Math.round(Math.max(0,mr.spinCount)):1e5),pr&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=gr.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=mr&&"spinCount"in mr?mr.spinCount:1e5,this.sheetProtection.hashValue=gr.convertPasswordToHash(pr,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),mr&&(this.sheetProtection=Object.assign(this.sheetProtection,mr),!pr&&"spinCount"in mr&&delete this.sheetProtection.spinCount),yr()})}unprotect(){this.sheetProtection=null}addTable(pr){const mr=new dr(this,pr);return this.tables[pr.name]=mr,mr}getTable(pr){return this.tables[pr]}removeTable(pr){delete this.tables[pr]}getTables(){return Object.values(this.tables)}addConditionalFormatting(pr){this.conditionalFormattings.push(pr)}removeConditionalFormatting(pr){typeof pr=="number"?this.conditionalFormattings.splice(pr,1):this.conditionalFormattings=pr instanceof Function?this.conditionalFormattings.filter(pr):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(pr){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=pr}get model(){const pr={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(xr=>xr.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(xr=>xr.model),conditionalFormattings:this.conditionalFormattings};pr.cols=or.toModel(this.columns);const mr=pr.rows=[],yr=pr.dimensions=new cr;return this._rows.forEach(xr=>{const vr=xr&&xr.model;vr&&(yr.expand(vr.number,vr.min,vr.number,vr.max),mr.push(vr))}),pr.merges=[],sr.each(this._merges,xr=>{pr.merges.push(xr.range)}),pr}_parseRows(pr){this._rows=[],pr.rows.forEach(mr=>{const yr=new lr(this,mr.number);this._rows[yr.number-1]=yr,yr.model=mr})}_parseMergeCells(pr){sr.each(pr.mergeCells,mr=>{this.mergeCellsWithoutStyle(mr)})}set model(pr){this.name=pr.name,this._columns=or.fromModel(this,pr.cols),this._parseRows(pr),this._parseMergeCells(pr),this.dataValidations=new fr(pr.dataValidations),this.properties=pr.properties,this.pageSetup=pr.pageSetup,this.headerFooter=pr.headerFooter,this.views=pr.views,this.autoFilter=pr.autoFilter,this._media=pr.media.map(mr=>new hr(this,mr)),this.sheetProtection=pr.sheetProtection,this.tables=pr.tables.reduce((mr,yr)=>{const xr=new dr;return xr.model=yr,mr[yr.name]=xr,mr},{}),this.conditionalFormattings=pr.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(rr,nr,ir){rr("core-js/modules/es.promise"),rr("core-js/modules/es.promise.finally"),rr("core-js/modules/es.object.assign"),rr("core-js/modules/es.object.keys"),rr("core-js/modules/es.object.values"),rr("core-js/modules/es.symbol"),rr("core-js/modules/es.symbol.async-iterator"),rr("core-js/modules/es.array.iterator"),rr("core-js/modules/es.array.includes"),rr("core-js/modules/es.array.find-index"),rr("core-js/modules/es.array.find"),rr("core-js/modules/es.string.from-code-point"),rr("core-js/modules/es.string.includes"),rr("core-js/modules/es.number.is-nan"),rr("regenerator-runtime/runtime");const sr={Workbook:rr("./doc/workbook")},ar=rr("./doc/enums");Object.keys(ar).forEach(cr=>{sr[cr]=ar[cr]}),nr.exports=sr},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(rr,nr,ir){const sr=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");ir.bufferToString=function(ar){return typeof ar=="string"?ar:sr?sr.decode(ar):ar.toString()}},{}],17:[function(rr,nr,ir){const sr=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:ar}=rr("buffer");ir.stringToBuffer=function(cr){return typeof cr!="string"?cr:sr?ar.from(sr.encode(cr).buffer):ar.from(cr)}},{buffer:220}],18:[function(rr,nr,ir){const sr=rr("./under-dash"),ar=rr("./col-cache");nr.exports=class{constructor(cr){this.template=cr,this.sheets={}}addCell(cr){this.addCellEx(ar.decodeEx(cr))}getCell(cr){return this.findCellEx(ar.decodeEx(cr),!0)}findCell(cr){return this.findCellEx(ar.decodeEx(cr),!1)}findCellAt(cr,lr,or){const ur=this.sheets[cr],hr=ur&&ur[lr];return hr&&hr[or]}addCellEx(cr){if(cr.top)for(let lr=cr.top;lr<=cr.bottom;lr++)for(let or=cr.left;or<=cr.right;or++)this.getCellAt(cr.sheetName,lr,or);else this.findCellEx(cr,!0)}getCellEx(cr){return this.findCellEx(cr,!0)}findCellEx(cr,lr){const or=this.findSheet(cr,lr),ur=this.findSheetRow(or,cr,lr);return this.findRowCell(ur,cr,lr)}getCellAt(cr,lr,or){const ur=this.sheets[cr]||(this.sheets[cr]=[]),hr=ur[lr]||(ur[lr]=[]);return hr[or]||(hr[or]={sheetName:cr,address:ar.n2l(or)+lr,row:lr,col:or})}removeCellEx(cr){const lr=this.findSheet(cr);if(!lr)return;const or=this.findSheetRow(lr,cr);or&&delete or[cr.col]}forEachInSheet(cr,lr){const or=this.sheets[cr];or&&or.forEach((ur,hr)=>{ur&&ur.forEach((dr,fr)=>{dr&&lr(dr,hr,fr)})})}forEach(cr){sr.each(this.sheets,(lr,or)=>{this.forEachInSheet(or,cr)})}map(cr){const lr=[];return this.forEach(or=>{lr.push(cr(or))}),lr}findSheet(cr,lr){const or=cr.sheetName;return this.sheets[or]?this.sheets[or]:lr?this.sheets[or]=[]:void 0}findSheetRow(cr,lr,or){const{row:ur}=lr;return cr&&cr[ur]?cr[ur]:or?cr[ur]=[]:void 0}findRowCell(cr,lr,or){const{col:ur}=lr;return cr&&cr[ur]?cr[ur]:or?cr[ur]=this.template?Object.assign(lr,JSON.parse(JSON.stringify(this.template))):lr:void 0}spliceRows(cr,lr,or,ur){const hr=this.sheets[cr];if(hr){const dr=[];for(let fr=0;fr<ur;fr++)dr.push([]);hr.splice(lr,or,...dr)}}spliceColumns(cr,lr,or,ur){const hr=this.sheets[cr];if(hr){const dr=[];for(let fr=0;fr<ur;fr++)dr.push(null);sr.each(hr,fr=>{fr.splice(lr,or,...dr)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(rr,nr,ir){const sr=/^[A-Z]+\d+$/,ar={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:cr=>cr<=26?1:cr<=676?2:3,_fill(cr){let lr,or,ur,hr,dr,fr=1;if(cr>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&cr>=1){for(;fr<=26;)lr=this._dictionary[fr-1],this._n2l[fr]=lr,this._l2n[lr]=fr,fr++;this._l2nFill=1}if(this._l2nFill<2&&cr>=2){for(fr=27;fr<=702;)or=fr-27,ur=or%26,hr=Math.floor(or/26),lr=this._dictionary[hr]+this._dictionary[ur],this._n2l[fr]=lr,this._l2n[lr]=fr,fr++;this._l2nFill=2}if(this._l2nFill<3&&cr>=3){for(fr=703;fr<=16384;)or=fr-703,ur=or%26,hr=Math.floor(or/26)%26,dr=Math.floor(or/676),lr=this._dictionary[dr]+this._dictionary[hr]+this._dictionary[ur],this._n2l[fr]=lr,this._l2n[lr]=fr,fr++;this._l2nFill=3}},l2n(cr){if(this._l2n[cr]||this._fill(cr.length),!this._l2n[cr])throw new Error("Out of bounds. Invalid column letter: "+cr);return this._l2n[cr]},n2l(cr){if(cr<1||cr>16384)throw new Error(cr+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[cr]||this._fill(this._level(cr)),this._n2l[cr]},_hash:{},validateAddress(cr){if(!sr.test(cr))throw new Error("Invalid Address: "+cr);return!0},decodeAddress(cr){const lr=cr.length<5&&this._hash[cr];if(lr)return lr;let or=!1,ur="",hr=0,dr=!1,fr="",gr=0;for(let pr,mr=0;mr<cr.length;mr++)if(pr=cr.charCodeAt(mr),!dr&&pr>=65&&pr<=90)or=!0,ur+=cr[mr],hr=26*hr+pr-64;else if(pr>=48&&pr<=57)dr=!0,fr+=cr[mr],gr=10*gr+pr-48;else if(dr&&or&&pr!==36)break;if(or){if(hr>16384)throw new Error("Out of bounds. Invalid column letter: "+ur)}else hr=void 0;dr||(gr=void 0);const br={address:cr=ur+fr,col:hr,row:gr,$col$row:`$${ur}$${fr}`};return hr<=100&&gr<=100&&(this._hash[cr]=br,this._hash[br.$col$row]=br),br},getAddress(cr,lr){if(lr){const or=this.n2l(lr)+cr;return this.decodeAddress(or)}return this.decodeAddress(cr)},decode(cr){const lr=cr.split(":");if(lr.length===2){const or=this.decodeAddress(lr[0]),ur=this.decodeAddress(lr[1]),hr={top:Math.min(or.row,ur.row),left:Math.min(or.col,ur.col),bottom:Math.max(or.row,ur.row),right:Math.max(or.col,ur.col)};return hr.tl=this.n2l(hr.left)+hr.top,hr.br=this.n2l(hr.right)+hr.bottom,hr.dimensions=`${hr.tl}:${hr.br}`,hr}return this.decodeAddress(cr)},decodeEx(cr){const lr=cr.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),or=lr[1]||lr[2],ur=lr[3],hr=ur.split(":");if(hr.length>1){let fr=this.decodeAddress(hr[0]),gr=this.decodeAddress(hr[1]);const br=Math.min(fr.row,gr.row),pr=Math.min(fr.col,gr.col),mr=Math.max(fr.row,gr.row),yr=Math.max(fr.col,gr.col);return fr=this.n2l(pr)+br,gr=this.n2l(yr)+mr,{top:br,left:pr,bottom:mr,right:yr,sheetName:or,tl:{address:fr,col:pr,row:br,$col$row:`$${this.n2l(pr)}$${br}`,sheetName:or},br:{address:gr,col:yr,row:mr,$col$row:`$${this.n2l(yr)}$${mr}`,sheetName:or},dimensions:`${fr}:${gr}`}}if(ur.startsWith("#"))return or?{sheetName:or,error:ur}:{error:ur};const dr=this.decodeAddress(ur);return or?{sheetName:or,...dr}:dr},encodeAddress:(cr,lr)=>ar.n2l(lr)+cr,encode(){switch(arguments.length){case 2:return ar.encodeAddress(arguments[0],arguments[1]);case 4:return`${ar.encodeAddress(arguments[0],arguments[1])}:${ar.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(cr,lr){const[or,ur,,hr,dr]=cr,[fr,gr]=lr;return fr>=or&&fr<=hr&&gr>=ur&&gr<=dr}};nr.exports=ar},{}],20:[function(rr,nr,ir){const sr=(cr,lr)=>({...cr,...lr.reduce((or,ur)=>(cr[ur]&&(or[ur]={...cr[ur]}),or),{})}),ar=function(cr,lr,or){let ur=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];cr[or]&&(lr[or]=sr(cr[or],ur))};ir.copyStyle=cr=>{if(!cr)return cr;if(lr=cr,Object.keys(lr).length===0)return{};var lr;const or={...cr};return ar(cr,or,"font",["color"]),ar(cr,or,"alignment"),ar(cr,or,"protection"),cr.border&&(ar(cr,or,"border"),ar(cr.border,or.border,"top",["color"]),ar(cr.border,or.border,"left",["color"]),ar(cr.border,or.border,"bottom",["color"]),ar(cr.border,or.border,"right",["color"]),ar(cr.border,or.border,"diagonal",["color"])),cr.fill&&(ar(cr,or,"fill",["fgColor","bgColor","center"]),cr.fill.stops&&(or.fill.stops=cr.fill.stops.map(ur=>sr(ur,["color"])))),or}},{}],21:[function(rr,nr,ir){(function(sr){(function(){const ar=rr("crypto"),cr={hash(lr){const or=ar.createHash(lr);for(var ur=arguments.length,hr=new Array(ur>1?ur-1:0),dr=1;dr<ur;dr++)hr[dr-1]=arguments[dr];return or.update(sr.concat(hr)),or.digest()},convertPasswordToHash(lr,or,ur,hr){if(or=or.toLowerCase(),ar.getHashes().indexOf(or)<0)throw new Error(`Hash algorithm '${or}' not supported!`);const dr=sr.from(lr,"utf16le");let fr=this.hash(or,sr.from(ur,"base64"),dr);for(let gr=0;gr<hr;gr++){const br=sr.alloc(4);br.writeUInt32LE(gr,0),fr=this.hash(or,fr,br)}return fr.toString("base64")},randomBytes:lr=>ar.randomBytes(lr)};nr.exports=cr}).call(this)}).call(this,rr("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(rr,nr,ir){const{SaxesParser:sr}=rr("saxes"),{PassThrough:ar}=rr("readable-stream"),{bufferToString:cr}=rr("./browser-buffer-decode");nr.exports=async function*(lr){lr.pipe&&!lr[Symbol.asyncIterator]&&(lr=lr.pipe(new ar));const or=new sr;let ur;or.on("error",dr=>{ur=dr});let hr=[];or.on("opentag",dr=>hr.push({eventType:"opentag",value:dr})),or.on("text",dr=>hr.push({eventType:"text",value:dr})),or.on("closetag",dr=>hr.push({eventType:"closetag",value:dr}));for await(const dr of lr){if(or.write(cr(dr)),ur)throw ur;yield hr,hr=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(rr,nr,ir){const sr=rr("./col-cache"),ar=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,cr=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;nr.exports={slideFormula:function(lr,or,ur){const hr=sr.decode(or),dr=sr.decode(ur);return lr.replace(ar,(fr,gr,br,pr,mr)=>{if(mr)return fr;const yr=cr.exec(pr);if(yr){const xr=yr[1],vr=yr[2].toUpperCase(),_r=yr[3],Er=yr[4];if(vr.length>3||vr.length===3&&vr>"XFD")return fr;let Tr=sr.l2n(vr),Rr=parseInt(Er,10);return xr||(Tr+=dr.col-hr.col),_r||(Rr+=dr.row-hr.row),(gr||"")+(xr||"")+sr.n2l(Tr)+(_r||"")+Rr}return fr})}}},{"./col-cache":19}],24:[function(rr,nr,ir){(function(sr,ar){(function(){const cr=rr("readable-stream"),lr=rr("./utils"),or=rr("./string-buf");class ur{constructor(pr,mr){this._data=pr,this._encoding=mr}get length(){return this.toBuffer().length}copy(pr,mr,yr,xr){return this.toBuffer().copy(pr,mr,yr,xr)}toBuffer(){return this._buffer||(this._buffer=ar.from(this._data,this._encoding)),this._buffer}}class hr{constructor(pr){this._data=pr}get length(){return this._data.length}copy(pr,mr,yr,xr){return this._data._buf.copy(pr,mr,yr,xr)}toBuffer(){return this._data.toBuffer()}}class dr{constructor(pr){this._data=pr}get length(){return this._data.length}copy(pr,mr,yr,xr){this._data.copy(pr,mr,yr,xr)}toBuffer(){return this._data}}class fr{constructor(pr){this.size=pr,this.buffer=ar.alloc(pr),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const pr=ar.alloc(this.iWrite-this.iRead);return this.buffer.copy(pr,0,this.iRead,this.iWrite),pr}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(pr){let mr;return pr===0?null:pr===void 0||pr>=this.length?(mr=this.toBuffer(),this.iRead=this.iWrite,mr):(mr=ar.alloc(pr),this.buffer.copy(mr,0,this.iRead,pr),this.iRead+=pr,mr)}write(pr,mr,yr){const xr=Math.min(yr,this.size-this.iWrite);return pr.copy(this.buffer,this.iWrite,mr,mr+xr),this.iWrite+=xr,xr}}const gr=function(br){br=br||{},this.bufSize=br.bufSize||1048576,this.buffers=[],this.batch=br.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};lr.inherits(gr,cr.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return ar.concat(this.buffers.map(br=>br.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const pr=this.buffers[this.buffers.length-1];if(!pr.full)return pr}const br=new fr(this.bufSize);return this.buffers.push(br),br},async _pipe(br){await Promise.all(this.pipes.map(function(pr){return new Promise(mr=>{pr.write(br.toBuffer(),()=>{mr()})})}))},_writeToBuffers(br){let pr=0;const mr=br.length;for(;pr<mr;)pr+=this._getWritableBuffer().write(br,pr,mr-pr)},async write(br,pr,mr){let yr;if(pr instanceof Function&&(mr=pr,pr="utf8"),mr=mr||lr.nop,br instanceof or)yr=new hr(br);else if(br instanceof ar)yr=new dr(br);else{if(!(typeof br=="string"||br instanceof String||br instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");yr=new ur(br,pr)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(yr);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(yr),sr.nextTick(mr)):(await this._pipe(yr),mr());else this.paused||this.emit("data",yr.toBuffer()),this._writeToBuffers(yr),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(br,pr,mr){const yr=xr=>{xr?mr(xr):(this._flush(),this.pipes.forEach(vr=>{vr.end()}),this.emit("finish"))};br?this.write(br,pr,yr):yr()},read(br){let pr;if(br){for(pr=[];br&&this.buffers.length&&!this.buffers[0].eod;){const mr=this.buffers[0],yr=mr.read(br);br-=yr.length,pr.push(yr),mr.eod&&mr.full&&this.buffers.shift()}return ar.concat(pr)}return pr=this.buffers.map(mr=>mr.toBuffer()).filter(Boolean),this.buffers=[],ar.concat(pr)},setEncoding(br){this.encoding=br},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(br){this.pipes.push(br),!this.paused&&this.buffers.length&&this.end()},unpipe(br){this.pipes=this.pipes.filter(pr=>pr!==br)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),nr.exports=gr}).call(this)}).call(this,rr("_process"),rr("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(rr,nr,ir){(function(sr){(function(){nr.exports=class{constructor(ar){this._buf=sr.alloc(ar&&ar.size||16384),this._encoding=ar&&ar.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=sr.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(ar){ar=ar||0,this._buffer=void 0,this._inPos=ar}_grow(ar){let cr=2*this._buf.length;for(;cr<ar;)cr*=2;const lr=sr.alloc(cr);this._buf.copy(lr,0),this._buf=lr}addText(ar){this._buffer=void 0;let cr=this._inPos+this._buf.write(ar,this._inPos,this._encoding);for(;cr>=this._buf.length-4;)this._grow(this._inPos+ar.length),cr=this._inPos+this._buf.write(ar,this._inPos,this._encoding);this._inPos=cr}addStringBuf(ar){ar.length&&(this._buffer=void 0,this.length+ar.length>this.capacity&&this._grow(this.length+ar.length),ar._buf.copy(this._buf,this._inPos,0,ar.length),this._inPos+=ar.length)}}}).call(this)}).call(this,rr("buffer").Buffer)},{buffer:220}],26:[function(rr,nr,ir){const{toString:sr}=Object.prototype,ar=/["&<>]/,cr={each:function(lr,or){lr&&(Array.isArray(lr)?lr.forEach(or):Object.keys(lr).forEach(ur=>{or(lr[ur],ur)}))},some:function(lr,or){return!!lr&&(Array.isArray(lr)?lr.some(or):Object.keys(lr).some(ur=>or(lr[ur],ur)))},every:function(lr,or){return!lr||(Array.isArray(lr)?lr.every(or):Object.keys(lr).every(ur=>or(lr[ur],ur)))},map:function(lr,or){return lr?Array.isArray(lr)?lr.map(or):Object.keys(lr).map(ur=>or(lr[ur],ur)):[]},keyBy:(lr,or)=>lr.reduce((ur,hr)=>(ur[hr[or]]=hr,ur),{}),isEqual:function(lr,or){const ur=typeof lr,hr=typeof or,dr=Array.isArray(lr),fr=Array.isArray(or);let gr;if(ur!==hr)return!1;switch(typeof lr){case"object":if(dr||fr)return!(!dr||!fr)&&lr.length===or.length&&lr.every((br,pr)=>{const mr=or[pr];return cr.isEqual(br,mr)});if(lr===null||or===null)return lr===or;if(gr=Object.keys(lr),Object.keys(or).length!==gr.length)return!1;for(const br of gr)if(!or.hasOwnProperty(br))return!1;return cr.every(lr,(br,pr)=>{const mr=or[pr];return cr.isEqual(br,mr)});default:return lr===or}},escapeHtml(lr){const or=ar.exec(lr);if(!or)return lr;let ur="",hr="",dr=0,fr=or.index;for(;fr<lr.length;fr++){switch(lr.charAt(fr)){case'"':hr="&quot;";break;case"&":hr="&amp;";break;case"'":hr="&apos;";break;case"<":hr="&lt;";break;case">":hr="&gt;";break;default:continue}dr!==fr&&(ur+=lr.substring(dr,fr)),dr=fr+1,ur+=hr}return dr!==fr?ur+lr.substring(dr,fr):ur},strcmp:(lr,or)=>lr<or?-1:lr>or?1:0,isUndefined:lr=>sr.call(lr)==="[object Undefined]",isObject:lr=>sr.call(lr)==="[object Object]",deepMerge(){const lr=arguments[0]||{},{length:or}=arguments;let ur,hr,dr;function fr(gr,br){ur=lr[br],dr=Array.isArray(gr),cr.isObject(gr)||dr?(dr?(dr=!1,hr=ur&&Array.isArray(ur)?ur:[]):hr=ur&&cr.isObject(ur)?ur:{},lr[br]=cr.deepMerge(hr,gr)):cr.isUndefined(gr)||(lr[br]=gr)}for(let gr=0;gr<or;gr++)cr.each(arguments[gr],fr);return lr}};nr.exports=cr},{}],27:[function(rr,nr,ir){(function(sr,ar){(function(){const cr=rr("fs"),lr=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,or={nop(){},promiseImmediate:ur=>new Promise(hr=>{sr.setImmediate?ar(()=>{hr(ur)}):setTimeout(()=>{hr(ur)},1)}),inherits:function(ur,hr,dr,fr){ur.super_=hr,fr||(fr=dr,dr=null),dr&&Object.keys(dr).forEach(br=>{Object.defineProperty(ur,br,Object.getOwnPropertyDescriptor(dr,br))});const gr={constructor:{value:ur,enumerable:!1,writable:!1,configurable:!0}};fr&&Object.keys(fr).forEach(br=>{gr[br]=Object.getOwnPropertyDescriptor(fr,br)}),ur.prototype=Object.create(hr.prototype,gr)},dateToExcel:(ur,hr)=>25569+ur.getTime()/864e5-(hr?1462:0),excelToDate(ur,hr){const dr=Math.round(24*(ur-25569+(hr?1462:0))*3600*1e3);return new Date(dr)},parsePath(ur){const hr=ur.lastIndexOf("/");return{path:ur.substring(0,hr),name:ur.substring(hr+1)}},getRelsPath(ur){const hr=or.parsePath(ur);return`${hr.path}/_rels/${hr.name}.rels`},xmlEncode(ur){const hr=lr.exec(ur);if(!hr)return ur;let dr="",fr="",gr=0,br=hr.index;for(;br<ur.length;br++){const pr=ur.charCodeAt(br);switch(pr){case 34:fr="&quot;";break;case 38:fr="&amp;";break;case 39:fr="&apos;";break;case 60:fr="&lt;";break;case 62:fr="&gt;";break;case 127:fr="";break;default:if(pr<=31&&(pr<=8||pr>=11&&pr!==13)){fr="";break}continue}gr!==br&&(dr+=ur.substring(gr,br)),gr=br+1,fr&&(dr+=fr)}return gr!==br?dr+ur.substring(gr,br):dr},xmlDecode:ur=>ur.replace(/&([a-z]*);/g,hr=>{switch(hr){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return hr}}),validInt(ur){const hr=parseInt(ur,10);return Number.isNaN(hr)?0:hr},isDateFmt(ur){return ur?(ur=(ur=ur.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:ur=>new Promise(hr=>{cr.access(ur,cr.constants.F_OK,dr=>{hr(!dr)})})},toIsoDateString:ur=>ur.toIsoString().subsstr(0,10),parseBoolean:ur=>ur===!0||ur==="true"||ur===1||ur==="1"};nr.exports=or}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{},rr("timers").setImmediate)},{fs:216,timers:523}],28:[function(rr,nr,ir){const sr=rr("./under-dash"),ar=rr("./utils");function cr(ur,hr,dr){ur.push(` ${hr}="${ar.xmlEncode(dr.toString())}"`)}function lr(ur,hr){if(hr){const dr=[];sr.each(hr,(fr,gr)=>{fr!==void 0&&cr(dr,gr,fr)}),ur.push(dr.join(""))}}class or{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(hr){const dr=this._xml;dr.push("<?xml"),lr(dr,hr),dr.push(`?>
`)}openNode(hr,dr){const fr=this.tos,gr=this._xml;fr&&this.open&&gr.push(">"),this._stack.push(hr),gr.push("<"),gr.push(hr),lr(gr,dr),this.leaf=!0,this.open=!0}addAttribute(hr,dr){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");dr!==void 0&&cr(this._xml,hr,dr)}addAttributes(hr){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");lr(this._xml,hr)}writeText(hr){const dr=this._xml;this.open&&(dr.push(">"),this.open=!1),this.leaf=!1,dr.push(ar.xmlEncode(hr.toString()))}writeXml(hr){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(hr)}closeNode(){const hr=this._stack.pop(),dr=this._xml;this.leaf?dr.push("/>"):(dr.push("</"),dr.push(hr),dr.push(">")),this.open=!1,this.leaf=!1}leafNode(hr,dr,fr){this.openNode(hr,dr),fr!==void 0&&this.writeText(fr),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const hr=this._rollbacks.pop();this._xml.length>hr.xml&&this._xml.splice(hr.xml,this._xml.length-hr.xml),this._stack.length>hr.stack&&this._stack.splice(hr.stack,this._stack.length-hr.stack),this.leaf=hr.leaf,this.open=hr.open}get xml(){return this.closeAll(),this._xml.join("")}}or.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},nr.exports=or},{"./under-dash":26,"./utils":27}],29:[function(rr,nr,ir){(function(sr){(function(){const ar=rr("events"),cr=rr("jszip"),lr=rr("./stream-buf"),{stringToBuffer:or}=rr("./browser-buffer-encode");class ur extends ar.EventEmitter{constructor(dr){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},dr),this.zip=new cr,this.stream=new lr}append(dr,fr){fr.hasOwnProperty("base64")&&fr.base64?this.zip.file(fr.name,dr,{base64:!0}):(sr.browser&&typeof dr=="string"&&(dr=or(dr)),this.zip.file(fr.name,dr))}async finalize(){const dr=await this.zip.generateAsync(this.options);this.stream.end(dr),this.emit("finish")}read(dr){return this.stream.read(dr)}setEncoding(dr){return this.stream.setEncoding(dr)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(dr,fr){return this.stream.pipe(dr,fr)}unpipe(dr){return this.stream.unpipe(dr)}unshift(dr){return this.stream.unshift(dr)}wrap(dr){return this.stream.wrap(dr)}}nr.exports={ZipWriter:ur}}).call(this)}).call(this,rr("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(rr,nr,ir){nr.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(rr,nr,ir){nr.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(rr,nr,ir){const sr=rr("../../utils/parse-sax"),ar=rr("../../utils/xml-stream");class cr{prepare(){}render(){}parseOpen(or){}parseText(or){}parseClose(or){}reconcile(or,ur){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(or=>{or instanceof cr?or.reset():or.xform&&or.xform.reset()})}mergeModel(or){this.model=Object.assign(this.model||{},or)}async parse(or){for await(const ur of or)for(const{eventType:hr,value:dr}of ur)if(hr==="opentag")this.parseOpen(dr);else if(hr==="text")this.parseText(dr);else if(hr==="closetag"&&!this.parseClose(dr.name))return this.model;return this.model}async parseStream(or){return this.parse(sr(or))}get xml(){return this.toXml(this.model)}toXml(or){const ur=new ar;return this.render(ur,or),ur.xml}static toAttribute(or,ur){let hr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(or===void 0){if(hr)return ur}else if(hr||or!==ur)return or.toString()}static toStringAttribute(or,ur){let hr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return cr.toAttribute(or,ur,hr)}static toStringValue(or,ur){return or===void 0?ur:or}static toBoolAttribute(or,ur){let hr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(or===void 0){if(hr)return ur}else if(hr||or!==ur)return or?"1":"0"}static toBoolValue(or,ur){return or===void 0?ur:or==="1"}static toIntAttribute(or,ur){let hr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return cr.toAttribute(or,ur,hr)}static toIntValue(or,ur){return or===void 0?ur:parseInt(or,10)}static toFloatAttribute(or,ur){let hr=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return cr.toAttribute(or,ur,hr)}static toFloatValue(or,ur){return or===void 0?ur:parseFloat(or)}}nr.exports=cr},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../../../utils/col-cache");function cr(or){try{return ar.decodeEx(or),!0}catch{return!1}}function lr(or){const ur=[];let hr=!1,dr="";return or.split(",").forEach(fr=>{if(!fr)return;const gr=(fr.match(/'/g)||[]).length;if(!gr)return void(hr?dr+=fr+",":cr(fr)&&ur.push(fr));const br=gr%2==0;!hr&&br&&cr(fr)?ur.push(fr):hr&&!br?(hr=!1,cr(dr+fr)&&ur.push(dr+fr),dr=""):(hr=!0,dr+=fr+",")}),ur}nr.exports=class extends sr{render(or,ur){or.openNode("definedName",{name:ur.name,localSheetId:ur.localSheetId}),or.writeText(ur.ranges.join(",")),or.closeNode()}parseOpen(or){switch(or.name){case"definedName":return this._parsedName=or.attributes.name,this._parsedLocalSheetId=or.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(or){this._parsedText.push(or)}parseClose(){return this.model={name:this._parsedName,ranges:lr(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(rr,nr,ir){const sr=rr("../../../utils/utils"),ar=rr("../base-xform");nr.exports=class extends ar{render(cr,lr){cr.leafNode("sheet",{sheetId:lr.id,name:lr.name,state:lr.state,"r:id":lr.rId})}parseOpen(cr){return cr.name==="sheet"&&(this.model={name:sr.xmlDecode(cr.attributes.name),id:parseInt(cr.attributes.sheetId,10),state:cr.attributes.state,rId:cr.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){ar.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:cr.fullCalcOnLoad?1:void 0})}parseOpen(ar){return ar.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){ar.leafNode("workbookPr",{date1904:cr.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(ar){return ar.name==="workbookPr"&&(this.model={date1904:ar.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){const lr={xWindow:cr.x||0,yWindow:cr.y||0,windowWidth:cr.width||12e3,windowHeight:cr.height||24e3,firstSheet:cr.firstSheet,activeTab:cr.activeTab};cr.visibility&&cr.visibility!=="visible"&&(lr.visibility=cr.visibility),ar.leafNode("workbookView",lr)}parseOpen(ar){if(ar.name==="workbookView"){const cr=this.model={},lr=function(ur,hr,dr){const fr=hr!==void 0?cr[ur]=hr:dr;fr!==void 0&&(cr[ur]=fr)},or=function(ur,hr,dr){const fr=hr!==void 0?cr[ur]=parseInt(hr,10):dr;fr!==void 0&&(cr[ur]=fr)};return or("x",ar.attributes.xWindow,0),or("y",ar.attributes.yWindow,0),or("width",ar.attributes.windowWidth,25e3),or("height",ar.attributes.windowHeight,1e4),lr("visibility",ar.attributes.visibility,"visible"),or("activeTab",ar.attributes.activeTab,void 0),or("firstSheet",ar.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../../../utils/col-cache"),cr=rr("../../../utils/xml-stream"),lr=rr("../base-xform"),or=rr("../static-xform"),ur=rr("../list-xform"),hr=rr("./defined-name-xform"),dr=rr("./sheet-xform"),fr=rr("./workbook-view-xform"),gr=rr("./workbook-properties-xform"),br=rr("./workbook-calc-properties-xform");class pr extends lr{constructor(){super(),this.map={fileVersion:pr.STATIC_XFORMS.fileVersion,workbookPr:new gr,bookViews:new ur({tag:"bookViews",count:!1,childXform:new fr}),sheets:new ur({tag:"sheets",count:!1,childXform:new dr}),definedNames:new ur({tag:"definedNames",count:!1,childXform:new hr}),calcPr:new br}}prepare(yr){yr.sheets=yr.worksheets;const xr=[];let vr=0;yr.sheets.forEach(_r=>{if(_r.pageSetup&&_r.pageSetup.printArea&&_r.pageSetup.printArea.split("&&").forEach(Er=>{const Tr=Er.split(":"),Rr={name:"_xlnm.Print_Area",ranges:[`'${_r.name}'!$${Tr[0]}:$${Tr[1]}`],localSheetId:vr};xr.push(Rr)}),_r.pageSetup&&(_r.pageSetup.printTitlesRow||_r.pageSetup.printTitlesColumn)){const Er=[];if(_r.pageSetup.printTitlesColumn){const Rr=_r.pageSetup.printTitlesColumn.split(":");Er.push(`'${_r.name}'!$${Rr[0]}:$${Rr[1]}`)}if(_r.pageSetup.printTitlesRow){const Rr=_r.pageSetup.printTitlesRow.split(":");Er.push(`'${_r.name}'!$${Rr[0]}:$${Rr[1]}`)}const Tr={name:"_xlnm.Print_Titles",ranges:Er,localSheetId:vr};xr.push(Tr)}vr++}),xr.length&&(yr.definedNames=yr.definedNames.concat(xr)),(yr.media||[]).forEach((_r,Er)=>{_r.name=_r.type+(Er+1)})}render(yr,xr){yr.openXml(cr.StdDocAttributes),yr.openNode("workbook",pr.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(yr),this.map.workbookPr.render(yr,xr.properties),this.map.bookViews.render(yr,xr.views),this.map.sheets.render(yr,xr.sheets),this.map.definedNames.render(yr,xr.definedNames),this.map.calcPr.render(yr,xr.calcProperties),yr.closeNode()}parseOpen(yr){if(this.parser)return this.parser.parseOpen(yr),!0;switch(yr.name){case"workbook":return!0;default:return this.parser=this.map[yr.name],this.parser&&this.parser.parseOpen(yr),!0}}parseText(yr){this.parser&&this.parser.parseText(yr)}parseClose(yr){if(this.parser)return this.parser.parseClose(yr)||(this.parser=void 0),!0;switch(yr){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(yr){const xr=(yr.workbookRels||[]).reduce((Rr,Nr)=>(Rr[Nr.Id]=Nr,Rr),{}),vr=[];let _r,Er=0;(yr.sheets||[]).forEach(Rr=>{const Nr=xr[Rr.rId];Nr&&(_r=yr.worksheetHash["xl/"+Nr.Target.replace(/^(\s|\/xl\/)+/,"")],_r&&(_r.name=Rr.name,_r.id=Rr.id,_r.state=Rr.state,vr[Er++]=_r))});const Tr=[];sr.each(yr.definedNames,Rr=>{if(Rr.name==="_xlnm.Print_Area"){if(_r=vr[Rr.localSheetId],_r){_r.pageSetup||(_r.pageSetup={});const Nr=ar.decodeEx(Rr.ranges[0]);_r.pageSetup.printArea=_r.pageSetup.printArea?`${_r.pageSetup.printArea}&&${Nr.dimensions}`:Nr.dimensions}}else if(Rr.name==="_xlnm.Print_Titles"){if(_r=vr[Rr.localSheetId],_r){_r.pageSetup||(_r.pageSetup={});const Nr=Rr.ranges.join(","),Dr=/\$/g,Ir=/\$\d+:\$\d+/,Or=Nr.match(Ir);if(Or&&Or.length){const Cr=Or[0];_r.pageSetup.printTitlesRow=Cr.replace(Dr,"")}const jr=/\$[A-Z]+:\$[A-Z]+/,Lr=Nr.match(jr);if(Lr&&Lr.length){const Cr=Lr[0];_r.pageSetup.printTitlesColumn=Cr.replace(Dr,"")}}}else Tr.push(Rr)}),yr.definedNames=Tr,yr.media.forEach((Rr,Nr)=>{Rr.index=Nr})}}pr.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},pr.STATIC_XFORMS={fileVersion:new or({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},nr.exports=pr},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(rr,nr,ir){const sr=rr("../strings/rich-text-xform"),ar=rr("../../../utils/utils"),cr=rr("../base-xform"),lr=nr.exports=function(or){this.model=or};ar.inherits(lr,cr,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new sr),this._richTextXform},render(or,ur){ur=ur||this.model,or.openNode("comment",{ref:ur.ref,authorId:0}),or.openNode("text"),ur&&ur.note&&ur.note.texts&&ur.note.texts.forEach(hr=>{this.richTextXform.render(or,hr)}),or.closeNode(),or.closeNode()},parseOpen(or){if(this.parser)return this.parser.parseOpen(or),!0;switch(or.name){case"comment":return this.model={type:"note",note:{texts:[]},...or.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(or),!0;default:return!1}},parseText(or){this.parser&&this.parser.parseText(or)},parseClose(or){switch(or){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(or),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../../../utils/utils"),cr=rr("../base-xform"),lr=rr("./comment-xform"),or=nr.exports=function(){this.map={comment:new lr}};ar.inherits(or,cr,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(ur,hr){hr=hr||this.model,ur.openXml(sr.StdDocAttributes),ur.openNode("comments",or.COMMENTS_ATTRIBUTES),ur.openNode("authors"),ur.leafNode("author",null,"Author"),ur.closeNode(),ur.openNode("commentList"),hr.comments.forEach(dr=>{this.map.comment.render(ur,dr)}),ur.closeNode(),ur.closeNode()},parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(ur),!0;default:return!1}},parseText(ur){this.parser&&this.parser.parseText(ur)},parseClose(ur){switch(ur){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(ur),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{constructor(ar){super(),this._model=ar}get tag(){return this._model&&this._model.tag}render(ar,cr,lr){(cr===lr[2]||this.tag==="x:SizeWithCells"&&cr===lr[1])&&ar.leafNode(this.tag)}parseOpen(ar){switch(ar.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{constructor(ar){super(),this._model=ar}get tag(){return this._model&&this._model.tag}render(ar,cr){ar.leafNode(this.tag,null,cr)}parseOpen(ar){switch(ar.name){case this.tag:return this.text="",!0;default:return!1}}parseText(ar){this.text=ar}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"x:Anchor"}getAnchorRect(ar){const cr=Math.floor(ar.left),lr=Math.floor(68*(ar.left-cr)),or=Math.floor(ar.top),ur=Math.floor(18*(ar.top-or)),hr=Math.floor(ar.right),dr=Math.floor(68*(ar.right-hr)),fr=Math.floor(ar.bottom);return[cr,lr,or,ur,hr,dr,fr,Math.floor(18*(ar.bottom-fr))]}getDefaultRect(ar){const cr=ar.col,lr=Math.max(ar.row-2,0);return[cr,6,lr,14,cr+2,2,lr+4,16]}render(ar,cr){const lr=cr.anchor?this.getAnchorRect(cr.anchor):this.getDefaultRect(cr.refAddress);ar.leafNode("x:Anchor",null,lr.join(", "))}parseOpen(ar){switch(ar.name){case this.tag:return this.text="",!0;default:return!1}}parseText(ar){this.text=ar}parseClose(){return!1}}},{"../base-xform":32}],44:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./vml-anchor-xform"),cr=rr("./style/vml-protection-xform"),lr=rr("./style/vml-position-xform"),or=["twoCells","oneCells","absolute"];nr.exports=class extends sr{constructor(){super(),this.map={"x:Anchor":new ar,"x:Locked":new cr({tag:"x:Locked"}),"x:LockText":new cr({tag:"x:LockText"}),"x:SizeWithCells":new lr({tag:"x:SizeWithCells"}),"x:MoveWithCells":new lr({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(ur,hr){const{protection:dr,editAs:fr}=hr.note;ur.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(ur,fr,or),this.map["x:SizeWithCells"].render(ur,fr,or),this.map["x:Anchor"].render(ur,hr),this.map["x:Locked"].render(ur,dr.locked),ur.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(ur,dr.lockText),ur.leafNode("x:Row",null,hr.refAddress.row-1),ur.leafNode("x:Column",null,hr.refAddress.col-1),ur.closeNode()}parseOpen(ur){switch(ur.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[ur.name],this.parser&&this.parser.parseOpen(ur)}return!0}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.parser=void 0),!0;switch(ur){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const ur=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),hr=Object.keys(ur).length;this.model.editAs=or[hr],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("./vml-shape-xform");class lr extends ar{constructor(){super(),this.map={"v:shape":new cr}}get tag(){return"xml"}render(ur,hr){ur.openXml(sr.StdDocAttributes),ur.openNode(this.tag,lr.DRAWING_ATTRIBUTES),ur.openNode("o:shapelayout",{"v:ext":"edit"}),ur.leafNode("o:idmap",{"v:ext":"edit",data:1}),ur.closeNode(),ur.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),ur.leafNode("v:stroke",{joinstyle:"miter"}),ur.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),ur.closeNode(),hr.comments.forEach((dr,fr)=>{this.map["v:shape"].render(ur,dr,fr)}),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[ur.name],this.parser&&this.parser.parseOpen(ur)}return!0}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(ur){case this.tag:return!1;default:return!0}}reconcile(ur,hr){ur.anchors.forEach(dr=>{dr.br?this.map["xdr:twoCellAnchor"].reconcile(dr,hr):this.map["xdr:oneCellAnchor"].reconcile(dr,hr)})}}lr.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},nr.exports=lr},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./vml-textbox-xform"),cr=rr("./vml-client-data-xform");class lr extends sr{constructor(){super(),this.map={"v:textbox":new ar,"x:ClientData":new cr}}get tag(){return"v:shape"}render(ur,hr,dr){ur.openNode("v:shape",lr.V_SHAPE_ATTRIBUTES(hr,dr)),ur.leafNode("v:fill",{color2:"infoBackground [80]"}),ur.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),ur.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(ur,hr),this.map["x:ClientData"].render(ur,hr),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case this.tag:this.reset(),this.model={margins:{insetmode:ur.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[ur.name],this.parser&&this.parser.parseOpen(ur)}return!0}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.parser=void 0),!0;switch(ur){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}lr.V_SHAPE_ATTRIBUTES=(or,ur)=>({id:"_x0000_s"+(1025+ur),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":or.note.margins&&or.note.margins.insetmode}),nr.exports=lr},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"v:textbox"}conversionUnit(ar,cr,lr){return`${parseFloat(ar)*cr.toFixed(2)}${lr}`}reverseConversionUnit(ar){return(ar||"").split(",").map(cr=>Number(parseFloat(this.conversionUnit(parseFloat(cr),.1,"")).toFixed(2)))}render(ar,cr){const lr={style:"mso-direction-alt:auto"};if(cr&&cr.note){let{inset:or}=cr.note&&cr.note.margins;Array.isArray(or)&&(or=or.map(ur=>this.conversionUnit(ur,10,"mm")).join(",")),or&&(lr.inset=or)}ar.openNode("v:textbox",lr),ar.leafNode("div",{style:"text-align:left"}),ar.closeNode()}parseOpen(ar){switch(ar.name){case this.tag:return this.model={inset:this.reverseConversionUnit(ar.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(ar){switch(ar){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(rr,nr,ir){const sr=rr("./base-xform");nr.exports=class extends sr{createNewModel(ar){return{}}parseOpen(ar){return this.parser=this.parser||this.map[ar.name],this.parser?(this.parser.parseOpen(ar),!0):ar.name===this.tag&&(this.model=this.createNewModel(ar),!0)}parseText(ar){this.parser&&this.parser.parseText(ar)}onParserClose(ar,cr){this.model[ar]=cr.model}parseClose(ar){return this.parser?(this.parser.parseClose(ar)||(this.onParserClose(ar,this.parser),this.parser=void 0),!0):ar!==this.tag}}},{"./base-xform":32}],49:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){ar.openNode("HeadingPairs"),ar.openNode("vt:vector",{size:2,baseType:"variant"}),ar.openNode("vt:variant"),ar.leafNode("vt:lpstr",void 0,"Worksheets"),ar.closeNode(),ar.openNode("vt:variant"),ar.leafNode("vt:i4",void 0,cr.length),ar.closeNode(),ar.closeNode(),ar.closeNode()}parseOpen(ar){return ar.name==="HeadingPairs"}parseText(){}parseClose(ar){return ar!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){ar.openNode("TitlesOfParts"),ar.openNode("vt:vector",{size:cr.length,baseType:"lpstr"}),cr.forEach(lr=>{ar.leafNode("vt:lpstr",void 0,lr.name)}),ar.closeNode(),ar.closeNode()}parseOpen(ar){return ar.name==="TitlesOfParts"}parseText(){}parseClose(ar){return ar!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("../simple/string-xform"),lr=rr("./app-heading-pairs-xform"),or=rr("./app-titles-of-parts-xform");class ur extends ar{constructor(){super(),this.map={Company:new cr({tag:"Company"}),Manager:new cr({tag:"Manager"}),HeadingPairs:new lr,TitleOfParts:new or}}render(dr,fr){dr.openXml(sr.StdDocAttributes),dr.openNode("Properties",ur.PROPERTY_ATTRIBUTES),dr.leafNode("Application",void 0,"Microsoft Excel"),dr.leafNode("DocSecurity",void 0,"0"),dr.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(dr,fr.worksheets),this.map.TitleOfParts.render(dr,fr.worksheets),this.map.Company.render(dr,fr.company||""),this.map.Manager.render(dr,fr.manager),dr.leafNode("LinksUpToDate",void 0,"false"),dr.leafNode("SharedDoc",void 0,"false"),dr.leafNode("HyperlinksChanged",void 0,"false"),dr.leafNode("AppVersion",void 0,"16.0300"),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"Properties":return!0;default:return this.parser=this.map[dr.name],!!this.parser&&(this.parser.parseOpen(dr),!0)}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){if(this.parser)return this.parser.parseClose(dr)||(this.parser=void 0),!0;switch(dr){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}ur.DateFormat=function(hr){return hr.toISOString().replace(/[.]\d{3,6}/,"")},ur.DateAttrs={"xsi:type":"dcterms:W3CDTF"},ur.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},nr.exports=ur},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform");class cr extends ar{render(or,ur){or.openXml(sr.StdDocAttributes),or.openNode("Types",cr.PROPERTY_ATTRIBUTES);const hr={};(ur.media||[]).forEach(dr=>{if(dr.type==="image"){const fr=dr.extension;hr[fr]||(hr[fr]=!0,or.leafNode("Default",{Extension:fr,ContentType:"image/"+fr}))}}),or.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),or.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),or.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),ur.worksheets.forEach(dr=>{const fr=`/xl/worksheets/sheet${dr.id}.xml`;or.leafNode("Override",{PartName:fr,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),or.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),or.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),ur.sharedStrings&&ur.sharedStrings.count&&or.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),ur.tables&&ur.tables.forEach(dr=>{or.leafNode("Override",{PartName:"/xl/tables/"+dr.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),ur.drawings&&ur.drawings.forEach(dr=>{or.leafNode("Override",{PartName:`/xl/drawings/${dr.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),ur.commentRefs&&(or.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),ur.commentRefs.forEach(dr=>{let{commentName:fr}=dr;or.leafNode("Override",{PartName:`/xl/${fr}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),or.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),or.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),or.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}cr.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},nr.exports=cr},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("../simple/date-xform"),lr=rr("../simple/string-xform"),or=rr("../simple/integer-xform");class ur extends ar{constructor(){super(),this.map={"dc:creator":new lr({tag:"dc:creator"}),"dc:title":new lr({tag:"dc:title"}),"dc:subject":new lr({tag:"dc:subject"}),"dc:description":new lr({tag:"dc:description"}),"dc:identifier":new lr({tag:"dc:identifier"}),"dc:language":new lr({tag:"dc:language"}),"cp:keywords":new lr({tag:"cp:keywords"}),"cp:category":new lr({tag:"cp:category"}),"cp:lastModifiedBy":new lr({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new cr({tag:"cp:lastPrinted",format:ur.DateFormat}),"cp:revision":new or({tag:"cp:revision"}),"cp:version":new lr({tag:"cp:version"}),"cp:contentStatus":new lr({tag:"cp:contentStatus"}),"cp:contentType":new lr({tag:"cp:contentType"}),"dcterms:created":new cr({tag:"dcterms:created",attrs:ur.DateAttrs,format:ur.DateFormat}),"dcterms:modified":new cr({tag:"dcterms:modified",attrs:ur.DateAttrs,format:ur.DateFormat})}}render(dr,fr){dr.openXml(sr.StdDocAttributes),dr.openNode("cp:coreProperties",ur.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(dr,fr.creator),this.map["dc:title"].render(dr,fr.title),this.map["dc:subject"].render(dr,fr.subject),this.map["dc:description"].render(dr,fr.description),this.map["dc:identifier"].render(dr,fr.identifier),this.map["dc:language"].render(dr,fr.language),this.map["cp:keywords"].render(dr,fr.keywords),this.map["cp:category"].render(dr,fr.category),this.map["cp:lastModifiedBy"].render(dr,fr.lastModifiedBy),this.map["cp:lastPrinted"].render(dr,fr.lastPrinted),this.map["cp:revision"].render(dr,fr.revision),this.map["cp:version"].render(dr,fr.version),this.map["cp:contentStatus"].render(dr,fr.contentStatus),this.map["cp:contentType"].render(dr,fr.contentType),this.map["dcterms:created"].render(dr,fr.created),this.map["dcterms:modified"].render(dr,fr.modified),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[dr.name],this.parser)return this.parser.parseOpen(dr),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(dr))}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){if(this.parser)return this.parser.parseClose(dr)||(this.parser=void 0),!0;switch(dr){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+dr)}}}ur.DateFormat=function(hr){return hr.toISOString().replace(/[.]\d{3}/,"")},ur.DateAttrs={"xsi:type":"dcterms:W3CDTF"},ur.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},nr.exports=ur},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{render(ar,cr){ar.leafNode("Relationship",cr)}parseOpen(ar){switch(ar.name){case"Relationship":return this.model=ar.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("./relationship-xform");class lr extends ar{constructor(){super(),this.map={Relationship:new cr}}render(ur,hr){hr=hr||this._values,ur.openXml(sr.StdDocAttributes),ur.openNode("Relationships",lr.RELATIONSHIPS_ATTRIBUTES),hr.forEach(dr=>{this.map.Relationship.render(ur,dr)}),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[ur.name],this.parser)return this.parser.parseOpen(ur),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(ur))}}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(ur){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+ur)}}}lr.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},nr.exports=lr},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{parseOpen(ar){if(this.parser)return this.parser.parseOpen(ar),!0;switch(ar.name){case this.tag:this.reset(),this.model={range:{editAs:ar.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[ar.name],this.parser&&this.parser.parseOpen(ar)}return!0}parseText(ar){this.parser&&this.parser.parseText(ar)}reconcilePicture(ar,cr){if(ar&&ar.rId){const lr=cr.rels[ar.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(lr){const or=lr[1],ur=cr.mediaIndex[or];return cr.media[ur]}}}}},{"../base-xform":32}],57:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./blip-xform");nr.exports=class extends sr{constructor(){super(),this.map={"a:blip":new ar}}get tag(){return"xdr:blipFill"}render(cr,lr){cr.openNode(this.tag),this.map["a:blip"].render(cr,lr),cr.openNode("a:stretch"),cr.leafNode("a:fillRect"),cr.closeNode(),cr.closeNode()}parseOpen(cr){if(this.parser)return this.parser.parseOpen(cr),!0;switch(cr.name){case this.tag:this.reset();break;default:this.parser=this.map[cr.name],this.parser&&this.parser.parseOpen(cr)}return!0}parseText(){}parseClose(cr){if(this.parser)return this.parser.parseClose(cr)||(this.parser=void 0),!0;switch(cr){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"a:blip"}render(ar,cr){ar.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":cr.rId,cstate:"print"})}parseOpen(ar){switch(ar.name){case this.tag:return this.model={rId:ar.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(ar){switch(ar){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"xdr:cNvPicPr"}render(ar){ar.openNode(this.tag),ar.leafNode("a:picLocks",{noChangeAspect:"1"}),ar.closeNode()}parseOpen(ar){switch(ar.name){case this.tag:default:return!0}}parseText(){}parseClose(ar){switch(ar){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./hlink-click-xform"),cr=rr("./ext-lst-xform");nr.exports=class extends sr{constructor(){super(),this.map={"a:hlinkClick":new ar,"a:extLst":new cr}}get tag(){return"xdr:cNvPr"}render(lr,or){lr.openNode(this.tag,{id:or.index,name:"Picture "+or.index}),this.map["a:hlinkClick"].render(lr,or),this.map["a:extLst"].render(lr,or),lr.closeNode()}parseOpen(lr){if(this.parser)return this.parser.parseOpen(lr),!0;switch(lr.name){case this.tag:this.reset();break;default:this.parser=this.map[lr.name],this.parser&&this.parser.parseOpen(lr)}return!0}parseText(){}parseClose(lr){if(this.parser)return this.parser.parseClose(lr)||(this.parser=void 0),!0;switch(lr){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../simple/integer-xform");nr.exports=class extends sr{constructor(cr){super(),this.tag=cr.tag,this.map={"xdr:col":new ar({tag:"xdr:col",zero:!0}),"xdr:colOff":new ar({tag:"xdr:colOff",zero:!0}),"xdr:row":new ar({tag:"xdr:row",zero:!0}),"xdr:rowOff":new ar({tag:"xdr:rowOff",zero:!0})}}render(cr,lr){cr.openNode(this.tag),this.map["xdr:col"].render(cr,lr.nativeCol),this.map["xdr:colOff"].render(cr,lr.nativeColOff),this.map["xdr:row"].render(cr,lr.nativeRow),this.map["xdr:rowOff"].render(cr,lr.nativeRowOff),cr.closeNode()}parseOpen(cr){if(this.parser)return this.parser.parseOpen(cr),!0;switch(cr.name){case this.tag:this.reset();break;default:this.parser=this.map[cr.name],this.parser&&this.parser.parseOpen(cr)}return!0}parseText(cr){this.parser&&this.parser.parseText(cr)}parseClose(cr){if(this.parser)return this.parser.parseClose(cr)||(this.parser=void 0),!0;switch(cr){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(rr,nr,ir){const sr=rr("../../../utils/col-cache"),ar=rr("../../../utils/xml-stream"),cr=rr("../base-xform"),lr=rr("./two-cell-anchor-xform"),or=rr("./one-cell-anchor-xform");class ur extends cr{constructor(){super(),this.map={"xdr:twoCellAnchor":new lr,"xdr:oneCellAnchor":new or}}prepare(dr){dr.anchors.forEach((fr,gr)=>{fr.anchorType=function(br){return(typeof br.range=="string"?sr.decode(br.range):br.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"}(fr),this.map[fr.anchorType].prepare(fr,{index:gr})})}get tag(){return"xdr:wsDr"}render(dr,fr){dr.openXml(ar.StdDocAttributes),dr.openNode(this.tag,ur.DRAWING_ATTRIBUTES),fr.anchors.forEach(gr=>{this.map[gr.anchorType].render(dr,gr)}),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[dr.name],this.parser&&this.parser.parseOpen(dr)}return!0}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){if(this.parser)return this.parser.parseClose(dr)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(dr){case this.tag:return!1;default:return!0}}reconcile(dr,fr){dr.anchors.forEach(gr=>{gr.br?this.map["xdr:twoCellAnchor"].reconcile(gr,fr):this.map["xdr:oneCellAnchor"].reconcile(gr,fr)})}}ur.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},nr.exports=ur},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"a:extLst"}render(ar){ar.openNode(this.tag),ar.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),ar.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),ar.closeNode(),ar.closeNode()}parseOpen(ar){switch(ar.name){case this.tag:default:return!0}}parseText(){}parseClose(ar){switch(ar){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.map={}}render(ar,cr){ar.openNode(this.tag);const lr=Math.floor(9525*cr.width),or=Math.floor(9525*cr.height);ar.addAttribute("cx",lr),ar.addAttribute("cy",or),ar.closeNode()}parseOpen(ar){return ar.name===this.tag&&(this.model={width:parseInt(ar.attributes.cx||"0",10)/9525,height:parseInt(ar.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"a:hlinkClick"}render(ar,cr){cr.hyperlinks&&cr.hyperlinks.rId&&ar.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":cr.hyperlinks.rId,tooltip:cr.hyperlinks.tooltip})}parseOpen(ar){switch(ar.name){case this.tag:return this.model={hyperlinks:{rId:ar.attributes["r:id"],tooltip:ar.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./c-nv-pr-xform"),cr=rr("./c-nv-pic-pr-xform");nr.exports=class extends sr{constructor(){super(),this.map={"xdr:cNvPr":new ar,"xdr:cNvPicPr":new cr}}get tag(){return"xdr:nvPicPr"}render(lr,or){lr.openNode(this.tag),this.map["xdr:cNvPr"].render(lr,or),this.map["xdr:cNvPicPr"].render(lr,or),lr.closeNode()}parseOpen(lr){if(this.parser)return this.parser.parseOpen(lr),!0;switch(lr.name){case this.tag:this.reset();break;default:this.parser=this.map[lr.name],this.parser&&this.parser.parseOpen(lr)}return!0}parseText(){}parseClose(lr){if(this.parser)return this.parser.parseClose(lr)||(this.parser=void 0),!0;switch(lr){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(rr,nr,ir){const sr=rr("./base-cell-anchor-xform"),ar=rr("../static-xform"),cr=rr("./cell-position-xform"),lr=rr("./ext-xform"),or=rr("./pic-xform");nr.exports=class extends sr{constructor(){super(),this.map={"xdr:from":new cr({tag:"xdr:from"}),"xdr:ext":new lr({tag:"xdr:ext"}),"xdr:pic":new or,"xdr:clientData":new ar({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(ur,hr){this.map["xdr:pic"].prepare(ur.picture,hr)}render(ur,hr){ur.openNode(this.tag,{editAs:hr.range.editAs||"oneCell"}),this.map["xdr:from"].render(ur,hr.range.tl),this.map["xdr:ext"].render(ur,hr.range.ext),this.map["xdr:pic"].render(ur,hr.picture),this.map["xdr:clientData"].render(ur,{}),ur.closeNode()}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.parser=void 0),!0;switch(ur){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(ur,hr){ur.medium=this.reconcilePicture(ur.picture,hr)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../static-xform"),cr=rr("./blip-fill-xform"),lr=rr("./nv-pic-pr-xform"),or=rr("./sp-pr");nr.exports=class extends sr{constructor(){super(),this.map={"xdr:nvPicPr":new lr,"xdr:blipFill":new cr,"xdr:spPr":new ar(or)}}get tag(){return"xdr:pic"}prepare(ur,hr){ur.index=hr.index+1}render(ur,hr){ur.openNode(this.tag),this.map["xdr:nvPicPr"].render(ur,hr),this.map["xdr:blipFill"].render(ur,hr),this.map["xdr:spPr"].render(ur,hr),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case this.tag:this.reset();break;default:this.parser=this.map[ur.name],this.parser&&this.parser.parseOpen(ur)}return!0}parseText(){}parseClose(ur){if(this.parser)return this.parser.parseClose(ur)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(ur){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(rr,nr,ir){nr.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(rr,nr,ir){const sr=rr("./base-cell-anchor-xform"),ar=rr("../static-xform"),cr=rr("./cell-position-xform"),lr=rr("./pic-xform");nr.exports=class extends sr{constructor(){super(),this.map={"xdr:from":new cr({tag:"xdr:from"}),"xdr:to":new cr({tag:"xdr:to"}),"xdr:pic":new lr,"xdr:clientData":new ar({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(or,ur){this.map["xdr:pic"].prepare(or.picture,ur)}render(or,ur){or.openNode(this.tag,{editAs:ur.range.editAs||"oneCell"}),this.map["xdr:from"].render(or,ur.range.tl),this.map["xdr:to"].render(or,ur.range.br),this.map["xdr:pic"].render(or,ur.picture),this.map["xdr:clientData"].render(or,{}),or.closeNode()}parseClose(or){if(this.parser)return this.parser.parseClose(or)||(this.parser=void 0),!0;switch(or){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(or,ur){or.medium=this.reconcilePicture(or.picture,ur)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(rr,nr,ir){const sr=rr("./base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.always=!!ar.always,this.count=ar.count,this.empty=ar.empty,this.$count=ar.$count||"count",this.$=ar.$,this.childXform=ar.childXform,this.maxItems=ar.maxItems}prepare(ar,cr){const{childXform:lr}=this;ar&&ar.forEach((or,ur)=>{cr.index=ur,lr.prepare(or,cr)})}render(ar,cr){if(this.always||cr&&cr.length){ar.openNode(this.tag,this.$),this.count&&ar.addAttribute(this.$count,cr&&cr.length||0);const{childXform:lr}=this;(cr||[]).forEach((or,ur)=>{lr.render(ar,or,ur)}),ar.closeNode()}else this.empty&&ar.leafNode(this.tag)}parseOpen(ar){if(this.parser)return this.parser.parseOpen(ar),!0;switch(ar.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(ar)&&(this.parser=this.childXform,!0)}}parseText(ar){this.parser&&this.parser.parseText(ar)}parseClose(ar){if(this.parser){if(!this.parser.parseClose(ar)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(ar,cr){if(ar){const{childXform:lr}=this;ar.forEach(or=>{lr.reconcile(or,cr)})}}}},{"./base-xform":32}],72:[function(rr,nr,ir){const sr=rr("../../../utils/col-cache"),ar=rr("../base-xform");nr.exports=class extends ar{get tag(){return"autoFilter"}render(cr,lr){if(lr)if(typeof lr=="string")cr.leafNode("autoFilter",{ref:lr});else{const or=function(dr){return typeof dr=="string"?dr:sr.getAddress(dr.row,dr.column).address},ur=or(lr.from),hr=or(lr.to);ur&&hr&&cr.leafNode("autoFilter",{ref:`${ur}:${hr}`})}}parseOpen(cr){cr.name==="autoFilter"&&(this.model=cr.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(rr,nr,ir){const sr=rr("../../../utils/utils"),ar=rr("../base-xform"),cr=rr("../../../doc/range"),lr=rr("../../../doc/enums"),or=rr("../strings/rich-text-xform");function ur(hr){if(hr==null)return lr.ValueType.Null;if(hr instanceof String||typeof hr=="string")return lr.ValueType.String;if(typeof hr=="number")return lr.ValueType.Number;if(typeof hr=="boolean")return lr.ValueType.Boolean;if(hr instanceof Date)return lr.ValueType.Date;if(hr.text&&hr.hyperlink)return lr.ValueType.Hyperlink;if(hr.formula)return lr.ValueType.Formula;if(hr.error)return lr.ValueType.Error;throw new Error("I could not understand type of value")}nr.exports=class extends ar{constructor(){super(),this.richTextXForm=new or}get tag(){return"c"}prepare(hr,dr){const fr=dr.styles.addStyleModel(hr.style||{},function(gr){switch(gr.type){case lr.ValueType.Formula:return ur(gr.result);default:return gr.type}}(hr));switch(fr&&(hr.styleId=fr),hr.comment&&dr.comments.push({...hr.comment,ref:hr.address}),hr.type){case lr.ValueType.String:case lr.ValueType.RichText:dr.sharedStrings&&(hr.ssId=dr.sharedStrings.add(hr.value));break;case lr.ValueType.Date:dr.date1904&&(hr.date1904=!0);break;case lr.ValueType.Hyperlink:dr.sharedStrings&&hr.text!==void 0&&hr.text!==null&&(hr.ssId=dr.sharedStrings.add(hr.text)),dr.hyperlinks.push({address:hr.address,target:hr.hyperlink,tooltip:hr.tooltip});break;case lr.ValueType.Merge:dr.merges.add(hr);break;case lr.ValueType.Formula:if(dr.date1904&&(hr.date1904=!0),hr.shareType==="shared"&&(hr.si=dr.siFormulae++),hr.formula)dr.formulae[hr.address]=hr;else if(hr.sharedFormula){const gr=dr.formulae[hr.sharedFormula];if(!gr)throw new Error("Shared Formula master must exist above and or left of clone for cell "+hr.address);gr.si===void 0?(gr.shareType="shared",gr.si=dr.siFormulae++,gr.range=new cr(gr.address,hr.address)):gr.range&&gr.range.expandToAddress(hr.address),hr.si=gr.si}}}renderFormula(hr,dr){let fr=null;switch(dr.shareType){case"shared":fr={t:"shared",ref:dr.ref||dr.range.range,si:dr.si};break;case"array":fr={t:"array",ref:dr.ref};break;default:dr.si!==void 0&&(fr={t:"shared",si:dr.si})}switch(ur(dr.result)){case lr.ValueType.Null:hr.leafNode("f",fr,dr.formula);break;case lr.ValueType.String:hr.addAttribute("t","str"),hr.leafNode("f",fr,dr.formula),hr.leafNode("v",null,dr.result);break;case lr.ValueType.Number:hr.leafNode("f",fr,dr.formula),hr.leafNode("v",null,dr.result);break;case lr.ValueType.Boolean:hr.addAttribute("t","b"),hr.leafNode("f",fr,dr.formula),hr.leafNode("v",null,dr.result?1:0);break;case lr.ValueType.Error:hr.addAttribute("t","e"),hr.leafNode("f",fr,dr.formula),hr.leafNode("v",null,dr.result.error);break;case lr.ValueType.Date:hr.leafNode("f",fr,dr.formula),hr.leafNode("v",null,sr.dateToExcel(dr.result,dr.date1904));break;default:throw new Error("I could not understand type of value")}}render(hr,dr){if(dr.type!==lr.ValueType.Null||dr.styleId){switch(hr.openNode("c"),hr.addAttribute("r",dr.address),dr.styleId&&hr.addAttribute("s",dr.styleId),dr.type){case lr.ValueType.Null:break;case lr.ValueType.Number:hr.leafNode("v",null,dr.value);break;case lr.ValueType.Boolean:hr.addAttribute("t","b"),hr.leafNode("v",null,dr.value?"1":"0");break;case lr.ValueType.Error:hr.addAttribute("t","e"),hr.leafNode("v",null,dr.value.error);break;case lr.ValueType.String:case lr.ValueType.RichText:dr.ssId!==void 0?(hr.addAttribute("t","s"),hr.leafNode("v",null,dr.ssId)):dr.value&&dr.value.richText?(hr.addAttribute("t","inlineStr"),hr.openNode("is"),dr.value.richText.forEach(fr=>{this.richTextXForm.render(hr,fr)}),hr.closeNode("is")):(hr.addAttribute("t","str"),hr.leafNode("v",null,dr.value));break;case lr.ValueType.Date:hr.leafNode("v",null,sr.dateToExcel(dr.value,dr.date1904));break;case lr.ValueType.Hyperlink:dr.ssId!==void 0?(hr.addAttribute("t","s"),hr.leafNode("v",null,dr.ssId)):(hr.addAttribute("t","str"),hr.leafNode("v",null,dr.text));break;case lr.ValueType.Formula:this.renderFormula(hr,dr);break;case lr.ValueType.Merge:}hr.closeNode()}}parseOpen(hr){if(this.parser)return this.parser.parseOpen(hr),!0;switch(hr.name){case"c":return this.model={address:hr.attributes.r},this.t=hr.attributes.t,hr.attributes.s&&(this.model.styleId=parseInt(hr.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=hr.attributes.si,this.model.shareType=hr.attributes.t,this.model.ref=hr.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(hr),!0;default:return!1}}parseText(hr){if(this.parser)this.parser.parseText(hr);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+hr:hr;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+hr:hr:this.model.value=this.model.value?this.model.value+hr:hr}}parseClose(hr){switch(hr){case"c":{const{model:dr}=this;if(dr.formula||dr.shareType)dr.type=lr.ValueType.Formula,dr.value&&(this.t==="str"?dr.result=sr.xmlDecode(dr.value):this.t==="b"?dr.result=parseInt(dr.value,10)!==0:this.t==="e"?dr.result={error:dr.value}:dr.result=parseFloat(dr.value),dr.value=void 0);else if(dr.value!==void 0)switch(this.t){case"s":dr.type=lr.ValueType.String,dr.value=parseInt(dr.value,10);break;case"str":dr.type=lr.ValueType.String,dr.value=sr.xmlDecode(dr.value);break;case"inlineStr":dr.type=lr.ValueType.String;break;case"b":dr.type=lr.ValueType.Boolean,dr.value=parseInt(dr.value,10)!==0;break;case"e":dr.type=lr.ValueType.Error,dr.value={error:dr.value};break;default:dr.type=lr.ValueType.Number,dr.value=parseFloat(dr.value)}else dr.styleId?dr.type=lr.ValueType.Null:dr.type=lr.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(hr),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(hr),!0)}}reconcile(hr,dr){const fr=hr.styleId&&dr.styles&&dr.styles.getStyleModel(hr.styleId);switch(fr&&(hr.style=fr),hr.styleId!==void 0&&(hr.styleId=void 0),hr.type){case lr.ValueType.String:typeof hr.value=="number"&&dr.sharedStrings&&(hr.value=dr.sharedStrings.getString(hr.value)),hr.value.richText&&(hr.type=lr.ValueType.RichText);break;case lr.ValueType.Number:fr&&sr.isDateFmt(fr.numFmt)&&(hr.type=lr.ValueType.Date,hr.value=sr.excelToDate(hr.value,dr.date1904));break;case lr.ValueType.Formula:hr.result!==void 0&&fr&&sr.isDateFmt(fr.numFmt)&&(hr.result=sr.excelToDate(hr.result,dr.date1904)),hr.shareType==="shared"&&(hr.ref?dr.formulae[hr.si]=hr.address:(hr.sharedFormula=dr.formulae[hr.si],delete hr.shareType),delete hr.si)}const gr=dr.hyperlinkMap[hr.address];gr&&(hr.type===lr.ValueType.Formula?(hr.text=hr.result,hr.result=void 0):(hr.text=hr.value,hr.value=void 0),hr.type=lr.ValueType.Hyperlink,hr.hyperlink=gr);const br=dr.commentsMap&&dr.commentsMap[hr.address];br&&(hr.comment=br)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{get tag(){return"x14:cfIcon"}render(ar,cr){ar.leafNode(this.tag,{iconSet:cr.iconSet,iconId:cr.iconId})}parseOpen(ar){let{attributes:cr}=ar;this.model={iconSet:cr.iconSet,iconId:sr.toIntValue(cr.iconId)}}parseClose(ar){return ar!==this.tag}}},{"../../base-xform":32}],75:[function(rr,nr,ir){const{v4:sr}=rr("uuid"),ar=rr("../../base-xform"),cr=rr("../../composite-xform"),lr=rr("./databar-ext-xform"),or=rr("./icon-set-ext-xform"),ur={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class hr extends cr{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new lr,"x14:iconSet":this.iconSetXform=new or}}get tag(){return"x14:cfRule"}static isExt(fr){return fr.type==="dataBar"?lr.isExt(fr):!(fr.type!=="iconSet"||!fr.custom&&!ur[fr.iconSet])}prepare(fr){hr.isExt(fr)&&(fr.x14Id=`{${sr()}}`.toUpperCase())}render(fr,gr){if(hr.isExt(gr))switch(gr.type){case"dataBar":this.renderDataBar(fr,gr);break;case"iconSet":this.renderIconSet(fr,gr)}}renderDataBar(fr,gr){fr.openNode(this.tag,{type:"dataBar",id:gr.x14Id}),this.databarXform.render(fr,gr),fr.closeNode()}renderIconSet(fr,gr){fr.openNode(this.tag,{type:"iconSet",priority:gr.priority,id:gr.x14Id||`{${sr()}}`}),this.iconSetXform.render(fr,gr),fr.closeNode()}createNewModel(fr){let{attributes:gr}=fr;return{type:gr.type,x14Id:gr.id,priority:ar.toIntValue(gr.priority)}}onParserClose(fr,gr){Object.assign(this.model,gr.model)}}nr.exports=hr},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("./f-ext-xform");nr.exports=class extends sr{constructor(){super(),this.map={"xm:f":this.fExtXform=new ar}}get tag(){return"x14:cfvo"}render(cr,lr){cr.openNode(this.tag,{type:lr.type}),lr.value!==void 0&&this.fExtXform.render(cr,lr.value),cr.closeNode()}createNewModel(cr){return{type:cr.attributes.type}}onParserClose(cr,lr){switch(cr){case"xm:f":this.model.value=lr.model?parseFloat(lr.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("./sqref-ext-xform"),cr=rr("./cf-rule-ext-xform");nr.exports=class extends sr{constructor(){super(),this.map={"xm:sqref":this.sqRef=new ar,"x14:cfRule":this.cfRule=new cr}}get tag(){return"x14:conditionalFormatting"}prepare(lr,or){lr.rules.forEach(ur=>{this.cfRule.prepare(ur,or)})}render(lr,or){or.rules.some(cr.isExt)&&(lr.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),or.rules.filter(cr.isExt).forEach(ur=>this.cfRule.render(lr,ur)),this.sqRef.render(lr,or.ref),lr.closeNode())}createNewModel(){return{rules:[]}}onParserClose(lr,or){switch(lr){case"xm:sqref":this.model.ref=or.model;break;case"x14:cfRule":this.model.rules.push(or.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("./cf-rule-ext-xform"),cr=rr("./conditional-formatting-ext-xform");nr.exports=class extends sr{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new cr}}get tag(){return"x14:conditionalFormattings"}hasContent(lr){return lr.hasExtContent===void 0&&(lr.hasExtContent=lr.some(or=>or.rules.some(ar.isExt))),lr.hasExtContent}prepare(lr,or){lr.forEach(ur=>{this.cfXform.prepare(ur,or)})}render(lr,or){this.hasContent(or)&&(lr.openNode(this.tag),or.forEach(ur=>this.cfXform.render(lr,ur)),lr.closeNode())}createNewModel(){return[]}onParserClose(lr,or){this.model.push(or.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("../../composite-xform"),cr=rr("../../style/color-xform"),lr=rr("./cfvo-ext-xform");nr.exports=class extends ar{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new lr,"x14:borderColor":this.borderColorXform=new cr("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new cr("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new cr("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new cr("x14:axisColor")}}static isExt(or){return!or.gradient}get tag(){return"x14:dataBar"}render(or,ur){or.openNode(this.tag,{minLength:sr.toIntAttribute(ur.minLength,0,!0),maxLength:sr.toIntAttribute(ur.maxLength,100,!0),border:sr.toBoolAttribute(ur.border,!1),gradient:sr.toBoolAttribute(ur.gradient,!0),negativeBarColorSameAsPositive:sr.toBoolAttribute(ur.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:sr.toBoolAttribute(ur.negativeBarBorderColorSameAsPositive,!0),axisPosition:sr.toAttribute(ur.axisPosition,"auto"),direction:sr.toAttribute(ur.direction,"leftToRight")}),ur.cfvo.forEach(hr=>{this.cfvoXform.render(or,hr)}),this.borderColorXform.render(or,ur.borderColor),this.negativeBorderColorXform.render(or,ur.negativeBorderColor),this.negativeFillColorXform.render(or,ur.negativeFillColor),this.axisColorXform.render(or,ur.axisColor),or.closeNode()}createNewModel(or){let{attributes:ur}=or;return{cfvo:[],minLength:sr.toIntValue(ur.minLength,0),maxLength:sr.toIntValue(ur.maxLength,100),border:sr.toBoolValue(ur.border,!1),gradient:sr.toBoolValue(ur.gradient,!0),negativeBarColorSameAsPositive:sr.toBoolValue(ur.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:sr.toBoolValue(ur.negativeBarBorderColorSameAsPositive,!0),axisPosition:sr.toStringValue(ur.axisPosition,"auto"),direction:sr.toStringValue(ur.direction,"leftToRight")}}onParserClose(or,ur){const[,hr]=or.split(":");switch(hr){case"cfvo":this.model.cfvo.push(ur.model);break;default:this.model[hr]=ur.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{get tag(){return"xm:f"}render(ar,cr){ar.leafNode(this.tag,null,cr)}parseOpen(){this.model=""}parseText(ar){this.model+=ar}parseClose(ar){return ar!==this.tag}}},{"../../base-xform":32}],81:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("../../composite-xform"),cr=rr("./cfvo-ext-xform"),lr=rr("./cf-icon-ext-xform");nr.exports=class extends ar{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new cr,"x14:cfIcon":this.cfIconXform=new lr}}get tag(){return"x14:iconSet"}render(or,ur){or.openNode(this.tag,{iconSet:sr.toStringAttribute(ur.iconSet),reverse:sr.toBoolAttribute(ur.reverse,!1),showValue:sr.toBoolAttribute(ur.showValue,!0),custom:sr.toBoolAttribute(ur.icons,!1)}),ur.cfvo.forEach(hr=>{this.cfvoXform.render(or,hr)}),ur.icons&&ur.icons.forEach((hr,dr)=>{hr.iconId=dr,this.cfIconXform.render(or,hr)}),or.closeNode()}createNewModel(or){let{attributes:ur}=or;return{cfvo:[],iconSet:sr.toStringValue(ur.iconSet,"3TrafficLights"),reverse:sr.toBoolValue(ur.reverse,!1),showValue:sr.toBoolValue(ur.showValue,!0)}}onParserClose(or,ur){const[,hr]=or.split(":");switch(hr){case"cfvo":this.model.cfvo.push(ur.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(ur.model);break;default:this.model[hr]=ur.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{get tag(){return"xm:sqref"}render(ar,cr){ar.leafNode(this.tag,null,cr)}parseOpen(){this.model=""}parseText(ar){this.model+=ar}parseClose(ar){return ar!==this.tag}}},{"../../base-xform":32}],83:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("../../composite-xform"),cr=rr("../../../../doc/range"),lr=rr("./databar-xform"),or=rr("./ext-lst-ref-xform"),ur=rr("./formula-xform"),hr=rr("./color-scale-xform"),dr=rr("./icon-set-xform"),fr={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},gr=pr=>{const{type:mr,operator:yr}=pr;switch(mr){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:mr};default:return{type:mr,operator:yr}}};class br extends ar{constructor(){super(),this.map={dataBar:this.databarXform=new lr,extLst:this.extLstRefXform=new or,formula:this.formulaXform=new ur,colorScale:this.colorScaleXform=new hr,iconSet:this.iconSetXform=new dr}}get tag(){return"cfRule"}static isPrimitive(mr){return mr.type!=="iconSet"||!mr.custom&&!fr[mr.iconSet]}render(mr,yr){switch(yr.type){case"expression":this.renderExpression(mr,yr);break;case"cellIs":this.renderCellIs(mr,yr);break;case"top10":this.renderTop10(mr,yr);break;case"aboveAverage":this.renderAboveAverage(mr,yr);break;case"dataBar":this.renderDataBar(mr,yr);break;case"colorScale":this.renderColorScale(mr,yr);break;case"iconSet":this.renderIconSet(mr,yr);break;case"containsText":this.renderText(mr,yr);break;case"timePeriod":this.renderTimePeriod(mr,yr)}}renderExpression(mr,yr){mr.openNode(this.tag,{type:"expression",dxfId:yr.dxfId,priority:yr.priority}),this.formulaXform.render(mr,yr.formulae[0]),mr.closeNode()}renderCellIs(mr,yr){mr.openNode(this.tag,{type:"cellIs",dxfId:yr.dxfId,priority:yr.priority,operator:yr.operator}),yr.formulae.forEach(xr=>{this.formulaXform.render(mr,xr)}),mr.closeNode()}renderTop10(mr,yr){mr.leafNode(this.tag,{type:"top10",dxfId:yr.dxfId,priority:yr.priority,percent:sr.toBoolAttribute(yr.percent,!1),bottom:sr.toBoolAttribute(yr.bottom,!1),rank:sr.toIntValue(yr.rank,10,!0)})}renderAboveAverage(mr,yr){mr.leafNode(this.tag,{type:"aboveAverage",dxfId:yr.dxfId,priority:yr.priority,aboveAverage:sr.toBoolAttribute(yr.aboveAverage,!0)})}renderDataBar(mr,yr){mr.openNode(this.tag,{type:"dataBar",priority:yr.priority}),this.databarXform.render(mr,yr),this.extLstRefXform.render(mr,yr),mr.closeNode()}renderColorScale(mr,yr){mr.openNode(this.tag,{type:"colorScale",priority:yr.priority}),this.colorScaleXform.render(mr,yr),mr.closeNode()}renderIconSet(mr,yr){br.isPrimitive(yr)&&(mr.openNode(this.tag,{type:"iconSet",priority:yr.priority}),this.iconSetXform.render(mr,yr),mr.closeNode())}renderText(mr,yr){mr.openNode(this.tag,{type:yr.operator,dxfId:yr.dxfId,priority:yr.priority,operator:sr.toStringAttribute(yr.operator,"containsText")});const xr=(vr=>{if(vr.formulae&&vr.formulae[0])return vr.formulae[0];const _r=new cr(vr.ref),{tl:Er}=_r;switch(vr.operator){case"containsText":return`NOT(ISERROR(SEARCH("${vr.text}",${Er})))`;case"containsBlanks":return`LEN(TRIM(${Er}))=0`;case"notContainsBlanks":return`LEN(TRIM(${Er}))>0`;case"containsErrors":return`ISERROR(${Er})`;case"notContainsErrors":return`NOT(ISERROR(${Er}))`;default:return}})(yr);xr&&this.formulaXform.render(mr,xr),mr.closeNode()}renderTimePeriod(mr,yr){mr.openNode(this.tag,{type:"timePeriod",dxfId:yr.dxfId,priority:yr.priority,timePeriod:yr.timePeriod});const xr=(vr=>{if(vr.formulae&&vr.formulae[0])return vr.formulae[0];const _r=new cr(vr.ref),{tl:Er}=_r;switch(vr.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${Er},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${Er},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${Er},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${Er},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${Er},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${Er},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${Er},1)=TODAY()-1`;case"today":return`FLOOR(${Er},1)=TODAY()`;case"tomorrow":return`FLOOR(${Er},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${Er},1)<=6,FLOOR(${Er},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${Er})=MONTH(EDATE(TODAY(),0-1)),YEAR(${Er})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${Er})=MONTH(TODAY()),YEAR(${Er})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${Er})=MONTH(EDATE(TODAY(),0+1)),YEAR(${Er})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(yr);xr&&this.formulaXform.render(mr,xr),mr.closeNode()}createNewModel(mr){let{attributes:yr}=mr;return{...gr(yr),dxfId:sr.toIntValue(yr.dxfId),priority:sr.toIntValue(yr.priority),timePeriod:yr.timePeriod,percent:sr.toBoolValue(yr.percent),bottom:sr.toBoolValue(yr.bottom),rank:sr.toIntValue(yr.rank),aboveAverage:sr.toBoolValue(yr.aboveAverage)}}onParserClose(mr,yr){switch(mr){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,yr.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(yr.model)}}}nr.exports=br},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{get tag(){return"cfvo"}render(ar,cr){ar.leafNode(this.tag,{type:cr.type,val:cr.value})}parseOpen(ar){this.model={type:ar.attributes.type,value:sr.toFloatValue(ar.attributes.val)}}parseClose(ar){return ar!==this.tag}}},{"../../base-xform":32}],85:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("../../style/color-xform"),cr=rr("./cfvo-xform");nr.exports=class extends sr{constructor(){super(),this.map={cfvo:this.cfvoXform=new cr,color:this.colorXform=new ar}}get tag(){return"colorScale"}render(lr,or){lr.openNode(this.tag),or.cfvo.forEach(ur=>{this.cfvoXform.render(lr,ur)}),or.color.forEach(ur=>{this.colorXform.render(lr,ur)}),lr.closeNode()}createNewModel(lr){return{cfvo:[],color:[]}}onParserClose(lr,or){this.model[lr].push(or.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("./cf-rule-xform");nr.exports=class extends sr{constructor(){super(),this.map={cfRule:new ar}}get tag(){return"conditionalFormatting"}render(cr,lr){lr.rules.some(ar.isPrimitive)&&(cr.openNode(this.tag,{sqref:lr.ref}),lr.rules.forEach(or=>{ar.isPrimitive(or)&&(or.ref=lr.ref,this.map.cfRule.render(cr,or))}),cr.closeNode())}createNewModel(cr){let{attributes:lr}=cr;return{ref:lr.sqref,rules:[]}}onParserClose(cr,lr){this.model.rules.push(lr.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("./conditional-formatting-xform");nr.exports=class extends sr{constructor(){super(),this.cfXform=new ar}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(cr,lr){let or=cr.reduce((ur,hr)=>Math.max(ur,...hr.rules.map(dr=>dr.priority||0)),1);cr.forEach(ur=>{ur.rules.forEach(hr=>{hr.priority||(hr.priority=or++),hr.style&&(hr.dxfId=lr.styles.addDxfStyle(hr.style))})})}render(cr,lr){lr.forEach(or=>{this.cfXform.render(cr,or)})}parseOpen(cr){if(this.parser)return this.parser.parseOpen(cr),!0;switch(cr.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(cr),!0;default:return!1}}parseText(cr){this.parser&&this.parser.parseText(cr)}parseClose(cr){return!!this.parser&&(!!this.parser.parseClose(cr)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(cr,lr){cr.forEach(or=>{or.rules.forEach(ur=>{ur.dxfId!==void 0&&(ur.style=lr.styles.getDxfStyle(ur.dxfId),delete ur.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(rr,nr,ir){const sr=rr("../../composite-xform"),ar=rr("../../style/color-xform"),cr=rr("./cfvo-xform");nr.exports=class extends sr{constructor(){super(),this.map={cfvo:this.cfvoXform=new cr,color:this.colorXform=new ar}}get tag(){return"dataBar"}render(lr,or){lr.openNode(this.tag),or.cfvo.forEach(ur=>{this.cfvoXform.render(lr,ur)}),this.colorXform.render(lr,or.color),lr.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(lr,or){switch(lr){case"cfvo":this.model.cfvo.push(or.model);break;case"color":this.model.color=or.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("../../composite-xform");class cr extends sr{get tag(){return"x14:id"}render(ur,hr){ur.leafNode(this.tag,null,hr)}parseOpen(){this.model=""}parseText(ur){this.model+=ur}parseClose(ur){return ur!==this.tag}}class lr extends ar{constructor(){super(),this.map={"x14:id":this.idXform=new cr}}get tag(){return"ext"}render(ur,hr){ur.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(ur,hr.x14Id),ur.closeNode()}createNewModel(){return{}}onParserClose(ur,hr){this.model.x14Id=hr.model}}nr.exports=class extends ar{constructor(){super(),this.map={ext:new lr}}get tag(){return"extLst"}render(or,ur){or.openNode(this.tag),this.map.ext.render(or,ur),or.closeNode()}createNewModel(){return{}}onParserClose(or,ur){Object.assign(this.model,ur.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(rr,nr,ir){const sr=rr("../../base-xform");nr.exports=class extends sr{get tag(){return"formula"}render(ar,cr){ar.leafNode(this.tag,null,cr)}parseOpen(){this.model=""}parseText(ar){this.model+=ar}parseClose(ar){return ar!==this.tag}}},{"../../base-xform":32}],91:[function(rr,nr,ir){const sr=rr("../../base-xform"),ar=rr("../../composite-xform"),cr=rr("./cfvo-xform");nr.exports=class extends ar{constructor(){super(),this.map={cfvo:this.cfvoXform=new cr}}get tag(){return"iconSet"}render(lr,or){lr.openNode(this.tag,{iconSet:sr.toStringAttribute(or.iconSet,"3TrafficLights"),reverse:sr.toBoolAttribute(or.reverse,!1),showValue:sr.toBoolAttribute(or.showValue,!0)}),or.cfvo.forEach(ur=>{this.cfvoXform.render(lr,ur)}),lr.closeNode()}createNewModel(lr){let{attributes:or}=lr;return{iconSet:sr.toStringValue(or.iconSet,"3TrafficLights"),reverse:sr.toBoolValue(or.reverse),showValue:sr.toBoolValue(or.showValue),cfvo:[]}}onParserClose(lr,or){this.model[lr].push(or.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(rr,nr,ir){const sr=rr("../../../utils/utils"),ar=rr("../base-xform");nr.exports=class extends ar{get tag(){return"col"}prepare(cr,lr){const or=lr.styles.addStyleModel(cr.style||{});or&&(cr.styleId=or)}render(cr,lr){cr.openNode("col"),cr.addAttribute("min",lr.min),cr.addAttribute("max",lr.max),lr.width&&cr.addAttribute("width",lr.width),lr.styleId&&cr.addAttribute("style",lr.styleId),lr.hidden&&cr.addAttribute("hidden","1"),lr.bestFit&&cr.addAttribute("bestFit","1"),lr.outlineLevel&&cr.addAttribute("outlineLevel",lr.outlineLevel),lr.collapsed&&cr.addAttribute("collapsed","1"),cr.addAttribute("customWidth","1"),cr.closeNode()}parseOpen(cr){if(cr.name==="col"){const lr=this.model={min:parseInt(cr.attributes.min||"0",10),max:parseInt(cr.attributes.max||"0",10),width:cr.attributes.width===void 0?void 0:parseFloat(cr.attributes.width||"0")};return cr.attributes.style&&(lr.styleId=parseInt(cr.attributes.style,10)),sr.parseBoolean(cr.attributes.hidden)&&(lr.hidden=!0),sr.parseBoolean(cr.attributes.bestFit)&&(lr.bestFit=!0),cr.attributes.outlineLevel&&(lr.outlineLevel=parseInt(cr.attributes.outlineLevel,10)),sr.parseBoolean(cr.attributes.collapsed)&&(lr.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(cr,lr){cr.styleId&&(cr.style=lr.styles.getStyleModel(cr.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../../../utils/utils"),cr=rr("../../../utils/col-cache"),lr=rr("../base-xform"),or=rr("../../../doc/range");function ur(dr,fr,gr,br){const pr=fr[gr];pr!==void 0?dr[gr]=pr:br!==void 0&&(dr[gr]=br)}function hr(dr,fr,gr,br){const pr=fr[gr];pr!==void 0&&(dr[gr]=ar.parseBoolean(pr))}nr.exports=class extends lr{get tag(){return"dataValidations"}render(dr,fr){const gr=function(br){const pr=sr.map(br,(xr,vr)=>({address:vr,dataValidation:xr,marked:!1})).sort((xr,vr)=>sr.strcmp(xr.address,vr.address)),mr=sr.keyBy(pr,"address"),yr=(xr,vr,_r)=>{for(let Er=0;Er<vr;Er++){const Tr=cr.encodeAddress(xr.row+Er,_r);if(!br[Tr]||!sr.isEqual(br[xr.address],br[Tr]))return!1}return!0};return pr.map(xr=>{if(!xr.marked){const vr=cr.decodeEx(xr.address);if(vr.dimensions)return mr[vr.dimensions].marked=!0,{...xr.dataValidation,sqref:xr.address};let _r=1,Er=cr.encodeAddress(vr.row+_r,vr.col);for(;br[Er]&&sr.isEqual(xr.dataValidation,br[Er]);)_r++,Er=cr.encodeAddress(vr.row+_r,vr.col);let Tr=1;for(;yr(vr,_r,vr.col+Tr);)Tr++;for(let Rr=0;Rr<_r;Rr++)for(let Nr=0;Nr<Tr;Nr++)Er=cr.encodeAddress(vr.row+Rr,vr.col+Nr),mr[Er].marked=!0;if(_r>1||Tr>1){const Rr=vr.row+(_r-1),Nr=vr.col+(Tr-1);return{...xr.dataValidation,sqref:`${xr.address}:${cr.encodeAddress(Rr,Nr)}`}}return{...xr.dataValidation,sqref:xr.address}}return null}).filter(Boolean)}(fr);gr.length&&(dr.openNode("dataValidations",{count:gr.length}),gr.forEach(br=>{dr.openNode("dataValidation"),br.type!=="any"&&(dr.addAttribute("type",br.type),br.operator&&br.type!=="list"&&br.operator!=="between"&&dr.addAttribute("operator",br.operator),br.allowBlank&&dr.addAttribute("allowBlank","1")),br.showInputMessage&&dr.addAttribute("showInputMessage","1"),br.promptTitle&&dr.addAttribute("promptTitle",br.promptTitle),br.prompt&&dr.addAttribute("prompt",br.prompt),br.showErrorMessage&&dr.addAttribute("showErrorMessage","1"),br.errorStyle&&dr.addAttribute("errorStyle",br.errorStyle),br.errorTitle&&dr.addAttribute("errorTitle",br.errorTitle),br.error&&dr.addAttribute("error",br.error),dr.addAttribute("sqref",br.sqref),(br.formulae||[]).forEach((pr,mr)=>{dr.openNode("formula"+(mr+1)),br.type==="date"?dr.writeText(ar.dateToExcel(new Date(pr))):dr.writeText(pr),dr.closeNode()}),dr.closeNode()}),dr.closeNode())}parseOpen(dr){switch(dr.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=dr.attributes.sqref;const fr={type:dr.attributes.type||"any",formulae:[]};switch(dr.attributes.type&&hr(fr,dr.attributes,"allowBlank"),hr(fr,dr.attributes,"showInputMessage"),hr(fr,dr.attributes,"showErrorMessage"),fr.type){case"any":case"list":case"custom":break;default:ur(fr,dr.attributes,"operator","between")}return ur(fr,dr.attributes,"promptTitle"),ur(fr,dr.attributes,"prompt"),ur(fr,dr.attributes,"errorStyle"),ur(fr,dr.attributes,"errorTitle"),ur(fr,dr.attributes,"error"),this._dataValidation=fr,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(dr){this._formula&&this._formula.push(dr)}parseClose(dr){switch(dr){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(fr=>{fr.includes(":")?new or(fr).forEachAddress(gr=>{this.model[gr]=this._dataValidation}):this.model[fr]=this._dataValidation}),!0;case"formula1":case"formula2":{let fr=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":fr=parseInt(fr,10);break;case"decimal":fr=parseFloat(fr);break;case"date":fr=ar.excelToDate(parseFloat(fr))}return this._dataValidation.formulae.push(fr),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"dimension"}render(ar,cr){cr&&ar.leafNode("dimension",{ref:cr})}parseOpen(ar){return ar.name==="dimension"&&(this.model=ar.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"drawing"}render(ar,cr){cr&&ar.leafNode(this.tag,{"r:id":cr.rId})}parseOpen(ar){switch(ar.name){case this.tag:return this.model={rId:ar.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(rr,nr,ir){const sr=rr("../composite-xform"),ar=rr("./cf-ext/conditional-formattings-ext-xform");class cr extends sr{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new ar}}get tag(){return"ext"}hasContent(or){return this.conditionalFormattings.hasContent(or.conditionalFormattings)}prepare(or,ur){this.conditionalFormattings.prepare(or.conditionalFormattings,ur)}render(or,ur){or.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(or,ur.conditionalFormattings),or.closeNode()}createNewModel(){return{}}onParserClose(or,ur){this.model[or]=ur.model}}nr.exports=class extends sr{constructor(){super(),this.map={ext:this.ext=new cr}}get tag(){return"extLst"}prepare(lr,or){this.ext.prepare(lr,or)}hasContent(lr){return this.ext.hasContent(lr)}render(lr,or){this.hasContent(or)&&(lr.openNode("extLst"),this.ext.render(lr,or),lr.closeNode())}createNewModel(){return{}}onParserClose(lr,or){Object.assign(this.model,or.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"headerFooter"}render(ar,cr){if(cr){ar.addRollback();let lr=!1;ar.openNode("headerFooter"),cr.differentFirst&&(ar.addAttribute("differentFirst","1"),lr=!0),cr.differentOddEven&&(ar.addAttribute("differentOddEven","1"),lr=!0),cr.oddHeader&&typeof cr.oddHeader=="string"&&(ar.leafNode("oddHeader",null,cr.oddHeader),lr=!0),cr.oddFooter&&typeof cr.oddFooter=="string"&&(ar.leafNode("oddFooter",null,cr.oddFooter),lr=!0),cr.evenHeader&&typeof cr.evenHeader=="string"&&(ar.leafNode("evenHeader",null,cr.evenHeader),lr=!0),cr.evenFooter&&typeof cr.evenFooter=="string"&&(ar.leafNode("evenFooter",null,cr.evenFooter),lr=!0),cr.firstHeader&&typeof cr.firstHeader=="string"&&(ar.leafNode("firstHeader",null,cr.firstHeader),lr=!0),cr.firstFooter&&typeof cr.firstFooter=="string"&&(ar.leafNode("firstFooter",null,cr.firstFooter),lr=!0),lr?(ar.closeNode(),ar.commit()):ar.rollback()}}parseOpen(ar){switch(ar.name){case"headerFooter":return this.model={},ar.attributes.differentFirst&&(this.model.differentFirst=parseInt(ar.attributes.differentFirst,0)===1),ar.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(ar.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(ar){switch(this.currentNode){case"oddHeader":this.model.oddHeader=ar;break;case"oddFooter":this.model.oddFooter=ar;break;case"evenHeader":this.model.evenHeader=ar;break;case"evenFooter":this.model.evenFooter=ar;break;case"firstHeader":this.model.firstHeader=ar;break;case"firstFooter":this.model.firstFooter=ar}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"hyperlink"}render(ar,cr){this.isInternalLink(cr)?ar.leafNode("hyperlink",{ref:cr.address,"r:id":cr.rId,tooltip:cr.tooltip,location:cr.target}):ar.leafNode("hyperlink",{ref:cr.address,"r:id":cr.rId,tooltip:cr.tooltip})}parseOpen(ar){return ar.name==="hyperlink"&&(this.model={address:ar.attributes.ref,rId:ar.attributes["r:id"],tooltip:ar.attributes.tooltip},ar.attributes.location&&(this.model.target=ar.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(ar){return ar.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(ar.target)}}},{"../base-xform":32}],99:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"mergeCell"}render(ar,cr){ar.leafNode("mergeCell",{ref:cr})}parseOpen(ar){return ar.name==="mergeCell"&&(this.model=ar.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../../../doc/range"),cr=rr("../../../utils/col-cache"),lr=rr("../../../doc/enums");nr.exports=class{constructor(){this.merges={}}add(or){if(this.merges[or.master])this.merges[or.master].expandToAddress(or.address);else{const ur=`${or.master}:${or.address}`;this.merges[or.master]=new ar(ur)}}get mergeCells(){return sr.map(this.merges,or=>or.range)}reconcile(or,ur){sr.each(or,hr=>{const dr=cr.decode(hr);for(let fr=dr.top;fr<=dr.bottom;fr++){const gr=ur[fr-1];for(let br=dr.left;br<=dr.right;br++){const pr=gr.cells[br-1];pr?pr.type===lr.ValueType.Merge&&(pr.master=dr.tl):gr.cells[br]={type:lr.ValueType.Null,address:cr.encodeAddress(fr,br)}}}})}getMasterAddress(or){const ur=this.hash[or];return ur&&ur.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=cr=>cr!==void 0;nr.exports=class extends sr{get tag(){return"outlinePr"}render(cr,lr){return!(!lr||!ar(lr.summaryBelow)&&!ar(lr.summaryRight))&&(cr.leafNode(this.tag,{summaryBelow:ar(lr.summaryBelow)?Number(lr.summaryBelow):void 0,summaryRight:ar(lr.summaryRight)?Number(lr.summaryRight):void 0}),!0)}parseOpen(cr){return cr.name===this.tag&&(this.model={summaryBelow:ar(cr.attributes.summaryBelow)?!!Number(cr.attributes.summaryBelow):void 0,summaryRight:ar(cr.attributes.summaryRight)?!!Number(cr.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"brk"}render(ar,cr){ar.leafNode("brk",cr)}parseOpen(ar){return ar.name==="brk"&&(this.model=ar.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../base-xform");nr.exports=class extends ar{get tag(){return"pageMargins"}render(cr,lr){if(lr){const or={left:lr.left,right:lr.right,top:lr.top,bottom:lr.bottom,header:lr.header,footer:lr.footer};sr.some(or,ur=>ur!==void 0)&&cr.leafNode(this.tag,or)}}parseOpen(cr){switch(cr.name){case this.tag:return this.model={left:parseFloat(cr.attributes.left||.7),right:parseFloat(cr.attributes.right||.7),top:parseFloat(cr.attributes.top||.75),bottom:parseFloat(cr.attributes.bottom||.75),header:parseFloat(cr.attributes.header||.3),footer:parseFloat(cr.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"pageSetUpPr"}render(ar,cr){return!(!cr||!cr.fitToPage)&&(ar.leafNode(this.tag,{fitToPage:cr.fitToPage?"1":void 0}),!0)}parseOpen(ar){return ar.name===this.tag&&(this.model={fitToPage:ar.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../base-xform");function cr(hr){return hr?"1":void 0}function lr(hr){switch(hr){case"overThenDown":return hr;default:return}}function or(hr){switch(hr){case"atEnd":case"asDisplyed":return hr;default:return}}function ur(hr){switch(hr){case"dash":case"blank":case"NA":return hr;default:return}}nr.exports=class extends ar{get tag(){return"pageSetup"}render(hr,dr){if(dr){const fr={paperSize:dr.paperSize,orientation:dr.orientation,horizontalDpi:dr.horizontalDpi,verticalDpi:dr.verticalDpi,pageOrder:lr(dr.pageOrder),blackAndWhite:cr(dr.blackAndWhite),draft:cr(dr.draft),cellComments:or(dr.cellComments),errors:ur(dr.errors),scale:dr.scale,fitToWidth:dr.fitToWidth,fitToHeight:dr.fitToHeight,firstPageNumber:dr.firstPageNumber,useFirstPageNumber:cr(dr.firstPageNumber),usePrinterDefaults:cr(dr.usePrinterDefaults),copies:dr.copies};sr.some(fr,gr=>gr!==void 0)&&hr.leafNode(this.tag,fr)}}parseOpen(hr){switch(hr.name){case this.tag:return this.model={paperSize:(dr=hr.attributes.paperSize,dr!==void 0?parseInt(dr,10):void 0),orientation:hr.attributes.orientation||"portrait",horizontalDpi:parseInt(hr.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(hr.attributes.verticalDpi||"4294967295",10),pageOrder:hr.attributes.pageOrder||"downThenOver",blackAndWhite:hr.attributes.blackAndWhite==="1",draft:hr.attributes.draft==="1",cellComments:hr.attributes.cellComments||"None",errors:hr.attributes.errors||"displayed",scale:parseInt(hr.attributes.scale||"100",10),fitToWidth:parseInt(hr.attributes.fitToWidth||"1",10),fitToHeight:parseInt(hr.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(hr.attributes.firstPageNumber||"1",10),useFirstPageNumber:hr.attributes.useFirstPageNumber==="1",usePrinterDefaults:hr.attributes.usePrinterDefaults==="1",copies:parseInt(hr.attributes.copies||"1",10)},!0;default:return!1}var dr}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"picture"}render(ar,cr){cr&&ar.leafNode(this.tag,{"r:id":cr.rId})}parseOpen(ar){switch(ar.name){case this.tag:return this.model={rId:ar.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../base-xform");function cr(lr){return lr?"1":void 0}nr.exports=class extends ar{get tag(){return"printOptions"}render(lr,or){if(or){const ur={headings:cr(or.showRowColHeaders),gridLines:cr(or.showGridLines),horizontalCentered:cr(or.horizontalCentered),verticalCentered:cr(or.verticalCentered)};sr.some(ur,hr=>hr!==void 0)&&lr.leafNode(this.tag,ur)}}parseOpen(lr){switch(lr.name){case this.tag:return this.model={showRowColHeaders:lr.attributes.headings==="1",showGridLines:lr.attributes.gridLines==="1",horizontalCentered:lr.attributes.horizontalCentered==="1",verticalCentered:lr.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(rr,nr,ir){const sr=rr("./page-breaks-xform"),ar=rr("../list-xform");nr.exports=class extends ar{constructor(){super({tag:"rowBreaks",count:!0,childXform:new sr})}render(cr,lr){if(lr&&lr.length){cr.openNode(this.tag,this.$),this.count&&(cr.addAttribute(this.$count,lr.length),cr.addAttribute("manualBreakCount",lr.length));const{childXform:or}=this;lr.forEach(ur=>{or.render(cr,ur)}),cr.closeNode()}else this.empty&&cr.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../../../utils/utils"),cr=rr("./cell-xform");nr.exports=class extends sr{constructor(lr){super(),this.maxItems=lr&&lr.maxItems,this.map={c:new cr}}get tag(){return"row"}prepare(lr,or){const ur=or.styles.addStyleModel(lr.style);ur&&(lr.styleId=ur);const hr=this.map.c;lr.cells.forEach(dr=>{hr.prepare(dr,or)})}render(lr,or,ur){lr.openNode("row"),lr.addAttribute("r",or.number),or.height&&(lr.addAttribute("ht",or.height),lr.addAttribute("customHeight","1")),or.hidden&&lr.addAttribute("hidden","1"),or.min>0&&or.max>0&&or.min<=or.max&&lr.addAttribute("spans",`${or.min}:${or.max}`),or.styleId&&(lr.addAttribute("s",or.styleId),lr.addAttribute("customFormat","1")),lr.addAttribute("x14ac:dyDescent","0.25"),or.outlineLevel&&lr.addAttribute("outlineLevel",or.outlineLevel),or.collapsed&&lr.addAttribute("collapsed","1");const hr=this.map.c;or.cells.forEach(dr=>{hr.render(lr,dr,ur)}),lr.closeNode()}parseOpen(lr){if(this.parser)return this.parser.parseOpen(lr),!0;if(lr.name==="row"){this.numRowsSeen+=1;const or=lr.attributes.spans?lr.attributes.spans.split(":").map(hr=>parseInt(hr,10)):[void 0,void 0],ur=this.model={number:parseInt(lr.attributes.r,10),min:or[0],max:or[1],cells:[]};return lr.attributes.s&&(ur.styleId=parseInt(lr.attributes.s,10)),ar.parseBoolean(lr.attributes.hidden)&&(ur.hidden=!0),ar.parseBoolean(lr.attributes.bestFit)&&(ur.bestFit=!0),lr.attributes.ht&&(ur.height=parseFloat(lr.attributes.ht)),lr.attributes.outlineLevel&&(ur.outlineLevel=parseInt(lr.attributes.outlineLevel,10)),ar.parseBoolean(lr.attributes.collapsed)&&(ur.collapsed=!0),!0}return this.parser=this.map[lr.name],!!this.parser&&(this.parser.parseOpen(lr),!0)}parseText(lr){this.parser&&this.parser.parseText(lr)}parseClose(lr){if(this.parser){if(!this.parser.parseClose(lr)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(lr,or){lr.style=lr.styleId?or.styles.getStyleModel(lr.styleId):{},lr.styleId!==void 0&&(lr.styleId=void 0);const ur=this.map.c;lr.cells.forEach(hr=>{ur.reconcile(hr,or)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../base-xform");nr.exports=class extends ar{get tag(){return"sheetFormatPr"}render(cr,lr){if(lr){const or={defaultRowHeight:lr.defaultRowHeight,outlineLevelRow:lr.outlineLevelRow,outlineLevelCol:lr.outlineLevelCol,"x14ac:dyDescent":lr.dyDescent};lr.defaultColWidth&&(or.defaultColWidth=lr.defaultColWidth),lr.defaultRowHeight&&lr.defaultRowHeight===15||(or.customHeight="1"),sr.some(or,ur=>ur!==void 0)&&cr.leafNode("sheetFormatPr",or)}}parseOpen(cr){return cr.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(cr.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(cr.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(cr.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(cr.attributes.outlineLevelCol||"0",10)},cr.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(cr.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../style/color-xform"),cr=rr("./page-setup-properties-xform"),lr=rr("./outline-properties-xform");nr.exports=class extends sr{constructor(){super(),this.map={tabColor:new ar("tabColor"),pageSetUpPr:new cr,outlinePr:new lr}}get tag(){return"sheetPr"}render(or,ur){if(ur){or.addRollback(),or.openNode("sheetPr");let hr=!1;hr=this.map.tabColor.render(or,ur.tabColor)||hr,hr=this.map.pageSetUpPr.render(or,ur.pageSetup)||hr,hr=this.map.outlinePr.render(or,ur.outlineProperties)||hr,hr?(or.closeNode(),or.commit()):or.rollback()}}parseOpen(or){return this.parser?(this.parser.parseOpen(or),!0):or.name===this.tag?(this.reset(),!0):!!this.map[or.name]&&(this.parser=this.map[or.name],this.parser.parseOpen(or),!0)}parseText(or){return!!this.parser&&(this.parser.parseText(or),!0)}parseClose(or){return this.parser?(this.parser.parseClose(or)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../base-xform");function cr(or,ur){return or?ur:void 0}function lr(or,ur){return or===ur||void 0}nr.exports=class extends ar{get tag(){return"sheetProtection"}render(or,ur){if(ur){const hr={sheet:cr(ur.sheet,"1"),selectLockedCells:ur.selectLockedCells===!1?"1":void 0,selectUnlockedCells:ur.selectUnlockedCells===!1?"1":void 0,formatCells:cr(ur.formatCells,"0"),formatColumns:cr(ur.formatColumns,"0"),formatRows:cr(ur.formatRows,"0"),insertColumns:cr(ur.insertColumns,"0"),insertRows:cr(ur.insertRows,"0"),insertHyperlinks:cr(ur.insertHyperlinks,"0"),deleteColumns:cr(ur.deleteColumns,"0"),deleteRows:cr(ur.deleteRows,"0"),sort:cr(ur.sort,"0"),autoFilter:cr(ur.autoFilter,"0"),pivotTables:cr(ur.pivotTables,"0")};ur.sheet&&(hr.algorithmName=ur.algorithmName,hr.hashValue=ur.hashValue,hr.saltValue=ur.saltValue,hr.spinCount=ur.spinCount,hr.objects=cr(ur.objects===!1,"1"),hr.scenarios=cr(ur.scenarios===!1,"1")),sr.some(hr,dr=>dr!==void 0)&&or.leafNode(this.tag,hr)}}parseOpen(or){switch(or.name){case this.tag:return this.model={sheet:lr(or.attributes.sheet,"1"),objects:or.attributes.objects!=="1"&&void 0,scenarios:or.attributes.scenarios!=="1"&&void 0,selectLockedCells:or.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:or.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:lr(or.attributes.formatCells,"0"),formatColumns:lr(or.attributes.formatColumns,"0"),formatRows:lr(or.attributes.formatRows,"0"),insertColumns:lr(or.attributes.insertColumns,"0"),insertRows:lr(or.attributes.insertRows,"0"),insertHyperlinks:lr(or.attributes.insertHyperlinks,"0"),deleteColumns:lr(or.attributes.deleteColumns,"0"),deleteRows:lr(or.attributes.deleteRows,"0"),sort:lr(or.attributes.sort,"0"),autoFilter:lr(or.attributes.autoFilter,"0"),pivotTables:lr(or.attributes.pivotTables,"0")},or.attributes.algorithmName&&(this.model.algorithmName=or.attributes.algorithmName,this.model.hashValue=or.attributes.hashValue,this.model.saltValue=or.attributes.saltValue,this.model.spinCount=parseInt(or.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(rr,nr,ir){const sr=rr("../../../utils/col-cache"),ar=rr("../base-xform"),cr={frozen:"frozen",frozenSplit:"frozen",split:"split"};nr.exports=class extends ar{get tag(){return"sheetView"}prepare(lr){switch(lr.state){case"frozen":case"split":break;default:lr.state="normal"}}render(lr,or){lr.openNode("sheetView",{workbookViewId:or.workbookViewId||0});const ur=function(br,pr,mr){mr&&lr.addAttribute(br,pr)};let hr,dr,fr,gr;switch(ur("rightToLeft","1",or.rightToLeft===!0),ur("tabSelected","1",or.tabSelected),ur("showRuler","0",or.showRuler===!1),ur("showRowColHeaders","0",or.showRowColHeaders===!1),ur("showGridLines","0",or.showGridLines===!1),ur("zoomScale",or.zoomScale,or.zoomScale),ur("zoomScaleNormal",or.zoomScaleNormal,or.zoomScaleNormal),ur("view",or.style,or.style),or.state){case"frozen":dr=or.xSplit||0,fr=or.ySplit||0,hr=or.topLeftCell||sr.getAddress(fr+1,dr+1).address,gr=(or.xSplit&&or.ySplit?"bottomRight":or.xSplit&&"topRight")||"bottomLeft",lr.leafNode("pane",{xSplit:or.xSplit||void 0,ySplit:or.ySplit||void 0,topLeftCell:hr,activePane:gr,state:"frozen"}),lr.leafNode("selection",{pane:gr,activeCell:or.activeCell,sqref:or.activeCell});break;case"split":or.activePane==="topLeft"&&(or.activePane=void 0),lr.leafNode("pane",{xSplit:or.xSplit||void 0,ySplit:or.ySplit||void 0,topLeftCell:or.topLeftCell,activePane:or.activePane}),lr.leafNode("selection",{pane:or.activePane,activeCell:or.activeCell,sqref:or.activeCell});break;case"normal":or.activeCell&&lr.leafNode("selection",{activeCell:or.activeCell,sqref:or.activeCell})}lr.closeNode()}parseOpen(lr){switch(lr.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(lr.attributes.workbookViewId,10),rightToLeft:lr.attributes.rightToLeft==="1",tabSelected:lr.attributes.tabSelected==="1",showRuler:lr.attributes.showRuler!=="0",showRowColHeaders:lr.attributes.showRowColHeaders!=="0",showGridLines:lr.attributes.showGridLines!=="0",zoomScale:parseInt(lr.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(lr.attributes.zoomScaleNormal||"100",10),style:lr.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(lr.attributes.xSplit||"0",10),ySplit:parseInt(lr.attributes.ySplit||"0",10),topLeftCell:lr.attributes.topLeftCell,activePane:lr.attributes.activePane||"topLeft",state:lr.attributes.state},!0;case"selection":{const or=lr.attributes.pane||"topLeft";return this.selections[or]={pane:or,activeCell:lr.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(lr){let or,ur;switch(lr){case"sheetView":return this.sheetView&&this.pane?(or=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:cr[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(or.activePane=this.pane.activePane),ur=this.selections[this.pane.activePane],ur&&ur.activeCell&&(or.activeCell=ur.activeCell),this.sheetView.style&&(or.style=this.sheetView.style)):(or=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},ur=this.selections.topLeft,ur&&ur.activeCell&&(or.activeCell=ur.activeCell),this.sheetView.style&&(or.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"tablePart"}render(ar,cr){cr&&ar.leafNode(this.tag,{"r:id":cr.rId})}parseOpen(ar){switch(ar.name){case this.tag:return this.model={rId:ar.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../../../utils/col-cache"),cr=rr("../../../utils/xml-stream"),lr=rr("../../rel-type"),or=rr("./merges"),ur=rr("../base-xform"),hr=rr("../list-xform"),dr=rr("./row-xform"),fr=rr("./col-xform"),gr=rr("./dimension-xform"),br=rr("./hyperlink-xform"),pr=rr("./merge-cell-xform"),mr=rr("./data-validations-xform"),yr=rr("./sheet-properties-xform"),xr=rr("./sheet-format-properties-xform"),vr=rr("./sheet-view-xform"),_r=rr("./sheet-protection-xform"),Er=rr("./page-margins-xform"),Tr=rr("./page-setup-xform"),Rr=rr("./print-options-xform"),Nr=rr("./auto-filter-xform"),Dr=rr("./picture-xform"),Ir=rr("./drawing-xform"),Or=rr("./table-part-xform"),jr=rr("./row-breaks-xform"),Lr=rr("./header-footer-xform"),Cr=rr("./cf/conditional-formattings-xform"),wr=rr("./ext-lst-xform"),Pr=(Sr,Mr)=>{if(!Mr||!Mr.length)return Sr;if(!Sr||!Sr.length)return Mr;const qr={},$r={};return Sr.forEach(Br=>{qr[Br.ref]=Br,Br.rules.forEach(zr=>{const{x14Id:Gr}=zr;Gr&&($r[Gr]=zr)})}),Mr.forEach(Br=>{Br.rules.forEach(zr=>{const Gr=$r[zr.x14Id];Gr?((Vr,Xr)=>{Object.keys(Xr).forEach(Ur=>{const Fr=Vr[Ur],Kr=Xr[Ur];Fr===void 0&&Kr!==void 0&&(Vr[Ur]=Kr)})})(Gr,zr):qr[Br.ref]?qr[Br.ref].rules.push(zr):Sr.push({ref:Br.ref,rules:[zr]})})}),Sr};class Ar extends ur{constructor(Mr){super();const{maxRows:qr,maxCols:$r,ignoreNodes:Br}=Mr||{};this.ignoreNodes=Br||[],this.map={sheetPr:new yr,dimension:new gr,sheetViews:new hr({tag:"sheetViews",count:!1,childXform:new vr}),sheetFormatPr:new xr,cols:new hr({tag:"cols",count:!1,childXform:new fr}),sheetData:new hr({tag:"sheetData",count:!1,empty:!0,childXform:new dr({maxItems:$r}),maxItems:qr}),autoFilter:new Nr,mergeCells:new hr({tag:"mergeCells",count:!0,childXform:new pr}),rowBreaks:new jr,hyperlinks:new hr({tag:"hyperlinks",count:!1,childXform:new br}),pageMargins:new Er,dataValidations:new mr,pageSetup:new Tr,headerFooter:new Lr,printOptions:new Rr,picture:new Dr,drawing:new Ir,sheetProtection:new _r,tableParts:new hr({tag:"tableParts",count:!0,childXform:new Or}),conditionalFormatting:new Cr,extLst:new wr}}prepare(Mr,qr){qr.merges=new or,Mr.hyperlinks=qr.hyperlinks=[],Mr.comments=qr.comments=[],qr.formulae={},qr.siFormulae=0,this.map.cols.prepare(Mr.cols,qr),this.map.sheetData.prepare(Mr.rows,qr),this.map.conditionalFormatting.prepare(Mr.conditionalFormattings,qr),Mr.mergeCells=qr.merges.mergeCells;const $r=Mr.rels=[];function Br(Vr){return"rId"+(Vr.length+1)}if(Mr.hyperlinks.forEach(Vr=>{const Xr=Br($r);Vr.rId=Xr,$r.push({Id:Xr,Type:lr.Hyperlink,Target:Vr.target,TargetMode:"External"})}),Mr.comments.length>0){const Vr={Id:Br($r),Type:lr.Comments,Target:`../comments${Mr.id}.xml`};$r.push(Vr);const Xr={Id:Br($r),Type:lr.VmlDrawing,Target:`../drawings/vmlDrawing${Mr.id}.vml`};$r.push(Xr),Mr.comments.forEach(Ur=>{Ur.refAddress=ar.decodeAddress(Ur.ref)}),qr.commentRefs.push({commentName:"comments"+Mr.id,vmlDrawing:"vmlDrawing"+Mr.id})}const zr=[];let Gr;Mr.media.forEach(Vr=>{if(Vr.type==="background"){const Xr=Br($r);Gr=qr.media[Vr.imageId],$r.push({Id:Xr,Type:lr.Image,Target:`../media/${Gr.name}.${Gr.extension}`}),Mr.background={rId:Xr},Mr.image=qr.media[Vr.imageId]}else if(Vr.type==="image"){let{drawing:Xr}=Mr;Gr=qr.media[Vr.imageId],Xr||(Xr=Mr.drawing={rId:Br($r),name:"drawing"+ ++qr.drawingsCount,anchors:[],rels:[]},qr.drawings.push(Xr),$r.push({Id:Xr.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${Xr.name}.xml`}));let Ur=this.preImageId===Vr.imageId?zr[Vr.imageId]:zr[Xr.rels.length];Ur||(Ur=Br(Xr.rels),zr[Xr.rels.length]=Ur,Xr.rels.push({Id:Ur,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${Gr.name}.${Gr.extension}`}));const Fr={picture:{rId:Ur},range:Vr.range};if(Vr.hyperlinks&&Vr.hyperlinks.hyperlink){const Kr=Br(Xr.rels);zr[Xr.rels.length]=Kr,Fr.picture.hyperlinks={tooltip:Vr.hyperlinks.tooltip,rId:Kr},Xr.rels.push({Id:Kr,Type:lr.Hyperlink,Target:Vr.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=Vr.imageId,Xr.anchors.push(Fr)}}),Mr.tables.forEach(Vr=>{const Xr=Br($r);Vr.rId=Xr,$r.push({Id:Xr,Type:lr.Table,Target:"../tables/"+Vr.target}),Vr.columns.forEach(Ur=>{const{style:Fr}=Ur;Fr&&(Ur.dxfId=qr.styles.addDxfStyle(Fr))})}),this.map.extLst.prepare(Mr,qr)}render(Mr,qr){Mr.openXml(cr.StdDocAttributes),Mr.openNode("worksheet",Ar.WORKSHEET_ATTRIBUTES);const $r=qr.properties?{defaultRowHeight:qr.properties.defaultRowHeight,dyDescent:qr.properties.dyDescent,outlineLevelCol:qr.properties.outlineLevelCol,outlineLevelRow:qr.properties.outlineLevelRow}:void 0;qr.properties&&qr.properties.defaultColWidth&&($r.defaultColWidth=qr.properties.defaultColWidth);const Br={outlineProperties:qr.properties&&qr.properties.outlineProperties,tabColor:qr.properties&&qr.properties.tabColor,pageSetup:qr.pageSetup&&qr.pageSetup.fitToPage?{fitToPage:qr.pageSetup.fitToPage}:void 0},zr=qr.pageSetup&&qr.pageSetup.margins,Gr={showRowColHeaders:qr.pageSetup&&qr.pageSetup.showRowColHeaders,showGridLines:qr.pageSetup&&qr.pageSetup.showGridLines,horizontalCentered:qr.pageSetup&&qr.pageSetup.horizontalCentered,verticalCentered:qr.pageSetup&&qr.pageSetup.verticalCentered},Vr=qr.sheetProtection;this.map.sheetPr.render(Mr,Br),this.map.dimension.render(Mr,qr.dimensions),this.map.sheetViews.render(Mr,qr.views),this.map.sheetFormatPr.render(Mr,$r),this.map.cols.render(Mr,qr.cols),this.map.sheetData.render(Mr,qr.rows),this.map.sheetProtection.render(Mr,Vr),this.map.autoFilter.render(Mr,qr.autoFilter),this.map.mergeCells.render(Mr,qr.mergeCells),this.map.conditionalFormatting.render(Mr,qr.conditionalFormattings),this.map.dataValidations.render(Mr,qr.dataValidations),this.map.hyperlinks.render(Mr,qr.hyperlinks),this.map.printOptions.render(Mr,Gr),this.map.pageMargins.render(Mr,zr),this.map.pageSetup.render(Mr,qr.pageSetup),this.map.headerFooter.render(Mr,qr.headerFooter),this.map.rowBreaks.render(Mr,qr.rowBreaks),this.map.drawing.render(Mr,qr.drawing),this.map.picture.render(Mr,qr.background),this.map.tableParts.render(Mr,qr.tables),this.map.extLst.render(Mr,qr),qr.rels&&qr.rels.forEach(Xr=>{Xr.Type===lr.VmlDrawing&&Mr.leafNode("legacyDrawing",{"r:id":Xr.Id})}),Mr.closeNode()}parseOpen(Mr){return this.parser?(this.parser.parseOpen(Mr),!0):Mr.name==="worksheet"?(sr.each(this.map,qr=>{qr.reset()}),!0):(this.map[Mr.name]&&!this.ignoreNodes.includes(Mr.name)&&(this.parser=this.map[Mr.name],this.parser.parseOpen(Mr)),!0)}parseText(Mr){this.parser&&this.parser.parseText(Mr)}parseClose(Mr){if(this.parser)return this.parser.parseClose(Mr)||(this.parser=void 0),!0;switch(Mr){case"worksheet":{const qr=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(qr.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(qr.outlineProperties=this.map.sheetPr.model.outlineProperties);const $r={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},Br=Object.assign($r,this.map.pageSetup.model,this.map.printOptions.model),zr=Pr(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:qr,views:this.map.sheetViews.model,pageSetup:Br,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:zr},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(Mr,qr){const $r=(Mr.relationships||[]).reduce((zr,Gr)=>{if(zr[Gr.Id]=Gr,Gr.Type===lr.Comments&&(Mr.comments=qr.comments[Gr.Target].comments),Gr.Type===lr.VmlDrawing&&Mr.comments&&Mr.comments.length){const Vr=qr.vmlDrawings[Gr.Target].comments;Mr.comments.forEach((Xr,Ur)=>{Xr.note=Object.assign({},Xr.note,Vr[Ur])})}return zr},{});if(qr.commentsMap=(Mr.comments||[]).reduce((zr,Gr)=>(Gr.ref&&(zr[Gr.ref]=Gr),zr),{}),qr.hyperlinkMap=(Mr.hyperlinks||[]).reduce((zr,Gr)=>(Gr.rId&&(zr[Gr.address]=$r[Gr.rId].Target),zr),{}),qr.formulae={},Mr.rows=Mr.rows&&Mr.rows.filter(Boolean)||[],Mr.rows.forEach(zr=>{zr.cells=zr.cells&&zr.cells.filter(Boolean)||[]}),this.map.cols.reconcile(Mr.cols,qr),this.map.sheetData.reconcile(Mr.rows,qr),this.map.conditionalFormatting.reconcile(Mr.conditionalFormattings,qr),Mr.media=[],Mr.drawing){const zr=$r[Mr.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(zr){const Gr=zr[1];qr.drawings[Gr].anchors.forEach(Vr=>{if(Vr.medium){const Xr={type:"image",imageId:Vr.medium.index,range:Vr.range,hyperlinks:Vr.picture.hyperlinks};Mr.media.push(Xr)}})}}const Br=Mr.background&&$r[Mr.background.rId];if(Br){const zr=Br.Target.split("/media/")[1],Gr=qr.mediaIndex&&qr.mediaIndex[zr];Gr!==void 0&&Mr.media.push({type:"background",imageId:Gr})}Mr.tables=(Mr.tables||[]).map(zr=>{const Gr=$r[zr.rId];return qr.tables[Gr.Target]}),delete Mr.relationships,delete Mr.hyperlinks,delete Mr.comments}}Ar.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},nr.exports=Ar},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.attr=ar.attr}render(ar,cr){cr&&(ar.openNode(this.tag),ar.closeNode())}parseOpen(ar){ar.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.attr=ar.attr,this.attrs=ar.attrs,this._format=ar.format||function(cr){try{return Number.isNaN(cr.getTime())?"":cr.toISOString()}catch{return""}},this._parse=ar.parse||function(cr){return new Date(cr)}}render(ar,cr){cr&&(ar.openNode(this.tag),this.attrs&&ar.addAttributes(this.attrs),this.attr?ar.addAttribute(this.attr,this._format(cr)):ar.writeText(this._format(cr)),ar.closeNode())}parseOpen(ar){ar.name===this.tag&&(this.attr?this.model=this._parse(ar.attributes[this.attr]):this.text=[])}parseText(ar){this.attr||this.text.push(ar)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.attr=ar.attr,this.attrs=ar.attrs,this.zero=ar.zero}render(ar,cr){(cr||this.zero)&&(ar.openNode(this.tag),this.attrs&&ar.addAttributes(this.attrs),this.attr?ar.addAttribute(this.attr,cr):ar.writeText(cr),ar.closeNode())}parseOpen(ar){return ar.name===this.tag&&(this.attr?this.model=parseInt(ar.attributes[this.attr],10):this.text=[],!0)}parseText(ar){this.attr||this.text.push(ar)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.tag=ar.tag,this.attr=ar.attr,this.attrs=ar.attrs}render(ar,cr){cr!==void 0&&(ar.openNode(this.tag),this.attrs&&ar.addAttributes(this.attrs),this.attr?ar.addAttribute(this.attr,cr):ar.writeText(cr),ar.closeNode())}parseOpen(ar){ar.name===this.tag&&(this.attr?this.model=ar.attributes[this.attr]:this.text=[])}parseText(ar){this.attr||this.text.push(ar)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(rr,nr,ir){const sr=rr("./base-xform"),ar=rr("../../utils/xml-stream");nr.exports=class extends sr{constructor(cr){super(),this._model=cr}render(cr){if(!this._xml){const lr=new ar;(function or(ur,hr){ur.openNode(hr.tag,hr.$),hr.c&&hr.c.forEach(dr=>{or(ur,dr)}),hr.t&&ur.writeText(hr.t),ur.closeNode()})(lr,this._model),this._xml=lr.xml}cr.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(cr){switch(cr){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(rr,nr,ir){const sr=rr("./text-xform"),ar=rr("./rich-text-xform"),cr=rr("../base-xform");nr.exports=class extends cr{constructor(){super(),this.map={r:new ar,t:new sr}}get tag(){return"rPh"}render(lr,or){if(lr.openNode(this.tag,{sb:or.sb||0,eb:or.eb||0}),or&&or.hasOwnProperty("richText")&&or.richText){const{r:ur}=this.map;or.richText.forEach(hr=>{ur.render(lr,hr)})}else or&&this.map.t.render(lr,or.text);lr.closeNode()}parseOpen(lr){const{name:or}=lr;return this.parser?(this.parser.parseOpen(lr),!0):or===this.tag?(this.model={sb:parseInt(lr.attributes.sb,10),eb:parseInt(lr.attributes.eb,10)},!0):(this.parser=this.map[or],!!this.parser&&(this.parser.parseOpen(lr),!0))}parseText(lr){this.parser&&this.parser.parseText(lr)}parseClose(lr){if(this.parser){if(!this.parser.parseClose(lr)){switch(lr){case"r":{let or=this.model.richText;or||(or=this.model.richText=[]),or.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(lr){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(rr,nr,ir){const sr=rr("./text-xform"),ar=rr("../style/font-xform"),cr=rr("../base-xform");class lr extends cr{constructor(ur){super(),this.model=ur}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new sr)}get fontXform(){return this._fontXform||(this._fontXform=new ar(lr.FONT_OPTIONS))}render(ur,hr){hr=hr||this.model,ur.openNode("r"),hr.font&&this.fontXform.render(ur,hr.font),this.textXform.render(ur,hr.text),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(ur),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(ur),!0;default:return!1}}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){switch(ur){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(ur),!0}}}lr.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},nr.exports=lr},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(rr,nr,ir){const sr=rr("./text-xform"),ar=rr("./rich-text-xform"),cr=rr("./phonetic-text-xform"),lr=rr("../base-xform");nr.exports=class extends lr{constructor(or){super(),this.model=or,this.map={r:new ar,t:new sr,rPh:new cr}}get tag(){return"si"}render(or,ur){or.openNode(this.tag),ur&&ur.hasOwnProperty("richText")&&ur.richText?ur.richText.length?ur.richText.forEach(hr=>{this.map.r.render(or,hr)}):this.map.t.render(or,""):ur!=null&&this.map.t.render(or,ur),or.closeNode()}parseOpen(or){const{name:ur}=or;return this.parser?(this.parser.parseOpen(or),!0):ur===this.tag?(this.model={},!0):(this.parser=this.map[ur],!!this.parser&&(this.parser.parseOpen(or),!0))}parseText(or){this.parser&&this.parser.parseText(or)}parseClose(or){if(this.parser){if(!this.parser.parseClose(or)){switch(or){case"r":{let ur=this.model.richText;ur||(ur=this.model.richText=[]),ur.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(or){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("./shared-string-xform");nr.exports=class extends ar{constructor(lr){super(),this.model=lr||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new cr)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(lr){return this.model.values[lr]}add(lr){return lr.richText?this.addRichText(lr):this.addText(lr)}addText(lr){let or=this.hash[lr];return or===void 0&&(or=this.hash[lr]=this.model.values.length,this.model.values.push(lr)),this.model.count++,or}addRichText(lr){const or=this.sharedStringXform.toXml(lr);let ur=this.rich[or];return ur===void 0&&(ur=this.rich[or]=this.model.values.length,this.model.values.push(lr)),this.model.count++,ur}render(lr,or){or=or||this._values,lr.openXml(sr.StdDocAttributes),lr.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:or.count,uniqueCount:or.values.length});const ur=this.sharedStringXform;or.values.forEach(hr=>{ur.render(lr,hr)}),lr.closeNode()}parseOpen(lr){if(this.parser)return this.parser.parseOpen(lr),!0;switch(lr.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(lr),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(lr))}}parseText(lr){this.parser&&this.parser.parseText(lr)}parseClose(lr){if(this.parser)return this.parser.parseClose(lr)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(lr){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+lr)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"t"}render(ar,cr){ar.openNode("t"),/^\s|\n|\s$/.test(cr)&&ar.addAttribute("xml:space","preserve"),ar.writeText(cr),ar.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(ar,cr)=>String.fromCharCode(parseInt(cr,16)))}parseOpen(ar){switch(ar.name){case"t":return this._text=[],!0;default:return!1}}parseText(ar){this._text.push(ar)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(rr,nr,ir){const sr=rr("../../../doc/enums"),ar=rr("../../../utils/utils"),cr=rr("../base-xform"),lr={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((ur,hr)=>(ur[hr]=!0,ur),{}),horizontal(ur){return this.horizontalValues[ur]?ur:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((ur,hr)=>(ur[hr]=!0,ur),{}),vertical(ur){return ur==="middle"?"center":this.verticalValues[ur]?ur:void 0},wrapText:ur=>!!ur||void 0,shrinkToFit:ur=>!!ur||void 0,textRotation(ur){switch(ur){case"vertical":return ur;default:return(ur=ar.validInt(ur))>=-90&&ur<=90?ur:void 0}},indent:ur=>(ur=ar.validInt(ur),Math.max(0,ur)),readingOrder(ur){switch(ur){case"ltr":return sr.ReadingOrder.LeftToRight;case"rtl":return sr.ReadingOrder.RightToLeft;default:return}}},or={toXml(ur){if(ur=lr.textRotation(ur)){if(ur==="vertical")return 255;const hr=Math.round(ur);if(hr>=0&&hr<=90)return hr;if(hr<0&&hr>=-90)return 90-hr}},toModel(ur){const hr=ar.validInt(ur);if(hr!==void 0){if(hr===255)return"vertical";if(hr>=0&&hr<=90)return hr;if(hr>90&&hr<=180)return 90-hr}}};nr.exports=class extends cr{get tag(){return"alignment"}render(ur,hr){ur.addRollback(),ur.openNode("alignment");let dr=!1;function fr(gr,br){br&&(ur.addAttribute(gr,br),dr=!0)}fr("horizontal",lr.horizontal(hr.horizontal)),fr("vertical",lr.vertical(hr.vertical)),fr("wrapText",!!lr.wrapText(hr.wrapText)&&"1"),fr("shrinkToFit",!!lr.shrinkToFit(hr.shrinkToFit)&&"1"),fr("indent",lr.indent(hr.indent)),fr("textRotation",or.toXml(hr.textRotation)),fr("readingOrder",lr.readingOrder(hr.readingOrder)),ur.closeNode(),dr?ur.commit():ur.rollback()}parseOpen(ur){const hr={};let dr=!1;function fr(gr,br,pr){gr&&(hr[br]=pr,dr=!0)}fr(ur.attributes.horizontal,"horizontal",ur.attributes.horizontal),fr(ur.attributes.vertical,"vertical",ur.attributes.vertical==="center"?"middle":ur.attributes.vertical),fr(ur.attributes.wrapText,"wrapText",ar.parseBoolean(ur.attributes.wrapText)),fr(ur.attributes.shrinkToFit,"shrinkToFit",ar.parseBoolean(ur.attributes.shrinkToFit)),fr(ur.attributes.indent,"indent",parseInt(ur.attributes.indent,10)),fr(ur.attributes.textRotation,"textRotation",or.toModel(ur.attributes.textRotation)),fr(ur.attributes.readingOrder,"readingOrder",ur.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=dr?hr:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../../../utils/utils"),cr=rr("./color-xform");class lr extends sr{constructor(ur){super(),this.name=ur,this.map={color:new cr}}get tag(){return this.name}render(ur,hr,dr){const fr=hr&&hr.color||dr||this.defaultColor;ur.openNode(this.name),hr&&hr.style&&(ur.addAttribute("style",hr.style),fr&&this.map.color.render(ur,fr)),ur.closeNode()}parseOpen(ur){if(this.parser)return this.parser.parseOpen(ur),!0;switch(ur.name){case this.name:{const{style:hr}=ur.attributes;return this.model=hr?{style:hr}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(ur),!0;default:return!1}}parseText(ur){this.parser&&this.parser.parseText(ur)}parseClose(ur){return this.parser?(this.parser.parseClose(ur)||(this.parser=void 0),!0):(ur===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(ur){return lr.validStyleValues[ur]}}lr.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((or,ur)=>(or[ur]=!0,or),{}),nr.exports=class extends sr{constructor(){super(),this.map={top:new lr("top"),left:new lr("left"),bottom:new lr("bottom"),right:new lr("right"),diagonal:new lr("diagonal")}}render(or,ur){const{color:hr}=ur;function dr(fr,gr){fr&&!fr.color&&ur.color&&(fr={...fr,color:ur.color}),gr.render(or,fr,hr)}or.openNode("border"),ur.diagonal&&ur.diagonal.style&&(ur.diagonal.up&&or.addAttribute("diagonalUp","1"),ur.diagonal.down&&or.addAttribute("diagonalDown","1")),dr(ur.left,this.map.left),dr(ur.right,this.map.right),dr(ur.top,this.map.top),dr(ur.bottom,this.map.bottom),dr(ur.diagonal,this.map.diagonal),or.closeNode()}parseOpen(or){if(this.parser)return this.parser.parseOpen(or),!0;switch(or.name){case"border":return this.reset(),this.diagonalUp=ar.parseBoolean(or.attributes.diagonalUp),this.diagonalDown=ar.parseBoolean(or.attributes.diagonalDown),!0;default:return this.parser=this.map[or.name],!!this.parser&&(this.parser.parseOpen(or),!0)}}parseText(or){this.parser&&this.parser.parseText(or)}parseClose(or){if(this.parser)return this.parser.parseClose(or)||(this.parser=void 0),!0;if(or==="border"){const ur=this.model={},hr=function(dr,fr,gr){fr&&(gr&&Object.assign(fr,gr),ur[dr]=fr)};hr("left",this.map.left.model),hr("right",this.map.right.model),hr("top",this.map.top.model),hr("bottom",this.map.bottom.model),hr("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{constructor(ar){super(),this.name=ar||"color"}get tag(){return this.name}render(ar,cr){return!!cr&&(ar.openNode(this.name),cr.argb?ar.addAttribute("rgb",cr.argb):cr.theme!==void 0?(ar.addAttribute("theme",cr.theme),cr.tint!==void 0&&ar.addAttribute("tint",cr.tint)):cr.indexed!==void 0?ar.addAttribute("indexed",cr.indexed):ar.addAttribute("auto","1"),ar.closeNode(),!0)}parseOpen(ar){return ar.name===this.name&&(ar.attributes.rgb?this.model={argb:ar.attributes.rgb}:ar.attributes.theme?(this.model={theme:parseInt(ar.attributes.theme,10)},ar.attributes.tint&&(this.model.tint=parseFloat(ar.attributes.tint))):ar.attributes.indexed?this.model={indexed:parseInt(ar.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./alignment-xform"),cr=rr("./border-xform"),lr=rr("./fill-xform"),or=rr("./font-xform"),ur=rr("./numfmt-xform"),hr=rr("./protection-xform");nr.exports=class extends sr{constructor(){super(),this.map={alignment:new ar,border:new cr,fill:new lr,font:new or,numFmt:new ur,protection:new hr}}get tag(){return"dxf"}render(dr,fr){if(dr.openNode(this.tag),fr.font&&this.map.font.render(dr,fr.font),fr.numFmt&&fr.numFmtId){const gr={id:fr.numFmtId,formatCode:fr.numFmt};this.map.numFmt.render(dr,gr)}fr.fill&&this.map.fill.render(dr,fr.fill),fr.alignment&&this.map.alignment.render(dr,fr.alignment),fr.border&&this.map.border.render(dr,fr.border),fr.protection&&this.map.protection.render(dr,fr.protection),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[dr.name],this.parser&&this.parser.parseOpen(dr),!0}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){return this.parser?(this.parser.parseClose(dr)||(this.parser=void 0),!0):dr!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./color-xform");class cr extends sr{constructor(){super(),this.map={color:new ar}}get tag(){return"stop"}render(dr,fr){dr.openNode("stop"),dr.addAttribute("position",fr.position),this.map.color.render(dr,fr.color),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"stop":return this.model={position:parseFloat(dr.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(dr),!0;default:return!1}}parseText(){}parseClose(dr){return!!this.parser&&(this.parser.parseClose(dr)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class lr extends sr{constructor(){super(),this.map={fgColor:new ar("fgColor"),bgColor:new ar("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(dr,fr){dr.openNode("patternFill"),dr.addAttribute("patternType",fr.pattern),fr.fgColor&&this.map.fgColor.render(dr,fr.fgColor),fr.bgColor&&this.map.bgColor.render(dr,fr.bgColor),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"patternFill":return this.model={type:"pattern",pattern:dr.attributes.patternType},!0;default:return this.parser=this.map[dr.name],!!this.parser&&(this.parser.parseOpen(dr),!0)}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){return!!this.parser&&(this.parser.parseClose(dr)||(this.parser.model&&(this.model[dr]=this.parser.model),this.parser=void 0),!0)}}class or extends sr{constructor(){super(),this.map={stop:new cr}}get name(){return"gradient"}get tag(){return"gradientFill"}render(dr,fr){switch(dr.openNode("gradientFill"),fr.gradient){case"angle":dr.addAttribute("degree",fr.degree);break;case"path":dr.addAttribute("type","path"),fr.center.left&&(dr.addAttribute("left",fr.center.left),fr.center.right===void 0&&dr.addAttribute("right",fr.center.left)),fr.center.right&&dr.addAttribute("right",fr.center.right),fr.center.top&&(dr.addAttribute("top",fr.center.top),fr.center.bottom===void 0&&dr.addAttribute("bottom",fr.center.top)),fr.center.bottom&&dr.addAttribute("bottom",fr.center.bottom)}const gr=this.map.stop;fr.stops.forEach(br=>{gr.render(dr,br)}),dr.closeNode()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"gradientFill":{const fr=this.model={stops:[]};return dr.attributes.degree?(fr.gradient="angle",fr.degree=parseInt(dr.attributes.degree,10)):dr.attributes.type==="path"&&(fr.gradient="path",fr.center={left:dr.attributes.left?parseFloat(dr.attributes.left):0,top:dr.attributes.top?parseFloat(dr.attributes.top):0},dr.attributes.right!==dr.attributes.left&&(fr.center.right=dr.attributes.right?parseFloat(dr.attributes.right):0),dr.attributes.bottom!==dr.attributes.top&&(fr.center.bottom=dr.attributes.bottom?parseFloat(dr.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(dr),!0;default:return!1}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){return!!this.parser&&(this.parser.parseClose(dr)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class ur extends sr{constructor(){super(),this.map={patternFill:new lr,gradientFill:new or}}get tag(){return"fill"}render(dr,fr){switch(dr.addRollback(),dr.openNode("fill"),fr.type){case"pattern":this.map.patternFill.render(dr,fr);break;case"gradient":this.map.gradientFill.render(dr,fr);break;default:return void dr.rollback()}dr.closeNode(),dr.commit()}parseOpen(dr){if(this.parser)return this.parser.parseOpen(dr),!0;switch(dr.name){case"fill":return this.model={},!0;default:return this.parser=this.map[dr.name],!!this.parser&&(this.parser.parseOpen(dr),!0)}}parseText(dr){this.parser&&this.parser.parseText(dr)}parseClose(dr){return!!this.parser&&(this.parser.parseClose(dr)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(dr){return ur.validPatternValues[dr]}}ur.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((hr,dr)=>(hr[dr]=!0,hr),{}),ur.StopXform=cr,ur.PatternFillXform=lr,ur.GradientFillXform=or,nr.exports=ur},{"../base-xform":32,"./color-xform":128}],131:[function(rr,nr,ir){const sr=rr("./color-xform"),ar=rr("../simple/boolean-xform"),cr=rr("../simple/integer-xform"),lr=rr("../simple/string-xform"),or=rr("./underline-xform"),ur=rr("../../../utils/under-dash"),hr=rr("../base-xform");class dr extends hr{constructor(gr){super(),this.options=gr||dr.OPTIONS,this.map={b:{prop:"bold",xform:new ar({tag:"b",attr:"val"})},i:{prop:"italic",xform:new ar({tag:"i",attr:"val"})},u:{prop:"underline",xform:new or},charset:{prop:"charset",xform:new cr({tag:"charset",attr:"val"})},color:{prop:"color",xform:new sr},condense:{prop:"condense",xform:new ar({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new ar({tag:"extend",attr:"val"})},family:{prop:"family",xform:new cr({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new ar({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new lr({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new lr({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new ar({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new ar({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new cr({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new lr({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(gr,br){const{map:pr}=this;gr.openNode(this.options.tagName),ur.each(this.map,(mr,yr)=>{pr[yr].xform.render(gr,br[mr.prop])}),gr.closeNode()}parseOpen(gr){if(this.parser)return this.parser.parseOpen(gr),!0;if(this.map[gr.name])return this.parser=this.map[gr.name].xform,this.parser.parseOpen(gr);switch(gr.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(gr){this.parser&&this.parser.parseText(gr)}parseClose(gr){if(this.parser&&!this.parser.parseClose(gr)){const br=this.map[gr];return this.parser.model&&(this.model[br.prop]=this.parser.model),this.parser=void 0,!0}switch(gr){case this.options.tagName:return!1;default:return!0}}}dr.OPTIONS={tagName:"font",fontNameTag:"name"},nr.exports=dr},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(rr,nr,ir){const sr=rr("../../../utils/under-dash"),ar=rr("../../defaultnumformats"),cr=rr("../base-xform"),lr=function(){const ur={};return sr.each(ar,(hr,dr)=>{hr.f&&(ur[hr.f]=parseInt(dr,10))}),ur}();class or extends cr{constructor(hr,dr){super(),this.id=hr,this.formatCode=dr}get tag(){return"numFmt"}render(hr,dr){hr.leafNode("numFmt",{numFmtId:dr.id,formatCode:dr.formatCode})}parseOpen(hr){switch(hr.name){case"numFmt":return this.model={id:parseInt(hr.attributes.numFmtId,10),formatCode:hr.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}or.getDefaultFmtId=function(ur){return lr[ur]},or.getDefaultFmtCode=function(ur){return ar[ur]&&ar[ur].f},nr.exports=or},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(rr,nr,ir){const sr=rr("../base-xform"),ar={boolean:(cr,lr)=>cr===void 0?lr:cr};nr.exports=class extends sr{get tag(){return"protection"}render(cr,lr){cr.addRollback(),cr.openNode("protection");let or=!1;function ur(hr,dr){dr!==void 0&&(cr.addAttribute(hr,dr),or=!0)}ur("locked",ar.boolean(lr.locked,!0)?void 0:"0"),ur("hidden",ar.boolean(lr.hidden,!1)?"1":void 0),cr.closeNode(),or?cr.commit():cr.rollback()}parseOpen(cr){const lr={locked:cr.attributes.locked!=="0",hidden:cr.attributes.hidden==="1"},or=!lr.locked||lr.hidden;this.model=or?lr:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./alignment-xform"),cr=rr("./protection-xform");nr.exports=class extends sr{constructor(lr){super(),this.xfId=!(!lr||!lr.xfId),this.map={alignment:new ar,protection:new cr}}get tag(){return"xf"}render(lr,or){lr.openNode("xf",{numFmtId:or.numFmtId||0,fontId:or.fontId||0,fillId:or.fillId||0,borderId:or.borderId||0}),this.xfId&&lr.addAttribute("xfId",or.xfId||0),or.numFmtId&&lr.addAttribute("applyNumberFormat","1"),or.fontId&&lr.addAttribute("applyFont","1"),or.fillId&&lr.addAttribute("applyFill","1"),or.borderId&&lr.addAttribute("applyBorder","1"),or.alignment&&lr.addAttribute("applyAlignment","1"),or.protection&&lr.addAttribute("applyProtection","1"),or.alignment&&this.map.alignment.render(lr,or.alignment),or.protection&&this.map.protection.render(lr,or.protection),lr.closeNode()}parseOpen(lr){if(this.parser)return this.parser.parseOpen(lr),!0;switch(lr.name){case"xf":return this.model={numFmtId:parseInt(lr.attributes.numFmtId,10),fontId:parseInt(lr.attributes.fontId,10),fillId:parseInt(lr.attributes.fillId,10),borderId:parseInt(lr.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(lr.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(lr),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(lr),!0;default:return!1}}parseText(lr){this.parser&&this.parser.parseText(lr)}parseClose(lr){return this.parser?(this.parser.parseClose(lr)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):lr!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(rr,nr,ir){const sr=rr("../../../doc/enums"),ar=rr("../../../utils/xml-stream"),cr=rr("../base-xform"),lr=rr("../static-xform"),or=rr("../list-xform"),ur=rr("./font-xform"),hr=rr("./fill-xform"),dr=rr("./border-xform"),fr=rr("./numfmt-xform"),gr=rr("./style-xform"),br=rr("./dxf-xform");class pr extends cr{constructor(yr){super(),this.map={numFmts:new or({tag:"numFmts",count:!0,childXform:new fr}),fonts:new or({tag:"fonts",count:!0,childXform:new ur,$:{"x14ac:knownFonts":1}}),fills:new or({tag:"fills",count:!0,childXform:new hr}),borders:new or({tag:"borders",count:!0,childXform:new dr}),cellStyleXfs:new or({tag:"cellStyleXfs",count:!0,childXform:new gr}),cellXfs:new or({tag:"cellXfs",count:!0,childXform:new gr({xfId:!0})}),dxfs:new or({tag:"dxfs",always:!0,count:!0,childXform:new br}),numFmt:new fr,font:new ur,fill:new hr,border:new dr,style:new gr({xfId:!0}),cellStyles:pr.STATIC_XFORMS.cellStyles,tableStyles:pr.STATIC_XFORMS.tableStyles,extLst:pr.STATIC_XFORMS.extLst},yr&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(yr,xr){xr=xr||this.model,yr.openXml(ar.StdDocAttributes),yr.openNode("styleSheet",pr.STYLESHEET_ATTRIBUTES),this.index?(xr.numFmts&&xr.numFmts.length&&(yr.openNode("numFmts",{count:xr.numFmts.length}),xr.numFmts.forEach(vr=>{yr.writeXml(vr)}),yr.closeNode()),xr.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),yr.openNode("fonts",{count:xr.fonts.length,"x14ac:knownFonts":1}),xr.fonts.forEach(vr=>{yr.writeXml(vr)}),yr.closeNode(),yr.openNode("fills",{count:xr.fills.length}),xr.fills.forEach(vr=>{yr.writeXml(vr)}),yr.closeNode(),yr.openNode("borders",{count:xr.borders.length}),xr.borders.forEach(vr=>{yr.writeXml(vr)}),yr.closeNode(),this.map.cellStyleXfs.render(yr,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),yr.openNode("cellXfs",{count:xr.styles.length}),xr.styles.forEach(vr=>{yr.writeXml(vr)}),yr.closeNode()):(this.map.numFmts.render(yr,xr.numFmts),this.map.fonts.render(yr,xr.fonts),this.map.fills.render(yr,xr.fills),this.map.borders.render(yr,xr.borders),this.map.cellStyleXfs.render(yr,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(yr,xr.styles)),pr.STATIC_XFORMS.cellStyles.render(yr),this.map.dxfs.render(yr,xr.dxfs),pr.STATIC_XFORMS.tableStyles.render(yr),pr.STATIC_XFORMS.extLst.render(yr),yr.closeNode()}parseOpen(yr){if(this.parser)return this.parser.parseOpen(yr),!0;switch(yr.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[yr.name],this.parser&&this.parser.parseOpen(yr),!0}}parseText(yr){this.parser&&this.parser.parseText(yr)}parseClose(yr){if(this.parser)return this.parser.parseClose(yr)||(this.parser=void 0),!0;switch(yr){case"styleSheet":{this.model={};const xr=(vr,_r)=>{_r.model&&_r.model.length&&(this.model[vr]=_r.model)};if(xr("numFmts",this.map.numFmts),xr("fonts",this.map.fonts),xr("fills",this.map.fills),xr("borders",this.map.borders),xr("styles",this.map.cellXfs),xr("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const vr=this.index.numFmt;this.model.numFmts.forEach(_r=>{vr[_r.id]=_r.formatCode})}return!1}default:return!0}}addStyleModel(yr,xr){if(!yr)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(yr))return this.weakMap.get(yr);const vr={};if(xr=xr||sr.ValueType.Number,yr.numFmt)vr.numFmtId=this._addNumFmtStr(yr.numFmt);else switch(xr){case sr.ValueType.Number:vr.numFmtId=this._addNumFmtStr("General");break;case sr.ValueType.Date:vr.numFmtId=this._addNumFmtStr("mm-dd-yy")}yr.font&&(vr.fontId=this._addFont(yr.font)),yr.border&&(vr.borderId=this._addBorder(yr.border)),yr.fill&&(vr.fillId=this._addFill(yr.fill)),yr.alignment&&(vr.alignment=yr.alignment),yr.protection&&(vr.protection=yr.protection);const _r=this._addStyle(vr);return this.weakMap&&this.weakMap.set(yr,_r),_r}getStyleModel(yr){const xr=this.model.styles[yr];if(!xr)return null;let vr=this.index.model[yr];if(vr)return vr;if(vr=this.index.model[yr]={},xr.numFmtId){const Er=this.index.numFmt[xr.numFmtId]||fr.getDefaultFmtCode(xr.numFmtId);Er&&(vr.numFmt=Er)}function _r(Er,Tr,Rr){if(Rr||Rr===0){const Nr=Tr[Rr];Nr&&(vr[Er]=Nr)}}return _r("font",this.model.fonts,xr.fontId),_r("border",this.model.borders,xr.borderId),_r("fill",this.model.fills,xr.fillId),xr.alignment&&(vr.alignment=xr.alignment),xr.protection&&(vr.protection=xr.protection),vr}addDxfStyle(yr){return yr.numFmt&&(yr.numFmtId=this._addNumFmtStr(yr.numFmt)),this.model.dxfs.push(yr),this.model.dxfs.length-1}getDxfStyle(yr){return this.model.dxfs[yr]}_addStyle(yr){const xr=this.map.style.toXml(yr);let vr=this.index.style[xr];return vr===void 0&&(vr=this.index.style[xr]=this.model.styles.length,this.model.styles.push(xr)),vr}_addNumFmtStr(yr){let xr=fr.getDefaultFmtId(yr);if(xr!==void 0||(xr=this.index.numFmt[yr],xr!==void 0))return xr;xr=this.index.numFmt[yr]=164+this.model.numFmts.length;const vr=this.map.numFmt.toXml({id:xr,formatCode:yr});return this.model.numFmts.push(vr),xr}_addFont(yr){const xr=this.map.font.toXml(yr);let vr=this.index.font[xr];return vr===void 0&&(vr=this.index.font[xr]=this.model.fonts.length,this.model.fonts.push(xr)),vr}_addBorder(yr){const xr=this.map.border.toXml(yr);let vr=this.index.border[xr];return vr===void 0&&(vr=this.index.border[xr]=this.model.borders.length,this.model.borders.push(xr)),vr}_addFill(yr){const xr=this.map.fill.toXml(yr);let vr=this.index.fill[xr];return vr===void 0&&(vr=this.index.fill[xr]=this.model.fills.length,this.model.fills.push(xr)),vr}}pr.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},pr.STATIC_XFORMS={cellStyles:new lr({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new lr({tag:"dxfs",$:{count:0}}),tableStyles:new lr({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new lr({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},pr.Mock=class extends pr{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(mr){return mr.autodrain(),Promise.resolve()}addStyleModel(mr,yr){switch(yr){case sr.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const mr={numFmtId:fr.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(mr)}return this._dateStyleId}getStyleModel(){return{}}},nr.exports=pr},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(rr,nr,ir){const sr=rr("../base-xform");class ar extends sr{constructor(lr){super(),this.model=lr}get tag(){return"u"}render(lr,or){if((or=or||this.model)===!0)lr.leafNode("u");else{const ur=ar.Attributes[or];ur&&lr.leafNode("u",ur)}}parseOpen(lr){lr.name==="u"&&(this.model=lr.attributes.val||!0)}parseText(){}parseClose(){return!1}}ar.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},nr.exports=ar},{"../base-xform":32}],137:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("./filter-column-xform");nr.exports=class extends sr{constructor(){super(),this.map={filterColumn:new ar}}get tag(){return"autoFilter"}prepare(cr){cr.columns.forEach((lr,or)=>{this.map.filterColumn.prepare(lr,{index:or})})}render(cr,lr){return cr.openNode(this.tag,{ref:lr.autoFilterRef}),lr.columns.forEach(or=>{this.map.filterColumn.render(cr,or)}),cr.closeNode(),!0}parseOpen(cr){if(this.parser)return this.parser.parseOpen(cr),!0;switch(cr.name){case this.tag:return this.model={autoFilterRef:cr.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[cr.name],this.parser)return this.parseOpen(cr),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(cr))}}parseText(cr){this.parser&&this.parser.parseText(cr)}parseClose(cr){if(this.parser)return this.parser.parseClose(cr)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(cr){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+cr)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"customFilter"}render(ar,cr){ar.leafNode(this.tag,{val:cr.val,operator:cr.operator})}parseOpen(ar){return ar.name===this.tag&&(this.model={val:ar.attributes.val,operator:ar.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(rr,nr,ir){const sr=rr("../base-xform"),ar=rr("../list-xform"),cr=rr("./custom-filter-xform"),lr=rr("./filter-xform");nr.exports=class extends sr{constructor(){super(),this.map={customFilters:new ar({tag:"customFilters",count:!1,empty:!0,childXform:new cr}),filters:new ar({tag:"filters",count:!1,empty:!0,childXform:new lr})}}get tag(){return"filterColumn"}prepare(or,ur){or.colId=ur.index.toString()}render(or,ur){return ur.customFilters?(or.openNode(this.tag,{colId:ur.colId,hiddenButton:ur.filterButton?"0":"1"}),this.map.customFilters.render(or,ur.customFilters),or.closeNode(),!0):(or.leafNode(this.tag,{colId:ur.colId,hiddenButton:ur.filterButton?"0":"1"}),!0)}parseOpen(or){if(this.parser)return this.parser.parseOpen(or),!0;const{attributes:ur}=or;switch(or.name){case this.tag:return this.model={filterButton:ur.hiddenButton==="0"},!0;default:if(this.parser=this.map[or.name],this.parser)return this.parseOpen(or),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(or))}}parseText(){}parseClose(or){if(this.parser)return this.parser.parseClose(or)||(this.parser=void 0),!0;switch(or){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"filter"}render(ar,cr){ar.leafNode(this.tag,{val:cr.val})}parseOpen(ar){return ar.name===this.tag&&(this.model={val:ar.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"tableColumn"}prepare(ar,cr){ar.id=cr.index+1}render(ar,cr){return ar.leafNode(this.tag,{id:cr.id.toString(),name:cr.name,totalsRowLabel:cr.totalsRowLabel,totalsRowFunction:cr.totalsRowFunction,dxfId:cr.dxfId}),!0}parseOpen(ar){if(ar.name===this.tag){const{attributes:cr}=ar;return this.model={name:cr.name,totalsRowLabel:cr.totalsRowLabel,totalsRowFunction:cr.totalsRowFunction,dxfId:cr.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(rr,nr,ir){const sr=rr("../base-xform");nr.exports=class extends sr{get tag(){return"tableStyleInfo"}render(ar,cr){return ar.leafNode(this.tag,{name:cr.theme?cr.theme:void 0,showFirstColumn:cr.showFirstColumn?"1":"0",showLastColumn:cr.showLastColumn?"1":"0",showRowStripes:cr.showRowStripes?"1":"0",showColumnStripes:cr.showColumnStripes?"1":"0"}),!0}parseOpen(ar){if(ar.name===this.tag){const{attributes:cr}=ar;return this.model={theme:cr.name?cr.name:null,showFirstColumn:cr.showFirstColumn==="1",showLastColumn:cr.showLastColumn==="1",showRowStripes:cr.showRowStripes==="1",showColumnStripes:cr.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(rr,nr,ir){const sr=rr("../../../utils/xml-stream"),ar=rr("../base-xform"),cr=rr("../list-xform"),lr=rr("./auto-filter-xform"),or=rr("./table-column-xform"),ur=rr("./table-style-info-xform");class hr extends ar{constructor(){super(),this.map={autoFilter:new lr,tableColumns:new cr({tag:"tableColumns",count:!0,empty:!0,childXform:new or}),tableStyleInfo:new ur}}prepare(fr,gr){this.map.autoFilter.prepare(fr),this.map.tableColumns.prepare(fr.columns,gr)}get tag(){return"table"}render(fr,gr){fr.openXml(sr.StdDocAttributes),fr.openNode(this.tag,{...hr.TABLE_ATTRIBUTES,id:gr.id,name:gr.name,displayName:gr.displayName||gr.name,ref:gr.tableRef,totalsRowCount:gr.totalsRow?"1":void 0,totalsRowShown:gr.totalsRow?void 0:"1",headerRowCount:gr.headerRow?"1":"0"}),this.map.autoFilter.render(fr,gr),this.map.tableColumns.render(fr,gr.columns),this.map.tableStyleInfo.render(fr,gr.style),fr.closeNode()}parseOpen(fr){if(this.parser)return this.parser.parseOpen(fr),!0;const{name:gr,attributes:br}=fr;switch(gr){case this.tag:this.reset(),this.model={name:br.name,displayName:br.displayName||br.name,tableRef:br.ref,totalsRow:br.totalsRowCount==="1",headerRow:br.headerRowCount==="1"};break;default:this.parser=this.map[fr.name],this.parser&&this.parser.parseOpen(fr)}return!0}parseText(fr){this.parser&&this.parser.parseText(fr)}parseClose(fr){if(this.parser)return this.parser.parseClose(fr)||(this.parser=void 0),!0;switch(fr){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((gr,br)=>{this.model.columns[br].filterButton=gr.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(fr,gr){fr.columns.forEach(br=>{br.dxfId!==void 0&&(br.style=gr.styles.getDxfStyle(br.dxfId))})}}hr.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},nr.exports=hr},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(rr,nr,ir){(function(sr,ar){(function(){const cr=rr("fs"),lr=rr("jszip"),{PassThrough:or}=rr("readable-stream"),ur=rr("../utils/zip-stream"),hr=rr("../utils/stream-buf"),dr=rr("../utils/utils"),fr=rr("../utils/xml-stream"),{bufferToString:gr}=rr("../utils/browser-buffer-decode"),br=rr("./xform/style/styles-xform"),pr=rr("./xform/core/core-xform"),mr=rr("./xform/strings/shared-strings-xform"),yr=rr("./xform/core/relationships-xform"),xr=rr("./xform/core/content-types-xform"),vr=rr("./xform/core/app-xform"),_r=rr("./xform/book/workbook-xform"),Er=rr("./xform/sheet/worksheet-xform"),Tr=rr("./xform/drawing/drawing-xform"),Rr=rr("./xform/table/table-xform"),Nr=rr("./xform/comment/comments-xform"),Dr=rr("./xform/comment/vml-notes-xform"),Ir=rr("./xml/theme1");class Or{constructor(Lr){this.workbook=Lr}async readFile(Lr,Cr){if(!await dr.fs.exists(Lr))throw new Error("File not found: "+Lr);const wr=cr.createReadStream(Lr);try{const Pr=await this.read(wr,Cr);return wr.close(),Pr}catch(Pr){throw wr.close(),Pr}}parseRels(Lr){return new yr().parseStream(Lr)}parseWorkbook(Lr){return new _r().parseStream(Lr)}parseSharedStrings(Lr){return new mr().parseStream(Lr)}reconcile(Lr,Cr){const wr=new _r,Pr=new Er(Cr),Ar=new Tr,Sr=new Rr;wr.reconcile(Lr);const Mr={media:Lr.media,mediaIndex:Lr.mediaIndex};Object.keys(Lr.drawings).forEach(Br=>{const zr=Lr.drawings[Br],Gr=Lr.drawingRels[Br];Gr&&(Mr.rels=Gr.reduce((Vr,Xr)=>(Vr[Xr.Id]=Xr,Vr),{}),(zr.anchors||[]).forEach(Vr=>{const Xr=Vr.picture&&Vr.picture.hyperlinks;Xr&&Mr.rels[Xr.rId]&&(Xr.hyperlink=Mr.rels[Xr.rId].Target,delete Xr.rId)}),Ar.reconcile(zr,Mr))});const qr={styles:Lr.styles};Object.values(Lr.tables).forEach(Br=>{Sr.reconcile(Br,qr)});const $r={styles:Lr.styles,sharedStrings:Lr.sharedStrings,media:Lr.media,mediaIndex:Lr.mediaIndex,date1904:Lr.properties&&Lr.properties.date1904,drawings:Lr.drawings,comments:Lr.comments,tables:Lr.tables,vmlDrawings:Lr.vmlDrawings};Lr.worksheets.forEach(Br=>{Br.relationships=Lr.worksheetRels[Br.sheetNo],Pr.reconcile(Br,$r)}),delete Lr.worksheetHash,delete Lr.worksheetRels,delete Lr.globalRels,delete Lr.sharedStrings,delete Lr.workbookRels,delete Lr.sheetDefs,delete Lr.styles,delete Lr.mediaIndex,delete Lr.drawings,delete Lr.drawingRels,delete Lr.vmlDrawings}async _processWorksheetEntry(Lr,Cr,wr,Pr,Ar){const Sr=new Er(Pr),Mr=await Sr.parseStream(Lr);Mr.sheetNo=wr,Cr.worksheetHash[Ar]=Mr,Cr.worksheets.push(Mr)}async _processCommentEntry(Lr,Cr,wr){const Pr=new Nr,Ar=await Pr.parseStream(Lr);Cr.comments[`../${wr}.xml`]=Ar}async _processTableEntry(Lr,Cr,wr){const Pr=new Rr,Ar=await Pr.parseStream(Lr);Cr.tables[`../tables/${wr}.xml`]=Ar}async _processWorksheetRelsEntry(Lr,Cr,wr){const Pr=new yr,Ar=await Pr.parseStream(Lr);Cr.worksheetRels[wr]=Ar}async _processMediaEntry(Lr,Cr,wr){const Pr=wr.lastIndexOf(".");if(Pr>=1){const Ar=wr.substr(Pr+1),Sr=wr.substr(0,Pr);await new Promise((Mr,qr)=>{const $r=new hr;$r.on("finish",()=>{Cr.mediaIndex[wr]=Cr.media.length,Cr.mediaIndex[Sr]=Cr.media.length;const Br={type:"image",name:Sr,extension:Ar,buffer:$r.toBuffer()};Cr.media.push(Br),Mr()}),Lr.on("error",Br=>{qr(Br)}),Lr.pipe($r)})}}async _processDrawingEntry(Lr,Cr,wr){const Pr=new Tr,Ar=await Pr.parseStream(Lr);Cr.drawings[wr]=Ar}async _processDrawingRelsEntry(Lr,Cr,wr){const Pr=new yr,Ar=await Pr.parseStream(Lr);Cr.drawingRels[wr]=Ar}async _processVmlDrawingEntry(Lr,Cr,wr){const Pr=new Dr,Ar=await Pr.parseStream(Lr);Cr.vmlDrawings[`../drawings/${wr}.vml`]=Ar}async _processThemeEntry(Lr,Cr,wr){await new Promise((Pr,Ar)=>{const Sr=new hr;Lr.on("error",Ar),Sr.on("error",Ar),Sr.on("finish",()=>{Cr.themes[wr]=Sr.read().toString(),Pr()}),Lr.pipe(Sr)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(Lr,Cr){!Lr[Symbol.asyncIterator]&&Lr.pipe&&(Lr=Lr.pipe(new or));const wr=[];for await(const Pr of Lr)wr.push(Pr);return this.load(ar.concat(wr),Cr)}async load(Lr,Cr){let wr;wr=Cr&&Cr.base64?ar.from(Lr.toString(),"base64"):Lr;const Pr={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},Ar=await lr.loadAsync(wr);for(const Sr of Object.values(Ar.files))if(!Sr.dir){let Mr,qr=Sr.name;if(qr[0]==="/"&&(qr=qr.substr(1)),qr.match(/xl\/media\//)||qr.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))Mr=new or,Mr.write(await Sr.async("nodebuffer"));else{let $r;Mr=new or({writableObjectMode:!0,readableObjectMode:!0}),$r=sr.browser?gr(await Sr.async("nodebuffer")):await Sr.async("string");const Br=16384;for(let zr=0;zr<$r.length;zr+=Br)Mr.write($r.substring(zr,zr+Br))}switch(Mr.end(),qr){case"_rels/.rels":Pr.globalRels=await this.parseRels(Mr);break;case"xl/workbook.xml":{const $r=await this.parseWorkbook(Mr);Pr.sheets=$r.sheets,Pr.definedNames=$r.definedNames,Pr.views=$r.views,Pr.properties=$r.properties,Pr.calcProperties=$r.calcProperties;break}case"xl/_rels/workbook.xml.rels":Pr.workbookRels=await this.parseRels(Mr);break;case"xl/sharedStrings.xml":Pr.sharedStrings=new mr,await Pr.sharedStrings.parseStream(Mr);break;case"xl/styles.xml":Pr.styles=new br,await Pr.styles.parseStream(Mr);break;case"docProps/app.xml":{const $r=new vr,Br=await $r.parseStream(Mr);Pr.company=Br.company,Pr.manager=Br.manager;break}case"docProps/core.xml":{const $r=new pr,Br=await $r.parseStream(Mr);Object.assign(Pr,Br);break}default:{let $r=qr.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if($r){await this._processWorksheetEntry(Mr,Pr,$r[1],Cr,qr);break}if($r=qr.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),$r){await this._processWorksheetRelsEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),$r){await this._processThemeEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),$r){await this._processMediaEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),$r){await this._processDrawingEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/(comments\d+)[.]xml/),$r){await this._processCommentEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/tables\/(table\d+)[.]xml/),$r){await this._processTableEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),$r){await this._processDrawingRelsEntry(Mr,Pr,$r[1]);break}if($r=qr.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),$r){await this._processVmlDrawingEntry(Mr,Pr,$r[1]);break}}}}return this.reconcile(Pr,Cr),this.workbook.model=Pr,this.workbook}async addMedia(Lr,Cr){await Promise.all(Cr.media.map(async wr=>{if(wr.type==="image"){const Pr=`xl/media/${wr.name}.${wr.extension}`;if(wr.filename){const Ar=await function(Sr,Mr){return new Promise((qr,$r)=>{cr.readFile(Sr,Mr,(Br,zr)=>{Br?$r(Br):qr(zr)})})}(wr.filename);return Lr.append(Ar,{name:Pr})}if(wr.buffer)return Lr.append(wr.buffer,{name:Pr});if(wr.base64){const Ar=wr.base64,Sr=Ar.substring(Ar.indexOf(",")+1);return Lr.append(Sr,{name:Pr,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(Lr,Cr){const wr=new Tr,Pr=new yr;Cr.worksheets.forEach(Ar=>{const{drawing:Sr}=Ar;if(Sr){wr.prepare(Sr,{});let Mr=wr.toXml(Sr);Lr.append(Mr,{name:`xl/drawings/${Sr.name}.xml`}),Mr=Pr.toXml(Sr.rels),Lr.append(Mr,{name:`xl/drawings/_rels/${Sr.name}.xml.rels`})}})}addTables(Lr,Cr){const wr=new Rr;Cr.worksheets.forEach(Pr=>{const{tables:Ar}=Pr;Ar.forEach(Sr=>{wr.prepare(Sr,{});const Mr=wr.toXml(Sr);Lr.append(Mr,{name:"xl/tables/"+Sr.target})})})}async addContentTypes(Lr,Cr){const wr=new xr().toXml(Cr);Lr.append(wr,{name:"[Content_Types].xml"})}async addApp(Lr,Cr){const wr=new vr().toXml(Cr);Lr.append(wr,{name:"docProps/app.xml"})}async addCore(Lr,Cr){const wr=new pr;Lr.append(wr.toXml(Cr),{name:"docProps/core.xml"})}async addThemes(Lr,Cr){const wr=Cr.themes||{theme1:Ir};Object.keys(wr).forEach(Pr=>{const Ar=wr[Pr],Sr=`xl/theme/${Pr}.xml`;Lr.append(Ar,{name:Sr})})}async addOfficeRels(Lr){const Cr=new yr().toXml([{Id:"rId1",Type:Or.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:Or.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:Or.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);Lr.append(Cr,{name:"_rels/.rels"})}async addWorkbookRels(Lr,Cr){let wr=1;const Pr=[{Id:"rId"+wr++,Type:Or.RelType.Styles,Target:"styles.xml"},{Id:"rId"+wr++,Type:Or.RelType.Theme,Target:"theme/theme1.xml"}];Cr.sharedStrings.count&&Pr.push({Id:"rId"+wr++,Type:Or.RelType.SharedStrings,Target:"sharedStrings.xml"}),Cr.worksheets.forEach(Sr=>{Sr.rId="rId"+wr++,Pr.push({Id:Sr.rId,Type:Or.RelType.Worksheet,Target:`worksheets/sheet${Sr.id}.xml`})});const Ar=new yr().toXml(Pr);Lr.append(Ar,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(Lr,Cr){Cr.sharedStrings&&Cr.sharedStrings.count&&Lr.append(Cr.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(Lr,Cr){const{xml:wr}=Cr.styles;wr&&Lr.append(wr,{name:"xl/styles.xml"})}async addWorkbook(Lr,Cr){const wr=new _r;Lr.append(wr.toXml(Cr),{name:"xl/workbook.xml"})}async addWorksheets(Lr,Cr){const wr=new Er,Pr=new yr,Ar=new Nr,Sr=new Dr;Cr.worksheets.forEach(Mr=>{let qr=new fr;wr.render(qr,Mr),Lr.append(qr.xml,{name:`xl/worksheets/sheet${Mr.id}.xml`}),Mr.rels&&Mr.rels.length&&(qr=new fr,Pr.render(qr,Mr.rels),Lr.append(qr.xml,{name:`xl/worksheets/_rels/sheet${Mr.id}.xml.rels`})),Mr.comments.length>0&&(qr=new fr,Ar.render(qr,Mr),Lr.append(qr.xml,{name:`xl/comments${Mr.id}.xml`}),qr=new fr,Sr.render(qr,Mr),Lr.append(qr.xml,{name:`xl/drawings/vmlDrawing${Mr.id}.vml`}))})}_finalize(Lr){return new Promise((Cr,wr)=>{Lr.on("finish",()=>{Cr(this)}),Lr.on("error",wr),Lr.finalize()})}prepareModel(Lr,Cr){Lr.creator=Lr.creator||"ExcelJS",Lr.lastModifiedBy=Lr.lastModifiedBy||"ExcelJS",Lr.created=Lr.created||new Date,Lr.modified=Lr.modified||new Date,Lr.useSharedStrings=Cr.useSharedStrings===void 0||Cr.useSharedStrings,Lr.useStyles=Cr.useStyles===void 0||Cr.useStyles,Lr.sharedStrings=new mr,Lr.styles=Lr.useStyles?new br(!0):new br.Mock;const wr=new _r,Pr=new Er;wr.prepare(Lr);const Ar={sharedStrings:Lr.sharedStrings,styles:Lr.styles,date1904:Lr.properties.date1904,drawingsCount:0,media:Lr.media};Ar.drawings=Lr.drawings=[],Ar.commentRefs=Lr.commentRefs=[];let Sr=0;Lr.tables=[],Lr.worksheets.forEach(Mr=>{Mr.tables.forEach(qr=>{Sr++,qr.target=`table${Sr}.xml`,qr.id=Sr,Lr.tables.push(qr)}),Pr.prepare(Mr,Ar)})}async write(Lr,Cr){Cr=Cr||{};const{model:wr}=this.workbook,Pr=new ur.ZipWriter(Cr.zip);return Pr.pipe(Lr),this.prepareModel(wr,Cr),await this.addContentTypes(Pr,wr),await this.addOfficeRels(Pr,wr),await this.addWorkbookRels(Pr,wr),await this.addWorksheets(Pr,wr),await this.addSharedStrings(Pr,wr),await this.addDrawings(Pr,wr),await this.addTables(Pr,wr),await Promise.all([this.addThemes(Pr,wr),this.addStyles(Pr,wr)]),await this.addMedia(Pr,wr),await Promise.all([this.addApp(Pr,wr),this.addCore(Pr,wr)]),await this.addWorkbook(Pr,wr),this._finalize(Pr)}writeFile(Lr,Cr){const wr=cr.createWriteStream(Lr);return new Promise((Pr,Ar)=>{wr.on("finish",()=>{Pr()}),wr.on("error",Sr=>{Ar(Sr)}),this.write(wr,Cr).then(()=>{wr.end()}).catch(Sr=>{Ar(Sr)})})}async writeBuffer(Lr){const Cr=new hr;return await this.write(Cr,Lr),Cr.read()}}Or.RelType=rr("./rel-type"),nr.exports=Or}).call(this)}).call(this,rr("_process"),rr("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(rr,nr,ir){nr.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(rr,nr,ir){(function(sr){(function(){Object.defineProperty(ir,"__esModule",{value:!0}),ir.CsvFormatterStream=void 0;const ar=rr("stream"),cr=rr("./formatter");class lr extends ar.Transform{constructor(ur){super({writableObjectMode:ur.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=ur,this.rowFormatter=new cr.RowFormatter(ur),this.hasWrittenBOM=!ur.writeBOM}transform(ur){return this.rowFormatter.rowTransform=ur,this}_transform(ur,hr,dr){let fr=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(ur,(gr,br)=>gr?(fr=!0,dr(gr)):(br&&br.forEach(pr=>{this.push(sr.from(pr,"utf8"))}),fr=!0,dr()))}catch(gr){if(fr)throw gr;dr(gr)}}_flush(ur){this.rowFormatter.finish((hr,dr)=>hr?ur(hr):(dr&&dr.forEach(fr=>{this.push(sr.from(fr,"utf8"))}),ur()))}}ir.CsvFormatterStream=lr}).call(this)}).call(this,rr("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.FormatterOptions=void 0,ir.FormatterOptions=class{constructor(){let sr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var ar;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,sr||{}),(sr==null?void 0:sr.quoteHeaders)===void 0&&(this.quoteHeaders=this.quoteColumns),(sr==null?void 0:sr.quote)===!0?this.quote='"':(sr==null?void 0:sr.quote)===!1&&(this.quote=""),typeof(sr==null?void 0:sr.escape)!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((ar=sr.writeHeaders)===null||ar===void 0||ar),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(rr,nr,ir){var sr=function(or){return or&&or.__esModule?or:{default:or}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.FieldFormatter=void 0;const ar=sr(rr("lodash.isboolean")),cr=sr(rr("lodash.isnil")),lr=sr(rr("lodash.escaperegexp"));ir.FieldFormatter=class{constructor(or){this._headers=null,this.formatterOptions=or,or.headers!==null&&(this.headers=or.headers),this.REPLACE_REGEXP=new RegExp(or.quote,"g");const ur=`[${or.delimiter}${lr.default(or.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(ur)}set headers(or){this._headers=or}shouldQuote(or,ur){const hr=ur?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return ar.default(hr)?hr:Array.isArray(hr)?hr[or]:this._headers!==null&&hr[this._headers[or]]}format(or,ur,hr){const dr=(""+(cr.default(or)?"":or)).replace(/\0/g,""),{formatterOptions:fr}=this;return fr.quote!==""&&dr.indexOf(fr.quote)!==-1?this.quoteField(dr.replace(this.REPLACE_REGEXP,fr.escapedQuote)):dr.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(ur,hr)?this.quoteField(dr):dr}quoteField(or){const{quote:ur}=this.formatterOptions;return`${ur}${or}${ur}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(rr,nr,ir){var sr=function(hr){return hr&&hr.__esModule?hr:{default:hr}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.RowFormatter=void 0;const ar=sr(rr("lodash.isfunction")),cr=sr(rr("lodash.isequal")),lr=rr("./FieldFormatter"),or=rr("../types");class ur{constructor(dr){this.rowCount=0,this.formatterOptions=dr,this.fieldFormatter=new lr.FieldFormatter(dr),this.headers=dr.headers,this.shouldWriteHeaders=dr.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),dr.transform&&(this.rowTransform=dr.transform)}static isRowHashArray(dr){return!!Array.isArray(dr)&&Array.isArray(dr[0])&&dr[0].length===2}static isRowArray(dr){return Array.isArray(dr)&&!this.isRowHashArray(dr)}static gatherHeaders(dr){return ur.isRowHashArray(dr)?dr.map(fr=>fr[0]):Array.isArray(dr)?dr:Object.keys(dr)}static createTransform(dr){return or.isSyncTransform(dr)?(fr,gr)=>{let br=null;try{br=dr(fr)}catch(pr){return gr(pr)}return gr(null,br)}:(fr,gr)=>{dr(fr,gr)}}set rowTransform(dr){if(!ar.default(dr))throw new TypeError("The transform should be a function");this._rowTransform=ur.createTransform(dr)}format(dr,fr){this.callTransformer(dr,(gr,br)=>{if(gr)return fr(gr);if(!dr)return fr(null);const pr=[];if(br){const{shouldFormatColumns:mr,headers:yr}=this.checkHeaders(br);if(this.shouldWriteHeaders&&yr&&!this.hasWrittenHeaders&&(pr.push(this.formatColumns(yr,!0)),this.hasWrittenHeaders=!0),mr){const xr=this.gatherColumns(br);pr.push(this.formatColumns(xr,!1))}}return fr(null,pr)})}finish(dr){const fr=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return dr(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));fr.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&fr.push(this.formatterOptions.rowDelimiter),dr(null,fr)}checkHeaders(dr){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const fr=ur.gatherHeaders(dr);return this.headers=fr,this.fieldFormatter.headers=fr,this.shouldWriteHeaders?{shouldFormatColumns:!cr.default(fr,dr),headers:fr}:{shouldFormatColumns:!0,headers:null}}gatherColumns(dr){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(dr)?ur.isRowHashArray(dr)?this.headers.map((fr,gr)=>{const br=dr[gr];return br?br[1]:""}):ur.isRowArray(dr)&&!this.shouldWriteHeaders?dr:this.headers.map((fr,gr)=>dr[gr]):this.headers.map(fr=>dr[fr])}callTransformer(dr,fr){return this._rowTransform?this._rowTransform(dr,fr):fr(null,dr)}formatColumns(dr,fr){const gr=dr.map((pr,mr)=>this.fieldFormatter.format(pr,mr,fr)).join(this.formatterOptions.delimiter),{rowCount:br}=this;return this.rowCount+=1,br?[this.formatterOptions.rowDelimiter,gr].join(""):gr}}ir.RowFormatter=ur},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.FieldFormatter=ir.RowFormatter=void 0;var sr=rr("./RowFormatter");Object.defineProperty(ir,"RowFormatter",{enumerable:!0,get:function(){return sr.RowFormatter}});var ar=rr("./FieldFormatter");Object.defineProperty(ir,"FieldFormatter",{enumerable:!0,get:function(){return ar.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(rr,nr,ir){(function(sr){(function(){var ar=Object.create?function(mr,yr,xr,vr){vr===void 0&&(vr=xr),Object.defineProperty(mr,vr,{enumerable:!0,get:function(){return yr[xr]}})}:function(mr,yr,xr,vr){vr===void 0&&(vr=xr),mr[vr]=yr[xr]},cr=Object.create?function(mr,yr){Object.defineProperty(mr,"default",{enumerable:!0,value:yr})}:function(mr,yr){mr.default=yr},lr=function(mr){if(mr&&mr.__esModule)return mr;var yr={};if(mr!=null)for(var xr in mr)xr!=="default"&&Object.prototype.hasOwnProperty.call(mr,xr)&&ar(yr,mr,xr);return cr(yr,mr),yr},or=function(mr,yr){for(var xr in mr)xr==="default"||Object.prototype.hasOwnProperty.call(yr,xr)||ar(yr,mr,xr)};Object.defineProperty(ir,"__esModule",{value:!0}),ir.writeToPath=ir.writeToString=ir.writeToBuffer=ir.writeToStream=ir.write=ir.format=ir.FormatterOptions=ir.CsvFormatterStream=void 0;const ur=rr("util"),hr=rr("stream"),dr=lr(rr("fs")),fr=rr("./FormatterOptions"),gr=rr("./CsvFormatterStream");or(rr("./types"),ir);var br=rr("./CsvFormatterStream");Object.defineProperty(ir,"CsvFormatterStream",{enumerable:!0,get:function(){return br.CsvFormatterStream}});var pr=rr("./FormatterOptions");Object.defineProperty(ir,"FormatterOptions",{enumerable:!0,get:function(){return pr.FormatterOptions}}),ir.format=mr=>new gr.CsvFormatterStream(new fr.FormatterOptions(mr)),ir.write=(mr,yr)=>{const xr=ir.format(yr),vr=ur.promisify((_r,Er)=>{xr.write(_r,void 0,Er)});return mr.reduce((_r,Er)=>_r.then(()=>vr(Er)),Promise.resolve()).then(()=>xr.end()).catch(_r=>{xr.emit("error",_r)}),xr},ir.writeToStream=(mr,yr,xr)=>ir.write(yr,xr).pipe(mr),ir.writeToBuffer=function(mr){let yr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const xr=[],vr=new hr.Writable({write(_r,Er,Tr){xr.push(_r),Tr()}});return new Promise((_r,Er)=>{vr.on("error",Er).on("finish",()=>_r(sr.concat(xr))),ir.write(mr,yr).pipe(vr)})},ir.writeToString=(mr,yr)=>ir.writeToBuffer(mr,yr).then(xr=>xr.toString()),ir.writeToPath=(mr,yr,xr)=>{const vr=dr.createWriteStream(mr,{encoding:"utf8"});return ir.write(yr,xr).pipe(vr)}}).call(this)}).call(this,rr("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.isSyncTransform=void 0,ir.isSyncTransform=sr=>sr.length===1},{}],153:[function(rr,nr,ir){(function(sr){(function(){Object.defineProperty(ir,"__esModule",{value:!0}),ir.CsvParserStream=void 0;const ar=rr("string_decoder"),cr=rr("stream"),lr=rr("./transforms"),or=rr("./parser");class ur extends cr.Transform{constructor(dr){super({objectMode:dr.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=dr,this.parser=new or.Parser(dr),this.headerTransformer=new lr.HeaderTransformer(dr),this.decoder=new ar.StringDecoder(dr.encoding),this.rowTransformerValidator=new lr.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(dr){return this.rowTransformerValidator.rowTransform=dr,this}validate(dr){return this.rowTransformerValidator.rowValidator=dr,this}emit(dr){if(dr==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var fr=arguments.length,gr=new Array(fr>1?fr-1:0),br=1;br<fr;br++)gr[br-1]=arguments[br];return super.emit(dr,...gr)}_transform(dr,fr,gr){if(this.hasHitRowLimit)return gr();const br=ur.wrapDoneCallback(gr);try{const{lines:pr}=this,mr=pr+this.decoder.write(dr),yr=this.parse(mr,!0);return this.processRows(yr,br)}catch(pr){return br(pr)}}_flush(dr){const fr=ur.wrapDoneCallback(dr);if(this.hasHitRowLimit)return fr();try{const gr=this.lines+this.decoder.end(),br=this.parse(gr,!1);return this.processRows(br,fr)}catch(gr){return fr(gr)}}parse(dr,fr){if(!dr)return[];const{line:gr,rows:br}=this.parser.parse(dr,fr);return this.lines=gr,br}processRows(dr,fr){const gr=dr.length,br=pr=>{const mr=vr=>vr?fr(vr):pr%100!=0?br(pr+1):void sr(()=>br(pr+1));if(this.checkAndEmitHeaders(),pr>=gr||this.hasHitRowLimit)return fr();if(this.parsedLineCount+=1,this.shouldSkipLine)return mr();const yr=dr[pr];this.rowCount+=1,this.parsedRowCount+=1;const xr=this.rowCount;return this.transformRow(yr,(vr,_r)=>{if(vr)return this.rowCount-=1,mr(vr);if(!_r)return mr(new Error("expected transform result"));if(_r.isValid){if(_r.row)return this.pushRow(_r.row,mr)}else this.emit("data-invalid",_r.row,xr,_r.reason);return mr()})};br(0)}transformRow(dr,fr){try{this.headerTransformer.transform(dr,(gr,br)=>gr?fr(gr):br?br.isValid?br.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(br.row,fr):this.skipRow(fr):(this.rowCount-=1,this.parsedRowCount-=1,fr(null,{row:null,isValid:!0})):this.shouldEmitRows?fr(null,{isValid:!1,row:dr}):this.skipRow(fr):fr(new Error("Expected result from header transform")))}catch(gr){fr(gr)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(dr){return this.rowCount-=1,dr(null,{row:null,isValid:!0})}pushRow(dr,fr){try{this.parserOptions.objectMode?this.push(dr):this.push(JSON.stringify(dr)),fr()}catch(gr){fr(gr)}}static wrapDoneCallback(dr){let fr=!1;return function(gr){if(gr){if(fr)throw gr;return fr=!0,void dr(gr)}for(var br=arguments.length,pr=new Array(br>1?br-1:0),mr=1;mr<br;mr++)pr[mr-1]=arguments[mr];dr(...pr)}}}ir.CsvParserStream=ur}).call(this)}).call(this,rr("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(rr,nr,ir){var sr=function(lr){return lr&&lr.__esModule?lr:{default:lr}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.ParserOptions=void 0;const ar=sr(rr("lodash.escaperegexp")),cr=sr(rr("lodash.isnil"));ir.ParserOptions=class{constructor(lr){var or;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,lr||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=ar.default(this.delimiter),this.escapeChar=(or=this.escape)!==null&&or!==void 0?or:this.quote,this.supportsComments=!cr.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(rr,nr,ir){var sr=Object.create?function(br,pr,mr,yr){yr===void 0&&(yr=mr),Object.defineProperty(br,yr,{enumerable:!0,get:function(){return pr[mr]}})}:function(br,pr,mr,yr){yr===void 0&&(yr=mr),br[yr]=pr[mr]},ar=Object.create?function(br,pr){Object.defineProperty(br,"default",{enumerable:!0,value:pr})}:function(br,pr){br.default=pr},cr=function(br){if(br&&br.__esModule)return br;var pr={};if(br!=null)for(var mr in br)mr!=="default"&&Object.prototype.hasOwnProperty.call(br,mr)&&sr(pr,br,mr);return ar(pr,br),pr},lr=function(br,pr){for(var mr in br)mr==="default"||Object.prototype.hasOwnProperty.call(pr,mr)||sr(pr,br,mr)};Object.defineProperty(ir,"__esModule",{value:!0}),ir.parseString=ir.parseFile=ir.parseStream=ir.parse=ir.ParserOptions=ir.CsvParserStream=void 0;const or=cr(rr("fs")),ur=rr("stream"),hr=rr("./ParserOptions"),dr=rr("./CsvParserStream");lr(rr("./types"),ir);var fr=rr("./CsvParserStream");Object.defineProperty(ir,"CsvParserStream",{enumerable:!0,get:function(){return fr.CsvParserStream}});var gr=rr("./ParserOptions");Object.defineProperty(ir,"ParserOptions",{enumerable:!0,get:function(){return gr.ParserOptions}}),ir.parse=br=>new dr.CsvParserStream(new hr.ParserOptions(br)),ir.parseStream=(br,pr)=>br.pipe(new dr.CsvParserStream(new hr.ParserOptions(pr))),ir.parseFile=function(br){let pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return or.createReadStream(br).pipe(new dr.CsvParserStream(new hr.ParserOptions(pr)))},ir.parseString=(br,pr)=>{const mr=new ur.Readable;return mr.push(br),mr.push(null),mr.pipe(new dr.CsvParserStream(new hr.ParserOptions(pr)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.Parser=void 0;const sr=rr("./Scanner"),ar=rr("./RowParser"),cr=rr("./Token");class lr{constructor(ur){this.parserOptions=ur,this.rowParser=new ar.RowParser(this.parserOptions)}static removeBOM(ur){return ur&&ur.charCodeAt(0)===65279?ur.slice(1):ur}parse(ur,hr){const dr=new sr.Scanner({line:lr.removeBOM(ur),parserOptions:this.parserOptions,hasMoreData:hr});return this.parserOptions.supportsComments?this.parseWithComments(dr):this.parseWithoutComments(dr)}parseWithoutComments(ur){const hr=[];let dr=!0;for(;dr;)dr=this.parseRow(ur,hr);return{line:ur.line,rows:hr}}parseWithComments(ur){const{parserOptions:hr}=this,dr=[];for(let fr=ur.nextCharacterToken;fr!==null;fr=ur.nextCharacterToken)if(cr.Token.isTokenComment(fr,hr)){if(ur.advancePastLine()===null)return{line:ur.lineFromCursor,rows:dr};if(!ur.hasMoreCharacters)return{line:ur.lineFromCursor,rows:dr};ur.truncateToCursor()}else if(!this.parseRow(ur,dr))break;return{line:ur.line,rows:dr}}parseRow(ur,hr){if(!ur.nextNonSpaceToken)return!1;const dr=this.rowParser.parse(ur);return dr!==null&&(this.parserOptions.ignoreEmpty&&ar.RowParser.isEmptyRow(dr)||hr.push(dr),!0)}}ir.Parser=lr},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.RowParser=void 0;const sr=rr("./column"),ar=rr("./Token");ir.RowParser=class{constructor(cr){this.parserOptions=cr,this.columnParser=new sr.ColumnParser(cr)}static isEmptyRow(cr){return cr.join("").replace(/\s+/g,"")===""}parse(cr){const{parserOptions:lr}=this,{hasMoreData:or}=cr,ur=cr,hr=[];let dr=this.getStartToken(ur,hr);for(;dr;){if(ar.Token.isTokenRowDelimiter(dr))return ur.advancePastToken(dr),!ur.hasMoreCharacters&&ar.Token.isTokenCarriageReturn(dr,lr)&&or?null:(ur.truncateToCursor(),hr);if(!this.shouldSkipColumnParse(ur,dr,hr)){const fr=this.columnParser.parse(ur);if(fr===null)return null;hr.push(fr)}dr=ur.nextNonSpaceToken}return or?null:(ur.truncateToCursor(),hr)}getStartToken(cr,lr){const or=cr.nextNonSpaceToken;return or!==null&&ar.Token.isTokenDelimiter(or,this.parserOptions)?(lr.push(""),cr.nextNonSpaceToken):or}shouldSkipColumnParse(cr,lr,or){const{parserOptions:ur}=this;if(ar.Token.isTokenDelimiter(lr,ur)){cr.advancePastToken(lr);const hr=cr.nextCharacterToken;if(!cr.hasMoreCharacters||hr!==null&&ar.Token.isTokenRowDelimiter(hr)||hr!==null&&ar.Token.isTokenDelimiter(hr,ur))return or.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.Scanner=void 0;const sr=rr("./Token"),ar=/((?:\r\n)|\n|\r)/;ir.Scanner=class{constructor(cr){this.cursor=0,this.line=cr.line,this.lineLength=this.line.length,this.parserOptions=cr.parserOptions,this.hasMoreData=cr.hasMoreData,this.cursor=cr.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:cr}=this,lr=this.parserOptions.NEXT_TOKEN_REGEXP;if(cr.search(lr)===-1)return null;const or=lr.exec(cr);if(or==null)return null;const ur=or[1],hr=this.cursor+(or.index||0);return new sr.Token({token:ur,startCursor:hr,endCursor:hr+ur.length-1})}get nextCharacterToken(){const{cursor:cr,lineLength:lr}=this;return lr<=cr?null:new sr.Token({token:this.line[cr],startCursor:cr,endCursor:cr})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const cr=ar.exec(this.lineFromCursor);return cr?(this.cursor+=(cr.index||0)+cr[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(cr){return this.cursor=cr,this}advanceToToken(cr){return this.cursor=cr.startCursor,this}advancePastToken(cr){return this.cursor=cr.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.Token=void 0,ir.Token=class{constructor(sr){this.token=sr.token,this.startCursor=sr.startCursor,this.endCursor=sr.endCursor}static isTokenRowDelimiter(sr){const ar=sr.token;return ar==="\r"||ar===`
`||ar===`\r
`}static isTokenCarriageReturn(sr,ar){return sr.token===ar.carriageReturn}static isTokenComment(sr,ar){return ar.supportsComments&&!!sr&&sr.token===ar.comment}static isTokenEscapeCharacter(sr,ar){return sr.token===ar.escapeChar}static isTokenQuote(sr,ar){return sr.token===ar.quote}static isTokenDelimiter(sr,ar){return sr.token===ar.delimiter}}},{}],160:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.ColumnFormatter=void 0,ir.ColumnFormatter=class{constructor(sr){sr.trim?this.format=ar=>ar.trim():sr.ltrim?this.format=ar=>ar.trimLeft():sr.rtrim?this.format=ar=>ar.trimRight():this.format=ar=>ar}}},{}],161:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.ColumnParser=void 0;const sr=rr("./NonQuotedColumnParser"),ar=rr("./QuotedColumnParser"),cr=rr("../Token");ir.ColumnParser=class{constructor(lr){this.parserOptions=lr,this.quotedColumnParser=new ar.QuotedColumnParser(lr),this.nonQuotedColumnParser=new sr.NonQuotedColumnParser(lr)}parse(lr){const{nextNonSpaceToken:or}=lr;return or!==null&&cr.Token.isTokenQuote(or,this.parserOptions)?(lr.advanceToToken(or),this.quotedColumnParser.parse(lr)):this.nonQuotedColumnParser.parse(lr)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.NonQuotedColumnParser=void 0;const sr=rr("./ColumnFormatter"),ar=rr("../Token");ir.NonQuotedColumnParser=class{constructor(cr){this.parserOptions=cr,this.columnFormatter=new sr.ColumnFormatter(cr)}parse(cr){if(!cr.hasMoreCharacters)return null;const{parserOptions:lr}=this,or=[];let ur=cr.nextCharacterToken;for(;ur&&!ar.Token.isTokenDelimiter(ur,lr)&&!ar.Token.isTokenRowDelimiter(ur);ur=cr.nextCharacterToken)or.push(ur.token),cr.advancePastToken(ur);return this.columnFormatter.format(or.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.QuotedColumnParser=void 0;const sr=rr("./ColumnFormatter"),ar=rr("../Token");ir.QuotedColumnParser=class{constructor(cr){this.parserOptions=cr,this.columnFormatter=new sr.ColumnFormatter(cr)}parse(cr){if(!cr.hasMoreCharacters)return null;const lr=cr.cursor,{foundClosingQuote:or,col:ur}=this.gatherDataBetweenQuotes(cr);if(!or){if(cr.advanceTo(lr),!cr.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${cr.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(cr),ur}gatherDataBetweenQuotes(cr){const{parserOptions:lr}=this;let or=!1,ur=!1;const hr=[];let dr=cr.nextCharacterToken;for(;!ur&&dr!==null;dr=cr.nextCharacterToken){const fr=ar.Token.isTokenQuote(dr,lr);if(!or&&fr)or=!0;else if(or)if(ar.Token.isTokenEscapeCharacter(dr,lr)){cr.advancePastToken(dr);const gr=cr.nextCharacterToken;gr!==null&&(ar.Token.isTokenQuote(gr,lr)||ar.Token.isTokenEscapeCharacter(gr,lr))?(hr.push(gr.token),dr=gr):fr?ur=!0:hr.push(dr.token)}else fr?ur=!0:hr.push(dr.token);cr.advancePastToken(dr)}return{col:this.columnFormatter.format(hr.join("")),foundClosingQuote:ur}}checkForMalformedColumn(cr){const{parserOptions:lr}=this,{nextNonSpaceToken:or}=cr;if(or){const ur=ar.Token.isTokenDelimiter(or,lr),hr=ar.Token.isTokenRowDelimiter(or);if(!ur&&!hr){const dr=cr.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${lr.escapedDelimiter}' OR new line got: '${or.token}'. at '${dr}`)}cr.advanceToToken(or)}else cr.hasMoreData||cr.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.ColumnFormatter=ir.QuotedColumnParser=ir.NonQuotedColumnParser=ir.ColumnParser=void 0;var sr=rr("./ColumnParser");Object.defineProperty(ir,"ColumnParser",{enumerable:!0,get:function(){return sr.ColumnParser}});var ar=rr("./NonQuotedColumnParser");Object.defineProperty(ir,"NonQuotedColumnParser",{enumerable:!0,get:function(){return ar.NonQuotedColumnParser}});var cr=rr("./QuotedColumnParser");Object.defineProperty(ir,"QuotedColumnParser",{enumerable:!0,get:function(){return cr.QuotedColumnParser}});var lr=rr("./ColumnFormatter");Object.defineProperty(ir,"ColumnFormatter",{enumerable:!0,get:function(){return lr.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.QuotedColumnParser=ir.NonQuotedColumnParser=ir.ColumnParser=ir.Token=ir.Scanner=ir.RowParser=ir.Parser=void 0;var sr=rr("./Parser");Object.defineProperty(ir,"Parser",{enumerable:!0,get:function(){return sr.Parser}});var ar=rr("./RowParser");Object.defineProperty(ir,"RowParser",{enumerable:!0,get:function(){return ar.RowParser}});var cr=rr("./Scanner");Object.defineProperty(ir,"Scanner",{enumerable:!0,get:function(){return cr.Scanner}});var lr=rr("./Token");Object.defineProperty(ir,"Token",{enumerable:!0,get:function(){return lr.Token}});var or=rr("./column");Object.defineProperty(ir,"ColumnParser",{enumerable:!0,get:function(){return or.ColumnParser}}),Object.defineProperty(ir,"NonQuotedColumnParser",{enumerable:!0,get:function(){return or.NonQuotedColumnParser}}),Object.defineProperty(ir,"QuotedColumnParser",{enumerable:!0,get:function(){return or.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(rr,nr,ir){var sr=function(ur){return ur&&ur.__esModule?ur:{default:ur}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.HeaderTransformer=void 0;const ar=sr(rr("lodash.isundefined")),cr=sr(rr("lodash.isfunction")),lr=sr(rr("lodash.uniq")),or=sr(rr("lodash.groupby"));ir.HeaderTransformer=class{constructor(ur){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=ur,ur.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(ur.headers)?this.setHeaders(ur.headers):cr.default(ur.headers)&&(this.headersTransform=ur.headers)}transform(ur,hr){return this.shouldMapRow(ur)?hr(null,this.processRow(ur)):hr(null,{row:null,isValid:!0})}shouldMapRow(ur){const{parserOptions:hr}=this;if(!this.headersTransform&&hr.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(ur)){if(this.headersTransform)this.setHeaders(this.headersTransform(ur));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(ur)}return!1}return!0}processRow(ur){if(!this.headers)return{row:ur,isValid:!0};const{parserOptions:hr}=this;if(!hr.discardUnmappedColumns&&ur.length>this.headersLength){if(!hr.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${ur.length}`);return{row:ur,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${ur.length}`}}return hr.strictColumnHandling&&ur.length<this.headersLength?{row:ur,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${ur.length}`}:{row:this.mapHeaders(ur),isValid:!0}}mapHeaders(ur){const hr={},{headers:dr,headersLength:fr}=this;for(let gr=0;gr<fr;gr+=1){const br=dr[gr];if(!ar.default(br)){const pr=ur[gr];ar.default(pr)?hr[br]="":hr[br]=pr}}return hr}setHeaders(ur){var hr;const dr=ur.filter(fr=>!!fr);if(lr.default(dr).length!==dr.length){const fr=or.default(dr),gr=Object.keys(fr).filter(br=>fr[br].length>1);throw new Error("Duplicate headers found "+JSON.stringify(gr))}this.headers=ur,this.receivedHeaders=!0,this.headersLength=((hr=this.headers)===null||hr===void 0?void 0:hr.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(rr,nr,ir){var sr=function(or){return or&&or.__esModule?or:{default:or}};Object.defineProperty(ir,"__esModule",{value:!0}),ir.RowTransformerValidator=void 0;const ar=sr(rr("lodash.isfunction")),cr=rr("../types");class lr{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(ur){return cr.isSyncTransform(ur)?(hr,dr)=>{let fr=null;try{fr=ur(hr)}catch(gr){return dr(gr)}return dr(null,fr)}:ur}static createValidator(ur){return cr.isSyncValidate(ur)?(hr,dr)=>{dr(null,{row:hr,isValid:ur(hr)})}:(hr,dr)=>{ur(hr,(fr,gr,br)=>fr?dr(fr):dr(null,gr?{row:hr,isValid:gr,reason:br}:{row:hr,isValid:!1,reason:br}))}}set rowTransform(ur){if(!ar.default(ur))throw new TypeError("The transform should be a function");this._rowTransform=lr.createTransform(ur)}set rowValidator(ur){if(!ar.default(ur))throw new TypeError("The validate should be a function");this._rowValidator=lr.createValidator(ur)}transformAndValidate(ur,hr){return this.callTransformer(ur,(dr,fr)=>dr?hr(dr):fr?this.callValidator(fr,(gr,br)=>gr?hr(gr):br&&!br.isValid?hr(null,{row:fr,isValid:!1,reason:br.reason}):hr(null,{row:fr,isValid:!0})):hr(null,{row:null,isValid:!0}))}callTransformer(ur,hr){return this._rowTransform?this._rowTransform(ur,hr):hr(null,ur)}callValidator(ur,hr){return this._rowValidator?this._rowValidator(ur,hr):hr(null,{row:ur,isValid:!0})}}ir.RowTransformerValidator=lr},{"../types":169,"lodash.isfunction":446}],168:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.HeaderTransformer=ir.RowTransformerValidator=void 0;var sr=rr("./RowTransformerValidator");Object.defineProperty(ir,"RowTransformerValidator",{enumerable:!0,get:function(){return sr.RowTransformerValidator}});var ar=rr("./HeaderTransformer");Object.defineProperty(ir,"HeaderTransformer",{enumerable:!0,get:function(){return ar.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.isSyncValidate=ir.isSyncTransform=void 0,ir.isSyncTransform=sr=>sr.length===1,ir.isSyncValidate=sr=>sr.length===1},{}],170:[function(rr,nr,ir){const sr=ir;sr.bignum=rr("bn.js"),sr.define=rr("./asn1/api").define,sr.base=rr("./asn1/base"),sr.constants=rr("./asn1/constants"),sr.decoders=rr("./asn1/decoders"),sr.encoders=rr("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(rr,nr,ir){const sr=rr("./encoders"),ar=rr("./decoders"),cr=rr("inherits");function lr(or,ur){this.name=or,this.body=ur,this.decoders={},this.encoders={}}ir.define=function(or,ur){return new lr(or,ur)},lr.prototype._createNamed=function(or){const ur=this.name;function hr(dr){this._initNamed(dr,ur)}return cr(hr,or),hr.prototype._initNamed=function(dr,fr){or.call(this,dr,fr)},new hr(this)},lr.prototype._getDecoder=function(or){return or=or||"der",this.decoders.hasOwnProperty(or)||(this.decoders[or]=this._createNamed(ar[or])),this.decoders[or]},lr.prototype.decode=function(or,ur,hr){return this._getDecoder(ur).decode(or,hr)},lr.prototype._getEncoder=function(or){return or=or||"der",this.encoders.hasOwnProperty(or)||(this.encoders[or]=this._createNamed(sr[or])),this.encoders[or]},lr.prototype.encode=function(or,ur,hr){return this._getEncoder(ur).encode(or,hr)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(rr,nr,ir){const sr=rr("inherits"),ar=rr("../base/reporter").Reporter,cr=rr("safer-buffer").Buffer;function lr(ur,hr){ar.call(this,hr),cr.isBuffer(ur)?(this.base=ur,this.offset=0,this.length=ur.length):this.error("Input not Buffer")}function or(ur,hr){if(Array.isArray(ur))this.length=0,this.value=ur.map(function(dr){return or.isEncoderBuffer(dr)||(dr=new or(dr,hr)),this.length+=dr.length,dr},this);else if(typeof ur=="number"){if(!(0<=ur&&ur<=255))return hr.error("non-byte EncoderBuffer value");this.value=ur,this.length=1}else if(typeof ur=="string")this.value=ur,this.length=cr.byteLength(ur);else{if(!cr.isBuffer(ur))return hr.error("Unsupported type: "+typeof ur);this.value=ur,this.length=ur.length}}sr(lr,ar),ir.DecoderBuffer=lr,lr.isDecoderBuffer=function(ur){return ur instanceof lr?!0:typeof ur=="object"&&cr.isBuffer(ur.base)&&ur.constructor.name==="DecoderBuffer"&&typeof ur.offset=="number"&&typeof ur.length=="number"&&typeof ur.save=="function"&&typeof ur.restore=="function"&&typeof ur.isEmpty=="function"&&typeof ur.readUInt8=="function"&&typeof ur.skip=="function"&&typeof ur.raw=="function"},lr.prototype.save=function(){return{offset:this.offset,reporter:ar.prototype.save.call(this)}},lr.prototype.restore=function(ur){const hr=new lr(this.base);return hr.offset=ur.offset,hr.length=this.offset,this.offset=ur.offset,ar.prototype.restore.call(this,ur.reporter),hr},lr.prototype.isEmpty=function(){return this.offset===this.length},lr.prototype.readUInt8=function(ur){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(ur||"DecoderBuffer overrun")},lr.prototype.skip=function(ur,hr){if(!(this.offset+ur<=this.length))return this.error(hr||"DecoderBuffer overrun");const dr=new lr(this.base);return dr._reporterState=this._reporterState,dr.offset=this.offset,dr.length=this.offset+ur,this.offset+=ur,dr},lr.prototype.raw=function(ur){return this.base.slice(ur?ur.offset:this.offset,this.length)},ir.EncoderBuffer=or,or.isEncoderBuffer=function(ur){return ur instanceof or?!0:typeof ur=="object"&&ur.constructor.name==="EncoderBuffer"&&typeof ur.length=="number"&&typeof ur.join=="function"},or.prototype.join=function(ur,hr){return ur||(ur=cr.alloc(this.length)),hr||(hr=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(dr){dr.join(ur,hr),hr+=dr.length}):(typeof this.value=="number"?ur[hr]=this.value:typeof this.value=="string"?ur.write(this.value,hr):cr.isBuffer(this.value)&&this.value.copy(ur,hr),hr+=this.length)),ur}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(rr,nr,ir){const sr=ir;sr.Reporter=rr("./reporter").Reporter,sr.DecoderBuffer=rr("./buffer").DecoderBuffer,sr.EncoderBuffer=rr("./buffer").EncoderBuffer,sr.Node=rr("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(rr,nr,ir){const sr=rr("../base/reporter").Reporter,ar=rr("../base/buffer").EncoderBuffer,cr=rr("../base/buffer").DecoderBuffer,lr=rr("minimalistic-assert"),or=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],ur=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(or);function hr(fr,gr,br){const pr={};this._baseState=pr,pr.name=br,pr.enc=fr,pr.parent=gr||null,pr.children=null,pr.tag=null,pr.args=null,pr.reverseArgs=null,pr.choice=null,pr.optional=!1,pr.any=!1,pr.obj=!1,pr.use=null,pr.useDecoder=null,pr.key=null,pr.default=null,pr.explicit=null,pr.implicit=null,pr.contains=null,pr.parent||(pr.children=[],this._wrap())}nr.exports=hr;const dr=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];hr.prototype.clone=function(){const fr=this._baseState,gr={};dr.forEach(function(pr){gr[pr]=fr[pr]});const br=new this.constructor(gr.parent);return br._baseState=gr,br},hr.prototype._wrap=function(){const fr=this._baseState;ur.forEach(function(gr){this[gr]=function(){const br=new this.constructor(this);return fr.children.push(br),br[gr].apply(br,arguments)}},this)},hr.prototype._init=function(fr){const gr=this._baseState;lr(gr.parent===null),fr.call(this),gr.children=gr.children.filter(function(br){return br._baseState.parent===this},this),lr.equal(gr.children.length,1,"Root node can have only one child")},hr.prototype._useArgs=function(fr){const gr=this._baseState,br=fr.filter(function(pr){return pr instanceof this.constructor},this);fr=fr.filter(function(pr){return!(pr instanceof this.constructor)},this),br.length!==0&&(lr(gr.children===null),gr.children=br,br.forEach(function(pr){pr._baseState.parent=this},this)),fr.length!==0&&(lr(gr.args===null),gr.args=fr,gr.reverseArgs=fr.map(function(pr){if(typeof pr!="object"||pr.constructor!==Object)return pr;const mr={};return Object.keys(pr).forEach(function(yr){yr==(0|yr)&&(yr|=0);const xr=pr[yr];mr[xr]=yr}),mr}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(fr){hr.prototype[fr]=function(){const gr=this._baseState;throw new Error(fr+" not implemented for encoding: "+gr.enc)}}),or.forEach(function(fr){hr.prototype[fr]=function(){const gr=this._baseState,br=Array.prototype.slice.call(arguments);return lr(gr.tag===null),gr.tag=fr,this._useArgs(br),this}}),hr.prototype.use=function(fr){lr(fr);const gr=this._baseState;return lr(gr.use===null),gr.use=fr,this},hr.prototype.optional=function(){return this._baseState.optional=!0,this},hr.prototype.def=function(fr){const gr=this._baseState;return lr(gr.default===null),gr.default=fr,gr.optional=!0,this},hr.prototype.explicit=function(fr){const gr=this._baseState;return lr(gr.explicit===null&&gr.implicit===null),gr.explicit=fr,this},hr.prototype.implicit=function(fr){const gr=this._baseState;return lr(gr.explicit===null&&gr.implicit===null),gr.implicit=fr,this},hr.prototype.obj=function(){const fr=this._baseState,gr=Array.prototype.slice.call(arguments);return fr.obj=!0,gr.length!==0&&this._useArgs(gr),this},hr.prototype.key=function(fr){const gr=this._baseState;return lr(gr.key===null),gr.key=fr,this},hr.prototype.any=function(){return this._baseState.any=!0,this},hr.prototype.choice=function(fr){const gr=this._baseState;return lr(gr.choice===null),gr.choice=fr,this._useArgs(Object.keys(fr).map(function(br){return fr[br]})),this},hr.prototype.contains=function(fr){const gr=this._baseState;return lr(gr.use===null),gr.contains=fr,this},hr.prototype._decode=function(fr,gr){const br=this._baseState;if(br.parent===null)return fr.wrapResult(br.children[0]._decode(fr,gr));let pr,mr=br.default,yr=!0,xr=null;if(br.key!==null&&(xr=fr.enterKey(br.key)),br.optional){let vr=null;if(br.explicit!==null?vr=br.explicit:br.implicit!==null?vr=br.implicit:br.tag!==null&&(vr=br.tag),vr!==null||br.any){if(yr=this._peekTag(fr,vr,br.any),fr.isError(yr))return yr}else{const _r=fr.save();try{br.choice===null?this._decodeGeneric(br.tag,fr,gr):this._decodeChoice(fr,gr),yr=!0}catch{yr=!1}fr.restore(_r)}}if(br.obj&&yr&&(pr=fr.enterObject()),yr){if(br.explicit!==null){const _r=this._decodeTag(fr,br.explicit);if(fr.isError(_r))return _r;fr=_r}const vr=fr.offset;if(br.use===null&&br.choice===null){let _r;br.any&&(_r=fr.save());const Er=this._decodeTag(fr,br.implicit!==null?br.implicit:br.tag,br.any);if(fr.isError(Er))return Er;br.any?mr=fr.raw(_r):fr=Er}if(gr&&gr.track&&br.tag!==null&&gr.track(fr.path(),vr,fr.length,"tagged"),gr&&gr.track&&br.tag!==null&&gr.track(fr.path(),fr.offset,fr.length,"content"),br.any||(mr=br.choice===null?this._decodeGeneric(br.tag,fr,gr):this._decodeChoice(fr,gr)),fr.isError(mr))return mr;if(br.any||br.choice!==null||br.children===null||br.children.forEach(function(_r){_r._decode(fr,gr)}),br.contains&&(br.tag==="octstr"||br.tag==="bitstr")){const _r=new cr(mr);mr=this._getUse(br.contains,fr._reporterState.obj)._decode(_r,gr)}}return br.obj&&yr&&(mr=fr.leaveObject(pr)),br.key===null||mr===null&&yr!==!0?xr!==null&&fr.exitKey(xr):fr.leaveKey(xr,br.key,mr),mr},hr.prototype._decodeGeneric=function(fr,gr,br){const pr=this._baseState;return fr==="seq"||fr==="set"?null:fr==="seqof"||fr==="setof"?this._decodeList(gr,fr,pr.args[0],br):/str$/.test(fr)?this._decodeStr(gr,fr,br):fr==="objid"&&pr.args?this._decodeObjid(gr,pr.args[0],pr.args[1],br):fr==="objid"?this._decodeObjid(gr,null,null,br):fr==="gentime"||fr==="utctime"?this._decodeTime(gr,fr,br):fr==="null_"?this._decodeNull(gr,br):fr==="bool"?this._decodeBool(gr,br):fr==="objDesc"?this._decodeStr(gr,fr,br):fr==="int"||fr==="enum"?this._decodeInt(gr,pr.args&&pr.args[0],br):pr.use!==null?this._getUse(pr.use,gr._reporterState.obj)._decode(gr,br):gr.error("unknown tag: "+fr)},hr.prototype._getUse=function(fr,gr){const br=this._baseState;return br.useDecoder=this._use(fr,gr),lr(br.useDecoder._baseState.parent===null),br.useDecoder=br.useDecoder._baseState.children[0],br.implicit!==br.useDecoder._baseState.implicit&&(br.useDecoder=br.useDecoder.clone(),br.useDecoder._baseState.implicit=br.implicit),br.useDecoder},hr.prototype._decodeChoice=function(fr,gr){const br=this._baseState;let pr=null,mr=!1;return Object.keys(br.choice).some(function(yr){const xr=fr.save(),vr=br.choice[yr];try{const _r=vr._decode(fr,gr);if(fr.isError(_r))return!1;pr={type:yr,value:_r},mr=!0}catch{return fr.restore(xr),!1}return!0},this),mr?pr:fr.error("Choice not matched")},hr.prototype._createEncoderBuffer=function(fr){return new ar(fr,this.reporter)},hr.prototype._encode=function(fr,gr,br){const pr=this._baseState;if(pr.default!==null&&pr.default===fr)return;const mr=this._encodeValue(fr,gr,br);return mr===void 0||this._skipDefault(mr,gr,br)?void 0:mr},hr.prototype._encodeValue=function(fr,gr,br){const pr=this._baseState;if(pr.parent===null)return pr.children[0]._encode(fr,gr||new sr);let mr=null;if(this.reporter=gr,pr.optional&&fr===void 0){if(pr.default===null)return;fr=pr.default}let yr=null,xr=!1;if(pr.any)mr=this._createEncoderBuffer(fr);else if(pr.choice)mr=this._encodeChoice(fr,gr);else if(pr.contains)yr=this._getUse(pr.contains,br)._encode(fr,gr),xr=!0;else if(pr.children)yr=pr.children.map(function(vr){if(vr._baseState.tag==="null_")return vr._encode(null,gr,fr);if(vr._baseState.key===null)return gr.error("Child should have a key");const _r=gr.enterKey(vr._baseState.key);if(typeof fr!="object")return gr.error("Child expected, but input is not object");const Er=vr._encode(fr[vr._baseState.key],gr,fr);return gr.leaveKey(_r),Er},this).filter(function(vr){return vr}),yr=this._createEncoderBuffer(yr);else if(pr.tag==="seqof"||pr.tag==="setof"){if(!pr.args||pr.args.length!==1)return gr.error("Too many args for : "+pr.tag);if(!Array.isArray(fr))return gr.error("seqof/setof, but data is not Array");const vr=this.clone();vr._baseState.implicit=null,yr=this._createEncoderBuffer(fr.map(function(_r){const Er=this._baseState;return this._getUse(Er.args[0],fr)._encode(_r,gr)},vr))}else pr.use!==null?mr=this._getUse(pr.use,br)._encode(fr,gr):(yr=this._encodePrimitive(pr.tag,fr),xr=!0);if(!pr.any&&pr.choice===null){const vr=pr.implicit!==null?pr.implicit:pr.tag,_r=pr.implicit===null?"universal":"context";vr===null?pr.use===null&&gr.error("Tag could be omitted only for .use()"):pr.use===null&&(mr=this._encodeComposite(vr,xr,_r,yr))}return pr.explicit!==null&&(mr=this._encodeComposite(pr.explicit,!1,"context",mr)),mr},hr.prototype._encodeChoice=function(fr,gr){const br=this._baseState,pr=br.choice[fr.type];return pr||lr(!1,fr.type+" not found in "+JSON.stringify(Object.keys(br.choice))),pr._encode(fr.value,gr)},hr.prototype._encodePrimitive=function(fr,gr){const br=this._baseState;if(/str$/.test(fr))return this._encodeStr(gr,fr);if(fr==="objid"&&br.args)return this._encodeObjid(gr,br.reverseArgs[0],br.args[1]);if(fr==="objid")return this._encodeObjid(gr,null,null);if(fr==="gentime"||fr==="utctime")return this._encodeTime(gr,fr);if(fr==="null_")return this._encodeNull();if(fr==="int"||fr==="enum")return this._encodeInt(gr,br.args&&br.reverseArgs[0]);if(fr==="bool")return this._encodeBool(gr);if(fr==="objDesc")return this._encodeStr(gr,fr);throw new Error("Unsupported tag: "+fr)},hr.prototype._isNumstr=function(fr){return/^[0-9 ]*$/.test(fr)},hr.prototype._isPrintstr=function(fr){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(fr)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(rr,nr,ir){const sr=rr("inherits");function ar(lr){this._reporterState={obj:null,path:[],options:lr||{},errors:[]}}function cr(lr,or){this.path=lr,this.rethrow(or)}ir.Reporter=ar,ar.prototype.isError=function(lr){return lr instanceof cr},ar.prototype.save=function(){const lr=this._reporterState;return{obj:lr.obj,pathLen:lr.path.length}},ar.prototype.restore=function(lr){const or=this._reporterState;or.obj=lr.obj,or.path=or.path.slice(0,lr.pathLen)},ar.prototype.enterKey=function(lr){return this._reporterState.path.push(lr)},ar.prototype.exitKey=function(lr){const or=this._reporterState;or.path=or.path.slice(0,lr-1)},ar.prototype.leaveKey=function(lr,or,ur){const hr=this._reporterState;this.exitKey(lr),hr.obj!==null&&(hr.obj[or]=ur)},ar.prototype.path=function(){return this._reporterState.path.join("/")},ar.prototype.enterObject=function(){const lr=this._reporterState,or=lr.obj;return lr.obj={},or},ar.prototype.leaveObject=function(lr){const or=this._reporterState,ur=or.obj;return or.obj=lr,ur},ar.prototype.error=function(lr){let or;const ur=this._reporterState,hr=lr instanceof cr;if(or=hr?lr:new cr(ur.path.map(function(dr){return"["+JSON.stringify(dr)+"]"}).join(""),lr.message||lr,lr.stack),!ur.options.partial)throw or;return hr||ur.errors.push(or),or},ar.prototype.wrapResult=function(lr){const or=this._reporterState;return or.options.partial?{result:this.isError(lr)?null:lr,errors:or.errors}:lr},sr(cr,Error),cr.prototype.rethrow=function(lr){if(this.message=lr+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,cr),!this.stack)try{throw new Error(this.message)}catch(or){this.stack=or.stack}return this}},{inherits:440}],176:[function(rr,nr,ir){function sr(ar){const cr={};return Object.keys(ar).forEach(function(lr){(0|lr)==lr&&(lr|=0);const or=ar[lr];cr[or]=lr}),cr}ir.tagClass={0:"universal",1:"application",2:"context",3:"private"},ir.tagClassByName=sr(ir.tagClass),ir.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},ir.tagByName=sr(ir.tag)},{}],177:[function(rr,nr,ir){const sr=ir;sr._reverse=function(ar){const cr={};return Object.keys(ar).forEach(function(lr){(0|lr)==lr&&(lr|=0);const or=ar[lr];cr[or]=lr}),cr},sr.der=rr("./der")},{"./der":176}],178:[function(rr,nr,ir){const sr=rr("inherits"),ar=rr("bn.js"),cr=rr("../base/buffer").DecoderBuffer,lr=rr("../base/node"),or=rr("../constants/der");function ur(gr){this.enc="der",this.name=gr.name,this.entity=gr,this.tree=new hr,this.tree._init(gr.body)}function hr(gr){lr.call(this,"der",gr)}function dr(gr,br){let pr=gr.readUInt8(br);if(gr.isError(pr))return pr;const mr=or.tagClass[pr>>6],yr=(32&pr)==0;if((31&pr)==31){let xr=pr;for(pr=0;(128&xr)==128;){if(xr=gr.readUInt8(br),gr.isError(xr))return xr;pr<<=7,pr|=127&xr}}else pr&=31;return{cls:mr,primitive:yr,tag:pr,tagStr:or.tag[pr]}}function fr(gr,br,pr){let mr=gr.readUInt8(pr);if(gr.isError(mr))return mr;if(!br&&mr===128)return null;if(!(128&mr))return mr;const yr=127&mr;if(yr>4)return gr.error("length octect is too long");mr=0;for(let xr=0;xr<yr;xr++){mr<<=8;const vr=gr.readUInt8(pr);if(gr.isError(vr))return vr;mr|=vr}return mr}nr.exports=ur,ur.prototype.decode=function(gr,br){return cr.isDecoderBuffer(gr)||(gr=new cr(gr,br)),this.tree._decode(gr,br)},sr(hr,lr),hr.prototype._peekTag=function(gr,br,pr){if(gr.isEmpty())return!1;const mr=gr.save(),yr=dr(gr,'Failed to peek tag: "'+br+'"');return gr.isError(yr)?yr:(gr.restore(mr),yr.tag===br||yr.tagStr===br||yr.tagStr+"of"===br||pr)},hr.prototype._decodeTag=function(gr,br,pr){const mr=dr(gr,'Failed to decode tag of "'+br+'"');if(gr.isError(mr))return mr;let yr=fr(gr,mr.primitive,'Failed to get length of "'+br+'"');if(gr.isError(yr))return yr;if(!pr&&mr.tag!==br&&mr.tagStr!==br&&mr.tagStr+"of"!==br)return gr.error('Failed to match tag: "'+br+'"');if(mr.primitive||yr!==null)return gr.skip(yr,'Failed to match body of: "'+br+'"');const xr=gr.save(),vr=this._skipUntilEnd(gr,'Failed to skip indefinite length body: "'+this.tag+'"');return gr.isError(vr)?vr:(yr=gr.offset-xr.offset,gr.restore(xr),gr.skip(yr,'Failed to match body of: "'+br+'"'))},hr.prototype._skipUntilEnd=function(gr,br){for(;;){const pr=dr(gr,br);if(gr.isError(pr))return pr;const mr=fr(gr,pr.primitive,br);if(gr.isError(mr))return mr;let yr;if(yr=pr.primitive||mr!==null?gr.skip(mr):this._skipUntilEnd(gr,br),gr.isError(yr))return yr;if(pr.tagStr==="end")break}},hr.prototype._decodeList=function(gr,br,pr,mr){const yr=[];for(;!gr.isEmpty();){const xr=this._peekTag(gr,"end");if(gr.isError(xr))return xr;const vr=pr.decode(gr,"der",mr);if(gr.isError(vr)&&xr)break;yr.push(vr)}return yr},hr.prototype._decodeStr=function(gr,br){if(br==="bitstr"){const pr=gr.readUInt8();return gr.isError(pr)?pr:{unused:pr,data:gr.raw()}}if(br==="bmpstr"){const pr=gr.raw();if(pr.length%2==1)return gr.error("Decoding of string type: bmpstr length mismatch");let mr="";for(let yr=0;yr<pr.length/2;yr++)mr+=String.fromCharCode(pr.readUInt16BE(2*yr));return mr}if(br==="numstr"){const pr=gr.raw().toString("ascii");return this._isNumstr(pr)?pr:gr.error("Decoding of string type: numstr unsupported characters")}if(br==="octstr"||br==="objDesc")return gr.raw();if(br==="printstr"){const pr=gr.raw().toString("ascii");return this._isPrintstr(pr)?pr:gr.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(br)?gr.raw().toString():gr.error("Decoding of string type: "+br+" unsupported")},hr.prototype._decodeObjid=function(gr,br,pr){let mr;const yr=[];let xr=0,vr=0;for(;!gr.isEmpty();)vr=gr.readUInt8(),xr<<=7,xr|=127&vr,!(128&vr)&&(yr.push(xr),xr=0);128&vr&&yr.push(xr);const _r=yr[0]/40|0,Er=yr[0]%40;if(mr=pr?yr:[_r,Er].concat(yr.slice(1)),br){let Tr=br[mr.join(" ")];Tr===void 0&&(Tr=br[mr.join(".")]),Tr!==void 0&&(mr=Tr)}return mr},hr.prototype._decodeTime=function(gr,br){const pr=gr.raw().toString();let mr,yr,xr,vr,_r,Er;if(br==="gentime")mr=0|pr.slice(0,4),yr=0|pr.slice(4,6),xr=0|pr.slice(6,8),vr=0|pr.slice(8,10),_r=0|pr.slice(10,12),Er=0|pr.slice(12,14);else{if(br!=="utctime")return gr.error("Decoding "+br+" time is not supported yet");mr=0|pr.slice(0,2),yr=0|pr.slice(2,4),xr=0|pr.slice(4,6),vr=0|pr.slice(6,8),_r=0|pr.slice(8,10),Er=0|pr.slice(10,12),mr=mr<70?2e3+mr:1900+mr}return Date.UTC(mr,yr-1,xr,vr,_r,Er,0)},hr.prototype._decodeNull=function(){return null},hr.prototype._decodeBool=function(gr){const br=gr.readUInt8();return gr.isError(br)?br:br!==0},hr.prototype._decodeInt=function(gr,br){const pr=gr.raw();let mr=new ar(pr);return br&&(mr=br[mr.toString(10)]||mr),mr},hr.prototype._use=function(gr,br){return typeof gr=="function"&&(gr=gr(br)),gr._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(rr,nr,ir){const sr=ir;sr.der=rr("./der"),sr.pem=rr("./pem")},{"./der":178,"./pem":180}],180:[function(rr,nr,ir){const sr=rr("inherits"),ar=rr("safer-buffer").Buffer,cr=rr("./der");function lr(or){cr.call(this,or),this.enc="pem"}sr(lr,cr),nr.exports=lr,lr.prototype.decode=function(or,ur){const hr=or.toString().split(/[\r\n]+/g),dr=ur.label.toUpperCase(),fr=/^-----(BEGIN|END) ([^-]+)-----$/;let gr=-1,br=-1;for(let yr=0;yr<hr.length;yr++){const xr=hr[yr].match(fr);if(xr!==null&&xr[2]===dr){if(gr!==-1){if(xr[1]!=="END")break;br=yr;break}if(xr[1]!=="BEGIN")break;gr=yr}}if(gr===-1||br===-1)throw new Error("PEM section not found for: "+dr);const pr=hr.slice(gr+1,br).join("");pr.replace(/[^a-z0-9+/=]+/gi,"");const mr=ar.from(pr,"base64");return cr.prototype.decode.call(this,mr,ur)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(rr,nr,ir){const sr=rr("inherits"),ar=rr("safer-buffer").Buffer,cr=rr("../base/node"),lr=rr("../constants/der");function or(dr){this.enc="der",this.name=dr.name,this.entity=dr,this.tree=new ur,this.tree._init(dr.body)}function ur(dr){cr.call(this,"der",dr)}function hr(dr){return dr<10?"0"+dr:dr}nr.exports=or,or.prototype.encode=function(dr,fr){return this.tree._encode(dr,fr).join()},sr(ur,cr),ur.prototype._encodeComposite=function(dr,fr,gr,br){const pr=function(xr,vr,_r,Er){let Tr;if(xr==="seqof"?xr="seq":xr==="setof"&&(xr="set"),lr.tagByName.hasOwnProperty(xr))Tr=lr.tagByName[xr];else{if(typeof xr!="number"||(0|xr)!==xr)return Er.error("Unknown tag: "+xr);Tr=xr}return Tr>=31?Er.error("Multi-octet tag encoding unsupported"):(vr||(Tr|=32),Tr|=lr.tagClassByName[_r||"universal"]<<6,Tr)}(dr,fr,gr,this.reporter);if(br.length<128){const xr=ar.alloc(2);return xr[0]=pr,xr[1]=br.length,this._createEncoderBuffer([xr,br])}let mr=1;for(let xr=br.length;xr>=256;xr>>=8)mr++;const yr=ar.alloc(2+mr);yr[0]=pr,yr[1]=128|mr;for(let xr=1+mr,vr=br.length;vr>0;xr--,vr>>=8)yr[xr]=255&vr;return this._createEncoderBuffer([yr,br])},ur.prototype._encodeStr=function(dr,fr){if(fr==="bitstr")return this._createEncoderBuffer([0|dr.unused,dr.data]);if(fr==="bmpstr"){const gr=ar.alloc(2*dr.length);for(let br=0;br<dr.length;br++)gr.writeUInt16BE(dr.charCodeAt(br),2*br);return this._createEncoderBuffer(gr)}return fr==="numstr"?this._isNumstr(dr)?this._createEncoderBuffer(dr):this.reporter.error("Encoding of string type: numstr supports only digits and space"):fr==="printstr"?this._isPrintstr(dr)?this._createEncoderBuffer(dr):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(fr)||fr==="objDesc"?this._createEncoderBuffer(dr):this.reporter.error("Encoding of string type: "+fr+" unsupported")},ur.prototype._encodeObjid=function(dr,fr,gr){if(typeof dr=="string"){if(!fr)return this.reporter.error("string objid given, but no values map found");if(!fr.hasOwnProperty(dr))return this.reporter.error("objid not found in values map");dr=fr[dr].split(/[\s.]+/g);for(let yr=0;yr<dr.length;yr++)dr[yr]|=0}else if(Array.isArray(dr)){dr=dr.slice();for(let yr=0;yr<dr.length;yr++)dr[yr]|=0}if(!Array.isArray(dr))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(dr));if(!gr){if(dr[1]>=40)return this.reporter.error("Second objid identifier OOB");dr.splice(0,2,40*dr[0]+dr[1])}let br=0;for(let yr=0;yr<dr.length;yr++){let xr=dr[yr];for(br++;xr>=128;xr>>=7)br++}const pr=ar.alloc(br);let mr=pr.length-1;for(let yr=dr.length-1;yr>=0;yr--){let xr=dr[yr];for(pr[mr--]=127&xr;(xr>>=7)>0;)pr[mr--]=128|127&xr}return this._createEncoderBuffer(pr)},ur.prototype._encodeTime=function(dr,fr){let gr;const br=new Date(dr);return fr==="gentime"?gr=[hr(br.getUTCFullYear()),hr(br.getUTCMonth()+1),hr(br.getUTCDate()),hr(br.getUTCHours()),hr(br.getUTCMinutes()),hr(br.getUTCSeconds()),"Z"].join(""):fr==="utctime"?gr=[hr(br.getUTCFullYear()%100),hr(br.getUTCMonth()+1),hr(br.getUTCDate()),hr(br.getUTCHours()),hr(br.getUTCMinutes()),hr(br.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+fr+" time is not supported yet"),this._encodeStr(gr,"octstr")},ur.prototype._encodeNull=function(){return this._createEncoderBuffer("")},ur.prototype._encodeInt=function(dr,fr){if(typeof dr=="string"){if(!fr)return this.reporter.error("String int or enum given, but no values map");if(!fr.hasOwnProperty(dr))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(dr));dr=fr[dr]}if(typeof dr!="number"&&!ar.isBuffer(dr)){const pr=dr.toArray();!dr.sign&&128&pr[0]&&pr.unshift(0),dr=ar.from(pr)}if(ar.isBuffer(dr)){let pr=dr.length;dr.length===0&&pr++;const mr=ar.alloc(pr);return dr.copy(mr),dr.length===0&&(mr[0]=0),this._createEncoderBuffer(mr)}if(dr<128)return this._createEncoderBuffer(dr);if(dr<256)return this._createEncoderBuffer([0,dr]);let gr=1;for(let pr=dr;pr>=256;pr>>=8)gr++;const br=new Array(gr);for(let pr=br.length-1;pr>=0;pr--)br[pr]=255&dr,dr>>=8;return 128&br[0]&&br.unshift(0),this._createEncoderBuffer(ar.from(br))},ur.prototype._encodeBool=function(dr){return this._createEncoderBuffer(dr?255:0)},ur.prototype._use=function(dr,fr){return typeof dr=="function"&&(dr=dr(fr)),dr._getEncoder("der").tree},ur.prototype._skipDefault=function(dr,fr,gr){const br=this._baseState;let pr;if(br.default===null)return!1;const mr=dr.join();if(br.defaultBuffer===void 0&&(br.defaultBuffer=this._encodeValue(br.default,fr,gr).join()),mr.length!==br.defaultBuffer.length)return!1;for(pr=0;pr<mr.length;pr++)if(mr[pr]!==br.defaultBuffer[pr])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(rr,nr,ir){const sr=ir;sr.der=rr("./der"),sr.pem=rr("./pem")},{"./der":181,"./pem":183}],183:[function(rr,nr,ir){const sr=rr("inherits"),ar=rr("./der");function cr(lr){ar.call(this,lr),this.enc="pem"}sr(cr,ar),nr.exports=cr,cr.prototype.encode=function(lr,or){const ur=ar.prototype.encode.call(this,lr).toString("base64"),hr=["-----BEGIN "+or.label+"-----"];for(let dr=0;dr<ur.length;dr+=64)hr.push(ur.slice(dr,dr+64));return hr.push("-----END "+or.label+"-----"),hr.join(`
`)}},{"./der":181,inherits:440}],184:[function(rr,nr,ir){(function(sr,ar){function cr(jr,Lr){if(!jr)throw new Error(Lr||"Assertion failed")}function lr(jr,Lr){jr.super_=Lr;var Cr=function(){};Cr.prototype=Lr.prototype,jr.prototype=new Cr,jr.prototype.constructor=jr}function or(jr,Lr,Cr){if(or.isBN(jr))return jr;this.negative=0,this.words=null,this.length=0,this.red=null,jr!==null&&(Lr!=="le"&&Lr!=="be"||(Cr=Lr,Lr=10),this._init(jr||0,Lr||10,Cr||"be"))}var ur;typeof sr=="object"?sr.exports=or:(void 0).BN=or,or.BN=or,or.wordSize=26;try{ur=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:rr("buffer").Buffer}catch{}function hr(jr,Lr){var Cr=jr.charCodeAt(Lr);return Cr>=65&&Cr<=70?Cr-55:Cr>=97&&Cr<=102?Cr-87:Cr-48&15}function dr(jr,Lr,Cr){var wr=hr(jr,Cr);return Cr-1>=Lr&&(wr|=hr(jr,Cr-1)<<4),wr}function fr(jr,Lr,Cr,wr){for(var Pr=0,Ar=Math.min(jr.length,Cr),Sr=Lr;Sr<Ar;Sr++){var Mr=jr.charCodeAt(Sr)-48;Pr*=wr,Pr+=Mr>=49?Mr-49+10:Mr>=17?Mr-17+10:Mr}return Pr}or.isBN=function(jr){return jr instanceof or||jr!==null&&typeof jr=="object"&&jr.constructor.wordSize===or.wordSize&&Array.isArray(jr.words)},or.max=function(jr,Lr){return jr.cmp(Lr)>0?jr:Lr},or.min=function(jr,Lr){return jr.cmp(Lr)<0?jr:Lr},or.prototype._init=function(jr,Lr,Cr){if(typeof jr=="number")return this._initNumber(jr,Lr,Cr);if(typeof jr=="object")return this._initArray(jr,Lr,Cr);Lr==="hex"&&(Lr=16),cr(Lr===(0|Lr)&&Lr>=2&&Lr<=36);var wr=0;(jr=jr.toString().replace(/\s+/g,""))[0]==="-"&&(wr++,this.negative=1),wr<jr.length&&(Lr===16?this._parseHex(jr,wr,Cr):(this._parseBase(jr,Lr,wr),Cr==="le"&&this._initArray(this.toArray(),Lr,Cr)))},or.prototype._initNumber=function(jr,Lr,Cr){jr<0&&(this.negative=1,jr=-jr),jr<67108864?(this.words=[67108863&jr],this.length=1):jr<4503599627370496?(this.words=[67108863&jr,jr/67108864&67108863],this.length=2):(cr(jr<9007199254740992),this.words=[67108863&jr,jr/67108864&67108863,1],this.length=3),Cr==="le"&&this._initArray(this.toArray(),Lr,Cr)},or.prototype._initArray=function(jr,Lr,Cr){if(cr(typeof jr.length=="number"),jr.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(jr.length/3),this.words=new Array(this.length);for(var wr=0;wr<this.length;wr++)this.words[wr]=0;var Pr,Ar,Sr=0;if(Cr==="be")for(wr=jr.length-1,Pr=0;wr>=0;wr-=3)Ar=jr[wr]|jr[wr-1]<<8|jr[wr-2]<<16,this.words[Pr]|=Ar<<Sr&67108863,this.words[Pr+1]=Ar>>>26-Sr&67108863,(Sr+=24)>=26&&(Sr-=26,Pr++);else if(Cr==="le")for(wr=0,Pr=0;wr<jr.length;wr+=3)Ar=jr[wr]|jr[wr+1]<<8|jr[wr+2]<<16,this.words[Pr]|=Ar<<Sr&67108863,this.words[Pr+1]=Ar>>>26-Sr&67108863,(Sr+=24)>=26&&(Sr-=26,Pr++);return this.strip()},or.prototype._parseHex=function(jr,Lr,Cr){this.length=Math.ceil((jr.length-Lr)/6),this.words=new Array(this.length);for(var wr=0;wr<this.length;wr++)this.words[wr]=0;var Pr,Ar=0,Sr=0;if(Cr==="be")for(wr=jr.length-1;wr>=Lr;wr-=2)Pr=dr(jr,Lr,wr)<<Ar,this.words[Sr]|=67108863&Pr,Ar>=18?(Ar-=18,Sr+=1,this.words[Sr]|=Pr>>>26):Ar+=8;else for(wr=(jr.length-Lr)%2==0?Lr+1:Lr;wr<jr.length;wr+=2)Pr=dr(jr,Lr,wr)<<Ar,this.words[Sr]|=67108863&Pr,Ar>=18?(Ar-=18,Sr+=1,this.words[Sr]|=Pr>>>26):Ar+=8;this.strip()},or.prototype._parseBase=function(jr,Lr,Cr){this.words=[0],this.length=1;for(var wr=0,Pr=1;Pr<=67108863;Pr*=Lr)wr++;wr--,Pr=Pr/Lr|0;for(var Ar=jr.length-Cr,Sr=Ar%wr,Mr=Math.min(Ar,Ar-Sr)+Cr,qr=0,$r=Cr;$r<Mr;$r+=wr)qr=fr(jr,$r,$r+wr,Lr),this.imuln(Pr),this.words[0]+qr<67108864?this.words[0]+=qr:this._iaddn(qr);if(Sr!==0){var Br=1;for(qr=fr(jr,$r,jr.length,Lr),$r=0;$r<Sr;$r++)Br*=Lr;this.imuln(Br),this.words[0]+qr<67108864?this.words[0]+=qr:this._iaddn(qr)}this.strip()},or.prototype.copy=function(jr){jr.words=new Array(this.length);for(var Lr=0;Lr<this.length;Lr++)jr.words[Lr]=this.words[Lr];jr.length=this.length,jr.negative=this.negative,jr.red=this.red},or.prototype.clone=function(){var jr=new or(null);return this.copy(jr),jr},or.prototype._expand=function(jr){for(;this.length<jr;)this.words[this.length++]=0;return this},or.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},or.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},or.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var gr=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],br=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],pr=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function mr(jr,Lr,Cr){Cr.negative=Lr.negative^jr.negative;var wr=jr.length+Lr.length|0;Cr.length=wr,wr=wr-1|0;var Pr=0|jr.words[0],Ar=0|Lr.words[0],Sr=Pr*Ar,Mr=67108863&Sr,qr=Sr/67108864|0;Cr.words[0]=Mr;for(var $r=1;$r<wr;$r++){for(var Br=qr>>>26,zr=67108863&qr,Gr=Math.min($r,Lr.length-1),Vr=Math.max(0,$r-jr.length+1);Vr<=Gr;Vr++){var Xr=$r-Vr|0;Br+=(Sr=(Pr=0|jr.words[Xr])*(Ar=0|Lr.words[Vr])+zr)/67108864|0,zr=67108863&Sr}Cr.words[$r]=0|zr,qr=0|Br}return qr!==0?Cr.words[$r]=0|qr:Cr.length--,Cr.strip()}or.prototype.toString=function(jr,Lr){var Cr;if(Lr=0|Lr||1,(jr=jr||10)===16||jr==="hex"){Cr="";for(var wr=0,Pr=0,Ar=0;Ar<this.length;Ar++){var Sr=this.words[Ar],Mr=(16777215&(Sr<<wr|Pr)).toString(16);Cr=(Pr=Sr>>>24-wr&16777215)!==0||Ar!==this.length-1?gr[6-Mr.length]+Mr+Cr:Mr+Cr,(wr+=2)>=26&&(wr-=26,Ar--)}for(Pr!==0&&(Cr=Pr.toString(16)+Cr);Cr.length%Lr!=0;)Cr="0"+Cr;return this.negative!==0&&(Cr="-"+Cr),Cr}if(jr===(0|jr)&&jr>=2&&jr<=36){var qr=br[jr],$r=pr[jr];Cr="";var Br=this.clone();for(Br.negative=0;!Br.isZero();){var zr=Br.modn($r).toString(jr);Cr=(Br=Br.idivn($r)).isZero()?zr+Cr:gr[qr-zr.length]+zr+Cr}for(this.isZero()&&(Cr="0"+Cr);Cr.length%Lr!=0;)Cr="0"+Cr;return this.negative!==0&&(Cr="-"+Cr),Cr}cr(!1,"Base should be between 2 and 36")},or.prototype.toNumber=function(){var jr=this.words[0];return this.length===2?jr+=67108864*this.words[1]:this.length===3&&this.words[2]===1?jr+=4503599627370496+67108864*this.words[1]:this.length>2&&cr(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-jr:jr},or.prototype.toJSON=function(){return this.toString(16)},or.prototype.toBuffer=function(jr,Lr){return cr(ur!==void 0),this.toArrayLike(ur,jr,Lr)},or.prototype.toArray=function(jr,Lr){return this.toArrayLike(Array,jr,Lr)},or.prototype.toArrayLike=function(jr,Lr,Cr){var wr=this.byteLength(),Pr=Cr||Math.max(1,wr);cr(wr<=Pr,"byte array longer than desired length"),cr(Pr>0,"Requested array length <= 0"),this.strip();var Ar,Sr,Mr=Lr==="le",qr=new jr(Pr),$r=this.clone();if(Mr){for(Sr=0;!$r.isZero();Sr++)Ar=$r.andln(255),$r.iushrn(8),qr[Sr]=Ar;for(;Sr<Pr;Sr++)qr[Sr]=0}else{for(Sr=0;Sr<Pr-wr;Sr++)qr[Sr]=0;for(Sr=0;!$r.isZero();Sr++)Ar=$r.andln(255),$r.iushrn(8),qr[Pr-Sr-1]=Ar}return qr},Math.clz32?or.prototype._countBits=function(jr){return 32-Math.clz32(jr)}:or.prototype._countBits=function(jr){var Lr=jr,Cr=0;return Lr>=4096&&(Cr+=13,Lr>>>=13),Lr>=64&&(Cr+=7,Lr>>>=7),Lr>=8&&(Cr+=4,Lr>>>=4),Lr>=2&&(Cr+=2,Lr>>>=2),Cr+Lr},or.prototype._zeroBits=function(jr){if(jr===0)return 26;var Lr=jr,Cr=0;return!(8191&Lr)&&(Cr+=13,Lr>>>=13),!(127&Lr)&&(Cr+=7,Lr>>>=7),!(15&Lr)&&(Cr+=4,Lr>>>=4),!(3&Lr)&&(Cr+=2,Lr>>>=2),!(1&Lr)&&Cr++,Cr},or.prototype.bitLength=function(){var jr=this.words[this.length-1],Lr=this._countBits(jr);return 26*(this.length-1)+Lr},or.prototype.zeroBits=function(){if(this.isZero())return 0;for(var jr=0,Lr=0;Lr<this.length;Lr++){var Cr=this._zeroBits(this.words[Lr]);if(jr+=Cr,Cr!==26)break}return jr},or.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},or.prototype.toTwos=function(jr){return this.negative!==0?this.abs().inotn(jr).iaddn(1):this.clone()},or.prototype.fromTwos=function(jr){return this.testn(jr-1)?this.notn(jr).iaddn(1).ineg():this.clone()},or.prototype.isNeg=function(){return this.negative!==0},or.prototype.neg=function(){return this.clone().ineg()},or.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},or.prototype.iuor=function(jr){for(;this.length<jr.length;)this.words[this.length++]=0;for(var Lr=0;Lr<jr.length;Lr++)this.words[Lr]=this.words[Lr]|jr.words[Lr];return this.strip()},or.prototype.ior=function(jr){return cr((this.negative|jr.negative)==0),this.iuor(jr)},or.prototype.or=function(jr){return this.length>jr.length?this.clone().ior(jr):jr.clone().ior(this)},or.prototype.uor=function(jr){return this.length>jr.length?this.clone().iuor(jr):jr.clone().iuor(this)},or.prototype.iuand=function(jr){var Lr;Lr=this.length>jr.length?jr:this;for(var Cr=0;Cr<Lr.length;Cr++)this.words[Cr]=this.words[Cr]&jr.words[Cr];return this.length=Lr.length,this.strip()},or.prototype.iand=function(jr){return cr((this.negative|jr.negative)==0),this.iuand(jr)},or.prototype.and=function(jr){return this.length>jr.length?this.clone().iand(jr):jr.clone().iand(this)},or.prototype.uand=function(jr){return this.length>jr.length?this.clone().iuand(jr):jr.clone().iuand(this)},or.prototype.iuxor=function(jr){var Lr,Cr;this.length>jr.length?(Lr=this,Cr=jr):(Lr=jr,Cr=this);for(var wr=0;wr<Cr.length;wr++)this.words[wr]=Lr.words[wr]^Cr.words[wr];if(this!==Lr)for(;wr<Lr.length;wr++)this.words[wr]=Lr.words[wr];return this.length=Lr.length,this.strip()},or.prototype.ixor=function(jr){return cr((this.negative|jr.negative)==0),this.iuxor(jr)},or.prototype.xor=function(jr){return this.length>jr.length?this.clone().ixor(jr):jr.clone().ixor(this)},or.prototype.uxor=function(jr){return this.length>jr.length?this.clone().iuxor(jr):jr.clone().iuxor(this)},or.prototype.inotn=function(jr){cr(typeof jr=="number"&&jr>=0);var Lr=0|Math.ceil(jr/26),Cr=jr%26;this._expand(Lr),Cr>0&&Lr--;for(var wr=0;wr<Lr;wr++)this.words[wr]=67108863&~this.words[wr];return Cr>0&&(this.words[wr]=~this.words[wr]&67108863>>26-Cr),this.strip()},or.prototype.notn=function(jr){return this.clone().inotn(jr)},or.prototype.setn=function(jr,Lr){cr(typeof jr=="number"&&jr>=0);var Cr=jr/26|0,wr=jr%26;return this._expand(Cr+1),this.words[Cr]=Lr?this.words[Cr]|1<<wr:this.words[Cr]&~(1<<wr),this.strip()},or.prototype.iadd=function(jr){var Lr,Cr,wr;if(this.negative!==0&&jr.negative===0)return this.negative=0,Lr=this.isub(jr),this.negative^=1,this._normSign();if(this.negative===0&&jr.negative!==0)return jr.negative=0,Lr=this.isub(jr),jr.negative=1,Lr._normSign();this.length>jr.length?(Cr=this,wr=jr):(Cr=jr,wr=this);for(var Pr=0,Ar=0;Ar<wr.length;Ar++)Lr=(0|Cr.words[Ar])+(0|wr.words[Ar])+Pr,this.words[Ar]=67108863&Lr,Pr=Lr>>>26;for(;Pr!==0&&Ar<Cr.length;Ar++)Lr=(0|Cr.words[Ar])+Pr,this.words[Ar]=67108863&Lr,Pr=Lr>>>26;if(this.length=Cr.length,Pr!==0)this.words[this.length]=Pr,this.length++;else if(Cr!==this)for(;Ar<Cr.length;Ar++)this.words[Ar]=Cr.words[Ar];return this},or.prototype.add=function(jr){var Lr;return jr.negative!==0&&this.negative===0?(jr.negative=0,Lr=this.sub(jr),jr.negative^=1,Lr):jr.negative===0&&this.negative!==0?(this.negative=0,Lr=jr.sub(this),this.negative=1,Lr):this.length>jr.length?this.clone().iadd(jr):jr.clone().iadd(this)},or.prototype.isub=function(jr){if(jr.negative!==0){jr.negative=0;var Lr=this.iadd(jr);return jr.negative=1,Lr._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(jr),this.negative=1,this._normSign();var Cr,wr,Pr=this.cmp(jr);if(Pr===0)return this.negative=0,this.length=1,this.words[0]=0,this;Pr>0?(Cr=this,wr=jr):(Cr=jr,wr=this);for(var Ar=0,Sr=0;Sr<wr.length;Sr++)Ar=(Lr=(0|Cr.words[Sr])-(0|wr.words[Sr])+Ar)>>26,this.words[Sr]=67108863&Lr;for(;Ar!==0&&Sr<Cr.length;Sr++)Ar=(Lr=(0|Cr.words[Sr])+Ar)>>26,this.words[Sr]=67108863&Lr;if(Ar===0&&Sr<Cr.length&&Cr!==this)for(;Sr<Cr.length;Sr++)this.words[Sr]=Cr.words[Sr];return this.length=Math.max(this.length,Sr),Cr!==this&&(this.negative=1),this.strip()},or.prototype.sub=function(jr){return this.clone().isub(jr)};var yr=function(jr,Lr,Cr){var wr,Pr,Ar,Sr=jr.words,Mr=Lr.words,qr=Cr.words,$r=0,Br=0|Sr[0],zr=8191&Br,Gr=Br>>>13,Vr=0|Sr[1],Xr=8191&Vr,Ur=Vr>>>13,Fr=0|Sr[2],Kr=8191&Fr,Zr=Fr>>>13,Jr=0|Sr[3],tn=8191&Jr,an=Jr>>>13,dn=0|Sr[4],en=8191&dn,rn=dn>>>13,sn=0|Sr[5],on=8191&sn,fn=sn>>>13,pn=0|Sr[6],gn=8191&pn,Pn=pn>>>13,In=0|Sr[7],En=8191&In,zn=In>>>13,yn=0|Sr[8],Vn=8191&yn,Kn=yn>>>13,es=0|Sr[9],Xn=8191&es,ds=es>>>13,fs=0|Mr[0],os=8191&fs,Hn=fs>>>13,Ln=0|Mr[1],Dn=8191&Ln,ls=Ln>>>13,Ds=0|Mr[2],xs=8191&Ds,kn=Ds>>>13,Jn=0|Mr[3],is=8191&Jn,bs=Jn>>>13,Bn=0|Mr[4],Yn=8191&Bn,vn=Bn>>>13,_n=0|Mr[5],Mn=8191&_n,Cn=_n>>>13,Zn=0|Mr[6],qn=8191&Zn,wn=Zn>>>13,On=0|Mr[7],Gn=8191&On,Qn=On>>>13,$s=0|Mr[8],us=8191&$s,ws=$s>>>13,As=0|Mr[9],Rs=8191&As,Ms=As>>>13;Cr.negative=jr.negative^Lr.negative,Cr.length=19;var Bs=($r+(wr=Math.imul(zr,os))|0)+((8191&(Pr=(Pr=Math.imul(zr,Hn))+Math.imul(Gr,os)|0))<<13)|0;$r=((Ar=Math.imul(Gr,Hn))+(Pr>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,wr=Math.imul(Xr,os),Pr=(Pr=Math.imul(Xr,Hn))+Math.imul(Ur,os)|0,Ar=Math.imul(Ur,Hn);var Zs=($r+(wr=wr+Math.imul(zr,Dn)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,ls)|0)+Math.imul(Gr,Dn)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,ls)|0)+(Pr>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,wr=Math.imul(Kr,os),Pr=(Pr=Math.imul(Kr,Hn))+Math.imul(Zr,os)|0,Ar=Math.imul(Zr,Hn),wr=wr+Math.imul(Xr,Dn)|0,Pr=(Pr=Pr+Math.imul(Xr,ls)|0)+Math.imul(Ur,Dn)|0,Ar=Ar+Math.imul(Ur,ls)|0;var Qs=($r+(wr=wr+Math.imul(zr,xs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,kn)|0)+Math.imul(Gr,xs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,kn)|0)+(Pr>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,wr=Math.imul(tn,os),Pr=(Pr=Math.imul(tn,Hn))+Math.imul(an,os)|0,Ar=Math.imul(an,Hn),wr=wr+Math.imul(Kr,Dn)|0,Pr=(Pr=Pr+Math.imul(Kr,ls)|0)+Math.imul(Zr,Dn)|0,Ar=Ar+Math.imul(Zr,ls)|0,wr=wr+Math.imul(Xr,xs)|0,Pr=(Pr=Pr+Math.imul(Xr,kn)|0)+Math.imul(Ur,xs)|0,Ar=Ar+Math.imul(Ur,kn)|0;var eo=($r+(wr=wr+Math.imul(zr,is)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,bs)|0)+Math.imul(Gr,is)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,bs)|0)+(Pr>>>13)|0)+(eo>>>26)|0,eo&=67108863,wr=Math.imul(en,os),Pr=(Pr=Math.imul(en,Hn))+Math.imul(rn,os)|0,Ar=Math.imul(rn,Hn),wr=wr+Math.imul(tn,Dn)|0,Pr=(Pr=Pr+Math.imul(tn,ls)|0)+Math.imul(an,Dn)|0,Ar=Ar+Math.imul(an,ls)|0,wr=wr+Math.imul(Kr,xs)|0,Pr=(Pr=Pr+Math.imul(Kr,kn)|0)+Math.imul(Zr,xs)|0,Ar=Ar+Math.imul(Zr,kn)|0,wr=wr+Math.imul(Xr,is)|0,Pr=(Pr=Pr+Math.imul(Xr,bs)|0)+Math.imul(Ur,is)|0,Ar=Ar+Math.imul(Ur,bs)|0;var ao=($r+(wr=wr+Math.imul(zr,Yn)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,vn)|0)+Math.imul(Gr,Yn)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,vn)|0)+(Pr>>>13)|0)+(ao>>>26)|0,ao&=67108863,wr=Math.imul(on,os),Pr=(Pr=Math.imul(on,Hn))+Math.imul(fn,os)|0,Ar=Math.imul(fn,Hn),wr=wr+Math.imul(en,Dn)|0,Pr=(Pr=Pr+Math.imul(en,ls)|0)+Math.imul(rn,Dn)|0,Ar=Ar+Math.imul(rn,ls)|0,wr=wr+Math.imul(tn,xs)|0,Pr=(Pr=Pr+Math.imul(tn,kn)|0)+Math.imul(an,xs)|0,Ar=Ar+Math.imul(an,kn)|0,wr=wr+Math.imul(Kr,is)|0,Pr=(Pr=Pr+Math.imul(Kr,bs)|0)+Math.imul(Zr,is)|0,Ar=Ar+Math.imul(Zr,bs)|0,wr=wr+Math.imul(Xr,Yn)|0,Pr=(Pr=Pr+Math.imul(Xr,vn)|0)+Math.imul(Ur,Yn)|0,Ar=Ar+Math.imul(Ur,vn)|0;var Un=($r+(wr=wr+Math.imul(zr,Mn)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,Cn)|0)+Math.imul(Gr,Mn)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,Cn)|0)+(Pr>>>13)|0)+(Un>>>26)|0,Un&=67108863,wr=Math.imul(gn,os),Pr=(Pr=Math.imul(gn,Hn))+Math.imul(Pn,os)|0,Ar=Math.imul(Pn,Hn),wr=wr+Math.imul(on,Dn)|0,Pr=(Pr=Pr+Math.imul(on,ls)|0)+Math.imul(fn,Dn)|0,Ar=Ar+Math.imul(fn,ls)|0,wr=wr+Math.imul(en,xs)|0,Pr=(Pr=Pr+Math.imul(en,kn)|0)+Math.imul(rn,xs)|0,Ar=Ar+Math.imul(rn,kn)|0,wr=wr+Math.imul(tn,is)|0,Pr=(Pr=Pr+Math.imul(tn,bs)|0)+Math.imul(an,is)|0,Ar=Ar+Math.imul(an,bs)|0,wr=wr+Math.imul(Kr,Yn)|0,Pr=(Pr=Pr+Math.imul(Kr,vn)|0)+Math.imul(Zr,Yn)|0,Ar=Ar+Math.imul(Zr,vn)|0,wr=wr+Math.imul(Xr,Mn)|0,Pr=(Pr=Pr+Math.imul(Xr,Cn)|0)+Math.imul(Ur,Mn)|0,Ar=Ar+Math.imul(Ur,Cn)|0;var Ts=($r+(wr=wr+Math.imul(zr,qn)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,wn)|0)+Math.imul(Gr,qn)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,wn)|0)+(Pr>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,wr=Math.imul(En,os),Pr=(Pr=Math.imul(En,Hn))+Math.imul(zn,os)|0,Ar=Math.imul(zn,Hn),wr=wr+Math.imul(gn,Dn)|0,Pr=(Pr=Pr+Math.imul(gn,ls)|0)+Math.imul(Pn,Dn)|0,Ar=Ar+Math.imul(Pn,ls)|0,wr=wr+Math.imul(on,xs)|0,Pr=(Pr=Pr+Math.imul(on,kn)|0)+Math.imul(fn,xs)|0,Ar=Ar+Math.imul(fn,kn)|0,wr=wr+Math.imul(en,is)|0,Pr=(Pr=Pr+Math.imul(en,bs)|0)+Math.imul(rn,is)|0,Ar=Ar+Math.imul(rn,bs)|0,wr=wr+Math.imul(tn,Yn)|0,Pr=(Pr=Pr+Math.imul(tn,vn)|0)+Math.imul(an,Yn)|0,Ar=Ar+Math.imul(an,vn)|0,wr=wr+Math.imul(Kr,Mn)|0,Pr=(Pr=Pr+Math.imul(Kr,Cn)|0)+Math.imul(Zr,Mn)|0,Ar=Ar+Math.imul(Zr,Cn)|0,wr=wr+Math.imul(Xr,qn)|0,Pr=(Pr=Pr+Math.imul(Xr,wn)|0)+Math.imul(Ur,qn)|0,Ar=Ar+Math.imul(Ur,wn)|0;var Nn=($r+(wr=wr+Math.imul(zr,Gn)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,Qn)|0)+Math.imul(Gr,Gn)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,Qn)|0)+(Pr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,wr=Math.imul(Vn,os),Pr=(Pr=Math.imul(Vn,Hn))+Math.imul(Kn,os)|0,Ar=Math.imul(Kn,Hn),wr=wr+Math.imul(En,Dn)|0,Pr=(Pr=Pr+Math.imul(En,ls)|0)+Math.imul(zn,Dn)|0,Ar=Ar+Math.imul(zn,ls)|0,wr=wr+Math.imul(gn,xs)|0,Pr=(Pr=Pr+Math.imul(gn,kn)|0)+Math.imul(Pn,xs)|0,Ar=Ar+Math.imul(Pn,kn)|0,wr=wr+Math.imul(on,is)|0,Pr=(Pr=Pr+Math.imul(on,bs)|0)+Math.imul(fn,is)|0,Ar=Ar+Math.imul(fn,bs)|0,wr=wr+Math.imul(en,Yn)|0,Pr=(Pr=Pr+Math.imul(en,vn)|0)+Math.imul(rn,Yn)|0,Ar=Ar+Math.imul(rn,vn)|0,wr=wr+Math.imul(tn,Mn)|0,Pr=(Pr=Pr+Math.imul(tn,Cn)|0)+Math.imul(an,Mn)|0,Ar=Ar+Math.imul(an,Cn)|0,wr=wr+Math.imul(Kr,qn)|0,Pr=(Pr=Pr+Math.imul(Kr,wn)|0)+Math.imul(Zr,qn)|0,Ar=Ar+Math.imul(Zr,wn)|0,wr=wr+Math.imul(Xr,Gn)|0,Pr=(Pr=Pr+Math.imul(Xr,Qn)|0)+Math.imul(Ur,Gn)|0,Ar=Ar+Math.imul(Ur,Qn)|0;var ns=($r+(wr=wr+Math.imul(zr,us)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,ws)|0)+Math.imul(Gr,us)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,ws)|0)+(Pr>>>13)|0)+(ns>>>26)|0,ns&=67108863,wr=Math.imul(Xn,os),Pr=(Pr=Math.imul(Xn,Hn))+Math.imul(ds,os)|0,Ar=Math.imul(ds,Hn),wr=wr+Math.imul(Vn,Dn)|0,Pr=(Pr=Pr+Math.imul(Vn,ls)|0)+Math.imul(Kn,Dn)|0,Ar=Ar+Math.imul(Kn,ls)|0,wr=wr+Math.imul(En,xs)|0,Pr=(Pr=Pr+Math.imul(En,kn)|0)+Math.imul(zn,xs)|0,Ar=Ar+Math.imul(zn,kn)|0,wr=wr+Math.imul(gn,is)|0,Pr=(Pr=Pr+Math.imul(gn,bs)|0)+Math.imul(Pn,is)|0,Ar=Ar+Math.imul(Pn,bs)|0,wr=wr+Math.imul(on,Yn)|0,Pr=(Pr=Pr+Math.imul(on,vn)|0)+Math.imul(fn,Yn)|0,Ar=Ar+Math.imul(fn,vn)|0,wr=wr+Math.imul(en,Mn)|0,Pr=(Pr=Pr+Math.imul(en,Cn)|0)+Math.imul(rn,Mn)|0,Ar=Ar+Math.imul(rn,Cn)|0,wr=wr+Math.imul(tn,qn)|0,Pr=(Pr=Pr+Math.imul(tn,wn)|0)+Math.imul(an,qn)|0,Ar=Ar+Math.imul(an,wn)|0,wr=wr+Math.imul(Kr,Gn)|0,Pr=(Pr=Pr+Math.imul(Kr,Qn)|0)+Math.imul(Zr,Gn)|0,Ar=Ar+Math.imul(Zr,Qn)|0,wr=wr+Math.imul(Xr,us)|0,Pr=(Pr=Pr+Math.imul(Xr,ws)|0)+Math.imul(Ur,us)|0,Ar=Ar+Math.imul(Ur,ws)|0;var Ps=($r+(wr=wr+Math.imul(zr,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(zr,Ms)|0)+Math.imul(Gr,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Gr,Ms)|0)+(Pr>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,wr=Math.imul(Xn,Dn),Pr=(Pr=Math.imul(Xn,ls))+Math.imul(ds,Dn)|0,Ar=Math.imul(ds,ls),wr=wr+Math.imul(Vn,xs)|0,Pr=(Pr=Pr+Math.imul(Vn,kn)|0)+Math.imul(Kn,xs)|0,Ar=Ar+Math.imul(Kn,kn)|0,wr=wr+Math.imul(En,is)|0,Pr=(Pr=Pr+Math.imul(En,bs)|0)+Math.imul(zn,is)|0,Ar=Ar+Math.imul(zn,bs)|0,wr=wr+Math.imul(gn,Yn)|0,Pr=(Pr=Pr+Math.imul(gn,vn)|0)+Math.imul(Pn,Yn)|0,Ar=Ar+Math.imul(Pn,vn)|0,wr=wr+Math.imul(on,Mn)|0,Pr=(Pr=Pr+Math.imul(on,Cn)|0)+Math.imul(fn,Mn)|0,Ar=Ar+Math.imul(fn,Cn)|0,wr=wr+Math.imul(en,qn)|0,Pr=(Pr=Pr+Math.imul(en,wn)|0)+Math.imul(rn,qn)|0,Ar=Ar+Math.imul(rn,wn)|0,wr=wr+Math.imul(tn,Gn)|0,Pr=(Pr=Pr+Math.imul(tn,Qn)|0)+Math.imul(an,Gn)|0,Ar=Ar+Math.imul(an,Qn)|0,wr=wr+Math.imul(Kr,us)|0,Pr=(Pr=Pr+Math.imul(Kr,ws)|0)+Math.imul(Zr,us)|0,Ar=Ar+Math.imul(Zr,ws)|0;var Ss=($r+(wr=wr+Math.imul(Xr,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(Xr,Ms)|0)+Math.imul(Ur,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Ur,Ms)|0)+(Pr>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,wr=Math.imul(Xn,xs),Pr=(Pr=Math.imul(Xn,kn))+Math.imul(ds,xs)|0,Ar=Math.imul(ds,kn),wr=wr+Math.imul(Vn,is)|0,Pr=(Pr=Pr+Math.imul(Vn,bs)|0)+Math.imul(Kn,is)|0,Ar=Ar+Math.imul(Kn,bs)|0,wr=wr+Math.imul(En,Yn)|0,Pr=(Pr=Pr+Math.imul(En,vn)|0)+Math.imul(zn,Yn)|0,Ar=Ar+Math.imul(zn,vn)|0,wr=wr+Math.imul(gn,Mn)|0,Pr=(Pr=Pr+Math.imul(gn,Cn)|0)+Math.imul(Pn,Mn)|0,Ar=Ar+Math.imul(Pn,Cn)|0,wr=wr+Math.imul(on,qn)|0,Pr=(Pr=Pr+Math.imul(on,wn)|0)+Math.imul(fn,qn)|0,Ar=Ar+Math.imul(fn,wn)|0,wr=wr+Math.imul(en,Gn)|0,Pr=(Pr=Pr+Math.imul(en,Qn)|0)+Math.imul(rn,Gn)|0,Ar=Ar+Math.imul(rn,Qn)|0,wr=wr+Math.imul(tn,us)|0,Pr=(Pr=Pr+Math.imul(tn,ws)|0)+Math.imul(an,us)|0,Ar=Ar+Math.imul(an,ws)|0;var Ks=($r+(wr=wr+Math.imul(Kr,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(Kr,Ms)|0)+Math.imul(Zr,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Zr,Ms)|0)+(Pr>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,wr=Math.imul(Xn,is),Pr=(Pr=Math.imul(Xn,bs))+Math.imul(ds,is)|0,Ar=Math.imul(ds,bs),wr=wr+Math.imul(Vn,Yn)|0,Pr=(Pr=Pr+Math.imul(Vn,vn)|0)+Math.imul(Kn,Yn)|0,Ar=Ar+Math.imul(Kn,vn)|0,wr=wr+Math.imul(En,Mn)|0,Pr=(Pr=Pr+Math.imul(En,Cn)|0)+Math.imul(zn,Mn)|0,Ar=Ar+Math.imul(zn,Cn)|0,wr=wr+Math.imul(gn,qn)|0,Pr=(Pr=Pr+Math.imul(gn,wn)|0)+Math.imul(Pn,qn)|0,Ar=Ar+Math.imul(Pn,wn)|0,wr=wr+Math.imul(on,Gn)|0,Pr=(Pr=Pr+Math.imul(on,Qn)|0)+Math.imul(fn,Gn)|0,Ar=Ar+Math.imul(fn,Qn)|0,wr=wr+Math.imul(en,us)|0,Pr=(Pr=Pr+Math.imul(en,ws)|0)+Math.imul(rn,us)|0,Ar=Ar+Math.imul(rn,ws)|0;var Is=($r+(wr=wr+Math.imul(tn,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(tn,Ms)|0)+Math.imul(an,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(an,Ms)|0)+(Pr>>>13)|0)+(Is>>>26)|0,Is&=67108863,wr=Math.imul(Xn,Yn),Pr=(Pr=Math.imul(Xn,vn))+Math.imul(ds,Yn)|0,Ar=Math.imul(ds,vn),wr=wr+Math.imul(Vn,Mn)|0,Pr=(Pr=Pr+Math.imul(Vn,Cn)|0)+Math.imul(Kn,Mn)|0,Ar=Ar+Math.imul(Kn,Cn)|0,wr=wr+Math.imul(En,qn)|0,Pr=(Pr=Pr+Math.imul(En,wn)|0)+Math.imul(zn,qn)|0,Ar=Ar+Math.imul(zn,wn)|0,wr=wr+Math.imul(gn,Gn)|0,Pr=(Pr=Pr+Math.imul(gn,Qn)|0)+Math.imul(Pn,Gn)|0,Ar=Ar+Math.imul(Pn,Qn)|0,wr=wr+Math.imul(on,us)|0,Pr=(Pr=Pr+Math.imul(on,ws)|0)+Math.imul(fn,us)|0,Ar=Ar+Math.imul(fn,ws)|0;var An=($r+(wr=wr+Math.imul(en,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(en,Ms)|0)+Math.imul(rn,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(rn,Ms)|0)+(Pr>>>13)|0)+(An>>>26)|0,An&=67108863,wr=Math.imul(Xn,Mn),Pr=(Pr=Math.imul(Xn,Cn))+Math.imul(ds,Mn)|0,Ar=Math.imul(ds,Cn),wr=wr+Math.imul(Vn,qn)|0,Pr=(Pr=Pr+Math.imul(Vn,wn)|0)+Math.imul(Kn,qn)|0,Ar=Ar+Math.imul(Kn,wn)|0,wr=wr+Math.imul(En,Gn)|0,Pr=(Pr=Pr+Math.imul(En,Qn)|0)+Math.imul(zn,Gn)|0,Ar=Ar+Math.imul(zn,Qn)|0,wr=wr+Math.imul(gn,us)|0,Pr=(Pr=Pr+Math.imul(gn,ws)|0)+Math.imul(Pn,us)|0,Ar=Ar+Math.imul(Pn,ws)|0;var Vs=($r+(wr=wr+Math.imul(on,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(on,Ms)|0)+Math.imul(fn,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(fn,Ms)|0)+(Pr>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,wr=Math.imul(Xn,qn),Pr=(Pr=Math.imul(Xn,wn))+Math.imul(ds,qn)|0,Ar=Math.imul(ds,wn),wr=wr+Math.imul(Vn,Gn)|0,Pr=(Pr=Pr+Math.imul(Vn,Qn)|0)+Math.imul(Kn,Gn)|0,Ar=Ar+Math.imul(Kn,Qn)|0,wr=wr+Math.imul(En,us)|0,Pr=(Pr=Pr+Math.imul(En,ws)|0)+Math.imul(zn,us)|0,Ar=Ar+Math.imul(zn,ws)|0;var Fs=($r+(wr=wr+Math.imul(gn,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(gn,Ms)|0)+Math.imul(Pn,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Pn,Ms)|0)+(Pr>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,wr=Math.imul(Xn,Gn),Pr=(Pr=Math.imul(Xn,Qn))+Math.imul(ds,Gn)|0,Ar=Math.imul(ds,Qn),wr=wr+Math.imul(Vn,us)|0,Pr=(Pr=Pr+Math.imul(Vn,ws)|0)+Math.imul(Kn,us)|0,Ar=Ar+Math.imul(Kn,ws)|0;var Cs=($r+(wr=wr+Math.imul(En,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(En,Ms)|0)+Math.imul(zn,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(zn,Ms)|0)+(Pr>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,wr=Math.imul(Xn,us),Pr=(Pr=Math.imul(Xn,ws))+Math.imul(ds,us)|0,Ar=Math.imul(ds,ws);var Ns=($r+(wr=wr+Math.imul(Vn,Rs)|0)|0)+((8191&(Pr=(Pr=Pr+Math.imul(Vn,Ms)|0)+Math.imul(Kn,Rs)|0))<<13)|0;$r=((Ar=Ar+Math.imul(Kn,Ms)|0)+(Pr>>>13)|0)+(Ns>>>26)|0,Ns&=67108863;var Ys=($r+(wr=Math.imul(Xn,Rs))|0)+((8191&(Pr=(Pr=Math.imul(Xn,Ms))+Math.imul(ds,Rs)|0))<<13)|0;return $r=((Ar=Math.imul(ds,Ms))+(Pr>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,qr[0]=Bs,qr[1]=Zs,qr[2]=Qs,qr[3]=eo,qr[4]=ao,qr[5]=Un,qr[6]=Ts,qr[7]=Nn,qr[8]=ns,qr[9]=Ps,qr[10]=Ss,qr[11]=Ks,qr[12]=Is,qr[13]=An,qr[14]=Vs,qr[15]=Fs,qr[16]=Cs,qr[17]=Ns,qr[18]=Ys,$r!==0&&(qr[19]=$r,Cr.length++),Cr};function xr(jr,Lr,Cr){return new vr().mulp(jr,Lr,Cr)}function vr(jr,Lr){this.x=jr,this.y=Lr}Math.imul||(yr=mr),or.prototype.mulTo=function(jr,Lr){var Cr=this.length+jr.length;return this.length===10&&jr.length===10?yr(this,jr,Lr):Cr<63?mr(this,jr,Lr):Cr<1024?function(wr,Pr,Ar){Ar.negative=Pr.negative^wr.negative,Ar.length=wr.length+Pr.length;for(var Sr=0,Mr=0,qr=0;qr<Ar.length-1;qr++){var $r=Mr;Mr=0;for(var Br=67108863&Sr,zr=Math.min(qr,Pr.length-1),Gr=Math.max(0,qr-wr.length+1);Gr<=zr;Gr++){var Vr=qr-Gr,Xr=(0|wr.words[Vr])*(0|Pr.words[Gr]),Ur=67108863&Xr;Br=67108863&(Ur=Ur+Br|0),Mr+=($r=($r=$r+(Xr/67108864|0)|0)+(Ur>>>26)|0)>>>26,$r&=67108863}Ar.words[qr]=Br,Sr=$r,$r=Mr}return Sr!==0?Ar.words[qr]=Sr:Ar.length--,Ar.strip()}(this,jr,Lr):xr(this,jr,Lr)},vr.prototype.makeRBT=function(jr){for(var Lr=new Array(jr),Cr=or.prototype._countBits(jr)-1,wr=0;wr<jr;wr++)Lr[wr]=this.revBin(wr,Cr,jr);return Lr},vr.prototype.revBin=function(jr,Lr,Cr){if(jr===0||jr===Cr-1)return jr;for(var wr=0,Pr=0;Pr<Lr;Pr++)wr|=(1&jr)<<Lr-Pr-1,jr>>=1;return wr},vr.prototype.permute=function(jr,Lr,Cr,wr,Pr,Ar){for(var Sr=0;Sr<Ar;Sr++)wr[Sr]=Lr[jr[Sr]],Pr[Sr]=Cr[jr[Sr]]},vr.prototype.transform=function(jr,Lr,Cr,wr,Pr,Ar){this.permute(Ar,jr,Lr,Cr,wr,Pr);for(var Sr=1;Sr<Pr;Sr<<=1)for(var Mr=Sr<<1,qr=Math.cos(2*Math.PI/Mr),$r=Math.sin(2*Math.PI/Mr),Br=0;Br<Pr;Br+=Mr)for(var zr=qr,Gr=$r,Vr=0;Vr<Sr;Vr++){var Xr=Cr[Br+Vr],Ur=wr[Br+Vr],Fr=Cr[Br+Vr+Sr],Kr=wr[Br+Vr+Sr],Zr=zr*Fr-Gr*Kr;Kr=zr*Kr+Gr*Fr,Fr=Zr,Cr[Br+Vr]=Xr+Fr,wr[Br+Vr]=Ur+Kr,Cr[Br+Vr+Sr]=Xr-Fr,wr[Br+Vr+Sr]=Ur-Kr,Vr!==Mr&&(Zr=qr*zr-$r*Gr,Gr=qr*Gr+$r*zr,zr=Zr)}},vr.prototype.guessLen13b=function(jr,Lr){var Cr=1|Math.max(Lr,jr),wr=1&Cr,Pr=0;for(Cr=Cr/2|0;Cr;Cr>>>=1)Pr++;return 1<<Pr+1+wr},vr.prototype.conjugate=function(jr,Lr,Cr){if(!(Cr<=1))for(var wr=0;wr<Cr/2;wr++){var Pr=jr[wr];jr[wr]=jr[Cr-wr-1],jr[Cr-wr-1]=Pr,Pr=Lr[wr],Lr[wr]=-Lr[Cr-wr-1],Lr[Cr-wr-1]=-Pr}},vr.prototype.normalize13b=function(jr,Lr){for(var Cr=0,wr=0;wr<Lr/2;wr++){var Pr=8192*Math.round(jr[2*wr+1]/Lr)+Math.round(jr[2*wr]/Lr)+Cr;jr[wr]=67108863&Pr,Cr=Pr<67108864?0:Pr/67108864|0}return jr},vr.prototype.convert13b=function(jr,Lr,Cr,wr){for(var Pr=0,Ar=0;Ar<Lr;Ar++)Pr+=0|jr[Ar],Cr[2*Ar]=8191&Pr,Pr>>>=13,Cr[2*Ar+1]=8191&Pr,Pr>>>=13;for(Ar=2*Lr;Ar<wr;++Ar)Cr[Ar]=0;cr(Pr===0),cr((-8192&Pr)==0)},vr.prototype.stub=function(jr){for(var Lr=new Array(jr),Cr=0;Cr<jr;Cr++)Lr[Cr]=0;return Lr},vr.prototype.mulp=function(jr,Lr,Cr){var wr=2*this.guessLen13b(jr.length,Lr.length),Pr=this.makeRBT(wr),Ar=this.stub(wr),Sr=new Array(wr),Mr=new Array(wr),qr=new Array(wr),$r=new Array(wr),Br=new Array(wr),zr=new Array(wr),Gr=Cr.words;Gr.length=wr,this.convert13b(jr.words,jr.length,Sr,wr),this.convert13b(Lr.words,Lr.length,$r,wr),this.transform(Sr,Ar,Mr,qr,wr,Pr),this.transform($r,Ar,Br,zr,wr,Pr);for(var Vr=0;Vr<wr;Vr++){var Xr=Mr[Vr]*Br[Vr]-qr[Vr]*zr[Vr];qr[Vr]=Mr[Vr]*zr[Vr]+qr[Vr]*Br[Vr],Mr[Vr]=Xr}return this.conjugate(Mr,qr,wr),this.transform(Mr,qr,Gr,Ar,wr,Pr),this.conjugate(Gr,Ar,wr),this.normalize13b(Gr,wr),Cr.negative=jr.negative^Lr.negative,Cr.length=jr.length+Lr.length,Cr.strip()},or.prototype.mul=function(jr){var Lr=new or(null);return Lr.words=new Array(this.length+jr.length),this.mulTo(jr,Lr)},or.prototype.mulf=function(jr){var Lr=new or(null);return Lr.words=new Array(this.length+jr.length),xr(this,jr,Lr)},or.prototype.imul=function(jr){return this.clone().mulTo(jr,this)},or.prototype.imuln=function(jr){cr(typeof jr=="number"),cr(jr<67108864);for(var Lr=0,Cr=0;Cr<this.length;Cr++){var wr=(0|this.words[Cr])*jr,Pr=(67108863&wr)+(67108863&Lr);Lr>>=26,Lr+=wr/67108864|0,Lr+=Pr>>>26,this.words[Cr]=67108863&Pr}return Lr!==0&&(this.words[Cr]=Lr,this.length++),this},or.prototype.muln=function(jr){return this.clone().imuln(jr)},or.prototype.sqr=function(){return this.mul(this)},or.prototype.isqr=function(){return this.imul(this.clone())},or.prototype.pow=function(jr){var Lr=function(Ar){for(var Sr=new Array(Ar.bitLength()),Mr=0;Mr<Sr.length;Mr++){var qr=Mr/26|0,$r=Mr%26;Sr[Mr]=(Ar.words[qr]&1<<$r)>>>$r}return Sr}(jr);if(Lr.length===0)return new or(1);for(var Cr=this,wr=0;wr<Lr.length&&Lr[wr]===0;wr++,Cr=Cr.sqr());if(++wr<Lr.length)for(var Pr=Cr.sqr();wr<Lr.length;wr++,Pr=Pr.sqr())Lr[wr]!==0&&(Cr=Cr.mul(Pr));return Cr},or.prototype.iushln=function(jr){cr(typeof jr=="number"&&jr>=0);var Lr,Cr=jr%26,wr=(jr-Cr)/26,Pr=67108863>>>26-Cr<<26-Cr;if(Cr!==0){var Ar=0;for(Lr=0;Lr<this.length;Lr++){var Sr=this.words[Lr]&Pr,Mr=(0|this.words[Lr])-Sr<<Cr;this.words[Lr]=Mr|Ar,Ar=Sr>>>26-Cr}Ar&&(this.words[Lr]=Ar,this.length++)}if(wr!==0){for(Lr=this.length-1;Lr>=0;Lr--)this.words[Lr+wr]=this.words[Lr];for(Lr=0;Lr<wr;Lr++)this.words[Lr]=0;this.length+=wr}return this.strip()},or.prototype.ishln=function(jr){return cr(this.negative===0),this.iushln(jr)},or.prototype.iushrn=function(jr,Lr,Cr){var wr;cr(typeof jr=="number"&&jr>=0),wr=Lr?(Lr-Lr%26)/26:0;var Pr=jr%26,Ar=Math.min((jr-Pr)/26,this.length),Sr=67108863^67108863>>>Pr<<Pr,Mr=Cr;if(wr-=Ar,wr=Math.max(0,wr),Mr){for(var qr=0;qr<Ar;qr++)Mr.words[qr]=this.words[qr];Mr.length=Ar}if(Ar!==0)if(this.length>Ar)for(this.length-=Ar,qr=0;qr<this.length;qr++)this.words[qr]=this.words[qr+Ar];else this.words[0]=0,this.length=1;var $r=0;for(qr=this.length-1;qr>=0&&($r!==0||qr>=wr);qr--){var Br=0|this.words[qr];this.words[qr]=$r<<26-Pr|Br>>>Pr,$r=Br&Sr}return Mr&&$r!==0&&(Mr.words[Mr.length++]=$r),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},or.prototype.ishrn=function(jr,Lr,Cr){return cr(this.negative===0),this.iushrn(jr,Lr,Cr)},or.prototype.shln=function(jr){return this.clone().ishln(jr)},or.prototype.ushln=function(jr){return this.clone().iushln(jr)},or.prototype.shrn=function(jr){return this.clone().ishrn(jr)},or.prototype.ushrn=function(jr){return this.clone().iushrn(jr)},or.prototype.testn=function(jr){cr(typeof jr=="number"&&jr>=0);var Lr=jr%26,Cr=(jr-Lr)/26,wr=1<<Lr;return!(this.length<=Cr)&&!!(this.words[Cr]&wr)},or.prototype.imaskn=function(jr){cr(typeof jr=="number"&&jr>=0);var Lr=jr%26,Cr=(jr-Lr)/26;if(cr(this.negative===0,"imaskn works only with positive numbers"),this.length<=Cr)return this;if(Lr!==0&&Cr++,this.length=Math.min(Cr,this.length),Lr!==0){var wr=67108863^67108863>>>Lr<<Lr;this.words[this.length-1]&=wr}return this.strip()},or.prototype.maskn=function(jr){return this.clone().imaskn(jr)},or.prototype.iaddn=function(jr){return cr(typeof jr=="number"),cr(jr<67108864),jr<0?this.isubn(-jr):this.negative!==0?this.length===1&&(0|this.words[0])<jr?(this.words[0]=jr-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(jr),this.negative=1,this):this._iaddn(jr)},or.prototype._iaddn=function(jr){this.words[0]+=jr;for(var Lr=0;Lr<this.length&&this.words[Lr]>=67108864;Lr++)this.words[Lr]-=67108864,Lr===this.length-1?this.words[Lr+1]=1:this.words[Lr+1]++;return this.length=Math.max(this.length,Lr+1),this},or.prototype.isubn=function(jr){if(cr(typeof jr=="number"),cr(jr<67108864),jr<0)return this.iaddn(-jr);if(this.negative!==0)return this.negative=0,this.iaddn(jr),this.negative=1,this;if(this.words[0]-=jr,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Lr=0;Lr<this.length&&this.words[Lr]<0;Lr++)this.words[Lr]+=67108864,this.words[Lr+1]-=1;return this.strip()},or.prototype.addn=function(jr){return this.clone().iaddn(jr)},or.prototype.subn=function(jr){return this.clone().isubn(jr)},or.prototype.iabs=function(){return this.negative=0,this},or.prototype.abs=function(){return this.clone().iabs()},or.prototype._ishlnsubmul=function(jr,Lr,Cr){var wr,Pr,Ar=jr.length+Cr;this._expand(Ar);var Sr=0;for(wr=0;wr<jr.length;wr++){Pr=(0|this.words[wr+Cr])+Sr;var Mr=(0|jr.words[wr])*Lr;Sr=((Pr-=67108863&Mr)>>26)-(Mr/67108864|0),this.words[wr+Cr]=67108863&Pr}for(;wr<this.length-Cr;wr++)Sr=(Pr=(0|this.words[wr+Cr])+Sr)>>26,this.words[wr+Cr]=67108863&Pr;if(Sr===0)return this.strip();for(cr(Sr===-1),Sr=0,wr=0;wr<this.length;wr++)Sr=(Pr=-(0|this.words[wr])+Sr)>>26,this.words[wr]=67108863&Pr;return this.negative=1,this.strip()},or.prototype._wordDiv=function(jr,Lr){var Cr=(this.length,jr.length),wr=this.clone(),Pr=jr,Ar=0|Pr.words[Pr.length-1];(Cr=26-this._countBits(Ar))!==0&&(Pr=Pr.ushln(Cr),wr.iushln(Cr),Ar=0|Pr.words[Pr.length-1]);var Sr,Mr=wr.length-Pr.length;if(Lr!=="mod"){(Sr=new or(null)).length=Mr+1,Sr.words=new Array(Sr.length);for(var qr=0;qr<Sr.length;qr++)Sr.words[qr]=0}var $r=wr.clone()._ishlnsubmul(Pr,1,Mr);$r.negative===0&&(wr=$r,Sr&&(Sr.words[Mr]=1));for(var Br=Mr-1;Br>=0;Br--){var zr=67108864*(0|wr.words[Pr.length+Br])+(0|wr.words[Pr.length+Br-1]);for(zr=Math.min(zr/Ar|0,67108863),wr._ishlnsubmul(Pr,zr,Br);wr.negative!==0;)zr--,wr.negative=0,wr._ishlnsubmul(Pr,1,Br),wr.isZero()||(wr.negative^=1);Sr&&(Sr.words[Br]=zr)}return Sr&&Sr.strip(),wr.strip(),Lr!=="div"&&Cr!==0&&wr.iushrn(Cr),{div:Sr||null,mod:wr}},or.prototype.divmod=function(jr,Lr,Cr){return cr(!jr.isZero()),this.isZero()?{div:new or(0),mod:new or(0)}:this.negative!==0&&jr.negative===0?(Ar=this.neg().divmod(jr,Lr),Lr!=="mod"&&(wr=Ar.div.neg()),Lr!=="div"&&(Pr=Ar.mod.neg(),Cr&&Pr.negative!==0&&Pr.iadd(jr)),{div:wr,mod:Pr}):this.negative===0&&jr.negative!==0?(Ar=this.divmod(jr.neg(),Lr),Lr!=="mod"&&(wr=Ar.div.neg()),{div:wr,mod:Ar.mod}):this.negative&jr.negative?(Ar=this.neg().divmod(jr.neg(),Lr),Lr!=="div"&&(Pr=Ar.mod.neg(),Cr&&Pr.negative!==0&&Pr.isub(jr)),{div:Ar.div,mod:Pr}):jr.length>this.length||this.cmp(jr)<0?{div:new or(0),mod:this}:jr.length===1?Lr==="div"?{div:this.divn(jr.words[0]),mod:null}:Lr==="mod"?{div:null,mod:new or(this.modn(jr.words[0]))}:{div:this.divn(jr.words[0]),mod:new or(this.modn(jr.words[0]))}:this._wordDiv(jr,Lr);var wr,Pr,Ar},or.prototype.div=function(jr){return this.divmod(jr,"div",!1).div},or.prototype.mod=function(jr){return this.divmod(jr,"mod",!1).mod},or.prototype.umod=function(jr){return this.divmod(jr,"mod",!0).mod},or.prototype.divRound=function(jr){var Lr=this.divmod(jr);if(Lr.mod.isZero())return Lr.div;var Cr=Lr.div.negative!==0?Lr.mod.isub(jr):Lr.mod,wr=jr.ushrn(1),Pr=jr.andln(1),Ar=Cr.cmp(wr);return Ar<0||Pr===1&&Ar===0?Lr.div:Lr.div.negative!==0?Lr.div.isubn(1):Lr.div.iaddn(1)},or.prototype.modn=function(jr){cr(jr<=67108863);for(var Lr=(1<<26)%jr,Cr=0,wr=this.length-1;wr>=0;wr--)Cr=(Lr*Cr+(0|this.words[wr]))%jr;return Cr},or.prototype.idivn=function(jr){cr(jr<=67108863);for(var Lr=0,Cr=this.length-1;Cr>=0;Cr--){var wr=(0|this.words[Cr])+67108864*Lr;this.words[Cr]=wr/jr|0,Lr=wr%jr}return this.strip()},or.prototype.divn=function(jr){return this.clone().idivn(jr)},or.prototype.egcd=function(jr){cr(jr.negative===0),cr(!jr.isZero());var Lr=this,Cr=jr.clone();Lr=Lr.negative!==0?Lr.umod(jr):Lr.clone();for(var wr=new or(1),Pr=new or(0),Ar=new or(0),Sr=new or(1),Mr=0;Lr.isEven()&&Cr.isEven();)Lr.iushrn(1),Cr.iushrn(1),++Mr;for(var qr=Cr.clone(),$r=Lr.clone();!Lr.isZero();){for(var Br=0,zr=1;!(Lr.words[0]&zr)&&Br<26;++Br,zr<<=1);if(Br>0)for(Lr.iushrn(Br);Br-- >0;)(wr.isOdd()||Pr.isOdd())&&(wr.iadd(qr),Pr.isub($r)),wr.iushrn(1),Pr.iushrn(1);for(var Gr=0,Vr=1;!(Cr.words[0]&Vr)&&Gr<26;++Gr,Vr<<=1);if(Gr>0)for(Cr.iushrn(Gr);Gr-- >0;)(Ar.isOdd()||Sr.isOdd())&&(Ar.iadd(qr),Sr.isub($r)),Ar.iushrn(1),Sr.iushrn(1);Lr.cmp(Cr)>=0?(Lr.isub(Cr),wr.isub(Ar),Pr.isub(Sr)):(Cr.isub(Lr),Ar.isub(wr),Sr.isub(Pr))}return{a:Ar,b:Sr,gcd:Cr.iushln(Mr)}},or.prototype._invmp=function(jr){cr(jr.negative===0),cr(!jr.isZero());var Lr=this,Cr=jr.clone();Lr=Lr.negative!==0?Lr.umod(jr):Lr.clone();for(var wr,Pr=new or(1),Ar=new or(0),Sr=Cr.clone();Lr.cmpn(1)>0&&Cr.cmpn(1)>0;){for(var Mr=0,qr=1;!(Lr.words[0]&qr)&&Mr<26;++Mr,qr<<=1);if(Mr>0)for(Lr.iushrn(Mr);Mr-- >0;)Pr.isOdd()&&Pr.iadd(Sr),Pr.iushrn(1);for(var $r=0,Br=1;!(Cr.words[0]&Br)&&$r<26;++$r,Br<<=1);if($r>0)for(Cr.iushrn($r);$r-- >0;)Ar.isOdd()&&Ar.iadd(Sr),Ar.iushrn(1);Lr.cmp(Cr)>=0?(Lr.isub(Cr),Pr.isub(Ar)):(Cr.isub(Lr),Ar.isub(Pr))}return(wr=Lr.cmpn(1)===0?Pr:Ar).cmpn(0)<0&&wr.iadd(jr),wr},or.prototype.gcd=function(jr){if(this.isZero())return jr.abs();if(jr.isZero())return this.abs();var Lr=this.clone(),Cr=jr.clone();Lr.negative=0,Cr.negative=0;for(var wr=0;Lr.isEven()&&Cr.isEven();wr++)Lr.iushrn(1),Cr.iushrn(1);for(;;){for(;Lr.isEven();)Lr.iushrn(1);for(;Cr.isEven();)Cr.iushrn(1);var Pr=Lr.cmp(Cr);if(Pr<0){var Ar=Lr;Lr=Cr,Cr=Ar}else if(Pr===0||Cr.cmpn(1)===0)break;Lr.isub(Cr)}return Cr.iushln(wr)},or.prototype.invm=function(jr){return this.egcd(jr).a.umod(jr)},or.prototype.isEven=function(){return(1&this.words[0])==0},or.prototype.isOdd=function(){return(1&this.words[0])==1},or.prototype.andln=function(jr){return this.words[0]&jr},or.prototype.bincn=function(jr){cr(typeof jr=="number");var Lr=jr%26,Cr=(jr-Lr)/26,wr=1<<Lr;if(this.length<=Cr)return this._expand(Cr+1),this.words[Cr]|=wr,this;for(var Pr=wr,Ar=Cr;Pr!==0&&Ar<this.length;Ar++){var Sr=0|this.words[Ar];Pr=(Sr+=Pr)>>>26,Sr&=67108863,this.words[Ar]=Sr}return Pr!==0&&(this.words[Ar]=Pr,this.length++),this},or.prototype.isZero=function(){return this.length===1&&this.words[0]===0},or.prototype.cmpn=function(jr){var Lr,Cr=jr<0;if(this.negative!==0&&!Cr)return-1;if(this.negative===0&&Cr)return 1;if(this.strip(),this.length>1)Lr=1;else{Cr&&(jr=-jr),cr(jr<=67108863,"Number is too big");var wr=0|this.words[0];Lr=wr===jr?0:wr<jr?-1:1}return this.negative!==0?0|-Lr:Lr},or.prototype.cmp=function(jr){if(this.negative!==0&&jr.negative===0)return-1;if(this.negative===0&&jr.negative!==0)return 1;var Lr=this.ucmp(jr);return this.negative!==0?0|-Lr:Lr},or.prototype.ucmp=function(jr){if(this.length>jr.length)return 1;if(this.length<jr.length)return-1;for(var Lr=0,Cr=this.length-1;Cr>=0;Cr--){var wr=0|this.words[Cr],Pr=0|jr.words[Cr];if(wr!==Pr){wr<Pr?Lr=-1:wr>Pr&&(Lr=1);break}}return Lr},or.prototype.gtn=function(jr){return this.cmpn(jr)===1},or.prototype.gt=function(jr){return this.cmp(jr)===1},or.prototype.gten=function(jr){return this.cmpn(jr)>=0},or.prototype.gte=function(jr){return this.cmp(jr)>=0},or.prototype.ltn=function(jr){return this.cmpn(jr)===-1},or.prototype.lt=function(jr){return this.cmp(jr)===-1},or.prototype.lten=function(jr){return this.cmpn(jr)<=0},or.prototype.lte=function(jr){return this.cmp(jr)<=0},or.prototype.eqn=function(jr){return this.cmpn(jr)===0},or.prototype.eq=function(jr){return this.cmp(jr)===0},or.red=function(jr){return new Ir(jr)},or.prototype.toRed=function(jr){return cr(!this.red,"Already a number in reduction context"),cr(this.negative===0,"red works only with positives"),jr.convertTo(this)._forceRed(jr)},or.prototype.fromRed=function(){return cr(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},or.prototype._forceRed=function(jr){return this.red=jr,this},or.prototype.forceRed=function(jr){return cr(!this.red,"Already a number in reduction context"),this._forceRed(jr)},or.prototype.redAdd=function(jr){return cr(this.red,"redAdd works only with red numbers"),this.red.add(this,jr)},or.prototype.redIAdd=function(jr){return cr(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,jr)},or.prototype.redSub=function(jr){return cr(this.red,"redSub works only with red numbers"),this.red.sub(this,jr)},or.prototype.redISub=function(jr){return cr(this.red,"redISub works only with red numbers"),this.red.isub(this,jr)},or.prototype.redShl=function(jr){return cr(this.red,"redShl works only with red numbers"),this.red.shl(this,jr)},or.prototype.redMul=function(jr){return cr(this.red,"redMul works only with red numbers"),this.red._verify2(this,jr),this.red.mul(this,jr)},or.prototype.redIMul=function(jr){return cr(this.red,"redMul works only with red numbers"),this.red._verify2(this,jr),this.red.imul(this,jr)},or.prototype.redSqr=function(){return cr(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},or.prototype.redISqr=function(){return cr(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},or.prototype.redSqrt=function(){return cr(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},or.prototype.redInvm=function(){return cr(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},or.prototype.redNeg=function(){return cr(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},or.prototype.redPow=function(jr){return cr(this.red&&!jr.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,jr)};var _r={k256:null,p224:null,p192:null,p25519:null};function Er(jr,Lr){this.name=jr,this.p=new or(Lr,16),this.n=this.p.bitLength(),this.k=new or(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Tr(){Er.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Rr(){Er.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Nr(){Er.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Dr(){Er.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Ir(jr){if(typeof jr=="string"){var Lr=or._prime(jr);this.m=Lr.p,this.prime=Lr}else cr(jr.gtn(1),"modulus must be greater than 1"),this.m=jr,this.prime=null}function Or(jr){Ir.call(this,jr),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new or(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Er.prototype._tmp=function(){var jr=new or(null);return jr.words=new Array(Math.ceil(this.n/13)),jr},Er.prototype.ireduce=function(jr){var Lr,Cr=jr;do this.split(Cr,this.tmp),Lr=(Cr=(Cr=this.imulK(Cr)).iadd(this.tmp)).bitLength();while(Lr>this.n);var wr=Lr<this.n?-1:Cr.ucmp(this.p);return wr===0?(Cr.words[0]=0,Cr.length=1):wr>0?Cr.isub(this.p):Cr.strip!==void 0?Cr.strip():Cr._strip(),Cr},Er.prototype.split=function(jr,Lr){jr.iushrn(this.n,0,Lr)},Er.prototype.imulK=function(jr){return jr.imul(this.k)},lr(Tr,Er),Tr.prototype.split=function(jr,Lr){for(var Cr=Math.min(jr.length,9),wr=0;wr<Cr;wr++)Lr.words[wr]=jr.words[wr];if(Lr.length=Cr,jr.length<=9)return jr.words[0]=0,void(jr.length=1);var Pr=jr.words[9];for(Lr.words[Lr.length++]=4194303&Pr,wr=10;wr<jr.length;wr++){var Ar=0|jr.words[wr];jr.words[wr-10]=(4194303&Ar)<<4|Pr>>>22,Pr=Ar}Pr>>>=22,jr.words[wr-10]=Pr,Pr===0&&jr.length>10?jr.length-=10:jr.length-=9},Tr.prototype.imulK=function(jr){jr.words[jr.length]=0,jr.words[jr.length+1]=0,jr.length+=2;for(var Lr=0,Cr=0;Cr<jr.length;Cr++){var wr=0|jr.words[Cr];Lr+=977*wr,jr.words[Cr]=67108863&Lr,Lr=64*wr+(Lr/67108864|0)}return jr.words[jr.length-1]===0&&(jr.length--,jr.words[jr.length-1]===0&&jr.length--),jr},lr(Rr,Er),lr(Nr,Er),lr(Dr,Er),Dr.prototype.imulK=function(jr){for(var Lr=0,Cr=0;Cr<jr.length;Cr++){var wr=19*(0|jr.words[Cr])+Lr,Pr=67108863&wr;wr>>>=26,jr.words[Cr]=Pr,Lr=wr}return Lr!==0&&(jr.words[jr.length++]=Lr),jr},or._prime=function(jr){if(_r[jr])return _r[jr];var Lr;if(jr==="k256")Lr=new Tr;else if(jr==="p224")Lr=new Rr;else if(jr==="p192")Lr=new Nr;else{if(jr!=="p25519")throw new Error("Unknown prime "+jr);Lr=new Dr}return _r[jr]=Lr,Lr},Ir.prototype._verify1=function(jr){cr(jr.negative===0,"red works only with positives"),cr(jr.red,"red works only with red numbers")},Ir.prototype._verify2=function(jr,Lr){cr((jr.negative|Lr.negative)==0,"red works only with positives"),cr(jr.red&&jr.red===Lr.red,"red works only with red numbers")},Ir.prototype.imod=function(jr){return this.prime?this.prime.ireduce(jr)._forceRed(this):jr.umod(this.m)._forceRed(this)},Ir.prototype.neg=function(jr){return jr.isZero()?jr.clone():this.m.sub(jr)._forceRed(this)},Ir.prototype.add=function(jr,Lr){this._verify2(jr,Lr);var Cr=jr.add(Lr);return Cr.cmp(this.m)>=0&&Cr.isub(this.m),Cr._forceRed(this)},Ir.prototype.iadd=function(jr,Lr){this._verify2(jr,Lr);var Cr=jr.iadd(Lr);return Cr.cmp(this.m)>=0&&Cr.isub(this.m),Cr},Ir.prototype.sub=function(jr,Lr){this._verify2(jr,Lr);var Cr=jr.sub(Lr);return Cr.cmpn(0)<0&&Cr.iadd(this.m),Cr._forceRed(this)},Ir.prototype.isub=function(jr,Lr){this._verify2(jr,Lr);var Cr=jr.isub(Lr);return Cr.cmpn(0)<0&&Cr.iadd(this.m),Cr},Ir.prototype.shl=function(jr,Lr){return this._verify1(jr),this.imod(jr.ushln(Lr))},Ir.prototype.imul=function(jr,Lr){return this._verify2(jr,Lr),this.imod(jr.imul(Lr))},Ir.prototype.mul=function(jr,Lr){return this._verify2(jr,Lr),this.imod(jr.mul(Lr))},Ir.prototype.isqr=function(jr){return this.imul(jr,jr.clone())},Ir.prototype.sqr=function(jr){return this.mul(jr,jr)},Ir.prototype.sqrt=function(jr){if(jr.isZero())return jr.clone();var Lr=this.m.andln(3);if(cr(Lr%2==1),Lr===3){var Cr=this.m.add(new or(1)).iushrn(2);return this.pow(jr,Cr)}for(var wr=this.m.subn(1),Pr=0;!wr.isZero()&&wr.andln(1)===0;)Pr++,wr.iushrn(1);cr(!wr.isZero());var Ar=new or(1).toRed(this),Sr=Ar.redNeg(),Mr=this.m.subn(1).iushrn(1),qr=this.m.bitLength();for(qr=new or(2*qr*qr).toRed(this);this.pow(qr,Mr).cmp(Sr)!==0;)qr.redIAdd(Sr);for(var $r=this.pow(qr,wr),Br=this.pow(jr,wr.addn(1).iushrn(1)),zr=this.pow(jr,wr),Gr=Pr;zr.cmp(Ar)!==0;){for(var Vr=zr,Xr=0;Vr.cmp(Ar)!==0;Xr++)Vr=Vr.redSqr();cr(Xr<Gr);var Ur=this.pow($r,new or(1).iushln(Gr-Xr-1));Br=Br.redMul(Ur),$r=Ur.redSqr(),zr=zr.redMul($r),Gr=Xr}return Br},Ir.prototype.invm=function(jr){var Lr=jr._invmp(this.m);return Lr.negative!==0?(Lr.negative=0,this.imod(Lr).redNeg()):this.imod(Lr)},Ir.prototype.pow=function(jr,Lr){if(Lr.isZero())return new or(1).toRed(this);if(Lr.cmpn(1)===0)return jr.clone();var Cr=new Array(16);Cr[0]=new or(1).toRed(this),Cr[1]=jr;for(var wr=2;wr<Cr.length;wr++)Cr[wr]=this.mul(Cr[wr-1],jr);var Pr=Cr[0],Ar=0,Sr=0,Mr=Lr.bitLength()%26;for(Mr===0&&(Mr=26),wr=Lr.length-1;wr>=0;wr--){for(var qr=Lr.words[wr],$r=Mr-1;$r>=0;$r--){var Br=qr>>$r&1;Pr!==Cr[0]&&(Pr=this.sqr(Pr)),Br!==0||Ar!==0?(Ar<<=1,Ar|=Br,(++Sr===4||wr===0&&$r===0)&&(Pr=this.mul(Pr,Cr[Ar]),Sr=0,Ar=0)):Sr=0}Mr=26}return Pr},Ir.prototype.convertTo=function(jr){var Lr=jr.umod(this.m);return Lr===jr?Lr.clone():Lr},Ir.prototype.convertFrom=function(jr){var Lr=jr.clone();return Lr.red=null,Lr},or.mont=function(jr){return new Or(jr)},lr(Or,Ir),Or.prototype.convertTo=function(jr){return this.imod(jr.ushln(this.shift))},Or.prototype.convertFrom=function(jr){var Lr=this.imod(jr.mul(this.rinv));return Lr.red=null,Lr},Or.prototype.imul=function(jr,Lr){if(jr.isZero()||Lr.isZero())return jr.words[0]=0,jr.length=1,jr;var Cr=jr.imul(Lr),wr=Cr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Pr=Cr.isub(wr).iushrn(this.shift),Ar=Pr;return Pr.cmp(this.m)>=0?Ar=Pr.isub(this.m):Pr.cmpn(0)<0&&(Ar=Pr.iadd(this.m)),Ar._forceRed(this)},Or.prototype.mul=function(jr,Lr){if(jr.isZero()||Lr.isZero())return new or(0)._forceRed(this);var Cr=jr.mul(Lr),wr=Cr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Pr=Cr.isub(wr).iushrn(this.shift),Ar=Pr;return Pr.cmp(this.m)>=0?Ar=Pr.isub(this.m):Pr.cmpn(0)<0&&(Ar=Pr.iadd(this.m)),Ar._forceRed(this)},Or.prototype.invm=function(jr){return this.imod(jr._invmp(this.m).mul(this.r2))._forceRed(this)}})(nr===void 0||nr)},{buffer:188}],185:[function(rr,nr,ir){ir.byteLength=function(fr){var gr=hr(fr),br=gr[0],pr=gr[1];return 3*(br+pr)/4-pr},ir.toByteArray=function(fr){var gr,br,pr=hr(fr),mr=pr[0],yr=pr[1],xr=new cr(function(Er,Tr,Rr){return 3*(Tr+Rr)/4-Rr}(0,mr,yr)),vr=0,_r=yr>0?mr-4:mr;for(br=0;br<_r;br+=4)gr=ar[fr.charCodeAt(br)]<<18|ar[fr.charCodeAt(br+1)]<<12|ar[fr.charCodeAt(br+2)]<<6|ar[fr.charCodeAt(br+3)],xr[vr++]=gr>>16&255,xr[vr++]=gr>>8&255,xr[vr++]=255&gr;return yr===2&&(gr=ar[fr.charCodeAt(br)]<<2|ar[fr.charCodeAt(br+1)]>>4,xr[vr++]=255&gr),yr===1&&(gr=ar[fr.charCodeAt(br)]<<10|ar[fr.charCodeAt(br+1)]<<4|ar[fr.charCodeAt(br+2)]>>2,xr[vr++]=gr>>8&255,xr[vr++]=255&gr),xr},ir.fromByteArray=function(fr){for(var gr,br=fr.length,pr=br%3,mr=[],yr=0,xr=br-pr;yr<xr;yr+=16383)mr.push(dr(fr,yr,yr+16383>xr?xr:yr+16383));return pr===1?(gr=fr[br-1],mr.push(sr[gr>>2]+sr[gr<<4&63]+"==")):pr===2&&(gr=(fr[br-2]<<8)+fr[br-1],mr.push(sr[gr>>10]+sr[gr>>4&63]+sr[gr<<2&63]+"=")),mr.join("")};for(var sr=[],ar=[],cr=typeof Uint8Array<"u"?Uint8Array:Array,lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",or=0,ur=lr.length;or<ur;++or)sr[or]=lr[or],ar[lr.charCodeAt(or)]=or;function hr(fr){var gr=fr.length;if(gr%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var br=fr.indexOf("=");return br===-1&&(br=gr),[br,br===gr?0:4-br%4]}function dr(fr,gr,br){for(var pr,mr,yr=[],xr=gr;xr<br;xr+=3)pr=(fr[xr]<<16&16711680)+(fr[xr+1]<<8&65280)+(255&fr[xr+2]),yr.push(sr[(mr=pr)>>18&63]+sr[mr>>12&63]+sr[mr>>6&63]+sr[63&mr]);return yr.join("")}ar[45]=62,ar[95]=63},{}],186:[function(rr,nr,ir){(function(sr,ar){function cr(Cr,wr){if(!Cr)throw new Error(wr||"Assertion failed")}function lr(Cr,wr){Cr.super_=wr;var Pr=function(){};Pr.prototype=wr.prototype,Cr.prototype=new Pr,Cr.prototype.constructor=Cr}function or(Cr,wr,Pr){if(or.isBN(Cr))return Cr;this.negative=0,this.words=null,this.length=0,this.red=null,Cr!==null&&(wr!=="le"&&wr!=="be"||(Pr=wr,wr=10),this._init(Cr||0,wr||10,Pr||"be"))}var ur;typeof sr=="object"?sr.exports=or:(void 0).BN=or,or.BN=or,or.wordSize=26;try{ur=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:rr("buffer").Buffer}catch{}function hr(Cr,wr){var Pr=Cr.charCodeAt(wr);return Pr>=48&&Pr<=57?Pr-48:Pr>=65&&Pr<=70?Pr-55:Pr>=97&&Pr<=102?Pr-87:void cr(!1,"Invalid character in "+Cr)}function dr(Cr,wr,Pr){var Ar=hr(Cr,Pr);return Pr-1>=wr&&(Ar|=hr(Cr,Pr-1)<<4),Ar}function fr(Cr,wr,Pr,Ar){for(var Sr=0,Mr=0,qr=Math.min(Cr.length,Pr),$r=wr;$r<qr;$r++){var Br=Cr.charCodeAt($r)-48;Sr*=Ar,Mr=Br>=49?Br-49+10:Br>=17?Br-17+10:Br,cr(Br>=0&&Mr<Ar,"Invalid character"),Sr+=Mr}return Sr}function gr(Cr,wr){Cr.words=wr.words,Cr.length=wr.length,Cr.negative=wr.negative,Cr.red=wr.red}if(or.isBN=function(Cr){return Cr instanceof or||Cr!==null&&typeof Cr=="object"&&Cr.constructor.wordSize===or.wordSize&&Array.isArray(Cr.words)},or.max=function(Cr,wr){return Cr.cmp(wr)>0?Cr:wr},or.min=function(Cr,wr){return Cr.cmp(wr)<0?Cr:wr},or.prototype._init=function(Cr,wr,Pr){if(typeof Cr=="number")return this._initNumber(Cr,wr,Pr);if(typeof Cr=="object")return this._initArray(Cr,wr,Pr);wr==="hex"&&(wr=16),cr(wr===(0|wr)&&wr>=2&&wr<=36);var Ar=0;(Cr=Cr.toString().replace(/\s+/g,""))[0]==="-"&&(Ar++,this.negative=1),Ar<Cr.length&&(wr===16?this._parseHex(Cr,Ar,Pr):(this._parseBase(Cr,wr,Ar),Pr==="le"&&this._initArray(this.toArray(),wr,Pr)))},or.prototype._initNumber=function(Cr,wr,Pr){Cr<0&&(this.negative=1,Cr=-Cr),Cr<67108864?(this.words=[67108863&Cr],this.length=1):Cr<4503599627370496?(this.words=[67108863&Cr,Cr/67108864&67108863],this.length=2):(cr(Cr<9007199254740992),this.words=[67108863&Cr,Cr/67108864&67108863,1],this.length=3),Pr==="le"&&this._initArray(this.toArray(),wr,Pr)},or.prototype._initArray=function(Cr,wr,Pr){if(cr(typeof Cr.length=="number"),Cr.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Cr.length/3),this.words=new Array(this.length);for(var Ar=0;Ar<this.length;Ar++)this.words[Ar]=0;var Sr,Mr,qr=0;if(Pr==="be")for(Ar=Cr.length-1,Sr=0;Ar>=0;Ar-=3)Mr=Cr[Ar]|Cr[Ar-1]<<8|Cr[Ar-2]<<16,this.words[Sr]|=Mr<<qr&67108863,this.words[Sr+1]=Mr>>>26-qr&67108863,(qr+=24)>=26&&(qr-=26,Sr++);else if(Pr==="le")for(Ar=0,Sr=0;Ar<Cr.length;Ar+=3)Mr=Cr[Ar]|Cr[Ar+1]<<8|Cr[Ar+2]<<16,this.words[Sr]|=Mr<<qr&67108863,this.words[Sr+1]=Mr>>>26-qr&67108863,(qr+=24)>=26&&(qr-=26,Sr++);return this._strip()},or.prototype._parseHex=function(Cr,wr,Pr){this.length=Math.ceil((Cr.length-wr)/6),this.words=new Array(this.length);for(var Ar=0;Ar<this.length;Ar++)this.words[Ar]=0;var Sr,Mr=0,qr=0;if(Pr==="be")for(Ar=Cr.length-1;Ar>=wr;Ar-=2)Sr=dr(Cr,wr,Ar)<<Mr,this.words[qr]|=67108863&Sr,Mr>=18?(Mr-=18,qr+=1,this.words[qr]|=Sr>>>26):Mr+=8;else for(Ar=(Cr.length-wr)%2==0?wr+1:wr;Ar<Cr.length;Ar+=2)Sr=dr(Cr,wr,Ar)<<Mr,this.words[qr]|=67108863&Sr,Mr>=18?(Mr-=18,qr+=1,this.words[qr]|=Sr>>>26):Mr+=8;this._strip()},or.prototype._parseBase=function(Cr,wr,Pr){this.words=[0],this.length=1;for(var Ar=0,Sr=1;Sr<=67108863;Sr*=wr)Ar++;Ar--,Sr=Sr/wr|0;for(var Mr=Cr.length-Pr,qr=Mr%Ar,$r=Math.min(Mr,Mr-qr)+Pr,Br=0,zr=Pr;zr<$r;zr+=Ar)Br=fr(Cr,zr,zr+Ar,wr),this.imuln(Sr),this.words[0]+Br<67108864?this.words[0]+=Br:this._iaddn(Br);if(qr!==0){var Gr=1;for(Br=fr(Cr,zr,Cr.length,wr),zr=0;zr<qr;zr++)Gr*=wr;this.imuln(Gr),this.words[0]+Br<67108864?this.words[0]+=Br:this._iaddn(Br)}this._strip()},or.prototype.copy=function(Cr){Cr.words=new Array(this.length);for(var wr=0;wr<this.length;wr++)Cr.words[wr]=this.words[wr];Cr.length=this.length,Cr.negative=this.negative,Cr.red=this.red},or.prototype._move=function(Cr){gr(Cr,this)},or.prototype.clone=function(){var Cr=new or(null);return this.copy(Cr),Cr},or.prototype._expand=function(Cr){for(;this.length<Cr;)this.words[this.length++]=0;return this},or.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},or.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{or.prototype[Symbol.for("nodejs.util.inspect.custom")]=br}catch{or.prototype.inspect=br}else or.prototype.inspect=br;function br(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var pr=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],mr=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],yr=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];or.prototype.toString=function(Cr,wr){var Pr;if(wr=0|wr||1,(Cr=Cr||10)===16||Cr==="hex"){Pr="";for(var Ar=0,Sr=0,Mr=0;Mr<this.length;Mr++){var qr=this.words[Mr],$r=(16777215&(qr<<Ar|Sr)).toString(16);Sr=qr>>>24-Ar&16777215,(Ar+=2)>=26&&(Ar-=26,Mr--),Pr=Sr!==0||Mr!==this.length-1?pr[6-$r.length]+$r+Pr:$r+Pr}for(Sr!==0&&(Pr=Sr.toString(16)+Pr);Pr.length%wr!=0;)Pr="0"+Pr;return this.negative!==0&&(Pr="-"+Pr),Pr}if(Cr===(0|Cr)&&Cr>=2&&Cr<=36){var Br=mr[Cr],zr=yr[Cr];Pr="";var Gr=this.clone();for(Gr.negative=0;!Gr.isZero();){var Vr=Gr.modrn(zr).toString(Cr);Pr=(Gr=Gr.idivn(zr)).isZero()?Vr+Pr:pr[Br-Vr.length]+Vr+Pr}for(this.isZero()&&(Pr="0"+Pr);Pr.length%wr!=0;)Pr="0"+Pr;return this.negative!==0&&(Pr="-"+Pr),Pr}cr(!1,"Base should be between 2 and 36")},or.prototype.toNumber=function(){var Cr=this.words[0];return this.length===2?Cr+=67108864*this.words[1]:this.length===3&&this.words[2]===1?Cr+=4503599627370496+67108864*this.words[1]:this.length>2&&cr(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Cr:Cr},or.prototype.toJSON=function(){return this.toString(16,2)},ur&&(or.prototype.toBuffer=function(Cr,wr){return this.toArrayLike(ur,Cr,wr)}),or.prototype.toArray=function(Cr,wr){return this.toArrayLike(Array,Cr,wr)};function xr(Cr,wr,Pr){Pr.negative=wr.negative^Cr.negative;var Ar=Cr.length+wr.length|0;Pr.length=Ar,Ar=Ar-1|0;var Sr=0|Cr.words[0],Mr=0|wr.words[0],qr=Sr*Mr,$r=67108863&qr,Br=qr/67108864|0;Pr.words[0]=$r;for(var zr=1;zr<Ar;zr++){for(var Gr=Br>>>26,Vr=67108863&Br,Xr=Math.min(zr,wr.length-1),Ur=Math.max(0,zr-Cr.length+1);Ur<=Xr;Ur++){var Fr=zr-Ur|0;Gr+=(qr=(Sr=0|Cr.words[Fr])*(Mr=0|wr.words[Ur])+Vr)/67108864|0,Vr=67108863&qr}Pr.words[zr]=0|Vr,Br=0|Gr}return Br!==0?Pr.words[zr]=0|Br:Pr.length--,Pr._strip()}or.prototype.toArrayLike=function(Cr,wr,Pr){this._strip();var Ar=this.byteLength(),Sr=Pr||Math.max(1,Ar);cr(Ar<=Sr,"byte array longer than desired length"),cr(Sr>0,"Requested array length <= 0");var Mr=function(qr,$r){return qr.allocUnsafe?qr.allocUnsafe($r):new qr($r)}(Cr,Sr);return this["_toArrayLike"+(wr==="le"?"LE":"BE")](Mr,Ar),Mr},or.prototype._toArrayLikeLE=function(Cr,wr){for(var Pr=0,Ar=0,Sr=0,Mr=0;Sr<this.length;Sr++){var qr=this.words[Sr]<<Mr|Ar;Cr[Pr++]=255&qr,Pr<Cr.length&&(Cr[Pr++]=qr>>8&255),Pr<Cr.length&&(Cr[Pr++]=qr>>16&255),Mr===6?(Pr<Cr.length&&(Cr[Pr++]=qr>>24&255),Ar=0,Mr=0):(Ar=qr>>>24,Mr+=2)}if(Pr<Cr.length)for(Cr[Pr++]=Ar;Pr<Cr.length;)Cr[Pr++]=0},or.prototype._toArrayLikeBE=function(Cr,wr){for(var Pr=Cr.length-1,Ar=0,Sr=0,Mr=0;Sr<this.length;Sr++){var qr=this.words[Sr]<<Mr|Ar;Cr[Pr--]=255&qr,Pr>=0&&(Cr[Pr--]=qr>>8&255),Pr>=0&&(Cr[Pr--]=qr>>16&255),Mr===6?(Pr>=0&&(Cr[Pr--]=qr>>24&255),Ar=0,Mr=0):(Ar=qr>>>24,Mr+=2)}if(Pr>=0)for(Cr[Pr--]=Ar;Pr>=0;)Cr[Pr--]=0},Math.clz32?or.prototype._countBits=function(Cr){return 32-Math.clz32(Cr)}:or.prototype._countBits=function(Cr){var wr=Cr,Pr=0;return wr>=4096&&(Pr+=13,wr>>>=13),wr>=64&&(Pr+=7,wr>>>=7),wr>=8&&(Pr+=4,wr>>>=4),wr>=2&&(Pr+=2,wr>>>=2),Pr+wr},or.prototype._zeroBits=function(Cr){if(Cr===0)return 26;var wr=Cr,Pr=0;return!(8191&wr)&&(Pr+=13,wr>>>=13),!(127&wr)&&(Pr+=7,wr>>>=7),!(15&wr)&&(Pr+=4,wr>>>=4),!(3&wr)&&(Pr+=2,wr>>>=2),!(1&wr)&&Pr++,Pr},or.prototype.bitLength=function(){var Cr=this.words[this.length-1],wr=this._countBits(Cr);return 26*(this.length-1)+wr},or.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Cr=0,wr=0;wr<this.length;wr++){var Pr=this._zeroBits(this.words[wr]);if(Cr+=Pr,Pr!==26)break}return Cr},or.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},or.prototype.toTwos=function(Cr){return this.negative!==0?this.abs().inotn(Cr).iaddn(1):this.clone()},or.prototype.fromTwos=function(Cr){return this.testn(Cr-1)?this.notn(Cr).iaddn(1).ineg():this.clone()},or.prototype.isNeg=function(){return this.negative!==0},or.prototype.neg=function(){return this.clone().ineg()},or.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},or.prototype.iuor=function(Cr){for(;this.length<Cr.length;)this.words[this.length++]=0;for(var wr=0;wr<Cr.length;wr++)this.words[wr]=this.words[wr]|Cr.words[wr];return this._strip()},or.prototype.ior=function(Cr){return cr((this.negative|Cr.negative)==0),this.iuor(Cr)},or.prototype.or=function(Cr){return this.length>Cr.length?this.clone().ior(Cr):Cr.clone().ior(this)},or.prototype.uor=function(Cr){return this.length>Cr.length?this.clone().iuor(Cr):Cr.clone().iuor(this)},or.prototype.iuand=function(Cr){var wr;wr=this.length>Cr.length?Cr:this;for(var Pr=0;Pr<wr.length;Pr++)this.words[Pr]=this.words[Pr]&Cr.words[Pr];return this.length=wr.length,this._strip()},or.prototype.iand=function(Cr){return cr((this.negative|Cr.negative)==0),this.iuand(Cr)},or.prototype.and=function(Cr){return this.length>Cr.length?this.clone().iand(Cr):Cr.clone().iand(this)},or.prototype.uand=function(Cr){return this.length>Cr.length?this.clone().iuand(Cr):Cr.clone().iuand(this)},or.prototype.iuxor=function(Cr){var wr,Pr;this.length>Cr.length?(wr=this,Pr=Cr):(wr=Cr,Pr=this);for(var Ar=0;Ar<Pr.length;Ar++)this.words[Ar]=wr.words[Ar]^Pr.words[Ar];if(this!==wr)for(;Ar<wr.length;Ar++)this.words[Ar]=wr.words[Ar];return this.length=wr.length,this._strip()},or.prototype.ixor=function(Cr){return cr((this.negative|Cr.negative)==0),this.iuxor(Cr)},or.prototype.xor=function(Cr){return this.length>Cr.length?this.clone().ixor(Cr):Cr.clone().ixor(this)},or.prototype.uxor=function(Cr){return this.length>Cr.length?this.clone().iuxor(Cr):Cr.clone().iuxor(this)},or.prototype.inotn=function(Cr){cr(typeof Cr=="number"&&Cr>=0);var wr=0|Math.ceil(Cr/26),Pr=Cr%26;this._expand(wr),Pr>0&&wr--;for(var Ar=0;Ar<wr;Ar++)this.words[Ar]=67108863&~this.words[Ar];return Pr>0&&(this.words[Ar]=~this.words[Ar]&67108863>>26-Pr),this._strip()},or.prototype.notn=function(Cr){return this.clone().inotn(Cr)},or.prototype.setn=function(Cr,wr){cr(typeof Cr=="number"&&Cr>=0);var Pr=Cr/26|0,Ar=Cr%26;return this._expand(Pr+1),this.words[Pr]=wr?this.words[Pr]|1<<Ar:this.words[Pr]&~(1<<Ar),this._strip()},or.prototype.iadd=function(Cr){var wr,Pr,Ar;if(this.negative!==0&&Cr.negative===0)return this.negative=0,wr=this.isub(Cr),this.negative^=1,this._normSign();if(this.negative===0&&Cr.negative!==0)return Cr.negative=0,wr=this.isub(Cr),Cr.negative=1,wr._normSign();this.length>Cr.length?(Pr=this,Ar=Cr):(Pr=Cr,Ar=this);for(var Sr=0,Mr=0;Mr<Ar.length;Mr++)wr=(0|Pr.words[Mr])+(0|Ar.words[Mr])+Sr,this.words[Mr]=67108863&wr,Sr=wr>>>26;for(;Sr!==0&&Mr<Pr.length;Mr++)wr=(0|Pr.words[Mr])+Sr,this.words[Mr]=67108863&wr,Sr=wr>>>26;if(this.length=Pr.length,Sr!==0)this.words[this.length]=Sr,this.length++;else if(Pr!==this)for(;Mr<Pr.length;Mr++)this.words[Mr]=Pr.words[Mr];return this},or.prototype.add=function(Cr){var wr;return Cr.negative!==0&&this.negative===0?(Cr.negative=0,wr=this.sub(Cr),Cr.negative^=1,wr):Cr.negative===0&&this.negative!==0?(this.negative=0,wr=Cr.sub(this),this.negative=1,wr):this.length>Cr.length?this.clone().iadd(Cr):Cr.clone().iadd(this)},or.prototype.isub=function(Cr){if(Cr.negative!==0){Cr.negative=0;var wr=this.iadd(Cr);return Cr.negative=1,wr._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(Cr),this.negative=1,this._normSign();var Pr,Ar,Sr=this.cmp(Cr);if(Sr===0)return this.negative=0,this.length=1,this.words[0]=0,this;Sr>0?(Pr=this,Ar=Cr):(Pr=Cr,Ar=this);for(var Mr=0,qr=0;qr<Ar.length;qr++)Mr=(wr=(0|Pr.words[qr])-(0|Ar.words[qr])+Mr)>>26,this.words[qr]=67108863&wr;for(;Mr!==0&&qr<Pr.length;qr++)Mr=(wr=(0|Pr.words[qr])+Mr)>>26,this.words[qr]=67108863&wr;if(Mr===0&&qr<Pr.length&&Pr!==this)for(;qr<Pr.length;qr++)this.words[qr]=Pr.words[qr];return this.length=Math.max(this.length,qr),Pr!==this&&(this.negative=1),this._strip()},or.prototype.sub=function(Cr){return this.clone().isub(Cr)};var vr=function(Cr,wr,Pr){var Ar,Sr,Mr,qr=Cr.words,$r=wr.words,Br=Pr.words,zr=0,Gr=0|qr[0],Vr=8191&Gr,Xr=Gr>>>13,Ur=0|qr[1],Fr=8191&Ur,Kr=Ur>>>13,Zr=0|qr[2],Jr=8191&Zr,tn=Zr>>>13,an=0|qr[3],dn=8191&an,en=an>>>13,rn=0|qr[4],sn=8191&rn,on=rn>>>13,fn=0|qr[5],pn=8191&fn,gn=fn>>>13,Pn=0|qr[6],In=8191&Pn,En=Pn>>>13,zn=0|qr[7],yn=8191&zn,Vn=zn>>>13,Kn=0|qr[8],es=8191&Kn,Xn=Kn>>>13,ds=0|qr[9],fs=8191&ds,os=ds>>>13,Hn=0|$r[0],Ln=8191&Hn,Dn=Hn>>>13,ls=0|$r[1],Ds=8191&ls,xs=ls>>>13,kn=0|$r[2],Jn=8191&kn,is=kn>>>13,bs=0|$r[3],Bn=8191&bs,Yn=bs>>>13,vn=0|$r[4],_n=8191&vn,Mn=vn>>>13,Cn=0|$r[5],Zn=8191&Cn,qn=Cn>>>13,wn=0|$r[6],On=8191&wn,Gn=wn>>>13,Qn=0|$r[7],$s=8191&Qn,us=Qn>>>13,ws=0|$r[8],As=8191&ws,Rs=ws>>>13,Ms=0|$r[9],Bs=8191&Ms,Zs=Ms>>>13;Pr.negative=Cr.negative^wr.negative,Pr.length=19;var Qs=(zr+(Ar=Math.imul(Vr,Ln))|0)+((8191&(Sr=(Sr=Math.imul(Vr,Dn))+Math.imul(Xr,Ln)|0))<<13)|0;zr=((Mr=Math.imul(Xr,Dn))+(Sr>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,Ar=Math.imul(Fr,Ln),Sr=(Sr=Math.imul(Fr,Dn))+Math.imul(Kr,Ln)|0,Mr=Math.imul(Kr,Dn);var eo=(zr+(Ar=Ar+Math.imul(Vr,Ds)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,xs)|0)+Math.imul(Xr,Ds)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,xs)|0)+(Sr>>>13)|0)+(eo>>>26)|0,eo&=67108863,Ar=Math.imul(Jr,Ln),Sr=(Sr=Math.imul(Jr,Dn))+Math.imul(tn,Ln)|0,Mr=Math.imul(tn,Dn),Ar=Ar+Math.imul(Fr,Ds)|0,Sr=(Sr=Sr+Math.imul(Fr,xs)|0)+Math.imul(Kr,Ds)|0,Mr=Mr+Math.imul(Kr,xs)|0;var ao=(zr+(Ar=Ar+Math.imul(Vr,Jn)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,is)|0)+Math.imul(Xr,Jn)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,is)|0)+(Sr>>>13)|0)+(ao>>>26)|0,ao&=67108863,Ar=Math.imul(dn,Ln),Sr=(Sr=Math.imul(dn,Dn))+Math.imul(en,Ln)|0,Mr=Math.imul(en,Dn),Ar=Ar+Math.imul(Jr,Ds)|0,Sr=(Sr=Sr+Math.imul(Jr,xs)|0)+Math.imul(tn,Ds)|0,Mr=Mr+Math.imul(tn,xs)|0,Ar=Ar+Math.imul(Fr,Jn)|0,Sr=(Sr=Sr+Math.imul(Fr,is)|0)+Math.imul(Kr,Jn)|0,Mr=Mr+Math.imul(Kr,is)|0;var Un=(zr+(Ar=Ar+Math.imul(Vr,Bn)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,Yn)|0)+Math.imul(Xr,Bn)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,Yn)|0)+(Sr>>>13)|0)+(Un>>>26)|0,Un&=67108863,Ar=Math.imul(sn,Ln),Sr=(Sr=Math.imul(sn,Dn))+Math.imul(on,Ln)|0,Mr=Math.imul(on,Dn),Ar=Ar+Math.imul(dn,Ds)|0,Sr=(Sr=Sr+Math.imul(dn,xs)|0)+Math.imul(en,Ds)|0,Mr=Mr+Math.imul(en,xs)|0,Ar=Ar+Math.imul(Jr,Jn)|0,Sr=(Sr=Sr+Math.imul(Jr,is)|0)+Math.imul(tn,Jn)|0,Mr=Mr+Math.imul(tn,is)|0,Ar=Ar+Math.imul(Fr,Bn)|0,Sr=(Sr=Sr+Math.imul(Fr,Yn)|0)+Math.imul(Kr,Bn)|0,Mr=Mr+Math.imul(Kr,Yn)|0;var Ts=(zr+(Ar=Ar+Math.imul(Vr,_n)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,Mn)|0)+Math.imul(Xr,_n)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,Mn)|0)+(Sr>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,Ar=Math.imul(pn,Ln),Sr=(Sr=Math.imul(pn,Dn))+Math.imul(gn,Ln)|0,Mr=Math.imul(gn,Dn),Ar=Ar+Math.imul(sn,Ds)|0,Sr=(Sr=Sr+Math.imul(sn,xs)|0)+Math.imul(on,Ds)|0,Mr=Mr+Math.imul(on,xs)|0,Ar=Ar+Math.imul(dn,Jn)|0,Sr=(Sr=Sr+Math.imul(dn,is)|0)+Math.imul(en,Jn)|0,Mr=Mr+Math.imul(en,is)|0,Ar=Ar+Math.imul(Jr,Bn)|0,Sr=(Sr=Sr+Math.imul(Jr,Yn)|0)+Math.imul(tn,Bn)|0,Mr=Mr+Math.imul(tn,Yn)|0,Ar=Ar+Math.imul(Fr,_n)|0,Sr=(Sr=Sr+Math.imul(Fr,Mn)|0)+Math.imul(Kr,_n)|0,Mr=Mr+Math.imul(Kr,Mn)|0;var Nn=(zr+(Ar=Ar+Math.imul(Vr,Zn)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,qn)|0)+Math.imul(Xr,Zn)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,qn)|0)+(Sr>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,Ar=Math.imul(In,Ln),Sr=(Sr=Math.imul(In,Dn))+Math.imul(En,Ln)|0,Mr=Math.imul(En,Dn),Ar=Ar+Math.imul(pn,Ds)|0,Sr=(Sr=Sr+Math.imul(pn,xs)|0)+Math.imul(gn,Ds)|0,Mr=Mr+Math.imul(gn,xs)|0,Ar=Ar+Math.imul(sn,Jn)|0,Sr=(Sr=Sr+Math.imul(sn,is)|0)+Math.imul(on,Jn)|0,Mr=Mr+Math.imul(on,is)|0,Ar=Ar+Math.imul(dn,Bn)|0,Sr=(Sr=Sr+Math.imul(dn,Yn)|0)+Math.imul(en,Bn)|0,Mr=Mr+Math.imul(en,Yn)|0,Ar=Ar+Math.imul(Jr,_n)|0,Sr=(Sr=Sr+Math.imul(Jr,Mn)|0)+Math.imul(tn,_n)|0,Mr=Mr+Math.imul(tn,Mn)|0,Ar=Ar+Math.imul(Fr,Zn)|0,Sr=(Sr=Sr+Math.imul(Fr,qn)|0)+Math.imul(Kr,Zn)|0,Mr=Mr+Math.imul(Kr,qn)|0;var ns=(zr+(Ar=Ar+Math.imul(Vr,On)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,Gn)|0)+Math.imul(Xr,On)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,Gn)|0)+(Sr>>>13)|0)+(ns>>>26)|0,ns&=67108863,Ar=Math.imul(yn,Ln),Sr=(Sr=Math.imul(yn,Dn))+Math.imul(Vn,Ln)|0,Mr=Math.imul(Vn,Dn),Ar=Ar+Math.imul(In,Ds)|0,Sr=(Sr=Sr+Math.imul(In,xs)|0)+Math.imul(En,Ds)|0,Mr=Mr+Math.imul(En,xs)|0,Ar=Ar+Math.imul(pn,Jn)|0,Sr=(Sr=Sr+Math.imul(pn,is)|0)+Math.imul(gn,Jn)|0,Mr=Mr+Math.imul(gn,is)|0,Ar=Ar+Math.imul(sn,Bn)|0,Sr=(Sr=Sr+Math.imul(sn,Yn)|0)+Math.imul(on,Bn)|0,Mr=Mr+Math.imul(on,Yn)|0,Ar=Ar+Math.imul(dn,_n)|0,Sr=(Sr=Sr+Math.imul(dn,Mn)|0)+Math.imul(en,_n)|0,Mr=Mr+Math.imul(en,Mn)|0,Ar=Ar+Math.imul(Jr,Zn)|0,Sr=(Sr=Sr+Math.imul(Jr,qn)|0)+Math.imul(tn,Zn)|0,Mr=Mr+Math.imul(tn,qn)|0,Ar=Ar+Math.imul(Fr,On)|0,Sr=(Sr=Sr+Math.imul(Fr,Gn)|0)+Math.imul(Kr,On)|0,Mr=Mr+Math.imul(Kr,Gn)|0;var Ps=(zr+(Ar=Ar+Math.imul(Vr,$s)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,us)|0)+Math.imul(Xr,$s)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,us)|0)+(Sr>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,Ar=Math.imul(es,Ln),Sr=(Sr=Math.imul(es,Dn))+Math.imul(Xn,Ln)|0,Mr=Math.imul(Xn,Dn),Ar=Ar+Math.imul(yn,Ds)|0,Sr=(Sr=Sr+Math.imul(yn,xs)|0)+Math.imul(Vn,Ds)|0,Mr=Mr+Math.imul(Vn,xs)|0,Ar=Ar+Math.imul(In,Jn)|0,Sr=(Sr=Sr+Math.imul(In,is)|0)+Math.imul(En,Jn)|0,Mr=Mr+Math.imul(En,is)|0,Ar=Ar+Math.imul(pn,Bn)|0,Sr=(Sr=Sr+Math.imul(pn,Yn)|0)+Math.imul(gn,Bn)|0,Mr=Mr+Math.imul(gn,Yn)|0,Ar=Ar+Math.imul(sn,_n)|0,Sr=(Sr=Sr+Math.imul(sn,Mn)|0)+Math.imul(on,_n)|0,Mr=Mr+Math.imul(on,Mn)|0,Ar=Ar+Math.imul(dn,Zn)|0,Sr=(Sr=Sr+Math.imul(dn,qn)|0)+Math.imul(en,Zn)|0,Mr=Mr+Math.imul(en,qn)|0,Ar=Ar+Math.imul(Jr,On)|0,Sr=(Sr=Sr+Math.imul(Jr,Gn)|0)+Math.imul(tn,On)|0,Mr=Mr+Math.imul(tn,Gn)|0,Ar=Ar+Math.imul(Fr,$s)|0,Sr=(Sr=Sr+Math.imul(Fr,us)|0)+Math.imul(Kr,$s)|0,Mr=Mr+Math.imul(Kr,us)|0;var Ss=(zr+(Ar=Ar+Math.imul(Vr,As)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,Rs)|0)+Math.imul(Xr,As)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,Rs)|0)+(Sr>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,Ar=Math.imul(fs,Ln),Sr=(Sr=Math.imul(fs,Dn))+Math.imul(os,Ln)|0,Mr=Math.imul(os,Dn),Ar=Ar+Math.imul(es,Ds)|0,Sr=(Sr=Sr+Math.imul(es,xs)|0)+Math.imul(Xn,Ds)|0,Mr=Mr+Math.imul(Xn,xs)|0,Ar=Ar+Math.imul(yn,Jn)|0,Sr=(Sr=Sr+Math.imul(yn,is)|0)+Math.imul(Vn,Jn)|0,Mr=Mr+Math.imul(Vn,is)|0,Ar=Ar+Math.imul(In,Bn)|0,Sr=(Sr=Sr+Math.imul(In,Yn)|0)+Math.imul(En,Bn)|0,Mr=Mr+Math.imul(En,Yn)|0,Ar=Ar+Math.imul(pn,_n)|0,Sr=(Sr=Sr+Math.imul(pn,Mn)|0)+Math.imul(gn,_n)|0,Mr=Mr+Math.imul(gn,Mn)|0,Ar=Ar+Math.imul(sn,Zn)|0,Sr=(Sr=Sr+Math.imul(sn,qn)|0)+Math.imul(on,Zn)|0,Mr=Mr+Math.imul(on,qn)|0,Ar=Ar+Math.imul(dn,On)|0,Sr=(Sr=Sr+Math.imul(dn,Gn)|0)+Math.imul(en,On)|0,Mr=Mr+Math.imul(en,Gn)|0,Ar=Ar+Math.imul(Jr,$s)|0,Sr=(Sr=Sr+Math.imul(Jr,us)|0)+Math.imul(tn,$s)|0,Mr=Mr+Math.imul(tn,us)|0,Ar=Ar+Math.imul(Fr,As)|0,Sr=(Sr=Sr+Math.imul(Fr,Rs)|0)+Math.imul(Kr,As)|0,Mr=Mr+Math.imul(Kr,Rs)|0;var Ks=(zr+(Ar=Ar+Math.imul(Vr,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Vr,Zs)|0)+Math.imul(Xr,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xr,Zs)|0)+(Sr>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,Ar=Math.imul(fs,Ds),Sr=(Sr=Math.imul(fs,xs))+Math.imul(os,Ds)|0,Mr=Math.imul(os,xs),Ar=Ar+Math.imul(es,Jn)|0,Sr=(Sr=Sr+Math.imul(es,is)|0)+Math.imul(Xn,Jn)|0,Mr=Mr+Math.imul(Xn,is)|0,Ar=Ar+Math.imul(yn,Bn)|0,Sr=(Sr=Sr+Math.imul(yn,Yn)|0)+Math.imul(Vn,Bn)|0,Mr=Mr+Math.imul(Vn,Yn)|0,Ar=Ar+Math.imul(In,_n)|0,Sr=(Sr=Sr+Math.imul(In,Mn)|0)+Math.imul(En,_n)|0,Mr=Mr+Math.imul(En,Mn)|0,Ar=Ar+Math.imul(pn,Zn)|0,Sr=(Sr=Sr+Math.imul(pn,qn)|0)+Math.imul(gn,Zn)|0,Mr=Mr+Math.imul(gn,qn)|0,Ar=Ar+Math.imul(sn,On)|0,Sr=(Sr=Sr+Math.imul(sn,Gn)|0)+Math.imul(on,On)|0,Mr=Mr+Math.imul(on,Gn)|0,Ar=Ar+Math.imul(dn,$s)|0,Sr=(Sr=Sr+Math.imul(dn,us)|0)+Math.imul(en,$s)|0,Mr=Mr+Math.imul(en,us)|0,Ar=Ar+Math.imul(Jr,As)|0,Sr=(Sr=Sr+Math.imul(Jr,Rs)|0)+Math.imul(tn,As)|0,Mr=Mr+Math.imul(tn,Rs)|0;var Is=(zr+(Ar=Ar+Math.imul(Fr,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Fr,Zs)|0)+Math.imul(Kr,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Kr,Zs)|0)+(Sr>>>13)|0)+(Is>>>26)|0,Is&=67108863,Ar=Math.imul(fs,Jn),Sr=(Sr=Math.imul(fs,is))+Math.imul(os,Jn)|0,Mr=Math.imul(os,is),Ar=Ar+Math.imul(es,Bn)|0,Sr=(Sr=Sr+Math.imul(es,Yn)|0)+Math.imul(Xn,Bn)|0,Mr=Mr+Math.imul(Xn,Yn)|0,Ar=Ar+Math.imul(yn,_n)|0,Sr=(Sr=Sr+Math.imul(yn,Mn)|0)+Math.imul(Vn,_n)|0,Mr=Mr+Math.imul(Vn,Mn)|0,Ar=Ar+Math.imul(In,Zn)|0,Sr=(Sr=Sr+Math.imul(In,qn)|0)+Math.imul(En,Zn)|0,Mr=Mr+Math.imul(En,qn)|0,Ar=Ar+Math.imul(pn,On)|0,Sr=(Sr=Sr+Math.imul(pn,Gn)|0)+Math.imul(gn,On)|0,Mr=Mr+Math.imul(gn,Gn)|0,Ar=Ar+Math.imul(sn,$s)|0,Sr=(Sr=Sr+Math.imul(sn,us)|0)+Math.imul(on,$s)|0,Mr=Mr+Math.imul(on,us)|0,Ar=Ar+Math.imul(dn,As)|0,Sr=(Sr=Sr+Math.imul(dn,Rs)|0)+Math.imul(en,As)|0,Mr=Mr+Math.imul(en,Rs)|0;var An=(zr+(Ar=Ar+Math.imul(Jr,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(Jr,Zs)|0)+Math.imul(tn,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(tn,Zs)|0)+(Sr>>>13)|0)+(An>>>26)|0,An&=67108863,Ar=Math.imul(fs,Bn),Sr=(Sr=Math.imul(fs,Yn))+Math.imul(os,Bn)|0,Mr=Math.imul(os,Yn),Ar=Ar+Math.imul(es,_n)|0,Sr=(Sr=Sr+Math.imul(es,Mn)|0)+Math.imul(Xn,_n)|0,Mr=Mr+Math.imul(Xn,Mn)|0,Ar=Ar+Math.imul(yn,Zn)|0,Sr=(Sr=Sr+Math.imul(yn,qn)|0)+Math.imul(Vn,Zn)|0,Mr=Mr+Math.imul(Vn,qn)|0,Ar=Ar+Math.imul(In,On)|0,Sr=(Sr=Sr+Math.imul(In,Gn)|0)+Math.imul(En,On)|0,Mr=Mr+Math.imul(En,Gn)|0,Ar=Ar+Math.imul(pn,$s)|0,Sr=(Sr=Sr+Math.imul(pn,us)|0)+Math.imul(gn,$s)|0,Mr=Mr+Math.imul(gn,us)|0,Ar=Ar+Math.imul(sn,As)|0,Sr=(Sr=Sr+Math.imul(sn,Rs)|0)+Math.imul(on,As)|0,Mr=Mr+Math.imul(on,Rs)|0;var Vs=(zr+(Ar=Ar+Math.imul(dn,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(dn,Zs)|0)+Math.imul(en,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(en,Zs)|0)+(Sr>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,Ar=Math.imul(fs,_n),Sr=(Sr=Math.imul(fs,Mn))+Math.imul(os,_n)|0,Mr=Math.imul(os,Mn),Ar=Ar+Math.imul(es,Zn)|0,Sr=(Sr=Sr+Math.imul(es,qn)|0)+Math.imul(Xn,Zn)|0,Mr=Mr+Math.imul(Xn,qn)|0,Ar=Ar+Math.imul(yn,On)|0,Sr=(Sr=Sr+Math.imul(yn,Gn)|0)+Math.imul(Vn,On)|0,Mr=Mr+Math.imul(Vn,Gn)|0,Ar=Ar+Math.imul(In,$s)|0,Sr=(Sr=Sr+Math.imul(In,us)|0)+Math.imul(En,$s)|0,Mr=Mr+Math.imul(En,us)|0,Ar=Ar+Math.imul(pn,As)|0,Sr=(Sr=Sr+Math.imul(pn,Rs)|0)+Math.imul(gn,As)|0,Mr=Mr+Math.imul(gn,Rs)|0;var Fs=(zr+(Ar=Ar+Math.imul(sn,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(sn,Zs)|0)+Math.imul(on,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(on,Zs)|0)+(Sr>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,Ar=Math.imul(fs,Zn),Sr=(Sr=Math.imul(fs,qn))+Math.imul(os,Zn)|0,Mr=Math.imul(os,qn),Ar=Ar+Math.imul(es,On)|0,Sr=(Sr=Sr+Math.imul(es,Gn)|0)+Math.imul(Xn,On)|0,Mr=Mr+Math.imul(Xn,Gn)|0,Ar=Ar+Math.imul(yn,$s)|0,Sr=(Sr=Sr+Math.imul(yn,us)|0)+Math.imul(Vn,$s)|0,Mr=Mr+Math.imul(Vn,us)|0,Ar=Ar+Math.imul(In,As)|0,Sr=(Sr=Sr+Math.imul(In,Rs)|0)+Math.imul(En,As)|0,Mr=Mr+Math.imul(En,Rs)|0;var Cs=(zr+(Ar=Ar+Math.imul(pn,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(pn,Zs)|0)+Math.imul(gn,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(gn,Zs)|0)+(Sr>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,Ar=Math.imul(fs,On),Sr=(Sr=Math.imul(fs,Gn))+Math.imul(os,On)|0,Mr=Math.imul(os,Gn),Ar=Ar+Math.imul(es,$s)|0,Sr=(Sr=Sr+Math.imul(es,us)|0)+Math.imul(Xn,$s)|0,Mr=Mr+Math.imul(Xn,us)|0,Ar=Ar+Math.imul(yn,As)|0,Sr=(Sr=Sr+Math.imul(yn,Rs)|0)+Math.imul(Vn,As)|0,Mr=Mr+Math.imul(Vn,Rs)|0;var Ns=(zr+(Ar=Ar+Math.imul(In,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(In,Zs)|0)+Math.imul(En,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(En,Zs)|0)+(Sr>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,Ar=Math.imul(fs,$s),Sr=(Sr=Math.imul(fs,us))+Math.imul(os,$s)|0,Mr=Math.imul(os,us),Ar=Ar+Math.imul(es,As)|0,Sr=(Sr=Sr+Math.imul(es,Rs)|0)+Math.imul(Xn,As)|0,Mr=Mr+Math.imul(Xn,Rs)|0;var Ys=(zr+(Ar=Ar+Math.imul(yn,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(yn,Zs)|0)+Math.imul(Vn,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Vn,Zs)|0)+(Sr>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,Ar=Math.imul(fs,As),Sr=(Sr=Math.imul(fs,Rs))+Math.imul(os,As)|0,Mr=Math.imul(os,Rs);var js=(zr+(Ar=Ar+Math.imul(es,Bs)|0)|0)+((8191&(Sr=(Sr=Sr+Math.imul(es,Zs)|0)+Math.imul(Xn,Bs)|0))<<13)|0;zr=((Mr=Mr+Math.imul(Xn,Zs)|0)+(Sr>>>13)|0)+(js>>>26)|0,js&=67108863;var Js=(zr+(Ar=Math.imul(fs,Bs))|0)+((8191&(Sr=(Sr=Math.imul(fs,Zs))+Math.imul(os,Bs)|0))<<13)|0;return zr=((Mr=Math.imul(os,Zs))+(Sr>>>13)|0)+(Js>>>26)|0,Js&=67108863,Br[0]=Qs,Br[1]=eo,Br[2]=ao,Br[3]=Un,Br[4]=Ts,Br[5]=Nn,Br[6]=ns,Br[7]=Ps,Br[8]=Ss,Br[9]=Ks,Br[10]=Is,Br[11]=An,Br[12]=Vs,Br[13]=Fs,Br[14]=Cs,Br[15]=Ns,Br[16]=Ys,Br[17]=js,Br[18]=Js,zr!==0&&(Br[19]=zr,Pr.length++),Pr};function _r(Cr,wr,Pr){Pr.negative=wr.negative^Cr.negative,Pr.length=Cr.length+wr.length;for(var Ar=0,Sr=0,Mr=0;Mr<Pr.length-1;Mr++){var qr=Sr;Sr=0;for(var $r=67108863&Ar,Br=Math.min(Mr,wr.length-1),zr=Math.max(0,Mr-Cr.length+1);zr<=Br;zr++){var Gr=Mr-zr,Vr=(0|Cr.words[Gr])*(0|wr.words[zr]),Xr=67108863&Vr;$r=67108863&(Xr=Xr+$r|0),Sr+=(qr=(qr=qr+(Vr/67108864|0)|0)+(Xr>>>26)|0)>>>26,qr&=67108863}Pr.words[Mr]=$r,Ar=qr,qr=Sr}return Ar!==0?Pr.words[Mr]=Ar:Pr.length--,Pr._strip()}function Er(Cr,wr,Pr){return _r(Cr,wr,Pr)}Math.imul||(vr=xr),or.prototype.mulTo=function(Cr,wr){var Pr=this.length+Cr.length;return this.length===10&&Cr.length===10?vr(this,Cr,wr):Pr<63?xr(this,Cr,wr):Pr<1024?_r(this,Cr,wr):Er(this,Cr,wr)},or.prototype.mul=function(Cr){var wr=new or(null);return wr.words=new Array(this.length+Cr.length),this.mulTo(Cr,wr)},or.prototype.mulf=function(Cr){var wr=new or(null);return wr.words=new Array(this.length+Cr.length),Er(this,Cr,wr)},or.prototype.imul=function(Cr){return this.clone().mulTo(Cr,this)},or.prototype.imuln=function(Cr){var wr=Cr<0;wr&&(Cr=-Cr),cr(typeof Cr=="number"),cr(Cr<67108864);for(var Pr=0,Ar=0;Ar<this.length;Ar++){var Sr=(0|this.words[Ar])*Cr,Mr=(67108863&Sr)+(67108863&Pr);Pr>>=26,Pr+=Sr/67108864|0,Pr+=Mr>>>26,this.words[Ar]=67108863&Mr}return Pr!==0&&(this.words[Ar]=Pr,this.length++),wr?this.ineg():this},or.prototype.muln=function(Cr){return this.clone().imuln(Cr)},or.prototype.sqr=function(){return this.mul(this)},or.prototype.isqr=function(){return this.imul(this.clone())},or.prototype.pow=function(Cr){var wr=function(Mr){for(var qr=new Array(Mr.bitLength()),$r=0;$r<qr.length;$r++){var Br=$r/26|0,zr=$r%26;qr[$r]=Mr.words[Br]>>>zr&1}return qr}(Cr);if(wr.length===0)return new or(1);for(var Pr=this,Ar=0;Ar<wr.length&&wr[Ar]===0;Ar++,Pr=Pr.sqr());if(++Ar<wr.length)for(var Sr=Pr.sqr();Ar<wr.length;Ar++,Sr=Sr.sqr())wr[Ar]!==0&&(Pr=Pr.mul(Sr));return Pr},or.prototype.iushln=function(Cr){cr(typeof Cr=="number"&&Cr>=0);var wr,Pr=Cr%26,Ar=(Cr-Pr)/26,Sr=67108863>>>26-Pr<<26-Pr;if(Pr!==0){var Mr=0;for(wr=0;wr<this.length;wr++){var qr=this.words[wr]&Sr,$r=(0|this.words[wr])-qr<<Pr;this.words[wr]=$r|Mr,Mr=qr>>>26-Pr}Mr&&(this.words[wr]=Mr,this.length++)}if(Ar!==0){for(wr=this.length-1;wr>=0;wr--)this.words[wr+Ar]=this.words[wr];for(wr=0;wr<Ar;wr++)this.words[wr]=0;this.length+=Ar}return this._strip()},or.prototype.ishln=function(Cr){return cr(this.negative===0),this.iushln(Cr)},or.prototype.iushrn=function(Cr,wr,Pr){var Ar;cr(typeof Cr=="number"&&Cr>=0),Ar=wr?(wr-wr%26)/26:0;var Sr=Cr%26,Mr=Math.min((Cr-Sr)/26,this.length),qr=67108863^67108863>>>Sr<<Sr,$r=Pr;if(Ar-=Mr,Ar=Math.max(0,Ar),$r){for(var Br=0;Br<Mr;Br++)$r.words[Br]=this.words[Br];$r.length=Mr}if(Mr!==0)if(this.length>Mr)for(this.length-=Mr,Br=0;Br<this.length;Br++)this.words[Br]=this.words[Br+Mr];else this.words[0]=0,this.length=1;var zr=0;for(Br=this.length-1;Br>=0&&(zr!==0||Br>=Ar);Br--){var Gr=0|this.words[Br];this.words[Br]=zr<<26-Sr|Gr>>>Sr,zr=Gr&qr}return $r&&zr!==0&&($r.words[$r.length++]=zr),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},or.prototype.ishrn=function(Cr,wr,Pr){return cr(this.negative===0),this.iushrn(Cr,wr,Pr)},or.prototype.shln=function(Cr){return this.clone().ishln(Cr)},or.prototype.ushln=function(Cr){return this.clone().iushln(Cr)},or.prototype.shrn=function(Cr){return this.clone().ishrn(Cr)},or.prototype.ushrn=function(Cr){return this.clone().iushrn(Cr)},or.prototype.testn=function(Cr){cr(typeof Cr=="number"&&Cr>=0);var wr=Cr%26,Pr=(Cr-wr)/26,Ar=1<<wr;return!(this.length<=Pr)&&!!(this.words[Pr]&Ar)},or.prototype.imaskn=function(Cr){cr(typeof Cr=="number"&&Cr>=0);var wr=Cr%26,Pr=(Cr-wr)/26;if(cr(this.negative===0,"imaskn works only with positive numbers"),this.length<=Pr)return this;if(wr!==0&&Pr++,this.length=Math.min(Pr,this.length),wr!==0){var Ar=67108863^67108863>>>wr<<wr;this.words[this.length-1]&=Ar}return this._strip()},or.prototype.maskn=function(Cr){return this.clone().imaskn(Cr)},or.prototype.iaddn=function(Cr){return cr(typeof Cr=="number"),cr(Cr<67108864),Cr<0?this.isubn(-Cr):this.negative!==0?this.length===1&&(0|this.words[0])<=Cr?(this.words[0]=Cr-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(Cr),this.negative=1,this):this._iaddn(Cr)},or.prototype._iaddn=function(Cr){this.words[0]+=Cr;for(var wr=0;wr<this.length&&this.words[wr]>=67108864;wr++)this.words[wr]-=67108864,wr===this.length-1?this.words[wr+1]=1:this.words[wr+1]++;return this.length=Math.max(this.length,wr+1),this},or.prototype.isubn=function(Cr){if(cr(typeof Cr=="number"),cr(Cr<67108864),Cr<0)return this.iaddn(-Cr);if(this.negative!==0)return this.negative=0,this.iaddn(Cr),this.negative=1,this;if(this.words[0]-=Cr,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var wr=0;wr<this.length&&this.words[wr]<0;wr++)this.words[wr]+=67108864,this.words[wr+1]-=1;return this._strip()},or.prototype.addn=function(Cr){return this.clone().iaddn(Cr)},or.prototype.subn=function(Cr){return this.clone().isubn(Cr)},or.prototype.iabs=function(){return this.negative=0,this},or.prototype.abs=function(){return this.clone().iabs()},or.prototype._ishlnsubmul=function(Cr,wr,Pr){var Ar,Sr,Mr=Cr.length+Pr;this._expand(Mr);var qr=0;for(Ar=0;Ar<Cr.length;Ar++){Sr=(0|this.words[Ar+Pr])+qr;var $r=(0|Cr.words[Ar])*wr;qr=((Sr-=67108863&$r)>>26)-($r/67108864|0),this.words[Ar+Pr]=67108863&Sr}for(;Ar<this.length-Pr;Ar++)qr=(Sr=(0|this.words[Ar+Pr])+qr)>>26,this.words[Ar+Pr]=67108863&Sr;if(qr===0)return this._strip();for(cr(qr===-1),qr=0,Ar=0;Ar<this.length;Ar++)qr=(Sr=-(0|this.words[Ar])+qr)>>26,this.words[Ar]=67108863&Sr;return this.negative=1,this._strip()},or.prototype._wordDiv=function(Cr,wr){var Pr=(this.length,Cr.length),Ar=this.clone(),Sr=Cr,Mr=0|Sr.words[Sr.length-1];(Pr=26-this._countBits(Mr))!==0&&(Sr=Sr.ushln(Pr),Ar.iushln(Pr),Mr=0|Sr.words[Sr.length-1]);var qr,$r=Ar.length-Sr.length;if(wr!=="mod"){(qr=new or(null)).length=$r+1,qr.words=new Array(qr.length);for(var Br=0;Br<qr.length;Br++)qr.words[Br]=0}var zr=Ar.clone()._ishlnsubmul(Sr,1,$r);zr.negative===0&&(Ar=zr,qr&&(qr.words[$r]=1));for(var Gr=$r-1;Gr>=0;Gr--){var Vr=67108864*(0|Ar.words[Sr.length+Gr])+(0|Ar.words[Sr.length+Gr-1]);for(Vr=Math.min(Vr/Mr|0,67108863),Ar._ishlnsubmul(Sr,Vr,Gr);Ar.negative!==0;)Vr--,Ar.negative=0,Ar._ishlnsubmul(Sr,1,Gr),Ar.isZero()||(Ar.negative^=1);qr&&(qr.words[Gr]=Vr)}return qr&&qr._strip(),Ar._strip(),wr!=="div"&&Pr!==0&&Ar.iushrn(Pr),{div:qr||null,mod:Ar}},or.prototype.divmod=function(Cr,wr,Pr){return cr(!Cr.isZero()),this.isZero()?{div:new or(0),mod:new or(0)}:this.negative!==0&&Cr.negative===0?(Mr=this.neg().divmod(Cr,wr),wr!=="mod"&&(Ar=Mr.div.neg()),wr!=="div"&&(Sr=Mr.mod.neg(),Pr&&Sr.negative!==0&&Sr.iadd(Cr)),{div:Ar,mod:Sr}):this.negative===0&&Cr.negative!==0?(Mr=this.divmod(Cr.neg(),wr),wr!=="mod"&&(Ar=Mr.div.neg()),{div:Ar,mod:Mr.mod}):this.negative&Cr.negative?(Mr=this.neg().divmod(Cr.neg(),wr),wr!=="div"&&(Sr=Mr.mod.neg(),Pr&&Sr.negative!==0&&Sr.isub(Cr)),{div:Mr.div,mod:Sr}):Cr.length>this.length||this.cmp(Cr)<0?{div:new or(0),mod:this}:Cr.length===1?wr==="div"?{div:this.divn(Cr.words[0]),mod:null}:wr==="mod"?{div:null,mod:new or(this.modrn(Cr.words[0]))}:{div:this.divn(Cr.words[0]),mod:new or(this.modrn(Cr.words[0]))}:this._wordDiv(Cr,wr);var Ar,Sr,Mr},or.prototype.div=function(Cr){return this.divmod(Cr,"div",!1).div},or.prototype.mod=function(Cr){return this.divmod(Cr,"mod",!1).mod},or.prototype.umod=function(Cr){return this.divmod(Cr,"mod",!0).mod},or.prototype.divRound=function(Cr){var wr=this.divmod(Cr);if(wr.mod.isZero())return wr.div;var Pr=wr.div.negative!==0?wr.mod.isub(Cr):wr.mod,Ar=Cr.ushrn(1),Sr=Cr.andln(1),Mr=Pr.cmp(Ar);return Mr<0||Sr===1&&Mr===0?wr.div:wr.div.negative!==0?wr.div.isubn(1):wr.div.iaddn(1)},or.prototype.modrn=function(Cr){var wr=Cr<0;wr&&(Cr=-Cr),cr(Cr<=67108863);for(var Pr=(1<<26)%Cr,Ar=0,Sr=this.length-1;Sr>=0;Sr--)Ar=(Pr*Ar+(0|this.words[Sr]))%Cr;return wr?-Ar:Ar},or.prototype.modn=function(Cr){return this.modrn(Cr)},or.prototype.idivn=function(Cr){var wr=Cr<0;wr&&(Cr=-Cr),cr(Cr<=67108863);for(var Pr=0,Ar=this.length-1;Ar>=0;Ar--){var Sr=(0|this.words[Ar])+67108864*Pr;this.words[Ar]=Sr/Cr|0,Pr=Sr%Cr}return this._strip(),wr?this.ineg():this},or.prototype.divn=function(Cr){return this.clone().idivn(Cr)},or.prototype.egcd=function(Cr){cr(Cr.negative===0),cr(!Cr.isZero());var wr=this,Pr=Cr.clone();wr=wr.negative!==0?wr.umod(Cr):wr.clone();for(var Ar=new or(1),Sr=new or(0),Mr=new or(0),qr=new or(1),$r=0;wr.isEven()&&Pr.isEven();)wr.iushrn(1),Pr.iushrn(1),++$r;for(var Br=Pr.clone(),zr=wr.clone();!wr.isZero();){for(var Gr=0,Vr=1;!(wr.words[0]&Vr)&&Gr<26;++Gr,Vr<<=1);if(Gr>0)for(wr.iushrn(Gr);Gr-- >0;)(Ar.isOdd()||Sr.isOdd())&&(Ar.iadd(Br),Sr.isub(zr)),Ar.iushrn(1),Sr.iushrn(1);for(var Xr=0,Ur=1;!(Pr.words[0]&Ur)&&Xr<26;++Xr,Ur<<=1);if(Xr>0)for(Pr.iushrn(Xr);Xr-- >0;)(Mr.isOdd()||qr.isOdd())&&(Mr.iadd(Br),qr.isub(zr)),Mr.iushrn(1),qr.iushrn(1);wr.cmp(Pr)>=0?(wr.isub(Pr),Ar.isub(Mr),Sr.isub(qr)):(Pr.isub(wr),Mr.isub(Ar),qr.isub(Sr))}return{a:Mr,b:qr,gcd:Pr.iushln($r)}},or.prototype._invmp=function(Cr){cr(Cr.negative===0),cr(!Cr.isZero());var wr=this,Pr=Cr.clone();wr=wr.negative!==0?wr.umod(Cr):wr.clone();for(var Ar,Sr=new or(1),Mr=new or(0),qr=Pr.clone();wr.cmpn(1)>0&&Pr.cmpn(1)>0;){for(var $r=0,Br=1;!(wr.words[0]&Br)&&$r<26;++$r,Br<<=1);if($r>0)for(wr.iushrn($r);$r-- >0;)Sr.isOdd()&&Sr.iadd(qr),Sr.iushrn(1);for(var zr=0,Gr=1;!(Pr.words[0]&Gr)&&zr<26;++zr,Gr<<=1);if(zr>0)for(Pr.iushrn(zr);zr-- >0;)Mr.isOdd()&&Mr.iadd(qr),Mr.iushrn(1);wr.cmp(Pr)>=0?(wr.isub(Pr),Sr.isub(Mr)):(Pr.isub(wr),Mr.isub(Sr))}return(Ar=wr.cmpn(1)===0?Sr:Mr).cmpn(0)<0&&Ar.iadd(Cr),Ar},or.prototype.gcd=function(Cr){if(this.isZero())return Cr.abs();if(Cr.isZero())return this.abs();var wr=this.clone(),Pr=Cr.clone();wr.negative=0,Pr.negative=0;for(var Ar=0;wr.isEven()&&Pr.isEven();Ar++)wr.iushrn(1),Pr.iushrn(1);for(;;){for(;wr.isEven();)wr.iushrn(1);for(;Pr.isEven();)Pr.iushrn(1);var Sr=wr.cmp(Pr);if(Sr<0){var Mr=wr;wr=Pr,Pr=Mr}else if(Sr===0||Pr.cmpn(1)===0)break;wr.isub(Pr)}return Pr.iushln(Ar)},or.prototype.invm=function(Cr){return this.egcd(Cr).a.umod(Cr)},or.prototype.isEven=function(){return(1&this.words[0])==0},or.prototype.isOdd=function(){return(1&this.words[0])==1},or.prototype.andln=function(Cr){return this.words[0]&Cr},or.prototype.bincn=function(Cr){cr(typeof Cr=="number");var wr=Cr%26,Pr=(Cr-wr)/26,Ar=1<<wr;if(this.length<=Pr)return this._expand(Pr+1),this.words[Pr]|=Ar,this;for(var Sr=Ar,Mr=Pr;Sr!==0&&Mr<this.length;Mr++){var qr=0|this.words[Mr];Sr=(qr+=Sr)>>>26,qr&=67108863,this.words[Mr]=qr}return Sr!==0&&(this.words[Mr]=Sr,this.length++),this},or.prototype.isZero=function(){return this.length===1&&this.words[0]===0},or.prototype.cmpn=function(Cr){var wr,Pr=Cr<0;if(this.negative!==0&&!Pr)return-1;if(this.negative===0&&Pr)return 1;if(this._strip(),this.length>1)wr=1;else{Pr&&(Cr=-Cr),cr(Cr<=67108863,"Number is too big");var Ar=0|this.words[0];wr=Ar===Cr?0:Ar<Cr?-1:1}return this.negative!==0?0|-wr:wr},or.prototype.cmp=function(Cr){if(this.negative!==0&&Cr.negative===0)return-1;if(this.negative===0&&Cr.negative!==0)return 1;var wr=this.ucmp(Cr);return this.negative!==0?0|-wr:wr},or.prototype.ucmp=function(Cr){if(this.length>Cr.length)return 1;if(this.length<Cr.length)return-1;for(var wr=0,Pr=this.length-1;Pr>=0;Pr--){var Ar=0|this.words[Pr],Sr=0|Cr.words[Pr];if(Ar!==Sr){Ar<Sr?wr=-1:Ar>Sr&&(wr=1);break}}return wr},or.prototype.gtn=function(Cr){return this.cmpn(Cr)===1},or.prototype.gt=function(Cr){return this.cmp(Cr)===1},or.prototype.gten=function(Cr){return this.cmpn(Cr)>=0},or.prototype.gte=function(Cr){return this.cmp(Cr)>=0},or.prototype.ltn=function(Cr){return this.cmpn(Cr)===-1},or.prototype.lt=function(Cr){return this.cmp(Cr)===-1},or.prototype.lten=function(Cr){return this.cmpn(Cr)<=0},or.prototype.lte=function(Cr){return this.cmp(Cr)<=0},or.prototype.eqn=function(Cr){return this.cmpn(Cr)===0},or.prototype.eq=function(Cr){return this.cmp(Cr)===0},or.red=function(Cr){return new jr(Cr)},or.prototype.toRed=function(Cr){return cr(!this.red,"Already a number in reduction context"),cr(this.negative===0,"red works only with positives"),Cr.convertTo(this)._forceRed(Cr)},or.prototype.fromRed=function(){return cr(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},or.prototype._forceRed=function(Cr){return this.red=Cr,this},or.prototype.forceRed=function(Cr){return cr(!this.red,"Already a number in reduction context"),this._forceRed(Cr)},or.prototype.redAdd=function(Cr){return cr(this.red,"redAdd works only with red numbers"),this.red.add(this,Cr)},or.prototype.redIAdd=function(Cr){return cr(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Cr)},or.prototype.redSub=function(Cr){return cr(this.red,"redSub works only with red numbers"),this.red.sub(this,Cr)},or.prototype.redISub=function(Cr){return cr(this.red,"redISub works only with red numbers"),this.red.isub(this,Cr)},or.prototype.redShl=function(Cr){return cr(this.red,"redShl works only with red numbers"),this.red.shl(this,Cr)},or.prototype.redMul=function(Cr){return cr(this.red,"redMul works only with red numbers"),this.red._verify2(this,Cr),this.red.mul(this,Cr)},or.prototype.redIMul=function(Cr){return cr(this.red,"redMul works only with red numbers"),this.red._verify2(this,Cr),this.red.imul(this,Cr)},or.prototype.redSqr=function(){return cr(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},or.prototype.redISqr=function(){return cr(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},or.prototype.redSqrt=function(){return cr(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},or.prototype.redInvm=function(){return cr(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},or.prototype.redNeg=function(){return cr(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},or.prototype.redPow=function(Cr){return cr(this.red&&!Cr.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Cr)};var Tr={k256:null,p224:null,p192:null,p25519:null};function Rr(Cr,wr){this.name=Cr,this.p=new or(wr,16),this.n=this.p.bitLength(),this.k=new or(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function Nr(){Rr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Dr(){Rr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function Ir(){Rr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Or(){Rr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function jr(Cr){if(typeof Cr=="string"){var wr=or._prime(Cr);this.m=wr.p,this.prime=wr}else cr(Cr.gtn(1),"modulus must be greater than 1"),this.m=Cr,this.prime=null}function Lr(Cr){jr.call(this,Cr),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new or(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Rr.prototype._tmp=function(){var Cr=new or(null);return Cr.words=new Array(Math.ceil(this.n/13)),Cr},Rr.prototype.ireduce=function(Cr){var wr,Pr=Cr;do this.split(Pr,this.tmp),wr=(Pr=(Pr=this.imulK(Pr)).iadd(this.tmp)).bitLength();while(wr>this.n);var Ar=wr<this.n?-1:Pr.ucmp(this.p);return Ar===0?(Pr.words[0]=0,Pr.length=1):Ar>0?Pr.isub(this.p):Pr.strip!==void 0?Pr.strip():Pr._strip(),Pr},Rr.prototype.split=function(Cr,wr){Cr.iushrn(this.n,0,wr)},Rr.prototype.imulK=function(Cr){return Cr.imul(this.k)},lr(Nr,Rr),Nr.prototype.split=function(Cr,wr){for(var Pr=Math.min(Cr.length,9),Ar=0;Ar<Pr;Ar++)wr.words[Ar]=Cr.words[Ar];if(wr.length=Pr,Cr.length<=9)return Cr.words[0]=0,void(Cr.length=1);var Sr=Cr.words[9];for(wr.words[wr.length++]=4194303&Sr,Ar=10;Ar<Cr.length;Ar++){var Mr=0|Cr.words[Ar];Cr.words[Ar-10]=(4194303&Mr)<<4|Sr>>>22,Sr=Mr}Sr>>>=22,Cr.words[Ar-10]=Sr,Sr===0&&Cr.length>10?Cr.length-=10:Cr.length-=9},Nr.prototype.imulK=function(Cr){Cr.words[Cr.length]=0,Cr.words[Cr.length+1]=0,Cr.length+=2;for(var wr=0,Pr=0;Pr<Cr.length;Pr++){var Ar=0|Cr.words[Pr];wr+=977*Ar,Cr.words[Pr]=67108863&wr,wr=64*Ar+(wr/67108864|0)}return Cr.words[Cr.length-1]===0&&(Cr.length--,Cr.words[Cr.length-1]===0&&Cr.length--),Cr},lr(Dr,Rr),lr(Ir,Rr),lr(Or,Rr),Or.prototype.imulK=function(Cr){for(var wr=0,Pr=0;Pr<Cr.length;Pr++){var Ar=19*(0|Cr.words[Pr])+wr,Sr=67108863&Ar;Ar>>>=26,Cr.words[Pr]=Sr,wr=Ar}return wr!==0&&(Cr.words[Cr.length++]=wr),Cr},or._prime=function(Cr){if(Tr[Cr])return Tr[Cr];var wr;if(Cr==="k256")wr=new Nr;else if(Cr==="p224")wr=new Dr;else if(Cr==="p192")wr=new Ir;else{if(Cr!=="p25519")throw new Error("Unknown prime "+Cr);wr=new Or}return Tr[Cr]=wr,wr},jr.prototype._verify1=function(Cr){cr(Cr.negative===0,"red works only with positives"),cr(Cr.red,"red works only with red numbers")},jr.prototype._verify2=function(Cr,wr){cr((Cr.negative|wr.negative)==0,"red works only with positives"),cr(Cr.red&&Cr.red===wr.red,"red works only with red numbers")},jr.prototype.imod=function(Cr){return this.prime?this.prime.ireduce(Cr)._forceRed(this):(gr(Cr,Cr.umod(this.m)._forceRed(this)),Cr)},jr.prototype.neg=function(Cr){return Cr.isZero()?Cr.clone():this.m.sub(Cr)._forceRed(this)},jr.prototype.add=function(Cr,wr){this._verify2(Cr,wr);var Pr=Cr.add(wr);return Pr.cmp(this.m)>=0&&Pr.isub(this.m),Pr._forceRed(this)},jr.prototype.iadd=function(Cr,wr){this._verify2(Cr,wr);var Pr=Cr.iadd(wr);return Pr.cmp(this.m)>=0&&Pr.isub(this.m),Pr},jr.prototype.sub=function(Cr,wr){this._verify2(Cr,wr);var Pr=Cr.sub(wr);return Pr.cmpn(0)<0&&Pr.iadd(this.m),Pr._forceRed(this)},jr.prototype.isub=function(Cr,wr){this._verify2(Cr,wr);var Pr=Cr.isub(wr);return Pr.cmpn(0)<0&&Pr.iadd(this.m),Pr},jr.prototype.shl=function(Cr,wr){return this._verify1(Cr),this.imod(Cr.ushln(wr))},jr.prototype.imul=function(Cr,wr){return this._verify2(Cr,wr),this.imod(Cr.imul(wr))},jr.prototype.mul=function(Cr,wr){return this._verify2(Cr,wr),this.imod(Cr.mul(wr))},jr.prototype.isqr=function(Cr){return this.imul(Cr,Cr.clone())},jr.prototype.sqr=function(Cr){return this.mul(Cr,Cr)},jr.prototype.sqrt=function(Cr){if(Cr.isZero())return Cr.clone();var wr=this.m.andln(3);if(cr(wr%2==1),wr===3){var Pr=this.m.add(new or(1)).iushrn(2);return this.pow(Cr,Pr)}for(var Ar=this.m.subn(1),Sr=0;!Ar.isZero()&&Ar.andln(1)===0;)Sr++,Ar.iushrn(1);cr(!Ar.isZero());var Mr=new or(1).toRed(this),qr=Mr.redNeg(),$r=this.m.subn(1).iushrn(1),Br=this.m.bitLength();for(Br=new or(2*Br*Br).toRed(this);this.pow(Br,$r).cmp(qr)!==0;)Br.redIAdd(qr);for(var zr=this.pow(Br,Ar),Gr=this.pow(Cr,Ar.addn(1).iushrn(1)),Vr=this.pow(Cr,Ar),Xr=Sr;Vr.cmp(Mr)!==0;){for(var Ur=Vr,Fr=0;Ur.cmp(Mr)!==0;Fr++)Ur=Ur.redSqr();cr(Fr<Xr);var Kr=this.pow(zr,new or(1).iushln(Xr-Fr-1));Gr=Gr.redMul(Kr),zr=Kr.redSqr(),Vr=Vr.redMul(zr),Xr=Fr}return Gr},jr.prototype.invm=function(Cr){var wr=Cr._invmp(this.m);return wr.negative!==0?(wr.negative=0,this.imod(wr).redNeg()):this.imod(wr)},jr.prototype.pow=function(Cr,wr){if(wr.isZero())return new or(1).toRed(this);if(wr.cmpn(1)===0)return Cr.clone();var Pr=new Array(16);Pr[0]=new or(1).toRed(this),Pr[1]=Cr;for(var Ar=2;Ar<Pr.length;Ar++)Pr[Ar]=this.mul(Pr[Ar-1],Cr);var Sr=Pr[0],Mr=0,qr=0,$r=wr.bitLength()%26;for($r===0&&($r=26),Ar=wr.length-1;Ar>=0;Ar--){for(var Br=wr.words[Ar],zr=$r-1;zr>=0;zr--){var Gr=Br>>zr&1;Sr!==Pr[0]&&(Sr=this.sqr(Sr)),Gr!==0||Mr!==0?(Mr<<=1,Mr|=Gr,(++qr===4||Ar===0&&zr===0)&&(Sr=this.mul(Sr,Pr[Mr]),qr=0,Mr=0)):qr=0}$r=26}return Sr},jr.prototype.convertTo=function(Cr){var wr=Cr.umod(this.m);return wr===Cr?wr.clone():wr},jr.prototype.convertFrom=function(Cr){var wr=Cr.clone();return wr.red=null,wr},or.mont=function(Cr){return new Lr(Cr)},lr(Lr,jr),Lr.prototype.convertTo=function(Cr){return this.imod(Cr.ushln(this.shift))},Lr.prototype.convertFrom=function(Cr){var wr=this.imod(Cr.mul(this.rinv));return wr.red=null,wr},Lr.prototype.imul=function(Cr,wr){if(Cr.isZero()||wr.isZero())return Cr.words[0]=0,Cr.length=1,Cr;var Pr=Cr.imul(wr),Ar=Pr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Sr=Pr.isub(Ar).iushrn(this.shift),Mr=Sr;return Sr.cmp(this.m)>=0?Mr=Sr.isub(this.m):Sr.cmpn(0)<0&&(Mr=Sr.iadd(this.m)),Mr._forceRed(this)},Lr.prototype.mul=function(Cr,wr){if(Cr.isZero()||wr.isZero())return new or(0)._forceRed(this);var Pr=Cr.mul(wr),Ar=Pr.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Sr=Pr.isub(Ar).iushrn(this.shift),Mr=Sr;return Sr.cmp(this.m)>=0?Mr=Sr.isub(this.m):Sr.cmpn(0)<0&&(Mr=Sr.iadd(this.m)),Mr._forceRed(this)},Lr.prototype.invm=function(Cr){return this.imod(Cr._invmp(this.m).mul(this.r2))._forceRed(this)}})(nr===void 0||nr)},{buffer:188}],187:[function(rr,nr,ir){var sr;function ar(lr){this.rand=lr}if(nr.exports=function(lr){return sr||(sr=new ar(null)),sr.generate(lr)},nr.exports.Rand=ar,ar.prototype.generate=function(lr){return this._rand(lr)},ar.prototype._rand=function(lr){if(this.rand.getBytes)return this.rand.getBytes(lr);for(var or=new Uint8Array(lr),ur=0;ur<or.length;ur++)or[ur]=this.rand.getByte();return or},typeof self=="object")self.crypto&&self.crypto.getRandomValues?ar.prototype._rand=function(lr){var or=new Uint8Array(lr);return self.crypto.getRandomValues(or),or}:self.msCrypto&&self.msCrypto.getRandomValues?ar.prototype._rand=function(lr){var or=new Uint8Array(lr);return self.msCrypto.getRandomValues(or),or}:typeof window=="object"&&(ar.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var cr=rr("crypto");if(typeof cr.randomBytes!="function")throw new Error("Not supported");ar.prototype._rand=function(lr){return cr.randomBytes(lr)}}catch{}},{crypto:188}],188:[function(rr,nr,ir){},{}],189:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer;function ar(dr){sr.isBuffer(dr)||(dr=sr.from(dr));for(var fr=dr.length/4|0,gr=new Array(fr),br=0;br<fr;br++)gr[br]=dr.readUInt32BE(4*br);return gr}function cr(dr){for(;0<dr.length;dr++)dr[0]=0}function lr(dr,fr,gr,br,pr){for(var mr,yr,xr,vr,_r=gr[0],Er=gr[1],Tr=gr[2],Rr=gr[3],Nr=dr[0]^fr[0],Dr=dr[1]^fr[1],Ir=dr[2]^fr[2],Or=dr[3]^fr[3],jr=4,Lr=1;Lr<pr;Lr++)mr=_r[Nr>>>24]^Er[Dr>>>16&255]^Tr[Ir>>>8&255]^Rr[255&Or]^fr[jr++],yr=_r[Dr>>>24]^Er[Ir>>>16&255]^Tr[Or>>>8&255]^Rr[255&Nr]^fr[jr++],xr=_r[Ir>>>24]^Er[Or>>>16&255]^Tr[Nr>>>8&255]^Rr[255&Dr]^fr[jr++],vr=_r[Or>>>24]^Er[Nr>>>16&255]^Tr[Dr>>>8&255]^Rr[255&Ir]^fr[jr++],Nr=mr,Dr=yr,Ir=xr,Or=vr;return mr=(br[Nr>>>24]<<24|br[Dr>>>16&255]<<16|br[Ir>>>8&255]<<8|br[255&Or])^fr[jr++],yr=(br[Dr>>>24]<<24|br[Ir>>>16&255]<<16|br[Or>>>8&255]<<8|br[255&Nr])^fr[jr++],xr=(br[Ir>>>24]<<24|br[Or>>>16&255]<<16|br[Nr>>>8&255]<<8|br[255&Dr])^fr[jr++],vr=(br[Or>>>24]<<24|br[Nr>>>16&255]<<16|br[Dr>>>8&255]<<8|br[255&Ir])^fr[jr++],[mr>>>=0,yr>>>=0,xr>>>=0,vr>>>=0]}var or=[0,1,2,4,8,16,32,64,128,27,54],ur=function(){for(var dr=new Array(256),fr=0;fr<256;fr++)dr[fr]=fr<128?fr<<1:fr<<1^283;for(var gr=[],br=[],pr=[[],[],[],[]],mr=[[],[],[],[]],yr=0,xr=0,vr=0;vr<256;++vr){var _r=xr^xr<<1^xr<<2^xr<<3^xr<<4;_r=_r>>>8^255&_r^99,gr[yr]=_r,br[_r]=yr;var Er=dr[yr],Tr=dr[Er],Rr=dr[Tr],Nr=257*dr[_r]^16843008*_r;pr[0][yr]=Nr<<24|Nr>>>8,pr[1][yr]=Nr<<16|Nr>>>16,pr[2][yr]=Nr<<8|Nr>>>24,pr[3][yr]=Nr,Nr=16843009*Rr^65537*Tr^257*Er^16843008*yr,mr[0][_r]=Nr<<24|Nr>>>8,mr[1][_r]=Nr<<16|Nr>>>16,mr[2][_r]=Nr<<8|Nr>>>24,mr[3][_r]=Nr,yr===0?yr=xr=1:(yr=Er^dr[dr[dr[Rr^Er]]],xr^=dr[dr[xr]])}return{SBOX:gr,INV_SBOX:br,SUB_MIX:pr,INV_SUB_MIX:mr}}();function hr(dr){this._key=ar(dr),this._reset()}hr.blockSize=16,hr.keySize=32,hr.prototype.blockSize=hr.blockSize,hr.prototype.keySize=hr.keySize,hr.prototype._reset=function(){for(var dr=this._key,fr=dr.length,gr=fr+6,br=4*(gr+1),pr=[],mr=0;mr<fr;mr++)pr[mr]=dr[mr];for(mr=fr;mr<br;mr++){var yr=pr[mr-1];mr%fr==0?(yr=yr<<8|yr>>>24,yr=ur.SBOX[yr>>>24]<<24|ur.SBOX[yr>>>16&255]<<16|ur.SBOX[yr>>>8&255]<<8|ur.SBOX[255&yr],yr^=or[mr/fr|0]<<24):fr>6&&mr%fr==4&&(yr=ur.SBOX[yr>>>24]<<24|ur.SBOX[yr>>>16&255]<<16|ur.SBOX[yr>>>8&255]<<8|ur.SBOX[255&yr]),pr[mr]=pr[mr-fr]^yr}for(var xr=[],vr=0;vr<br;vr++){var _r=br-vr,Er=pr[_r-(vr%4?0:4)];xr[vr]=vr<4||_r<=4?Er:ur.INV_SUB_MIX[0][ur.SBOX[Er>>>24]]^ur.INV_SUB_MIX[1][ur.SBOX[Er>>>16&255]]^ur.INV_SUB_MIX[2][ur.SBOX[Er>>>8&255]]^ur.INV_SUB_MIX[3][ur.SBOX[255&Er]]}this._nRounds=gr,this._keySchedule=pr,this._invKeySchedule=xr},hr.prototype.encryptBlockRaw=function(dr){return lr(dr=ar(dr),this._keySchedule,ur.SUB_MIX,ur.SBOX,this._nRounds)},hr.prototype.encryptBlock=function(dr){var fr=this.encryptBlockRaw(dr),gr=sr.allocUnsafe(16);return gr.writeUInt32BE(fr[0],0),gr.writeUInt32BE(fr[1],4),gr.writeUInt32BE(fr[2],8),gr.writeUInt32BE(fr[3],12),gr},hr.prototype.decryptBlock=function(dr){var fr=(dr=ar(dr))[1];dr[1]=dr[3],dr[3]=fr;var gr=lr(dr,this._invKeySchedule,ur.INV_SUB_MIX,ur.INV_SBOX,this._nRounds),br=sr.allocUnsafe(16);return br.writeUInt32BE(gr[0],0),br.writeUInt32BE(gr[3],4),br.writeUInt32BE(gr[2],8),br.writeUInt32BE(gr[1],12),br},hr.prototype.scrub=function(){cr(this._keySchedule),cr(this._invKeySchedule),cr(this._key)},nr.exports.AES=hr},{"safe-buffer":494}],190:[function(rr,nr,ir){var sr=rr("./aes"),ar=rr("safe-buffer").Buffer,cr=rr("cipher-base"),lr=rr("inherits"),or=rr("./ghash"),ur=rr("buffer-xor"),hr=rr("./incr32");function dr(fr,gr,br,pr){cr.call(this);var mr=ar.alloc(4,0);this._cipher=new sr.AES(gr);var yr=this._cipher.encryptBlock(mr);this._ghash=new or(yr),br=function(xr,vr,_r){if(vr.length===12)return xr._finID=ar.concat([vr,ar.from([0,0,0,1])]),ar.concat([vr,ar.from([0,0,0,2])]);var Er=new or(_r),Tr=vr.length,Rr=Tr%16;Er.update(vr),Rr&&(Rr=16-Rr,Er.update(ar.alloc(Rr,0))),Er.update(ar.alloc(8,0));var Nr=8*Tr,Dr=ar.alloc(8);Dr.writeUIntBE(Nr,0,8),Er.update(Dr),xr._finID=Er.state;var Ir=ar.from(xr._finID);return hr(Ir),Ir}(this,br,yr),this._prev=ar.from(br),this._cache=ar.allocUnsafe(0),this._secCache=ar.allocUnsafe(0),this._decrypt=pr,this._alen=0,this._len=0,this._mode=fr,this._authTag=null,this._called=!1}lr(dr,cr),dr.prototype._update=function(fr){if(!this._called&&this._alen){var gr=16-this._alen%16;gr<16&&(gr=ar.alloc(gr,0),this._ghash.update(gr))}this._called=!0;var br=this._mode.encrypt(this,fr);return this._decrypt?this._ghash.update(fr):this._ghash.update(br),this._len+=fr.length,br},dr.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var fr=ur(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(gr,br){var pr=0;gr.length!==br.length&&pr++;for(var mr=Math.min(gr.length,br.length),yr=0;yr<mr;++yr)pr+=gr[yr]^br[yr];return pr}(fr,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=fr,this._cipher.scrub()},dr.prototype.getAuthTag=function(){if(this._decrypt||!ar.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},dr.prototype.setAuthTag=function(fr){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=fr},dr.prototype.setAAD=function(fr){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(fr),this._alen+=fr.length},nr.exports=dr},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(rr,nr,ir){var sr=rr("./encrypter"),ar=rr("./decrypter"),cr=rr("./modes/list.json");ir.createCipher=ir.Cipher=sr.createCipher,ir.createCipheriv=ir.Cipheriv=sr.createCipheriv,ir.createDecipher=ir.Decipher=ar.createDecipher,ir.createDecipheriv=ir.Decipheriv=ar.createDecipheriv,ir.listCiphers=ir.getCiphers=function(){return Object.keys(cr)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(rr,nr,ir){var sr=rr("./authCipher"),ar=rr("safe-buffer").Buffer,cr=rr("./modes"),lr=rr("./streamCipher"),or=rr("cipher-base"),ur=rr("./aes"),hr=rr("evp_bytestokey");function dr(br,pr,mr){or.call(this),this._cache=new fr,this._last=void 0,this._cipher=new ur.AES(pr),this._prev=ar.from(mr),this._mode=br,this._autopadding=!0}function fr(){this.cache=ar.allocUnsafe(0)}function gr(br,pr,mr){var yr=cr[br.toLowerCase()];if(!yr)throw new TypeError("invalid suite type");if(typeof mr=="string"&&(mr=ar.from(mr)),yr.mode!=="GCM"&&mr.length!==yr.iv)throw new TypeError("invalid iv length "+mr.length);if(typeof pr=="string"&&(pr=ar.from(pr)),pr.length!==yr.key/8)throw new TypeError("invalid key length "+pr.length);return yr.type==="stream"?new lr(yr.module,pr,mr,!0):yr.type==="auth"?new sr(yr.module,pr,mr,!0):new dr(yr.module,pr,mr)}rr("inherits")(dr,or),dr.prototype._update=function(br){var pr,mr;this._cache.add(br);for(var yr=[];pr=this._cache.get(this._autopadding);)mr=this._mode.decrypt(this,pr),yr.push(mr);return ar.concat(yr)},dr.prototype._final=function(){var br=this._cache.flush();if(this._autopadding)return function(pr){var mr=pr[15];if(mr<1||mr>16)throw new Error("unable to decrypt data");for(var yr=-1;++yr<mr;)if(pr[yr+(16-mr)]!==mr)throw new Error("unable to decrypt data");if(mr!==16)return pr.slice(0,16-mr)}(this._mode.decrypt(this,br));if(br)throw new Error("data not multiple of block length")},dr.prototype.setAutoPadding=function(br){return this._autopadding=!!br,this},fr.prototype.add=function(br){this.cache=ar.concat([this.cache,br])},fr.prototype.get=function(br){var pr;if(br){if(this.cache.length>16)return pr=this.cache.slice(0,16),this.cache=this.cache.slice(16),pr}else if(this.cache.length>=16)return pr=this.cache.slice(0,16),this.cache=this.cache.slice(16),pr;return null},fr.prototype.flush=function(){if(this.cache.length)return this.cache},ir.createDecipher=function(br,pr){var mr=cr[br.toLowerCase()];if(!mr)throw new TypeError("invalid suite type");var yr=hr(pr,!1,mr.key,mr.iv);return gr(br,yr.key,yr.iv)},ir.createDecipheriv=gr},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(rr,nr,ir){var sr=rr("./modes"),ar=rr("./authCipher"),cr=rr("safe-buffer").Buffer,lr=rr("./streamCipher"),or=rr("cipher-base"),ur=rr("./aes"),hr=rr("evp_bytestokey");function dr(pr,mr,yr){or.call(this),this._cache=new gr,this._cipher=new ur.AES(mr),this._prev=cr.from(yr),this._mode=pr,this._autopadding=!0}rr("inherits")(dr,or),dr.prototype._update=function(pr){var mr,yr;this._cache.add(pr);for(var xr=[];mr=this._cache.get();)yr=this._mode.encrypt(this,mr),xr.push(yr);return cr.concat(xr)};var fr=cr.alloc(16,16);function gr(){this.cache=cr.allocUnsafe(0)}function br(pr,mr,yr){var xr=sr[pr.toLowerCase()];if(!xr)throw new TypeError("invalid suite type");if(typeof mr=="string"&&(mr=cr.from(mr)),mr.length!==xr.key/8)throw new TypeError("invalid key length "+mr.length);if(typeof yr=="string"&&(yr=cr.from(yr)),xr.mode!=="GCM"&&yr.length!==xr.iv)throw new TypeError("invalid iv length "+yr.length);return xr.type==="stream"?new lr(xr.module,mr,yr):xr.type==="auth"?new ar(xr.module,mr,yr):new dr(xr.module,mr,yr)}dr.prototype._final=function(){var pr=this._cache.flush();if(this._autopadding)return pr=this._mode.encrypt(this,pr),this._cipher.scrub(),pr;if(!pr.equals(fr))throw this._cipher.scrub(),new Error("data not multiple of block length")},dr.prototype.setAutoPadding=function(pr){return this._autopadding=!!pr,this},gr.prototype.add=function(pr){this.cache=cr.concat([this.cache,pr])},gr.prototype.get=function(){if(this.cache.length>15){var pr=this.cache.slice(0,16);return this.cache=this.cache.slice(16),pr}return null},gr.prototype.flush=function(){for(var pr=16-this.cache.length,mr=cr.allocUnsafe(pr),yr=-1;++yr<pr;)mr.writeUInt8(pr,yr);return cr.concat([this.cache,mr])},ir.createCipheriv=br,ir.createCipher=function(pr,mr){var yr=sr[pr.toLowerCase()];if(!yr)throw new TypeError("invalid suite type");var xr=hr(mr,!1,yr.key,yr.iv);return br(pr,xr.key,xr.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=sr.alloc(16,0);function cr(or){var ur=sr.allocUnsafe(16);return ur.writeUInt32BE(or[0]>>>0,0),ur.writeUInt32BE(or[1]>>>0,4),ur.writeUInt32BE(or[2]>>>0,8),ur.writeUInt32BE(or[3]>>>0,12),ur}function lr(or){this.h=or,this.state=sr.alloc(16,0),this.cache=sr.allocUnsafe(0)}lr.prototype.ghash=function(or){for(var ur=-1;++ur<or.length;)this.state[ur]^=or[ur];this._multiply()},lr.prototype._multiply=function(){for(var or,ur,hr,dr=[(or=this.h).readUInt32BE(0),or.readUInt32BE(4),or.readUInt32BE(8),or.readUInt32BE(12)],fr=[0,0,0,0],gr=-1;++gr<128;){for(this.state[~~(gr/8)]&1<<7-gr%8&&(fr[0]^=dr[0],fr[1]^=dr[1],fr[2]^=dr[2],fr[3]^=dr[3]),hr=(1&dr[3])!=0,ur=3;ur>0;ur--)dr[ur]=dr[ur]>>>1|(1&dr[ur-1])<<31;dr[0]=dr[0]>>>1,hr&&(dr[0]=dr[0]^225<<24)}this.state=cr(fr)},lr.prototype.update=function(or){var ur;for(this.cache=sr.concat([this.cache,or]);this.cache.length>=16;)ur=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(ur)},lr.prototype.final=function(or,ur){return this.cache.length&&this.ghash(sr.concat([this.cache,ar],16)),this.ghash(cr([0,or,0,ur])),this.state},nr.exports=lr},{"safe-buffer":494}],195:[function(rr,nr,ir){nr.exports=function(sr){for(var ar,cr=sr.length;cr--;){if((ar=sr.readUInt8(cr))!==255){ar++,sr.writeUInt8(ar,cr);break}sr.writeUInt8(0,cr)}}},{}],196:[function(rr,nr,ir){var sr=rr("buffer-xor");ir.encrypt=function(ar,cr){var lr=sr(cr,ar._prev);return ar._prev=ar._cipher.encryptBlock(lr),ar._prev},ir.decrypt=function(ar,cr){var lr=ar._prev;ar._prev=cr;var or=ar._cipher.decryptBlock(cr);return sr(or,lr)}},{"buffer-xor":219}],197:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("buffer-xor");function cr(lr,or,ur){var hr=or.length,dr=ar(or,lr._cache);return lr._cache=lr._cache.slice(hr),lr._prev=sr.concat([lr._prev,ur?or:dr]),dr}ir.encrypt=function(lr,or,ur){for(var hr,dr=sr.allocUnsafe(0);or.length;){if(lr._cache.length===0&&(lr._cache=lr._cipher.encryptBlock(lr._prev),lr._prev=sr.allocUnsafe(0)),!(lr._cache.length<=or.length)){dr=sr.concat([dr,cr(lr,or,ur)]);break}hr=lr._cache.length,dr=sr.concat([dr,cr(lr,or.slice(0,hr),ur)]),or=or.slice(hr)}return dr}},{"buffer-xor":219,"safe-buffer":494}],198:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer;function ar(lr,or,ur){for(var hr,dr,fr=-1,gr=0;++fr<8;)hr=or&1<<7-fr?128:0,gr+=(128&(dr=lr._cipher.encryptBlock(lr._prev)[0]^hr))>>fr%8,lr._prev=cr(lr._prev,ur?hr:dr);return gr}function cr(lr,or){var ur=lr.length,hr=-1,dr=sr.allocUnsafe(lr.length);for(lr=sr.concat([lr,sr.from([or])]);++hr<ur;)dr[hr]=lr[hr]<<1|lr[hr+1]>>7;return dr}ir.encrypt=function(lr,or,ur){for(var hr=or.length,dr=sr.allocUnsafe(hr),fr=-1;++fr<hr;)dr[fr]=ar(lr,or[fr],ur);return dr}},{"safe-buffer":494}],199:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer;function ar(cr,lr,or){var ur=cr._cipher.encryptBlock(cr._prev)[0]^lr;return cr._prev=sr.concat([cr._prev.slice(1),sr.from([or?lr:ur])]),ur}ir.encrypt=function(cr,lr,or){for(var ur=lr.length,hr=sr.allocUnsafe(ur),dr=-1;++dr<ur;)hr[dr]=ar(cr,lr[dr],or);return hr}},{"safe-buffer":494}],200:[function(rr,nr,ir){var sr=rr("buffer-xor"),ar=rr("safe-buffer").Buffer,cr=rr("../incr32");function lr(or){var ur=or._cipher.encryptBlockRaw(or._prev);return cr(or._prev),ur}ir.encrypt=function(or,ur){var hr=Math.ceil(ur.length/16),dr=or._cache.length;or._cache=ar.concat([or._cache,ar.allocUnsafe(16*hr)]);for(var fr=0;fr<hr;fr++){var gr=lr(or),br=dr+16*fr;or._cache.writeUInt32BE(gr[0],br+0),or._cache.writeUInt32BE(gr[1],br+4),or._cache.writeUInt32BE(gr[2],br+8),or._cache.writeUInt32BE(gr[3],br+12)}var pr=or._cache.slice(0,ur.length);return or._cache=or._cache.slice(ur.length),sr(ur,pr)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(rr,nr,ir){ir.encrypt=function(sr,ar){return sr._cipher.encryptBlock(ar)},ir.decrypt=function(sr,ar){return sr._cipher.decryptBlock(ar)}},{}],202:[function(rr,nr,ir){var sr={ECB:rr("./ecb"),CBC:rr("./cbc"),CFB:rr("./cfb"),CFB8:rr("./cfb8"),CFB1:rr("./cfb1"),OFB:rr("./ofb"),CTR:rr("./ctr"),GCM:rr("./ctr")},ar=rr("./list.json");for(var cr in ar)ar[cr].module=sr[ar[cr].mode];nr.exports=ar},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(rr,nr,ir){nr.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("buffer-xor");function cr(lr){return lr._prev=lr._cipher.encryptBlock(lr._prev),lr._prev}ir.encrypt=function(lr,or){for(;lr._cache.length<or.length;)lr._cache=sr.concat([lr._cache,cr(lr)]);var ur=lr._cache.slice(0,or.length);return lr._cache=lr._cache.slice(or.length),ar(or,ur)}}).call(this)}).call(this,rr("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(rr,nr,ir){var sr=rr("./aes"),ar=rr("safe-buffer").Buffer,cr=rr("cipher-base");function lr(or,ur,hr,dr){cr.call(this),this._cipher=new sr.AES(ur),this._prev=ar.from(hr),this._cache=ar.allocUnsafe(0),this._secCache=ar.allocUnsafe(0),this._decrypt=dr,this._mode=or}rr("inherits")(lr,cr),lr.prototype._update=function(or){return this._mode.encrypt(this,or,this._decrypt)},lr.prototype._final=function(){this._cipher.scrub()},nr.exports=lr},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(rr,nr,ir){var sr=rr("browserify-des"),ar=rr("browserify-aes/browser"),cr=rr("browserify-aes/modes"),lr=rr("browserify-des/modes"),or=rr("evp_bytestokey");function ur(dr,fr,gr){if(dr=dr.toLowerCase(),cr[dr])return ar.createCipheriv(dr,fr,gr);if(lr[dr])return new sr({key:fr,iv:gr,mode:dr});throw new TypeError("invalid suite type")}function hr(dr,fr,gr){if(dr=dr.toLowerCase(),cr[dr])return ar.createDecipheriv(dr,fr,gr);if(lr[dr])return new sr({key:fr,iv:gr,mode:dr,decrypt:!0});throw new TypeError("invalid suite type")}ir.createCipher=ir.Cipher=function(dr,fr){var gr,br;if(dr=dr.toLowerCase(),cr[dr])gr=cr[dr].key,br=cr[dr].iv;else{if(!lr[dr])throw new TypeError("invalid suite type");gr=8*lr[dr].key,br=lr[dr].iv}var pr=or(fr,!1,gr,br);return ur(dr,pr.key,pr.iv)},ir.createCipheriv=ir.Cipheriv=ur,ir.createDecipher=ir.Decipher=function(dr,fr){var gr,br;if(dr=dr.toLowerCase(),cr[dr])gr=cr[dr].key,br=cr[dr].iv;else{if(!lr[dr])throw new TypeError("invalid suite type");gr=8*lr[dr].key,br=lr[dr].iv}var pr=or(fr,!1,gr,br);return hr(dr,pr.key,pr.iv)},ir.createDecipheriv=ir.Decipheriv=hr,ir.listCiphers=ir.getCiphers=function(){return Object.keys(lr).concat(ar.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(rr,nr,ir){var sr=rr("cipher-base"),ar=rr("des.js"),cr=rr("inherits"),lr=rr("safe-buffer").Buffer,or={"des-ede3-cbc":ar.CBC.instantiate(ar.EDE),"des-ede3":ar.EDE,"des-ede-cbc":ar.CBC.instantiate(ar.EDE),"des-ede":ar.EDE,"des-cbc":ar.CBC.instantiate(ar.DES),"des-ecb":ar.DES};function ur(hr){sr.call(this);var dr,fr=hr.mode.toLowerCase(),gr=or[fr];dr=hr.decrypt?"decrypt":"encrypt";var br=hr.key;lr.isBuffer(br)||(br=lr.from(br)),fr!=="des-ede"&&fr!=="des-ede-cbc"||(br=lr.concat([br,br.slice(0,8)]));var pr=hr.iv;lr.isBuffer(pr)||(pr=lr.from(pr)),this._des=gr.create({key:br,iv:pr,type:dr})}or.des=or["des-cbc"],or.des3=or["des-ede3-cbc"],nr.exports=ur,cr(ur,sr),ur.prototype._update=function(hr){return lr.from(this._des.update(hr))},ur.prototype._final=function(){return lr.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(rr,nr,ir){ir["des-ecb"]={key:8,iv:0},ir["des-cbc"]=ir.des={key:8,iv:8},ir["des-ede3-cbc"]=ir.des3={key:24,iv:8},ir["des-ede3"]={key:24,iv:0},ir["des-ede-cbc"]={key:16,iv:8},ir["des-ede"]={key:16,iv:0}},{}],209:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("bn.js"),cr=rr("randombytes");function lr(ur){var hr,dr=ur.modulus.byteLength();do hr=new ar(cr(dr));while(hr.cmp(ur.modulus)>=0||!hr.umod(ur.prime1)||!hr.umod(ur.prime2));return hr}function or(ur,hr){var dr=function(Tr){var Rr=lr(Tr);return{blinder:Rr.toRed(ar.mont(Tr.modulus)).redPow(new ar(Tr.publicExponent)).fromRed(),unblinder:Rr.invm(Tr.modulus)}}(hr),fr=hr.modulus.byteLength(),gr=new ar(ur).mul(dr.blinder).umod(hr.modulus),br=gr.toRed(ar.mont(hr.prime1)),pr=gr.toRed(ar.mont(hr.prime2)),mr=hr.coefficient,yr=hr.prime1,xr=hr.prime2,vr=br.redPow(hr.exponent1).fromRed(),_r=pr.redPow(hr.exponent2).fromRed(),Er=vr.isub(_r).imul(mr).umod(yr).imul(xr);return _r.iadd(Er).imul(dr.unblinder).umod(hr.modulus).toArrayLike(sr,"be",fr)}or.getr=lr,nr.exports=or}).call(this)}).call(this,rr("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(rr,nr,ir){nr.exports=rr("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(rr,nr,ir){nr.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(rr,nr,ir){nr.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("create-hash"),cr=rr("readable-stream"),lr=rr("inherits"),or=rr("./sign"),ur=rr("./verify"),hr=rr("./algorithms.json");function dr(pr){cr.Writable.call(this);var mr=hr[pr];if(!mr)throw new Error("Unknown message digest");this._hashType=mr.hash,this._hash=ar(mr.hash),this._tag=mr.id,this._signType=mr.sign}function fr(pr){cr.Writable.call(this);var mr=hr[pr];if(!mr)throw new Error("Unknown message digest");this._hash=ar(mr.hash),this._tag=mr.id,this._signType=mr.sign}function gr(pr){return new dr(pr)}function br(pr){return new fr(pr)}Object.keys(hr).forEach(function(pr){hr[pr].id=sr.from(hr[pr].id,"hex"),hr[pr.toLowerCase()]=hr[pr]}),lr(dr,cr.Writable),dr.prototype._write=function(pr,mr,yr){this._hash.update(pr),yr()},dr.prototype.update=function(pr,mr){return typeof pr=="string"&&(pr=sr.from(pr,mr)),this._hash.update(pr),this},dr.prototype.sign=function(pr,mr){this.end();var yr=this._hash.digest(),xr=or(yr,pr,this._hashType,this._signType,this._tag);return mr?xr.toString(mr):xr},lr(fr,cr.Writable),fr.prototype._write=function(pr,mr,yr){this._hash.update(pr),yr()},fr.prototype.update=function(pr,mr){return typeof pr=="string"&&(pr=sr.from(pr,mr)),this._hash.update(pr),this},fr.prototype.verify=function(pr,mr,yr){typeof mr=="string"&&(mr=sr.from(mr,yr)),this.end();var xr=this._hash.digest();return ur(mr,xr,pr,this._signType,this._tag)},nr.exports={Sign:gr,Verify:br,createSign:gr,createVerify:br}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("create-hmac"),cr=rr("browserify-rsa"),lr=rr("elliptic").ec,or=rr("bn.js"),ur=rr("parse-asn1"),hr=rr("./curves.json");function dr(pr,mr,yr,xr){if((pr=sr.from(pr.toArray())).length<mr.byteLength()){var vr=sr.alloc(mr.byteLength()-pr.length);pr=sr.concat([vr,pr])}var _r=yr.length,Er=function(Nr,Dr){Nr=(Nr=fr(Nr,Dr)).mod(Dr);var Ir=sr.from(Nr.toArray());if(Ir.length<Dr.byteLength()){var Or=sr.alloc(Dr.byteLength()-Ir.length);Ir=sr.concat([Or,Ir])}return Ir}(yr,mr),Tr=sr.alloc(_r);Tr.fill(1);var Rr=sr.alloc(_r);return Rr=ar(xr,Rr).update(Tr).update(sr.from([0])).update(pr).update(Er).digest(),Tr=ar(xr,Rr).update(Tr).digest(),{k:Rr=ar(xr,Rr).update(Tr).update(sr.from([1])).update(pr).update(Er).digest(),v:Tr=ar(xr,Rr).update(Tr).digest()}}function fr(pr,mr){var yr=new or(pr),xr=(pr.length<<3)-mr.bitLength();return xr>0&&yr.ishrn(xr),yr}function gr(pr,mr,yr){var xr,vr;do{for(xr=sr.alloc(0);8*xr.length<pr.bitLength();)mr.v=ar(yr,mr.k).update(mr.v).digest(),xr=sr.concat([xr,mr.v]);vr=fr(xr,pr),mr.k=ar(yr,mr.k).update(mr.v).update(sr.from([0])).digest(),mr.v=ar(yr,mr.k).update(mr.v).digest()}while(vr.cmp(pr)!==-1);return vr}function br(pr,mr,yr,xr){return pr.toRed(or.mont(yr)).redPow(mr).fromRed().mod(xr)}nr.exports=function(pr,mr,yr,xr,vr){var _r=ur(mr);if(_r.curve){if(xr!=="ecdsa"&&xr!=="ecdsa/rsa")throw new Error("wrong private key type");return function(Nr,Dr){var Ir=hr[Dr.curve.join(".")];if(!Ir)throw new Error("unknown curve "+Dr.curve.join("."));var Or=new lr(Ir).keyFromPrivate(Dr.privateKey).sign(Nr);return sr.from(Or.toDER())}(pr,_r)}if(_r.type==="dsa"){if(xr!=="dsa")throw new Error("wrong private key type");return function(Nr,Dr,Ir){for(var Or,jr=Dr.params.priv_key,Lr=Dr.params.p,Cr=Dr.params.q,wr=Dr.params.g,Pr=new or(0),Ar=fr(Nr,Cr).mod(Cr),Sr=!1,Mr=dr(jr,Cr,Nr,Ir);Sr===!1;)Or=gr(Cr,Mr,Ir),Pr=br(wr,Or,Lr,Cr),(Sr=Or.invm(Cr).imul(Ar.add(jr.mul(Pr))).mod(Cr)).cmpn(0)===0&&(Sr=!1,Pr=new or(0));return function(qr,$r){qr=qr.toArray(),$r=$r.toArray(),128&qr[0]&&(qr=[0].concat(qr)),128&$r[0]&&($r=[0].concat($r));var Br=[48,qr.length+$r.length+4,2,qr.length];return Br=Br.concat(qr,[2,$r.length],$r),sr.from(Br)}(Pr,Sr)}(pr,_r,yr)}if(xr!=="rsa"&&xr!=="ecdsa/rsa")throw new Error("wrong private key type");pr=sr.concat([vr,pr]);for(var Er=_r.modulus.byteLength(),Tr=[0,1];pr.length+Tr.length+1<Er;)Tr.push(255);Tr.push(0);for(var Rr=-1;++Rr<pr.length;)Tr.push(pr[Rr]);return cr(Tr,_r)},nr.exports.getKey=dr,nr.exports.makeKey=gr},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("bn.js"),cr=rr("elliptic").ec,lr=rr("parse-asn1"),or=rr("./curves.json");function ur(hr,dr){if(hr.cmpn(0)<=0)throw new Error("invalid sig");if(hr.cmp(dr)>=dr)throw new Error("invalid sig")}nr.exports=function(hr,dr,fr,gr,br){var pr=lr(fr);if(pr.type==="ec"){if(gr!=="ecdsa"&&gr!=="ecdsa/rsa")throw new Error("wrong public key type");return function(Tr,Rr,Nr){var Dr=or[Nr.data.algorithm.curve.join(".")];if(!Dr)throw new Error("unknown curve "+Nr.data.algorithm.curve.join("."));var Ir=new cr(Dr),Or=Nr.data.subjectPrivateKey.data;return Ir.verify(Rr,Tr,Or)}(hr,dr,pr)}if(pr.type==="dsa"){if(gr!=="dsa")throw new Error("wrong public key type");return function(Tr,Rr,Nr){var Dr=Nr.data.p,Ir=Nr.data.q,Or=Nr.data.g,jr=Nr.data.pub_key,Lr=lr.signature.decode(Tr,"der"),Cr=Lr.s,wr=Lr.r;ur(Cr,Ir),ur(wr,Ir);var Pr=ar.mont(Dr),Ar=Cr.invm(Ir);return Or.toRed(Pr).redPow(new ar(Rr).mul(Ar).mod(Ir)).fromRed().mul(jr.toRed(Pr).redPow(wr.mul(Ar).mod(Ir)).fromRed()).mod(Dr).mod(Ir).cmp(wr)===0}(hr,dr,pr)}if(gr!=="rsa"&&gr!=="ecdsa/rsa")throw new Error("wrong public key type");dr=sr.concat([br,dr]);for(var mr=pr.modulus.byteLength(),yr=[1],xr=0;dr.length+yr.length+2<mr;)yr.push(255),xr++;yr.push(0);for(var vr=-1;++vr<dr.length;)yr.push(dr[vr]);yr=sr.from(yr);var _r=ar.mont(pr.modulus);hr=(hr=new ar(hr).toRed(_r)).redPow(new ar(pr.publicExponent)),hr=sr.from(hr.fromRed().toArray());var Er=xr<8?1:0;for(mr=Math.min(hr.length,yr.length),hr.length!==yr.length&&(Er=1),vr=-1;++vr<mr;)Er|=hr[vr]^yr[vr];return Er===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(rr,nr,ir){},{}],217:[function(rr,nr,ir){var sr=rr("buffer"),ar=sr.Buffer;function cr(or,ur){for(var hr in or)ur[hr]=or[hr]}function lr(or,ur,hr){return ar(or,ur,hr)}ar.from&&ar.alloc&&ar.allocUnsafe&&ar.allocUnsafeSlow?nr.exports=sr:(cr(sr,ir),ir.Buffer=lr),cr(ar,lr),lr.from=function(or,ur,hr){if(typeof or=="number")throw new TypeError("Argument must not be a number");return ar(or,ur,hr)},lr.alloc=function(or,ur,hr){if(typeof or!="number")throw new TypeError("Argument must be a number");var dr=ar(or);return ur!==void 0?typeof hr=="string"?dr.fill(ur,hr):dr.fill(ur):dr.fill(0),dr},lr.allocUnsafe=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return ar(or)},lr.allocUnsafeSlow=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return sr.SlowBuffer(or)}},{buffer:220}],218:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=sr.isEncoding||function(pr){switch((pr=""+pr)&&pr.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function cr(pr){var mr;switch(this.encoding=function(yr){var xr=function(vr){if(!vr)return"utf8";for(var _r;;)switch(vr){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return vr;default:if(_r)return;vr=(""+vr).toLowerCase(),_r=!0}}(yr);if(typeof xr!="string"&&(sr.isEncoding===ar||!ar(yr)))throw new Error("Unknown encoding: "+yr);return xr||yr}(pr),this.encoding){case"utf16le":this.text=ur,this.end=hr,mr=4;break;case"utf8":this.fillLast=or,mr=4;break;case"base64":this.text=dr,this.end=fr,mr=3;break;default:return this.write=gr,void(this.end=br)}this.lastNeed=0,this.lastTotal=0,this.lastChar=sr.allocUnsafe(mr)}function lr(pr){return pr<=127?0:pr>>5==6?2:pr>>4==14?3:pr>>3==30?4:pr>>6==2?-1:-2}function or(pr){var mr=this.lastTotal-this.lastNeed,yr=function(xr,vr,_r){if((192&vr[0])!=128)return xr.lastNeed=0,"";if(xr.lastNeed>1&&vr.length>1){if((192&vr[1])!=128)return xr.lastNeed=1,"";if(xr.lastNeed>2&&vr.length>2&&(192&vr[2])!=128)return xr.lastNeed=2,""}}(this,pr);return yr!==void 0?yr:this.lastNeed<=pr.length?(pr.copy(this.lastChar,mr,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(pr.copy(this.lastChar,mr,0,pr.length),void(this.lastNeed-=pr.length))}function ur(pr,mr){if((pr.length-mr)%2==0){var yr=pr.toString("utf16le",mr);if(yr){var xr=yr.charCodeAt(yr.length-1);if(xr>=55296&&xr<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=pr[pr.length-2],this.lastChar[1]=pr[pr.length-1],yr.slice(0,-1)}return yr}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=pr[pr.length-1],pr.toString("utf16le",mr,pr.length-1)}function hr(pr){var mr=pr&&pr.length?this.write(pr):"";if(this.lastNeed){var yr=this.lastTotal-this.lastNeed;return mr+this.lastChar.toString("utf16le",0,yr)}return mr}function dr(pr,mr){var yr=(pr.length-mr)%3;return yr===0?pr.toString("base64",mr):(this.lastNeed=3-yr,this.lastTotal=3,yr===1?this.lastChar[0]=pr[pr.length-1]:(this.lastChar[0]=pr[pr.length-2],this.lastChar[1]=pr[pr.length-1]),pr.toString("base64",mr,pr.length-yr))}function fr(pr){var mr=pr&&pr.length?this.write(pr):"";return this.lastNeed?mr+this.lastChar.toString("base64",0,3-this.lastNeed):mr}function gr(pr){return pr.toString(this.encoding)}function br(pr){return pr&&pr.length?this.write(pr):""}ir.StringDecoder=cr,cr.prototype.write=function(pr){if(pr.length===0)return"";var mr,yr;if(this.lastNeed){if((mr=this.fillLast(pr))===void 0)return"";yr=this.lastNeed,this.lastNeed=0}else yr=0;return yr<pr.length?mr?mr+this.text(pr,yr):this.text(pr,yr):mr||""},cr.prototype.end=function(pr){var mr=pr&&pr.length?this.write(pr):"";return this.lastNeed?mr+"":mr},cr.prototype.text=function(pr,mr){var yr=function(vr,_r,Er){var Tr=_r.length-1;if(Tr<Er)return 0;var Rr=lr(_r[Tr]);return Rr>=0?(Rr>0&&(vr.lastNeed=Rr-1),Rr):--Tr<Er||Rr===-2?0:(Rr=lr(_r[Tr]))>=0?(Rr>0&&(vr.lastNeed=Rr-2),Rr):--Tr<Er||Rr===-2?0:(Rr=lr(_r[Tr]))>=0?(Rr>0&&(Rr===2?Rr=0:vr.lastNeed=Rr-3),Rr):0}(this,pr,mr);if(!this.lastNeed)return pr.toString("utf8",mr);this.lastTotal=yr;var xr=pr.length-(yr-this.lastNeed);return pr.copy(this.lastChar,0,xr),pr.toString("utf8",mr,xr)},cr.prototype.fillLast=function(pr){if(this.lastNeed<=pr.length)return pr.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);pr.copy(this.lastChar,this.lastTotal-this.lastNeed,0,pr.length),this.lastNeed-=pr.length}},{"safe-buffer":217}],219:[function(rr,nr,ir){(function(sr){(function(){nr.exports=function(ar,cr){for(var lr=Math.min(ar.length,cr.length),or=new sr(lr),ur=0;ur<lr;++ur)or[ur]=ar[ur]^cr[ur];return or}}).call(this)}).call(this,rr("buffer").Buffer)},{buffer:220}],220:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("base64-js"),cr=rr("ieee754");ir.Buffer=or,ir.SlowBuffer=function(Ur){return+Ur!=Ur&&(Ur=0),or.alloc(+Ur)},ir.INSPECT_MAX_BYTES=50;function lr(Ur){if(Ur>2147483647)throw new RangeError('The value "'+Ur+'" is invalid for option "size"');var Fr=new Uint8Array(Ur);return Fr.__proto__=or.prototype,Fr}function or(Ur,Fr,Kr){if(typeof Ur=="number"){if(typeof Fr=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return dr(Ur)}return ur(Ur,Fr,Kr)}function ur(Ur,Fr,Kr){if(typeof Ur=="string")return function(tn,an){if(typeof an=="string"&&an!==""||(an="utf8"),!or.isEncoding(an))throw new TypeError("Unknown encoding: "+an);var dn=0|br(tn,an),en=lr(dn),rn=en.write(tn,an);return rn!==dn&&(en=en.slice(0,rn)),en}(Ur,Fr);if(ArrayBuffer.isView(Ur))return fr(Ur);if(Ur==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ur);if(Vr(Ur,ArrayBuffer)||Ur&&Vr(Ur.buffer,ArrayBuffer))return function(tn,an,dn){if(an<0||tn.byteLength<an)throw new RangeError('"offset" is outside of buffer bounds');if(tn.byteLength<an+(dn||0))throw new RangeError('"length" is outside of buffer bounds');var en;return en=an===void 0&&dn===void 0?new Uint8Array(tn):dn===void 0?new Uint8Array(tn,an):new Uint8Array(tn,an,dn),en.__proto__=or.prototype,en}(Ur,Fr,Kr);if(typeof Ur=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Zr=Ur.valueOf&&Ur.valueOf();if(Zr!=null&&Zr!==Ur)return or.from(Zr,Fr,Kr);var Jr=function(tn){if(or.isBuffer(tn)){var an=0|gr(tn.length),dn=lr(an);return dn.length===0||tn.copy(dn,0,0,an),dn}if(tn.length!==void 0)return typeof tn.length!="number"||Xr(tn.length)?lr(0):fr(tn);if(tn.type==="Buffer"&&Array.isArray(tn.data))return fr(tn.data)}(Ur);if(Jr)return Jr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ur[Symbol.toPrimitive]=="function")return or.from(Ur[Symbol.toPrimitive]("string"),Fr,Kr);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ur)}function hr(Ur){if(typeof Ur!="number")throw new TypeError('"size" argument must be of type number');if(Ur<0)throw new RangeError('The value "'+Ur+'" is invalid for option "size"')}function dr(Ur){return hr(Ur),lr(Ur<0?0:0|gr(Ur))}function fr(Ur){for(var Fr=Ur.length<0?0:0|gr(Ur.length),Kr=lr(Fr),Zr=0;Zr<Fr;Zr+=1)Kr[Zr]=255&Ur[Zr];return Kr}function gr(Ur){if(Ur>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|Ur}function br(Ur,Fr){if(or.isBuffer(Ur))return Ur.length;if(ArrayBuffer.isView(Ur)||Vr(Ur,ArrayBuffer))return Ur.byteLength;if(typeof Ur!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ur);var Kr=Ur.length,Zr=arguments.length>2&&arguments[2]===!0;if(!Zr&&Kr===0)return 0;for(var Jr=!1;;)switch(Fr){case"ascii":case"latin1":case"binary":return Kr;case"utf8":case"utf-8":return Br(Ur).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*Kr;case"hex":return Kr>>>1;case"base64":return zr(Ur).length;default:if(Jr)return Zr?-1:Br(Ur).length;Fr=(""+Fr).toLowerCase(),Jr=!0}}function pr(Ur,Fr,Kr){var Zr=!1;if((Fr===void 0||Fr<0)&&(Fr=0),Fr>this.length||((Kr===void 0||Kr>this.length)&&(Kr=this.length),Kr<=0)||(Kr>>>=0)<=(Fr>>>=0))return"";for(Ur||(Ur="utf8");;)switch(Ur){case"hex":return Lr(this,Fr,Kr);case"utf8":case"utf-8":return Ir(this,Fr,Kr);case"ascii":return Or(this,Fr,Kr);case"latin1":case"binary":return jr(this,Fr,Kr);case"base64":return Dr(this,Fr,Kr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cr(this,Fr,Kr);default:if(Zr)throw new TypeError("Unknown encoding: "+Ur);Ur=(Ur+"").toLowerCase(),Zr=!0}}function mr(Ur,Fr,Kr){var Zr=Ur[Fr];Ur[Fr]=Ur[Kr],Ur[Kr]=Zr}function yr(Ur,Fr,Kr,Zr,Jr){if(Ur.length===0)return-1;if(typeof Kr=="string"?(Zr=Kr,Kr=0):Kr>2147483647?Kr=2147483647:Kr<-2147483648&&(Kr=-2147483648),Xr(Kr=+Kr)&&(Kr=Jr?0:Ur.length-1),Kr<0&&(Kr=Ur.length+Kr),Kr>=Ur.length){if(Jr)return-1;Kr=Ur.length-1}else if(Kr<0){if(!Jr)return-1;Kr=0}if(typeof Fr=="string"&&(Fr=or.from(Fr,Zr)),or.isBuffer(Fr))return Fr.length===0?-1:xr(Ur,Fr,Kr,Zr,Jr);if(typeof Fr=="number")return Fr&=255,typeof Uint8Array.prototype.indexOf=="function"?Jr?Uint8Array.prototype.indexOf.call(Ur,Fr,Kr):Uint8Array.prototype.lastIndexOf.call(Ur,Fr,Kr):xr(Ur,[Fr],Kr,Zr,Jr);throw new TypeError("val must be string, number or Buffer")}function xr(Ur,Fr,Kr,Zr,Jr){var tn,an=1,dn=Ur.length,en=Fr.length;if(Zr!==void 0&&((Zr=String(Zr).toLowerCase())==="ucs2"||Zr==="ucs-2"||Zr==="utf16le"||Zr==="utf-16le")){if(Ur.length<2||Fr.length<2)return-1;an=2,dn/=2,en/=2,Kr/=2}function rn(pn,gn){return an===1?pn[gn]:pn.readUInt16BE(gn*an)}if(Jr){var sn=-1;for(tn=Kr;tn<dn;tn++)if(rn(Ur,tn)===rn(Fr,sn===-1?0:tn-sn)){if(sn===-1&&(sn=tn),tn-sn+1===en)return sn*an}else sn!==-1&&(tn-=tn-sn),sn=-1}else for(Kr+en>dn&&(Kr=dn-en),tn=Kr;tn>=0;tn--){for(var on=!0,fn=0;fn<en;fn++)if(rn(Ur,tn+fn)!==rn(Fr,fn)){on=!1;break}if(on)return tn}return-1}function vr(Ur,Fr,Kr,Zr){Kr=Number(Kr)||0;var Jr=Ur.length-Kr;Zr?(Zr=Number(Zr))>Jr&&(Zr=Jr):Zr=Jr;var tn=Fr.length;Zr>tn/2&&(Zr=tn/2);for(var an=0;an<Zr;++an){var dn=parseInt(Fr.substr(2*an,2),16);if(Xr(dn))return an;Ur[Kr+an]=dn}return an}function _r(Ur,Fr,Kr,Zr){return Gr(Br(Fr,Ur.length-Kr),Ur,Kr,Zr)}function Er(Ur,Fr,Kr,Zr){return Gr(function(Jr){for(var tn=[],an=0;an<Jr.length;++an)tn.push(255&Jr.charCodeAt(an));return tn}(Fr),Ur,Kr,Zr)}function Tr(Ur,Fr,Kr,Zr){return Er(Ur,Fr,Kr,Zr)}function Rr(Ur,Fr,Kr,Zr){return Gr(zr(Fr),Ur,Kr,Zr)}function Nr(Ur,Fr,Kr,Zr){return Gr(function(Jr,tn){for(var an,dn,en,rn=[],sn=0;sn<Jr.length&&!((tn-=2)<0);++sn)an=Jr.charCodeAt(sn),dn=an>>8,en=an%256,rn.push(en),rn.push(dn);return rn}(Fr,Ur.length-Kr),Ur,Kr,Zr)}function Dr(Ur,Fr,Kr){return Fr===0&&Kr===Ur.length?ar.fromByteArray(Ur):ar.fromByteArray(Ur.slice(Fr,Kr))}function Ir(Ur,Fr,Kr){Kr=Math.min(Ur.length,Kr);for(var Zr=[],Jr=Fr;Jr<Kr;){var tn,an,dn,en,rn=Ur[Jr],sn=null,on=rn>239?4:rn>223?3:rn>191?2:1;if(Jr+on<=Kr)switch(on){case 1:rn<128&&(sn=rn);break;case 2:(192&(tn=Ur[Jr+1]))==128&&(en=(31&rn)<<6|63&tn)>127&&(sn=en);break;case 3:tn=Ur[Jr+1],an=Ur[Jr+2],(192&tn)==128&&(192&an)==128&&(en=(15&rn)<<12|(63&tn)<<6|63&an)>2047&&(en<55296||en>57343)&&(sn=en);break;case 4:tn=Ur[Jr+1],an=Ur[Jr+2],dn=Ur[Jr+3],(192&tn)==128&&(192&an)==128&&(192&dn)==128&&(en=(15&rn)<<18|(63&tn)<<12|(63&an)<<6|63&dn)>65535&&en<1114112&&(sn=en)}sn===null?(sn=65533,on=1):sn>65535&&(sn-=65536,Zr.push(sn>>>10&1023|55296),sn=56320|1023&sn),Zr.push(sn),Jr+=on}return function(fn){var pn=fn.length;if(pn<=4096)return String.fromCharCode.apply(String,fn);for(var gn="",Pn=0;Pn<pn;)gn+=String.fromCharCode.apply(String,fn.slice(Pn,Pn+=4096));return gn}(Zr)}ir.kMaxLength=2147483647,or.TYPED_ARRAY_SUPPORT=function(){try{var Ur=new Uint8Array(1);return Ur.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ur.foo()===42}catch{return!1}}(),or.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(or.prototype,"parent",{enumerable:!0,get:function(){if(or.isBuffer(this))return this.buffer}}),Object.defineProperty(or.prototype,"offset",{enumerable:!0,get:function(){if(or.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&or[Symbol.species]===or&&Object.defineProperty(or,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),or.poolSize=8192,or.from=function(Ur,Fr,Kr){return ur(Ur,Fr,Kr)},or.prototype.__proto__=Uint8Array.prototype,or.__proto__=Uint8Array,or.alloc=function(Ur,Fr,Kr){return function(Zr,Jr,tn){return hr(Zr),Zr<=0?lr(Zr):Jr!==void 0?typeof tn=="string"?lr(Zr).fill(Jr,tn):lr(Zr).fill(Jr):lr(Zr)}(Ur,Fr,Kr)},or.allocUnsafe=function(Ur){return dr(Ur)},or.allocUnsafeSlow=function(Ur){return dr(Ur)},or.isBuffer=function(Ur){return Ur!=null&&Ur._isBuffer===!0&&Ur!==or.prototype},or.compare=function(Ur,Fr){if(Vr(Ur,Uint8Array)&&(Ur=or.from(Ur,Ur.offset,Ur.byteLength)),Vr(Fr,Uint8Array)&&(Fr=or.from(Fr,Fr.offset,Fr.byteLength)),!or.isBuffer(Ur)||!or.isBuffer(Fr))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ur===Fr)return 0;for(var Kr=Ur.length,Zr=Fr.length,Jr=0,tn=Math.min(Kr,Zr);Jr<tn;++Jr)if(Ur[Jr]!==Fr[Jr]){Kr=Ur[Jr],Zr=Fr[Jr];break}return Kr<Zr?-1:Zr<Kr?1:0},or.isEncoding=function(Ur){switch(String(Ur).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},or.concat=function(Ur,Fr){if(!Array.isArray(Ur))throw new TypeError('"list" argument must be an Array of Buffers');if(Ur.length===0)return or.alloc(0);var Kr;if(Fr===void 0)for(Fr=0,Kr=0;Kr<Ur.length;++Kr)Fr+=Ur[Kr].length;var Zr=or.allocUnsafe(Fr),Jr=0;for(Kr=0;Kr<Ur.length;++Kr){var tn=Ur[Kr];if(Vr(tn,Uint8Array)&&(tn=or.from(tn)),!or.isBuffer(tn))throw new TypeError('"list" argument must be an Array of Buffers');tn.copy(Zr,Jr),Jr+=tn.length}return Zr},or.byteLength=br,or.prototype._isBuffer=!0,or.prototype.swap16=function(){var Ur=this.length;if(Ur%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Fr=0;Fr<Ur;Fr+=2)mr(this,Fr,Fr+1);return this},or.prototype.swap32=function(){var Ur=this.length;if(Ur%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Fr=0;Fr<Ur;Fr+=4)mr(this,Fr,Fr+3),mr(this,Fr+1,Fr+2);return this},or.prototype.swap64=function(){var Ur=this.length;if(Ur%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Fr=0;Fr<Ur;Fr+=8)mr(this,Fr,Fr+7),mr(this,Fr+1,Fr+6),mr(this,Fr+2,Fr+5),mr(this,Fr+3,Fr+4);return this},or.prototype.toString=function(){var Ur=this.length;return Ur===0?"":arguments.length===0?Ir(this,0,Ur):pr.apply(this,arguments)},or.prototype.toLocaleString=or.prototype.toString,or.prototype.equals=function(Ur){if(!or.isBuffer(Ur))throw new TypeError("Argument must be a Buffer");return this===Ur||or.compare(this,Ur)===0},or.prototype.inspect=function(){var Ur="",Fr=ir.INSPECT_MAX_BYTES;return Ur=this.toString("hex",0,Fr).replace(/(.{2})/g,"$1 ").trim(),this.length>Fr&&(Ur+=" ... "),"<Buffer "+Ur+">"},or.prototype.compare=function(Ur,Fr,Kr,Zr,Jr){if(Vr(Ur,Uint8Array)&&(Ur=or.from(Ur,Ur.offset,Ur.byteLength)),!or.isBuffer(Ur))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ur);if(Fr===void 0&&(Fr=0),Kr===void 0&&(Kr=Ur?Ur.length:0),Zr===void 0&&(Zr=0),Jr===void 0&&(Jr=this.length),Fr<0||Kr>Ur.length||Zr<0||Jr>this.length)throw new RangeError("out of range index");if(Zr>=Jr&&Fr>=Kr)return 0;if(Zr>=Jr)return-1;if(Fr>=Kr)return 1;if(this===Ur)return 0;for(var tn=(Jr>>>=0)-(Zr>>>=0),an=(Kr>>>=0)-(Fr>>>=0),dn=Math.min(tn,an),en=this.slice(Zr,Jr),rn=Ur.slice(Fr,Kr),sn=0;sn<dn;++sn)if(en[sn]!==rn[sn]){tn=en[sn],an=rn[sn];break}return tn<an?-1:an<tn?1:0},or.prototype.includes=function(Ur,Fr,Kr){return this.indexOf(Ur,Fr,Kr)!==-1},or.prototype.indexOf=function(Ur,Fr,Kr){return yr(this,Ur,Fr,Kr,!0)},or.prototype.lastIndexOf=function(Ur,Fr,Kr){return yr(this,Ur,Fr,Kr,!1)},or.prototype.write=function(Ur,Fr,Kr,Zr){if(Fr===void 0)Zr="utf8",Kr=this.length,Fr=0;else if(Kr===void 0&&typeof Fr=="string")Zr=Fr,Kr=this.length,Fr=0;else{if(!isFinite(Fr))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Fr>>>=0,isFinite(Kr)?(Kr>>>=0,Zr===void 0&&(Zr="utf8")):(Zr=Kr,Kr=void 0)}var Jr=this.length-Fr;if((Kr===void 0||Kr>Jr)&&(Kr=Jr),Ur.length>0&&(Kr<0||Fr<0)||Fr>this.length)throw new RangeError("Attempt to write outside buffer bounds");Zr||(Zr="utf8");for(var tn=!1;;)switch(Zr){case"hex":return vr(this,Ur,Fr,Kr);case"utf8":case"utf-8":return _r(this,Ur,Fr,Kr);case"ascii":return Er(this,Ur,Fr,Kr);case"latin1":case"binary":return Tr(this,Ur,Fr,Kr);case"base64":return Rr(this,Ur,Fr,Kr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Nr(this,Ur,Fr,Kr);default:if(tn)throw new TypeError("Unknown encoding: "+Zr);Zr=(""+Zr).toLowerCase(),tn=!0}},or.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Or(Ur,Fr,Kr){var Zr="";Kr=Math.min(Ur.length,Kr);for(var Jr=Fr;Jr<Kr;++Jr)Zr+=String.fromCharCode(127&Ur[Jr]);return Zr}function jr(Ur,Fr,Kr){var Zr="";Kr=Math.min(Ur.length,Kr);for(var Jr=Fr;Jr<Kr;++Jr)Zr+=String.fromCharCode(Ur[Jr]);return Zr}function Lr(Ur,Fr,Kr){var Zr=Ur.length;(!Fr||Fr<0)&&(Fr=0),(!Kr||Kr<0||Kr>Zr)&&(Kr=Zr);for(var Jr="",tn=Fr;tn<Kr;++tn)Jr+=$r(Ur[tn]);return Jr}function Cr(Ur,Fr,Kr){for(var Zr=Ur.slice(Fr,Kr),Jr="",tn=0;tn<Zr.length;tn+=2)Jr+=String.fromCharCode(Zr[tn]+256*Zr[tn+1]);return Jr}function wr(Ur,Fr,Kr){if(Ur%1!=0||Ur<0)throw new RangeError("offset is not uint");if(Ur+Fr>Kr)throw new RangeError("Trying to access beyond buffer length")}function Pr(Ur,Fr,Kr,Zr,Jr,tn){if(!or.isBuffer(Ur))throw new TypeError('"buffer" argument must be a Buffer instance');if(Fr>Jr||Fr<tn)throw new RangeError('"value" argument is out of bounds');if(Kr+Zr>Ur.length)throw new RangeError("Index out of range")}function Ar(Ur,Fr,Kr,Zr,Jr,tn){if(Kr+Zr>Ur.length)throw new RangeError("Index out of range");if(Kr<0)throw new RangeError("Index out of range")}function Sr(Ur,Fr,Kr,Zr,Jr){return Fr=+Fr,Kr>>>=0,Jr||Ar(Ur,0,Kr,4),cr.write(Ur,Fr,Kr,Zr,23,4),Kr+4}function Mr(Ur,Fr,Kr,Zr,Jr){return Fr=+Fr,Kr>>>=0,Jr||Ar(Ur,0,Kr,8),cr.write(Ur,Fr,Kr,Zr,52,8),Kr+8}or.prototype.slice=function(Ur,Fr){var Kr=this.length;(Ur=~~Ur)<0?(Ur+=Kr)<0&&(Ur=0):Ur>Kr&&(Ur=Kr),(Fr=Fr===void 0?Kr:~~Fr)<0?(Fr+=Kr)<0&&(Fr=0):Fr>Kr&&(Fr=Kr),Fr<Ur&&(Fr=Ur);var Zr=this.subarray(Ur,Fr);return Zr.__proto__=or.prototype,Zr},or.prototype.readUIntLE=function(Ur,Fr,Kr){Ur>>>=0,Fr>>>=0,Kr||wr(Ur,Fr,this.length);for(var Zr=this[Ur],Jr=1,tn=0;++tn<Fr&&(Jr*=256);)Zr+=this[Ur+tn]*Jr;return Zr},or.prototype.readUIntBE=function(Ur,Fr,Kr){Ur>>>=0,Fr>>>=0,Kr||wr(Ur,Fr,this.length);for(var Zr=this[Ur+--Fr],Jr=1;Fr>0&&(Jr*=256);)Zr+=this[Ur+--Fr]*Jr;return Zr},or.prototype.readUInt8=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,1,this.length),this[Ur]},or.prototype.readUInt16LE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,2,this.length),this[Ur]|this[Ur+1]<<8},or.prototype.readUInt16BE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,2,this.length),this[Ur]<<8|this[Ur+1]},or.prototype.readUInt32LE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),(this[Ur]|this[Ur+1]<<8|this[Ur+2]<<16)+16777216*this[Ur+3]},or.prototype.readUInt32BE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),16777216*this[Ur]+(this[Ur+1]<<16|this[Ur+2]<<8|this[Ur+3])},or.prototype.readIntLE=function(Ur,Fr,Kr){Ur>>>=0,Fr>>>=0,Kr||wr(Ur,Fr,this.length);for(var Zr=this[Ur],Jr=1,tn=0;++tn<Fr&&(Jr*=256);)Zr+=this[Ur+tn]*Jr;return Zr>=(Jr*=128)&&(Zr-=Math.pow(2,8*Fr)),Zr},or.prototype.readIntBE=function(Ur,Fr,Kr){Ur>>>=0,Fr>>>=0,Kr||wr(Ur,Fr,this.length);for(var Zr=Fr,Jr=1,tn=this[Ur+--Zr];Zr>0&&(Jr*=256);)tn+=this[Ur+--Zr]*Jr;return tn>=(Jr*=128)&&(tn-=Math.pow(2,8*Fr)),tn},or.prototype.readInt8=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,1,this.length),128&this[Ur]?-1*(255-this[Ur]+1):this[Ur]},or.prototype.readInt16LE=function(Ur,Fr){Ur>>>=0,Fr||wr(Ur,2,this.length);var Kr=this[Ur]|this[Ur+1]<<8;return 32768&Kr?4294901760|Kr:Kr},or.prototype.readInt16BE=function(Ur,Fr){Ur>>>=0,Fr||wr(Ur,2,this.length);var Kr=this[Ur+1]|this[Ur]<<8;return 32768&Kr?4294901760|Kr:Kr},or.prototype.readInt32LE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),this[Ur]|this[Ur+1]<<8|this[Ur+2]<<16|this[Ur+3]<<24},or.prototype.readInt32BE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),this[Ur]<<24|this[Ur+1]<<16|this[Ur+2]<<8|this[Ur+3]},or.prototype.readFloatLE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),cr.read(this,Ur,!0,23,4)},or.prototype.readFloatBE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,4,this.length),cr.read(this,Ur,!1,23,4)},or.prototype.readDoubleLE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,8,this.length),cr.read(this,Ur,!0,52,8)},or.prototype.readDoubleBE=function(Ur,Fr){return Ur>>>=0,Fr||wr(Ur,8,this.length),cr.read(this,Ur,!1,52,8)},or.prototype.writeUIntLE=function(Ur,Fr,Kr,Zr){Ur=+Ur,Fr>>>=0,Kr>>>=0,Zr||Pr(this,Ur,Fr,Kr,Math.pow(2,8*Kr)-1,0);var Jr=1,tn=0;for(this[Fr]=255&Ur;++tn<Kr&&(Jr*=256);)this[Fr+tn]=Ur/Jr&255;return Fr+Kr},or.prototype.writeUIntBE=function(Ur,Fr,Kr,Zr){Ur=+Ur,Fr>>>=0,Kr>>>=0,Zr||Pr(this,Ur,Fr,Kr,Math.pow(2,8*Kr)-1,0);var Jr=Kr-1,tn=1;for(this[Fr+Jr]=255&Ur;--Jr>=0&&(tn*=256);)this[Fr+Jr]=Ur/tn&255;return Fr+Kr},or.prototype.writeUInt8=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,1,255,0),this[Fr]=255&Ur,Fr+1},or.prototype.writeUInt16LE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,2,65535,0),this[Fr]=255&Ur,this[Fr+1]=Ur>>>8,Fr+2},or.prototype.writeUInt16BE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,2,65535,0),this[Fr]=Ur>>>8,this[Fr+1]=255&Ur,Fr+2},or.prototype.writeUInt32LE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,4,4294967295,0),this[Fr+3]=Ur>>>24,this[Fr+2]=Ur>>>16,this[Fr+1]=Ur>>>8,this[Fr]=255&Ur,Fr+4},or.prototype.writeUInt32BE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,4,4294967295,0),this[Fr]=Ur>>>24,this[Fr+1]=Ur>>>16,this[Fr+2]=Ur>>>8,this[Fr+3]=255&Ur,Fr+4},or.prototype.writeIntLE=function(Ur,Fr,Kr,Zr){if(Ur=+Ur,Fr>>>=0,!Zr){var Jr=Math.pow(2,8*Kr-1);Pr(this,Ur,Fr,Kr,Jr-1,-Jr)}var tn=0,an=1,dn=0;for(this[Fr]=255&Ur;++tn<Kr&&(an*=256);)Ur<0&&dn===0&&this[Fr+tn-1]!==0&&(dn=1),this[Fr+tn]=(Ur/an>>0)-dn&255;return Fr+Kr},or.prototype.writeIntBE=function(Ur,Fr,Kr,Zr){if(Ur=+Ur,Fr>>>=0,!Zr){var Jr=Math.pow(2,8*Kr-1);Pr(this,Ur,Fr,Kr,Jr-1,-Jr)}var tn=Kr-1,an=1,dn=0;for(this[Fr+tn]=255&Ur;--tn>=0&&(an*=256);)Ur<0&&dn===0&&this[Fr+tn+1]!==0&&(dn=1),this[Fr+tn]=(Ur/an>>0)-dn&255;return Fr+Kr},or.prototype.writeInt8=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,1,127,-128),Ur<0&&(Ur=255+Ur+1),this[Fr]=255&Ur,Fr+1},or.prototype.writeInt16LE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,2,32767,-32768),this[Fr]=255&Ur,this[Fr+1]=Ur>>>8,Fr+2},or.prototype.writeInt16BE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,2,32767,-32768),this[Fr]=Ur>>>8,this[Fr+1]=255&Ur,Fr+2},or.prototype.writeInt32LE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,4,2147483647,-2147483648),this[Fr]=255&Ur,this[Fr+1]=Ur>>>8,this[Fr+2]=Ur>>>16,this[Fr+3]=Ur>>>24,Fr+4},or.prototype.writeInt32BE=function(Ur,Fr,Kr){return Ur=+Ur,Fr>>>=0,Kr||Pr(this,Ur,Fr,4,2147483647,-2147483648),Ur<0&&(Ur=4294967295+Ur+1),this[Fr]=Ur>>>24,this[Fr+1]=Ur>>>16,this[Fr+2]=Ur>>>8,this[Fr+3]=255&Ur,Fr+4},or.prototype.writeFloatLE=function(Ur,Fr,Kr){return Sr(this,Ur,Fr,!0,Kr)},or.prototype.writeFloatBE=function(Ur,Fr,Kr){return Sr(this,Ur,Fr,!1,Kr)},or.prototype.writeDoubleLE=function(Ur,Fr,Kr){return Mr(this,Ur,Fr,!0,Kr)},or.prototype.writeDoubleBE=function(Ur,Fr,Kr){return Mr(this,Ur,Fr,!1,Kr)},or.prototype.copy=function(Ur,Fr,Kr,Zr){if(!or.isBuffer(Ur))throw new TypeError("argument should be a Buffer");if(Kr||(Kr=0),Zr||Zr===0||(Zr=this.length),Fr>=Ur.length&&(Fr=Ur.length),Fr||(Fr=0),Zr>0&&Zr<Kr&&(Zr=Kr),Zr===Kr||Ur.length===0||this.length===0)return 0;if(Fr<0)throw new RangeError("targetStart out of bounds");if(Kr<0||Kr>=this.length)throw new RangeError("Index out of range");if(Zr<0)throw new RangeError("sourceEnd out of bounds");Zr>this.length&&(Zr=this.length),Ur.length-Fr<Zr-Kr&&(Zr=Ur.length-Fr+Kr);var Jr=Zr-Kr;if(this===Ur&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(Fr,Kr,Zr);else if(this===Ur&&Kr<Fr&&Fr<Zr)for(var tn=Jr-1;tn>=0;--tn)Ur[tn+Fr]=this[tn+Kr];else Uint8Array.prototype.set.call(Ur,this.subarray(Kr,Zr),Fr);return Jr},or.prototype.fill=function(Ur,Fr,Kr,Zr){if(typeof Ur=="string"){if(typeof Fr=="string"?(Zr=Fr,Fr=0,Kr=this.length):typeof Kr=="string"&&(Zr=Kr,Kr=this.length),Zr!==void 0&&typeof Zr!="string")throw new TypeError("encoding must be a string");if(typeof Zr=="string"&&!or.isEncoding(Zr))throw new TypeError("Unknown encoding: "+Zr);if(Ur.length===1){var Jr=Ur.charCodeAt(0);(Zr==="utf8"&&Jr<128||Zr==="latin1")&&(Ur=Jr)}}else typeof Ur=="number"&&(Ur&=255);if(Fr<0||this.length<Fr||this.length<Kr)throw new RangeError("Out of range index");if(Kr<=Fr)return this;var tn;if(Fr>>>=0,Kr=Kr===void 0?this.length:Kr>>>0,Ur||(Ur=0),typeof Ur=="number")for(tn=Fr;tn<Kr;++tn)this[tn]=Ur;else{var an=or.isBuffer(Ur)?Ur:or.from(Ur,Zr),dn=an.length;if(dn===0)throw new TypeError('The value "'+Ur+'" is invalid for argument "value"');for(tn=0;tn<Kr-Fr;++tn)this[tn+Fr]=an[tn%dn]}return this};var qr=/[^+/0-9A-Za-z-_]/g;function $r(Ur){return Ur<16?"0"+Ur.toString(16):Ur.toString(16)}function Br(Ur,Fr){var Kr;Fr=Fr||1/0;for(var Zr=Ur.length,Jr=null,tn=[],an=0;an<Zr;++an){if((Kr=Ur.charCodeAt(an))>55295&&Kr<57344){if(!Jr){if(Kr>56319){(Fr-=3)>-1&&tn.push(239,191,189);continue}if(an+1===Zr){(Fr-=3)>-1&&tn.push(239,191,189);continue}Jr=Kr;continue}if(Kr<56320){(Fr-=3)>-1&&tn.push(239,191,189),Jr=Kr;continue}Kr=65536+(Jr-55296<<10|Kr-56320)}else Jr&&(Fr-=3)>-1&&tn.push(239,191,189);if(Jr=null,Kr<128){if((Fr-=1)<0)break;tn.push(Kr)}else if(Kr<2048){if((Fr-=2)<0)break;tn.push(Kr>>6|192,63&Kr|128)}else if(Kr<65536){if((Fr-=3)<0)break;tn.push(Kr>>12|224,Kr>>6&63|128,63&Kr|128)}else{if(!(Kr<1114112))throw new Error("Invalid code point");if((Fr-=4)<0)break;tn.push(Kr>>18|240,Kr>>12&63|128,Kr>>6&63|128,63&Kr|128)}}return tn}function zr(Ur){return ar.toByteArray(function(Fr){if((Fr=(Fr=Fr.split("=")[0]).trim().replace(qr,"")).length<2)return"";for(;Fr.length%4!=0;)Fr+="=";return Fr}(Ur))}function Gr(Ur,Fr,Kr,Zr){for(var Jr=0;Jr<Zr&&!(Jr+Kr>=Fr.length||Jr>=Ur.length);++Jr)Fr[Jr+Kr]=Ur[Jr];return Jr}function Vr(Ur,Fr){return Ur instanceof Fr||Ur!=null&&Ur.constructor!=null&&Ur.constructor.name!=null&&Ur.constructor.name===Fr.name}function Xr(Ur){return Ur!=Ur}}).call(this)}).call(this,rr("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("stream").Transform,cr=rr("string_decoder").StringDecoder;function lr(or){ar.call(this),this.hashMode=typeof or=="string",this.hashMode?this[or]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}rr("inherits")(lr,ar),lr.prototype.update=function(or,ur,hr){typeof or=="string"&&(or=sr.from(or,ur));var dr=this._update(or);return this.hashMode?this:(hr&&(dr=this._toString(dr,hr)),dr)},lr.prototype.setAutoPadding=function(){},lr.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},lr.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},lr.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},lr.prototype._transform=function(or,ur,hr){var dr;try{this.hashMode?this._update(or):this.push(this._update(or))}catch(fr){dr=fr}finally{hr(dr)}},lr.prototype._flush=function(or){var ur;try{this.push(this.__final())}catch(hr){ur=hr}or(ur)},lr.prototype._finalOrDigest=function(or){var ur=this.__final()||sr.alloc(0);return or&&(ur=this._toString(ur,or,!0)),ur},lr.prototype._toString=function(or,ur,hr){if(this._decoder||(this._decoder=new cr(ur),this._encoding=ur),this._encoding!==ur)throw new Error("can't switch encodings");var dr=this._decoder.write(or);return hr&&(dr+=this._decoder.end()),dr},nr.exports=lr},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(rr,nr,ir){var sr=rr("../internals/is-callable"),ar=rr("../internals/try-to-string"),cr=TypeError;nr.exports=function(lr){if(sr(lr))return lr;throw new cr(ar(lr)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(rr,nr,ir){var sr=rr("../internals/is-constructor"),ar=rr("../internals/try-to-string"),cr=TypeError;nr.exports=function(lr){if(sr(lr))return lr;throw new cr(ar(lr)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(rr,nr,ir){var sr=rr("../internals/is-callable"),ar=String,cr=TypeError;nr.exports=function(lr){if(typeof lr=="object"||sr(lr))return lr;throw new cr("Can't set "+ar(lr)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(rr,nr,ir){var sr=rr("../internals/well-known-symbol"),ar=rr("../internals/object-create"),cr=rr("../internals/object-define-property").f,lr=sr("unscopables"),or=Array.prototype;or[lr]===void 0&&cr(or,lr,{configurable:!0,value:ar(null)}),nr.exports=function(ur){or[lr][ur]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(rr,nr,ir){var sr=rr("../internals/object-is-prototype-of"),ar=TypeError;nr.exports=function(cr,lr){if(sr(lr,cr))return cr;throw new ar("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(rr,nr,ir){var sr=rr("../internals/is-object"),ar=String,cr=TypeError;nr.exports=function(lr){if(sr(lr))return lr;throw new cr(ar(lr)+" is not an object")}},{"../internals/is-object":289}],228:[function(rr,nr,ir){var sr=rr("../internals/to-indexed-object"),ar=rr("../internals/to-absolute-index"),cr=rr("../internals/length-of-array-like"),lr=function(or){return function(ur,hr,dr){var fr,gr=sr(ur),br=cr(gr),pr=ar(dr,br);if(or&&hr!=hr){for(;br>pr;)if((fr=gr[pr++])!=fr)return!0}else for(;br>pr;pr++)if((or||pr in gr)&&gr[pr]===hr)return or||pr||0;return!or&&-1}};nr.exports={includes:lr(!0),indexOf:lr(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(rr,nr,ir){var sr=rr("../internals/function-bind-context"),ar=rr("../internals/function-uncurry-this"),cr=rr("../internals/indexed-object"),lr=rr("../internals/to-object"),or=rr("../internals/length-of-array-like"),ur=rr("../internals/array-species-create"),hr=ar([].push),dr=function(fr){var gr=fr===1,br=fr===2,pr=fr===3,mr=fr===4,yr=fr===6,xr=fr===7,vr=fr===5||yr;return function(_r,Er,Tr,Rr){for(var Nr,Dr,Ir=lr(_r),Or=cr(Ir),jr=sr(Er,Tr),Lr=or(Or),Cr=0,wr=Rr||ur,Pr=gr?wr(_r,Lr):br||xr?wr(_r,0):void 0;Lr>Cr;Cr++)if((vr||Cr in Or)&&(Dr=jr(Nr=Or[Cr],Cr,Ir),fr))if(gr)Pr[Cr]=Dr;else if(Dr)switch(fr){case 3:return!0;case 5:return Nr;case 6:return Cr;case 2:hr(Pr,Nr)}else switch(fr){case 4:return!1;case 7:hr(Pr,Nr)}return yr?-1:pr||mr?mr:Pr}};nr.exports={forEach:dr(0),map:dr(1),filter:dr(2),some:dr(3),every:dr(4),find:dr(5),findIndex:dr(6),filterReject:dr(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(rr,nr,ir){var sr=rr("../internals/to-absolute-index"),ar=rr("../internals/length-of-array-like"),cr=rr("../internals/create-property"),lr=Array,or=Math.max;nr.exports=function(ur,hr,dr){for(var fr=ar(ur),gr=sr(hr,fr),br=sr(dr===void 0?fr:dr,fr),pr=lr(or(br-gr,0)),mr=0;gr<br;gr++,mr++)cr(pr,mr,ur[gr]);return pr.length=mr,pr}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this");nr.exports=sr([].slice)},{"../internals/function-uncurry-this":268}],232:[function(rr,nr,ir){var sr=rr("../internals/is-array"),ar=rr("../internals/is-constructor"),cr=rr("../internals/is-object"),lr=rr("../internals/well-known-symbol")("species"),or=Array;nr.exports=function(ur){var hr;return sr(ur)&&(hr=ur.constructor,(ar(hr)&&(hr===or||sr(hr.prototype))||cr(hr)&&(hr=hr[lr])===null)&&(hr=void 0)),hr===void 0?or:hr}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(rr,nr,ir){var sr=rr("../internals/array-species-constructor");nr.exports=function(ar,cr){return new(sr(ar))(cr===0?0:cr)}},{"../internals/array-species-constructor":232}],234:[function(rr,nr,ir){var sr=rr("../internals/well-known-symbol")("iterator"),ar=!1;try{var cr=0,lr={next:function(){return{done:!!cr++}},return:function(){ar=!0}};lr[sr]=function(){return this},Array.from(lr,function(){throw 2})}catch{}nr.exports=function(or,ur){try{if(!ur&&!ar)return!1}catch{return!1}var hr=!1;try{var dr={};dr[sr]=function(){return{next:function(){return{done:hr=!0}}}},or(dr)}catch{}return hr}},{"../internals/well-known-symbol":357}],235:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=sr({}.toString),cr=sr("".slice);nr.exports=function(lr){return cr(ar(lr),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(rr,nr,ir){var sr=rr("../internals/to-string-tag-support"),ar=rr("../internals/is-callable"),cr=rr("../internals/classof-raw"),lr=rr("../internals/well-known-symbol")("toStringTag"),or=Object,ur=cr(function(){return arguments}())==="Arguments";nr.exports=sr?cr:function(hr){var dr,fr,gr;return hr===void 0?"Undefined":hr===null?"Null":typeof(fr=function(br,pr){try{return br[pr]}catch{}}(dr=or(hr),lr))=="string"?fr:ur?cr(dr):(gr=cr(dr))==="Object"&&ar(dr.callee)?"Arguments":gr}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(rr,nr,ir){var sr=rr("../internals/has-own-property"),ar=rr("../internals/own-keys"),cr=rr("../internals/object-get-own-property-descriptor"),lr=rr("../internals/object-define-property");nr.exports=function(or,ur,hr){for(var dr=ar(ur),fr=lr.f,gr=cr.f,br=0;br<dr.length;br++){var pr=dr[br];sr(or,pr)||hr&&sr(hr,pr)||fr(or,pr,gr(ur,pr))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(rr,nr,ir){var sr=rr("../internals/well-known-symbol")("match");nr.exports=function(ar){var cr=/./;try{"/./"[ar](cr)}catch{try{return cr[sr]=!1,"/./"[ar](cr)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(rr,nr,ir){var sr=rr("../internals/fails");nr.exports=!sr(function(){function ar(){}return ar.prototype.constructor=null,Object.getPrototypeOf(new ar)!==ar.prototype})},{"../internals/fails":260}],240:[function(rr,nr,ir){nr.exports=function(sr,ar){return{value:sr,done:ar}}},{}],241:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/object-define-property"),cr=rr("../internals/create-property-descriptor");nr.exports=sr?function(lr,or,ur){return ar.f(lr,or,cr(1,ur))}:function(lr,or,ur){return lr[or]=ur,lr}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(rr,nr,ir){nr.exports=function(sr,ar){return{enumerable:!(1&sr),configurable:!(2&sr),writable:!(4&sr),value:ar}}},{}],243:[function(rr,nr,ir){var sr=rr("../internals/to-property-key"),ar=rr("../internals/object-define-property"),cr=rr("../internals/create-property-descriptor");nr.exports=function(lr,or,ur){var hr=sr(or);hr in lr?ar.f(lr,hr,cr(0,ur)):lr[hr]=ur}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(rr,nr,ir){var sr=rr("../internals/make-built-in"),ar=rr("../internals/object-define-property");nr.exports=function(cr,lr,or){return or.get&&sr(or.get,lr,{getter:!0}),or.set&&sr(or.set,lr,{setter:!0}),ar.f(cr,lr,or)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(rr,nr,ir){var sr=rr("../internals/is-callable"),ar=rr("../internals/object-define-property"),cr=rr("../internals/make-built-in"),lr=rr("../internals/define-global-property");nr.exports=function(or,ur,hr,dr){dr||(dr={});var fr=dr.enumerable,gr=dr.name!==void 0?dr.name:ur;if(sr(hr)&&cr(hr,gr,dr),dr.global)fr?or[ur]=hr:lr(ur,hr);else{try{dr.unsafe?or[ur]&&(fr=!0):delete or[ur]}catch{}fr?or[ur]=hr:ar.f(or,ur,{value:hr,enumerable:!1,configurable:!dr.nonConfigurable,writable:!dr.nonWritable})}return or}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=Object.defineProperty;nr.exports=function(cr,lr){try{ar(sr,cr,{value:lr,configurable:!0,writable:!0})}catch{sr[cr]=lr}return lr}},{"../internals/global":274}],247:[function(rr,nr,ir){var sr=rr("../internals/fails");nr.exports=!sr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},{"../internals/fails":260}],248:[function(rr,nr,ir){var sr=typeof document=="object"&&document.all,ar=sr===void 0&&sr!==void 0;nr.exports={all:sr,IS_HTMLDDA:ar}},{}],249:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/is-object"),cr=sr.document,lr=ar(cr)&&ar(cr.createElement);nr.exports=function(or){return lr?cr.createElement(or):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(rr,nr,ir){var sr=rr("../internals/engine-is-deno"),ar=rr("../internals/engine-is-node");nr.exports=!sr&&!ar&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(rr,nr,ir){nr.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(rr,nr,ir){var sr=rr("../internals/engine-user-agent");nr.exports=/ipad|iphone|ipod/i.test(sr)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(rr,nr,ir){var sr=rr("../internals/engine-user-agent");nr.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(sr)},{"../internals/engine-user-agent":256}],254:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/classof-raw");nr.exports=ar(sr.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(rr,nr,ir){var sr=rr("../internals/engine-user-agent");nr.exports=/web0s(?!.*chrome)/i.test(sr)},{"../internals/engine-user-agent":256}],256:[function(rr,nr,ir){nr.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(rr,nr,ir){var sr,ar,cr=rr("../internals/global"),lr=rr("../internals/engine-user-agent"),or=cr.process,ur=cr.Deno,hr=or&&or.versions||ur&&ur.version,dr=hr&&hr.v8;dr&&(ar=(sr=dr.split("."))[0]>0&&sr[0]<4?1:+(sr[0]+sr[1])),!ar&&lr&&(!(sr=lr.match(/Edge\/(\d+)/))||sr[1]>=74)&&(sr=lr.match(/Chrome\/(\d+)/))&&(ar=+sr[1]),nr.exports=ar},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(rr,nr,ir){nr.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/object-get-own-property-descriptor").f,cr=rr("../internals/create-non-enumerable-property"),lr=rr("../internals/define-built-in"),or=rr("../internals/define-global-property"),ur=rr("../internals/copy-constructor-properties"),hr=rr("../internals/is-forced");nr.exports=function(dr,fr){var gr,br,pr,mr,yr,xr=dr.target,vr=dr.global,_r=dr.stat;if(gr=vr?sr:_r?sr[xr]||or(xr,{}):(sr[xr]||{}).prototype)for(br in fr){if(mr=fr[br],pr=dr.dontCallGetSet?(yr=ar(gr,br))&&yr.value:gr[br],!hr(vr?br:xr+(_r?".":"#")+br,dr.forced)&&pr!==void 0){if(typeof mr==typeof pr)continue;ur(mr,pr)}(dr.sham||pr&&pr.sham)&&cr(mr,"sham",!0),lr(gr,br,mr,dr)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(rr,nr,ir){nr.exports=function(sr){try{return!!sr()}catch{return!0}}},{}],261:[function(rr,nr,ir){var sr=rr("../internals/function-bind-native"),ar=Function.prototype,cr=ar.apply,lr=ar.call;nr.exports=typeof Reflect=="object"&&Reflect.apply||(sr?lr.bind(cr):function(){return lr.apply(cr,arguments)})},{"../internals/function-bind-native":263}],262:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this-clause"),ar=rr("../internals/a-callable"),cr=rr("../internals/function-bind-native"),lr=sr(sr.bind);nr.exports=function(or,ur){return ar(or),ur===void 0?or:cr?lr(or,ur):function(){return or.apply(ur,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(rr,nr,ir){var sr=rr("../internals/fails");nr.exports=!sr(function(){var ar=(function(){}).bind();return typeof ar!="function"||ar.hasOwnProperty("prototype")})},{"../internals/fails":260}],264:[function(rr,nr,ir){var sr=rr("../internals/function-bind-native"),ar=Function.prototype.call;nr.exports=sr?ar.bind(ar):function(){return ar.apply(ar,arguments)}},{"../internals/function-bind-native":263}],265:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/has-own-property"),cr=Function.prototype,lr=sr&&Object.getOwnPropertyDescriptor,or=ar(cr,"name"),ur=or&&(function(){}).name==="something",hr=or&&(!sr||sr&&lr(cr,"name").configurable);nr.exports={EXISTS:or,PROPER:ur,CONFIGURABLE:hr}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/a-callable");nr.exports=function(cr,lr,or){try{return sr(ar(Object.getOwnPropertyDescriptor(cr,lr)[or]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(rr,nr,ir){var sr=rr("../internals/classof-raw"),ar=rr("../internals/function-uncurry-this");nr.exports=function(cr){if(sr(cr)==="Function")return ar(cr)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(rr,nr,ir){var sr=rr("../internals/function-bind-native"),ar=Function.prototype,cr=ar.call,lr=sr&&ar.bind.bind(cr,cr);nr.exports=sr?lr:function(or){return function(){return cr.apply(or,arguments)}}},{"../internals/function-bind-native":263}],269:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/is-callable"),cr=function(lr){return ar(lr)?lr:void 0};nr.exports=function(lr,or){return arguments.length<2?cr(sr[lr]):sr[lr]&&sr[lr][or]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(rr,nr,ir){var sr=rr("../internals/classof"),ar=rr("../internals/get-method"),cr=rr("../internals/is-null-or-undefined"),lr=rr("../internals/iterators"),or=rr("../internals/well-known-symbol")("iterator");nr.exports=function(ur){if(!cr(ur))return ar(ur,or)||ar(ur,"@@iterator")||lr[sr(ur)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(rr,nr,ir){var sr=rr("../internals/function-call"),ar=rr("../internals/a-callable"),cr=rr("../internals/an-object"),lr=rr("../internals/try-to-string"),or=rr("../internals/get-iterator-method"),ur=TypeError;nr.exports=function(hr,dr){var fr=arguments.length<2?or(hr):dr;if(ar(fr))return cr(sr(fr,hr));throw new ur(lr(hr)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/is-array"),cr=rr("../internals/is-callable"),lr=rr("../internals/classof-raw"),or=rr("../internals/to-string"),ur=sr([].push);nr.exports=function(hr){if(cr(hr))return hr;if(ar(hr)){for(var dr=hr.length,fr=[],gr=0;gr<dr;gr++){var br=hr[gr];typeof br=="string"?ur(fr,br):typeof br!="number"&&lr(br)!=="Number"&&lr(br)!=="String"||ur(fr,or(br))}var pr=fr.length,mr=!0;return function(yr,xr){if(mr)return mr=!1,xr;if(ar(this))return xr;for(var vr=0;vr<pr;vr++)if(fr[vr]===yr)return xr}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(rr,nr,ir){var sr=rr("../internals/a-callable"),ar=rr("../internals/is-null-or-undefined");nr.exports=function(cr,lr){var or=cr[lr];return ar(or)?void 0:sr(or)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(rr,nr,ir){(function(sr){(function(){var ar=function(cr){return cr&&cr.Math===Math&&cr};nr.exports=ar(typeof globalThis=="object"&&globalThis)||ar(typeof window=="object"&&window)||ar(typeof self=="object"&&self)||ar(typeof sr=="object"&&sr)||function(){return this}()||this||Function("return this")()}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/to-object"),cr=sr({}.hasOwnProperty);nr.exports=Object.hasOwn||function(lr,or){return cr(ar(lr),or)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(rr,nr,ir){nr.exports={}},{}],277:[function(rr,nr,ir){nr.exports=function(sr,ar){try{arguments.length===1?console.error(sr):console.error(sr,ar)}catch{}}},{}],278:[function(rr,nr,ir){var sr=rr("../internals/get-built-in");nr.exports=sr("document","documentElement")},{"../internals/get-built-in":269}],279:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/fails"),cr=rr("../internals/document-create-element");nr.exports=!sr&&!ar(function(){return Object.defineProperty(cr("div"),"a",{get:function(){return 7}}).a!==7})},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/fails"),cr=rr("../internals/classof-raw"),lr=Object,or=sr("".split);nr.exports=ar(function(){return!lr("z").propertyIsEnumerable(0)})?function(ur){return cr(ur)==="String"?or(ur,""):lr(ur)}:lr},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/is-callable"),cr=rr("../internals/shared-store"),lr=sr(Function.toString);ar(cr.inspectSource)||(cr.inspectSource=function(or){return lr(or)}),nr.exports=cr.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(rr,nr,ir){var sr,ar,cr,lr=rr("../internals/weak-map-basic-detection"),or=rr("../internals/global"),ur=rr("../internals/is-object"),hr=rr("../internals/create-non-enumerable-property"),dr=rr("../internals/has-own-property"),fr=rr("../internals/shared-store"),gr=rr("../internals/shared-key"),br=rr("../internals/hidden-keys"),pr=or.TypeError,mr=or.WeakMap;if(lr||fr.state){var yr=fr.state||(fr.state=new mr);yr.get=yr.get,yr.has=yr.has,yr.set=yr.set,sr=function(vr,_r){if(yr.has(vr))throw new pr("Object already initialized");return _r.facade=vr,yr.set(vr,_r),_r},ar=function(vr){return yr.get(vr)||{}},cr=function(vr){return yr.has(vr)}}else{var xr=gr("state");br[xr]=!0,sr=function(vr,_r){if(dr(vr,xr))throw new pr("Object already initialized");return _r.facade=vr,hr(vr,xr,_r),_r},ar=function(vr){return dr(vr,xr)?vr[xr]:{}},cr=function(vr){return dr(vr,xr)}}nr.exports={set:sr,get:ar,has:cr,enforce:function(vr){return cr(vr)?ar(vr):sr(vr,{})},getterFor:function(vr){return function(_r){var Er;if(!ur(_r)||(Er=ar(_r)).type!==vr)throw new pr("Incompatible receiver, "+vr+" required");return Er}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(rr,nr,ir){var sr=rr("../internals/well-known-symbol"),ar=rr("../internals/iterators"),cr=sr("iterator"),lr=Array.prototype;nr.exports=function(or){return or!==void 0&&(ar.Array===or||lr[cr]===or)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(rr,nr,ir){var sr=rr("../internals/classof-raw");nr.exports=Array.isArray||function(ar){return sr(ar)==="Array"}},{"../internals/classof-raw":235}],285:[function(rr,nr,ir){var sr=rr("../internals/document-all"),ar=sr.all;nr.exports=sr.IS_HTMLDDA?function(cr){return typeof cr=="function"||cr===ar}:function(cr){return typeof cr=="function"}},{"../internals/document-all":248}],286:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/fails"),cr=rr("../internals/is-callable"),lr=rr("../internals/classof"),or=rr("../internals/get-built-in"),ur=rr("../internals/inspect-source"),hr=function(){},dr=[],fr=or("Reflect","construct"),gr=/^\s*(?:class|function)\b/,br=sr(gr.exec),pr=!gr.test(hr),mr=function(xr){if(!cr(xr))return!1;try{return fr(hr,dr,xr),!0}catch{return!1}},yr=function(xr){if(!cr(xr))return!1;switch(lr(xr)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return pr||!!br(gr,ur(xr))}catch{return!0}};yr.sham=!0,nr.exports=!fr||ar(function(){var xr;return mr(mr.call)||!mr(Object)||!mr(function(){xr=!0})||xr})?yr:mr},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(rr,nr,ir){var sr=rr("../internals/fails"),ar=rr("../internals/is-callable"),cr=/#|\.prototype\./,lr=function(fr,gr){var br=ur[or(fr)];return br===dr||br!==hr&&(ar(gr)?sr(gr):!!gr)},or=lr.normalize=function(fr){return String(fr).replace(cr,".").toLowerCase()},ur=lr.data={},hr=lr.NATIVE="N",dr=lr.POLYFILL="P";nr.exports=lr},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(rr,nr,ir){nr.exports=function(sr){return sr==null}},{}],289:[function(rr,nr,ir){var sr=rr("../internals/is-callable"),ar=rr("../internals/document-all"),cr=ar.all;nr.exports=ar.IS_HTMLDDA?function(lr){return typeof lr=="object"?lr!==null:sr(lr)||lr===cr}:function(lr){return typeof lr=="object"?lr!==null:sr(lr)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(rr,nr,ir){nr.exports=!1},{}],291:[function(rr,nr,ir){var sr=rr("../internals/is-object"),ar=rr("../internals/classof-raw"),cr=rr("../internals/well-known-symbol")("match");nr.exports=function(lr){var or;return sr(lr)&&((or=lr[cr])!==void 0?!!or:ar(lr)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(rr,nr,ir){var sr=rr("../internals/get-built-in"),ar=rr("../internals/is-callable"),cr=rr("../internals/object-is-prototype-of"),lr=rr("../internals/use-symbol-as-uid"),or=Object;nr.exports=lr?function(ur){return typeof ur=="symbol"}:function(ur){var hr=sr("Symbol");return ar(hr)&&cr(hr.prototype,or(ur))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(rr,nr,ir){var sr=rr("../internals/function-bind-context"),ar=rr("../internals/function-call"),cr=rr("../internals/an-object"),lr=rr("../internals/try-to-string"),or=rr("../internals/is-array-iterator-method"),ur=rr("../internals/length-of-array-like"),hr=rr("../internals/object-is-prototype-of"),dr=rr("../internals/get-iterator"),fr=rr("../internals/get-iterator-method"),gr=rr("../internals/iterator-close"),br=TypeError,pr=function(yr,xr){this.stopped=yr,this.result=xr},mr=pr.prototype;nr.exports=function(yr,xr,vr){var _r,Er,Tr,Rr,Nr,Dr,Ir,Or=vr&&vr.that,jr=!(!vr||!vr.AS_ENTRIES),Lr=!(!vr||!vr.IS_RECORD),Cr=!(!vr||!vr.IS_ITERATOR),wr=!(!vr||!vr.INTERRUPTED),Pr=sr(xr,Or),Ar=function(Mr){return _r&&gr(_r,"normal",Mr),new pr(!0,Mr)},Sr=function(Mr){return jr?(cr(Mr),wr?Pr(Mr[0],Mr[1],Ar):Pr(Mr[0],Mr[1])):wr?Pr(Mr,Ar):Pr(Mr)};if(Lr)_r=yr.iterator;else if(Cr)_r=yr;else{if(!(Er=fr(yr)))throw new br(lr(yr)+" is not iterable");if(or(Er)){for(Tr=0,Rr=ur(yr);Rr>Tr;Tr++)if((Nr=Sr(yr[Tr]))&&hr(mr,Nr))return Nr;return new pr(!1)}_r=dr(yr,Er)}for(Dr=Lr?yr.next:_r.next;!(Ir=ar(Dr,_r)).done;){try{Nr=Sr(Ir.value)}catch(Mr){gr(_r,"throw",Mr)}if(typeof Nr=="object"&&Nr&&hr(mr,Nr))return Nr}return new pr(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(rr,nr,ir){var sr=rr("../internals/function-call"),ar=rr("../internals/an-object"),cr=rr("../internals/get-method");nr.exports=function(lr,or,ur){var hr,dr;ar(lr);try{if(!(hr=cr(lr,"return"))){if(or==="throw")throw ur;return ur}hr=sr(hr,lr)}catch(fr){dr=!0,hr=fr}if(or==="throw")throw ur;if(dr)throw hr;return ar(hr),ur}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(rr,nr,ir){var sr=rr("../internals/iterators-core").IteratorPrototype,ar=rr("../internals/object-create"),cr=rr("../internals/create-property-descriptor"),lr=rr("../internals/set-to-string-tag"),or=rr("../internals/iterators"),ur=function(){return this};nr.exports=function(hr,dr,fr,gr){var br=dr+" Iterator";return hr.prototype=ar(sr,{next:cr(+!gr,fr)}),lr(hr,br,!1,!0),or[br]=ur,hr}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-call"),cr=rr("../internals/is-pure"),lr=rr("../internals/function-name"),or=rr("../internals/is-callable"),ur=rr("../internals/iterator-create-constructor"),hr=rr("../internals/object-get-prototype-of"),dr=rr("../internals/object-set-prototype-of"),fr=rr("../internals/set-to-string-tag"),gr=rr("../internals/create-non-enumerable-property"),br=rr("../internals/define-built-in"),pr=rr("../internals/well-known-symbol"),mr=rr("../internals/iterators"),yr=rr("../internals/iterators-core"),xr=lr.PROPER,vr=lr.CONFIGURABLE,_r=yr.IteratorPrototype,Er=yr.BUGGY_SAFARI_ITERATORS,Tr=pr("iterator"),Rr=function(){return this};nr.exports=function(Nr,Dr,Ir,Or,jr,Lr,Cr){ur(Ir,Dr,Or);var wr,Pr,Ar,Sr=function(Vr){if(Vr===jr&&zr)return zr;if(!Er&&Vr&&Vr in $r)return $r[Vr];switch(Vr){case"keys":case"values":case"entries":return function(){return new Ir(this,Vr)}}return function(){return new Ir(this)}},Mr=Dr+" Iterator",qr=!1,$r=Nr.prototype,Br=$r[Tr]||$r["@@iterator"]||jr&&$r[jr],zr=!Er&&Br||Sr(jr),Gr=Dr==="Array"&&$r.entries||Br;if(Gr&&(wr=hr(Gr.call(new Nr)))!==Object.prototype&&wr.next&&(cr||hr(wr)===_r||(dr?dr(wr,_r):or(wr[Tr])||br(wr,Tr,Rr)),fr(wr,Mr,!0,!0),cr&&(mr[Mr]=Rr)),xr&&jr==="values"&&Br&&Br.name!=="values"&&(!cr&&vr?gr($r,"name","values"):(qr=!0,zr=function(){return ar(Br,this)})),jr)if(Pr={values:Sr("values"),keys:Lr?zr:Sr("keys"),entries:Sr("entries")},Cr)for(Ar in Pr)(Er||qr||!(Ar in $r))&&br($r,Ar,Pr[Ar]);else sr({target:Dr,proto:!0,forced:Er||qr},Pr);return cr&&!Cr||$r[Tr]===zr||br($r,Tr,zr,{name:jr}),mr[Dr]=zr,Pr}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(rr,nr,ir){var sr,ar,cr,lr=rr("../internals/fails"),or=rr("../internals/is-callable"),ur=rr("../internals/is-object"),hr=rr("../internals/object-create"),dr=rr("../internals/object-get-prototype-of"),fr=rr("../internals/define-built-in"),gr=rr("../internals/well-known-symbol"),br=rr("../internals/is-pure"),pr=gr("iterator"),mr=!1;[].keys&&("next"in(cr=[].keys())?(ar=dr(dr(cr)))!==Object.prototype&&(sr=ar):mr=!0),!ur(sr)||lr(function(){var yr={};return sr[pr].call(yr)!==yr})?sr={}:br&&(sr=hr(sr)),or(sr[pr])||fr(sr,pr,function(){return this}),nr.exports={IteratorPrototype:sr,BUGGY_SAFARI_ITERATORS:mr}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(rr,nr,ir){arguments[4][276][0].apply(ir,arguments)},{dup:276}],299:[function(rr,nr,ir){var sr=rr("../internals/to-length");nr.exports=function(ar){return sr(ar.length)}},{"../internals/to-length":343}],300:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/fails"),cr=rr("../internals/is-callable"),lr=rr("../internals/has-own-property"),or=rr("../internals/descriptors"),ur=rr("../internals/function-name").CONFIGURABLE,hr=rr("../internals/inspect-source"),dr=rr("../internals/internal-state"),fr=dr.enforce,gr=dr.get,br=String,pr=Object.defineProperty,mr=sr("".slice),yr=sr("".replace),xr=sr([].join),vr=or&&!ar(function(){return pr(function(){},"length",{value:8}).length!==8}),_r=String(String).split("String"),Er=nr.exports=function(Tr,Rr,Nr){mr(br(Rr),0,7)==="Symbol("&&(Rr="["+yr(br(Rr),/^Symbol\(([^)]*)\)/,"$1")+"]"),Nr&&Nr.getter&&(Rr="get "+Rr),Nr&&Nr.setter&&(Rr="set "+Rr),(!lr(Tr,"name")||ur&&Tr.name!==Rr)&&(or?pr(Tr,"name",{value:Rr,configurable:!0}):Tr.name=Rr),vr&&Nr&&lr(Nr,"arity")&&Tr.length!==Nr.arity&&pr(Tr,"length",{value:Nr.arity});try{Nr&&lr(Nr,"constructor")&&Nr.constructor?or&&pr(Tr,"prototype",{writable:!1}):Tr.prototype&&(Tr.prototype=void 0)}catch{}var Dr=fr(Tr);return lr(Dr,"source")||(Dr.source=xr(_r,typeof Rr=="string"?Rr:"")),Tr};Function.prototype.toString=Er(function(){return cr(this)&&gr(this).source||hr(this)},"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(rr,nr,ir){var sr=Math.ceil,ar=Math.floor;nr.exports=Math.trunc||function(cr){var lr=+cr;return(lr>0?ar:sr)(lr)}},{}],302:[function(rr,nr,ir){var sr,ar,cr,lr,or,ur=rr("../internals/global"),hr=rr("../internals/function-bind-context"),dr=rr("../internals/object-get-own-property-descriptor").f,fr=rr("../internals/task").set,gr=rr("../internals/queue"),br=rr("../internals/engine-is-ios"),pr=rr("../internals/engine-is-ios-pebble"),mr=rr("../internals/engine-is-webos-webkit"),yr=rr("../internals/engine-is-node"),xr=ur.MutationObserver||ur.WebKitMutationObserver,vr=ur.document,_r=ur.process,Er=ur.Promise,Tr=dr(ur,"queueMicrotask"),Rr=Tr&&Tr.value;if(!Rr){var Nr=new gr,Dr=function(){var Ir,Or;for(yr&&(Ir=_r.domain)&&Ir.exit();Or=Nr.get();)try{Or()}catch(jr){throw Nr.head&&sr(),jr}Ir&&Ir.enter()};br||yr||mr||!xr||!vr?!pr&&Er&&Er.resolve?((lr=Er.resolve(void 0)).constructor=Er,or=hr(lr.then,lr),sr=function(){or(Dr)}):yr?sr=function(){_r.nextTick(Dr)}:(fr=hr(fr,ur),sr=function(){fr(Dr)}):(ar=!0,cr=vr.createTextNode(""),new xr(Dr).observe(cr,{characterData:!0}),sr=function(){cr.data=ar=!ar}),Rr=function(Ir){Nr.head||sr(),Nr.add(Ir)}}nr.exports=Rr},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(rr,nr,ir){var sr=rr("../internals/a-callable"),ar=TypeError,cr=function(lr){var or,ur;this.promise=new lr(function(hr,dr){if(or!==void 0||ur!==void 0)throw new ar("Bad Promise constructor");or=hr,ur=dr}),this.resolve=sr(or),this.reject=sr(ur)};nr.exports.f=function(lr){return new cr(lr)}},{"../internals/a-callable":222}],304:[function(rr,nr,ir){var sr=rr("../internals/is-regexp"),ar=TypeError;nr.exports=function(cr){if(sr(cr))throw new ar("The method doesn't accept regular expressions");return cr}},{"../internals/is-regexp":291}],305:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/function-uncurry-this"),cr=rr("../internals/function-call"),lr=rr("../internals/fails"),or=rr("../internals/object-keys"),ur=rr("../internals/object-get-own-property-symbols"),hr=rr("../internals/object-property-is-enumerable"),dr=rr("../internals/to-object"),fr=rr("../internals/indexed-object"),gr=Object.assign,br=Object.defineProperty,pr=ar([].concat);nr.exports=!gr||lr(function(){if(sr&&gr({b:1},gr(br({},"a",{enumerable:!0,get:function(){br(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var mr={},yr={},xr=Symbol("assign detection");return mr[xr]=7,"abcdefghijklmnopqrst".split("").forEach(function(vr){yr[vr]=vr}),gr({},mr)[xr]!==7||or(gr({},yr)).join("")!=="abcdefghijklmnopqrst"})?function(mr,yr){for(var xr=dr(mr),vr=arguments.length,_r=1,Er=ur.f,Tr=hr.f;vr>_r;)for(var Rr,Nr=fr(arguments[_r++]),Dr=Er?pr(or(Nr),Er(Nr)):or(Nr),Ir=Dr.length,Or=0;Ir>Or;)Rr=Dr[Or++],sr&&!cr(Tr,Nr,Rr)||(xr[Rr]=Nr[Rr]);return xr}:gr},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(rr,nr,ir){var sr,ar=rr("../internals/an-object"),cr=rr("../internals/object-define-properties"),lr=rr("../internals/enum-bug-keys"),or=rr("../internals/hidden-keys"),ur=rr("../internals/html"),hr=rr("../internals/document-create-element"),dr=rr("../internals/shared-key"),fr=dr("IE_PROTO"),gr=function(){},br=function(yr){return"<script>"+yr+"<\/script>"},pr=function(yr){yr.write(br("")),yr.close();var xr=yr.parentWindow.Object;return yr=null,xr},mr=function(){try{sr=new ActiveXObject("htmlfile")}catch{}var yr,xr;mr=typeof document<"u"?document.domain&&sr?pr(sr):((xr=hr("iframe")).style.display="none",ur.appendChild(xr),xr.src="javascript:",(yr=xr.contentWindow.document).open(),yr.write(br("document.F=Object")),yr.close(),yr.F):pr(sr);for(var vr=lr.length;vr--;)delete mr.prototype[lr[vr]];return mr()};or[fr]=!0,nr.exports=Object.create||function(yr,xr){var vr;return yr!==null?(gr.prototype=ar(yr),vr=new gr,gr.prototype=null,vr[fr]=yr):vr=mr(),xr===void 0?vr:cr.f(vr,xr)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/v8-prototype-define-bug"),cr=rr("../internals/object-define-property"),lr=rr("../internals/an-object"),or=rr("../internals/to-indexed-object"),ur=rr("../internals/object-keys");ir.f=sr&&!ar?Object.defineProperties:function(hr,dr){lr(hr);for(var fr,gr=or(dr),br=ur(dr),pr=br.length,mr=0;pr>mr;)cr.f(hr,fr=br[mr++],gr[fr]);return hr}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/ie8-dom-define"),cr=rr("../internals/v8-prototype-define-bug"),lr=rr("../internals/an-object"),or=rr("../internals/to-property-key"),ur=TypeError,hr=Object.defineProperty,dr=Object.getOwnPropertyDescriptor;ir.f=sr?cr?function(fr,gr,br){if(lr(fr),gr=or(gr),lr(br),typeof fr=="function"&&gr==="prototype"&&"value"in br&&"writable"in br&&!br.writable){var pr=dr(fr,gr);pr&&pr.writable&&(fr[gr]=br.value,br={configurable:"configurable"in br?br.configurable:pr.configurable,enumerable:"enumerable"in br?br.enumerable:pr.enumerable,writable:!1})}return hr(fr,gr,br)}:hr:function(fr,gr,br){if(lr(fr),gr=or(gr),lr(br),ar)try{return hr(fr,gr,br)}catch{}if("get"in br||"set"in br)throw new ur("Accessors not supported");return"value"in br&&(fr[gr]=br.value),fr}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/function-call"),cr=rr("../internals/object-property-is-enumerable"),lr=rr("../internals/create-property-descriptor"),or=rr("../internals/to-indexed-object"),ur=rr("../internals/to-property-key"),hr=rr("../internals/has-own-property"),dr=rr("../internals/ie8-dom-define"),fr=Object.getOwnPropertyDescriptor;ir.f=sr?fr:function(gr,br){if(gr=or(gr),br=ur(br),dr)try{return fr(gr,br)}catch{}if(hr(gr,br))return lr(!ar(cr.f,gr,br),gr[br])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(rr,nr,ir){var sr=rr("../internals/classof-raw"),ar=rr("../internals/to-indexed-object"),cr=rr("../internals/object-get-own-property-names").f,lr=rr("../internals/array-slice-simple"),or=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];nr.exports.f=function(ur){return or&&sr(ur)==="Window"?function(hr){try{return cr(hr)}catch{return lr(or)}}(ur):cr(ar(ur))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(rr,nr,ir){var sr=rr("../internals/object-keys-internal"),ar=rr("../internals/enum-bug-keys").concat("length","prototype");ir.f=Object.getOwnPropertyNames||function(cr){return sr(cr,ar)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(rr,nr,ir){ir.f=Object.getOwnPropertySymbols},{}],313:[function(rr,nr,ir){var sr=rr("../internals/has-own-property"),ar=rr("../internals/is-callable"),cr=rr("../internals/to-object"),lr=rr("../internals/shared-key"),or=rr("../internals/correct-prototype-getter"),ur=lr("IE_PROTO"),hr=Object,dr=hr.prototype;nr.exports=or?hr.getPrototypeOf:function(fr){var gr=cr(fr);if(sr(gr,ur))return gr[ur];var br=gr.constructor;return ar(br)&&gr instanceof br?br.prototype:gr instanceof hr?dr:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this");nr.exports=sr({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=rr("../internals/has-own-property"),cr=rr("../internals/to-indexed-object"),lr=rr("../internals/array-includes").indexOf,or=rr("../internals/hidden-keys"),ur=sr([].push);nr.exports=function(hr,dr){var fr,gr=cr(hr),br=0,pr=[];for(fr in gr)!ar(or,fr)&&ar(gr,fr)&&ur(pr,fr);for(;dr.length>br;)ar(gr,fr=dr[br++])&&(~lr(pr,fr)||ur(pr,fr));return pr}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(rr,nr,ir){var sr=rr("../internals/object-keys-internal"),ar=rr("../internals/enum-bug-keys");nr.exports=Object.keys||function(cr){return sr(cr,ar)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(rr,nr,ir){var sr={}.propertyIsEnumerable,ar=Object.getOwnPropertyDescriptor,cr=ar&&!sr.call({1:2},1);ir.f=cr?function(lr){var or=ar(this,lr);return!!or&&or.enumerable}:sr},{}],318:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this-accessor"),ar=rr("../internals/an-object"),cr=rr("../internals/a-possible-prototype");nr.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var lr,or=!1,ur={};try{(lr=sr(Object.prototype,"__proto__","set"))(ur,[]),or=ur instanceof Array}catch{}return function(hr,dr){return ar(hr),cr(dr),or?lr(hr,dr):hr.__proto__=dr,hr}}():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/fails"),cr=rr("../internals/function-uncurry-this"),lr=rr("../internals/object-get-prototype-of"),or=rr("../internals/object-keys"),ur=rr("../internals/to-indexed-object"),hr=cr(rr("../internals/object-property-is-enumerable").f),dr=cr([].push),fr=sr&&ar(function(){var br=Object.create(null);return br[2]=2,!hr(br,2)}),gr=function(br){return function(pr){for(var mr,yr=ur(pr),xr=or(yr),vr=fr&&lr(yr)===null,_r=xr.length,Er=0,Tr=[];_r>Er;)mr=xr[Er++],sr&&!(vr?mr in yr:hr(yr,mr))||dr(Tr,br?[mr,yr[mr]]:yr[mr]);return Tr}};nr.exports={entries:gr(!0),values:gr(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(rr,nr,ir){var sr=rr("../internals/function-call"),ar=rr("../internals/is-callable"),cr=rr("../internals/is-object"),lr=TypeError;nr.exports=function(or,ur){var hr,dr;if(ur==="string"&&ar(hr=or.toString)&&!cr(dr=sr(hr,or))||ar(hr=or.valueOf)&&!cr(dr=sr(hr,or))||ur!=="string"&&ar(hr=or.toString)&&!cr(dr=sr(hr,or)))return dr;throw new lr("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(rr,nr,ir){var sr=rr("../internals/get-built-in"),ar=rr("../internals/function-uncurry-this"),cr=rr("../internals/object-get-own-property-names"),lr=rr("../internals/object-get-own-property-symbols"),or=rr("../internals/an-object"),ur=ar([].concat);nr.exports=sr("Reflect","ownKeys")||function(hr){var dr=cr.f(or(hr)),fr=lr.f;return fr?ur(dr,fr(hr)):dr}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(rr,nr,ir){var sr=rr("../internals/global");nr.exports=sr},{"../internals/global":274}],323:[function(rr,nr,ir){nr.exports=function(sr){try{return{error:!1,value:sr()}}catch(ar){return{error:!0,value:ar}}}},{}],324:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/promise-native-constructor"),cr=rr("../internals/is-callable"),lr=rr("../internals/is-forced"),or=rr("../internals/inspect-source"),ur=rr("../internals/well-known-symbol"),hr=rr("../internals/engine-is-browser"),dr=rr("../internals/engine-is-deno"),fr=rr("../internals/is-pure"),gr=rr("../internals/engine-v8-version"),br=ar&&ar.prototype,pr=ur("species"),mr=!1,yr=cr(sr.PromiseRejectionEvent),xr=lr("Promise",function(){var vr=or(ar),_r=vr!==String(ar);if(!_r&&gr===66||fr&&(!br.catch||!br.finally))return!0;if(!gr||gr<51||!/native code/.test(vr)){var Er=new ar(function(Rr){Rr(1)}),Tr=function(Rr){Rr(function(){},function(){})};if((Er.constructor={})[pr]=Tr,!(mr=Er.then(function(){})instanceof Tr))return!0}return!_r&&(hr||dr)&&!yr});nr.exports={CONSTRUCTOR:xr,REJECTION_EVENT:yr,SUBCLASSING:mr}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(rr,nr,ir){var sr=rr("../internals/global");nr.exports=sr.Promise},{"../internals/global":274}],326:[function(rr,nr,ir){var sr=rr("../internals/an-object"),ar=rr("../internals/is-object"),cr=rr("../internals/new-promise-capability");nr.exports=function(lr,or){if(sr(lr),ar(or)&&or.constructor===lr)return or;var ur=cr.f(lr);return(0,ur.resolve)(or),ur.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(rr,nr,ir){var sr=rr("../internals/promise-native-constructor"),ar=rr("../internals/check-correctness-of-iteration"),cr=rr("../internals/promise-constructor-detection").CONSTRUCTOR;nr.exports=cr||!ar(function(lr){sr.all(lr).then(void 0,function(){})})},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(rr,nr,ir){var sr=function(){this.head=null,this.tail=null};sr.prototype={add:function(ar){var cr={item:ar,next:null},lr=this.tail;lr?lr.next=cr:this.head=cr,this.tail=cr},get:function(){var ar=this.head;if(ar)return(this.head=ar.next)===null&&(this.tail=null),ar.item}},nr.exports=sr},{}],329:[function(rr,nr,ir){var sr=rr("../internals/is-null-or-undefined"),ar=TypeError;nr.exports=function(cr){if(sr(cr))throw new ar("Can't call method on "+cr);return cr}},{"../internals/is-null-or-undefined":288}],330:[function(rr,nr,ir){var sr=rr("../internals/get-built-in"),ar=rr("../internals/define-built-in-accessor"),cr=rr("../internals/well-known-symbol"),lr=rr("../internals/descriptors"),or=cr("species");nr.exports=function(ur){var hr=sr(ur);lr&&hr&&!hr[or]&&ar(hr,or,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(rr,nr,ir){var sr=rr("../internals/object-define-property").f,ar=rr("../internals/has-own-property"),cr=rr("../internals/well-known-symbol")("toStringTag");nr.exports=function(lr,or,ur){lr&&!ur&&(lr=lr.prototype),lr&&!ar(lr,cr)&&sr(lr,cr,{configurable:!0,value:or})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(rr,nr,ir){var sr=rr("../internals/shared"),ar=rr("../internals/uid"),cr=sr("keys");nr.exports=function(lr){return cr[lr]||(cr[lr]=ar(lr))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/define-global-property"),cr=sr["__core-js_shared__"]||ar("__core-js_shared__",{});nr.exports=cr},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(rr,nr,ir){var sr=rr("../internals/is-pure"),ar=rr("../internals/shared-store");(nr.exports=function(cr,lr){return ar[cr]||(ar[cr]=lr!==void 0?lr:{})})("versions",[]).push({version:"3.33.0",mode:sr?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(rr,nr,ir){var sr=rr("../internals/an-object"),ar=rr("../internals/a-constructor"),cr=rr("../internals/is-null-or-undefined"),lr=rr("../internals/well-known-symbol")("species");nr.exports=function(or,ur){var hr,dr=sr(or).constructor;return dr===void 0||cr(hr=sr(dr)[lr])?ur:ar(hr)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(rr,nr,ir){var sr=rr("../internals/engine-v8-version"),ar=rr("../internals/fails"),cr=rr("../internals/global").String;nr.exports=!!Object.getOwnPropertySymbols&&!ar(function(){var lr=Symbol("symbol detection");return!cr(lr)||!(Object(lr)instanceof Symbol)||!Symbol.sham&&sr&&sr<41})},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(rr,nr,ir){var sr=rr("../internals/function-call"),ar=rr("../internals/get-built-in"),cr=rr("../internals/well-known-symbol"),lr=rr("../internals/define-built-in");nr.exports=function(){var or=ar("Symbol"),ur=or&&or.prototype,hr=ur&&ur.valueOf,dr=cr("toPrimitive");ur&&!ur[dr]&&lr(ur,dr,function(fr){return sr(hr,this)},{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(rr,nr,ir){var sr=rr("../internals/symbol-constructor-detection");nr.exports=sr&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(rr,nr,ir){var sr,ar,cr,lr,or=rr("../internals/global"),ur=rr("../internals/function-apply"),hr=rr("../internals/function-bind-context"),dr=rr("../internals/is-callable"),fr=rr("../internals/has-own-property"),gr=rr("../internals/fails"),br=rr("../internals/html"),pr=rr("../internals/array-slice"),mr=rr("../internals/document-create-element"),yr=rr("../internals/validate-arguments-length"),xr=rr("../internals/engine-is-ios"),vr=rr("../internals/engine-is-node"),_r=or.setImmediate,Er=or.clearImmediate,Tr=or.process,Rr=or.Dispatch,Nr=or.Function,Dr=or.MessageChannel,Ir=or.String,Or=0,jr={};gr(function(){sr=or.location});var Lr=function(Ar){if(fr(jr,Ar)){var Sr=jr[Ar];delete jr[Ar],Sr()}},Cr=function(Ar){return function(){Lr(Ar)}},wr=function(Ar){Lr(Ar.data)},Pr=function(Ar){or.postMessage(Ir(Ar),sr.protocol+"//"+sr.host)};_r&&Er||(_r=function(Ar){yr(arguments.length,1);var Sr=dr(Ar)?Ar:Nr(Ar),Mr=pr(arguments,1);return jr[++Or]=function(){ur(Sr,void 0,Mr)},ar(Or),Or},Er=function(Ar){delete jr[Ar]},vr?ar=function(Ar){Tr.nextTick(Cr(Ar))}:Rr&&Rr.now?ar=function(Ar){Rr.now(Cr(Ar))}:Dr&&!xr?(lr=(cr=new Dr).port2,cr.port1.onmessage=wr,ar=hr(lr.postMessage,lr)):or.addEventListener&&dr(or.postMessage)&&!or.importScripts&&sr&&sr.protocol!=="file:"&&!gr(Pr)?(ar=Pr,or.addEventListener("message",wr,!1)):ar="onreadystatechange"in mr("script")?function(Ar){br.appendChild(mr("script")).onreadystatechange=function(){br.removeChild(this),Lr(Ar)}}:function(Ar){setTimeout(Cr(Ar),0)}),nr.exports={set:_r,clear:Er}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(rr,nr,ir){var sr=rr("../internals/to-integer-or-infinity"),ar=Math.max,cr=Math.min;nr.exports=function(lr,or){var ur=sr(lr);return ur<0?ar(ur+or,0):cr(ur,or)}},{"../internals/to-integer-or-infinity":342}],341:[function(rr,nr,ir){var sr=rr("../internals/indexed-object"),ar=rr("../internals/require-object-coercible");nr.exports=function(cr){return sr(ar(cr))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(rr,nr,ir){var sr=rr("../internals/math-trunc");nr.exports=function(ar){var cr=+ar;return cr!=cr||cr===0?0:sr(cr)}},{"../internals/math-trunc":301}],343:[function(rr,nr,ir){var sr=rr("../internals/to-integer-or-infinity"),ar=Math.min;nr.exports=function(cr){return cr>0?ar(sr(cr),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(rr,nr,ir){var sr=rr("../internals/require-object-coercible"),ar=Object;nr.exports=function(cr){return ar(sr(cr))}},{"../internals/require-object-coercible":329}],345:[function(rr,nr,ir){var sr=rr("../internals/function-call"),ar=rr("../internals/is-object"),cr=rr("../internals/is-symbol"),lr=rr("../internals/get-method"),or=rr("../internals/ordinary-to-primitive"),ur=rr("../internals/well-known-symbol"),hr=TypeError,dr=ur("toPrimitive");nr.exports=function(fr,gr){if(!ar(fr)||cr(fr))return fr;var br,pr=lr(fr,dr);if(pr){if(gr===void 0&&(gr="default"),br=sr(pr,fr,gr),!ar(br)||cr(br))return br;throw new hr("Can't convert object to primitive value")}return gr===void 0&&(gr="number"),or(fr,gr)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(rr,nr,ir){var sr=rr("../internals/to-primitive"),ar=rr("../internals/is-symbol");nr.exports=function(cr){var lr=sr(cr,"string");return ar(lr)?lr:lr+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(rr,nr,ir){var sr={};sr[rr("../internals/well-known-symbol")("toStringTag")]="z",nr.exports=String(sr)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(rr,nr,ir){var sr=rr("../internals/classof"),ar=String;nr.exports=function(cr){if(sr(cr)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return ar(cr)}},{"../internals/classof":236}],349:[function(rr,nr,ir){var sr=String;nr.exports=function(ar){try{return sr(ar)}catch{return"Object"}}},{}],350:[function(rr,nr,ir){var sr=rr("../internals/function-uncurry-this"),ar=0,cr=Math.random(),lr=sr(1 .toString);nr.exports=function(or){return"Symbol("+(or===void 0?"":or)+")_"+lr(++ar+cr,36)}},{"../internals/function-uncurry-this":268}],351:[function(rr,nr,ir){var sr=rr("../internals/symbol-constructor-detection");nr.exports=sr&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(rr,nr,ir){var sr=rr("../internals/descriptors"),ar=rr("../internals/fails");nr.exports=sr&&ar(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(rr,nr,ir){var sr=TypeError;nr.exports=function(ar,cr){if(ar<cr)throw new sr("Not enough arguments");return ar}},{}],354:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/is-callable"),cr=sr.WeakMap;nr.exports=ar(cr)&&/native code/.test(String(cr))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(rr,nr,ir){var sr=rr("../internals/path"),ar=rr("../internals/has-own-property"),cr=rr("../internals/well-known-symbol-wrapped"),lr=rr("../internals/object-define-property").f;nr.exports=function(or){var ur=sr.Symbol||(sr.Symbol={});ar(ur,or)||lr(ur,or,{value:cr.f(or)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(rr,nr,ir){var sr=rr("../internals/well-known-symbol");ir.f=sr},{"../internals/well-known-symbol":357}],357:[function(rr,nr,ir){var sr=rr("../internals/global"),ar=rr("../internals/shared"),cr=rr("../internals/has-own-property"),lr=rr("../internals/uid"),or=rr("../internals/symbol-constructor-detection"),ur=rr("../internals/use-symbol-as-uid"),hr=sr.Symbol,dr=ar("wks"),fr=ur?hr.for||hr:hr&&hr.withoutSetter||lr;nr.exports=function(gr){return cr(dr,gr)||(dr[gr]=or&&cr(hr,gr)?hr[gr]:fr("Symbol."+gr)),dr[gr]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/array-iteration").findIndex,cr=rr("../internals/add-to-unscopables"),lr=!0;"findIndex"in[]&&Array(1).findIndex(function(){lr=!1}),sr({target:"Array",proto:!0,forced:lr},{findIndex:function(or){return ar(this,or,arguments.length>1?arguments[1]:void 0)}}),cr("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/array-iteration").find,cr=rr("../internals/add-to-unscopables"),lr=!0;"find"in[]&&Array(1).find(function(){lr=!1}),sr({target:"Array",proto:!0,forced:lr},{find:function(or){return ar(this,or,arguments.length>1?arguments[1]:void 0)}}),cr("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/array-includes").includes,cr=rr("../internals/fails"),lr=rr("../internals/add-to-unscopables");sr({target:"Array",proto:!0,forced:cr(function(){return!Array(1).includes()})},{includes:function(or){return ar(this,or,arguments.length>1?arguments[1]:void 0)}}),lr("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(rr,nr,ir){var sr=rr("../internals/to-indexed-object"),ar=rr("../internals/add-to-unscopables"),cr=rr("../internals/iterators"),lr=rr("../internals/internal-state"),or=rr("../internals/object-define-property").f,ur=rr("../internals/iterator-define"),hr=rr("../internals/create-iter-result-object"),dr=rr("../internals/is-pure"),fr=rr("../internals/descriptors"),gr=lr.set,br=lr.getterFor("Array Iterator");nr.exports=ur(Array,"Array",function(mr,yr){gr(this,{type:"Array Iterator",target:sr(mr),index:0,kind:yr})},function(){var mr=br(this),yr=mr.target,xr=mr.kind,vr=mr.index++;if(!yr||vr>=yr.length)return mr.target=void 0,hr(void 0,!0);switch(xr){case"keys":return hr(vr,!1);case"values":return hr(yr[vr],!1)}return hr([vr,yr[vr]],!1)},"values");var pr=cr.Arguments=cr.Array;if(ar("keys"),ar("values"),ar("entries"),!dr&&fr&&pr.name!=="values")try{or(pr,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/get-built-in"),cr=rr("../internals/function-apply"),lr=rr("../internals/function-call"),or=rr("../internals/function-uncurry-this"),ur=rr("../internals/fails"),hr=rr("../internals/is-callable"),dr=rr("../internals/is-symbol"),fr=rr("../internals/array-slice"),gr=rr("../internals/get-json-replacer-function"),br=rr("../internals/symbol-constructor-detection"),pr=String,mr=ar("JSON","stringify"),yr=or(/./.exec),xr=or("".charAt),vr=or("".charCodeAt),_r=or("".replace),Er=or(1 .toString),Tr=/[\uD800-\uDFFF]/g,Rr=/^[\uD800-\uDBFF]$/,Nr=/^[\uDC00-\uDFFF]$/,Dr=!br||ur(function(){var Lr=ar("Symbol")("stringify detection");return mr([Lr])!=="[null]"||mr({a:Lr})!=="{}"||mr(Object(Lr))!=="{}"}),Ir=ur(function(){return mr("\uDF06\uD834")!=='"\\udf06\\ud834"'||mr("\uDEAD")!=='"\\udead"'}),Or=function(Lr,Cr){var wr=fr(arguments),Pr=gr(Cr);if(hr(Pr)||Lr!==void 0&&!dr(Lr))return wr[1]=function(Ar,Sr){if(hr(Pr)&&(Sr=lr(Pr,this,pr(Ar),Sr)),!dr(Sr))return Sr},cr(mr,null,wr)},jr=function(Lr,Cr,wr){var Pr=xr(wr,Cr-1),Ar=xr(wr,Cr+1);return yr(Rr,Lr)&&!yr(Nr,Ar)||yr(Nr,Lr)&&!yr(Rr,Pr)?"\\u"+Er(vr(Lr,0),16):Lr};mr&&sr({target:"JSON",stat:!0,arity:3,forced:Dr||Ir},{stringify:function(Lr,Cr,wr){var Pr=fr(arguments),Ar=cr(Dr?Or:mr,null,Pr);return Ir&&typeof Ar=="string"?_r(Ar,Tr,jr):Ar}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(rr,nr,ir){rr("../internals/export")({target:"Number",stat:!0},{isNaN:function(sr){return sr!=sr}})},{"../internals/export":259}],364:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/object-assign");sr({target:"Object",stat:!0,arity:2,forced:Object.assign!==ar},{assign:ar})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/symbol-constructor-detection"),cr=rr("../internals/fails"),lr=rr("../internals/object-get-own-property-symbols"),or=rr("../internals/to-object");sr({target:"Object",stat:!0,forced:!ar||cr(function(){lr.f(1)})},{getOwnPropertySymbols:function(ur){var hr=lr.f;return hr?hr(or(ur)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/to-object"),cr=rr("../internals/object-keys");sr({target:"Object",stat:!0,forced:rr("../internals/fails")(function(){cr(1)})},{keys:function(lr){return cr(ar(lr))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/object-to-array").values;sr({target:"Object",stat:!0},{values:function(cr){return ar(cr)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-call"),cr=rr("../internals/a-callable"),lr=rr("../internals/new-promise-capability"),or=rr("../internals/perform"),ur=rr("../internals/iterate");sr({target:"Promise",stat:!0,forced:rr("../internals/promise-statics-incorrect-iteration")},{all:function(hr){var dr=this,fr=lr.f(dr),gr=fr.resolve,br=fr.reject,pr=or(function(){var mr=cr(dr.resolve),yr=[],xr=0,vr=1;ur(hr,function(_r){var Er=xr++,Tr=!1;vr++,ar(mr,dr,_r).then(function(Rr){Tr||(Tr=!0,yr[Er]=Rr,--vr||gr(yr))},br)}),--vr||gr(yr)});return pr.error&&br(pr.value),fr.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/is-pure"),cr=rr("../internals/promise-constructor-detection").CONSTRUCTOR,lr=rr("../internals/promise-native-constructor"),or=rr("../internals/get-built-in"),ur=rr("../internals/is-callable"),hr=rr("../internals/define-built-in"),dr=lr&&lr.prototype;if(sr({target:"Promise",proto:!0,forced:cr,real:!0},{catch:function(gr){return this.then(void 0,gr)}}),!ar&&ur(lr)){var fr=or("Promise").prototype.catch;dr.catch!==fr&&hr(dr,"catch",fr,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(rr,nr,ir){var sr,ar,cr,lr=rr("../internals/export"),or=rr("../internals/is-pure"),ur=rr("../internals/engine-is-node"),hr=rr("../internals/global"),dr=rr("../internals/function-call"),fr=rr("../internals/define-built-in"),gr=rr("../internals/object-set-prototype-of"),br=rr("../internals/set-to-string-tag"),pr=rr("../internals/set-species"),mr=rr("../internals/a-callable"),yr=rr("../internals/is-callable"),xr=rr("../internals/is-object"),vr=rr("../internals/an-instance"),_r=rr("../internals/species-constructor"),Er=rr("../internals/task").set,Tr=rr("../internals/microtask"),Rr=rr("../internals/host-report-errors"),Nr=rr("../internals/perform"),Dr=rr("../internals/queue"),Ir=rr("../internals/internal-state"),Or=rr("../internals/promise-native-constructor"),jr=rr("../internals/promise-constructor-detection"),Lr=rr("../internals/new-promise-capability"),Cr=jr.CONSTRUCTOR,wr=jr.REJECTION_EVENT,Pr=jr.SUBCLASSING,Ar=Ir.getterFor("Promise"),Sr=Ir.set,Mr=Or&&Or.prototype,qr=Or,$r=Mr,Br=hr.TypeError,zr=hr.document,Gr=hr.process,Vr=Lr.f,Xr=Vr,Ur=!!(zr&&zr.createEvent&&hr.dispatchEvent),Fr=function(on){var fn;return!(!xr(on)||!yr(fn=on.then))&&fn},Kr=function(on,fn){var pn,gn,Pn,In=fn.value,En=fn.state===1,zn=En?on.ok:on.fail,yn=on.resolve,Vn=on.reject,Kn=on.domain;try{zn?(En||(fn.rejection===2&&dn(fn),fn.rejection=1),zn===!0?pn=In:(Kn&&Kn.enter(),pn=zn(In),Kn&&(Kn.exit(),Pn=!0)),pn===on.promise?Vn(new Br("Promise-chain cycle")):(gn=Fr(pn))?dr(gn,pn,yn,Vn):yn(pn)):Vn(In)}catch(es){Kn&&!Pn&&Kn.exit(),Vn(es)}},Zr=function(on,fn){on.notified||(on.notified=!0,Tr(function(){for(var pn,gn=on.reactions;pn=gn.get();)Kr(pn,on);on.notified=!1,fn&&!on.rejection&&tn(on)}))},Jr=function(on,fn,pn){var gn,Pn;Ur?((gn=zr.createEvent("Event")).promise=fn,gn.reason=pn,gn.initEvent(on,!1,!0),hr.dispatchEvent(gn)):gn={promise:fn,reason:pn},!wr&&(Pn=hr["on"+on])?Pn(gn):on==="unhandledrejection"&&Rr("Unhandled promise rejection",pn)},tn=function(on){dr(Er,hr,function(){var fn,pn=on.facade,gn=on.value;if(an(on)&&(fn=Nr(function(){ur?Gr.emit("unhandledRejection",gn,pn):Jr("unhandledrejection",pn,gn)}),on.rejection=ur||an(on)?2:1,fn.error))throw fn.value})},an=function(on){return on.rejection!==1&&!on.parent},dn=function(on){dr(Er,hr,function(){var fn=on.facade;ur?Gr.emit("rejectionHandled",fn):Jr("rejectionhandled",fn,on.value)})},en=function(on,fn,pn){return function(gn){on(fn,gn,pn)}},rn=function(on,fn,pn){on.done||(on.done=!0,pn&&(on=pn),on.value=fn,on.state=2,Zr(on,!0))},sn=function(on,fn,pn){if(!on.done){on.done=!0,pn&&(on=pn);try{if(on.facade===fn)throw new Br("Promise can't be resolved itself");var gn=Fr(fn);gn?Tr(function(){var Pn={done:!1};try{dr(gn,fn,en(sn,Pn,on),en(rn,Pn,on))}catch(In){rn(Pn,In,on)}}):(on.value=fn,on.state=1,Zr(on,!1))}catch(Pn){rn({done:!1},Pn,on)}}};if(Cr&&($r=(qr=function(on){vr(this,$r),mr(on),dr(sr,this);var fn=Ar(this);try{on(en(sn,fn),en(rn,fn))}catch(pn){rn(fn,pn)}}).prototype,(sr=function(on){Sr(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Dr,rejection:!1,state:0,value:void 0})}).prototype=fr($r,"then",function(on,fn){var pn=Ar(this),gn=Vr(_r(this,qr));return pn.parent=!0,gn.ok=!yr(on)||on,gn.fail=yr(fn)&&fn,gn.domain=ur?Gr.domain:void 0,pn.state===0?pn.reactions.add(gn):Tr(function(){Kr(gn,pn)}),gn.promise}),ar=function(){var on=new sr,fn=Ar(on);this.promise=on,this.resolve=en(sn,fn),this.reject=en(rn,fn)},Lr.f=Vr=function(on){return on===qr||on===void 0?new ar(on):Xr(on)},!or&&yr(Or)&&Mr!==Object.prototype)){cr=Mr.then,Pr||fr(Mr,"then",function(on,fn){var pn=this;return new qr(function(gn,Pn){dr(cr,pn,gn,Pn)}).then(on,fn)},{unsafe:!0});try{delete Mr.constructor}catch{}gr&&gr(Mr,$r)}lr({global:!0,constructor:!0,wrap:!0,forced:Cr},{Promise:qr}),br(qr,"Promise",!1,!0),pr("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/is-pure"),cr=rr("../internals/promise-native-constructor"),lr=rr("../internals/fails"),or=rr("../internals/get-built-in"),ur=rr("../internals/is-callable"),hr=rr("../internals/species-constructor"),dr=rr("../internals/promise-resolve"),fr=rr("../internals/define-built-in"),gr=cr&&cr.prototype;if(sr({target:"Promise",proto:!0,real:!0,forced:!!cr&&lr(function(){gr.finally.call({then:function(){}},function(){})})},{finally:function(pr){var mr=hr(this,or("Promise")),yr=ur(pr);return this.then(yr?function(xr){return dr(mr,pr()).then(function(){return xr})}:pr,yr?function(xr){return dr(mr,pr()).then(function(){throw xr})}:pr)}}),!ar&&ur(cr)){var br=or("Promise").prototype.finally;gr.finally!==br&&fr(gr,"finally",br,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(rr,nr,ir){rr("../modules/es.promise.constructor"),rr("../modules/es.promise.all"),rr("../modules/es.promise.catch"),rr("../modules/es.promise.race"),rr("../modules/es.promise.reject"),rr("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-call"),cr=rr("../internals/a-callable"),lr=rr("../internals/new-promise-capability"),or=rr("../internals/perform"),ur=rr("../internals/iterate");sr({target:"Promise",stat:!0,forced:rr("../internals/promise-statics-incorrect-iteration")},{race:function(hr){var dr=this,fr=lr.f(dr),gr=fr.reject,br=or(function(){var pr=cr(dr.resolve);ur(hr,function(mr){ar(pr,dr,mr).then(fr.resolve,gr)})});return br.error&&gr(br.value),fr.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-call"),cr=rr("../internals/new-promise-capability");sr({target:"Promise",stat:!0,forced:rr("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(lr){var or=cr.f(this);return ar(or.reject,void 0,lr),or.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/get-built-in"),cr=rr("../internals/is-pure"),lr=rr("../internals/promise-native-constructor"),or=rr("../internals/promise-constructor-detection").CONSTRUCTOR,ur=rr("../internals/promise-resolve"),hr=ar("Promise"),dr=cr&&!or;sr({target:"Promise",stat:!0,forced:cr||or},{resolve:function(fr){return ur(dr&&this===hr?lr:this,fr)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-uncurry-this"),cr=rr("../internals/to-absolute-index"),lr=RangeError,or=String.fromCharCode,ur=String.fromCodePoint,hr=ar([].join);sr({target:"String",stat:!0,arity:1,forced:!!ur&&ur.length!==1},{fromCodePoint:function(dr){for(var fr,gr=[],br=arguments.length,pr=0;br>pr;){if(fr=+arguments[pr++],cr(fr,1114111)!==fr)throw new lr(fr+" is not a valid code point");gr[pr]=fr<65536?or(fr):or(55296+((fr-=65536)>>10),fr%1024+56320)}return hr(gr,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/function-uncurry-this"),cr=rr("../internals/not-a-regexp"),lr=rr("../internals/require-object-coercible"),or=rr("../internals/to-string"),ur=rr("../internals/correct-is-regexp-logic"),hr=ar("".indexOf);sr({target:"String",proto:!0,forced:!ur("includes")},{includes:function(dr){return!!~hr(or(lr(this)),or(cr(dr)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(rr,nr,ir){rr("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/global"),cr=rr("../internals/function-call"),lr=rr("../internals/function-uncurry-this"),or=rr("../internals/is-pure"),ur=rr("../internals/descriptors"),hr=rr("../internals/symbol-constructor-detection"),dr=rr("../internals/fails"),fr=rr("../internals/has-own-property"),gr=rr("../internals/object-is-prototype-of"),br=rr("../internals/an-object"),pr=rr("../internals/to-indexed-object"),mr=rr("../internals/to-property-key"),yr=rr("../internals/to-string"),xr=rr("../internals/create-property-descriptor"),vr=rr("../internals/object-create"),_r=rr("../internals/object-keys"),Er=rr("../internals/object-get-own-property-names"),Tr=rr("../internals/object-get-own-property-names-external"),Rr=rr("../internals/object-get-own-property-symbols"),Nr=rr("../internals/object-get-own-property-descriptor"),Dr=rr("../internals/object-define-property"),Ir=rr("../internals/object-define-properties"),Or=rr("../internals/object-property-is-enumerable"),jr=rr("../internals/define-built-in"),Lr=rr("../internals/define-built-in-accessor"),Cr=rr("../internals/shared"),wr=rr("../internals/shared-key"),Pr=rr("../internals/hidden-keys"),Ar=rr("../internals/uid"),Sr=rr("../internals/well-known-symbol"),Mr=rr("../internals/well-known-symbol-wrapped"),qr=rr("../internals/well-known-symbol-define"),$r=rr("../internals/symbol-define-to-primitive"),Br=rr("../internals/set-to-string-tag"),zr=rr("../internals/internal-state"),Gr=rr("../internals/array-iteration").forEach,Vr=wr("hidden"),Xr=zr.set,Ur=zr.getterFor("Symbol"),Fr=Object.prototype,Kr=ar.Symbol,Zr=Kr&&Kr.prototype,Jr=ar.RangeError,tn=ar.TypeError,an=ar.QObject,dn=Nr.f,en=Dr.f,rn=Tr.f,sn=Or.f,on=lr([].push),fn=Cr("symbols"),pn=Cr("op-symbols"),gn=Cr("wks"),Pn=!an||!an.prototype||!an.prototype.findChild,In=function(fs,os,Hn){var Ln=dn(Fr,os);Ln&&delete Fr[os],en(fs,os,Hn),Ln&&fs!==Fr&&en(Fr,os,Ln)},En=ur&&dr(function(){return vr(en({},"a",{get:function(){return en(this,"a",{value:7}).a}})).a!==7})?In:en,zn=function(fs,os){var Hn=fn[fs]=vr(Zr);return Xr(Hn,{type:"Symbol",tag:fs,description:os}),ur||(Hn.description=os),Hn},yn=function(fs,os,Hn){fs===Fr&&yn(pn,os,Hn),br(fs);var Ln=mr(os);return br(Hn),fr(fn,Ln)?(Hn.enumerable?(fr(fs,Vr)&&fs[Vr][Ln]&&(fs[Vr][Ln]=!1),Hn=vr(Hn,{enumerable:xr(0,!1)})):(fr(fs,Vr)||en(fs,Vr,xr(1,{})),fs[Vr][Ln]=!0),En(fs,Ln,Hn)):en(fs,Ln,Hn)},Vn=function(fs,os){br(fs);var Hn=pr(os),Ln=_r(Hn).concat(ds(Hn));return Gr(Ln,function(Dn){ur&&!cr(Kn,Hn,Dn)||yn(fs,Dn,Hn[Dn])}),fs},Kn=function(fs){var os=mr(fs),Hn=cr(sn,this,os);return!(this===Fr&&fr(fn,os)&&!fr(pn,os))&&(!(Hn||!fr(this,os)||!fr(fn,os)||fr(this,Vr)&&this[Vr][os])||Hn)},es=function(fs,os){var Hn=pr(fs),Ln=mr(os);if(Hn!==Fr||!fr(fn,Ln)||fr(pn,Ln)){var Dn=dn(Hn,Ln);return!Dn||!fr(fn,Ln)||fr(Hn,Vr)&&Hn[Vr][Ln]||(Dn.enumerable=!0),Dn}},Xn=function(fs){var os=rn(pr(fs)),Hn=[];return Gr(os,function(Ln){fr(fn,Ln)||fr(Pr,Ln)||on(Hn,Ln)}),Hn},ds=function(fs){var os=fs===Fr,Hn=rn(os?pn:pr(fs)),Ln=[];return Gr(Hn,function(Dn){!fr(fn,Dn)||os&&!fr(Fr,Dn)||on(Ln,fn[Dn])}),Ln};hr||(jr(Zr=(Kr=function(){if(gr(Zr,this))throw new tn("Symbol is not a constructor");var fs=arguments.length&&arguments[0]!==void 0?yr(arguments[0]):void 0,os=Ar(fs),Hn=function(Ln){this===Fr&&cr(Hn,pn,Ln),fr(this,Vr)&&fr(this[Vr],os)&&(this[Vr][os]=!1);var Dn=xr(1,Ln);try{En(this,os,Dn)}catch(ls){if(!(ls instanceof Jr))throw ls;In(this,os,Dn)}};return ur&&Pn&&En(Fr,os,{configurable:!0,set:Hn}),zn(os,fs)}).prototype,"toString",function(){return Ur(this).tag}),jr(Kr,"withoutSetter",function(fs){return zn(Ar(fs),fs)}),Or.f=Kn,Dr.f=yn,Ir.f=Vn,Nr.f=es,Er.f=Tr.f=Xn,Rr.f=ds,Mr.f=function(fs){return zn(Sr(fs),fs)},ur&&(Lr(Zr,"description",{configurable:!0,get:function(){return Ur(this).description}}),or||jr(Fr,"propertyIsEnumerable",Kn,{unsafe:!0}))),sr({global:!0,constructor:!0,wrap:!0,forced:!hr,sham:!hr},{Symbol:Kr}),Gr(_r(gn),function(fs){qr(fs)}),sr({target:"Symbol",stat:!0,forced:!hr},{useSetter:function(){Pn=!0},useSimple:function(){Pn=!1}}),sr({target:"Object",stat:!0,forced:!hr,sham:!ur},{create:function(fs,os){return os===void 0?vr(fs):Vn(vr(fs),os)},defineProperty:yn,defineProperties:Vn,getOwnPropertyDescriptor:es}),sr({target:"Object",stat:!0,forced:!hr},{getOwnPropertyNames:Xn}),$r(),Br(Kr,"Symbol"),Pr[Vr]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/get-built-in"),cr=rr("../internals/has-own-property"),lr=rr("../internals/to-string"),or=rr("../internals/shared"),ur=rr("../internals/symbol-registry-detection"),hr=or("string-to-symbol-registry"),dr=or("symbol-to-string-registry");sr({target:"Symbol",stat:!0,forced:!ur},{for:function(fr){var gr=lr(fr);if(cr(hr,gr))return hr[gr];var br=ar("Symbol")(gr);return hr[gr]=br,dr[br]=gr,br}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(rr,nr,ir){rr("../modules/es.symbol.constructor"),rr("../modules/es.symbol.for"),rr("../modules/es.symbol.key-for"),rr("../modules/es.json.stringify"),rr("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(rr,nr,ir){var sr=rr("../internals/export"),ar=rr("../internals/has-own-property"),cr=rr("../internals/is-symbol"),lr=rr("../internals/try-to-string"),or=rr("../internals/shared"),ur=rr("../internals/symbol-registry-detection"),hr=or("symbol-to-string-registry");sr({target:"Symbol",stat:!0,forced:!ur},{keyFor:function(dr){if(!cr(dr))throw new TypeError(lr(dr)+" is not a symbol");if(ar(hr,dr))return hr[dr]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(rr,nr,ir){function sr(ar){return Object.prototype.toString.call(ar)}ir.isArray=function(ar){return Array.isArray?Array.isArray(ar):sr(ar)==="[object Array]"},ir.isBoolean=function(ar){return typeof ar=="boolean"},ir.isNull=function(ar){return ar===null},ir.isNullOrUndefined=function(ar){return ar==null},ir.isNumber=function(ar){return typeof ar=="number"},ir.isString=function(ar){return typeof ar=="string"},ir.isSymbol=function(ar){return typeof ar=="symbol"},ir.isUndefined=function(ar){return ar===void 0},ir.isRegExp=function(ar){return sr(ar)==="[object RegExp]"},ir.isObject=function(ar){return typeof ar=="object"&&ar!==null},ir.isDate=function(ar){return sr(ar)==="[object Date]"},ir.isError=function(ar){return sr(ar)==="[object Error]"||ar instanceof Error},ir.isFunction=function(ar){return typeof ar=="function"},ir.isPrimitive=function(ar){return ar===null||typeof ar=="boolean"||typeof ar=="number"||typeof ar=="string"||typeof ar=="symbol"||ar===void 0},ir.isBuffer=rr("buffer").Buffer.isBuffer},{buffer:220}],384:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("elliptic"),cr=rr("bn.js");nr.exports=function(hr){return new or(hr)};var lr={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function or(hr){this.curveType=lr[hr],this.curveType||(this.curveType={name:hr}),this.curve=new ar.ec(this.curveType.name),this.keys=void 0}function ur(hr,dr,fr){Array.isArray(hr)||(hr=hr.toArray());var gr=new sr(hr);if(fr&&gr.length<fr){var br=new sr(fr-gr.length);br.fill(0),gr=sr.concat([br,gr])}return dr?gr.toString(dr):gr}lr.p224=lr.secp224r1,lr.p256=lr.secp256r1=lr.prime256v1,lr.p192=lr.secp192r1=lr.prime192v1,lr.p384=lr.secp384r1,lr.p521=lr.secp521r1,or.prototype.generateKeys=function(hr,dr){return this.keys=this.curve.genKeyPair(),this.getPublicKey(hr,dr)},or.prototype.computeSecret=function(hr,dr,fr){return dr=dr||"utf8",sr.isBuffer(hr)||(hr=new sr(hr,dr)),ur(this.curve.keyFromPublic(hr).getPublic().mul(this.keys.getPrivate()).getX(),fr,this.curveType.byteLength)},or.prototype.getPublicKey=function(hr,dr){var fr=this.keys.getPublic(dr==="compressed",!0);return dr==="hybrid"&&(fr[fr.length-1]%2?fr[0]=7:fr[0]=6),ur(fr,hr)},or.prototype.getPrivateKey=function(hr){return ur(this.keys.getPrivate(),hr)},or.prototype.setPublicKey=function(hr,dr){return dr=dr||"utf8",sr.isBuffer(hr)||(hr=new sr(hr,dr)),this.keys._importPublic(hr),this},or.prototype.setPrivateKey=function(hr,dr){dr=dr||"utf8",sr.isBuffer(hr)||(hr=new sr(hr,dr));var fr=new cr(hr);return fr=fr.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(fr),this}}).call(this)}).call(this,rr("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(rr,nr,ir){arguments[4][184][0].apply(ir,arguments)},{buffer:188,dup:184}],386:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("md5.js"),cr=rr("ripemd160"),lr=rr("sha.js"),or=rr("cipher-base");function ur(hr){or.call(this,"digest"),this._hash=hr}sr(ur,or),ur.prototype._update=function(hr){this._hash.update(hr)},ur.prototype._final=function(){return this._hash.digest()},nr.exports=function(hr){return(hr=hr.toLowerCase())==="md5"?new ar:hr==="rmd160"||hr==="ripemd160"?new cr:new ur(lr(hr))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(rr,nr,ir){var sr=rr("md5.js");nr.exports=function(ar){return new sr().update(ar).digest()}},{"md5.js":450}],388:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./legacy"),cr=rr("cipher-base"),lr=rr("safe-buffer").Buffer,or=rr("create-hash/md5"),ur=rr("ripemd160"),hr=rr("sha.js"),dr=lr.alloc(128);function fr(gr,br){cr.call(this,"digest"),typeof br=="string"&&(br=lr.from(br));var pr=gr==="sha512"||gr==="sha384"?128:64;this._alg=gr,this._key=br,br.length>pr?br=(gr==="rmd160"?new ur:hr(gr)).update(br).digest():br.length<pr&&(br=lr.concat([br,dr],pr));for(var mr=this._ipad=lr.allocUnsafe(pr),yr=this._opad=lr.allocUnsafe(pr),xr=0;xr<pr;xr++)mr[xr]=54^br[xr],yr[xr]=92^br[xr];this._hash=gr==="rmd160"?new ur:hr(gr),this._hash.update(mr)}sr(fr,cr),fr.prototype._update=function(gr){this._hash.update(gr)},fr.prototype._final=function(){var gr=this._hash.digest();return(this._alg==="rmd160"?new ur:hr(this._alg)).update(this._opad).update(gr).digest()},nr.exports=function(gr,br){return(gr=gr.toLowerCase())==="rmd160"||gr==="ripemd160"?new fr("rmd160",br):gr==="md5"?new ar(or,br):new fr(gr,br)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("safe-buffer").Buffer,cr=rr("cipher-base"),lr=ar.alloc(128);function or(ur,hr){cr.call(this,"digest"),typeof hr=="string"&&(hr=ar.from(hr)),this._alg=ur,this._key=hr,hr.length>64?hr=ur(hr):hr.length<64&&(hr=ar.concat([hr,lr],64));for(var dr=this._ipad=ar.allocUnsafe(64),fr=this._opad=ar.allocUnsafe(64),gr=0;gr<64;gr++)dr[gr]=54^hr[gr],fr[gr]=92^hr[gr];this._hash=[dr]}sr(or,cr),or.prototype._update=function(ur){this._hash.push(ur)},or.prototype._final=function(){var ur=this._alg(ar.concat(this._hash));return this._alg(ar.concat([this._opad,ur]))},nr.exports=or},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(rr,nr,ir){ir.randomBytes=ir.rng=ir.pseudoRandomBytes=ir.prng=rr("randombytes"),ir.createHash=ir.Hash=rr("create-hash"),ir.createHmac=ir.Hmac=rr("create-hmac");var sr=rr("browserify-sign/algos"),ar=Object.keys(sr),cr=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(ar);ir.getHashes=function(){return cr};var lr=rr("pbkdf2");ir.pbkdf2=lr.pbkdf2,ir.pbkdf2Sync=lr.pbkdf2Sync;var or=rr("browserify-cipher");ir.Cipher=or.Cipher,ir.createCipher=or.createCipher,ir.Cipheriv=or.Cipheriv,ir.createCipheriv=or.createCipheriv,ir.Decipher=or.Decipher,ir.createDecipher=or.createDecipher,ir.Decipheriv=or.Decipheriv,ir.createDecipheriv=or.createDecipheriv,ir.getCiphers=or.getCiphers,ir.listCiphers=or.listCiphers;var ur=rr("diffie-hellman");ir.DiffieHellmanGroup=ur.DiffieHellmanGroup,ir.createDiffieHellmanGroup=ur.createDiffieHellmanGroup,ir.getDiffieHellman=ur.getDiffieHellman,ir.createDiffieHellman=ur.createDiffieHellman,ir.DiffieHellman=ur.DiffieHellman;var hr=rr("browserify-sign");ir.createSign=hr.createSign,ir.Sign=hr.Sign,ir.createVerify=hr.createVerify,ir.Verify=hr.Verify,ir.createECDH=rr("create-ecdh");var dr=rr("public-encrypt");ir.publicEncrypt=dr.publicEncrypt,ir.privateEncrypt=dr.privateEncrypt,ir.publicDecrypt=dr.publicDecrypt,ir.privateDecrypt=dr.privateDecrypt;var fr=rr("randomfill");ir.randomFill=fr.randomFill,ir.randomFillSync=fr.randomFillSync,ir.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},ir.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(rr,nr,ir){(function(sr,ar){typeof ir=="object"&&nr!==void 0?nr.exports=ar():(sr=typeof globalThis<"u"?globalThis:sr||self).dayjs=ar()})(void 0,function(){var sr=6e4,ar=36e5,cr="millisecond",lr="second",or="minute",ur="hour",hr="day",dr="week",fr="month",gr="quarter",br="year",pr="date",mr="Invalid Date",yr=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,xr=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,vr={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(wr){var Pr=["th","st","nd","rd"],Ar=wr%100;return"["+wr+(Pr[(Ar-20)%10]||Pr[Ar]||Pr[0])+"]"}},_r=function(wr,Pr,Ar){var Sr=String(wr);return!Sr||Sr.length>=Pr?wr:""+Array(Pr+1-Sr.length).join(Ar)+wr},Er={s:_r,z:function(wr){var Pr=-wr.utcOffset(),Ar=Math.abs(Pr),Sr=Math.floor(Ar/60),Mr=Ar%60;return(Pr<=0?"+":"-")+_r(Sr,2,"0")+":"+_r(Mr,2,"0")},m:function wr(Pr,Ar){if(Pr.date()<Ar.date())return-wr(Ar,Pr);var Sr=12*(Ar.year()-Pr.year())+(Ar.month()-Pr.month()),Mr=Pr.clone().add(Sr,fr),qr=Ar-Mr<0,$r=Pr.clone().add(Sr+(qr?-1:1),fr);return+(-(Sr+(Ar-Mr)/(qr?Mr-$r:$r-Mr))||0)},a:function(wr){return wr<0?Math.ceil(wr)||0:Math.floor(wr)},p:function(wr){return{M:fr,y:br,w:dr,d:hr,D:pr,h:ur,m:or,s:lr,ms:cr,Q:gr}[wr]||String(wr||"").toLowerCase().replace(/s$/,"")},u:function(wr){return wr===void 0}},Tr="en",Rr={};Rr[Tr]=vr;var Nr="$isDayjsObject",Dr=function(wr){return wr instanceof Lr||!(!wr||!wr[Nr])},Ir=function wr(Pr,Ar,Sr){var Mr;if(!Pr)return Tr;if(typeof Pr=="string"){var qr=Pr.toLowerCase();Rr[qr]&&(Mr=qr),Ar&&(Rr[qr]=Ar,Mr=qr);var $r=Pr.split("-");if(!Mr&&$r.length>1)return wr($r[0])}else{var Br=Pr.name;Rr[Br]=Pr,Mr=Br}return!Sr&&Mr&&(Tr=Mr),Mr||!Sr&&Tr},Or=function(wr,Pr){if(Dr(wr))return wr.clone();var Ar=typeof Pr=="object"?Pr:{};return Ar.date=wr,Ar.args=arguments,new Lr(Ar)},jr=Er;jr.l=Ir,jr.i=Dr,jr.w=function(wr,Pr){return Or(wr,{locale:Pr.$L,utc:Pr.$u,x:Pr.$x,$offset:Pr.$offset})};var Lr=function(){function wr(Ar){this.$L=Ir(Ar.locale,null,!0),this.parse(Ar),this.$x=this.$x||Ar.x||{},this[Nr]=!0}var Pr=wr.prototype;return Pr.parse=function(Ar){this.$d=function(Sr){var Mr=Sr.date,qr=Sr.utc;if(Mr===null)return new Date(NaN);if(jr.u(Mr))return new Date;if(Mr instanceof Date)return new Date(Mr);if(typeof Mr=="string"&&!/Z$/i.test(Mr)){var $r=Mr.match(yr);if($r){var Br=$r[2]-1||0,zr=($r[7]||"0").substring(0,3);return qr?new Date(Date.UTC($r[1],Br,$r[3]||1,$r[4]||0,$r[5]||0,$r[6]||0,zr)):new Date($r[1],Br,$r[3]||1,$r[4]||0,$r[5]||0,$r[6]||0,zr)}}return new Date(Mr)}(Ar),this.init()},Pr.init=function(){var Ar=this.$d;this.$y=Ar.getFullYear(),this.$M=Ar.getMonth(),this.$D=Ar.getDate(),this.$W=Ar.getDay(),this.$H=Ar.getHours(),this.$m=Ar.getMinutes(),this.$s=Ar.getSeconds(),this.$ms=Ar.getMilliseconds()},Pr.$utils=function(){return jr},Pr.isValid=function(){return this.$d.toString()!==mr},Pr.isSame=function(Ar,Sr){var Mr=Or(Ar);return this.startOf(Sr)<=Mr&&Mr<=this.endOf(Sr)},Pr.isAfter=function(Ar,Sr){return Or(Ar)<this.startOf(Sr)},Pr.isBefore=function(Ar,Sr){return this.endOf(Sr)<Or(Ar)},Pr.$g=function(Ar,Sr,Mr){return jr.u(Ar)?this[Sr]:this.set(Mr,Ar)},Pr.unix=function(){return Math.floor(this.valueOf()/1e3)},Pr.valueOf=function(){return this.$d.getTime()},Pr.startOf=function(Ar,Sr){var Mr=this,qr=!!jr.u(Sr)||Sr,$r=jr.p(Ar),Br=function(Zr,Jr){var tn=jr.w(Mr.$u?Date.UTC(Mr.$y,Jr,Zr):new Date(Mr.$y,Jr,Zr),Mr);return qr?tn:tn.endOf(hr)},zr=function(Zr,Jr){return jr.w(Mr.toDate()[Zr].apply(Mr.toDate("s"),(qr?[0,0,0,0]:[23,59,59,999]).slice(Jr)),Mr)},Gr=this.$W,Vr=this.$M,Xr=this.$D,Ur="set"+(this.$u?"UTC":"");switch($r){case br:return qr?Br(1,0):Br(31,11);case fr:return qr?Br(1,Vr):Br(0,Vr+1);case dr:var Fr=this.$locale().weekStart||0,Kr=(Gr<Fr?Gr+7:Gr)-Fr;return Br(qr?Xr-Kr:Xr+(6-Kr),Vr);case hr:case pr:return zr(Ur+"Hours",0);case ur:return zr(Ur+"Minutes",1);case or:return zr(Ur+"Seconds",2);case lr:return zr(Ur+"Milliseconds",3);default:return this.clone()}},Pr.endOf=function(Ar){return this.startOf(Ar,!1)},Pr.$set=function(Ar,Sr){var Mr,qr=jr.p(Ar),$r="set"+(this.$u?"UTC":""),Br=(Mr={},Mr[hr]=$r+"Date",Mr[pr]=$r+"Date",Mr[fr]=$r+"Month",Mr[br]=$r+"FullYear",Mr[ur]=$r+"Hours",Mr[or]=$r+"Minutes",Mr[lr]=$r+"Seconds",Mr[cr]=$r+"Milliseconds",Mr)[qr],zr=qr===hr?this.$D+(Sr-this.$W):Sr;if(qr===fr||qr===br){var Gr=this.clone().set(pr,1);Gr.$d[Br](zr),Gr.init(),this.$d=Gr.set(pr,Math.min(this.$D,Gr.daysInMonth())).$d}else Br&&this.$d[Br](zr);return this.init(),this},Pr.set=function(Ar,Sr){return this.clone().$set(Ar,Sr)},Pr.get=function(Ar){return this[jr.p(Ar)]()},Pr.add=function(Ar,Sr){var Mr,qr=this;Ar=Number(Ar);var $r=jr.p(Sr),Br=function(Vr){var Xr=Or(qr);return jr.w(Xr.date(Xr.date()+Math.round(Vr*Ar)),qr)};if($r===fr)return this.set(fr,this.$M+Ar);if($r===br)return this.set(br,this.$y+Ar);if($r===hr)return Br(1);if($r===dr)return Br(7);var zr=(Mr={},Mr[or]=sr,Mr[ur]=ar,Mr[lr]=1e3,Mr)[$r]||1,Gr=this.$d.getTime()+Ar*zr;return jr.w(Gr,this)},Pr.subtract=function(Ar,Sr){return this.add(-1*Ar,Sr)},Pr.format=function(Ar){var Sr=this,Mr=this.$locale();if(!this.isValid())return Mr.invalidDate||mr;var qr=Ar||"YYYY-MM-DDTHH:mm:ssZ",$r=jr.z(this),Br=this.$H,zr=this.$m,Gr=this.$M,Vr=Mr.weekdays,Xr=Mr.months,Ur=Mr.meridiem,Fr=function(Jr,tn,an,dn){return Jr&&(Jr[tn]||Jr(Sr,qr))||an[tn].slice(0,dn)},Kr=function(Jr){return jr.s(Br%12||12,Jr,"0")},Zr=Ur||function(Jr,tn,an){var dn=Jr<12?"AM":"PM";return an?dn.toLowerCase():dn};return qr.replace(xr,function(Jr,tn){return tn||function(an){switch(an){case"YY":return String(Sr.$y).slice(-2);case"YYYY":return jr.s(Sr.$y,4,"0");case"M":return Gr+1;case"MM":return jr.s(Gr+1,2,"0");case"MMM":return Fr(Mr.monthsShort,Gr,Xr,3);case"MMMM":return Fr(Xr,Gr);case"D":return Sr.$D;case"DD":return jr.s(Sr.$D,2,"0");case"d":return String(Sr.$W);case"dd":return Fr(Mr.weekdaysMin,Sr.$W,Vr,2);case"ddd":return Fr(Mr.weekdaysShort,Sr.$W,Vr,3);case"dddd":return Vr[Sr.$W];case"H":return String(Br);case"HH":return jr.s(Br,2,"0");case"h":return Kr(1);case"hh":return Kr(2);case"a":return Zr(Br,zr,!0);case"A":return Zr(Br,zr,!1);case"m":return String(zr);case"mm":return jr.s(zr,2,"0");case"s":return String(Sr.$s);case"ss":return jr.s(Sr.$s,2,"0");case"SSS":return jr.s(Sr.$ms,3,"0");case"Z":return $r}return null}(Jr)||$r.replace(":","")})},Pr.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Pr.diff=function(Ar,Sr,Mr){var qr,$r=this,Br=jr.p(Sr),zr=Or(Ar),Gr=(zr.utcOffset()-this.utcOffset())*sr,Vr=this-zr,Xr=function(){return jr.m($r,zr)};switch(Br){case br:qr=Xr()/12;break;case fr:qr=Xr();break;case gr:qr=Xr()/3;break;case dr:qr=(Vr-Gr)/6048e5;break;case hr:qr=(Vr-Gr)/864e5;break;case ur:qr=Vr/ar;break;case or:qr=Vr/sr;break;case lr:qr=Vr/1e3;break;default:qr=Vr}return Mr?qr:jr.a(qr)},Pr.daysInMonth=function(){return this.endOf(fr).$D},Pr.$locale=function(){return Rr[this.$L]},Pr.locale=function(Ar,Sr){if(!Ar)return this.$L;var Mr=this.clone(),qr=Ir(Ar,Sr,!0);return qr&&(Mr.$L=qr),Mr},Pr.clone=function(){return jr.w(this.$d,this)},Pr.toDate=function(){return new Date(this.valueOf())},Pr.toJSON=function(){return this.isValid()?this.toISOString():null},Pr.toISOString=function(){return this.$d.toISOString()},Pr.toString=function(){return this.$d.toUTCString()},wr}(),Cr=Lr.prototype;return Or.prototype=Cr,[["$ms",cr],["$s",lr],["$m",or],["$H",ur],["$W",hr],["$M",fr],["$y",br],["$D",pr]].forEach(function(wr){Cr[wr[1]]=function(Pr){return this.$g(Pr,wr[0],wr[1])}}),Or.extend=function(wr,Pr){return wr.$i||(wr(Pr,Lr,Or),wr.$i=!0),Or},Or.locale=Ir,Or.isDayjs=Dr,Or.unix=function(wr){return Or(1e3*wr)},Or.en=Rr[Tr],Or.Ls=Rr,Or.p={},Or})},{}],392:[function(rr,nr,ir){(function(sr,ar){typeof ir=="object"&&nr!==void 0?nr.exports=ar():(sr=typeof globalThis<"u"?globalThis:sr||self).dayjs_plugin_customParseFormat=ar()})(void 0,function(){var sr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},ar=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,cr=/\d\d/,lr=/\d\d?/,or=/\d*[^-_:/,()\s\d]+/,ur={},hr=function(yr){return(yr=+yr)+(yr>68?1900:2e3)},dr=function(yr){return function(xr){this[yr]=+xr}},fr=[/[+-]\d\d:?(\d\d)?|Z/,function(yr){(this.zone||(this.zone={})).offset=function(xr){if(!xr||xr==="Z")return 0;var vr=xr.match(/([+-]|\d\d)/g),_r=60*vr[1]+(+vr[2]||0);return _r===0?0:vr[0]==="+"?-_r:_r}(yr)}],gr=function(yr){var xr=ur[yr];return xr&&(xr.indexOf?xr:xr.s.concat(xr.f))},br=function(yr,xr){var vr,_r=ur.meridiem;if(_r){for(var Er=1;Er<=24;Er+=1)if(yr.indexOf(_r(Er,0,xr))>-1){vr=Er>12;break}}else vr=yr===(xr?"pm":"PM");return vr},pr={A:[or,function(yr){this.afternoon=br(yr,!1)}],a:[or,function(yr){this.afternoon=br(yr,!0)}],S:[/\d/,function(yr){this.milliseconds=100*+yr}],SS:[cr,function(yr){this.milliseconds=10*+yr}],SSS:[/\d{3}/,function(yr){this.milliseconds=+yr}],s:[lr,dr("seconds")],ss:[lr,dr("seconds")],m:[lr,dr("minutes")],mm:[lr,dr("minutes")],H:[lr,dr("hours")],h:[lr,dr("hours")],HH:[lr,dr("hours")],hh:[lr,dr("hours")],D:[lr,dr("day")],DD:[cr,dr("day")],Do:[or,function(yr){var xr=ur.ordinal,vr=yr.match(/\d+/);if(this.day=vr[0],xr)for(var _r=1;_r<=31;_r+=1)xr(_r).replace(/\[|\]/g,"")===yr&&(this.day=_r)}],M:[lr,dr("month")],MM:[cr,dr("month")],MMM:[or,function(yr){var xr=gr("months"),vr=(gr("monthsShort")||xr.map(function(_r){return _r.slice(0,3)})).indexOf(yr)+1;if(vr<1)throw new Error;this.month=vr%12||vr}],MMMM:[or,function(yr){var xr=gr("months").indexOf(yr)+1;if(xr<1)throw new Error;this.month=xr%12||xr}],Y:[/[+-]?\d+/,dr("year")],YY:[cr,function(yr){this.year=hr(yr)}],YYYY:[/\d{4}/,dr("year")],Z:fr,ZZ:fr};function mr(yr){var xr,vr;xr=yr,vr=ur&&ur.formats;for(var _r=(yr=xr.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(Or,jr,Lr){var Cr=Lr&&Lr.toUpperCase();return jr||vr[Lr]||sr[Lr]||vr[Cr].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(wr,Pr,Ar){return Pr||Ar.slice(1)})})).match(ar),Er=_r.length,Tr=0;Tr<Er;Tr+=1){var Rr=_r[Tr],Nr=pr[Rr],Dr=Nr&&Nr[0],Ir=Nr&&Nr[1];_r[Tr]=Ir?{regex:Dr,parser:Ir}:Rr.replace(/^\[|\]$/g,"")}return function(Or){for(var jr={},Lr=0,Cr=0;Lr<Er;Lr+=1){var wr=_r[Lr];if(typeof wr=="string")Cr+=wr.length;else{var Pr=wr.regex,Ar=wr.parser,Sr=Or.slice(Cr),Mr=Pr.exec(Sr)[0];Ar.call(jr,Mr),Or=Or.replace(Mr,"")}}return function(qr){var $r=qr.afternoon;if($r!==void 0){var Br=qr.hours;$r?Br<12&&(qr.hours+=12):Br===12&&(qr.hours=0),delete qr.afternoon}}(jr),jr}}return function(yr,xr,vr){vr.p.customParseFormat=!0,yr&&yr.parseTwoDigitYear&&(hr=yr.parseTwoDigitYear);var _r=xr.prototype,Er=_r.parse;_r.parse=function(Tr){var Rr=Tr.date,Nr=Tr.utc,Dr=Tr.args;this.$u=Nr;var Ir=Dr[1];if(typeof Ir=="string"){var Or=Dr[2]===!0,jr=Dr[3]===!0,Lr=Or||jr,Cr=Dr[2];jr&&(Cr=Dr[2]),ur=this.$locale(),!Or&&Cr&&(ur=vr.Ls[Cr]),this.$d=function(Sr,Mr,qr){try{if(["x","X"].indexOf(Mr)>-1)return new Date((Mr==="X"?1e3:1)*Sr);var $r=mr(Mr)(Sr),Br=$r.year,zr=$r.month,Gr=$r.day,Vr=$r.hours,Xr=$r.minutes,Ur=$r.seconds,Fr=$r.milliseconds,Kr=$r.zone,Zr=new Date,Jr=Gr||(Br||zr?1:Zr.getDate()),tn=Br||Zr.getFullYear(),an=0;Br&&!zr||(an=zr>0?zr-1:Zr.getMonth());var dn=Vr||0,en=Xr||0,rn=Ur||0,sn=Fr||0;return Kr?new Date(Date.UTC(tn,an,Jr,dn,en,rn,sn+60*Kr.offset*1e3)):qr?new Date(Date.UTC(tn,an,Jr,dn,en,rn,sn)):new Date(tn,an,Jr,dn,en,rn,sn)}catch{return new Date("")}}(Rr,Ir,Nr),this.init(),Cr&&Cr!==!0&&(this.$L=this.locale(Cr).$L),Lr&&Rr!=this.format(Ir)&&(this.$d=new Date("")),ur={}}else if(Ir instanceof Array)for(var wr=Ir.length,Pr=1;Pr<=wr;Pr+=1){Dr[1]=Ir[Pr-1];var Ar=vr.apply(this,Dr);if(Ar.isValid()){this.$d=Ar.$d,this.$L=Ar.$L,this.init();break}Pr===wr&&(this.$d=new Date(""))}else Er.call(this,Tr)}}})},{}],393:[function(rr,nr,ir){(function(sr,ar){typeof ir=="object"&&nr!==void 0?nr.exports=ar():(sr=typeof globalThis<"u"?globalThis:sr||self).dayjs_plugin_utc=ar()})(void 0,function(){var sr="minute",ar=/[+-]\d\d(?::?\d\d)?/g,cr=/([+-]|\d\d)/g;return function(lr,or,ur){var hr=or.prototype;ur.utc=function(yr){var xr={date:yr,utc:!0,args:arguments};return new or(xr)},hr.utc=function(yr){var xr=ur(this.toDate(),{locale:this.$L,utc:!0});return yr?xr.add(this.utcOffset(),sr):xr},hr.local=function(){return ur(this.toDate(),{locale:this.$L,utc:!1})};var dr=hr.parse;hr.parse=function(yr){yr.utc&&(this.$u=!0),this.$utils().u(yr.$offset)||(this.$offset=yr.$offset),dr.call(this,yr)};var fr=hr.init;hr.init=function(){if(this.$u){var yr=this.$d;this.$y=yr.getUTCFullYear(),this.$M=yr.getUTCMonth(),this.$D=yr.getUTCDate(),this.$W=yr.getUTCDay(),this.$H=yr.getUTCHours(),this.$m=yr.getUTCMinutes(),this.$s=yr.getUTCSeconds(),this.$ms=yr.getUTCMilliseconds()}else fr.call(this)};var gr=hr.utcOffset;hr.utcOffset=function(yr,xr){var vr=this.$utils().u;if(vr(yr))return this.$u?0:vr(this.$offset)?gr.call(this):this.$offset;if(typeof yr=="string"&&(yr=function(Rr){Rr===void 0&&(Rr="");var Nr=Rr.match(ar);if(!Nr)return null;var Dr=(""+Nr[0]).match(cr)||["-",0,0],Ir=Dr[0],Or=60*+Dr[1]+ +Dr[2];return Or===0?0:Ir==="+"?Or:-Or}(yr))===null)return this;var _r=Math.abs(yr)<=16?60*yr:yr,Er=this;if(xr)return Er.$offset=_r,Er.$u=yr===0,Er;if(yr!==0){var Tr=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(Er=this.local().add(_r+Tr,sr)).$offset=_r,Er.$x.$localOffset=Tr}else Er=this.utc();return Er};var br=hr.format;hr.format=function(yr){var xr=yr||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return br.call(this,xr)},hr.valueOf=function(){var yr=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*yr},hr.isUTC=function(){return!!this.$u},hr.toISOString=function(){return this.toDate().toISOString()},hr.toString=function(){return this.toDate().toUTCString()};var pr=hr.toDate;hr.toDate=function(yr){return yr==="s"&&this.$offset?ur(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():pr.call(this)};var mr=hr.diff;hr.diff=function(yr,xr,vr){if(yr&&this.$u===yr.$u)return mr.call(this,yr,xr,vr);var _r=this.local(),Er=ur(yr).local();return mr.call(_r,Er,xr,vr)}}})},{}],394:[function(rr,nr,ir){ir.utils=rr("./des/utils"),ir.Cipher=rr("./des/cipher"),ir.DES=rr("./des/des"),ir.CBC=rr("./des/cbc"),ir.EDE=rr("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(rr,nr,ir){var sr=rr("minimalistic-assert"),ar=rr("inherits"),cr={};function lr(or){sr.equal(or.length,8,"Invalid IV length"),this.iv=new Array(8);for(var ur=0;ur<this.iv.length;ur++)this.iv[ur]=or[ur]}ir.instantiate=function(or){function ur(gr){or.call(this,gr),this._cbcInit()}ar(ur,or);for(var hr=Object.keys(cr),dr=0;dr<hr.length;dr++){var fr=hr[dr];ur.prototype[fr]=cr[fr]}return ur.create=function(gr){return new ur(gr)},ur},cr._cbcInit=function(){var or=new lr(this.options.iv);this._cbcState=or},cr._update=function(or,ur,hr,dr){var fr=this._cbcState,gr=this.constructor.super_.prototype,br=fr.iv;if(this.type==="encrypt"){for(var pr=0;pr<this.blockSize;pr++)br[pr]^=or[ur+pr];for(gr._update.call(this,br,0,hr,dr),pr=0;pr<this.blockSize;pr++)br[pr]=hr[dr+pr]}else{for(gr._update.call(this,or,ur,hr,dr),pr=0;pr<this.blockSize;pr++)hr[dr+pr]^=br[pr];for(pr=0;pr<this.blockSize;pr++)br[pr]=or[ur+pr]}}},{inherits:440,"minimalistic-assert":453}],396:[function(rr,nr,ir){var sr=rr("minimalistic-assert");function ar(cr){this.options=cr,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=cr.padding!==!1}nr.exports=ar,ar.prototype._init=function(){},ar.prototype.update=function(cr){return cr.length===0?[]:this.type==="decrypt"?this._updateDecrypt(cr):this._updateEncrypt(cr)},ar.prototype._buffer=function(cr,lr){for(var or=Math.min(this.buffer.length-this.bufferOff,cr.length-lr),ur=0;ur<or;ur++)this.buffer[this.bufferOff+ur]=cr[lr+ur];return this.bufferOff+=or,or},ar.prototype._flushBuffer=function(cr,lr){return this._update(this.buffer,0,cr,lr),this.bufferOff=0,this.blockSize},ar.prototype._updateEncrypt=function(cr){var lr=0,or=0,ur=(this.bufferOff+cr.length)/this.blockSize|0,hr=new Array(ur*this.blockSize);this.bufferOff!==0&&(lr+=this._buffer(cr,lr),this.bufferOff===this.buffer.length&&(or+=this._flushBuffer(hr,or)));for(var dr=cr.length-(cr.length-lr)%this.blockSize;lr<dr;lr+=this.blockSize)this._update(cr,lr,hr,or),or+=this.blockSize;for(;lr<cr.length;lr++,this.bufferOff++)this.buffer[this.bufferOff]=cr[lr];return hr},ar.prototype._updateDecrypt=function(cr){for(var lr=0,or=0,ur=Math.ceil((this.bufferOff+cr.length)/this.blockSize)-1,hr=new Array(ur*this.blockSize);ur>0;ur--)lr+=this._buffer(cr,lr),or+=this._flushBuffer(hr,or);return lr+=this._buffer(cr,lr),hr},ar.prototype.final=function(cr){var lr,or;return cr&&(lr=this.update(cr)),or=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),lr?lr.concat(or):or},ar.prototype._pad=function(cr,lr){if(lr===0)return!1;for(;lr<cr.length;)cr[lr++]=0;return!0},ar.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var cr=new Array(this.blockSize);return this._update(this.buffer,0,cr,0),cr},ar.prototype._unpad=function(cr){return cr},ar.prototype._finalDecrypt=function(){sr.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var cr=new Array(this.blockSize);return this._flushBuffer(cr,0),this._unpad(cr)}},{"minimalistic-assert":453}],397:[function(rr,nr,ir){var sr=rr("minimalistic-assert"),ar=rr("inherits"),cr=rr("./utils"),lr=rr("./cipher");function or(){this.tmp=new Array(2),this.keys=null}function ur(dr){lr.call(this,dr);var fr=new or;this._desState=fr,this.deriveKeys(fr,dr.key)}ar(ur,lr),nr.exports=ur,ur.create=function(dr){return new ur(dr)};var hr=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];ur.prototype.deriveKeys=function(dr,fr){dr.keys=new Array(32),sr.equal(fr.length,this.blockSize,"Invalid key length");var gr=cr.readUInt32BE(fr,0),br=cr.readUInt32BE(fr,4);cr.pc1(gr,br,dr.tmp,0),gr=dr.tmp[0],br=dr.tmp[1];for(var pr=0;pr<dr.keys.length;pr+=2){var mr=hr[pr>>>1];gr=cr.r28shl(gr,mr),br=cr.r28shl(br,mr),cr.pc2(gr,br,dr.keys,pr)}},ur.prototype._update=function(dr,fr,gr,br){var pr=this._desState,mr=cr.readUInt32BE(dr,fr),yr=cr.readUInt32BE(dr,fr+4);cr.ip(mr,yr,pr.tmp,0),mr=pr.tmp[0],yr=pr.tmp[1],this.type==="encrypt"?this._encrypt(pr,mr,yr,pr.tmp,0):this._decrypt(pr,mr,yr,pr.tmp,0),mr=pr.tmp[0],yr=pr.tmp[1],cr.writeUInt32BE(gr,mr,br),cr.writeUInt32BE(gr,yr,br+4)},ur.prototype._pad=function(dr,fr){if(this.padding===!1)return!1;for(var gr=dr.length-fr,br=fr;br<dr.length;br++)dr[br]=gr;return!0},ur.prototype._unpad=function(dr){if(this.padding===!1)return dr;for(var fr=dr[dr.length-1],gr=dr.length-fr;gr<dr.length;gr++)sr.equal(dr[gr],fr);return dr.slice(0,dr.length-fr)},ur.prototype._encrypt=function(dr,fr,gr,br,pr){for(var mr=fr,yr=gr,xr=0;xr<dr.keys.length;xr+=2){var vr=dr.keys[xr],_r=dr.keys[xr+1];cr.expand(yr,dr.tmp,0),vr^=dr.tmp[0],_r^=dr.tmp[1];var Er=cr.substitute(vr,_r),Tr=yr;yr=(mr^cr.permute(Er))>>>0,mr=Tr}cr.rip(yr,mr,br,pr)},ur.prototype._decrypt=function(dr,fr,gr,br,pr){for(var mr=gr,yr=fr,xr=dr.keys.length-2;xr>=0;xr-=2){var vr=dr.keys[xr],_r=dr.keys[xr+1];cr.expand(mr,dr.tmp,0),vr^=dr.tmp[0],_r^=dr.tmp[1];var Er=cr.substitute(vr,_r),Tr=mr;mr=(yr^cr.permute(Er))>>>0,yr=Tr}cr.rip(mr,yr,br,pr)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(rr,nr,ir){var sr=rr("minimalistic-assert"),ar=rr("inherits"),cr=rr("./cipher"),lr=rr("./des");function or(hr,dr){sr.equal(dr.length,24,"Invalid key length");var fr=dr.slice(0,8),gr=dr.slice(8,16),br=dr.slice(16,24);this.ciphers=hr==="encrypt"?[lr.create({type:"encrypt",key:fr}),lr.create({type:"decrypt",key:gr}),lr.create({type:"encrypt",key:br})]:[lr.create({type:"decrypt",key:br}),lr.create({type:"encrypt",key:gr}),lr.create({type:"decrypt",key:fr})]}function ur(hr){cr.call(this,hr);var dr=new or(this.type,this.options.key);this._edeState=dr}ar(ur,cr),nr.exports=ur,ur.create=function(hr){return new ur(hr)},ur.prototype._update=function(hr,dr,fr,gr){var br=this._edeState;br.ciphers[0]._update(hr,dr,fr,gr),br.ciphers[1]._update(fr,gr,fr,gr),br.ciphers[2]._update(fr,gr,fr,gr)},ur.prototype._pad=lr.prototype._pad,ur.prototype._unpad=lr.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(rr,nr,ir){ir.readUInt32BE=function(lr,or){return(lr[0+or]<<24|lr[1+or]<<16|lr[2+or]<<8|lr[3+or])>>>0},ir.writeUInt32BE=function(lr,or,ur){lr[0+ur]=or>>>24,lr[1+ur]=or>>>16&255,lr[2+ur]=or>>>8&255,lr[3+ur]=255&or},ir.ip=function(lr,or,ur,hr){for(var dr=0,fr=0,gr=6;gr>=0;gr-=2){for(var br=0;br<=24;br+=8)dr<<=1,dr|=or>>>br+gr&1;for(br=0;br<=24;br+=8)dr<<=1,dr|=lr>>>br+gr&1}for(gr=6;gr>=0;gr-=2){for(br=1;br<=25;br+=8)fr<<=1,fr|=or>>>br+gr&1;for(br=1;br<=25;br+=8)fr<<=1,fr|=lr>>>br+gr&1}ur[hr+0]=dr>>>0,ur[hr+1]=fr>>>0},ir.rip=function(lr,or,ur,hr){for(var dr=0,fr=0,gr=0;gr<4;gr++)for(var br=24;br>=0;br-=8)dr<<=1,dr|=or>>>br+gr&1,dr<<=1,dr|=lr>>>br+gr&1;for(gr=4;gr<8;gr++)for(br=24;br>=0;br-=8)fr<<=1,fr|=or>>>br+gr&1,fr<<=1,fr|=lr>>>br+gr&1;ur[hr+0]=dr>>>0,ur[hr+1]=fr>>>0},ir.pc1=function(lr,or,ur,hr){for(var dr=0,fr=0,gr=7;gr>=5;gr--){for(var br=0;br<=24;br+=8)dr<<=1,dr|=or>>br+gr&1;for(br=0;br<=24;br+=8)dr<<=1,dr|=lr>>br+gr&1}for(br=0;br<=24;br+=8)dr<<=1,dr|=or>>br+gr&1;for(gr=1;gr<=3;gr++){for(br=0;br<=24;br+=8)fr<<=1,fr|=or>>br+gr&1;for(br=0;br<=24;br+=8)fr<<=1,fr|=lr>>br+gr&1}for(br=0;br<=24;br+=8)fr<<=1,fr|=lr>>br+gr&1;ur[hr+0]=dr>>>0,ur[hr+1]=fr>>>0},ir.r28shl=function(lr,or){return lr<<or&268435455|lr>>>28-or};var sr=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];ir.pc2=function(lr,or,ur,hr){for(var dr=0,fr=0,gr=sr.length>>>1,br=0;br<gr;br++)dr<<=1,dr|=lr>>>sr[br]&1;for(br=gr;br<sr.length;br++)fr<<=1,fr|=or>>>sr[br]&1;ur[hr+0]=dr>>>0,ur[hr+1]=fr>>>0},ir.expand=function(lr,or,ur){var hr=0,dr=0;hr=(1&lr)<<5|lr>>>27;for(var fr=23;fr>=15;fr-=4)hr<<=6,hr|=lr>>>fr&63;for(fr=11;fr>=3;fr-=4)dr|=lr>>>fr&63,dr<<=6;dr|=(31&lr)<<1|lr>>>31,or[ur+0]=hr>>>0,or[ur+1]=dr>>>0};var ar=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];ir.substitute=function(lr,or){for(var ur=0,hr=0;hr<4;hr++)ur<<=4,ur|=ar[64*hr+(lr>>>18-6*hr&63)];for(hr=0;hr<4;hr++)ur<<=4,ur|=ar[256+64*hr+(or>>>18-6*hr&63)];return ur>>>0};var cr=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];ir.permute=function(lr){for(var or=0,ur=0;ur<cr.length;ur++)or<<=1,or|=lr>>>cr[ur]&1;return or>>>0},ir.padSplit=function(lr,or,ur){for(var hr=lr.toString(2);hr.length<or;)hr="0"+hr;for(var dr=[],fr=0;fr<or;fr+=ur)dr.push(hr.slice(fr,fr+ur));return dr.join(" ")}},{}],400:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("./lib/generatePrime"),cr=rr("./lib/primes.json"),lr=rr("./lib/dh"),or={binary:!0,hex:!0,base64:!0};ir.DiffieHellmanGroup=ir.createDiffieHellmanGroup=ir.getDiffieHellman=function(ur){var hr=new sr(cr[ur].prime,"hex"),dr=new sr(cr[ur].gen,"hex");return new lr(hr,dr)},ir.createDiffieHellman=ir.DiffieHellman=function ur(hr,dr,fr,gr){return sr.isBuffer(dr)||or[dr]===void 0?ur(hr,"binary",dr,fr):(dr=dr||"binary",gr=gr||"binary",fr=fr||new sr([2]),sr.isBuffer(fr)||(fr=new sr(fr,gr)),typeof hr=="number"?new lr(ar(hr,fr),fr,!0):(sr.isBuffer(hr)||(hr=new sr(hr,dr)),new lr(hr,fr,!0)))}}).call(this)}).call(this,rr("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(rr,nr,ir){(function(sr){(function(){var ar=rr("bn.js"),cr=new(rr("miller-rabin")),lr=new ar(24),or=new ar(11),ur=new ar(10),hr=new ar(3),dr=new ar(7),fr=rr("./generatePrime"),gr=rr("randombytes");function br(vr,_r){return _r=_r||"utf8",sr.isBuffer(vr)||(vr=new sr(vr,_r)),this._pub=new ar(vr),this}function pr(vr,_r){return _r=_r||"utf8",sr.isBuffer(vr)||(vr=new sr(vr,_r)),this._priv=new ar(vr),this}nr.exports=yr;var mr={};function yr(vr,_r,Er){this.setGenerator(_r),this.__prime=new ar(vr),this._prime=ar.mont(this.__prime),this._primeLen=vr.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Er?(this.setPublicKey=br,this.setPrivateKey=pr):this._primeCode=8}function xr(vr,_r){var Er=new sr(vr.toArray());return _r?Er.toString(_r):Er}Object.defineProperty(yr.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=function(vr,_r){var Er=_r.toString("hex"),Tr=[Er,vr.toString(16)].join("_");if(Tr in mr)return mr[Tr];var Rr,Nr=0;if(vr.isEven()||!fr.simpleSieve||!fr.fermatTest(vr)||!cr.test(vr))return Nr+=1,Nr+=Er==="02"||Er==="05"?8:4,mr[Tr]=Nr,Nr;switch(cr.test(vr.shrn(1))||(Nr+=2),Er){case"02":vr.mod(lr).cmp(or)&&(Nr+=8);break;case"05":(Rr=vr.mod(ur)).cmp(hr)&&Rr.cmp(dr)&&(Nr+=8);break;default:Nr+=4}return mr[Tr]=Nr,Nr}(this.__prime,this.__gen)),this._primeCode}}),yr.prototype.generateKeys=function(){return this._priv||(this._priv=new ar(gr(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},yr.prototype.computeSecret=function(vr){var _r=(vr=(vr=new ar(vr)).toRed(this._prime)).redPow(this._priv).fromRed(),Er=new sr(_r.toArray()),Tr=this.getPrime();if(Er.length<Tr.length){var Rr=new sr(Tr.length-Er.length);Rr.fill(0),Er=sr.concat([Rr,Er])}return Er},yr.prototype.getPublicKey=function(vr){return xr(this._pub,vr)},yr.prototype.getPrivateKey=function(vr){return xr(this._priv,vr)},yr.prototype.getPrime=function(vr){return xr(this.__prime,vr)},yr.prototype.getGenerator=function(vr){return xr(this._gen,vr)},yr.prototype.setGenerator=function(vr,_r){return _r=_r||"utf8",sr.isBuffer(vr)||(vr=new sr(vr,_r)),this.__gen=vr,this._gen=new ar(vr),this}}).call(this)}).call(this,rr("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(rr,nr,ir){var sr=rr("randombytes");nr.exports=vr,vr.simpleSieve=yr,vr.fermatTest=xr;var ar=rr("bn.js"),cr=new ar(24),lr=new(rr("miller-rabin")),or=new ar(1),ur=new ar(2),hr=new ar(5),dr=(new ar(16),new ar(8),new ar(10)),fr=new ar(3),gr=(new ar(7),new ar(11)),br=new ar(4),pr=(new ar(12),null);function mr(){if(pr!==null)return pr;var _r=[];_r[0]=2;for(var Er=1,Tr=3;Tr<1048576;Tr+=2){for(var Rr=Math.ceil(Math.sqrt(Tr)),Nr=0;Nr<Er&&_r[Nr]<=Rr&&Tr%_r[Nr]!=0;Nr++);Er!==Nr&&_r[Nr]<=Rr||(_r[Er++]=Tr)}return pr=_r,_r}function yr(_r){for(var Er=mr(),Tr=0;Tr<Er.length;Tr++)if(_r.modn(Er[Tr])===0)return _r.cmpn(Er[Tr])===0;return!0}function xr(_r){var Er=ar.mont(_r);return ur.toRed(Er).redPow(_r.subn(1)).fromRed().cmpn(1)===0}function vr(_r,Er){if(_r<16)return new ar(Er===2||Er===5?[140,123]:[140,39]);var Tr,Rr;for(Er=new ar(Er);;){for(Tr=new ar(sr(Math.ceil(_r/8)));Tr.bitLength()>_r;)Tr.ishrn(1);if(Tr.isEven()&&Tr.iadd(or),Tr.testn(1)||Tr.iadd(ur),Er.cmp(ur)){if(!Er.cmp(hr))for(;Tr.mod(dr).cmp(fr);)Tr.iadd(br)}else for(;Tr.mod(cr).cmp(gr);)Tr.iadd(br);if(yr(Rr=Tr.shrn(1))&&yr(Tr)&&xr(Rr)&&xr(Tr)&&lr.test(Rr)&&lr.test(Tr))return Tr}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(rr,nr,ir){nr.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(rr,nr,ir){arguments[4][184][0].apply(ir,arguments)},{buffer:188,dup:184}],405:[function(rr,nr,ir){var sr=ir;sr.version=rr("../package.json").version,sr.utils=rr("./elliptic/utils"),sr.rand=rr("brorand"),sr.curve=rr("./elliptic/curve"),sr.curves=rr("./elliptic/curves"),sr.ec=rr("./elliptic/ec"),sr.eddsa=rr("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("../utils"),cr=ar.getNAF,lr=ar.getJSF,or=ar.assert;function ur(dr,fr){this.type=dr,this.p=new sr(fr.p,16),this.red=fr.prime?sr.red(fr.prime):sr.mont(this.p),this.zero=new sr(0).toRed(this.red),this.one=new sr(1).toRed(this.red),this.two=new sr(2).toRed(this.red),this.n=fr.n&&new sr(fr.n,16),this.g=fr.g&&this.pointFromJSON(fr.g,fr.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var gr=this.n&&this.p.div(this.n);!gr||gr.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function hr(dr,fr){this.curve=dr,this.type=fr,this.precomputed=null}nr.exports=ur,ur.prototype.point=function(){throw new Error("Not implemented")},ur.prototype.validate=function(){throw new Error("Not implemented")},ur.prototype._fixedNafMul=function(dr,fr){or(dr.precomputed);var gr=dr._getDoubles(),br=cr(fr,1,this._bitLength),pr=(1<<gr.step+1)-(gr.step%2==0?2:1);pr/=3;var mr,yr,xr=[];for(mr=0;mr<br.length;mr+=gr.step){yr=0;for(var vr=mr+gr.step-1;vr>=mr;vr--)yr=(yr<<1)+br[vr];xr.push(yr)}for(var _r=this.jpoint(null,null,null),Er=this.jpoint(null,null,null),Tr=pr;Tr>0;Tr--){for(mr=0;mr<xr.length;mr++)(yr=xr[mr])===Tr?Er=Er.mixedAdd(gr.points[mr]):yr===-Tr&&(Er=Er.mixedAdd(gr.points[mr].neg()));_r=_r.add(Er)}return _r.toP()},ur.prototype._wnafMul=function(dr,fr){var gr=4,br=dr._getNAFPoints(gr);gr=br.wnd;for(var pr=br.points,mr=cr(fr,gr,this._bitLength),yr=this.jpoint(null,null,null),xr=mr.length-1;xr>=0;xr--){for(var vr=0;xr>=0&&mr[xr]===0;xr--)vr++;if(xr>=0&&vr++,yr=yr.dblp(vr),xr<0)break;var _r=mr[xr];or(_r!==0),yr=dr.type==="affine"?_r>0?yr.mixedAdd(pr[_r-1>>1]):yr.mixedAdd(pr[-_r-1>>1].neg()):_r>0?yr.add(pr[_r-1>>1]):yr.add(pr[-_r-1>>1].neg())}return dr.type==="affine"?yr.toP():yr},ur.prototype._wnafMulAdd=function(dr,fr,gr,br,pr){var mr,yr,xr,vr=this._wnafT1,_r=this._wnafT2,Er=this._wnafT3,Tr=0;for(mr=0;mr<br;mr++){var Rr=(xr=fr[mr])._getNAFPoints(dr);vr[mr]=Rr.wnd,_r[mr]=Rr.points}for(mr=br-1;mr>=1;mr-=2){var Nr=mr-1,Dr=mr;if(vr[Nr]===1&&vr[Dr]===1){var Ir=[fr[Nr],null,null,fr[Dr]];fr[Nr].y.cmp(fr[Dr].y)===0?(Ir[1]=fr[Nr].add(fr[Dr]),Ir[2]=fr[Nr].toJ().mixedAdd(fr[Dr].neg())):fr[Nr].y.cmp(fr[Dr].y.redNeg())===0?(Ir[1]=fr[Nr].toJ().mixedAdd(fr[Dr]),Ir[2]=fr[Nr].add(fr[Dr].neg())):(Ir[1]=fr[Nr].toJ().mixedAdd(fr[Dr]),Ir[2]=fr[Nr].toJ().mixedAdd(fr[Dr].neg()));var Or=[-3,-1,-5,-7,0,7,5,1,3],jr=lr(gr[Nr],gr[Dr]);for(Tr=Math.max(jr[0].length,Tr),Er[Nr]=new Array(Tr),Er[Dr]=new Array(Tr),yr=0;yr<Tr;yr++){var Lr=0|jr[0][yr],Cr=0|jr[1][yr];Er[Nr][yr]=Or[3*(Lr+1)+(Cr+1)],Er[Dr][yr]=0,_r[Nr]=Ir}}else Er[Nr]=cr(gr[Nr],vr[Nr],this._bitLength),Er[Dr]=cr(gr[Dr],vr[Dr],this._bitLength),Tr=Math.max(Er[Nr].length,Tr),Tr=Math.max(Er[Dr].length,Tr)}var wr=this.jpoint(null,null,null),Pr=this._wnafT4;for(mr=Tr;mr>=0;mr--){for(var Ar=0;mr>=0;){var Sr=!0;for(yr=0;yr<br;yr++)Pr[yr]=0|Er[yr][mr],Pr[yr]!==0&&(Sr=!1);if(!Sr)break;Ar++,mr--}if(mr>=0&&Ar++,wr=wr.dblp(Ar),mr<0)break;for(yr=0;yr<br;yr++){var Mr=Pr[yr];Mr!==0&&(Mr>0?xr=_r[yr][Mr-1>>1]:Mr<0&&(xr=_r[yr][-Mr-1>>1].neg()),wr=xr.type==="affine"?wr.mixedAdd(xr):wr.add(xr))}}for(mr=0;mr<br;mr++)_r[mr]=null;return pr?wr:wr.toP()},ur.BasePoint=hr,hr.prototype.eq=function(){throw new Error("Not implemented")},hr.prototype.validate=function(){return this.curve.validate(this)},ur.prototype.decodePoint=function(dr,fr){dr=ar.toArray(dr,fr);var gr=this.p.byteLength();if((dr[0]===4||dr[0]===6||dr[0]===7)&&dr.length-1==2*gr)return dr[0]===6?or(dr[dr.length-1]%2==0):dr[0]===7&&or(dr[dr.length-1]%2==1),this.point(dr.slice(1,1+gr),dr.slice(1+gr,1+2*gr));if((dr[0]===2||dr[0]===3)&&dr.length-1===gr)return this.pointFromX(dr.slice(1,1+gr),dr[0]===3);throw new Error("Unknown point format")},hr.prototype.encodeCompressed=function(dr){return this.encode(dr,!0)},hr.prototype._encode=function(dr){var fr=this.curve.p.byteLength(),gr=this.getX().toArray("be",fr);return dr?[this.getY().isEven()?2:3].concat(gr):[4].concat(gr,this.getY().toArray("be",fr))},hr.prototype.encode=function(dr,fr){return ar.encode(this._encode(fr),dr)},hr.prototype.precompute=function(dr){if(this.precomputed)return this;var fr={doubles:null,naf:null,beta:null};return fr.naf=this._getNAFPoints(8),fr.doubles=this._getDoubles(4,dr),fr.beta=this._getBeta(),this.precomputed=fr,this},hr.prototype._hasDoubles=function(dr){if(!this.precomputed)return!1;var fr=this.precomputed.doubles;return!!fr&&fr.points.length>=Math.ceil((dr.bitLength()+1)/fr.step)},hr.prototype._getDoubles=function(dr,fr){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var gr=[this],br=this,pr=0;pr<fr;pr+=dr){for(var mr=0;mr<dr;mr++)br=br.dbl();gr.push(br)}return{step:dr,points:gr}},hr.prototype._getNAFPoints=function(dr){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var fr=[this],gr=(1<<dr)-1,br=gr===1?null:this.dbl(),pr=1;pr<gr;pr++)fr[pr]=fr[pr-1].add(br);return{wnd:dr,points:fr}},hr.prototype._getBeta=function(){return null},hr.prototype.dblp=function(dr){for(var fr=this,gr=0;gr<dr;gr++)fr=fr.dbl();return fr}},{"../utils":419,"bn.js":420}],407:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("bn.js"),cr=rr("inherits"),lr=rr("./base"),or=sr.assert;function ur(dr){this.twisted=(0|dr.a)!=1,this.mOneA=this.twisted&&(0|dr.a)==-1,this.extended=this.mOneA,lr.call(this,"edwards",dr),this.a=new ar(dr.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ar(dr.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ar(dr.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),or(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|dr.c)==1}function hr(dr,fr,gr,br,pr){lr.BasePoint.call(this,dr,"projective"),fr===null&&gr===null&&br===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ar(fr,16),this.y=new ar(gr,16),this.z=br?new ar(br,16):this.curve.one,this.t=pr&&new ar(pr,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}cr(ur,lr),nr.exports=ur,ur.prototype._mulA=function(dr){return this.mOneA?dr.redNeg():this.a.redMul(dr)},ur.prototype._mulC=function(dr){return this.oneC?dr:this.c.redMul(dr)},ur.prototype.jpoint=function(dr,fr,gr,br){return this.point(dr,fr,gr,br)},ur.prototype.pointFromX=function(dr,fr){(dr=new ar(dr,16)).red||(dr=dr.toRed(this.red));var gr=dr.redSqr(),br=this.c2.redSub(this.a.redMul(gr)),pr=this.one.redSub(this.c2.redMul(this.d).redMul(gr)),mr=br.redMul(pr.redInvm()),yr=mr.redSqrt();if(yr.redSqr().redSub(mr).cmp(this.zero)!==0)throw new Error("invalid point");var xr=yr.fromRed().isOdd();return(fr&&!xr||!fr&&xr)&&(yr=yr.redNeg()),this.point(dr,yr)},ur.prototype.pointFromY=function(dr,fr){(dr=new ar(dr,16)).red||(dr=dr.toRed(this.red));var gr=dr.redSqr(),br=gr.redSub(this.c2),pr=gr.redMul(this.d).redMul(this.c2).redSub(this.a),mr=br.redMul(pr.redInvm());if(mr.cmp(this.zero)===0){if(fr)throw new Error("invalid point");return this.point(this.zero,dr)}var yr=mr.redSqrt();if(yr.redSqr().redSub(mr).cmp(this.zero)!==0)throw new Error("invalid point");return yr.fromRed().isOdd()!==fr&&(yr=yr.redNeg()),this.point(yr,dr)},ur.prototype.validate=function(dr){if(dr.isInfinity())return!0;dr.normalize();var fr=dr.x.redSqr(),gr=dr.y.redSqr(),br=fr.redMul(this.a).redAdd(gr),pr=this.c2.redMul(this.one.redAdd(this.d.redMul(fr).redMul(gr)));return br.cmp(pr)===0},cr(hr,lr.BasePoint),ur.prototype.pointFromJSON=function(dr){return hr.fromJSON(this,dr)},ur.prototype.point=function(dr,fr,gr,br){return new hr(this,dr,fr,gr,br)},hr.fromJSON=function(dr,fr){return new hr(dr,fr[0],fr[1],fr[2])},hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},hr.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},hr.prototype._extDbl=function(){var dr=this.x.redSqr(),fr=this.y.redSqr(),gr=this.z.redSqr();gr=gr.redIAdd(gr);var br=this.curve._mulA(dr),pr=this.x.redAdd(this.y).redSqr().redISub(dr).redISub(fr),mr=br.redAdd(fr),yr=mr.redSub(gr),xr=br.redSub(fr),vr=pr.redMul(yr),_r=mr.redMul(xr),Er=pr.redMul(xr),Tr=yr.redMul(mr);return this.curve.point(vr,_r,Tr,Er)},hr.prototype._projDbl=function(){var dr,fr,gr,br,pr,mr,yr=this.x.redAdd(this.y).redSqr(),xr=this.x.redSqr(),vr=this.y.redSqr();if(this.curve.twisted){var _r=(br=this.curve._mulA(xr)).redAdd(vr);this.zOne?(dr=yr.redSub(xr).redSub(vr).redMul(_r.redSub(this.curve.two)),fr=_r.redMul(br.redSub(vr)),gr=_r.redSqr().redSub(_r).redSub(_r)):(pr=this.z.redSqr(),mr=_r.redSub(pr).redISub(pr),dr=yr.redSub(xr).redISub(vr).redMul(mr),fr=_r.redMul(br.redSub(vr)),gr=_r.redMul(mr))}else br=xr.redAdd(vr),pr=this.curve._mulC(this.z).redSqr(),mr=br.redSub(pr).redSub(pr),dr=this.curve._mulC(yr.redISub(br)).redMul(mr),fr=this.curve._mulC(br).redMul(xr.redISub(vr)),gr=br.redMul(mr);return this.curve.point(dr,fr,gr)},hr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},hr.prototype._extAdd=function(dr){var fr=this.y.redSub(this.x).redMul(dr.y.redSub(dr.x)),gr=this.y.redAdd(this.x).redMul(dr.y.redAdd(dr.x)),br=this.t.redMul(this.curve.dd).redMul(dr.t),pr=this.z.redMul(dr.z.redAdd(dr.z)),mr=gr.redSub(fr),yr=pr.redSub(br),xr=pr.redAdd(br),vr=gr.redAdd(fr),_r=mr.redMul(yr),Er=xr.redMul(vr),Tr=mr.redMul(vr),Rr=yr.redMul(xr);return this.curve.point(_r,Er,Rr,Tr)},hr.prototype._projAdd=function(dr){var fr,gr,br=this.z.redMul(dr.z),pr=br.redSqr(),mr=this.x.redMul(dr.x),yr=this.y.redMul(dr.y),xr=this.curve.d.redMul(mr).redMul(yr),vr=pr.redSub(xr),_r=pr.redAdd(xr),Er=this.x.redAdd(this.y).redMul(dr.x.redAdd(dr.y)).redISub(mr).redISub(yr),Tr=br.redMul(vr).redMul(Er);return this.curve.twisted?(fr=br.redMul(_r).redMul(yr.redSub(this.curve._mulA(mr))),gr=vr.redMul(_r)):(fr=br.redMul(_r).redMul(yr.redSub(mr)),gr=this.curve._mulC(vr).redMul(_r)),this.curve.point(Tr,fr,gr)},hr.prototype.add=function(dr){return this.isInfinity()?dr:dr.isInfinity()?this:this.curve.extended?this._extAdd(dr):this._projAdd(dr)},hr.prototype.mul=function(dr){return this._hasDoubles(dr)?this.curve._fixedNafMul(this,dr):this.curve._wnafMul(this,dr)},hr.prototype.mulAdd=function(dr,fr,gr){return this.curve._wnafMulAdd(1,[this,fr],[dr,gr],2,!1)},hr.prototype.jmulAdd=function(dr,fr,gr){return this.curve._wnafMulAdd(1,[this,fr],[dr,gr],2,!0)},hr.prototype.normalize=function(){if(this.zOne)return this;var dr=this.z.redInvm();return this.x=this.x.redMul(dr),this.y=this.y.redMul(dr),this.t&&(this.t=this.t.redMul(dr)),this.z=this.curve.one,this.zOne=!0,this},hr.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},hr.prototype.getX=function(){return this.normalize(),this.x.fromRed()},hr.prototype.getY=function(){return this.normalize(),this.y.fromRed()},hr.prototype.eq=function(dr){return this===dr||this.getX().cmp(dr.getX())===0&&this.getY().cmp(dr.getY())===0},hr.prototype.eqXToP=function(dr){var fr=dr.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(fr)===0)return!0;for(var gr=dr.clone(),br=this.curve.redN.redMul(this.z);;){if(gr.iadd(this.curve.n),gr.cmp(this.curve.p)>=0)return!1;if(fr.redIAdd(br),this.x.cmp(fr)===0)return!0}},hr.prototype.toP=hr.prototype.normalize,hr.prototype.mixedAdd=hr.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(rr,nr,ir){var sr=ir;sr.base=rr("./base"),sr.short=rr("./short"),sr.mont=rr("./mont"),sr.edwards=rr("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("inherits"),cr=rr("./base"),lr=rr("../utils");function or(hr){cr.call(this,"mont",hr),this.a=new sr(hr.a,16).toRed(this.red),this.b=new sr(hr.b,16).toRed(this.red),this.i4=new sr(4).toRed(this.red).redInvm(),this.two=new sr(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function ur(hr,dr,fr){cr.BasePoint.call(this,hr,"projective"),dr===null&&fr===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new sr(dr,16),this.z=new sr(fr,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}ar(or,cr),nr.exports=or,or.prototype.validate=function(hr){var dr=hr.normalize().x,fr=dr.redSqr(),gr=fr.redMul(dr).redAdd(fr.redMul(this.a)).redAdd(dr);return gr.redSqrt().redSqr().cmp(gr)===0},ar(ur,cr.BasePoint),or.prototype.decodePoint=function(hr,dr){return this.point(lr.toArray(hr,dr),1)},or.prototype.point=function(hr,dr){return new ur(this,hr,dr)},or.prototype.pointFromJSON=function(hr){return ur.fromJSON(this,hr)},ur.prototype.precompute=function(){},ur.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},ur.fromJSON=function(hr,dr){return new ur(hr,dr[0],dr[1]||hr.one)},ur.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ur.prototype.isInfinity=function(){return this.z.cmpn(0)===0},ur.prototype.dbl=function(){var hr=this.x.redAdd(this.z).redSqr(),dr=this.x.redSub(this.z).redSqr(),fr=hr.redSub(dr),gr=hr.redMul(dr),br=fr.redMul(dr.redAdd(this.curve.a24.redMul(fr)));return this.curve.point(gr,br)},ur.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},ur.prototype.diffAdd=function(hr,dr){var fr=this.x.redAdd(this.z),gr=this.x.redSub(this.z),br=hr.x.redAdd(hr.z),pr=hr.x.redSub(hr.z).redMul(fr),mr=br.redMul(gr),yr=dr.z.redMul(pr.redAdd(mr).redSqr()),xr=dr.x.redMul(pr.redISub(mr).redSqr());return this.curve.point(yr,xr)},ur.prototype.mul=function(hr){for(var dr=hr.clone(),fr=this,gr=this.curve.point(null,null),br=[];dr.cmpn(0)!==0;dr.iushrn(1))br.push(dr.andln(1));for(var pr=br.length-1;pr>=0;pr--)br[pr]===0?(fr=fr.diffAdd(gr,this),gr=gr.dbl()):(gr=fr.diffAdd(gr,this),fr=fr.dbl());return gr},ur.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},ur.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},ur.prototype.eq=function(hr){return this.getX().cmp(hr.getX())===0},ur.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},ur.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("bn.js"),cr=rr("inherits"),lr=rr("./base"),or=sr.assert;function ur(fr){lr.call(this,"short",fr),this.a=new ar(fr.a,16).toRed(this.red),this.b=new ar(fr.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(fr),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function hr(fr,gr,br,pr){lr.BasePoint.call(this,fr,"affine"),gr===null&&br===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ar(gr,16),this.y=new ar(br,16),pr&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function dr(fr,gr,br,pr){lr.BasePoint.call(this,fr,"jacobian"),gr===null&&br===null&&pr===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ar(0)):(this.x=new ar(gr,16),this.y=new ar(br,16),this.z=new ar(pr,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}cr(ur,lr),nr.exports=ur,ur.prototype._getEndomorphism=function(fr){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var gr,br;if(fr.beta)gr=new ar(fr.beta,16).toRed(this.red);else{var pr=this._getEndoRoots(this.p);gr=(gr=pr[0].cmp(pr[1])<0?pr[0]:pr[1]).toRed(this.red)}if(fr.lambda)br=new ar(fr.lambda,16);else{var mr=this._getEndoRoots(this.n);this.g.mul(mr[0]).x.cmp(this.g.x.redMul(gr))===0?br=mr[0]:(br=mr[1],or(this.g.mul(br).x.cmp(this.g.x.redMul(gr))===0))}return{beta:gr,lambda:br,basis:fr.basis?fr.basis.map(function(yr){return{a:new ar(yr.a,16),b:new ar(yr.b,16)}}):this._getEndoBasis(br)}}},ur.prototype._getEndoRoots=function(fr){var gr=fr===this.p?this.red:ar.mont(fr),br=new ar(2).toRed(gr).redInvm(),pr=br.redNeg(),mr=new ar(3).toRed(gr).redNeg().redSqrt().redMul(br);return[pr.redAdd(mr).fromRed(),pr.redSub(mr).fromRed()]},ur.prototype._getEndoBasis=function(fr){for(var gr,br,pr,mr,yr,xr,vr,_r,Er,Tr=this.n.ushrn(Math.floor(this.n.bitLength()/2)),Rr=fr,Nr=this.n.clone(),Dr=new ar(1),Ir=new ar(0),Or=new ar(0),jr=new ar(1),Lr=0;Rr.cmpn(0)!==0;){var Cr=Nr.div(Rr);_r=Nr.sub(Cr.mul(Rr)),Er=Or.sub(Cr.mul(Dr));var wr=jr.sub(Cr.mul(Ir));if(!pr&&_r.cmp(Tr)<0)gr=vr.neg(),br=Dr,pr=_r.neg(),mr=Er;else if(pr&&++Lr==2)break;vr=_r,Nr=Rr,Rr=_r,Or=Dr,Dr=Er,jr=Ir,Ir=wr}yr=_r.neg(),xr=Er;var Pr=pr.sqr().add(mr.sqr());return yr.sqr().add(xr.sqr()).cmp(Pr)>=0&&(yr=gr,xr=br),pr.negative&&(pr=pr.neg(),mr=mr.neg()),yr.negative&&(yr=yr.neg(),xr=xr.neg()),[{a:pr,b:mr},{a:yr,b:xr}]},ur.prototype._endoSplit=function(fr){var gr=this.endo.basis,br=gr[0],pr=gr[1],mr=pr.b.mul(fr).divRound(this.n),yr=br.b.neg().mul(fr).divRound(this.n),xr=mr.mul(br.a),vr=yr.mul(pr.a),_r=mr.mul(br.b),Er=yr.mul(pr.b);return{k1:fr.sub(xr).sub(vr),k2:_r.add(Er).neg()}},ur.prototype.pointFromX=function(fr,gr){(fr=new ar(fr,16)).red||(fr=fr.toRed(this.red));var br=fr.redSqr().redMul(fr).redIAdd(fr.redMul(this.a)).redIAdd(this.b),pr=br.redSqrt();if(pr.redSqr().redSub(br).cmp(this.zero)!==0)throw new Error("invalid point");var mr=pr.fromRed().isOdd();return(gr&&!mr||!gr&&mr)&&(pr=pr.redNeg()),this.point(fr,pr)},ur.prototype.validate=function(fr){if(fr.inf)return!0;var gr=fr.x,br=fr.y,pr=this.a.redMul(gr),mr=gr.redSqr().redMul(gr).redIAdd(pr).redIAdd(this.b);return br.redSqr().redISub(mr).cmpn(0)===0},ur.prototype._endoWnafMulAdd=function(fr,gr,br){for(var pr=this._endoWnafT1,mr=this._endoWnafT2,yr=0;yr<fr.length;yr++){var xr=this._endoSplit(gr[yr]),vr=fr[yr],_r=vr._getBeta();xr.k1.negative&&(xr.k1.ineg(),vr=vr.neg(!0)),xr.k2.negative&&(xr.k2.ineg(),_r=_r.neg(!0)),pr[2*yr]=vr,pr[2*yr+1]=_r,mr[2*yr]=xr.k1,mr[2*yr+1]=xr.k2}for(var Er=this._wnafMulAdd(1,pr,mr,2*yr,br),Tr=0;Tr<2*yr;Tr++)pr[Tr]=null,mr[Tr]=null;return Er},cr(hr,lr.BasePoint),ur.prototype.point=function(fr,gr,br){return new hr(this,fr,gr,br)},ur.prototype.pointFromJSON=function(fr,gr){return hr.fromJSON(this,fr,gr)},hr.prototype._getBeta=function(){if(this.curve.endo){var fr=this.precomputed;if(fr&&fr.beta)return fr.beta;var gr=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(fr){var br=this.curve,pr=function(mr){return br.point(mr.x.redMul(br.endo.beta),mr.y)};fr.beta=gr,gr.precomputed={beta:null,naf:fr.naf&&{wnd:fr.naf.wnd,points:fr.naf.points.map(pr)},doubles:fr.doubles&&{step:fr.doubles.step,points:fr.doubles.points.map(pr)}}}return gr}},hr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},hr.fromJSON=function(fr,gr,br){typeof gr=="string"&&(gr=JSON.parse(gr));var pr=fr.point(gr[0],gr[1],br);if(!gr[2])return pr;function mr(xr){return fr.point(xr[0],xr[1],br)}var yr=gr[2];return pr.precomputed={beta:null,doubles:yr.doubles&&{step:yr.doubles.step,points:[pr].concat(yr.doubles.points.map(mr))},naf:yr.naf&&{wnd:yr.naf.wnd,points:[pr].concat(yr.naf.points.map(mr))}},pr},hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},hr.prototype.isInfinity=function(){return this.inf},hr.prototype.add=function(fr){if(this.inf)return fr;if(fr.inf)return this;if(this.eq(fr))return this.dbl();if(this.neg().eq(fr))return this.curve.point(null,null);if(this.x.cmp(fr.x)===0)return this.curve.point(null,null);var gr=this.y.redSub(fr.y);gr.cmpn(0)!==0&&(gr=gr.redMul(this.x.redSub(fr.x).redInvm()));var br=gr.redSqr().redISub(this.x).redISub(fr.x),pr=gr.redMul(this.x.redSub(br)).redISub(this.y);return this.curve.point(br,pr)},hr.prototype.dbl=function(){if(this.inf)return this;var fr=this.y.redAdd(this.y);if(fr.cmpn(0)===0)return this.curve.point(null,null);var gr=this.curve.a,br=this.x.redSqr(),pr=fr.redInvm(),mr=br.redAdd(br).redIAdd(br).redIAdd(gr).redMul(pr),yr=mr.redSqr().redISub(this.x.redAdd(this.x)),xr=mr.redMul(this.x.redSub(yr)).redISub(this.y);return this.curve.point(yr,xr)},hr.prototype.getX=function(){return this.x.fromRed()},hr.prototype.getY=function(){return this.y.fromRed()},hr.prototype.mul=function(fr){return fr=new ar(fr,16),this.isInfinity()?this:this._hasDoubles(fr)?this.curve._fixedNafMul(this,fr):this.curve.endo?this.curve._endoWnafMulAdd([this],[fr]):this.curve._wnafMul(this,fr)},hr.prototype.mulAdd=function(fr,gr,br){var pr=[this,gr],mr=[fr,br];return this.curve.endo?this.curve._endoWnafMulAdd(pr,mr):this.curve._wnafMulAdd(1,pr,mr,2)},hr.prototype.jmulAdd=function(fr,gr,br){var pr=[this,gr],mr=[fr,br];return this.curve.endo?this.curve._endoWnafMulAdd(pr,mr,!0):this.curve._wnafMulAdd(1,pr,mr,2,!0)},hr.prototype.eq=function(fr){return this===fr||this.inf===fr.inf&&(this.inf||this.x.cmp(fr.x)===0&&this.y.cmp(fr.y)===0)},hr.prototype.neg=function(fr){if(this.inf)return this;var gr=this.curve.point(this.x,this.y.redNeg());if(fr&&this.precomputed){var br=this.precomputed,pr=function(mr){return mr.neg()};gr.precomputed={naf:br.naf&&{wnd:br.naf.wnd,points:br.naf.points.map(pr)},doubles:br.doubles&&{step:br.doubles.step,points:br.doubles.points.map(pr)}}}return gr},hr.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},cr(dr,lr.BasePoint),ur.prototype.jpoint=function(fr,gr,br){return new dr(this,fr,gr,br)},dr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var fr=this.z.redInvm(),gr=fr.redSqr(),br=this.x.redMul(gr),pr=this.y.redMul(gr).redMul(fr);return this.curve.point(br,pr)},dr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},dr.prototype.add=function(fr){if(this.isInfinity())return fr;if(fr.isInfinity())return this;var gr=fr.z.redSqr(),br=this.z.redSqr(),pr=this.x.redMul(gr),mr=fr.x.redMul(br),yr=this.y.redMul(gr.redMul(fr.z)),xr=fr.y.redMul(br.redMul(this.z)),vr=pr.redSub(mr),_r=yr.redSub(xr);if(vr.cmpn(0)===0)return _r.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Er=vr.redSqr(),Tr=Er.redMul(vr),Rr=pr.redMul(Er),Nr=_r.redSqr().redIAdd(Tr).redISub(Rr).redISub(Rr),Dr=_r.redMul(Rr.redISub(Nr)).redISub(yr.redMul(Tr)),Ir=this.z.redMul(fr.z).redMul(vr);return this.curve.jpoint(Nr,Dr,Ir)},dr.prototype.mixedAdd=function(fr){if(this.isInfinity())return fr.toJ();if(fr.isInfinity())return this;var gr=this.z.redSqr(),br=this.x,pr=fr.x.redMul(gr),mr=this.y,yr=fr.y.redMul(gr).redMul(this.z),xr=br.redSub(pr),vr=mr.redSub(yr);if(xr.cmpn(0)===0)return vr.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var _r=xr.redSqr(),Er=_r.redMul(xr),Tr=br.redMul(_r),Rr=vr.redSqr().redIAdd(Er).redISub(Tr).redISub(Tr),Nr=vr.redMul(Tr.redISub(Rr)).redISub(mr.redMul(Er)),Dr=this.z.redMul(xr);return this.curve.jpoint(Rr,Nr,Dr)},dr.prototype.dblp=function(fr){if(fr===0)return this;if(this.isInfinity())return this;if(!fr)return this.dbl();var gr;if(this.curve.zeroA||this.curve.threeA){var br=this;for(gr=0;gr<fr;gr++)br=br.dbl();return br}var pr=this.curve.a,mr=this.curve.tinv,yr=this.x,xr=this.y,vr=this.z,_r=vr.redSqr().redSqr(),Er=xr.redAdd(xr);for(gr=0;gr<fr;gr++){var Tr=yr.redSqr(),Rr=Er.redSqr(),Nr=Rr.redSqr(),Dr=Tr.redAdd(Tr).redIAdd(Tr).redIAdd(pr.redMul(_r)),Ir=yr.redMul(Rr),Or=Dr.redSqr().redISub(Ir.redAdd(Ir)),jr=Ir.redISub(Or),Lr=Dr.redMul(jr);Lr=Lr.redIAdd(Lr).redISub(Nr);var Cr=Er.redMul(vr);gr+1<fr&&(_r=_r.redMul(Nr)),yr=Or,vr=Cr,Er=Lr}return this.curve.jpoint(yr,Er.redMul(mr),vr)},dr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},dr.prototype._zeroDbl=function(){var fr,gr,br;if(this.zOne){var pr=this.x.redSqr(),mr=this.y.redSqr(),yr=mr.redSqr(),xr=this.x.redAdd(mr).redSqr().redISub(pr).redISub(yr);xr=xr.redIAdd(xr);var vr=pr.redAdd(pr).redIAdd(pr),_r=vr.redSqr().redISub(xr).redISub(xr),Er=yr.redIAdd(yr);Er=(Er=Er.redIAdd(Er)).redIAdd(Er),fr=_r,gr=vr.redMul(xr.redISub(_r)).redISub(Er),br=this.y.redAdd(this.y)}else{var Tr=this.x.redSqr(),Rr=this.y.redSqr(),Nr=Rr.redSqr(),Dr=this.x.redAdd(Rr).redSqr().redISub(Tr).redISub(Nr);Dr=Dr.redIAdd(Dr);var Ir=Tr.redAdd(Tr).redIAdd(Tr),Or=Ir.redSqr(),jr=Nr.redIAdd(Nr);jr=(jr=jr.redIAdd(jr)).redIAdd(jr),fr=Or.redISub(Dr).redISub(Dr),gr=Ir.redMul(Dr.redISub(fr)).redISub(jr),br=(br=this.y.redMul(this.z)).redIAdd(br)}return this.curve.jpoint(fr,gr,br)},dr.prototype._threeDbl=function(){var fr,gr,br;if(this.zOne){var pr=this.x.redSqr(),mr=this.y.redSqr(),yr=mr.redSqr(),xr=this.x.redAdd(mr).redSqr().redISub(pr).redISub(yr);xr=xr.redIAdd(xr);var vr=pr.redAdd(pr).redIAdd(pr).redIAdd(this.curve.a),_r=vr.redSqr().redISub(xr).redISub(xr);fr=_r;var Er=yr.redIAdd(yr);Er=(Er=Er.redIAdd(Er)).redIAdd(Er),gr=vr.redMul(xr.redISub(_r)).redISub(Er),br=this.y.redAdd(this.y)}else{var Tr=this.z.redSqr(),Rr=this.y.redSqr(),Nr=this.x.redMul(Rr),Dr=this.x.redSub(Tr).redMul(this.x.redAdd(Tr));Dr=Dr.redAdd(Dr).redIAdd(Dr);var Ir=Nr.redIAdd(Nr),Or=(Ir=Ir.redIAdd(Ir)).redAdd(Ir);fr=Dr.redSqr().redISub(Or),br=this.y.redAdd(this.z).redSqr().redISub(Rr).redISub(Tr);var jr=Rr.redSqr();jr=(jr=(jr=jr.redIAdd(jr)).redIAdd(jr)).redIAdd(jr),gr=Dr.redMul(Ir.redISub(fr)).redISub(jr)}return this.curve.jpoint(fr,gr,br)},dr.prototype._dbl=function(){var fr=this.curve.a,gr=this.x,br=this.y,pr=this.z,mr=pr.redSqr().redSqr(),yr=gr.redSqr(),xr=br.redSqr(),vr=yr.redAdd(yr).redIAdd(yr).redIAdd(fr.redMul(mr)),_r=gr.redAdd(gr),Er=(_r=_r.redIAdd(_r)).redMul(xr),Tr=vr.redSqr().redISub(Er.redAdd(Er)),Rr=Er.redISub(Tr),Nr=xr.redSqr();Nr=(Nr=(Nr=Nr.redIAdd(Nr)).redIAdd(Nr)).redIAdd(Nr);var Dr=vr.redMul(Rr).redISub(Nr),Ir=br.redAdd(br).redMul(pr);return this.curve.jpoint(Tr,Dr,Ir)},dr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var fr=this.x.redSqr(),gr=this.y.redSqr(),br=this.z.redSqr(),pr=gr.redSqr(),mr=fr.redAdd(fr).redIAdd(fr),yr=mr.redSqr(),xr=this.x.redAdd(gr).redSqr().redISub(fr).redISub(pr),vr=(xr=(xr=(xr=xr.redIAdd(xr)).redAdd(xr).redIAdd(xr)).redISub(yr)).redSqr(),_r=pr.redIAdd(pr);_r=(_r=(_r=_r.redIAdd(_r)).redIAdd(_r)).redIAdd(_r);var Er=mr.redIAdd(xr).redSqr().redISub(yr).redISub(vr).redISub(_r),Tr=gr.redMul(Er);Tr=(Tr=Tr.redIAdd(Tr)).redIAdd(Tr);var Rr=this.x.redMul(vr).redISub(Tr);Rr=(Rr=Rr.redIAdd(Rr)).redIAdd(Rr);var Nr=this.y.redMul(Er.redMul(_r.redISub(Er)).redISub(xr.redMul(vr)));Nr=(Nr=(Nr=Nr.redIAdd(Nr)).redIAdd(Nr)).redIAdd(Nr);var Dr=this.z.redAdd(xr).redSqr().redISub(br).redISub(vr);return this.curve.jpoint(Rr,Nr,Dr)},dr.prototype.mul=function(fr,gr){return fr=new ar(fr,gr),this.curve._wnafMul(this,fr)},dr.prototype.eq=function(fr){if(fr.type==="affine")return this.eq(fr.toJ());if(this===fr)return!0;var gr=this.z.redSqr(),br=fr.z.redSqr();if(this.x.redMul(br).redISub(fr.x.redMul(gr)).cmpn(0)!==0)return!1;var pr=gr.redMul(this.z),mr=br.redMul(fr.z);return this.y.redMul(mr).redISub(fr.y.redMul(pr)).cmpn(0)===0},dr.prototype.eqXToP=function(fr){var gr=this.z.redSqr(),br=fr.toRed(this.curve.red).redMul(gr);if(this.x.cmp(br)===0)return!0;for(var pr=fr.clone(),mr=this.curve.redN.redMul(gr);;){if(pr.iadd(this.curve.n),pr.cmp(this.curve.p)>=0)return!1;if(br.redIAdd(mr),this.x.cmp(br)===0)return!0}},dr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},dr.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(rr,nr,ir){var sr,ar=ir,cr=rr("hash.js"),lr=rr("./curve"),or=rr("./utils").assert;function ur(dr){dr.type==="short"?this.curve=new lr.short(dr):dr.type==="edwards"?this.curve=new lr.edwards(dr):this.curve=new lr.mont(dr),this.g=this.curve.g,this.n=this.curve.n,this.hash=dr.hash,or(this.g.validate(),"Invalid curve"),or(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function hr(dr,fr){Object.defineProperty(ar,dr,{configurable:!0,enumerable:!0,get:function(){var gr=new ur(fr);return Object.defineProperty(ar,dr,{configurable:!0,enumerable:!0,value:gr}),gr}})}ar.PresetCurve=ur,hr("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:cr.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),hr("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:cr.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),hr("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:cr.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),hr("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:cr.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),hr("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:cr.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),hr("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:cr.sha256,gRed:!1,g:["9"]}),hr("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:cr.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{sr=rr("./precomputed/secp256k1")}catch{sr=void 0}hr("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:cr.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",sr]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("hmac-drbg"),cr=rr("../utils"),lr=rr("../curves"),or=rr("brorand"),ur=cr.assert,hr=rr("./key"),dr=rr("./signature");function fr(gr){if(!(this instanceof fr))return new fr(gr);typeof gr=="string"&&(ur(Object.prototype.hasOwnProperty.call(lr,gr),"Unknown curve "+gr),gr=lr[gr]),gr instanceof lr.PresetCurve&&(gr={curve:gr}),this.curve=gr.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=gr.curve.g,this.g.precompute(gr.curve.n.bitLength()+1),this.hash=gr.hash||gr.curve.hash}nr.exports=fr,fr.prototype.keyPair=function(gr){return new hr(this,gr)},fr.prototype.keyFromPrivate=function(gr,br){return hr.fromPrivate(this,gr,br)},fr.prototype.keyFromPublic=function(gr,br){return hr.fromPublic(this,gr,br)},fr.prototype.genKeyPair=function(gr){gr||(gr={});for(var br=new ar({hash:this.hash,pers:gr.pers,persEnc:gr.persEnc||"utf8",entropy:gr.entropy||or(this.hash.hmacStrength),entropyEnc:gr.entropy&&gr.entropyEnc||"utf8",nonce:this.n.toArray()}),pr=this.n.byteLength(),mr=this.n.sub(new sr(2));;){var yr=new sr(br.generate(pr));if(!(yr.cmp(mr)>0))return yr.iaddn(1),this.keyFromPrivate(yr)}},fr.prototype._truncateToN=function(gr,br){var pr=8*gr.byteLength()-this.n.bitLength();return pr>0&&(gr=gr.ushrn(pr)),!br&&gr.cmp(this.n)>=0?gr.sub(this.n):gr},fr.prototype.sign=function(gr,br,pr,mr){typeof pr=="object"&&(mr=pr,pr=null),mr||(mr={}),br=this.keyFromPrivate(br,pr),gr=this._truncateToN(new sr(gr,16));for(var yr=this.n.byteLength(),xr=br.getPrivate().toArray("be",yr),vr=gr.toArray("be",yr),_r=new ar({hash:this.hash,entropy:xr,nonce:vr,pers:mr.pers,persEnc:mr.persEnc||"utf8"}),Er=this.n.sub(new sr(1)),Tr=0;;Tr++){var Rr=mr.k?mr.k(Tr):new sr(_r.generate(this.n.byteLength()));if(!((Rr=this._truncateToN(Rr,!0)).cmpn(1)<=0||Rr.cmp(Er)>=0)){var Nr=this.g.mul(Rr);if(!Nr.isInfinity()){var Dr=Nr.getX(),Ir=Dr.umod(this.n);if(Ir.cmpn(0)!==0){var Or=Rr.invm(this.n).mul(Ir.mul(br.getPrivate()).iadd(gr));if((Or=Or.umod(this.n)).cmpn(0)!==0){var jr=(Nr.getY().isOdd()?1:0)|(Dr.cmp(Ir)!==0?2:0);return mr.canonical&&Or.cmp(this.nh)>0&&(Or=this.n.sub(Or),jr^=1),new dr({r:Ir,s:Or,recoveryParam:jr})}}}}}},fr.prototype.verify=function(gr,br,pr,mr){gr=this._truncateToN(new sr(gr,16)),pr=this.keyFromPublic(pr,mr);var yr=(br=new dr(br,"hex")).r,xr=br.s;if(yr.cmpn(1)<0||yr.cmp(this.n)>=0||xr.cmpn(1)<0||xr.cmp(this.n)>=0)return!1;var vr,_r=xr.invm(this.n),Er=_r.mul(gr).umod(this.n),Tr=_r.mul(yr).umod(this.n);return this.curve._maxwellTrick?!(vr=this.g.jmulAdd(Er,pr.getPublic(),Tr)).isInfinity()&&vr.eqXToP(yr):!(vr=this.g.mulAdd(Er,pr.getPublic(),Tr)).isInfinity()&&vr.getX().umod(this.n).cmp(yr)===0},fr.prototype.recoverPubKey=function(gr,br,pr,mr){ur((3&pr)===pr,"The recovery param is more than two bits"),br=new dr(br,mr);var yr=this.n,xr=new sr(gr),vr=br.r,_r=br.s,Er=1&pr,Tr=pr>>1;if(vr.cmp(this.curve.p.umod(this.curve.n))>=0&&Tr)throw new Error("Unable to find sencond key candinate");vr=Tr?this.curve.pointFromX(vr.add(this.curve.n),Er):this.curve.pointFromX(vr,Er);var Rr=br.r.invm(yr),Nr=yr.sub(xr).mul(Rr).umod(yr),Dr=_r.mul(Rr).umod(yr);return this.g.mulAdd(Nr,vr,Dr)},fr.prototype.getKeyRecoveryParam=function(gr,br,pr,mr){if((br=new dr(br,mr)).recoveryParam!==null)return br.recoveryParam;for(var yr=0;yr<4;yr++){var xr;try{xr=this.recoverPubKey(gr,br,yr)}catch{continue}if(xr.eq(pr))return yr}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("../utils").assert;function cr(lr,or){this.ec=lr,this.priv=null,this.pub=null,or.priv&&this._importPrivate(or.priv,or.privEnc),or.pub&&this._importPublic(or.pub,or.pubEnc)}nr.exports=cr,cr.fromPublic=function(lr,or,ur){return or instanceof cr?or:new cr(lr,{pub:or,pubEnc:ur})},cr.fromPrivate=function(lr,or,ur){return or instanceof cr?or:new cr(lr,{priv:or,privEnc:ur})},cr.prototype.validate=function(){var lr=this.getPublic();return lr.isInfinity()?{result:!1,reason:"Invalid public key"}:lr.validate()?lr.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},cr.prototype.getPublic=function(lr,or){return typeof lr=="string"&&(or=lr,lr=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),or?this.pub.encode(or,lr):this.pub},cr.prototype.getPrivate=function(lr){return lr==="hex"?this.priv.toString(16,2):this.priv},cr.prototype._importPrivate=function(lr,or){this.priv=new sr(lr,or||16),this.priv=this.priv.umod(this.ec.curve.n)},cr.prototype._importPublic=function(lr,or){if(lr.x||lr.y)return this.ec.curve.type==="mont"?ar(lr.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||ar(lr.x&&lr.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(lr.x,lr.y));this.pub=this.ec.curve.decodePoint(lr,or)},cr.prototype.derive=function(lr){return lr.validate()||ar(lr.validate(),"public point not validated"),lr.mul(this.priv).getX()},cr.prototype.sign=function(lr,or,ur){return this.ec.sign(lr,this,or,ur)},cr.prototype.verify=function(lr,or){return this.ec.verify(lr,or,this)},cr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("../utils"),cr=ar.assert;function lr(fr,gr){if(fr instanceof lr)return fr;this._importDER(fr,gr)||(cr(fr.r&&fr.s,"Signature without r or s"),this.r=new sr(fr.r,16),this.s=new sr(fr.s,16),fr.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=fr.recoveryParam)}function or(){this.place=0}function ur(fr,gr){var br=fr[gr.place++];if(!(128&br))return br;var pr=15&br;if(pr===0||pr>4)return!1;for(var mr=0,yr=0,xr=gr.place;yr<pr;yr++,xr++)mr<<=8,mr|=fr[xr],mr>>>=0;return!(mr<=127)&&(gr.place=xr,mr)}function hr(fr){for(var gr=0,br=fr.length-1;!fr[gr]&&!(128&fr[gr+1])&&gr<br;)gr++;return gr===0?fr:fr.slice(gr)}function dr(fr,gr){if(gr<128)fr.push(gr);else{var br=1+(Math.log(gr)/Math.LN2>>>3);for(fr.push(128|br);--br;)fr.push(gr>>>(br<<3)&255);fr.push(gr)}}nr.exports=lr,lr.prototype._importDER=function(fr,gr){fr=ar.toArray(fr,gr);var br=new or;if(fr[br.place++]!==48)return!1;var pr=ur(fr,br);if(pr===!1||pr+br.place!==fr.length||fr[br.place++]!==2)return!1;var mr=ur(fr,br);if(mr===!1)return!1;var yr=fr.slice(br.place,mr+br.place);if(br.place+=mr,fr[br.place++]!==2)return!1;var xr=ur(fr,br);if(xr===!1||fr.length!==xr+br.place)return!1;var vr=fr.slice(br.place,xr+br.place);if(yr[0]===0){if(!(128&yr[1]))return!1;yr=yr.slice(1)}if(vr[0]===0){if(!(128&vr[1]))return!1;vr=vr.slice(1)}return this.r=new sr(yr),this.s=new sr(vr),this.recoveryParam=null,!0},lr.prototype.toDER=function(fr){var gr=this.r.toArray(),br=this.s.toArray();for(128&gr[0]&&(gr=[0].concat(gr)),128&br[0]&&(br=[0].concat(br)),gr=hr(gr),br=hr(br);!(br[0]||128&br[1]);)br=br.slice(1);var pr=[2];dr(pr,gr.length),(pr=pr.concat(gr)).push(2),dr(pr,br.length);var mr=pr.concat(br),yr=[48];return dr(yr,mr.length),yr=yr.concat(mr),ar.encode(yr,fr)}},{"../utils":419,"bn.js":420}],415:[function(rr,nr,ir){var sr=rr("hash.js"),ar=rr("../curves"),cr=rr("../utils"),lr=cr.assert,or=cr.parseBytes,ur=rr("./key"),hr=rr("./signature");function dr(fr){if(lr(fr==="ed25519","only tested with ed25519 so far"),!(this instanceof dr))return new dr(fr);fr=ar[fr].curve,this.curve=fr,this.g=fr.g,this.g.precompute(fr.n.bitLength()+1),this.pointClass=fr.point().constructor,this.encodingLength=Math.ceil(fr.n.bitLength()/8),this.hash=sr.sha512}nr.exports=dr,dr.prototype.sign=function(fr,gr){fr=or(fr);var br=this.keyFromSecret(gr),pr=this.hashInt(br.messagePrefix(),fr),mr=this.g.mul(pr),yr=this.encodePoint(mr),xr=this.hashInt(yr,br.pubBytes(),fr).mul(br.priv()),vr=pr.add(xr).umod(this.curve.n);return this.makeSignature({R:mr,S:vr,Rencoded:yr})},dr.prototype.verify=function(fr,gr,br){fr=or(fr),gr=this.makeSignature(gr);var pr=this.keyFromPublic(br),mr=this.hashInt(gr.Rencoded(),pr.pubBytes(),fr),yr=this.g.mul(gr.S());return gr.R().add(pr.pub().mul(mr)).eq(yr)},dr.prototype.hashInt=function(){for(var fr=this.hash(),gr=0;gr<arguments.length;gr++)fr.update(arguments[gr]);return cr.intFromLE(fr.digest()).umod(this.curve.n)},dr.prototype.keyFromPublic=function(fr){return ur.fromPublic(this,fr)},dr.prototype.keyFromSecret=function(fr){return ur.fromSecret(this,fr)},dr.prototype.makeSignature=function(fr){return fr instanceof hr?fr:new hr(this,fr)},dr.prototype.encodePoint=function(fr){var gr=fr.getY().toArray("le",this.encodingLength);return gr[this.encodingLength-1]|=fr.getX().isOdd()?128:0,gr},dr.prototype.decodePoint=function(fr){var gr=(fr=cr.parseBytes(fr)).length-1,br=fr.slice(0,gr).concat(-129&fr[gr]),pr=(128&fr[gr])!=0,mr=cr.intFromLE(br);return this.curve.pointFromY(mr,pr)},dr.prototype.encodeInt=function(fr){return fr.toArray("le",this.encodingLength)},dr.prototype.decodeInt=function(fr){return cr.intFromLE(fr)},dr.prototype.isPoint=function(fr){return fr instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(rr,nr,ir){var sr=rr("../utils"),ar=sr.assert,cr=sr.parseBytes,lr=sr.cachedProperty;function or(ur,hr){this.eddsa=ur,this._secret=cr(hr.secret),ur.isPoint(hr.pub)?this._pub=hr.pub:this._pubBytes=cr(hr.pub)}or.fromPublic=function(ur,hr){return hr instanceof or?hr:new or(ur,{pub:hr})},or.fromSecret=function(ur,hr){return hr instanceof or?hr:new or(ur,{secret:hr})},or.prototype.secret=function(){return this._secret},lr(or,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),lr(or,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),lr(or,"privBytes",function(){var ur=this.eddsa,hr=this.hash(),dr=ur.encodingLength-1,fr=hr.slice(0,ur.encodingLength);return fr[0]&=248,fr[dr]&=127,fr[dr]|=64,fr}),lr(or,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),lr(or,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),lr(or,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),or.prototype.sign=function(ur){return ar(this._secret,"KeyPair can only verify"),this.eddsa.sign(ur,this)},or.prototype.verify=function(ur,hr){return this.eddsa.verify(ur,hr,this)},or.prototype.getSecret=function(ur){return ar(this._secret,"KeyPair is public only"),sr.encode(this.secret(),ur)},or.prototype.getPublic=function(ur){return sr.encode(this.pubBytes(),ur)},nr.exports=or},{"../utils":419}],417:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("../utils"),cr=ar.assert,lr=ar.cachedProperty,or=ar.parseBytes;function ur(hr,dr){this.eddsa=hr,typeof dr!="object"&&(dr=or(dr)),Array.isArray(dr)&&(dr={R:dr.slice(0,hr.encodingLength),S:dr.slice(hr.encodingLength)}),cr(dr.R&&dr.S,"Signature without R or S"),hr.isPoint(dr.R)&&(this._R=dr.R),dr.S instanceof sr&&(this._S=dr.S),this._Rencoded=Array.isArray(dr.R)?dr.R:dr.Rencoded,this._Sencoded=Array.isArray(dr.S)?dr.S:dr.Sencoded}lr(ur,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),lr(ur,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),lr(ur,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),lr(ur,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),ur.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},ur.prototype.toHex=function(){return ar.encode(this.toBytes(),"hex").toUpperCase()},nr.exports=ur},{"../utils":419,"bn.js":420}],418:[function(rr,nr,ir){nr.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(rr,nr,ir){var sr=ir,ar=rr("bn.js"),cr=rr("minimalistic-assert"),lr=rr("minimalistic-crypto-utils");sr.assert=cr,sr.toArray=lr.toArray,sr.zero2=lr.zero2,sr.toHex=lr.toHex,sr.encode=lr.encode,sr.getNAF=function(or,ur,hr){var dr=new Array(Math.max(or.bitLength(),hr)+1);dr.fill(0);for(var fr=1<<ur+1,gr=or.clone(),br=0;br<dr.length;br++){var pr,mr=gr.andln(fr-1);gr.isOdd()?(pr=mr>(fr>>1)-1?(fr>>1)-mr:mr,gr.isubn(pr)):pr=0,dr[br]=pr,gr.iushrn(1)}return dr},sr.getJSF=function(or,ur){var hr=[[],[]];or=or.clone(),ur=ur.clone();for(var dr,fr=0,gr=0;or.cmpn(-fr)>0||ur.cmpn(-gr)>0;){var br,pr,mr=or.andln(3)+fr&3,yr=ur.andln(3)+gr&3;mr===3&&(mr=-1),yr===3&&(yr=-1),br=1&mr?(dr=or.andln(7)+fr&7)!==3&&dr!==5||yr!==2?mr:-mr:0,hr[0].push(br),pr=1&yr?(dr=ur.andln(7)+gr&7)!==3&&dr!==5||mr!==2?yr:-yr:0,hr[1].push(pr),2*fr===br+1&&(fr=1-fr),2*gr===pr+1&&(gr=1-gr),or.iushrn(1),ur.iushrn(1)}return hr},sr.cachedProperty=function(or,ur,hr){var dr="_"+ur;or.prototype[ur]=function(){return this[dr]!==void 0?this[dr]:this[dr]=hr.call(this)}},sr.parseBytes=function(or){return typeof or=="string"?sr.toArray(or,"hex"):or},sr.intFromLE=function(or){return new ar(or,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(rr,nr,ir){arguments[4][184][0].apply(ir,arguments)},{buffer:188,dup:184}],421:[function(rr,nr,ir){nr.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(rr,nr,ir){var sr=Object.create||function(Rr){var Nr=function(){};return Nr.prototype=Rr,new Nr},ar=Object.keys||function(Rr){var Nr=[];for(var Dr in Rr)Object.prototype.hasOwnProperty.call(Rr,Dr)&&Nr.push(Dr);return Dr},cr=Function.prototype.bind||function(Rr){var Nr=this;return function(){return Nr.apply(Rr,arguments)}};function lr(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=sr(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}nr.exports=lr,lr.EventEmitter=lr,lr.prototype._events=void 0,lr.prototype._maxListeners=void 0;var or,ur=10;try{var hr={};Object.defineProperty&&Object.defineProperty(hr,"x",{value:0}),or=hr.x===0}catch{or=!1}function dr(Rr){return Rr._maxListeners===void 0?lr.defaultMaxListeners:Rr._maxListeners}function fr(Rr,Nr,Dr){if(Nr)Rr.call(Dr);else for(var Ir=Rr.length,Or=Tr(Rr,Ir),jr=0;jr<Ir;++jr)Or[jr].call(Dr)}function gr(Rr,Nr,Dr,Ir){if(Nr)Rr.call(Dr,Ir);else for(var Or=Rr.length,jr=Tr(Rr,Or),Lr=0;Lr<Or;++Lr)jr[Lr].call(Dr,Ir)}function br(Rr,Nr,Dr,Ir,Or){if(Nr)Rr.call(Dr,Ir,Or);else for(var jr=Rr.length,Lr=Tr(Rr,jr),Cr=0;Cr<jr;++Cr)Lr[Cr].call(Dr,Ir,Or)}function pr(Rr,Nr,Dr,Ir,Or,jr){if(Nr)Rr.call(Dr,Ir,Or,jr);else for(var Lr=Rr.length,Cr=Tr(Rr,Lr),wr=0;wr<Lr;++wr)Cr[wr].call(Dr,Ir,Or,jr)}function mr(Rr,Nr,Dr,Ir){if(Nr)Rr.apply(Dr,Ir);else for(var Or=Rr.length,jr=Tr(Rr,Or),Lr=0;Lr<Or;++Lr)jr[Lr].apply(Dr,Ir)}function yr(Rr,Nr,Dr,Ir){var Or,jr,Lr;if(typeof Dr!="function")throw new TypeError('"listener" argument must be a function');if((jr=Rr._events)?(jr.newListener&&(Rr.emit("newListener",Nr,Dr.listener?Dr.listener:Dr),jr=Rr._events),Lr=jr[Nr]):(jr=Rr._events=sr(null),Rr._eventsCount=0),Lr){if(typeof Lr=="function"?Lr=jr[Nr]=Ir?[Dr,Lr]:[Lr,Dr]:Ir?Lr.unshift(Dr):Lr.push(Dr),!Lr.warned&&(Or=dr(Rr))&&Or>0&&Lr.length>Or){Lr.warned=!0;var Cr=new Error("Possible EventEmitter memory leak detected. "+Lr.length+' "'+String(Nr)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');Cr.name="MaxListenersExceededWarning",Cr.emitter=Rr,Cr.type=Nr,Cr.count=Lr.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",Cr.name,Cr.message)}}else Lr=jr[Nr]=Dr,++Rr._eventsCount;return Rr}function xr(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var Rr=new Array(arguments.length),Nr=0;Nr<Rr.length;++Nr)Rr[Nr]=arguments[Nr];this.listener.apply(this.target,Rr)}}function vr(Rr,Nr,Dr){var Ir={fired:!1,wrapFn:void 0,target:Rr,type:Nr,listener:Dr},Or=cr.call(xr,Ir);return Or.listener=Dr,Ir.wrapFn=Or,Or}function _r(Rr,Nr,Dr){var Ir=Rr._events;if(!Ir)return[];var Or=Ir[Nr];return Or?typeof Or=="function"?Dr?[Or.listener||Or]:[Or]:Dr?function(jr){for(var Lr=new Array(jr.length),Cr=0;Cr<Lr.length;++Cr)Lr[Cr]=jr[Cr].listener||jr[Cr];return Lr}(Or):Tr(Or,Or.length):[]}function Er(Rr){var Nr=this._events;if(Nr){var Dr=Nr[Rr];if(typeof Dr=="function")return 1;if(Dr)return Dr.length}return 0}function Tr(Rr,Nr){for(var Dr=new Array(Nr),Ir=0;Ir<Nr;++Ir)Dr[Ir]=Rr[Ir];return Dr}or?Object.defineProperty(lr,"defaultMaxListeners",{enumerable:!0,get:function(){return ur},set:function(Rr){if(typeof Rr!="number"||Rr<0||Rr!=Rr)throw new TypeError('"defaultMaxListeners" must be a positive number');ur=Rr}}):lr.defaultMaxListeners=ur,lr.prototype.setMaxListeners=function(Rr){if(typeof Rr!="number"||Rr<0||isNaN(Rr))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=Rr,this},lr.prototype.getMaxListeners=function(){return dr(this)},lr.prototype.emit=function(Rr){var Nr,Dr,Ir,Or,jr,Lr,Cr=Rr==="error";if(Lr=this._events)Cr=Cr&&Lr.error==null;else if(!Cr)return!1;if(Cr){if(arguments.length>1&&(Nr=arguments[1]),Nr instanceof Error)throw Nr;var wr=new Error('Unhandled "error" event. ('+Nr+")");throw wr.context=Nr,wr}if(!(Dr=Lr[Rr]))return!1;var Pr=typeof Dr=="function";switch(Ir=arguments.length){case 1:fr(Dr,Pr,this);break;case 2:gr(Dr,Pr,this,arguments[1]);break;case 3:br(Dr,Pr,this,arguments[1],arguments[2]);break;case 4:pr(Dr,Pr,this,arguments[1],arguments[2],arguments[3]);break;default:for(Or=new Array(Ir-1),jr=1;jr<Ir;jr++)Or[jr-1]=arguments[jr];mr(Dr,Pr,this,Or)}return!0},lr.prototype.addListener=function(Rr,Nr){return yr(this,Rr,Nr,!1)},lr.prototype.on=lr.prototype.addListener,lr.prototype.prependListener=function(Rr,Nr){return yr(this,Rr,Nr,!0)},lr.prototype.once=function(Rr,Nr){if(typeof Nr!="function")throw new TypeError('"listener" argument must be a function');return this.on(Rr,vr(this,Rr,Nr)),this},lr.prototype.prependOnceListener=function(Rr,Nr){if(typeof Nr!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(Rr,vr(this,Rr,Nr)),this},lr.prototype.removeListener=function(Rr,Nr){var Dr,Ir,Or,jr,Lr;if(typeof Nr!="function")throw new TypeError('"listener" argument must be a function');if(!(Ir=this._events))return this;if(!(Dr=Ir[Rr]))return this;if(Dr===Nr||Dr.listener===Nr)--this._eventsCount==0?this._events=sr(null):(delete Ir[Rr],Ir.removeListener&&this.emit("removeListener",Rr,Dr.listener||Nr));else if(typeof Dr!="function"){for(Or=-1,jr=Dr.length-1;jr>=0;jr--)if(Dr[jr]===Nr||Dr[jr].listener===Nr){Lr=Dr[jr].listener,Or=jr;break}if(Or<0)return this;Or===0?Dr.shift():function(Cr,wr){for(var Pr=wr,Ar=Pr+1,Sr=Cr.length;Ar<Sr;Pr+=1,Ar+=1)Cr[Pr]=Cr[Ar];Cr.pop()}(Dr,Or),Dr.length===1&&(Ir[Rr]=Dr[0]),Ir.removeListener&&this.emit("removeListener",Rr,Lr||Nr)}return this},lr.prototype.removeAllListeners=function(Rr){var Nr,Dr,Ir;if(!(Dr=this._events))return this;if(!Dr.removeListener)return arguments.length===0?(this._events=sr(null),this._eventsCount=0):Dr[Rr]&&(--this._eventsCount==0?this._events=sr(null):delete Dr[Rr]),this;if(arguments.length===0){var Or,jr=ar(Dr);for(Ir=0;Ir<jr.length;++Ir)(Or=jr[Ir])!=="removeListener"&&this.removeAllListeners(Or);return this.removeAllListeners("removeListener"),this._events=sr(null),this._eventsCount=0,this}if(typeof(Nr=Dr[Rr])=="function")this.removeListener(Rr,Nr);else if(Nr)for(Ir=Nr.length-1;Ir>=0;Ir--)this.removeListener(Rr,Nr[Ir]);return this},lr.prototype.listeners=function(Rr){return _r(this,Rr,!0)},lr.prototype.rawListeners=function(Rr){return _r(this,Rr,!1)},lr.listenerCount=function(Rr,Nr){return typeof Rr.listenerCount=="function"?Rr.listenerCount(Nr):Er.call(Rr,Nr)},lr.prototype.listenerCount=Er,lr.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("md5.js");nr.exports=function(cr,lr,or,ur){if(sr.isBuffer(cr)||(cr=sr.from(cr,"binary")),lr&&(sr.isBuffer(lr)||(lr=sr.from(lr,"binary")),lr.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var hr=or/8,dr=sr.alloc(hr),fr=sr.alloc(ur||0),gr=sr.alloc(0);hr>0||ur>0;){var br=new ar;br.update(gr),br.update(cr),lr&&br.update(lr),gr=br.digest();var pr=0;if(hr>0){var mr=dr.length-hr;pr=Math.min(hr,gr.length),gr.copy(dr,mr,0,pr),hr-=pr}if(pr<gr.length&&ur>0){var yr=fr.length-ur,xr=Math.min(ur,gr.length-pr);gr.copy(fr,yr,pr,pr+xr),ur-=xr}}return gr.fill(0),{key:dr,iv:fr}}},{"md5.js":450,"safe-buffer":494}],424:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.CsvParserStream=ir.ParserOptions=ir.parseFile=ir.parseStream=ir.parseString=ir.parse=ir.FormatterOptions=ir.CsvFormatterStream=ir.writeToPath=ir.writeToString=ir.writeToBuffer=ir.writeToStream=ir.write=ir.format=void 0;var sr=rr("@fast-csv/format");Object.defineProperty(ir,"format",{enumerable:!0,get:function(){return sr.format}}),Object.defineProperty(ir,"write",{enumerable:!0,get:function(){return sr.write}}),Object.defineProperty(ir,"writeToStream",{enumerable:!0,get:function(){return sr.writeToStream}}),Object.defineProperty(ir,"writeToBuffer",{enumerable:!0,get:function(){return sr.writeToBuffer}}),Object.defineProperty(ir,"writeToString",{enumerable:!0,get:function(){return sr.writeToString}}),Object.defineProperty(ir,"writeToPath",{enumerable:!0,get:function(){return sr.writeToPath}}),Object.defineProperty(ir,"CsvFormatterStream",{enumerable:!0,get:function(){return sr.CsvFormatterStream}}),Object.defineProperty(ir,"FormatterOptions",{enumerable:!0,get:function(){return sr.FormatterOptions}});var ar=rr("@fast-csv/parse");Object.defineProperty(ir,"parse",{enumerable:!0,get:function(){return ar.parse}}),Object.defineProperty(ir,"parseString",{enumerable:!0,get:function(){return ar.parseString}}),Object.defineProperty(ir,"parseStream",{enumerable:!0,get:function(){return ar.parseStream}}),Object.defineProperty(ir,"parseFile",{enumerable:!0,get:function(){return ar.parseFile}}),Object.defineProperty(ir,"ParserOptions",{enumerable:!0,get:function(){return ar.ParserOptions}}),Object.defineProperty(ir,"CsvParserStream",{enumerable:!0,get:function(){return ar.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("readable-stream").Transform;function cr(lr){ar.call(this),this._block=sr.allocUnsafe(lr),this._blockSize=lr,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}rr("inherits")(cr,ar),cr.prototype._transform=function(lr,or,ur){var hr=null;try{this.update(lr,or)}catch(dr){hr=dr}ur(hr)},cr.prototype._flush=function(lr){var or=null;try{this.push(this.digest())}catch(ur){or=ur}lr(or)},cr.prototype.update=function(lr,or){if(function(br,pr){if(!sr.isBuffer(br)&&typeof br!="string")throw new TypeError(pr+" must be a string or a buffer")}(lr,"Data"),this._finalized)throw new Error("Digest already called");sr.isBuffer(lr)||(lr=sr.from(lr,or));for(var ur=this._block,hr=0;this._blockOffset+lr.length-hr>=this._blockSize;){for(var dr=this._blockOffset;dr<this._blockSize;)ur[dr++]=lr[hr++];this._update(),this._blockOffset=0}for(;hr<lr.length;)ur[this._blockOffset++]=lr[hr++];for(var fr=0,gr=8*lr.length;gr>0;++fr)this._length[fr]+=gr,(gr=this._length[fr]/4294967296|0)>0&&(this._length[fr]-=4294967296*gr);return this},cr.prototype._update=function(){throw new Error("_update is not implemented")},cr.prototype.digest=function(lr){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var or=this._digest();lr!==void 0&&(or=or.toString(lr)),this._block.fill(0),this._blockOffset=0;for(var ur=0;ur<4;++ur)this._length[ur]=0;return or},cr.prototype._digest=function(){throw new Error("_digest is not implemented")},nr.exports=cr},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(rr,nr,ir){var sr=ir;sr.utils=rr("./hash/utils"),sr.common=rr("./hash/common"),sr.sha=rr("./hash/sha"),sr.ripemd=rr("./hash/ripemd"),sr.hmac=rr("./hash/hmac"),sr.sha1=sr.sha.sha1,sr.sha256=sr.sha.sha256,sr.sha224=sr.sha.sha224,sr.sha384=sr.sha.sha384,sr.sha512=sr.sha.sha512,sr.ripemd160=sr.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(rr,nr,ir){var sr=rr("./utils"),ar=rr("minimalistic-assert");function cr(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ir.BlockHash=cr,cr.prototype.update=function(lr,or){if(lr=sr.toArray(lr,or),this.pending?this.pending=this.pending.concat(lr):this.pending=lr,this.pendingTotal+=lr.length,this.pending.length>=this._delta8){var ur=(lr=this.pending).length%this._delta8;this.pending=lr.slice(lr.length-ur,lr.length),this.pending.length===0&&(this.pending=null),lr=sr.join32(lr,0,lr.length-ur,this.endian);for(var hr=0;hr<lr.length;hr+=this._delta32)this._update(lr,hr,hr+this._delta32)}return this},cr.prototype.digest=function(lr){return this.update(this._pad()),ar(this.pending===null),this._digest(lr)},cr.prototype._pad=function(){var lr=this.pendingTotal,or=this._delta8,ur=or-(lr+this.padLength)%or,hr=new Array(ur+this.padLength);hr[0]=128;for(var dr=1;dr<ur;dr++)hr[dr]=0;if(lr<<=3,this.endian==="big"){for(var fr=8;fr<this.padLength;fr++)hr[dr++]=0;hr[dr++]=0,hr[dr++]=0,hr[dr++]=0,hr[dr++]=0,hr[dr++]=lr>>>24&255,hr[dr++]=lr>>>16&255,hr[dr++]=lr>>>8&255,hr[dr++]=255&lr}else for(hr[dr++]=255&lr,hr[dr++]=lr>>>8&255,hr[dr++]=lr>>>16&255,hr[dr++]=lr>>>24&255,hr[dr++]=0,hr[dr++]=0,hr[dr++]=0,hr[dr++]=0,fr=8;fr<this.padLength;fr++)hr[dr++]=0;return hr}},{"./utils":437,"minimalistic-assert":453}],428:[function(rr,nr,ir){var sr=rr("./utils"),ar=rr("minimalistic-assert");function cr(lr,or,ur){if(!(this instanceof cr))return new cr(lr,or,ur);this.Hash=lr,this.blockSize=lr.blockSize/8,this.outSize=lr.outSize/8,this.inner=null,this.outer=null,this._init(sr.toArray(or,ur))}nr.exports=cr,cr.prototype._init=function(lr){lr.length>this.blockSize&&(lr=new this.Hash().update(lr).digest()),ar(lr.length<=this.blockSize);for(var or=lr.length;or<this.blockSize;or++)lr.push(0);for(or=0;or<lr.length;or++)lr[or]^=54;for(this.inner=new this.Hash().update(lr),or=0;or<lr.length;or++)lr[or]^=106;this.outer=new this.Hash().update(lr)},cr.prototype.update=function(lr,or){return this.inner.update(lr,or),this},cr.prototype.digest=function(lr){return this.outer.update(this.inner.digest()),this.outer.digest(lr)}},{"./utils":437,"minimalistic-assert":453}],429:[function(rr,nr,ir){var sr=rr("./utils"),ar=rr("./common"),cr=sr.rotl32,lr=sr.sum32,or=sr.sum32_3,ur=sr.sum32_4,hr=ar.BlockHash;function dr(){if(!(this instanceof dr))return new dr;hr.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function fr(vr,_r,Er,Tr){return vr<=15?_r^Er^Tr:vr<=31?_r&Er|~_r&Tr:vr<=47?(_r|~Er)^Tr:vr<=63?_r&Tr|Er&~Tr:_r^(Er|~Tr)}function gr(vr){return vr<=15?0:vr<=31?1518500249:vr<=47?1859775393:vr<=63?2400959708:2840853838}function br(vr){return vr<=15?1352829926:vr<=31?1548603684:vr<=47?1836072691:vr<=63?2053994217:0}sr.inherits(dr,hr),ir.ripemd160=dr,dr.blockSize=512,dr.outSize=160,dr.hmacStrength=192,dr.padLength=64,dr.prototype._update=function(vr,_r){for(var Er=this.h[0],Tr=this.h[1],Rr=this.h[2],Nr=this.h[3],Dr=this.h[4],Ir=Er,Or=Tr,jr=Rr,Lr=Nr,Cr=Dr,wr=0;wr<80;wr++){var Pr=lr(cr(ur(Er,fr(wr,Tr,Rr,Nr),vr[pr[wr]+_r],gr(wr)),yr[wr]),Dr);Er=Dr,Dr=Nr,Nr=cr(Rr,10),Rr=Tr,Tr=Pr,Pr=lr(cr(ur(Ir,fr(79-wr,Or,jr,Lr),vr[mr[wr]+_r],br(wr)),xr[wr]),Cr),Ir=Cr,Cr=Lr,Lr=cr(jr,10),jr=Or,Or=Pr}Pr=or(this.h[1],Rr,Lr),this.h[1]=or(this.h[2],Nr,Cr),this.h[2]=or(this.h[3],Dr,Ir),this.h[3]=or(this.h[4],Er,Or),this.h[4]=or(this.h[0],Tr,jr),this.h[0]=Pr},dr.prototype._digest=function(vr){return vr==="hex"?sr.toHex32(this.h,"little"):sr.split32(this.h,"little")};var pr=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],mr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],yr=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],xr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(rr,nr,ir){ir.sha1=rr("./sha/1"),ir.sha224=rr("./sha/224"),ir.sha256=rr("./sha/256"),ir.sha384=rr("./sha/384"),ir.sha512=rr("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("../common"),cr=rr("./common"),lr=sr.rotl32,or=sr.sum32,ur=sr.sum32_5,hr=cr.ft_1,dr=ar.BlockHash,fr=[1518500249,1859775393,2400959708,3395469782];function gr(){if(!(this instanceof gr))return new gr;dr.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}sr.inherits(gr,dr),nr.exports=gr,gr.blockSize=512,gr.outSize=160,gr.hmacStrength=80,gr.padLength=64,gr.prototype._update=function(br,pr){for(var mr=this.W,yr=0;yr<16;yr++)mr[yr]=br[pr+yr];for(;yr<mr.length;yr++)mr[yr]=lr(mr[yr-3]^mr[yr-8]^mr[yr-14]^mr[yr-16],1);var xr=this.h[0],vr=this.h[1],_r=this.h[2],Er=this.h[3],Tr=this.h[4];for(yr=0;yr<mr.length;yr++){var Rr=~~(yr/20),Nr=ur(lr(xr,5),hr(Rr,vr,_r,Er),Tr,mr[yr],fr[Rr]);Tr=Er,Er=_r,_r=lr(vr,30),vr=xr,xr=Nr}this.h[0]=or(this.h[0],xr),this.h[1]=or(this.h[1],vr),this.h[2]=or(this.h[2],_r),this.h[3]=or(this.h[3],Er),this.h[4]=or(this.h[4],Tr)},gr.prototype._digest=function(br){return br==="hex"?sr.toHex32(this.h,"big"):sr.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("./256");function cr(){if(!(this instanceof cr))return new cr;ar.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}sr.inherits(cr,ar),nr.exports=cr,cr.blockSize=512,cr.outSize=224,cr.hmacStrength=192,cr.padLength=64,cr.prototype._digest=function(lr){return lr==="hex"?sr.toHex32(this.h.slice(0,7),"big"):sr.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("../common"),cr=rr("./common"),lr=rr("minimalistic-assert"),or=sr.sum32,ur=sr.sum32_4,hr=sr.sum32_5,dr=cr.ch32,fr=cr.maj32,gr=cr.s0_256,br=cr.s1_256,pr=cr.g0_256,mr=cr.g1_256,yr=ar.BlockHash,xr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vr(){if(!(this instanceof vr))return new vr;yr.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=xr,this.W=new Array(64)}sr.inherits(vr,yr),nr.exports=vr,vr.blockSize=512,vr.outSize=256,vr.hmacStrength=192,vr.padLength=64,vr.prototype._update=function(_r,Er){for(var Tr=this.W,Rr=0;Rr<16;Rr++)Tr[Rr]=_r[Er+Rr];for(;Rr<Tr.length;Rr++)Tr[Rr]=ur(mr(Tr[Rr-2]),Tr[Rr-7],pr(Tr[Rr-15]),Tr[Rr-16]);var Nr=this.h[0],Dr=this.h[1],Ir=this.h[2],Or=this.h[3],jr=this.h[4],Lr=this.h[5],Cr=this.h[6],wr=this.h[7];for(lr(this.k.length===Tr.length),Rr=0;Rr<Tr.length;Rr++){var Pr=hr(wr,br(jr),dr(jr,Lr,Cr),this.k[Rr],Tr[Rr]),Ar=or(gr(Nr),fr(Nr,Dr,Ir));wr=Cr,Cr=Lr,Lr=jr,jr=or(Or,Pr),Or=Ir,Ir=Dr,Dr=Nr,Nr=or(Pr,Ar)}this.h[0]=or(this.h[0],Nr),this.h[1]=or(this.h[1],Dr),this.h[2]=or(this.h[2],Ir),this.h[3]=or(this.h[3],Or),this.h[4]=or(this.h[4],jr),this.h[5]=or(this.h[5],Lr),this.h[6]=or(this.h[6],Cr),this.h[7]=or(this.h[7],wr)},vr.prototype._digest=function(_r){return _r==="hex"?sr.toHex32(this.h,"big"):sr.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("./512");function cr(){if(!(this instanceof cr))return new cr;ar.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}sr.inherits(cr,ar),nr.exports=cr,cr.blockSize=1024,cr.outSize=384,cr.hmacStrength=192,cr.padLength=128,cr.prototype._digest=function(lr){return lr==="hex"?sr.toHex32(this.h.slice(0,12),"big"):sr.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(rr,nr,ir){var sr=rr("../utils"),ar=rr("../common"),cr=rr("minimalistic-assert"),lr=sr.rotr64_hi,or=sr.rotr64_lo,ur=sr.shr64_hi,hr=sr.shr64_lo,dr=sr.sum64,fr=sr.sum64_hi,gr=sr.sum64_lo,br=sr.sum64_4_hi,pr=sr.sum64_4_lo,mr=sr.sum64_5_hi,yr=sr.sum64_5_lo,xr=ar.BlockHash,vr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _r(){if(!(this instanceof _r))return new _r;xr.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=vr,this.W=new Array(160)}function Er(Ar,Sr,Mr,qr,$r){var Br=Ar&Mr^~Ar&$r;return Br<0&&(Br+=4294967296),Br}function Tr(Ar,Sr,Mr,qr,$r,Br){var zr=Sr&qr^~Sr&Br;return zr<0&&(zr+=4294967296),zr}function Rr(Ar,Sr,Mr,qr,$r){var Br=Ar&Mr^Ar&$r^Mr&$r;return Br<0&&(Br+=4294967296),Br}function Nr(Ar,Sr,Mr,qr,$r,Br){var zr=Sr&qr^Sr&Br^qr&Br;return zr<0&&(zr+=4294967296),zr}function Dr(Ar,Sr){var Mr=lr(Ar,Sr,28)^lr(Sr,Ar,2)^lr(Sr,Ar,7);return Mr<0&&(Mr+=4294967296),Mr}function Ir(Ar,Sr){var Mr=or(Ar,Sr,28)^or(Sr,Ar,2)^or(Sr,Ar,7);return Mr<0&&(Mr+=4294967296),Mr}function Or(Ar,Sr){var Mr=lr(Ar,Sr,14)^lr(Ar,Sr,18)^lr(Sr,Ar,9);return Mr<0&&(Mr+=4294967296),Mr}function jr(Ar,Sr){var Mr=or(Ar,Sr,14)^or(Ar,Sr,18)^or(Sr,Ar,9);return Mr<0&&(Mr+=4294967296),Mr}function Lr(Ar,Sr){var Mr=lr(Ar,Sr,1)^lr(Ar,Sr,8)^ur(Ar,Sr,7);return Mr<0&&(Mr+=4294967296),Mr}function Cr(Ar,Sr){var Mr=or(Ar,Sr,1)^or(Ar,Sr,8)^hr(Ar,Sr,7);return Mr<0&&(Mr+=4294967296),Mr}function wr(Ar,Sr){var Mr=lr(Ar,Sr,19)^lr(Sr,Ar,29)^ur(Ar,Sr,6);return Mr<0&&(Mr+=4294967296),Mr}function Pr(Ar,Sr){var Mr=or(Ar,Sr,19)^or(Sr,Ar,29)^hr(Ar,Sr,6);return Mr<0&&(Mr+=4294967296),Mr}sr.inherits(_r,xr),nr.exports=_r,_r.blockSize=1024,_r.outSize=512,_r.hmacStrength=192,_r.padLength=128,_r.prototype._prepareBlock=function(Ar,Sr){for(var Mr=this.W,qr=0;qr<32;qr++)Mr[qr]=Ar[Sr+qr];for(;qr<Mr.length;qr+=2){var $r=wr(Mr[qr-4],Mr[qr-3]),Br=Pr(Mr[qr-4],Mr[qr-3]),zr=Mr[qr-14],Gr=Mr[qr-13],Vr=Lr(Mr[qr-30],Mr[qr-29]),Xr=Cr(Mr[qr-30],Mr[qr-29]),Ur=Mr[qr-32],Fr=Mr[qr-31];Mr[qr]=br($r,Br,zr,Gr,Vr,Xr,Ur,Fr),Mr[qr+1]=pr($r,Br,zr,Gr,Vr,Xr,Ur,Fr)}},_r.prototype._update=function(Ar,Sr){this._prepareBlock(Ar,Sr);var Mr=this.W,qr=this.h[0],$r=this.h[1],Br=this.h[2],zr=this.h[3],Gr=this.h[4],Vr=this.h[5],Xr=this.h[6],Ur=this.h[7],Fr=this.h[8],Kr=this.h[9],Zr=this.h[10],Jr=this.h[11],tn=this.h[12],an=this.h[13],dn=this.h[14],en=this.h[15];cr(this.k.length===Mr.length);for(var rn=0;rn<Mr.length;rn+=2){var sn=dn,on=en,fn=Or(Fr,Kr),pn=jr(Fr,Kr),gn=Er(Fr,Kr,Zr,Jr,tn),Pn=Tr(Fr,Kr,Zr,Jr,tn,an),In=this.k[rn],En=this.k[rn+1],zn=Mr[rn],yn=Mr[rn+1],Vn=mr(sn,on,fn,pn,gn,Pn,In,En,zn,yn),Kn=yr(sn,on,fn,pn,gn,Pn,In,En,zn,yn);sn=Dr(qr,$r),on=Ir(qr,$r),fn=Rr(qr,$r,Br,zr,Gr),pn=Nr(qr,$r,Br,zr,Gr,Vr);var es=fr(sn,on,fn,pn),Xn=gr(sn,on,fn,pn);dn=tn,en=an,tn=Zr,an=Jr,Zr=Fr,Jr=Kr,Fr=fr(Xr,Ur,Vn,Kn),Kr=gr(Ur,Ur,Vn,Kn),Xr=Gr,Ur=Vr,Gr=Br,Vr=zr,Br=qr,zr=$r,qr=fr(Vn,Kn,es,Xn),$r=gr(Vn,Kn,es,Xn)}dr(this.h,0,qr,$r),dr(this.h,2,Br,zr),dr(this.h,4,Gr,Vr),dr(this.h,6,Xr,Ur),dr(this.h,8,Fr,Kr),dr(this.h,10,Zr,Jr),dr(this.h,12,tn,an),dr(this.h,14,dn,en)},_r.prototype._digest=function(Ar){return Ar==="hex"?sr.toHex32(this.h,"big"):sr.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(rr,nr,ir){var sr=rr("../utils").rotr32;function ar(or,ur,hr){return or&ur^~or&hr}function cr(or,ur,hr){return or&ur^or&hr^ur&hr}function lr(or,ur,hr){return or^ur^hr}ir.ft_1=function(or,ur,hr,dr){return or===0?ar(ur,hr,dr):or===1||or===3?lr(ur,hr,dr):or===2?cr(ur,hr,dr):void 0},ir.ch32=ar,ir.maj32=cr,ir.p32=lr,ir.s0_256=function(or){return sr(or,2)^sr(or,13)^sr(or,22)},ir.s1_256=function(or){return sr(or,6)^sr(or,11)^sr(or,25)},ir.g0_256=function(or){return sr(or,7)^sr(or,18)^or>>>3},ir.g1_256=function(or){return sr(or,17)^sr(or,19)^or>>>10}},{"../utils":437}],437:[function(rr,nr,ir){var sr=rr("minimalistic-assert"),ar=rr("inherits");function cr(hr,dr){return(64512&hr.charCodeAt(dr))==55296&&!(dr<0||dr+1>=hr.length)&&(64512&hr.charCodeAt(dr+1))==56320}function lr(hr){return(hr>>>24|hr>>>8&65280|hr<<8&16711680|(255&hr)<<24)>>>0}function or(hr){return hr.length===1?"0"+hr:hr}function ur(hr){return hr.length===7?"0"+hr:hr.length===6?"00"+hr:hr.length===5?"000"+hr:hr.length===4?"0000"+hr:hr.length===3?"00000"+hr:hr.length===2?"000000"+hr:hr.length===1?"0000000"+hr:hr}ir.inherits=ar,ir.toArray=function(hr,dr){if(Array.isArray(hr))return hr.slice();if(!hr)return[];var fr=[];if(typeof hr=="string")if(dr){if(dr==="hex")for((hr=hr.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(hr="0"+hr),br=0;br<hr.length;br+=2)fr.push(parseInt(hr[br]+hr[br+1],16))}else for(var gr=0,br=0;br<hr.length;br++){var pr=hr.charCodeAt(br);pr<128?fr[gr++]=pr:pr<2048?(fr[gr++]=pr>>6|192,fr[gr++]=63&pr|128):cr(hr,br)?(pr=65536+((1023&pr)<<10)+(1023&hr.charCodeAt(++br)),fr[gr++]=pr>>18|240,fr[gr++]=pr>>12&63|128,fr[gr++]=pr>>6&63|128,fr[gr++]=63&pr|128):(fr[gr++]=pr>>12|224,fr[gr++]=pr>>6&63|128,fr[gr++]=63&pr|128)}else for(br=0;br<hr.length;br++)fr[br]=0|hr[br];return fr},ir.toHex=function(hr){for(var dr="",fr=0;fr<hr.length;fr++)dr+=or(hr[fr].toString(16));return dr},ir.htonl=lr,ir.toHex32=function(hr,dr){for(var fr="",gr=0;gr<hr.length;gr++){var br=hr[gr];dr==="little"&&(br=lr(br)),fr+=ur(br.toString(16))}return fr},ir.zero2=or,ir.zero8=ur,ir.join32=function(hr,dr,fr,gr){var br=fr-dr;sr(br%4==0);for(var pr=new Array(br/4),mr=0,yr=dr;mr<pr.length;mr++,yr+=4){var xr;xr=gr==="big"?hr[yr]<<24|hr[yr+1]<<16|hr[yr+2]<<8|hr[yr+3]:hr[yr+3]<<24|hr[yr+2]<<16|hr[yr+1]<<8|hr[yr],pr[mr]=xr>>>0}return pr},ir.split32=function(hr,dr){for(var fr=new Array(4*hr.length),gr=0,br=0;gr<hr.length;gr++,br+=4){var pr=hr[gr];dr==="big"?(fr[br]=pr>>>24,fr[br+1]=pr>>>16&255,fr[br+2]=pr>>>8&255,fr[br+3]=255&pr):(fr[br+3]=pr>>>24,fr[br+2]=pr>>>16&255,fr[br+1]=pr>>>8&255,fr[br]=255&pr)}return fr},ir.rotr32=function(hr,dr){return hr>>>dr|hr<<32-dr},ir.rotl32=function(hr,dr){return hr<<dr|hr>>>32-dr},ir.sum32=function(hr,dr){return hr+dr>>>0},ir.sum32_3=function(hr,dr,fr){return hr+dr+fr>>>0},ir.sum32_4=function(hr,dr,fr,gr){return hr+dr+fr+gr>>>0},ir.sum32_5=function(hr,dr,fr,gr,br){return hr+dr+fr+gr+br>>>0},ir.sum64=function(hr,dr,fr,gr){var br=hr[dr],pr=gr+hr[dr+1]>>>0,mr=(pr<gr?1:0)+fr+br;hr[dr]=mr>>>0,hr[dr+1]=pr},ir.sum64_hi=function(hr,dr,fr,gr){return(dr+gr>>>0<dr?1:0)+hr+fr>>>0},ir.sum64_lo=function(hr,dr,fr,gr){return dr+gr>>>0},ir.sum64_4_hi=function(hr,dr,fr,gr,br,pr,mr,yr){var xr=0,vr=dr;return xr+=(vr=vr+gr>>>0)<dr?1:0,xr+=(vr=vr+pr>>>0)<pr?1:0,hr+fr+br+mr+(xr+=(vr=vr+yr>>>0)<yr?1:0)>>>0},ir.sum64_4_lo=function(hr,dr,fr,gr,br,pr,mr,yr){return dr+gr+pr+yr>>>0},ir.sum64_5_hi=function(hr,dr,fr,gr,br,pr,mr,yr,xr,vr){var _r=0,Er=dr;return _r+=(Er=Er+gr>>>0)<dr?1:0,_r+=(Er=Er+pr>>>0)<pr?1:0,_r+=(Er=Er+yr>>>0)<yr?1:0,hr+fr+br+mr+xr+(_r+=(Er=Er+vr>>>0)<vr?1:0)>>>0},ir.sum64_5_lo=function(hr,dr,fr,gr,br,pr,mr,yr,xr,vr){return dr+gr+pr+yr+vr>>>0},ir.rotr64_hi=function(hr,dr,fr){return(dr<<32-fr|hr>>>fr)>>>0},ir.rotr64_lo=function(hr,dr,fr){return(hr<<32-fr|dr>>>fr)>>>0},ir.shr64_hi=function(hr,dr,fr){return hr>>>fr},ir.shr64_lo=function(hr,dr,fr){return(hr<<32-fr|dr>>>fr)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(rr,nr,ir){var sr=rr("hash.js"),ar=rr("minimalistic-crypto-utils"),cr=rr("minimalistic-assert");function lr(or){if(!(this instanceof lr))return new lr(or);this.hash=or.hash,this.predResist=!!or.predResist,this.outLen=this.hash.outSize,this.minEntropy=or.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var ur=ar.toArray(or.entropy,or.entropyEnc||"hex"),hr=ar.toArray(or.nonce,or.nonceEnc||"hex"),dr=ar.toArray(or.pers,or.persEnc||"hex");cr(ur.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(ur,hr,dr)}nr.exports=lr,lr.prototype._init=function(or,ur,hr){var dr=or.concat(ur).concat(hr);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var fr=0;fr<this.V.length;fr++)this.K[fr]=0,this.V[fr]=1;this._update(dr),this._reseed=1,this.reseedInterval=281474976710656},lr.prototype._hmac=function(){return new sr.hmac(this.hash,this.K)},lr.prototype._update=function(or){var ur=this._hmac().update(this.V).update([0]);or&&(ur=ur.update(or)),this.K=ur.digest(),this.V=this._hmac().update(this.V).digest(),or&&(this.K=this._hmac().update(this.V).update([1]).update(or).digest(),this.V=this._hmac().update(this.V).digest())},lr.prototype.reseed=function(or,ur,hr,dr){typeof ur!="string"&&(dr=hr,hr=ur,ur=null),or=ar.toArray(or,ur),hr=ar.toArray(hr,dr),cr(or.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(or.concat(hr||[])),this._reseed=1},lr.prototype.generate=function(or,ur,hr,dr){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof ur!="string"&&(dr=hr,hr=ur,ur=null),hr&&(hr=ar.toArray(hr,dr||"hex"),this._update(hr));for(var fr=[];fr.length<or;)this.V=this._hmac().update(this.V).digest(),fr=fr.concat(this.V);var gr=fr.slice(0,or);return this._update(hr),this._reseed++,ar.encode(gr,ur)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(rr,nr,ir){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ir.read=function(sr,ar,cr,lr,or){var ur,hr,dr=8*or-lr-1,fr=(1<<dr)-1,gr=fr>>1,br=-7,pr=cr?or-1:0,mr=cr?-1:1,yr=sr[ar+pr];for(pr+=mr,ur=yr&(1<<-br)-1,yr>>=-br,br+=dr;br>0;ur=256*ur+sr[ar+pr],pr+=mr,br-=8);for(hr=ur&(1<<-br)-1,ur>>=-br,br+=lr;br>0;hr=256*hr+sr[ar+pr],pr+=mr,br-=8);if(ur===0)ur=1-gr;else{if(ur===fr)return hr?NaN:1/0*(yr?-1:1);hr+=Math.pow(2,lr),ur-=gr}return(yr?-1:1)*hr*Math.pow(2,ur-lr)},ir.write=function(sr,ar,cr,lr,or,ur){var hr,dr,fr,gr=8*ur-or-1,br=(1<<gr)-1,pr=br>>1,mr=or===23?Math.pow(2,-24)-Math.pow(2,-77):0,yr=lr?0:ur-1,xr=lr?1:-1,vr=ar<0||ar===0&&1/ar<0?1:0;for(ar=Math.abs(ar),isNaN(ar)||ar===1/0?(dr=isNaN(ar)?1:0,hr=br):(hr=Math.floor(Math.log(ar)/Math.LN2),ar*(fr=Math.pow(2,-hr))<1&&(hr--,fr*=2),(ar+=hr+pr>=1?mr/fr:mr*Math.pow(2,1-pr))*fr>=2&&(hr++,fr/=2),hr+pr>=br?(dr=0,hr=br):hr+pr>=1?(dr=(ar*fr-1)*Math.pow(2,or),hr+=pr):(dr=ar*Math.pow(2,pr-1)*Math.pow(2,or),hr=0));or>=8;sr[cr+yr]=255&dr,yr+=xr,dr/=256,or-=8);for(hr=hr<<or|dr,gr+=or;gr>0;sr[cr+yr]=255&hr,yr+=xr,hr/=256,gr-=8);sr[cr+yr-xr]|=128*vr}},{}],440:[function(rr,nr,ir){typeof Object.create=="function"?nr.exports=function(sr,ar){ar&&(sr.super_=ar,sr.prototype=Object.create(ar.prototype,{constructor:{value:sr,enumerable:!1,writable:!0,configurable:!0}}))}:nr.exports=function(sr,ar){if(ar){sr.super_=ar;var cr=function(){};cr.prototype=ar.prototype,sr.prototype=new cr,sr.prototype.constructor=sr}}},{}],441:[function(rr,nr,ir){(function(sr,ar,cr,lr,or,ur,hr,dr){(function(){/*!

	JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	<http://stuartk.com/jszip>

	(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

	JSZip uses the library pako released under the MIT license :
	https://github.com/nodeca/pako/blob/main/LICENSE
	*/(function(fr){typeof ir=="object"&&nr!==void 0?nr.exports=fr():(typeof window<"u"?window:ar!==void 0?ar:typeof self<"u"?self:this).JSZip=fr()})(function(){return function fr(gr,br,pr){function mr(vr,_r){if(!br[vr]){if(!gr[vr]){var Er=typeof rr=="function"&&rr;if(!_r&&Er)return Er(vr,!0);if(yr)return yr(vr,!0);var Tr=new Error("Cannot find module '"+vr+"'");throw Tr.code="MODULE_NOT_FOUND",Tr}var Rr=br[vr]={exports:{}};gr[vr][0].call(Rr.exports,function(Nr){return mr(gr[vr][1][Nr]||Nr)},Rr,Rr.exports,fr,gr,br,pr)}return br[vr].exports}for(var yr=typeof rr=="function"&&rr,xr=0;xr<pr.length;xr++)mr(pr[xr]);return mr}({1:[function(fr,gr,br){var pr=fr("./utils"),mr=fr("./support"),yr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";br.encode=function(xr){for(var vr,_r,Er,Tr,Rr,Nr,Dr,Ir=[],Or=0,jr=xr.length,Lr=jr,Cr=pr.getTypeOf(xr)!=="string";Or<xr.length;)Lr=jr-Or,Er=Cr?(vr=xr[Or++],_r=Or<jr?xr[Or++]:0,Or<jr?xr[Or++]:0):(vr=xr.charCodeAt(Or++),_r=Or<jr?xr.charCodeAt(Or++):0,Or<jr?xr.charCodeAt(Or++):0),Tr=vr>>2,Rr=(3&vr)<<4|_r>>4,Nr=1<Lr?(15&_r)<<2|Er>>6:64,Dr=2<Lr?63&Er:64,Ir.push(yr.charAt(Tr)+yr.charAt(Rr)+yr.charAt(Nr)+yr.charAt(Dr));return Ir.join("")},br.decode=function(xr){var vr,_r,Er,Tr,Rr,Nr,Dr=0,Ir=0,Or="data:";if(xr.substr(0,Or.length)===Or)throw new Error("Invalid base64 input, it looks like a data url.");var jr,Lr=3*(xr=xr.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(xr.charAt(xr.length-1)===yr.charAt(64)&&Lr--,xr.charAt(xr.length-2)===yr.charAt(64)&&Lr--,Lr%1!=0)throw new Error("Invalid base64 input, bad content length.");for(jr=mr.uint8array?new Uint8Array(0|Lr):new Array(0|Lr);Dr<xr.length;)vr=yr.indexOf(xr.charAt(Dr++))<<2|(Tr=yr.indexOf(xr.charAt(Dr++)))>>4,_r=(15&Tr)<<4|(Rr=yr.indexOf(xr.charAt(Dr++)))>>2,Er=(3&Rr)<<6|(Nr=yr.indexOf(xr.charAt(Dr++))),jr[Ir++]=vr,Rr!==64&&(jr[Ir++]=_r),Nr!==64&&(jr[Ir++]=Er);return jr}},{"./support":30,"./utils":32}],2:[function(fr,gr,br){var pr=fr("./external"),mr=fr("./stream/DataWorker"),yr=fr("./stream/Crc32Probe"),xr=fr("./stream/DataLengthProbe");function vr(_r,Er,Tr,Rr,Nr){this.compressedSize=_r,this.uncompressedSize=Er,this.crc32=Tr,this.compression=Rr,this.compressedContent=Nr}vr.prototype={getContentWorker:function(){var _r=new mr(pr.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new xr("data_length")),Er=this;return _r.on("end",function(){if(this.streamInfo.data_length!==Er.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_r},getCompressedWorker:function(){return new mr(pr.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},vr.createWorkerFrom=function(_r,Er,Tr){return _r.pipe(new yr).pipe(new xr("uncompressedSize")).pipe(Er.compressWorker(Tr)).pipe(new xr("compressedSize")).withStreamInfo("compression",Er)},gr.exports=vr},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(fr,gr,br){var pr=fr("./stream/GenericWorker");br.STORE={magic:"\0\0",compressWorker:function(){return new pr("STORE compression")},uncompressWorker:function(){return new pr("STORE decompression")}},br.DEFLATE=fr("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(fr,gr,br){var pr=fr("./utils"),mr=function(){for(var yr,xr=[],vr=0;vr<256;vr++){yr=vr;for(var _r=0;_r<8;_r++)yr=1&yr?3988292384^yr>>>1:yr>>>1;xr[vr]=yr}return xr}();gr.exports=function(yr,xr){return yr!==void 0&&yr.length?pr.getTypeOf(yr)!=="string"?function(vr,_r,Er,Tr){var Rr=mr,Nr=0+Er;vr^=-1;for(var Dr=0;Dr<Nr;Dr++)vr=vr>>>8^Rr[255&(vr^_r[Dr])];return-1^vr}(0|xr,yr,yr.length):function(vr,_r,Er,Tr){var Rr=mr,Nr=0+Er;vr^=-1;for(var Dr=0;Dr<Nr;Dr++)vr=vr>>>8^Rr[255&(vr^_r.charCodeAt(Dr))];return-1^vr}(0|xr,yr,yr.length):0}},{"./utils":32}],5:[function(fr,gr,br){br.base64=!1,br.binary=!1,br.dir=!1,br.createFolders=!0,br.date=null,br.compression=null,br.compressionOptions=null,br.comment=null,br.unixPermissions=null,br.dosPermissions=null},{}],6:[function(fr,gr,br){var pr;pr=typeof Promise<"u"?Promise:fr("lie"),gr.exports={Promise:pr}},{lie:37}],7:[function(fr,gr,br){var pr=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",mr=fr("pako"),yr=fr("./utils"),xr=fr("./stream/GenericWorker"),vr=pr?"uint8array":"array";function _r(Er,Tr){xr.call(this,"FlateWorker/"+Er),this._pako=null,this._pakoAction=Er,this._pakoOptions=Tr,this.meta={}}br.magic="\b\0",yr.inherits(_r,xr),_r.prototype.processChunk=function(Er){this.meta=Er.meta,this._pako===null&&this._createPako(),this._pako.push(yr.transformTo(vr,Er.data),!1)},_r.prototype.flush=function(){xr.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_r.prototype.cleanUp=function(){xr.prototype.cleanUp.call(this),this._pako=null},_r.prototype._createPako=function(){this._pako=new mr[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Er=this;this._pako.onData=function(Tr){Er.push({data:Tr,meta:Er.meta})}},br.compressWorker=function(Er){return new _r("Deflate",Er)},br.uncompressWorker=function(){return new _r("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(fr,gr,br){function pr(Rr,Nr){var Dr,Ir="";for(Dr=0;Dr<Nr;Dr++)Ir+=String.fromCharCode(255&Rr),Rr>>>=8;return Ir}function mr(Rr,Nr,Dr,Ir,Or,jr){var Lr,Cr,wr=Rr.file,Pr=Rr.compression,Ar=jr!==vr.utf8encode,Sr=yr.transformTo("string",jr(wr.name)),Mr=yr.transformTo("string",vr.utf8encode(wr.name)),qr=wr.comment,$r=yr.transformTo("string",jr(qr)),Br=yr.transformTo("string",vr.utf8encode(qr)),zr=Mr.length!==wr.name.length,Gr=Br.length!==qr.length,Vr="",Xr="",Ur="",Fr=wr.dir,Kr=wr.date,Zr={crc32:0,compressedSize:0,uncompressedSize:0};Nr&&!Dr||(Zr.crc32=Rr.crc32,Zr.compressedSize=Rr.compressedSize,Zr.uncompressedSize=Rr.uncompressedSize);var Jr=0;Nr&&(Jr|=8),Ar||!zr&&!Gr||(Jr|=2048);var tn=0,an=0;Fr&&(tn|=16),Or==="UNIX"?(an=798,tn|=function(en,rn){var sn=en;return en||(sn=rn?16893:33204),(65535&sn)<<16}(wr.unixPermissions,Fr)):(an=20,tn|=function(en){return 63&(en||0)}(wr.dosPermissions)),Lr=Kr.getUTCHours(),Lr<<=6,Lr|=Kr.getUTCMinutes(),Lr<<=5,Lr|=Kr.getUTCSeconds()/2,Cr=Kr.getUTCFullYear()-1980,Cr<<=4,Cr|=Kr.getUTCMonth()+1,Cr<<=5,Cr|=Kr.getUTCDate(),zr&&(Xr=pr(1,1)+pr(_r(Sr),4)+Mr,Vr+="up"+pr(Xr.length,2)+Xr),Gr&&(Ur=pr(1,1)+pr(_r($r),4)+Br,Vr+="uc"+pr(Ur.length,2)+Ur);var dn="";return dn+=`
\0`,dn+=pr(Jr,2),dn+=Pr.magic,dn+=pr(Lr,2),dn+=pr(Cr,2),dn+=pr(Zr.crc32,4),dn+=pr(Zr.compressedSize,4),dn+=pr(Zr.uncompressedSize,4),dn+=pr(Sr.length,2),dn+=pr(Vr.length,2),{fileRecord:Er.LOCAL_FILE_HEADER+dn+Sr+Vr,dirRecord:Er.CENTRAL_FILE_HEADER+pr(an,2)+dn+pr($r.length,2)+"\0\0\0\0"+pr(tn,4)+pr(Ir,4)+Sr+Vr+$r}}var yr=fr("../utils"),xr=fr("../stream/GenericWorker"),vr=fr("../utf8"),_r=fr("../crc32"),Er=fr("../signature");function Tr(Rr,Nr,Dr,Ir){xr.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=Nr,this.zipPlatform=Dr,this.encodeFileName=Ir,this.streamFiles=Rr,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}yr.inherits(Tr,xr),Tr.prototype.push=function(Rr){var Nr=Rr.meta.percent||0,Dr=this.entriesCount,Ir=this._sources.length;this.accumulate?this.contentBuffer.push(Rr):(this.bytesWritten+=Rr.data.length,xr.prototype.push.call(this,{data:Rr.data,meta:{currentFile:this.currentFile,percent:Dr?(Nr+100*(Dr-Ir-1))/Dr:100}}))},Tr.prototype.openedSource=function(Rr){this.currentSourceOffset=this.bytesWritten,this.currentFile=Rr.file.name;var Nr=this.streamFiles&&!Rr.file.dir;if(Nr){var Dr=mr(Rr,Nr,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Dr.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Tr.prototype.closedSource=function(Rr){this.accumulate=!1;var Nr=this.streamFiles&&!Rr.file.dir,Dr=mr(Rr,Nr,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Dr.dirRecord),Nr)this.push({data:function(Ir){return Er.DATA_DESCRIPTOR+pr(Ir.crc32,4)+pr(Ir.compressedSize,4)+pr(Ir.uncompressedSize,4)}(Rr),meta:{percent:100}});else for(this.push({data:Dr.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Tr.prototype.flush=function(){for(var Rr=this.bytesWritten,Nr=0;Nr<this.dirRecords.length;Nr++)this.push({data:this.dirRecords[Nr],meta:{percent:100}});var Dr=this.bytesWritten-Rr,Ir=function(Or,jr,Lr,Cr,wr){var Pr=yr.transformTo("string",wr(Cr));return Er.CENTRAL_DIRECTORY_END+"\0\0\0\0"+pr(Or,2)+pr(Or,2)+pr(jr,4)+pr(Lr,4)+pr(Pr.length,2)+Pr}(this.dirRecords.length,Dr,Rr,this.zipComment,this.encodeFileName);this.push({data:Ir,meta:{percent:100}})},Tr.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Tr.prototype.registerPrevious=function(Rr){this._sources.push(Rr);var Nr=this;return Rr.on("data",function(Dr){Nr.processChunk(Dr)}),Rr.on("end",function(){Nr.closedSource(Nr.previous.streamInfo),Nr._sources.length?Nr.prepareNextSource():Nr.end()}),Rr.on("error",function(Dr){Nr.error(Dr)}),this},Tr.prototype.resume=function(){return!!xr.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Tr.prototype.error=function(Rr){var Nr=this._sources;if(!xr.prototype.error.call(this,Rr))return!1;for(var Dr=0;Dr<Nr.length;Dr++)try{Nr[Dr].error(Rr)}catch{}return!0},Tr.prototype.lock=function(){xr.prototype.lock.call(this);for(var Rr=this._sources,Nr=0;Nr<Rr.length;Nr++)Rr[Nr].lock()},gr.exports=Tr},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(fr,gr,br){var pr=fr("../compressions"),mr=fr("./ZipFileWorker");br.generateWorker=function(yr,xr,vr){var _r=new mr(xr.streamFiles,vr,xr.platform,xr.encodeFileName),Er=0;try{yr.forEach(function(Tr,Rr){Er++;var Nr=function(jr,Lr){var Cr=jr||Lr,wr=pr[Cr];if(!wr)throw new Error(Cr+" is not a valid compression method !");return wr}(Rr.options.compression,xr.compression),Dr=Rr.options.compressionOptions||xr.compressionOptions||{},Ir=Rr.dir,Or=Rr.date;Rr._compressWorker(Nr,Dr).withStreamInfo("file",{name:Tr,dir:Ir,date:Or,comment:Rr.comment||"",unixPermissions:Rr.unixPermissions,dosPermissions:Rr.dosPermissions}).pipe(_r)}),_r.entriesCount=Er}catch(Tr){_r.error(Tr)}return _r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(fr,gr,br){function pr(){if(!(this instanceof pr))return new pr;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var mr=new pr;for(var yr in this)typeof this[yr]!="function"&&(mr[yr]=this[yr]);return mr}}(pr.prototype=fr("./object")).loadAsync=fr("./load"),pr.support=fr("./support"),pr.defaults=fr("./defaults"),pr.version="3.10.1",pr.loadAsync=function(mr,yr){return new pr().loadAsync(mr,yr)},pr.external=fr("./external"),gr.exports=pr},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(fr,gr,br){var pr=fr("./utils"),mr=fr("./external"),yr=fr("./utf8"),xr=fr("./zipEntries"),vr=fr("./stream/Crc32Probe"),_r=fr("./nodejsUtils");function Er(Tr){return new mr.Promise(function(Rr,Nr){var Dr=Tr.decompressed.getContentWorker().pipe(new vr);Dr.on("error",function(Ir){Nr(Ir)}).on("end",function(){Dr.streamInfo.crc32!==Tr.decompressed.crc32?Nr(new Error("Corrupted zip : CRC32 mismatch")):Rr()}).resume()})}gr.exports=function(Tr,Rr){var Nr=this;return Rr=pr.extend(Rr||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:yr.utf8decode}),_r.isNode&&_r.isStream(Tr)?mr.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):pr.prepareContent("the loaded zip file",Tr,!0,Rr.optimizedBinaryString,Rr.base64).then(function(Dr){var Ir=new xr(Rr);return Ir.load(Dr),Ir}).then(function(Dr){var Ir=[mr.Promise.resolve(Dr)],Or=Dr.files;if(Rr.checkCRC32)for(var jr=0;jr<Or.length;jr++)Ir.push(Er(Or[jr]));return mr.Promise.all(Ir)}).then(function(Dr){for(var Ir=Dr.shift(),Or=Ir.files,jr=0;jr<Or.length;jr++){var Lr=Or[jr],Cr=Lr.fileNameStr,wr=pr.resolve(Lr.fileNameStr);Nr.file(wr,Lr.decompressed,{binary:!0,optimizedBinaryString:!0,date:Lr.date,dir:Lr.dir,comment:Lr.fileCommentStr.length?Lr.fileCommentStr:null,unixPermissions:Lr.unixPermissions,dosPermissions:Lr.dosPermissions,createFolders:Rr.createFolders}),Lr.dir||(Nr.file(wr).unsafeOriginalName=Cr)}return Ir.zipComment.length&&(Nr.comment=Ir.zipComment),Nr})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(fr,gr,br){var pr=fr("../utils"),mr=fr("../stream/GenericWorker");function yr(xr,vr){mr.call(this,"Nodejs stream input adapter for "+xr),this._upstreamEnded=!1,this._bindStream(vr)}pr.inherits(yr,mr),yr.prototype._bindStream=function(xr){var vr=this;(this._stream=xr).pause(),xr.on("data",function(_r){vr.push({data:_r,meta:{percent:0}})}).on("error",function(_r){vr.isPaused?this.generatedError=_r:vr.error(_r)}).on("end",function(){vr.isPaused?vr._upstreamEnded=!0:vr.end()})},yr.prototype.pause=function(){return!!mr.prototype.pause.call(this)&&(this._stream.pause(),!0)},yr.prototype.resume=function(){return!!mr.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},gr.exports=yr},{"../stream/GenericWorker":28,"../utils":32}],13:[function(fr,gr,br){var pr=fr("readable-stream").Readable;function mr(yr,xr,vr){pr.call(this,xr),this._helper=yr;var _r=this;yr.on("data",function(Er,Tr){_r.push(Er)||_r._helper.pause(),vr&&vr(Tr)}).on("error",function(Er){_r.emit("error",Er)}).on("end",function(){_r.push(null)})}fr("../utils").inherits(mr,pr),mr.prototype._read=function(){this._helper.resume()},gr.exports=mr},{"../utils":32,"readable-stream":16}],14:[function(fr,gr,br){gr.exports={isNode:cr!==void 0,newBufferFrom:function(pr,mr){if(cr.from&&cr.from!==Uint8Array.from)return cr.from(pr,mr);if(typeof pr=="number")throw new Error('The "data" argument must not be a number');return new cr(pr,mr)},allocBuffer:function(pr){if(cr.alloc)return cr.alloc(pr);var mr=new cr(pr);return mr.fill(0),mr},isBuffer:function(pr){return cr.isBuffer(pr)},isStream:function(pr){return pr&&typeof pr.on=="function"&&typeof pr.pause=="function"&&typeof pr.resume=="function"}}},{}],15:[function(fr,gr,br){function pr(wr,Pr,Ar){var Sr,Mr=yr.getTypeOf(Pr),qr=yr.extend(Ar||{},_r);qr.date=qr.date||new Date,qr.compression!==null&&(qr.compression=qr.compression.toUpperCase()),typeof qr.unixPermissions=="string"&&(qr.unixPermissions=parseInt(qr.unixPermissions,8)),qr.unixPermissions&&16384&qr.unixPermissions&&(qr.dir=!0),qr.dosPermissions&&16&qr.dosPermissions&&(qr.dir=!0),qr.dir&&(wr=Or(wr)),qr.createFolders&&(Sr=Ir(wr))&&jr.call(this,Sr,!0);var $r=Mr==="string"&&qr.binary===!1&&qr.base64===!1;Ar&&Ar.binary!==void 0||(qr.binary=!$r),(Pr instanceof Er&&Pr.uncompressedSize===0||qr.dir||!Pr||Pr.length===0)&&(qr.base64=!1,qr.binary=!0,Pr="",qr.compression="STORE",Mr="string");var Br;Br=Pr instanceof Er||Pr instanceof xr?Pr:Nr.isNode&&Nr.isStream(Pr)?new Dr(wr,Pr):yr.prepareContent(wr,Pr,qr.binary,qr.optimizedBinaryString,qr.base64);var zr=new Tr(wr,Br,qr);this.files[wr]=zr}var mr=fr("./utf8"),yr=fr("./utils"),xr=fr("./stream/GenericWorker"),vr=fr("./stream/StreamHelper"),_r=fr("./defaults"),Er=fr("./compressedObject"),Tr=fr("./zipObject"),Rr=fr("./generate"),Nr=fr("./nodejsUtils"),Dr=fr("./nodejs/NodejsStreamInputAdapter"),Ir=function(wr){wr.slice(-1)==="/"&&(wr=wr.substring(0,wr.length-1));var Pr=wr.lastIndexOf("/");return 0<Pr?wr.substring(0,Pr):""},Or=function(wr){return wr.slice(-1)!=="/"&&(wr+="/"),wr},jr=function(wr,Pr){return Pr=Pr!==void 0?Pr:_r.createFolders,wr=Or(wr),this.files[wr]||pr.call(this,wr,null,{dir:!0,createFolders:Pr}),this.files[wr]};function Lr(wr){return Object.prototype.toString.call(wr)==="[object RegExp]"}var Cr={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(wr){var Pr,Ar,Sr;for(Pr in this.files)Sr=this.files[Pr],(Ar=Pr.slice(this.root.length,Pr.length))&&Pr.slice(0,this.root.length)===this.root&&wr(Ar,Sr)},filter:function(wr){var Pr=[];return this.forEach(function(Ar,Sr){wr(Ar,Sr)&&Pr.push(Sr)}),Pr},file:function(wr,Pr,Ar){if(arguments.length!==1)return wr=this.root+wr,pr.call(this,wr,Pr,Ar),this;if(Lr(wr)){var Sr=wr;return this.filter(function(qr,$r){return!$r.dir&&Sr.test(qr)})}var Mr=this.files[this.root+wr];return Mr&&!Mr.dir?Mr:null},folder:function(wr){if(!wr)return this;if(Lr(wr))return this.filter(function(Mr,qr){return qr.dir&&wr.test(Mr)});var Pr=this.root+wr,Ar=jr.call(this,Pr),Sr=this.clone();return Sr.root=Ar.name,Sr},remove:function(wr){wr=this.root+wr;var Pr=this.files[wr];if(Pr||(wr.slice(-1)!=="/"&&(wr+="/"),Pr=this.files[wr]),Pr&&!Pr.dir)delete this.files[wr];else for(var Ar=this.filter(function(Mr,qr){return qr.name.slice(0,wr.length)===wr}),Sr=0;Sr<Ar.length;Sr++)delete this.files[Ar[Sr].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(wr){var Pr,Ar={};try{if((Ar=yr.extend(wr||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:mr.utf8encode})).type=Ar.type.toLowerCase(),Ar.compression=Ar.compression.toUpperCase(),Ar.type==="binarystring"&&(Ar.type="string"),!Ar.type)throw new Error("No output type specified.");yr.checkSupport(Ar.type),Ar.platform!=="darwin"&&Ar.platform!=="freebsd"&&Ar.platform!=="linux"&&Ar.platform!=="sunos"||(Ar.platform="UNIX"),Ar.platform==="win32"&&(Ar.platform="DOS");var Sr=Ar.comment||this.comment||"";Pr=Rr.generateWorker(this,Ar,Sr)}catch(Mr){(Pr=new xr("error")).error(Mr)}return new vr(Pr,Ar.type||"string",Ar.mimeType)},generateAsync:function(wr,Pr){return this.generateInternalStream(wr).accumulate(Pr)},generateNodeStream:function(wr,Pr){return(wr=wr||{}).type||(wr.type="nodebuffer"),this.generateInternalStream(wr).toNodejsStream(Pr)}};gr.exports=Cr},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(fr,gr,br){gr.exports=fr("stream")},{stream:void 0}],17:[function(fr,gr,br){var pr=fr("./DataReader");function mr(yr){pr.call(this,yr);for(var xr=0;xr<this.data.length;xr++)yr[xr]=255&yr[xr]}fr("../utils").inherits(mr,pr),mr.prototype.byteAt=function(yr){return this.data[this.zero+yr]},mr.prototype.lastIndexOfSignature=function(yr){for(var xr=yr.charCodeAt(0),vr=yr.charCodeAt(1),_r=yr.charCodeAt(2),Er=yr.charCodeAt(3),Tr=this.length-4;0<=Tr;--Tr)if(this.data[Tr]===xr&&this.data[Tr+1]===vr&&this.data[Tr+2]===_r&&this.data[Tr+3]===Er)return Tr-this.zero;return-1},mr.prototype.readAndCheckSignature=function(yr){var xr=yr.charCodeAt(0),vr=yr.charCodeAt(1),_r=yr.charCodeAt(2),Er=yr.charCodeAt(3),Tr=this.readData(4);return xr===Tr[0]&&vr===Tr[1]&&_r===Tr[2]&&Er===Tr[3]},mr.prototype.readData=function(yr){if(this.checkOffset(yr),yr===0)return[];var xr=this.data.slice(this.zero+this.index,this.zero+this.index+yr);return this.index+=yr,xr},gr.exports=mr},{"../utils":32,"./DataReader":18}],18:[function(fr,gr,br){var pr=fr("../utils");function mr(yr){this.data=yr,this.length=yr.length,this.index=0,this.zero=0}mr.prototype={checkOffset:function(yr){this.checkIndex(this.index+yr)},checkIndex:function(yr){if(this.length<this.zero+yr||yr<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+yr+"). Corrupted zip ?")},setIndex:function(yr){this.checkIndex(yr),this.index=yr},skip:function(yr){this.setIndex(this.index+yr)},byteAt:function(){},readInt:function(yr){var xr,vr=0;for(this.checkOffset(yr),xr=this.index+yr-1;xr>=this.index;xr--)vr=(vr<<8)+this.byteAt(xr);return this.index+=yr,vr},readString:function(yr){return pr.transformTo("string",this.readData(yr))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var yr=this.readInt(4);return new Date(Date.UTC(1980+(yr>>25&127),(yr>>21&15)-1,yr>>16&31,yr>>11&31,yr>>5&63,(31&yr)<<1))}},gr.exports=mr},{"../utils":32}],19:[function(fr,gr,br){var pr=fr("./Uint8ArrayReader");function mr(yr){pr.call(this,yr)}fr("../utils").inherits(mr,pr),mr.prototype.readData=function(yr){this.checkOffset(yr);var xr=this.data.slice(this.zero+this.index,this.zero+this.index+yr);return this.index+=yr,xr},gr.exports=mr},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(fr,gr,br){var pr=fr("./DataReader");function mr(yr){pr.call(this,yr)}fr("../utils").inherits(mr,pr),mr.prototype.byteAt=function(yr){return this.data.charCodeAt(this.zero+yr)},mr.prototype.lastIndexOfSignature=function(yr){return this.data.lastIndexOf(yr)-this.zero},mr.prototype.readAndCheckSignature=function(yr){return yr===this.readData(4)},mr.prototype.readData=function(yr){this.checkOffset(yr);var xr=this.data.slice(this.zero+this.index,this.zero+this.index+yr);return this.index+=yr,xr},gr.exports=mr},{"../utils":32,"./DataReader":18}],21:[function(fr,gr,br){var pr=fr("./ArrayReader");function mr(yr){pr.call(this,yr)}fr("../utils").inherits(mr,pr),mr.prototype.readData=function(yr){if(this.checkOffset(yr),yr===0)return new Uint8Array(0);var xr=this.data.subarray(this.zero+this.index,this.zero+this.index+yr);return this.index+=yr,xr},gr.exports=mr},{"../utils":32,"./ArrayReader":17}],22:[function(fr,gr,br){var pr=fr("../utils"),mr=fr("../support"),yr=fr("./ArrayReader"),xr=fr("./StringReader"),vr=fr("./NodeBufferReader"),_r=fr("./Uint8ArrayReader");gr.exports=function(Er){var Tr=pr.getTypeOf(Er);return pr.checkSupport(Tr),Tr!=="string"||mr.uint8array?Tr==="nodebuffer"?new vr(Er):mr.uint8array?new _r(pr.transformTo("uint8array",Er)):new yr(pr.transformTo("array",Er)):new xr(Er)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(fr,gr,br){br.LOCAL_FILE_HEADER="PK",br.CENTRAL_FILE_HEADER="PK",br.CENTRAL_DIRECTORY_END="PK",br.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",br.ZIP64_CENTRAL_DIRECTORY_END="PK",br.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(fr,gr,br){var pr=fr("./GenericWorker"),mr=fr("../utils");function yr(xr){pr.call(this,"ConvertWorker to "+xr),this.destType=xr}mr.inherits(yr,pr),yr.prototype.processChunk=function(xr){this.push({data:mr.transformTo(this.destType,xr.data),meta:xr.meta})},gr.exports=yr},{"../utils":32,"./GenericWorker":28}],25:[function(fr,gr,br){var pr=fr("./GenericWorker"),mr=fr("../crc32");function yr(){pr.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}fr("../utils").inherits(yr,pr),yr.prototype.processChunk=function(xr){this.streamInfo.crc32=mr(xr.data,this.streamInfo.crc32||0),this.push(xr)},gr.exports=yr},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(fr,gr,br){var pr=fr("../utils"),mr=fr("./GenericWorker");function yr(xr){mr.call(this,"DataLengthProbe for "+xr),this.propName=xr,this.withStreamInfo(xr,0)}pr.inherits(yr,mr),yr.prototype.processChunk=function(xr){if(xr){var vr=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=vr+xr.data.length}mr.prototype.processChunk.call(this,xr)},gr.exports=yr},{"../utils":32,"./GenericWorker":28}],27:[function(fr,gr,br){var pr=fr("../utils"),mr=fr("./GenericWorker");function yr(xr){mr.call(this,"DataWorker");var vr=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,xr.then(function(_r){vr.dataIsReady=!0,vr.data=_r,vr.max=_r&&_r.length||0,vr.type=pr.getTypeOf(_r),vr.isPaused||vr._tickAndRepeat()},function(_r){vr.error(_r)})}pr.inherits(yr,mr),yr.prototype.cleanUp=function(){mr.prototype.cleanUp.call(this),this.data=null},yr.prototype.resume=function(){return!!mr.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,pr.delay(this._tickAndRepeat,[],this)),!0)},yr.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(pr.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},yr.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var xr=null,vr=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":xr=this.data.substring(this.index,vr);break;case"uint8array":xr=this.data.subarray(this.index,vr);break;case"array":case"nodebuffer":xr=this.data.slice(this.index,vr)}return this.index=vr,this.push({data:xr,meta:{percent:this.max?this.index/this.max*100:0}})},gr.exports=yr},{"../utils":32,"./GenericWorker":28}],28:[function(fr,gr,br){function pr(mr){this.name=mr||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}pr.prototype={push:function(mr){this.emit("data",mr)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(mr){this.emit("error",mr)}return!0},error:function(mr){return!this.isFinished&&(this.isPaused?this.generatedError=mr:(this.isFinished=!0,this.emit("error",mr),this.previous&&this.previous.error(mr),this.cleanUp()),!0)},on:function(mr,yr){return this._listeners[mr].push(yr),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(mr,yr){if(this._listeners[mr])for(var xr=0;xr<this._listeners[mr].length;xr++)this._listeners[mr][xr].call(this,yr)},pipe:function(mr){return mr.registerPrevious(this)},registerPrevious:function(mr){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=mr.streamInfo,this.mergeStreamInfo(),this.previous=mr;var yr=this;return mr.on("data",function(xr){yr.processChunk(xr)}),mr.on("end",function(){yr.end()}),mr.on("error",function(xr){yr.error(xr)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var mr=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),mr=!0),this.previous&&this.previous.resume(),!mr},flush:function(){},processChunk:function(mr){this.push(mr)},withStreamInfo:function(mr,yr){return this.extraStreamInfo[mr]=yr,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var mr in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,mr)&&(this.streamInfo[mr]=this.extraStreamInfo[mr])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var mr="Worker "+this.name;return this.previous?this.previous+" -> "+mr:mr}},gr.exports=pr},{}],29:[function(fr,gr,br){var pr=fr("../utils"),mr=fr("./ConvertWorker"),yr=fr("./GenericWorker"),xr=fr("../base64"),vr=fr("../support"),_r=fr("../external"),Er=null;if(vr.nodestream)try{Er=fr("../nodejs/NodejsStreamOutputAdapter")}catch{}function Tr(Rr,Nr,Dr){var Ir=Nr;switch(Nr){case"blob":case"arraybuffer":Ir="uint8array";break;case"base64":Ir="string"}try{this._internalType=Ir,this._outputType=Nr,this._mimeType=Dr,pr.checkSupport(Ir),this._worker=Rr.pipe(new mr(Ir)),Rr.lock()}catch(Or){this._worker=new yr("error"),this._worker.error(Or)}}Tr.prototype={accumulate:function(Rr){return function(Nr,Dr){return new _r.Promise(function(Ir,Or){var jr=[],Lr=Nr._internalType,Cr=Nr._outputType,wr=Nr._mimeType;Nr.on("data",function(Pr,Ar){jr.push(Pr),Dr&&Dr(Ar)}).on("error",function(Pr){jr=[],Or(Pr)}).on("end",function(){try{var Pr=function(Ar,Sr,Mr){switch(Ar){case"blob":return pr.newBlob(pr.transformTo("arraybuffer",Sr),Mr);case"base64":return xr.encode(Sr);default:return pr.transformTo(Ar,Sr)}}(Cr,function(Ar,Sr){var Mr,qr=0,$r=null,Br=0;for(Mr=0;Mr<Sr.length;Mr++)Br+=Sr[Mr].length;switch(Ar){case"string":return Sr.join("");case"array":return Array.prototype.concat.apply([],Sr);case"uint8array":for($r=new Uint8Array(Br),Mr=0;Mr<Sr.length;Mr++)$r.set(Sr[Mr],qr),qr+=Sr[Mr].length;return $r;case"nodebuffer":return cr.concat(Sr);default:throw new Error("concat : unsupported type '"+Ar+"'")}}(Lr,jr),wr);Ir(Pr)}catch(Ar){Or(Ar)}jr=[]}).resume()})}(this,Rr)},on:function(Rr,Nr){var Dr=this;return Rr==="data"?this._worker.on(Rr,function(Ir){Nr.call(Dr,Ir.data,Ir.meta)}):this._worker.on(Rr,function(){pr.delay(Nr,arguments,Dr)}),this},resume:function(){return pr.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(Rr){if(pr.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Er(this,{objectMode:this._outputType!=="nodebuffer"},Rr)}},gr.exports=Tr},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(fr,gr,br){if(br.base64=!0,br.array=!0,br.string=!0,br.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",br.nodebuffer=cr!==void 0,br.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")br.blob=!1;else{var pr=new ArrayBuffer(0);try{br.blob=new Blob([pr],{type:"application/zip"}).size===0}catch{try{var mr=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);mr.append(pr),br.blob=mr.getBlob("application/zip").size===0}catch{br.blob=!1}}}try{br.nodestream=!!fr("readable-stream").Readable}catch{br.nodestream=!1}},{"readable-stream":16}],31:[function(fr,gr,br){for(var pr=fr("./utils"),mr=fr("./support"),yr=fr("./nodejsUtils"),xr=fr("./stream/GenericWorker"),vr=new Array(256),_r=0;_r<256;_r++)vr[_r]=252<=_r?6:248<=_r?5:240<=_r?4:224<=_r?3:192<=_r?2:1;function Er(){xr.call(this,"utf-8 decode"),this.leftOver=null}function Tr(){xr.call(this,"utf-8 encode")}vr[254]=vr[254]=1,br.utf8encode=function(Rr){return mr.nodebuffer?yr.newBufferFrom(Rr,"utf-8"):function(Nr){var Dr,Ir,Or,jr,Lr,Cr=Nr.length,wr=0;for(jr=0;jr<Cr;jr++)(64512&(Ir=Nr.charCodeAt(jr)))==55296&&jr+1<Cr&&(64512&(Or=Nr.charCodeAt(jr+1)))==56320&&(Ir=65536+(Ir-55296<<10)+(Or-56320),jr++),wr+=Ir<128?1:Ir<2048?2:Ir<65536?3:4;for(Dr=mr.uint8array?new Uint8Array(wr):new Array(wr),jr=Lr=0;Lr<wr;jr++)(64512&(Ir=Nr.charCodeAt(jr)))==55296&&jr+1<Cr&&(64512&(Or=Nr.charCodeAt(jr+1)))==56320&&(Ir=65536+(Ir-55296<<10)+(Or-56320),jr++),Ir<128?Dr[Lr++]=Ir:(Ir<2048?Dr[Lr++]=192|Ir>>>6:(Ir<65536?Dr[Lr++]=224|Ir>>>12:(Dr[Lr++]=240|Ir>>>18,Dr[Lr++]=128|Ir>>>12&63),Dr[Lr++]=128|Ir>>>6&63),Dr[Lr++]=128|63&Ir);return Dr}(Rr)},br.utf8decode=function(Rr){return mr.nodebuffer?pr.transformTo("nodebuffer",Rr).toString("utf-8"):function(Nr){var Dr,Ir,Or,jr,Lr=Nr.length,Cr=new Array(2*Lr);for(Dr=Ir=0;Dr<Lr;)if((Or=Nr[Dr++])<128)Cr[Ir++]=Or;else if(4<(jr=vr[Or]))Cr[Ir++]=65533,Dr+=jr-1;else{for(Or&=jr===2?31:jr===3?15:7;1<jr&&Dr<Lr;)Or=Or<<6|63&Nr[Dr++],jr--;1<jr?Cr[Ir++]=65533:Or<65536?Cr[Ir++]=Or:(Or-=65536,Cr[Ir++]=55296|Or>>10&1023,Cr[Ir++]=56320|1023&Or)}return Cr.length!==Ir&&(Cr.subarray?Cr=Cr.subarray(0,Ir):Cr.length=Ir),pr.applyFromCharCode(Cr)}(Rr=pr.transformTo(mr.uint8array?"uint8array":"array",Rr))},pr.inherits(Er,xr),Er.prototype.processChunk=function(Rr){var Nr=pr.transformTo(mr.uint8array?"uint8array":"array",Rr.data);if(this.leftOver&&this.leftOver.length){if(mr.uint8array){var Dr=Nr;(Nr=new Uint8Array(Dr.length+this.leftOver.length)).set(this.leftOver,0),Nr.set(Dr,this.leftOver.length)}else Nr=this.leftOver.concat(Nr);this.leftOver=null}var Ir=function(jr,Lr){var Cr;for((Lr=Lr||jr.length)>jr.length&&(Lr=jr.length),Cr=Lr-1;0<=Cr&&(192&jr[Cr])==128;)Cr--;return Cr<0||Cr===0?Lr:Cr+vr[jr[Cr]]>Lr?Cr:Lr}(Nr),Or=Nr;Ir!==Nr.length&&(mr.uint8array?(Or=Nr.subarray(0,Ir),this.leftOver=Nr.subarray(Ir,Nr.length)):(Or=Nr.slice(0,Ir),this.leftOver=Nr.slice(Ir,Nr.length))),this.push({data:br.utf8decode(Or),meta:Rr.meta})},Er.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:br.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},br.Utf8DecodeWorker=Er,pr.inherits(Tr,xr),Tr.prototype.processChunk=function(Rr){this.push({data:br.utf8encode(Rr.data),meta:Rr.meta})},br.Utf8EncodeWorker=Tr},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(fr,gr,br){var pr=fr("./support"),mr=fr("./base64"),yr=fr("./nodejsUtils"),xr=fr("./external");function vr(Dr){return Dr}function _r(Dr,Ir){for(var Or=0;Or<Dr.length;++Or)Ir[Or]=255&Dr.charCodeAt(Or);return Ir}fr("setimmediate"),br.newBlob=function(Dr,Ir){br.checkSupport("blob");try{return new Blob([Dr],{type:Ir})}catch{try{var Or=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return Or.append(Dr),Or.getBlob(Ir)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Er={stringifyByChunk:function(Dr,Ir,Or){var jr=[],Lr=0,Cr=Dr.length;if(Cr<=Or)return String.fromCharCode.apply(null,Dr);for(;Lr<Cr;)Ir==="array"||Ir==="nodebuffer"?jr.push(String.fromCharCode.apply(null,Dr.slice(Lr,Math.min(Lr+Or,Cr)))):jr.push(String.fromCharCode.apply(null,Dr.subarray(Lr,Math.min(Lr+Or,Cr)))),Lr+=Or;return jr.join("")},stringifyByChar:function(Dr){for(var Ir="",Or=0;Or<Dr.length;Or++)Ir+=String.fromCharCode(Dr[Or]);return Ir},applyCanBeUsed:{uint8array:function(){try{return pr.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return pr.nodebuffer&&String.fromCharCode.apply(null,yr.allocBuffer(1)).length===1}catch{return!1}}()}};function Tr(Dr){var Ir=65536,Or=br.getTypeOf(Dr),jr=!0;if(Or==="uint8array"?jr=Er.applyCanBeUsed.uint8array:Or==="nodebuffer"&&(jr=Er.applyCanBeUsed.nodebuffer),jr)for(;1<Ir;)try{return Er.stringifyByChunk(Dr,Or,Ir)}catch{Ir=Math.floor(Ir/2)}return Er.stringifyByChar(Dr)}function Rr(Dr,Ir){for(var Or=0;Or<Dr.length;Or++)Ir[Or]=Dr[Or];return Ir}br.applyFromCharCode=Tr;var Nr={};Nr.string={string:vr,array:function(Dr){return _r(Dr,new Array(Dr.length))},arraybuffer:function(Dr){return Nr.string.uint8array(Dr).buffer},uint8array:function(Dr){return _r(Dr,new Uint8Array(Dr.length))},nodebuffer:function(Dr){return _r(Dr,yr.allocBuffer(Dr.length))}},Nr.array={string:Tr,array:vr,arraybuffer:function(Dr){return new Uint8Array(Dr).buffer},uint8array:function(Dr){return new Uint8Array(Dr)},nodebuffer:function(Dr){return yr.newBufferFrom(Dr)}},Nr.arraybuffer={string:function(Dr){return Tr(new Uint8Array(Dr))},array:function(Dr){return Rr(new Uint8Array(Dr),new Array(Dr.byteLength))},arraybuffer:vr,uint8array:function(Dr){return new Uint8Array(Dr)},nodebuffer:function(Dr){return yr.newBufferFrom(new Uint8Array(Dr))}},Nr.uint8array={string:Tr,array:function(Dr){return Rr(Dr,new Array(Dr.length))},arraybuffer:function(Dr){return Dr.buffer},uint8array:vr,nodebuffer:function(Dr){return yr.newBufferFrom(Dr)}},Nr.nodebuffer={string:Tr,array:function(Dr){return Rr(Dr,new Array(Dr.length))},arraybuffer:function(Dr){return Nr.nodebuffer.uint8array(Dr).buffer},uint8array:function(Dr){return Rr(Dr,new Uint8Array(Dr.length))},nodebuffer:vr},br.transformTo=function(Dr,Ir){if(Ir=Ir||"",!Dr)return Ir;br.checkSupport(Dr);var Or=br.getTypeOf(Ir);return Nr[Or][Dr](Ir)},br.resolve=function(Dr){for(var Ir=Dr.split("/"),Or=[],jr=0;jr<Ir.length;jr++){var Lr=Ir[jr];Lr==="."||Lr===""&&jr!==0&&jr!==Ir.length-1||(Lr===".."?Or.pop():Or.push(Lr))}return Or.join("/")},br.getTypeOf=function(Dr){return typeof Dr=="string"?"string":Object.prototype.toString.call(Dr)==="[object Array]"?"array":pr.nodebuffer&&yr.isBuffer(Dr)?"nodebuffer":pr.uint8array&&Dr instanceof Uint8Array?"uint8array":pr.arraybuffer&&Dr instanceof ArrayBuffer?"arraybuffer":void 0},br.checkSupport=function(Dr){if(!pr[Dr.toLowerCase()])throw new Error(Dr+" is not supported by this platform")},br.MAX_VALUE_16BITS=65535,br.MAX_VALUE_32BITS=-1,br.pretty=function(Dr){var Ir,Or,jr="";for(Or=0;Or<(Dr||"").length;Or++)jr+="\\x"+((Ir=Dr.charCodeAt(Or))<16?"0":"")+Ir.toString(16).toUpperCase();return jr},br.delay=function(Dr,Ir,Or){dr(function(){Dr.apply(Or||null,Ir||[])})},br.inherits=function(Dr,Ir){function Or(){}Or.prototype=Ir.prototype,Dr.prototype=new Or},br.extend=function(){var Dr,Ir,Or={};for(Dr=0;Dr<arguments.length;Dr++)for(Ir in arguments[Dr])Object.prototype.hasOwnProperty.call(arguments[Dr],Ir)&&Or[Ir]===void 0&&(Or[Ir]=arguments[Dr][Ir]);return Or},br.prepareContent=function(Dr,Ir,Or,jr,Lr){return xr.Promise.resolve(Ir).then(function(Cr){return pr.blob&&(Cr instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(Cr))!==-1)&&typeof FileReader<"u"?new xr.Promise(function(wr,Pr){var Ar=new FileReader;Ar.onload=function(Sr){wr(Sr.target.result)},Ar.onerror=function(Sr){Pr(Sr.target.error)},Ar.readAsArrayBuffer(Cr)}):Cr}).then(function(Cr){var wr=br.getTypeOf(Cr);return wr?(wr==="arraybuffer"?Cr=br.transformTo("uint8array",Cr):wr==="string"&&(Lr?Cr=mr.decode(Cr):Or&&jr!==!0&&(Cr=function(Pr){return _r(Pr,pr.uint8array?new Uint8Array(Pr.length):new Array(Pr.length))}(Cr))),Cr):xr.Promise.reject(new Error("Can't read the data of '"+Dr+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(fr,gr,br){var pr=fr("./reader/readerFor"),mr=fr("./utils"),yr=fr("./signature"),xr=fr("./zipEntry"),vr=fr("./support");function _r(Er){this.files=[],this.loadOptions=Er}_r.prototype={checkSignature:function(Er){if(!this.reader.readAndCheckSignature(Er)){this.reader.index-=4;var Tr=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+mr.pretty(Tr)+", expected "+mr.pretty(Er)+")")}},isSignature:function(Er,Tr){var Rr=this.reader.index;this.reader.setIndex(Er);var Nr=this.reader.readString(4)===Tr;return this.reader.setIndex(Rr),Nr},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Er=this.reader.readData(this.zipCommentLength),Tr=vr.uint8array?"uint8array":"array",Rr=mr.transformTo(Tr,Er);this.zipComment=this.loadOptions.decodeFileName(Rr)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Er,Tr,Rr,Nr=this.zip64EndOfCentralSize-44;0<Nr;)Er=this.reader.readInt(2),Tr=this.reader.readInt(4),Rr=this.reader.readData(Tr),this.zip64ExtensibleData[Er]={id:Er,length:Tr,value:Rr}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Er,Tr;for(Er=0;Er<this.files.length;Er++)Tr=this.files[Er],this.reader.setIndex(Tr.localHeaderOffset),this.checkSignature(yr.LOCAL_FILE_HEADER),Tr.readLocalPart(this.reader),Tr.handleUTF8(),Tr.processAttributes()},readCentralDir:function(){var Er;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(yr.CENTRAL_FILE_HEADER);)(Er=new xr({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Er);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Er=this.reader.lastIndexOfSignature(yr.CENTRAL_DIRECTORY_END);if(Er<0)throw this.isSignature(0,yr.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Er);var Tr=Er;if(this.checkSignature(yr.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===mr.MAX_VALUE_16BITS||this.diskWithCentralDirStart===mr.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===mr.MAX_VALUE_16BITS||this.centralDirRecords===mr.MAX_VALUE_16BITS||this.centralDirSize===mr.MAX_VALUE_32BITS||this.centralDirOffset===mr.MAX_VALUE_32BITS){if(this.zip64=!0,(Er=this.reader.lastIndexOfSignature(yr.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Er),this.checkSignature(yr.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,yr.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(yr.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(yr.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Rr=this.centralDirOffset+this.centralDirSize;this.zip64&&(Rr+=20,Rr+=12+this.zip64EndOfCentralSize);var Nr=Tr-Rr;if(0<Nr)this.isSignature(Tr,yr.CENTRAL_FILE_HEADER)||(this.reader.zero=Nr);else if(Nr<0)throw new Error("Corrupted zip: missing "+Math.abs(Nr)+" bytes.")},prepareReader:function(Er){this.reader=pr(Er)},load:function(Er){this.prepareReader(Er),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},gr.exports=_r},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(fr,gr,br){var pr=fr("./reader/readerFor"),mr=fr("./utils"),yr=fr("./compressedObject"),xr=fr("./crc32"),vr=fr("./utf8"),_r=fr("./compressions"),Er=fr("./support");function Tr(Rr,Nr){this.options=Rr,this.loadOptions=Nr}Tr.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(Rr){var Nr,Dr;if(Rr.skip(22),this.fileNameLength=Rr.readInt(2),Dr=Rr.readInt(2),this.fileName=Rr.readData(this.fileNameLength),Rr.skip(Dr),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((Nr=function(Ir){for(var Or in _r)if(Object.prototype.hasOwnProperty.call(_r,Or)&&_r[Or].magic===Ir)return _r[Or];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+mr.pretty(this.compressionMethod)+" unknown (inner file : "+mr.transformTo("string",this.fileName)+")");this.decompressed=new yr(this.compressedSize,this.uncompressedSize,this.crc32,Nr,Rr.readData(this.compressedSize))},readCentralPart:function(Rr){this.versionMadeBy=Rr.readInt(2),Rr.skip(2),this.bitFlag=Rr.readInt(2),this.compressionMethod=Rr.readString(2),this.date=Rr.readDate(),this.crc32=Rr.readInt(4),this.compressedSize=Rr.readInt(4),this.uncompressedSize=Rr.readInt(4);var Nr=Rr.readInt(2);if(this.extraFieldsLength=Rr.readInt(2),this.fileCommentLength=Rr.readInt(2),this.diskNumberStart=Rr.readInt(2),this.internalFileAttributes=Rr.readInt(2),this.externalFileAttributes=Rr.readInt(4),this.localHeaderOffset=Rr.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Rr.skip(Nr),this.readExtraFields(Rr),this.parseZIP64ExtraField(Rr),this.fileComment=Rr.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Rr=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),Rr==0&&(this.dosPermissions=63&this.externalFileAttributes),Rr==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Rr=pr(this.extraFields[1].value);this.uncompressedSize===mr.MAX_VALUE_32BITS&&(this.uncompressedSize=Rr.readInt(8)),this.compressedSize===mr.MAX_VALUE_32BITS&&(this.compressedSize=Rr.readInt(8)),this.localHeaderOffset===mr.MAX_VALUE_32BITS&&(this.localHeaderOffset=Rr.readInt(8)),this.diskNumberStart===mr.MAX_VALUE_32BITS&&(this.diskNumberStart=Rr.readInt(4))}},readExtraFields:function(Rr){var Nr,Dr,Ir,Or=Rr.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});Rr.index+4<Or;)Nr=Rr.readInt(2),Dr=Rr.readInt(2),Ir=Rr.readData(Dr),this.extraFields[Nr]={id:Nr,length:Dr,value:Ir};Rr.setIndex(Or)},handleUTF8:function(){var Rr=Er.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=vr.utf8decode(this.fileName),this.fileCommentStr=vr.utf8decode(this.fileComment);else{var Nr=this.findExtraFieldUnicodePath();if(Nr!==null)this.fileNameStr=Nr;else{var Dr=mr.transformTo(Rr,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Dr)}var Ir=this.findExtraFieldUnicodeComment();if(Ir!==null)this.fileCommentStr=Ir;else{var Or=mr.transformTo(Rr,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(Or)}}},findExtraFieldUnicodePath:function(){var Rr=this.extraFields[28789];if(Rr){var Nr=pr(Rr.value);return Nr.readInt(1)!==1||xr(this.fileName)!==Nr.readInt(4)?null:vr.utf8decode(Nr.readData(Rr.length-5))}return null},findExtraFieldUnicodeComment:function(){var Rr=this.extraFields[25461];if(Rr){var Nr=pr(Rr.value);return Nr.readInt(1)!==1||xr(this.fileComment)!==Nr.readInt(4)?null:vr.utf8decode(Nr.readData(Rr.length-5))}return null}},gr.exports=Tr},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(fr,gr,br){function pr(Nr,Dr,Ir){this.name=Nr,this.dir=Ir.dir,this.date=Ir.date,this.comment=Ir.comment,this.unixPermissions=Ir.unixPermissions,this.dosPermissions=Ir.dosPermissions,this._data=Dr,this._dataBinary=Ir.binary,this.options={compression:Ir.compression,compressionOptions:Ir.compressionOptions}}var mr=fr("./stream/StreamHelper"),yr=fr("./stream/DataWorker"),xr=fr("./utf8"),vr=fr("./compressedObject"),_r=fr("./stream/GenericWorker");pr.prototype={internalStream:function(Nr){var Dr=null,Ir="string";try{if(!Nr)throw new Error("No output type specified.");var Or=(Ir=Nr.toLowerCase())==="string"||Ir==="text";Ir!=="binarystring"&&Ir!=="text"||(Ir="string"),Dr=this._decompressWorker();var jr=!this._dataBinary;jr&&!Or&&(Dr=Dr.pipe(new xr.Utf8EncodeWorker)),!jr&&Or&&(Dr=Dr.pipe(new xr.Utf8DecodeWorker))}catch(Lr){(Dr=new _r("error")).error(Lr)}return new mr(Dr,Ir,"")},async:function(Nr,Dr){return this.internalStream(Nr).accumulate(Dr)},nodeStream:function(Nr,Dr){return this.internalStream(Nr||"nodebuffer").toNodejsStream(Dr)},_compressWorker:function(Nr,Dr){if(this._data instanceof vr&&this._data.compression.magic===Nr.magic)return this._data.getCompressedWorker();var Ir=this._decompressWorker();return this._dataBinary||(Ir=Ir.pipe(new xr.Utf8EncodeWorker)),vr.createWorkerFrom(Ir,Nr,Dr)},_decompressWorker:function(){return this._data instanceof vr?this._data.getContentWorker():this._data instanceof _r?this._data:new yr(this._data)}};for(var Er=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Tr=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Rr=0;Rr<Er.length;Rr++)pr.prototype[Er[Rr]]=Tr;gr.exports=pr},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(fr,gr,br){(function(pr){var mr,yr,xr=pr.MutationObserver||pr.WebKitMutationObserver;if(xr){var vr=0,_r=new xr(Nr),Er=pr.document.createTextNode("");_r.observe(Er,{characterData:!0}),mr=function(){Er.data=vr=++vr%2}}else if(pr.setImmediate||pr.MessageChannel===void 0)mr="document"in pr&&"onreadystatechange"in pr.document.createElement("script")?function(){var Dr=pr.document.createElement("script");Dr.onreadystatechange=function(){Nr(),Dr.onreadystatechange=null,Dr.parentNode.removeChild(Dr),Dr=null},pr.document.documentElement.appendChild(Dr)}:function(){setTimeout(Nr,0)};else{var Tr=new pr.MessageChannel;Tr.port1.onmessage=Nr,mr=function(){Tr.port2.postMessage(0)}}var Rr=[];function Nr(){var Dr,Ir;yr=!0;for(var Or=Rr.length;Or;){for(Ir=Rr,Rr=[],Dr=-1;++Dr<Or;)Ir[Dr]();Or=Rr.length}yr=!1}gr.exports=function(Dr){Rr.push(Dr)!==1||yr||mr()}}).call(this,ar!==void 0?ar:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(fr,gr,br){var pr=fr("immediate");function mr(){}var yr={},xr=["REJECTED"],vr=["FULFILLED"],_r=["PENDING"];function Er(Or){if(typeof Or!="function")throw new TypeError("resolver must be a function");this.state=_r,this.queue=[],this.outcome=void 0,Or!==mr&&Dr(this,Or)}function Tr(Or,jr,Lr){this.promise=Or,typeof jr=="function"&&(this.onFulfilled=jr,this.callFulfilled=this.otherCallFulfilled),typeof Lr=="function"&&(this.onRejected=Lr,this.callRejected=this.otherCallRejected)}function Rr(Or,jr,Lr){pr(function(){var Cr;try{Cr=jr(Lr)}catch(wr){return yr.reject(Or,wr)}Cr===Or?yr.reject(Or,new TypeError("Cannot resolve promise with itself")):yr.resolve(Or,Cr)})}function Nr(Or){var jr=Or&&Or.then;if(Or&&(typeof Or=="object"||typeof Or=="function")&&typeof jr=="function")return function(){jr.apply(Or,arguments)}}function Dr(Or,jr){var Lr=!1;function Cr(Ar){Lr||(Lr=!0,yr.reject(Or,Ar))}function wr(Ar){Lr||(Lr=!0,yr.resolve(Or,Ar))}var Pr=Ir(function(){jr(wr,Cr)});Pr.status==="error"&&Cr(Pr.value)}function Ir(Or,jr){var Lr={};try{Lr.value=Or(jr),Lr.status="success"}catch(Cr){Lr.status="error",Lr.value=Cr}return Lr}(gr.exports=Er).prototype.finally=function(Or){if(typeof Or!="function")return this;var jr=this.constructor;return this.then(function(Lr){return jr.resolve(Or()).then(function(){return Lr})},function(Lr){return jr.resolve(Or()).then(function(){throw Lr})})},Er.prototype.catch=function(Or){return this.then(null,Or)},Er.prototype.then=function(Or,jr){if(typeof Or!="function"&&this.state===vr||typeof jr!="function"&&this.state===xr)return this;var Lr=new this.constructor(mr);return this.state!==_r?Rr(Lr,this.state===vr?Or:jr,this.outcome):this.queue.push(new Tr(Lr,Or,jr)),Lr},Tr.prototype.callFulfilled=function(Or){yr.resolve(this.promise,Or)},Tr.prototype.otherCallFulfilled=function(Or){Rr(this.promise,this.onFulfilled,Or)},Tr.prototype.callRejected=function(Or){yr.reject(this.promise,Or)},Tr.prototype.otherCallRejected=function(Or){Rr(this.promise,this.onRejected,Or)},yr.resolve=function(Or,jr){var Lr=Ir(Nr,jr);if(Lr.status==="error")return yr.reject(Or,Lr.value);var Cr=Lr.value;if(Cr)Dr(Or,Cr);else{Or.state=vr,Or.outcome=jr;for(var wr=-1,Pr=Or.queue.length;++wr<Pr;)Or.queue[wr].callFulfilled(jr)}return Or},yr.reject=function(Or,jr){Or.state=xr,Or.outcome=jr;for(var Lr=-1,Cr=Or.queue.length;++Lr<Cr;)Or.queue[Lr].callRejected(jr);return Or},Er.resolve=function(Or){return Or instanceof this?Or:yr.resolve(new this(mr),Or)},Er.reject=function(Or){var jr=new this(mr);return yr.reject(jr,Or)},Er.all=function(Or){var jr=this;if(Object.prototype.toString.call(Or)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Lr=Or.length,Cr=!1;if(!Lr)return this.resolve([]);for(var wr=new Array(Lr),Pr=0,Ar=-1,Sr=new this(mr);++Ar<Lr;)Mr(Or[Ar],Ar);return Sr;function Mr(qr,$r){jr.resolve(qr).then(function(Br){wr[$r]=Br,++Pr!==Lr||Cr||(Cr=!0,yr.resolve(Sr,wr))},function(Br){Cr||(Cr=!0,yr.reject(Sr,Br))})}},Er.race=function(Or){if(Object.prototype.toString.call(Or)!=="[object Array]")return this.reject(new TypeError("must be an array"));var jr=Or.length,Lr=!1;if(!jr)return this.resolve([]);for(var Cr,wr=-1,Pr=new this(mr);++wr<jr;)Cr=Or[wr],this.resolve(Cr).then(function(Ar){Lr||(Lr=!0,yr.resolve(Pr,Ar))},function(Ar){Lr||(Lr=!0,yr.reject(Pr,Ar))});return Pr}},{immediate:36}],38:[function(fr,gr,br){var pr={};(0,fr("./lib/utils/common").assign)(pr,fr("./lib/deflate"),fr("./lib/inflate"),fr("./lib/zlib/constants")),gr.exports=pr},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(fr,gr,br){var pr=fr("./zlib/deflate"),mr=fr("./utils/common"),yr=fr("./utils/strings"),xr=fr("./zlib/messages"),vr=fr("./zlib/zstream"),_r=Object.prototype.toString;function Er(Rr){if(!(this instanceof Er))return new Er(Rr);this.options=mr.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},Rr||{});var Nr=this.options;Nr.raw&&0<Nr.windowBits?Nr.windowBits=-Nr.windowBits:Nr.gzip&&0<Nr.windowBits&&Nr.windowBits<16&&(Nr.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vr,this.strm.avail_out=0;var Dr=pr.deflateInit2(this.strm,Nr.level,Nr.method,Nr.windowBits,Nr.memLevel,Nr.strategy);if(Dr!==0)throw new Error(xr[Dr]);if(Nr.header&&pr.deflateSetHeader(this.strm,Nr.header),Nr.dictionary){var Ir;if(Ir=typeof Nr.dictionary=="string"?yr.string2buf(Nr.dictionary):_r.call(Nr.dictionary)==="[object ArrayBuffer]"?new Uint8Array(Nr.dictionary):Nr.dictionary,(Dr=pr.deflateSetDictionary(this.strm,Ir))!==0)throw new Error(xr[Dr]);this._dict_set=!0}}function Tr(Rr,Nr){var Dr=new Er(Nr);if(Dr.push(Rr,!0),Dr.err)throw Dr.msg||xr[Dr.err];return Dr.result}Er.prototype.push=function(Rr,Nr){var Dr,Ir,Or=this.strm,jr=this.options.chunkSize;if(this.ended)return!1;Ir=Nr===~~Nr?Nr:Nr===!0?4:0,typeof Rr=="string"?Or.input=yr.string2buf(Rr):_r.call(Rr)==="[object ArrayBuffer]"?Or.input=new Uint8Array(Rr):Or.input=Rr,Or.next_in=0,Or.avail_in=Or.input.length;do{if(Or.avail_out===0&&(Or.output=new mr.Buf8(jr),Or.next_out=0,Or.avail_out=jr),(Dr=pr.deflate(Or,Ir))!==1&&Dr!==0)return this.onEnd(Dr),!(this.ended=!0);Or.avail_out!==0&&(Or.avail_in!==0||Ir!==4&&Ir!==2)||(this.options.to==="string"?this.onData(yr.buf2binstring(mr.shrinkBuf(Or.output,Or.next_out))):this.onData(mr.shrinkBuf(Or.output,Or.next_out)))}while((0<Or.avail_in||Or.avail_out===0)&&Dr!==1);return Ir===4?(Dr=pr.deflateEnd(this.strm),this.onEnd(Dr),this.ended=!0,Dr===0):Ir!==2||(this.onEnd(0),!(Or.avail_out=0))},Er.prototype.onData=function(Rr){this.chunks.push(Rr)},Er.prototype.onEnd=function(Rr){Rr===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mr.flattenChunks(this.chunks)),this.chunks=[],this.err=Rr,this.msg=this.strm.msg},br.Deflate=Er,br.deflate=Tr,br.deflateRaw=function(Rr,Nr){return(Nr=Nr||{}).raw=!0,Tr(Rr,Nr)},br.gzip=function(Rr,Nr){return(Nr=Nr||{}).gzip=!0,Tr(Rr,Nr)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(fr,gr,br){var pr=fr("./zlib/inflate"),mr=fr("./utils/common"),yr=fr("./utils/strings"),xr=fr("./zlib/constants"),vr=fr("./zlib/messages"),_r=fr("./zlib/zstream"),Er=fr("./zlib/gzheader"),Tr=Object.prototype.toString;function Rr(Dr){if(!(this instanceof Rr))return new Rr(Dr);this.options=mr.assign({chunkSize:16384,windowBits:0,to:""},Dr||{});var Ir=this.options;Ir.raw&&0<=Ir.windowBits&&Ir.windowBits<16&&(Ir.windowBits=-Ir.windowBits,Ir.windowBits===0&&(Ir.windowBits=-15)),!(0<=Ir.windowBits&&Ir.windowBits<16)||Dr&&Dr.windowBits||(Ir.windowBits+=32),15<Ir.windowBits&&Ir.windowBits<48&&!(15&Ir.windowBits)&&(Ir.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _r,this.strm.avail_out=0;var Or=pr.inflateInit2(this.strm,Ir.windowBits);if(Or!==xr.Z_OK)throw new Error(vr[Or]);this.header=new Er,pr.inflateGetHeader(this.strm,this.header)}function Nr(Dr,Ir){var Or=new Rr(Ir);if(Or.push(Dr,!0),Or.err)throw Or.msg||vr[Or.err];return Or.result}Rr.prototype.push=function(Dr,Ir){var Or,jr,Lr,Cr,wr,Pr,Ar=this.strm,Sr=this.options.chunkSize,Mr=this.options.dictionary,qr=!1;if(this.ended)return!1;jr=Ir===~~Ir?Ir:Ir===!0?xr.Z_FINISH:xr.Z_NO_FLUSH,typeof Dr=="string"?Ar.input=yr.binstring2buf(Dr):Tr.call(Dr)==="[object ArrayBuffer]"?Ar.input=new Uint8Array(Dr):Ar.input=Dr,Ar.next_in=0,Ar.avail_in=Ar.input.length;do{if(Ar.avail_out===0&&(Ar.output=new mr.Buf8(Sr),Ar.next_out=0,Ar.avail_out=Sr),(Or=pr.inflate(Ar,xr.Z_NO_FLUSH))===xr.Z_NEED_DICT&&Mr&&(Pr=typeof Mr=="string"?yr.string2buf(Mr):Tr.call(Mr)==="[object ArrayBuffer]"?new Uint8Array(Mr):Mr,Or=pr.inflateSetDictionary(this.strm,Pr)),Or===xr.Z_BUF_ERROR&&qr===!0&&(Or=xr.Z_OK,qr=!1),Or!==xr.Z_STREAM_END&&Or!==xr.Z_OK)return this.onEnd(Or),!(this.ended=!0);Ar.next_out&&(Ar.avail_out!==0&&Or!==xr.Z_STREAM_END&&(Ar.avail_in!==0||jr!==xr.Z_FINISH&&jr!==xr.Z_SYNC_FLUSH)||(this.options.to==="string"?(Lr=yr.utf8border(Ar.output,Ar.next_out),Cr=Ar.next_out-Lr,wr=yr.buf2string(Ar.output,Lr),Ar.next_out=Cr,Ar.avail_out=Sr-Cr,Cr&&mr.arraySet(Ar.output,Ar.output,Lr,Cr,0),this.onData(wr)):this.onData(mr.shrinkBuf(Ar.output,Ar.next_out)))),Ar.avail_in===0&&Ar.avail_out===0&&(qr=!0)}while((0<Ar.avail_in||Ar.avail_out===0)&&Or!==xr.Z_STREAM_END);return Or===xr.Z_STREAM_END&&(jr=xr.Z_FINISH),jr===xr.Z_FINISH?(Or=pr.inflateEnd(this.strm),this.onEnd(Or),this.ended=!0,Or===xr.Z_OK):jr!==xr.Z_SYNC_FLUSH||(this.onEnd(xr.Z_OK),!(Ar.avail_out=0))},Rr.prototype.onData=function(Dr){this.chunks.push(Dr)},Rr.prototype.onEnd=function(Dr){Dr===xr.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mr.flattenChunks(this.chunks)),this.chunks=[],this.err=Dr,this.msg=this.strm.msg},br.Inflate=Rr,br.inflate=Nr,br.inflateRaw=function(Dr,Ir){return(Ir=Ir||{}).raw=!0,Nr(Dr,Ir)},br.ungzip=Nr},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(fr,gr,br){var pr=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";br.assign=function(xr){for(var vr=Array.prototype.slice.call(arguments,1);vr.length;){var _r=vr.shift();if(_r){if(typeof _r!="object")throw new TypeError(_r+"must be non-object");for(var Er in _r)_r.hasOwnProperty(Er)&&(xr[Er]=_r[Er])}}return xr},br.shrinkBuf=function(xr,vr){return xr.length===vr?xr:xr.subarray?xr.subarray(0,vr):(xr.length=vr,xr)};var mr={arraySet:function(xr,vr,_r,Er,Tr){if(vr.subarray&&xr.subarray)xr.set(vr.subarray(_r,_r+Er),Tr);else for(var Rr=0;Rr<Er;Rr++)xr[Tr+Rr]=vr[_r+Rr]},flattenChunks:function(xr){var vr,_r,Er,Tr,Rr,Nr;for(vr=Er=0,_r=xr.length;vr<_r;vr++)Er+=xr[vr].length;for(Nr=new Uint8Array(Er),vr=Tr=0,_r=xr.length;vr<_r;vr++)Rr=xr[vr],Nr.set(Rr,Tr),Tr+=Rr.length;return Nr}},yr={arraySet:function(xr,vr,_r,Er,Tr){for(var Rr=0;Rr<Er;Rr++)xr[Tr+Rr]=vr[_r+Rr]},flattenChunks:function(xr){return[].concat.apply([],xr)}};br.setTyped=function(xr){xr?(br.Buf8=Uint8Array,br.Buf16=Uint16Array,br.Buf32=Int32Array,br.assign(br,mr)):(br.Buf8=Array,br.Buf16=Array,br.Buf32=Array,br.assign(br,yr))},br.setTyped(pr)},{}],42:[function(fr,gr,br){var pr=fr("./common"),mr=!0,yr=!0;try{String.fromCharCode.apply(null,[0])}catch{mr=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{yr=!1}for(var xr=new pr.Buf8(256),vr=0;vr<256;vr++)xr[vr]=252<=vr?6:248<=vr?5:240<=vr?4:224<=vr?3:192<=vr?2:1;function _r(Er,Tr){if(Tr<65537&&(Er.subarray&&yr||!Er.subarray&&mr))return String.fromCharCode.apply(null,pr.shrinkBuf(Er,Tr));for(var Rr="",Nr=0;Nr<Tr;Nr++)Rr+=String.fromCharCode(Er[Nr]);return Rr}xr[254]=xr[254]=1,br.string2buf=function(Er){var Tr,Rr,Nr,Dr,Ir,Or=Er.length,jr=0;for(Dr=0;Dr<Or;Dr++)(64512&(Rr=Er.charCodeAt(Dr)))==55296&&Dr+1<Or&&(64512&(Nr=Er.charCodeAt(Dr+1)))==56320&&(Rr=65536+(Rr-55296<<10)+(Nr-56320),Dr++),jr+=Rr<128?1:Rr<2048?2:Rr<65536?3:4;for(Tr=new pr.Buf8(jr),Dr=Ir=0;Ir<jr;Dr++)(64512&(Rr=Er.charCodeAt(Dr)))==55296&&Dr+1<Or&&(64512&(Nr=Er.charCodeAt(Dr+1)))==56320&&(Rr=65536+(Rr-55296<<10)+(Nr-56320),Dr++),Rr<128?Tr[Ir++]=Rr:(Rr<2048?Tr[Ir++]=192|Rr>>>6:(Rr<65536?Tr[Ir++]=224|Rr>>>12:(Tr[Ir++]=240|Rr>>>18,Tr[Ir++]=128|Rr>>>12&63),Tr[Ir++]=128|Rr>>>6&63),Tr[Ir++]=128|63&Rr);return Tr},br.buf2binstring=function(Er){return _r(Er,Er.length)},br.binstring2buf=function(Er){for(var Tr=new pr.Buf8(Er.length),Rr=0,Nr=Tr.length;Rr<Nr;Rr++)Tr[Rr]=Er.charCodeAt(Rr);return Tr},br.buf2string=function(Er,Tr){var Rr,Nr,Dr,Ir,Or=Tr||Er.length,jr=new Array(2*Or);for(Rr=Nr=0;Rr<Or;)if((Dr=Er[Rr++])<128)jr[Nr++]=Dr;else if(4<(Ir=xr[Dr]))jr[Nr++]=65533,Rr+=Ir-1;else{for(Dr&=Ir===2?31:Ir===3?15:7;1<Ir&&Rr<Or;)Dr=Dr<<6|63&Er[Rr++],Ir--;1<Ir?jr[Nr++]=65533:Dr<65536?jr[Nr++]=Dr:(Dr-=65536,jr[Nr++]=55296|Dr>>10&1023,jr[Nr++]=56320|1023&Dr)}return _r(jr,Nr)},br.utf8border=function(Er,Tr){var Rr;for((Tr=Tr||Er.length)>Er.length&&(Tr=Er.length),Rr=Tr-1;0<=Rr&&(192&Er[Rr])==128;)Rr--;return Rr<0||Rr===0?Tr:Rr+xr[Er[Rr]]>Tr?Rr:Tr}},{"./common":41}],43:[function(fr,gr,br){gr.exports=function(pr,mr,yr,xr){for(var vr=65535&pr|0,_r=pr>>>16&65535|0,Er=0;yr!==0;){for(yr-=Er=2e3<yr?2e3:yr;_r=_r+(vr=vr+mr[xr++]|0)|0,--Er;);vr%=65521,_r%=65521}return vr|_r<<16|0}},{}],44:[function(fr,gr,br){gr.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(fr,gr,br){var pr=function(){for(var mr,yr=[],xr=0;xr<256;xr++){mr=xr;for(var vr=0;vr<8;vr++)mr=1&mr?3988292384^mr>>>1:mr>>>1;yr[xr]=mr}return yr}();gr.exports=function(mr,yr,xr,vr){var _r=pr,Er=vr+xr;mr^=-1;for(var Tr=vr;Tr<Er;Tr++)mr=mr>>>8^_r[255&(mr^yr[Tr])];return-1^mr}},{}],46:[function(fr,gr,br){var pr,mr=fr("../utils/common"),yr=fr("./trees"),xr=fr("./adler32"),vr=fr("./crc32"),_r=fr("./messages"),Er=-2,Tr=258,Rr=262,Nr=113;function Dr(Vr,Xr){return Vr.msg=_r[Xr],Xr}function Ir(Vr){return(Vr<<1)-(4<Vr?9:0)}function Or(Vr){for(var Xr=Vr.length;0<=--Xr;)Vr[Xr]=0}function jr(Vr){var Xr=Vr.state,Ur=Xr.pending;Ur>Vr.avail_out&&(Ur=Vr.avail_out),Ur!==0&&(mr.arraySet(Vr.output,Xr.pending_buf,Xr.pending_out,Ur,Vr.next_out),Vr.next_out+=Ur,Xr.pending_out+=Ur,Vr.total_out+=Ur,Vr.avail_out-=Ur,Xr.pending-=Ur,Xr.pending===0&&(Xr.pending_out=0))}function Lr(Vr,Xr){yr._tr_flush_block(Vr,0<=Vr.block_start?Vr.block_start:-1,Vr.strstart-Vr.block_start,Xr),Vr.block_start=Vr.strstart,jr(Vr.strm)}function Cr(Vr,Xr){Vr.pending_buf[Vr.pending++]=Xr}function wr(Vr,Xr){Vr.pending_buf[Vr.pending++]=Xr>>>8&255,Vr.pending_buf[Vr.pending++]=255&Xr}function Pr(Vr,Xr){var Ur,Fr,Kr=Vr.max_chain_length,Zr=Vr.strstart,Jr=Vr.prev_length,tn=Vr.nice_match,an=Vr.strstart>Vr.w_size-Rr?Vr.strstart-(Vr.w_size-Rr):0,dn=Vr.window,en=Vr.w_mask,rn=Vr.prev,sn=Vr.strstart+Tr,on=dn[Zr+Jr-1],fn=dn[Zr+Jr];Vr.prev_length>=Vr.good_match&&(Kr>>=2),tn>Vr.lookahead&&(tn=Vr.lookahead);do if(dn[(Ur=Xr)+Jr]===fn&&dn[Ur+Jr-1]===on&&dn[Ur]===dn[Zr]&&dn[++Ur]===dn[Zr+1]){Zr+=2,Ur++;do;while(dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&dn[++Zr]===dn[++Ur]&&Zr<sn);if(Fr=Tr-(sn-Zr),Zr=sn-Tr,Jr<Fr){if(Vr.match_start=Xr,tn<=(Jr=Fr))break;on=dn[Zr+Jr-1],fn=dn[Zr+Jr]}}while((Xr=rn[Xr&en])>an&&--Kr!=0);return Jr<=Vr.lookahead?Jr:Vr.lookahead}function Ar(Vr){var Xr,Ur,Fr,Kr,Zr,Jr,tn,an,dn,en,rn=Vr.w_size;do{if(Kr=Vr.window_size-Vr.lookahead-Vr.strstart,Vr.strstart>=rn+(rn-Rr)){for(mr.arraySet(Vr.window,Vr.window,rn,rn,0),Vr.match_start-=rn,Vr.strstart-=rn,Vr.block_start-=rn,Xr=Ur=Vr.hash_size;Fr=Vr.head[--Xr],Vr.head[Xr]=rn<=Fr?Fr-rn:0,--Ur;);for(Xr=Ur=rn;Fr=Vr.prev[--Xr],Vr.prev[Xr]=rn<=Fr?Fr-rn:0,--Ur;);Kr+=rn}if(Vr.strm.avail_in===0)break;if(Jr=Vr.strm,tn=Vr.window,an=Vr.strstart+Vr.lookahead,en=void 0,(dn=Kr)<(en=Jr.avail_in)&&(en=dn),Ur=en===0?0:(Jr.avail_in-=en,mr.arraySet(tn,Jr.input,Jr.next_in,en,an),Jr.state.wrap===1?Jr.adler=xr(Jr.adler,tn,en,an):Jr.state.wrap===2&&(Jr.adler=vr(Jr.adler,tn,en,an)),Jr.next_in+=en,Jr.total_in+=en,en),Vr.lookahead+=Ur,Vr.lookahead+Vr.insert>=3)for(Zr=Vr.strstart-Vr.insert,Vr.ins_h=Vr.window[Zr],Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Zr+1])&Vr.hash_mask;Vr.insert&&(Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Zr+3-1])&Vr.hash_mask,Vr.prev[Zr&Vr.w_mask]=Vr.head[Vr.ins_h],Vr.head[Vr.ins_h]=Zr,Zr++,Vr.insert--,!(Vr.lookahead+Vr.insert<3)););}while(Vr.lookahead<Rr&&Vr.strm.avail_in!==0)}function Sr(Vr,Xr){for(var Ur,Fr;;){if(Vr.lookahead<Rr){if(Ar(Vr),Vr.lookahead<Rr&&Xr===0)return 1;if(Vr.lookahead===0)break}if(Ur=0,Vr.lookahead>=3&&(Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Vr.strstart+3-1])&Vr.hash_mask,Ur=Vr.prev[Vr.strstart&Vr.w_mask]=Vr.head[Vr.ins_h],Vr.head[Vr.ins_h]=Vr.strstart),Ur!==0&&Vr.strstart-Ur<=Vr.w_size-Rr&&(Vr.match_length=Pr(Vr,Ur)),Vr.match_length>=3)if(Fr=yr._tr_tally(Vr,Vr.strstart-Vr.match_start,Vr.match_length-3),Vr.lookahead-=Vr.match_length,Vr.match_length<=Vr.max_lazy_match&&Vr.lookahead>=3){for(Vr.match_length--;Vr.strstart++,Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Vr.strstart+3-1])&Vr.hash_mask,Ur=Vr.prev[Vr.strstart&Vr.w_mask]=Vr.head[Vr.ins_h],Vr.head[Vr.ins_h]=Vr.strstart,--Vr.match_length!=0;);Vr.strstart++}else Vr.strstart+=Vr.match_length,Vr.match_length=0,Vr.ins_h=Vr.window[Vr.strstart],Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Vr.strstart+1])&Vr.hash_mask;else Fr=yr._tr_tally(Vr,0,Vr.window[Vr.strstart]),Vr.lookahead--,Vr.strstart++;if(Fr&&(Lr(Vr,!1),Vr.strm.avail_out===0))return 1}return Vr.insert=Vr.strstart<2?Vr.strstart:2,Xr===4?(Lr(Vr,!0),Vr.strm.avail_out===0?3:4):Vr.last_lit&&(Lr(Vr,!1),Vr.strm.avail_out===0)?1:2}function Mr(Vr,Xr){for(var Ur,Fr,Kr;;){if(Vr.lookahead<Rr){if(Ar(Vr),Vr.lookahead<Rr&&Xr===0)return 1;if(Vr.lookahead===0)break}if(Ur=0,Vr.lookahead>=3&&(Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Vr.strstart+3-1])&Vr.hash_mask,Ur=Vr.prev[Vr.strstart&Vr.w_mask]=Vr.head[Vr.ins_h],Vr.head[Vr.ins_h]=Vr.strstart),Vr.prev_length=Vr.match_length,Vr.prev_match=Vr.match_start,Vr.match_length=2,Ur!==0&&Vr.prev_length<Vr.max_lazy_match&&Vr.strstart-Ur<=Vr.w_size-Rr&&(Vr.match_length=Pr(Vr,Ur),Vr.match_length<=5&&(Vr.strategy===1||Vr.match_length===3&&4096<Vr.strstart-Vr.match_start)&&(Vr.match_length=2)),Vr.prev_length>=3&&Vr.match_length<=Vr.prev_length){for(Kr=Vr.strstart+Vr.lookahead-3,Fr=yr._tr_tally(Vr,Vr.strstart-1-Vr.prev_match,Vr.prev_length-3),Vr.lookahead-=Vr.prev_length-1,Vr.prev_length-=2;++Vr.strstart<=Kr&&(Vr.ins_h=(Vr.ins_h<<Vr.hash_shift^Vr.window[Vr.strstart+3-1])&Vr.hash_mask,Ur=Vr.prev[Vr.strstart&Vr.w_mask]=Vr.head[Vr.ins_h],Vr.head[Vr.ins_h]=Vr.strstart),--Vr.prev_length!=0;);if(Vr.match_available=0,Vr.match_length=2,Vr.strstart++,Fr&&(Lr(Vr,!1),Vr.strm.avail_out===0))return 1}else if(Vr.match_available){if((Fr=yr._tr_tally(Vr,0,Vr.window[Vr.strstart-1]))&&Lr(Vr,!1),Vr.strstart++,Vr.lookahead--,Vr.strm.avail_out===0)return 1}else Vr.match_available=1,Vr.strstart++,Vr.lookahead--}return Vr.match_available&&(Fr=yr._tr_tally(Vr,0,Vr.window[Vr.strstart-1]),Vr.match_available=0),Vr.insert=Vr.strstart<2?Vr.strstart:2,Xr===4?(Lr(Vr,!0),Vr.strm.avail_out===0?3:4):Vr.last_lit&&(Lr(Vr,!1),Vr.strm.avail_out===0)?1:2}function qr(Vr,Xr,Ur,Fr,Kr){this.good_length=Vr,this.max_lazy=Xr,this.nice_length=Ur,this.max_chain=Fr,this.func=Kr}function $r(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new mr.Buf16(1146),this.dyn_dtree=new mr.Buf16(122),this.bl_tree=new mr.Buf16(78),Or(this.dyn_ltree),Or(this.dyn_dtree),Or(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new mr.Buf16(16),this.heap=new mr.Buf16(573),Or(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new mr.Buf16(573),Or(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Br(Vr){var Xr;return Vr&&Vr.state?(Vr.total_in=Vr.total_out=0,Vr.data_type=2,(Xr=Vr.state).pending=0,Xr.pending_out=0,Xr.wrap<0&&(Xr.wrap=-Xr.wrap),Xr.status=Xr.wrap?42:Nr,Vr.adler=Xr.wrap===2?0:1,Xr.last_flush=0,yr._tr_init(Xr),0):Dr(Vr,Er)}function zr(Vr){var Xr=Br(Vr);return Xr===0&&function(Ur){Ur.window_size=2*Ur.w_size,Or(Ur.head),Ur.max_lazy_match=pr[Ur.level].max_lazy,Ur.good_match=pr[Ur.level].good_length,Ur.nice_match=pr[Ur.level].nice_length,Ur.max_chain_length=pr[Ur.level].max_chain,Ur.strstart=0,Ur.block_start=0,Ur.lookahead=0,Ur.insert=0,Ur.match_length=Ur.prev_length=2,Ur.match_available=0,Ur.ins_h=0}(Vr.state),Xr}function Gr(Vr,Xr,Ur,Fr,Kr,Zr){if(!Vr)return Er;var Jr=1;if(Xr===-1&&(Xr=6),Fr<0?(Jr=0,Fr=-Fr):15<Fr&&(Jr=2,Fr-=16),Kr<1||9<Kr||Ur!==8||Fr<8||15<Fr||Xr<0||9<Xr||Zr<0||4<Zr)return Dr(Vr,Er);Fr===8&&(Fr=9);var tn=new $r;return(Vr.state=tn).strm=Vr,tn.wrap=Jr,tn.gzhead=null,tn.w_bits=Fr,tn.w_size=1<<tn.w_bits,tn.w_mask=tn.w_size-1,tn.hash_bits=Kr+7,tn.hash_size=1<<tn.hash_bits,tn.hash_mask=tn.hash_size-1,tn.hash_shift=~~((tn.hash_bits+3-1)/3),tn.window=new mr.Buf8(2*tn.w_size),tn.head=new mr.Buf16(tn.hash_size),tn.prev=new mr.Buf16(tn.w_size),tn.lit_bufsize=1<<Kr+6,tn.pending_buf_size=4*tn.lit_bufsize,tn.pending_buf=new mr.Buf8(tn.pending_buf_size),tn.d_buf=1*tn.lit_bufsize,tn.l_buf=3*tn.lit_bufsize,tn.level=Xr,tn.strategy=Zr,tn.method=Ur,zr(Vr)}pr=[new qr(0,0,0,0,function(Vr,Xr){var Ur=65535;for(Ur>Vr.pending_buf_size-5&&(Ur=Vr.pending_buf_size-5);;){if(Vr.lookahead<=1){if(Ar(Vr),Vr.lookahead===0&&Xr===0)return 1;if(Vr.lookahead===0)break}Vr.strstart+=Vr.lookahead,Vr.lookahead=0;var Fr=Vr.block_start+Ur;if((Vr.strstart===0||Vr.strstart>=Fr)&&(Vr.lookahead=Vr.strstart-Fr,Vr.strstart=Fr,Lr(Vr,!1),Vr.strm.avail_out===0)||Vr.strstart-Vr.block_start>=Vr.w_size-Rr&&(Lr(Vr,!1),Vr.strm.avail_out===0))return 1}return Vr.insert=0,Xr===4?(Lr(Vr,!0),Vr.strm.avail_out===0?3:4):(Vr.strstart>Vr.block_start&&(Lr(Vr,!1),Vr.strm.avail_out),1)}),new qr(4,4,8,4,Sr),new qr(4,5,16,8,Sr),new qr(4,6,32,32,Sr),new qr(4,4,16,16,Mr),new qr(8,16,32,32,Mr),new qr(8,16,128,128,Mr),new qr(8,32,128,256,Mr),new qr(32,128,258,1024,Mr),new qr(32,258,258,4096,Mr)],br.deflateInit=function(Vr,Xr){return Gr(Vr,Xr,8,15,8,0)},br.deflateInit2=Gr,br.deflateReset=zr,br.deflateResetKeep=Br,br.deflateSetHeader=function(Vr,Xr){return Vr&&Vr.state?Vr.state.wrap!==2?Er:(Vr.state.gzhead=Xr,0):Er},br.deflate=function(Vr,Xr){var Ur,Fr,Kr,Zr;if(!Vr||!Vr.state||5<Xr||Xr<0)return Vr?Dr(Vr,Er):Er;if(Fr=Vr.state,!Vr.output||!Vr.input&&Vr.avail_in!==0||Fr.status===666&&Xr!==4)return Dr(Vr,Vr.avail_out===0?-5:Er);if(Fr.strm=Vr,Ur=Fr.last_flush,Fr.last_flush=Xr,Fr.status===42)if(Fr.wrap===2)Vr.adler=0,Cr(Fr,31),Cr(Fr,139),Cr(Fr,8),Fr.gzhead?(Cr(Fr,(Fr.gzhead.text?1:0)+(Fr.gzhead.hcrc?2:0)+(Fr.gzhead.extra?4:0)+(Fr.gzhead.name?8:0)+(Fr.gzhead.comment?16:0)),Cr(Fr,255&Fr.gzhead.time),Cr(Fr,Fr.gzhead.time>>8&255),Cr(Fr,Fr.gzhead.time>>16&255),Cr(Fr,Fr.gzhead.time>>24&255),Cr(Fr,Fr.level===9?2:2<=Fr.strategy||Fr.level<2?4:0),Cr(Fr,255&Fr.gzhead.os),Fr.gzhead.extra&&Fr.gzhead.extra.length&&(Cr(Fr,255&Fr.gzhead.extra.length),Cr(Fr,Fr.gzhead.extra.length>>8&255)),Fr.gzhead.hcrc&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending,0)),Fr.gzindex=0,Fr.status=69):(Cr(Fr,0),Cr(Fr,0),Cr(Fr,0),Cr(Fr,0),Cr(Fr,0),Cr(Fr,Fr.level===9?2:2<=Fr.strategy||Fr.level<2?4:0),Cr(Fr,3),Fr.status=Nr);else{var Jr=8+(Fr.w_bits-8<<4)<<8;Jr|=(2<=Fr.strategy||Fr.level<2?0:Fr.level<6?1:Fr.level===6?2:3)<<6,Fr.strstart!==0&&(Jr|=32),Jr+=31-Jr%31,Fr.status=Nr,wr(Fr,Jr),Fr.strstart!==0&&(wr(Fr,Vr.adler>>>16),wr(Fr,65535&Vr.adler)),Vr.adler=1}if(Fr.status===69)if(Fr.gzhead.extra){for(Kr=Fr.pending;Fr.gzindex<(65535&Fr.gzhead.extra.length)&&(Fr.pending!==Fr.pending_buf_size||(Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),jr(Vr),Kr=Fr.pending,Fr.pending!==Fr.pending_buf_size));)Cr(Fr,255&Fr.gzhead.extra[Fr.gzindex]),Fr.gzindex++;Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),Fr.gzindex===Fr.gzhead.extra.length&&(Fr.gzindex=0,Fr.status=73)}else Fr.status=73;if(Fr.status===73)if(Fr.gzhead.name){Kr=Fr.pending;do{if(Fr.pending===Fr.pending_buf_size&&(Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),jr(Vr),Kr=Fr.pending,Fr.pending===Fr.pending_buf_size)){Zr=1;break}Zr=Fr.gzindex<Fr.gzhead.name.length?255&Fr.gzhead.name.charCodeAt(Fr.gzindex++):0,Cr(Fr,Zr)}while(Zr!==0);Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),Zr===0&&(Fr.gzindex=0,Fr.status=91)}else Fr.status=91;if(Fr.status===91)if(Fr.gzhead.comment){Kr=Fr.pending;do{if(Fr.pending===Fr.pending_buf_size&&(Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),jr(Vr),Kr=Fr.pending,Fr.pending===Fr.pending_buf_size)){Zr=1;break}Zr=Fr.gzindex<Fr.gzhead.comment.length?255&Fr.gzhead.comment.charCodeAt(Fr.gzindex++):0,Cr(Fr,Zr)}while(Zr!==0);Fr.gzhead.hcrc&&Fr.pending>Kr&&(Vr.adler=vr(Vr.adler,Fr.pending_buf,Fr.pending-Kr,Kr)),Zr===0&&(Fr.status=103)}else Fr.status=103;if(Fr.status===103&&(Fr.gzhead.hcrc?(Fr.pending+2>Fr.pending_buf_size&&jr(Vr),Fr.pending+2<=Fr.pending_buf_size&&(Cr(Fr,255&Vr.adler),Cr(Fr,Vr.adler>>8&255),Vr.adler=0,Fr.status=Nr)):Fr.status=Nr),Fr.pending!==0){if(jr(Vr),Vr.avail_out===0)return Fr.last_flush=-1,0}else if(Vr.avail_in===0&&Ir(Xr)<=Ir(Ur)&&Xr!==4)return Dr(Vr,-5);if(Fr.status===666&&Vr.avail_in!==0)return Dr(Vr,-5);if(Vr.avail_in!==0||Fr.lookahead!==0||Xr!==0&&Fr.status!==666){var tn=Fr.strategy===2?function(an,dn){for(var en;;){if(an.lookahead===0&&(Ar(an),an.lookahead===0)){if(dn===0)return 1;break}if(an.match_length=0,en=yr._tr_tally(an,0,an.window[an.strstart]),an.lookahead--,an.strstart++,en&&(Lr(an,!1),an.strm.avail_out===0))return 1}return an.insert=0,dn===4?(Lr(an,!0),an.strm.avail_out===0?3:4):an.last_lit&&(Lr(an,!1),an.strm.avail_out===0)?1:2}(Fr,Xr):Fr.strategy===3?function(an,dn){for(var en,rn,sn,on,fn=an.window;;){if(an.lookahead<=Tr){if(Ar(an),an.lookahead<=Tr&&dn===0)return 1;if(an.lookahead===0)break}if(an.match_length=0,an.lookahead>=3&&0<an.strstart&&(rn=fn[sn=an.strstart-1])===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]){on=an.strstart+Tr;do;while(rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&rn===fn[++sn]&&sn<on);an.match_length=Tr-(on-sn),an.match_length>an.lookahead&&(an.match_length=an.lookahead)}if(an.match_length>=3?(en=yr._tr_tally(an,1,an.match_length-3),an.lookahead-=an.match_length,an.strstart+=an.match_length,an.match_length=0):(en=yr._tr_tally(an,0,an.window[an.strstart]),an.lookahead--,an.strstart++),en&&(Lr(an,!1),an.strm.avail_out===0))return 1}return an.insert=0,dn===4?(Lr(an,!0),an.strm.avail_out===0?3:4):an.last_lit&&(Lr(an,!1),an.strm.avail_out===0)?1:2}(Fr,Xr):pr[Fr.level].func(Fr,Xr);if(tn!==3&&tn!==4||(Fr.status=666),tn===1||tn===3)return Vr.avail_out===0&&(Fr.last_flush=-1),0;if(tn===2&&(Xr===1?yr._tr_align(Fr):Xr!==5&&(yr._tr_stored_block(Fr,0,0,!1),Xr===3&&(Or(Fr.head),Fr.lookahead===0&&(Fr.strstart=0,Fr.block_start=0,Fr.insert=0))),jr(Vr),Vr.avail_out===0))return Fr.last_flush=-1,0}return Xr!==4?0:Fr.wrap<=0?1:(Fr.wrap===2?(Cr(Fr,255&Vr.adler),Cr(Fr,Vr.adler>>8&255),Cr(Fr,Vr.adler>>16&255),Cr(Fr,Vr.adler>>24&255),Cr(Fr,255&Vr.total_in),Cr(Fr,Vr.total_in>>8&255),Cr(Fr,Vr.total_in>>16&255),Cr(Fr,Vr.total_in>>24&255)):(wr(Fr,Vr.adler>>>16),wr(Fr,65535&Vr.adler)),jr(Vr),0<Fr.wrap&&(Fr.wrap=-Fr.wrap),Fr.pending!==0?0:1)},br.deflateEnd=function(Vr){var Xr;return Vr&&Vr.state?(Xr=Vr.state.status)!==42&&Xr!==69&&Xr!==73&&Xr!==91&&Xr!==103&&Xr!==Nr&&Xr!==666?Dr(Vr,Er):(Vr.state=null,Xr===Nr?Dr(Vr,-3):0):Er},br.deflateSetDictionary=function(Vr,Xr){var Ur,Fr,Kr,Zr,Jr,tn,an,dn,en=Xr.length;if(!Vr||!Vr.state||(Zr=(Ur=Vr.state).wrap)===2||Zr===1&&Ur.status!==42||Ur.lookahead)return Er;for(Zr===1&&(Vr.adler=xr(Vr.adler,Xr,en,0)),Ur.wrap=0,en>=Ur.w_size&&(Zr===0&&(Or(Ur.head),Ur.strstart=0,Ur.block_start=0,Ur.insert=0),dn=new mr.Buf8(Ur.w_size),mr.arraySet(dn,Xr,en-Ur.w_size,Ur.w_size,0),Xr=dn,en=Ur.w_size),Jr=Vr.avail_in,tn=Vr.next_in,an=Vr.input,Vr.avail_in=en,Vr.next_in=0,Vr.input=Xr,Ar(Ur);Ur.lookahead>=3;){for(Fr=Ur.strstart,Kr=Ur.lookahead-2;Ur.ins_h=(Ur.ins_h<<Ur.hash_shift^Ur.window[Fr+3-1])&Ur.hash_mask,Ur.prev[Fr&Ur.w_mask]=Ur.head[Ur.ins_h],Ur.head[Ur.ins_h]=Fr,Fr++,--Kr;);Ur.strstart=Fr,Ur.lookahead=2,Ar(Ur)}return Ur.strstart+=Ur.lookahead,Ur.block_start=Ur.strstart,Ur.insert=Ur.lookahead,Ur.lookahead=0,Ur.match_length=Ur.prev_length=2,Ur.match_available=0,Vr.next_in=tn,Vr.input=an,Vr.avail_in=Jr,Ur.wrap=Zr,0},br.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(fr,gr,br){gr.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(fr,gr,br){gr.exports=function(pr,mr){var yr,xr,vr,_r,Er,Tr,Rr,Nr,Dr,Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr,Mr,qr,$r,Br,zr,Gr,Vr;yr=pr.state,xr=pr.next_in,Gr=pr.input,vr=xr+(pr.avail_in-5),_r=pr.next_out,Vr=pr.output,Er=_r-(mr-pr.avail_out),Tr=_r+(pr.avail_out-257),Rr=yr.dmax,Nr=yr.wsize,Dr=yr.whave,Ir=yr.wnext,Or=yr.window,jr=yr.hold,Lr=yr.bits,Cr=yr.lencode,wr=yr.distcode,Pr=(1<<yr.lenbits)-1,Ar=(1<<yr.distbits)-1;e:do{Lr<15&&(jr+=Gr[xr++]<<Lr,Lr+=8,jr+=Gr[xr++]<<Lr,Lr+=8),Sr=Cr[jr&Pr];t:for(;;){if(jr>>>=Mr=Sr>>>24,Lr-=Mr,(Mr=Sr>>>16&255)==0)Vr[_r++]=65535&Sr;else{if(!(16&Mr)){if(!(64&Mr)){Sr=Cr[(65535&Sr)+(jr&(1<<Mr)-1)];continue t}if(32&Mr){yr.mode=12;break e}pr.msg="invalid literal/length code",yr.mode=30;break e}qr=65535&Sr,(Mr&=15)&&(Lr<Mr&&(jr+=Gr[xr++]<<Lr,Lr+=8),qr+=jr&(1<<Mr)-1,jr>>>=Mr,Lr-=Mr),Lr<15&&(jr+=Gr[xr++]<<Lr,Lr+=8,jr+=Gr[xr++]<<Lr,Lr+=8),Sr=wr[jr&Ar];r:for(;;){if(jr>>>=Mr=Sr>>>24,Lr-=Mr,!(16&(Mr=Sr>>>16&255))){if(!(64&Mr)){Sr=wr[(65535&Sr)+(jr&(1<<Mr)-1)];continue r}pr.msg="invalid distance code",yr.mode=30;break e}if($r=65535&Sr,Lr<(Mr&=15)&&(jr+=Gr[xr++]<<Lr,(Lr+=8)<Mr&&(jr+=Gr[xr++]<<Lr,Lr+=8)),Rr<($r+=jr&(1<<Mr)-1)){pr.msg="invalid distance too far back",yr.mode=30;break e}if(jr>>>=Mr,Lr-=Mr,(Mr=_r-Er)<$r){if(Dr<(Mr=$r-Mr)&&yr.sane){pr.msg="invalid distance too far back",yr.mode=30;break e}if(zr=Or,(Br=0)===Ir){if(Br+=Nr-Mr,Mr<qr){for(qr-=Mr;Vr[_r++]=Or[Br++],--Mr;);Br=_r-$r,zr=Vr}}else if(Ir<Mr){if(Br+=Nr+Ir-Mr,(Mr-=Ir)<qr){for(qr-=Mr;Vr[_r++]=Or[Br++],--Mr;);if(Br=0,Ir<qr){for(qr-=Mr=Ir;Vr[_r++]=Or[Br++],--Mr;);Br=_r-$r,zr=Vr}}}else if(Br+=Ir-Mr,Mr<qr){for(qr-=Mr;Vr[_r++]=Or[Br++],--Mr;);Br=_r-$r,zr=Vr}for(;2<qr;)Vr[_r++]=zr[Br++],Vr[_r++]=zr[Br++],Vr[_r++]=zr[Br++],qr-=3;qr&&(Vr[_r++]=zr[Br++],1<qr&&(Vr[_r++]=zr[Br++]))}else{for(Br=_r-$r;Vr[_r++]=Vr[Br++],Vr[_r++]=Vr[Br++],Vr[_r++]=Vr[Br++],2<(qr-=3););qr&&(Vr[_r++]=Vr[Br++],1<qr&&(Vr[_r++]=Vr[Br++]))}break}}break}}while(xr<vr&&_r<Tr);xr-=qr=Lr>>3,jr&=(1<<(Lr-=qr<<3))-1,pr.next_in=xr,pr.next_out=_r,pr.avail_in=xr<vr?vr-xr+5:5-(xr-vr),pr.avail_out=_r<Tr?Tr-_r+257:257-(_r-Tr),yr.hold=jr,yr.bits=Lr}},{}],49:[function(fr,gr,br){var pr=fr("../utils/common"),mr=fr("./adler32"),yr=fr("./crc32"),xr=fr("./inffast"),vr=fr("./inftrees"),_r=-2;function Er(Pr){return(Pr>>>24&255)+(Pr>>>8&65280)+((65280&Pr)<<8)+((255&Pr)<<24)}function Tr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new pr.Buf16(320),this.work=new pr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Rr(Pr){var Ar;return Pr&&Pr.state?(Ar=Pr.state,Pr.total_in=Pr.total_out=Ar.total=0,Pr.msg="",Ar.wrap&&(Pr.adler=1&Ar.wrap),Ar.mode=1,Ar.last=0,Ar.havedict=0,Ar.dmax=32768,Ar.head=null,Ar.hold=0,Ar.bits=0,Ar.lencode=Ar.lendyn=new pr.Buf32(852),Ar.distcode=Ar.distdyn=new pr.Buf32(592),Ar.sane=1,Ar.back=-1,0):_r}function Nr(Pr){var Ar;return Pr&&Pr.state?((Ar=Pr.state).wsize=0,Ar.whave=0,Ar.wnext=0,Rr(Pr)):_r}function Dr(Pr,Ar){var Sr,Mr;return Pr&&Pr.state?(Mr=Pr.state,Ar<0?(Sr=0,Ar=-Ar):(Sr=1+(Ar>>4),Ar<48&&(Ar&=15)),Ar&&(Ar<8||15<Ar)?_r:(Mr.window!==null&&Mr.wbits!==Ar&&(Mr.window=null),Mr.wrap=Sr,Mr.wbits=Ar,Nr(Pr))):_r}function Ir(Pr,Ar){var Sr,Mr;return Pr?(Mr=new Tr,(Pr.state=Mr).window=null,(Sr=Dr(Pr,Ar))!==0&&(Pr.state=null),Sr):_r}var Or,jr,Lr=!0;function Cr(Pr){if(Lr){var Ar;for(Or=new pr.Buf32(512),jr=new pr.Buf32(32),Ar=0;Ar<144;)Pr.lens[Ar++]=8;for(;Ar<256;)Pr.lens[Ar++]=9;for(;Ar<280;)Pr.lens[Ar++]=7;for(;Ar<288;)Pr.lens[Ar++]=8;for(vr(1,Pr.lens,0,288,Or,0,Pr.work,{bits:9}),Ar=0;Ar<32;)Pr.lens[Ar++]=5;vr(2,Pr.lens,0,32,jr,0,Pr.work,{bits:5}),Lr=!1}Pr.lencode=Or,Pr.lenbits=9,Pr.distcode=jr,Pr.distbits=5}function wr(Pr,Ar,Sr,Mr){var qr,$r=Pr.state;return $r.window===null&&($r.wsize=1<<$r.wbits,$r.wnext=0,$r.whave=0,$r.window=new pr.Buf8($r.wsize)),Mr>=$r.wsize?(pr.arraySet($r.window,Ar,Sr-$r.wsize,$r.wsize,0),$r.wnext=0,$r.whave=$r.wsize):(Mr<(qr=$r.wsize-$r.wnext)&&(qr=Mr),pr.arraySet($r.window,Ar,Sr-Mr,qr,$r.wnext),(Mr-=qr)?(pr.arraySet($r.window,Ar,Sr-Mr,Mr,0),$r.wnext=Mr,$r.whave=$r.wsize):($r.wnext+=qr,$r.wnext===$r.wsize&&($r.wnext=0),$r.whave<$r.wsize&&($r.whave+=qr))),0}br.inflateReset=Nr,br.inflateReset2=Dr,br.inflateResetKeep=Rr,br.inflateInit=function(Pr){return Ir(Pr,15)},br.inflateInit2=Ir,br.inflate=function(Pr,Ar){var Sr,Mr,qr,$r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr,Jr,tn,an,dn,en,rn,sn,on,fn,pn,gn,Pn=0,In=new pr.Buf8(4),En=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Pr||!Pr.state||!Pr.output||!Pr.input&&Pr.avail_in!==0)return _r;(Sr=Pr.state).mode===12&&(Sr.mode=13),Br=Pr.next_out,qr=Pr.output,Gr=Pr.avail_out,$r=Pr.next_in,Mr=Pr.input,zr=Pr.avail_in,Vr=Sr.hold,Xr=Sr.bits,Ur=zr,Fr=Gr,fn=0;e:for(;;)switch(Sr.mode){case 1:if(Sr.wrap===0){Sr.mode=13;break}for(;Xr<16;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(2&Sr.wrap&&Vr===35615){In[Sr.check=0]=255&Vr,In[1]=Vr>>>8&255,Sr.check=yr(Sr.check,In,2,0),Xr=Vr=0,Sr.mode=2;break}if(Sr.flags=0,Sr.head&&(Sr.head.done=!1),!(1&Sr.wrap)||(((255&Vr)<<8)+(Vr>>8))%31){Pr.msg="incorrect header check",Sr.mode=30;break}if((15&Vr)!=8){Pr.msg="unknown compression method",Sr.mode=30;break}if(Xr-=4,on=8+(15&(Vr>>>=4)),Sr.wbits===0)Sr.wbits=on;else if(on>Sr.wbits){Pr.msg="invalid window size",Sr.mode=30;break}Sr.dmax=1<<on,Pr.adler=Sr.check=1,Sr.mode=512&Vr?10:12,Xr=Vr=0;break;case 2:for(;Xr<16;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(Sr.flags=Vr,(255&Sr.flags)!=8){Pr.msg="unknown compression method",Sr.mode=30;break}if(57344&Sr.flags){Pr.msg="unknown header flags set",Sr.mode=30;break}Sr.head&&(Sr.head.text=Vr>>8&1),512&Sr.flags&&(In[0]=255&Vr,In[1]=Vr>>>8&255,Sr.check=yr(Sr.check,In,2,0)),Xr=Vr=0,Sr.mode=3;case 3:for(;Xr<32;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.head&&(Sr.head.time=Vr),512&Sr.flags&&(In[0]=255&Vr,In[1]=Vr>>>8&255,In[2]=Vr>>>16&255,In[3]=Vr>>>24&255,Sr.check=yr(Sr.check,In,4,0)),Xr=Vr=0,Sr.mode=4;case 4:for(;Xr<16;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.head&&(Sr.head.xflags=255&Vr,Sr.head.os=Vr>>8),512&Sr.flags&&(In[0]=255&Vr,In[1]=Vr>>>8&255,Sr.check=yr(Sr.check,In,2,0)),Xr=Vr=0,Sr.mode=5;case 5:if(1024&Sr.flags){for(;Xr<16;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.length=Vr,Sr.head&&(Sr.head.extra_len=Vr),512&Sr.flags&&(In[0]=255&Vr,In[1]=Vr>>>8&255,Sr.check=yr(Sr.check,In,2,0)),Xr=Vr=0}else Sr.head&&(Sr.head.extra=null);Sr.mode=6;case 6:if(1024&Sr.flags&&(zr<(Kr=Sr.length)&&(Kr=zr),Kr&&(Sr.head&&(on=Sr.head.extra_len-Sr.length,Sr.head.extra||(Sr.head.extra=new Array(Sr.head.extra_len)),pr.arraySet(Sr.head.extra,Mr,$r,Kr,on)),512&Sr.flags&&(Sr.check=yr(Sr.check,Mr,Kr,$r)),zr-=Kr,$r+=Kr,Sr.length-=Kr),Sr.length))break e;Sr.length=0,Sr.mode=7;case 7:if(2048&Sr.flags){if(zr===0)break e;for(Kr=0;on=Mr[$r+Kr++],Sr.head&&on&&Sr.length<65536&&(Sr.head.name+=String.fromCharCode(on)),on&&Kr<zr;);if(512&Sr.flags&&(Sr.check=yr(Sr.check,Mr,Kr,$r)),zr-=Kr,$r+=Kr,on)break e}else Sr.head&&(Sr.head.name=null);Sr.length=0,Sr.mode=8;case 8:if(4096&Sr.flags){if(zr===0)break e;for(Kr=0;on=Mr[$r+Kr++],Sr.head&&on&&Sr.length<65536&&(Sr.head.comment+=String.fromCharCode(on)),on&&Kr<zr;);if(512&Sr.flags&&(Sr.check=yr(Sr.check,Mr,Kr,$r)),zr-=Kr,$r+=Kr,on)break e}else Sr.head&&(Sr.head.comment=null);Sr.mode=9;case 9:if(512&Sr.flags){for(;Xr<16;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(Vr!==(65535&Sr.check)){Pr.msg="header crc mismatch",Sr.mode=30;break}Xr=Vr=0}Sr.head&&(Sr.head.hcrc=Sr.flags>>9&1,Sr.head.done=!0),Pr.adler=Sr.check=0,Sr.mode=12;break;case 10:for(;Xr<32;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Pr.adler=Sr.check=Er(Vr),Xr=Vr=0,Sr.mode=11;case 11:if(Sr.havedict===0)return Pr.next_out=Br,Pr.avail_out=Gr,Pr.next_in=$r,Pr.avail_in=zr,Sr.hold=Vr,Sr.bits=Xr,2;Pr.adler=Sr.check=1,Sr.mode=12;case 12:if(Ar===5||Ar===6)break e;case 13:if(Sr.last){Vr>>>=7&Xr,Xr-=7&Xr,Sr.mode=27;break}for(;Xr<3;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}switch(Sr.last=1&Vr,Xr-=1,3&(Vr>>>=1)){case 0:Sr.mode=14;break;case 1:if(Cr(Sr),Sr.mode=20,Ar!==6)break;Vr>>>=2,Xr-=2;break e;case 2:Sr.mode=17;break;case 3:Pr.msg="invalid block type",Sr.mode=30}Vr>>>=2,Xr-=2;break;case 14:for(Vr>>>=7&Xr,Xr-=7&Xr;Xr<32;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if((65535&Vr)!=(Vr>>>16^65535)){Pr.msg="invalid stored block lengths",Sr.mode=30;break}if(Sr.length=65535&Vr,Xr=Vr=0,Sr.mode=15,Ar===6)break e;case 15:Sr.mode=16;case 16:if(Kr=Sr.length){if(zr<Kr&&(Kr=zr),Gr<Kr&&(Kr=Gr),Kr===0)break e;pr.arraySet(qr,Mr,$r,Kr,Br),zr-=Kr,$r+=Kr,Gr-=Kr,Br+=Kr,Sr.length-=Kr;break}Sr.mode=12;break;case 17:for(;Xr<14;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(Sr.nlen=257+(31&Vr),Vr>>>=5,Xr-=5,Sr.ndist=1+(31&Vr),Vr>>>=5,Xr-=5,Sr.ncode=4+(15&Vr),Vr>>>=4,Xr-=4,286<Sr.nlen||30<Sr.ndist){Pr.msg="too many length or distance symbols",Sr.mode=30;break}Sr.have=0,Sr.mode=18;case 18:for(;Sr.have<Sr.ncode;){for(;Xr<3;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.lens[En[Sr.have++]]=7&Vr,Vr>>>=3,Xr-=3}for(;Sr.have<19;)Sr.lens[En[Sr.have++]]=0;if(Sr.lencode=Sr.lendyn,Sr.lenbits=7,pn={bits:Sr.lenbits},fn=vr(0,Sr.lens,0,19,Sr.lencode,0,Sr.work,pn),Sr.lenbits=pn.bits,fn){Pr.msg="invalid code lengths set",Sr.mode=30;break}Sr.have=0,Sr.mode=19;case 19:for(;Sr.have<Sr.nlen+Sr.ndist;){for(;an=(Pn=Sr.lencode[Vr&(1<<Sr.lenbits)-1])>>>16&255,dn=65535&Pn,!((tn=Pn>>>24)<=Xr);){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(dn<16)Vr>>>=tn,Xr-=tn,Sr.lens[Sr.have++]=dn;else{if(dn===16){for(gn=tn+2;Xr<gn;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(Vr>>>=tn,Xr-=tn,Sr.have===0){Pr.msg="invalid bit length repeat",Sr.mode=30;break}on=Sr.lens[Sr.have-1],Kr=3+(3&Vr),Vr>>>=2,Xr-=2}else if(dn===17){for(gn=tn+3;Xr<gn;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Xr-=tn,on=0,Kr=3+(7&(Vr>>>=tn)),Vr>>>=3,Xr-=3}else{for(gn=tn+7;Xr<gn;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Xr-=tn,on=0,Kr=11+(127&(Vr>>>=tn)),Vr>>>=7,Xr-=7}if(Sr.have+Kr>Sr.nlen+Sr.ndist){Pr.msg="invalid bit length repeat",Sr.mode=30;break}for(;Kr--;)Sr.lens[Sr.have++]=on}}if(Sr.mode===30)break;if(Sr.lens[256]===0){Pr.msg="invalid code -- missing end-of-block",Sr.mode=30;break}if(Sr.lenbits=9,pn={bits:Sr.lenbits},fn=vr(1,Sr.lens,0,Sr.nlen,Sr.lencode,0,Sr.work,pn),Sr.lenbits=pn.bits,fn){Pr.msg="invalid literal/lengths set",Sr.mode=30;break}if(Sr.distbits=6,Sr.distcode=Sr.distdyn,pn={bits:Sr.distbits},fn=vr(2,Sr.lens,Sr.nlen,Sr.ndist,Sr.distcode,0,Sr.work,pn),Sr.distbits=pn.bits,fn){Pr.msg="invalid distances set",Sr.mode=30;break}if(Sr.mode=20,Ar===6)break e;case 20:Sr.mode=21;case 21:if(6<=zr&&258<=Gr){Pr.next_out=Br,Pr.avail_out=Gr,Pr.next_in=$r,Pr.avail_in=zr,Sr.hold=Vr,Sr.bits=Xr,xr(Pr,Fr),Br=Pr.next_out,qr=Pr.output,Gr=Pr.avail_out,$r=Pr.next_in,Mr=Pr.input,zr=Pr.avail_in,Vr=Sr.hold,Xr=Sr.bits,Sr.mode===12&&(Sr.back=-1);break}for(Sr.back=0;an=(Pn=Sr.lencode[Vr&(1<<Sr.lenbits)-1])>>>16&255,dn=65535&Pn,!((tn=Pn>>>24)<=Xr);){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(an&&!(240&an)){for(en=tn,rn=an,sn=dn;an=(Pn=Sr.lencode[sn+((Vr&(1<<en+rn)-1)>>en)])>>>16&255,dn=65535&Pn,!(en+(tn=Pn>>>24)<=Xr);){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Vr>>>=en,Xr-=en,Sr.back+=en}if(Vr>>>=tn,Xr-=tn,Sr.back+=tn,Sr.length=dn,an===0){Sr.mode=26;break}if(32&an){Sr.back=-1,Sr.mode=12;break}if(64&an){Pr.msg="invalid literal/length code",Sr.mode=30;break}Sr.extra=15&an,Sr.mode=22;case 22:if(Sr.extra){for(gn=Sr.extra;Xr<gn;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.length+=Vr&(1<<Sr.extra)-1,Vr>>>=Sr.extra,Xr-=Sr.extra,Sr.back+=Sr.extra}Sr.was=Sr.length,Sr.mode=23;case 23:for(;an=(Pn=Sr.distcode[Vr&(1<<Sr.distbits)-1])>>>16&255,dn=65535&Pn,!((tn=Pn>>>24)<=Xr);){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(!(240&an)){for(en=tn,rn=an,sn=dn;an=(Pn=Sr.distcode[sn+((Vr&(1<<en+rn)-1)>>en)])>>>16&255,dn=65535&Pn,!(en+(tn=Pn>>>24)<=Xr);){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Vr>>>=en,Xr-=en,Sr.back+=en}if(Vr>>>=tn,Xr-=tn,Sr.back+=tn,64&an){Pr.msg="invalid distance code",Sr.mode=30;break}Sr.offset=dn,Sr.extra=15&an,Sr.mode=24;case 24:if(Sr.extra){for(gn=Sr.extra;Xr<gn;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}Sr.offset+=Vr&(1<<Sr.extra)-1,Vr>>>=Sr.extra,Xr-=Sr.extra,Sr.back+=Sr.extra}if(Sr.offset>Sr.dmax){Pr.msg="invalid distance too far back",Sr.mode=30;break}Sr.mode=25;case 25:if(Gr===0)break e;if(Kr=Fr-Gr,Sr.offset>Kr){if((Kr=Sr.offset-Kr)>Sr.whave&&Sr.sane){Pr.msg="invalid distance too far back",Sr.mode=30;break}Zr=Kr>Sr.wnext?(Kr-=Sr.wnext,Sr.wsize-Kr):Sr.wnext-Kr,Kr>Sr.length&&(Kr=Sr.length),Jr=Sr.window}else Jr=qr,Zr=Br-Sr.offset,Kr=Sr.length;for(Gr<Kr&&(Kr=Gr),Gr-=Kr,Sr.length-=Kr;qr[Br++]=Jr[Zr++],--Kr;);Sr.length===0&&(Sr.mode=21);break;case 26:if(Gr===0)break e;qr[Br++]=Sr.length,Gr--,Sr.mode=21;break;case 27:if(Sr.wrap){for(;Xr<32;){if(zr===0)break e;zr--,Vr|=Mr[$r++]<<Xr,Xr+=8}if(Fr-=Gr,Pr.total_out+=Fr,Sr.total+=Fr,Fr&&(Pr.adler=Sr.check=Sr.flags?yr(Sr.check,qr,Fr,Br-Fr):mr(Sr.check,qr,Fr,Br-Fr)),Fr=Gr,(Sr.flags?Vr:Er(Vr))!==Sr.check){Pr.msg="incorrect data check",Sr.mode=30;break}Xr=Vr=0}Sr.mode=28;case 28:if(Sr.wrap&&Sr.flags){for(;Xr<32;){if(zr===0)break e;zr--,Vr+=Mr[$r++]<<Xr,Xr+=8}if(Vr!==(4294967295&Sr.total)){Pr.msg="incorrect length check",Sr.mode=30;break}Xr=Vr=0}Sr.mode=29;case 29:fn=1;break e;case 30:fn=-3;break e;case 31:return-4;case 32:default:return _r}return Pr.next_out=Br,Pr.avail_out=Gr,Pr.next_in=$r,Pr.avail_in=zr,Sr.hold=Vr,Sr.bits=Xr,(Sr.wsize||Fr!==Pr.avail_out&&Sr.mode<30&&(Sr.mode<27||Ar!==4))&&wr(Pr,Pr.output,Pr.next_out,Fr-Pr.avail_out)?(Sr.mode=31,-4):(Ur-=Pr.avail_in,Fr-=Pr.avail_out,Pr.total_in+=Ur,Pr.total_out+=Fr,Sr.total+=Fr,Sr.wrap&&Fr&&(Pr.adler=Sr.check=Sr.flags?yr(Sr.check,qr,Fr,Pr.next_out-Fr):mr(Sr.check,qr,Fr,Pr.next_out-Fr)),Pr.data_type=Sr.bits+(Sr.last?64:0)+(Sr.mode===12?128:0)+(Sr.mode===20||Sr.mode===15?256:0),(Ur==0&&Fr===0||Ar===4)&&fn===0&&(fn=-5),fn)},br.inflateEnd=function(Pr){if(!Pr||!Pr.state)return _r;var Ar=Pr.state;return Ar.window&&(Ar.window=null),Pr.state=null,0},br.inflateGetHeader=function(Pr,Ar){var Sr;return Pr&&Pr.state&&2&(Sr=Pr.state).wrap?((Sr.head=Ar).done=!1,0):_r},br.inflateSetDictionary=function(Pr,Ar){var Sr,Mr=Ar.length;return Pr&&Pr.state?(Sr=Pr.state).wrap!==0&&Sr.mode!==11?_r:Sr.mode===11&&mr(1,Ar,Mr,0)!==Sr.check?-3:wr(Pr,Ar,Mr,Mr)?(Sr.mode=31,-4):(Sr.havedict=1,0):_r},br.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(fr,gr,br){var pr=fr("../utils/common"),mr=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],yr=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],xr=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],vr=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];gr.exports=function(_r,Er,Tr,Rr,Nr,Dr,Ir,Or){var jr,Lr,Cr,wr,Pr,Ar,Sr,Mr,qr,$r=Or.bits,Br=0,zr=0,Gr=0,Vr=0,Xr=0,Ur=0,Fr=0,Kr=0,Zr=0,Jr=0,tn=null,an=0,dn=new pr.Buf16(16),en=new pr.Buf16(16),rn=null,sn=0;for(Br=0;Br<=15;Br++)dn[Br]=0;for(zr=0;zr<Rr;zr++)dn[Er[Tr+zr]]++;for(Xr=$r,Vr=15;1<=Vr&&dn[Vr]===0;Vr--);if(Vr<Xr&&(Xr=Vr),Vr===0)return Nr[Dr++]=20971520,Nr[Dr++]=20971520,Or.bits=1,0;for(Gr=1;Gr<Vr&&dn[Gr]===0;Gr++);for(Xr<Gr&&(Xr=Gr),Br=Kr=1;Br<=15;Br++)if(Kr<<=1,(Kr-=dn[Br])<0)return-1;if(0<Kr&&(_r===0||Vr!==1))return-1;for(en[1]=0,Br=1;Br<15;Br++)en[Br+1]=en[Br]+dn[Br];for(zr=0;zr<Rr;zr++)Er[Tr+zr]!==0&&(Ir[en[Er[Tr+zr]]++]=zr);if(Ar=_r===0?(tn=rn=Ir,19):_r===1?(tn=mr,an-=257,rn=yr,sn-=257,256):(tn=xr,rn=vr,-1),Br=Gr,Pr=Dr,Fr=zr=Jr=0,Cr=-1,wr=(Zr=1<<(Ur=Xr))-1,_r===1&&852<Zr||_r===2&&592<Zr)return 1;for(;;){for(Sr=Br-Fr,qr=Ir[zr]<Ar?(Mr=0,Ir[zr]):Ir[zr]>Ar?(Mr=rn[sn+Ir[zr]],tn[an+Ir[zr]]):(Mr=96,0),jr=1<<Br-Fr,Gr=Lr=1<<Ur;Nr[Pr+(Jr>>Fr)+(Lr-=jr)]=Sr<<24|Mr<<16|qr|0,Lr!==0;);for(jr=1<<Br-1;Jr&jr;)jr>>=1;if(jr!==0?(Jr&=jr-1,Jr+=jr):Jr=0,zr++,--dn[Br]==0){if(Br===Vr)break;Br=Er[Tr+Ir[zr]]}if(Xr<Br&&(Jr&wr)!==Cr){for(Fr===0&&(Fr=Xr),Pr+=Gr,Kr=1<<(Ur=Br-Fr);Ur+Fr<Vr&&!((Kr-=dn[Ur+Fr])<=0);)Ur++,Kr<<=1;if(Zr+=1<<Ur,_r===1&&852<Zr||_r===2&&592<Zr)return 1;Nr[Cr=Jr&wr]=Xr<<24|Ur<<16|Pr-Dr|0}}return Jr!==0&&(Nr[Pr+Jr]=Br-Fr<<24|64<<16|0),Or.bits=Xr,0}},{"../utils/common":41}],51:[function(fr,gr,br){gr.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(fr,gr,br){var pr=fr("../utils/common");function mr(rn){for(var sn=rn.length;0<=--sn;)rn[sn]=0}var yr=256,xr=286,vr=30,_r=15,Er=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tr=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Rr=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Nr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Dr=new Array(576);mr(Dr);var Ir=new Array(60);mr(Ir);var Or=new Array(512);mr(Or);var jr=new Array(256);mr(jr);var Lr=new Array(29);mr(Lr);var Cr,wr,Pr,Ar=new Array(vr);function Sr(rn,sn,on,fn,pn){this.static_tree=rn,this.extra_bits=sn,this.extra_base=on,this.elems=fn,this.max_length=pn,this.has_stree=rn&&rn.length}function Mr(rn,sn){this.dyn_tree=rn,this.max_code=0,this.stat_desc=sn}function qr(rn){return rn<256?Or[rn]:Or[256+(rn>>>7)]}function $r(rn,sn){rn.pending_buf[rn.pending++]=255&sn,rn.pending_buf[rn.pending++]=sn>>>8&255}function Br(rn,sn,on){rn.bi_valid>16-on?(rn.bi_buf|=sn<<rn.bi_valid&65535,$r(rn,rn.bi_buf),rn.bi_buf=sn>>16-rn.bi_valid,rn.bi_valid+=on-16):(rn.bi_buf|=sn<<rn.bi_valid&65535,rn.bi_valid+=on)}function zr(rn,sn,on){Br(rn,on[2*sn],on[2*sn+1])}function Gr(rn,sn){for(var on=0;on|=1&rn,rn>>>=1,on<<=1,0<--sn;);return on>>>1}function Vr(rn,sn,on){var fn,pn,gn=new Array(16),Pn=0;for(fn=1;fn<=_r;fn++)gn[fn]=Pn=Pn+on[fn-1]<<1;for(pn=0;pn<=sn;pn++){var In=rn[2*pn+1];In!==0&&(rn[2*pn]=Gr(gn[In]++,In))}}function Xr(rn){var sn;for(sn=0;sn<xr;sn++)rn.dyn_ltree[2*sn]=0;for(sn=0;sn<vr;sn++)rn.dyn_dtree[2*sn]=0;for(sn=0;sn<19;sn++)rn.bl_tree[2*sn]=0;rn.dyn_ltree[512]=1,rn.opt_len=rn.static_len=0,rn.last_lit=rn.matches=0}function Ur(rn){8<rn.bi_valid?$r(rn,rn.bi_buf):0<rn.bi_valid&&(rn.pending_buf[rn.pending++]=rn.bi_buf),rn.bi_buf=0,rn.bi_valid=0}function Fr(rn,sn,on,fn){var pn=2*sn,gn=2*on;return rn[pn]<rn[gn]||rn[pn]===rn[gn]&&fn[sn]<=fn[on]}function Kr(rn,sn,on){for(var fn=rn.heap[on],pn=on<<1;pn<=rn.heap_len&&(pn<rn.heap_len&&Fr(sn,rn.heap[pn+1],rn.heap[pn],rn.depth)&&pn++,!Fr(sn,fn,rn.heap[pn],rn.depth));)rn.heap[on]=rn.heap[pn],on=pn,pn<<=1;rn.heap[on]=fn}function Zr(rn,sn,on){var fn,pn,gn,Pn,In=0;if(rn.last_lit!==0)for(;fn=rn.pending_buf[rn.d_buf+2*In]<<8|rn.pending_buf[rn.d_buf+2*In+1],pn=rn.pending_buf[rn.l_buf+In],In++,fn===0?zr(rn,pn,sn):(zr(rn,(gn=jr[pn])+yr+1,sn),(Pn=Er[gn])!==0&&Br(rn,pn-=Lr[gn],Pn),zr(rn,gn=qr(--fn),on),(Pn=Tr[gn])!==0&&Br(rn,fn-=Ar[gn],Pn)),In<rn.last_lit;);zr(rn,256,sn)}function Jr(rn,sn){var on,fn,pn,gn=sn.dyn_tree,Pn=sn.stat_desc.static_tree,In=sn.stat_desc.has_stree,En=sn.stat_desc.elems,zn=-1;for(rn.heap_len=0,rn.heap_max=573,on=0;on<En;on++)gn[2*on]!==0?(rn.heap[++rn.heap_len]=zn=on,rn.depth[on]=0):gn[2*on+1]=0;for(;rn.heap_len<2;)gn[2*(pn=rn.heap[++rn.heap_len]=zn<2?++zn:0)]=1,rn.depth[pn]=0,rn.opt_len--,In&&(rn.static_len-=Pn[2*pn+1]);for(sn.max_code=zn,on=rn.heap_len>>1;1<=on;on--)Kr(rn,gn,on);for(pn=En;on=rn.heap[1],rn.heap[1]=rn.heap[rn.heap_len--],Kr(rn,gn,1),fn=rn.heap[1],rn.heap[--rn.heap_max]=on,rn.heap[--rn.heap_max]=fn,gn[2*pn]=gn[2*on]+gn[2*fn],rn.depth[pn]=(rn.depth[on]>=rn.depth[fn]?rn.depth[on]:rn.depth[fn])+1,gn[2*on+1]=gn[2*fn+1]=pn,rn.heap[1]=pn++,Kr(rn,gn,1),2<=rn.heap_len;);rn.heap[--rn.heap_max]=rn.heap[1],function(yn,Vn){var Kn,es,Xn,ds,fs,os,Hn=Vn.dyn_tree,Ln=Vn.max_code,Dn=Vn.stat_desc.static_tree,ls=Vn.stat_desc.has_stree,Ds=Vn.stat_desc.extra_bits,xs=Vn.stat_desc.extra_base,kn=Vn.stat_desc.max_length,Jn=0;for(ds=0;ds<=_r;ds++)yn.bl_count[ds]=0;for(Hn[2*yn.heap[yn.heap_max]+1]=0,Kn=yn.heap_max+1;Kn<573;Kn++)kn<(ds=Hn[2*Hn[2*(es=yn.heap[Kn])+1]+1]+1)&&(ds=kn,Jn++),Hn[2*es+1]=ds,Ln<es||(yn.bl_count[ds]++,fs=0,xs<=es&&(fs=Ds[es-xs]),os=Hn[2*es],yn.opt_len+=os*(ds+fs),ls&&(yn.static_len+=os*(Dn[2*es+1]+fs)));if(Jn!==0){do{for(ds=kn-1;yn.bl_count[ds]===0;)ds--;yn.bl_count[ds]--,yn.bl_count[ds+1]+=2,yn.bl_count[kn]--,Jn-=2}while(0<Jn);for(ds=kn;ds!==0;ds--)for(es=yn.bl_count[ds];es!==0;)Ln<(Xn=yn.heap[--Kn])||(Hn[2*Xn+1]!==ds&&(yn.opt_len+=(ds-Hn[2*Xn+1])*Hn[2*Xn],Hn[2*Xn+1]=ds),es--)}}(rn,sn),Vr(gn,zn,rn.bl_count)}function tn(rn,sn,on){var fn,pn,gn=-1,Pn=sn[1],In=0,En=7,zn=4;for(Pn===0&&(En=138,zn=3),sn[2*(on+1)+1]=65535,fn=0;fn<=on;fn++)pn=Pn,Pn=sn[2*(fn+1)+1],++In<En&&pn===Pn||(In<zn?rn.bl_tree[2*pn]+=In:pn!==0?(pn!==gn&&rn.bl_tree[2*pn]++,rn.bl_tree[32]++):In<=10?rn.bl_tree[34]++:rn.bl_tree[36]++,gn=pn,zn=(In=0)===Pn?(En=138,3):pn===Pn?(En=6,3):(En=7,4))}function an(rn,sn,on){var fn,pn,gn=-1,Pn=sn[1],In=0,En=7,zn=4;for(Pn===0&&(En=138,zn=3),fn=0;fn<=on;fn++)if(pn=Pn,Pn=sn[2*(fn+1)+1],!(++In<En&&pn===Pn)){if(In<zn)for(;zr(rn,pn,rn.bl_tree),--In!=0;);else pn!==0?(pn!==gn&&(zr(rn,pn,rn.bl_tree),In--),zr(rn,16,rn.bl_tree),Br(rn,In-3,2)):In<=10?(zr(rn,17,rn.bl_tree),Br(rn,In-3,3)):(zr(rn,18,rn.bl_tree),Br(rn,In-11,7));gn=pn,zn=(In=0)===Pn?(En=138,3):pn===Pn?(En=6,3):(En=7,4)}}mr(Ar);var dn=!1;function en(rn,sn,on,fn){Br(rn,0+(fn?1:0),3),function(pn,gn,Pn,In){Ur(pn),$r(pn,Pn),$r(pn,~Pn),pr.arraySet(pn.pending_buf,pn.window,gn,Pn,pn.pending),pn.pending+=Pn}(rn,sn,on)}br._tr_init=function(rn){dn||(function(){var sn,on,fn,pn,gn,Pn=new Array(16);for(pn=fn=0;pn<28;pn++)for(Lr[pn]=fn,sn=0;sn<1<<Er[pn];sn++)jr[fn++]=pn;for(jr[fn-1]=pn,pn=gn=0;pn<16;pn++)for(Ar[pn]=gn,sn=0;sn<1<<Tr[pn];sn++)Or[gn++]=pn;for(gn>>=7;pn<vr;pn++)for(Ar[pn]=gn<<7,sn=0;sn<1<<Tr[pn]-7;sn++)Or[256+gn++]=pn;for(on=0;on<=_r;on++)Pn[on]=0;for(sn=0;sn<=143;)Dr[2*sn+1]=8,sn++,Pn[8]++;for(;sn<=255;)Dr[2*sn+1]=9,sn++,Pn[9]++;for(;sn<=279;)Dr[2*sn+1]=7,sn++,Pn[7]++;for(;sn<=287;)Dr[2*sn+1]=8,sn++,Pn[8]++;for(Vr(Dr,287,Pn),sn=0;sn<vr;sn++)Ir[2*sn+1]=5,Ir[2*sn]=Gr(sn,5);Cr=new Sr(Dr,Er,257,xr,_r),wr=new Sr(Ir,Tr,0,vr,_r),Pr=new Sr(new Array(0),Rr,0,19,7)}(),dn=!0),rn.l_desc=new Mr(rn.dyn_ltree,Cr),rn.d_desc=new Mr(rn.dyn_dtree,wr),rn.bl_desc=new Mr(rn.bl_tree,Pr),rn.bi_buf=0,rn.bi_valid=0,Xr(rn)},br._tr_stored_block=en,br._tr_flush_block=function(rn,sn,on,fn){var pn,gn,Pn=0;0<rn.level?(rn.strm.data_type===2&&(rn.strm.data_type=function(In){var En,zn=4093624447;for(En=0;En<=31;En++,zn>>>=1)if(1&zn&&In.dyn_ltree[2*En]!==0)return 0;if(In.dyn_ltree[18]!==0||In.dyn_ltree[20]!==0||In.dyn_ltree[26]!==0)return 1;for(En=32;En<yr;En++)if(In.dyn_ltree[2*En]!==0)return 1;return 0}(rn)),Jr(rn,rn.l_desc),Jr(rn,rn.d_desc),Pn=function(In){var En;for(tn(In,In.dyn_ltree,In.l_desc.max_code),tn(In,In.dyn_dtree,In.d_desc.max_code),Jr(In,In.bl_desc),En=18;3<=En&&In.bl_tree[2*Nr[En]+1]===0;En--);return In.opt_len+=3*(En+1)+5+5+4,En}(rn),pn=rn.opt_len+3+7>>>3,(gn=rn.static_len+3+7>>>3)<=pn&&(pn=gn)):pn=gn=on+5,on+4<=pn&&sn!==-1?en(rn,sn,on,fn):rn.strategy===4||gn===pn?(Br(rn,2+(fn?1:0),3),Zr(rn,Dr,Ir)):(Br(rn,4+(fn?1:0),3),function(In,En,zn,yn){var Vn;for(Br(In,En-257,5),Br(In,zn-1,5),Br(In,yn-4,4),Vn=0;Vn<yn;Vn++)Br(In,In.bl_tree[2*Nr[Vn]+1],3);an(In,In.dyn_ltree,En-1),an(In,In.dyn_dtree,zn-1)}(rn,rn.l_desc.max_code+1,rn.d_desc.max_code+1,Pn+1),Zr(rn,rn.dyn_ltree,rn.dyn_dtree)),Xr(rn),fn&&Ur(rn)},br._tr_tally=function(rn,sn,on){return rn.pending_buf[rn.d_buf+2*rn.last_lit]=sn>>>8&255,rn.pending_buf[rn.d_buf+2*rn.last_lit+1]=255&sn,rn.pending_buf[rn.l_buf+rn.last_lit]=255&on,rn.last_lit++,sn===0?rn.dyn_ltree[2*on]++:(rn.matches++,sn--,rn.dyn_ltree[2*(jr[on]+yr+1)]++,rn.dyn_dtree[2*qr(sn)]++),rn.last_lit===rn.lit_bufsize-1},br._tr_align=function(rn){Br(rn,2,3),zr(rn,256,Dr),function(sn){sn.bi_valid===16?($r(sn,sn.bi_buf),sn.bi_buf=0,sn.bi_valid=0):8<=sn.bi_valid&&(sn.pending_buf[sn.pending++]=255&sn.bi_buf,sn.bi_buf>>=8,sn.bi_valid-=8)}(rn)}},{"../utils/common":41}],53:[function(fr,gr,br){gr.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(fr,gr,br){(function(pr){(function(mr,yr){if(!mr.setImmediate){var xr,vr,_r,Er,Tr=1,Rr={},Nr=!1,Dr=mr.document,Ir=Object.getPrototypeOf&&Object.getPrototypeOf(mr);Ir=Ir&&Ir.setTimeout?Ir:mr,xr={}.toString.call(mr.process)==="[object process]"?function(Cr){sr.nextTick(function(){jr(Cr)})}:function(){if(mr.postMessage&&!mr.importScripts){var Cr=!0,wr=mr.onmessage;return mr.onmessage=function(){Cr=!1},mr.postMessage("","*"),mr.onmessage=wr,Cr}}()?(Er="setImmediate$"+Math.random()+"$",mr.addEventListener?mr.addEventListener("message",Lr,!1):mr.attachEvent("onmessage",Lr),function(Cr){mr.postMessage(Er+Cr,"*")}):mr.MessageChannel?((_r=new MessageChannel).port1.onmessage=function(Cr){jr(Cr.data)},function(Cr){_r.port2.postMessage(Cr)}):Dr&&"onreadystatechange"in Dr.createElement("script")?(vr=Dr.documentElement,function(Cr){var wr=Dr.createElement("script");wr.onreadystatechange=function(){jr(Cr),wr.onreadystatechange=null,vr.removeChild(wr),wr=null},vr.appendChild(wr)}):function(Cr){setTimeout(jr,0,Cr)},Ir.setImmediate=function(Cr){typeof Cr!="function"&&(Cr=new Function(""+Cr));for(var wr=new Array(arguments.length-1),Pr=0;Pr<wr.length;Pr++)wr[Pr]=arguments[Pr+1];var Ar={callback:Cr,args:wr};return Rr[Tr]=Ar,xr(Tr),Tr++},Ir.clearImmediate=Or}function Or(Cr){delete Rr[Cr]}function jr(Cr){if(Nr)setTimeout(jr,0,Cr);else{var wr=Rr[Cr];if(wr){Nr=!0;try{(function(Pr){var Ar=Pr.callback,Sr=Pr.args;switch(Sr.length){case 0:Ar();break;case 1:Ar(Sr[0]);break;case 2:Ar(Sr[0],Sr[1]);break;case 3:Ar(Sr[0],Sr[1],Sr[2]);break;default:Ar.apply(void 0,Sr)}})(wr)}finally{Or(Cr),Nr=!1}}}}function Lr(Cr){Cr.source===mr&&typeof Cr.data=="string"&&Cr.data.indexOf(Er)===0&&jr(+Cr.data.slice(Er.length))}})(typeof self>"u"?pr===void 0?this:pr:self)}).call(this,ar!==void 0?ar:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{},rr("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],rr("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(rr,nr,ir){(function(sr){(function(){var ar=/[\\^$.*+?()[\]{}|]/g,cr=RegExp(ar.source),lr=typeof sr=="object"&&sr&&sr.Object===Object&&sr,or=typeof self=="object"&&self&&self.Object===Object&&self,ur=lr||or||Function("return this")(),hr=Object.prototype.toString,dr=ur.Symbol,fr=dr?dr.prototype:void 0,gr=fr?fr.toString:void 0;function br(pr){if(typeof pr=="string")return pr;if(function(yr){return typeof yr=="symbol"||function(xr){return!!xr&&typeof xr=="object"}(yr)&&hr.call(yr)=="[object Symbol]"}(pr))return gr?gr.call(pr):"";var mr=pr+"";return mr=="0"&&1/pr==-1/0?"-0":mr}nr.exports=function(pr){var mr;return(pr=(mr=pr)==null?"":br(mr))&&cr.test(pr)?pr.replace(ar,"\\$&"):pr}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(rr,nr,ir){(function(sr){(function(){var ar="[object Arguments]",cr="[object Map]",lr="[object Object]",or="[object Set]",ur=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hr=/^\w*$/,dr=/^\./,fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gr=/\\(\\)?/g,br=/^\[object .+?Constructor\]$/,pr=/^(?:0|[1-9]\d*)$/,mr={};mr["[object Float32Array]"]=mr["[object Float64Array]"]=mr["[object Int8Array]"]=mr["[object Int16Array]"]=mr["[object Int32Array]"]=mr["[object Uint8Array]"]=mr["[object Uint8ClampedArray]"]=mr["[object Uint16Array]"]=mr["[object Uint32Array]"]=!0,mr[ar]=mr["[object Array]"]=mr["[object ArrayBuffer]"]=mr["[object Boolean]"]=mr["[object DataView]"]=mr["[object Date]"]=mr["[object Error]"]=mr["[object Function]"]=mr[cr]=mr["[object Number]"]=mr[lr]=mr["[object RegExp]"]=mr[or]=mr["[object String]"]=mr["[object WeakMap]"]=!1;var yr=typeof sr=="object"&&sr&&sr.Object===Object&&sr,xr=typeof self=="object"&&self&&self.Object===Object&&self,vr=yr||xr||Function("return this")(),_r=typeof ir=="object"&&ir&&!ir.nodeType&&ir,Er=_r&&typeof nr=="object"&&nr&&!nr.nodeType&&nr,Tr=Er&&Er.exports===_r&&yr.process,Rr=function(){try{return Tr&&Tr.binding("util")}catch{}}(),Nr=Rr&&Rr.isTypedArray;function Dr(Nn,ns,Ps,Ss){for(var Ks=-1,Is=Nn?Nn.length:0;++Ks<Is;){var An=Nn[Ks];ns(Ss,An,Ps(An),Nn)}return Ss}function Ir(Nn,ns){for(var Ps=-1,Ss=Nn?Nn.length:0;++Ps<Ss;)if(ns(Nn[Ps],Ps,Nn))return!0;return!1}function Or(Nn){var ns=!1;if(Nn!=null&&typeof Nn.toString!="function")try{ns=!!(Nn+"")}catch{}return ns}function jr(Nn){var ns=-1,Ps=Array(Nn.size);return Nn.forEach(function(Ss,Ks){Ps[++ns]=[Ks,Ss]}),Ps}function Lr(Nn){var ns=-1,Ps=Array(Nn.size);return Nn.forEach(function(Ss){Ps[++ns]=Ss}),Ps}var Cr,wr,Pr,Ar=Array.prototype,Sr=Function.prototype,Mr=Object.prototype,qr=vr["__core-js_shared__"],$r=(Cr=/[^.]+$/.exec(qr&&qr.keys&&qr.keys.IE_PROTO||""))?"Symbol(src)_1."+Cr:"",Br=Sr.toString,zr=Mr.hasOwnProperty,Gr=Mr.toString,Vr=RegExp("^"+Br.call(zr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=vr.Symbol,Ur=vr.Uint8Array,Fr=Mr.propertyIsEnumerable,Kr=Ar.splice,Zr=(wr=Object.keys,Pr=Object,function(Nn){return wr(Pr(Nn))}),Jr=Yn(vr,"DataView"),tn=Yn(vr,"Map"),an=Yn(vr,"Promise"),dn=Yn(vr,"Set"),en=Yn(vr,"WeakMap"),rn=Yn(Object,"create"),sn=On(Jr),on=On(tn),fn=On(an),pn=On(dn),gn=On(en),Pn=Xr?Xr.prototype:void 0,In=Pn?Pn.valueOf:void 0,En=Pn?Pn.toString:void 0;function zn(Nn){var ns=-1,Ps=Nn?Nn.length:0;for(this.clear();++ns<Ps;){var Ss=Nn[ns];this.set(Ss[0],Ss[1])}}function yn(Nn){var ns=-1,Ps=Nn?Nn.length:0;for(this.clear();++ns<Ps;){var Ss=Nn[ns];this.set(Ss[0],Ss[1])}}function Vn(Nn){var ns=-1,Ps=Nn?Nn.length:0;for(this.clear();++ns<Ps;){var Ss=Nn[ns];this.set(Ss[0],Ss[1])}}function Kn(Nn){var ns=-1,Ps=Nn?Nn.length:0;for(this.__data__=new Vn;++ns<Ps;)this.add(Nn[ns])}function es(Nn){this.__data__=new yn(Nn)}function Xn(Nn,ns){var Ps=As(Nn)||ws(Nn)?function(An,Vs){for(var Fs=-1,Cs=Array(An);++Fs<An;)Cs[Fs]=Vs(Fs);return Cs}(Nn.length,String):[],Ss=Ps.length,Ks=!!Ss;for(var Is in Nn)!zr.call(Nn,Is)||Ks&&(Is=="length"||_n(Is,Ss))||Ps.push(Is);return Ps}function ds(Nn,ns){for(var Ps=Nn.length;Ps--;)if(us(Nn[Ps][0],ns))return Ps;return-1}function fs(Nn,ns,Ps,Ss){return Hn(Nn,function(Ks,Is,An){ns(Ss,Ks,Ps(Ks),An)}),Ss}zn.prototype.clear=function(){this.__data__=rn?rn(null):{}},zn.prototype.delete=function(Nn){return this.has(Nn)&&delete this.__data__[Nn]},zn.prototype.get=function(Nn){var ns=this.__data__;if(rn){var Ps=ns[Nn];return Ps==="__lodash_hash_undefined__"?void 0:Ps}return zr.call(ns,Nn)?ns[Nn]:void 0},zn.prototype.has=function(Nn){var ns=this.__data__;return rn?ns[Nn]!==void 0:zr.call(ns,Nn)},zn.prototype.set=function(Nn,ns){return this.__data__[Nn]=rn&&ns===void 0?"__lodash_hash_undefined__":ns,this},yn.prototype.clear=function(){this.__data__=[]},yn.prototype.delete=function(Nn){var ns=this.__data__,Ps=ds(ns,Nn);return!(Ps<0)&&(Ps==ns.length-1?ns.pop():Kr.call(ns,Ps,1),!0)},yn.prototype.get=function(Nn){var ns=this.__data__,Ps=ds(ns,Nn);return Ps<0?void 0:ns[Ps][1]},yn.prototype.has=function(Nn){return ds(this.__data__,Nn)>-1},yn.prototype.set=function(Nn,ns){var Ps=this.__data__,Ss=ds(Ps,Nn);return Ss<0?Ps.push([Nn,ns]):Ps[Ss][1]=ns,this},Vn.prototype.clear=function(){this.__data__={hash:new zn,map:new(tn||yn),string:new zn}},Vn.prototype.delete=function(Nn){return Bn(this,Nn).delete(Nn)},Vn.prototype.get=function(Nn){return Bn(this,Nn).get(Nn)},Vn.prototype.has=function(Nn){return Bn(this,Nn).has(Nn)},Vn.prototype.set=function(Nn,ns){return Bn(this,Nn).set(Nn,ns),this},Kn.prototype.add=Kn.prototype.push=function(Nn){return this.__data__.set(Nn,"__lodash_hash_undefined__"),this},Kn.prototype.has=function(Nn){return this.__data__.has(Nn)},es.prototype.clear=function(){this.__data__=new yn},es.prototype.delete=function(Nn){return this.__data__.delete(Nn)},es.prototype.get=function(Nn){return this.__data__.get(Nn)},es.prototype.has=function(Nn){return this.__data__.has(Nn)},es.prototype.set=function(Nn,ns){var Ps=this.__data__;if(Ps instanceof yn){var Ss=Ps.__data__;if(!tn||Ss.length<199)return Ss.push([Nn,ns]),this;Ps=this.__data__=new Vn(Ss)}return Ps.set(Nn,ns),this};var os,Hn=(os=function(Nn,ns){return Nn&&Ln(Nn,ns,Un)},function(Nn,ns){if(Nn==null)return Nn;if(!Rs(Nn))return os(Nn,ns);for(var Ps=Nn.length,Ss=-1,Ks=Object(Nn);++Ss<Ps&&ns(Ks[Ss],Ss,Ks)!==!1;);return Nn}),Ln=function(Nn){return function(ns,Ps,Ss){for(var Ks=-1,Is=Object(ns),An=Ss(ns),Vs=An.length;Vs--;){var Fs=An[++Ks];if(Ps(Is[Fs],Fs,Is)===!1)break}return ns}}();function Dn(Nn,ns){for(var Ps=0,Ss=(ns=Mn(ns,Nn)?[ns]:is(ns)).length;Nn!=null&&Ps<Ss;)Nn=Nn[wn(ns[Ps++])];return Ps&&Ps==Ss?Nn:void 0}function ls(Nn,ns){return Nn!=null&&ns in Object(Nn)}function Ds(Nn,ns,Ps,Ss,Ks){return Nn===ns||(Nn==null||ns==null||!Zs(Nn)&&!Qs(ns)?Nn!=Nn&&ns!=ns:function(Is,An,Vs,Fs,Cs,Ns){var Ys=As(Is),js=As(An),Js="[object Array]",to="[object Array]";Ys||(Js=(Js=vn(Is))==ar?lr:Js),js||(to=(to=vn(An))==ar?lr:to);var mo=Js==lr&&!Or(Is),Eo=to==lr&&!Or(An),fo=Js==to;if(fo&&!mo)return Ns||(Ns=new es),Ys||ao(Is)?bs(Is,An,Vs,Fs,Cs,Ns):function(ro,no,Do,ho,Ko,Io,Oo){switch(Do){case"[object DataView]":if(ro.byteLength!=no.byteLength||ro.byteOffset!=no.byteOffset)return!1;ro=ro.buffer,no=no.buffer;case"[object ArrayBuffer]":return!(ro.byteLength!=no.byteLength||!ho(new Ur(ro),new Ur(no)));case"[object Boolean]":case"[object Date]":case"[object Number]":return us(+ro,+no);case"[object Error]":return ro.name==no.name&&ro.message==no.message;case"[object RegExp]":case"[object String]":return ro==no+"";case cr:var Zo=jr;case or:var Al=2&Io;if(Zo||(Zo=Lr),ro.size!=no.size&&!Al)return!1;var Ul=Oo.get(ro);if(Ul)return Ul==no;Io|=1,Oo.set(ro,no);var Lo=bs(Zo(ro),Zo(no),ho,Ko,Io,Oo);return Oo.delete(ro),Lo;case"[object Symbol]":if(In)return In.call(ro)==In.call(no)}return!1}(Is,An,Js,Vs,Fs,Cs,Ns);if(!(2&Cs)){var No=mo&&zr.call(Is,"__wrapped__"),Bo=Eo&&zr.call(An,"__wrapped__");if(No||Bo){var go=No?Is.value():Is,jo=Bo?An.value():An;return Ns||(Ns=new es),Vs(go,jo,Fs,Cs,Ns)}}return fo?(Ns||(Ns=new es),function(ro,no,Do,ho,Ko,Io){var Oo=2&Ko,Zo=Un(ro),Al=Zo.length,Ul=Un(no).length;if(Al!=Ul&&!Oo)return!1;for(var Lo=Al;Lo--;){var zo=Zo[Lo];if(!(Oo?zo in no:zr.call(no,zo)))return!1}var Rl=Io.get(ro);if(Rl&&Io.get(no))return Rl==no;var Wo=!0;Io.set(ro,no),Io.set(no,ro);for(var _o=Oo;++Lo<Al;){zo=Zo[Lo];var zl=ro[zo],_l=no[zo];if(ho)var io=Oo?ho(_l,zl,zo,no,ro,Io):ho(zl,_l,zo,ro,no,Io);if(!(io===void 0?zl===_l||Do(zl,_l,ho,Ko,Io):io)){Wo=!1;break}_o||(_o=zo=="constructor")}if(Wo&&!_o){var Qo=ro.constructor,Kl=no.constructor;Qo==Kl||!("constructor"in ro)||!("constructor"in no)||typeof Qo=="function"&&Qo instanceof Qo&&typeof Kl=="function"&&Kl instanceof Kl||(Wo=!1)}return Io.delete(ro),Io.delete(no),Wo}(Is,An,Vs,Fs,Cs,Ns)):!1}(Nn,ns,Ds,Ps,Ss,Ks))}function xs(Nn){return!(!Zs(Nn)||function(ns){return!!$r&&$r in ns}(Nn))&&(Ms(Nn)||Or(Nn)?Vr:br).test(On(Nn))}function kn(Nn){return typeof Nn=="function"?Nn:Nn==null?Ts:typeof Nn=="object"?As(Nn)?function(Ss,Ks){return Mn(Ss)&&Cn(Ks)?Zn(wn(Ss),Ks):function(Is){var An=function(Vs,Fs,Cs){var Ns=Vs==null?void 0:Dn(Vs,Fs);return Ns===void 0?Cs:Ns}(Is,Ss);return An===void 0&&An===Ks?function(Vs,Fs){return Vs!=null&&function(Cs,Ns,Ys){Ns=Mn(Ns,Cs)?[Ns]:is(Ns);for(var js,Js=-1,to=Ns.length;++Js<to;){var mo=wn(Ns[Js]);if(!(js=Cs!=null&&Ys(Cs,mo)))break;Cs=Cs[mo]}return js||!!(to=Cs?Cs.length:0)&&Bs(to)&&_n(mo,to)&&(As(Cs)||ws(Cs))}(Vs,Fs,ls)}(Is,Ss):Ds(Ks,An,void 0,3)}}(Nn[0],Nn[1]):function(Ss){var Ks=function(Is){for(var An=Un(Is),Vs=An.length;Vs--;){var Fs=An[Vs],Cs=Is[Fs];An[Vs]=[Fs,Cs,Cn(Cs)]}return An}(Ss);return Ks.length==1&&Ks[0][2]?Zn(Ks[0][0],Ks[0][1]):function(Is){return Is===Ss||function(An,Vs,Fs,Cs){var Ns=Fs.length,Ys=Ns;if(An==null)return!Ys;for(An=Object(An);Ns--;){var js=Fs[Ns];if(js[2]?js[1]!==An[js[0]]:!(js[0]in An))return!1}for(;++Ns<Ys;){var Js=(js=Fs[Ns])[0],to=An[Js],mo=js[1];if(js[2]){if(to===void 0&&!(Js in An))return!1}else{var Eo=new es,fo;if(!(fo===void 0?Ds(mo,to,Cs,3,Eo):fo))return!1}}return!0}(Is,Ss,Ks)}}(Nn):Mn(ns=Nn)?(Ps=wn(ns),function(Ss){return Ss==null?void 0:Ss[Ps]}):function(Ss){return function(Ks){return Dn(Ks,Ss)}}(ns);var ns,Ps}function Jn(Nn){if(Ps=(ns=Nn)&&ns.constructor,Ss=typeof Ps=="function"&&Ps.prototype||Mr,ns!==Ss)return Zr(Nn);var ns,Ps,Ss,Ks=[];for(var Is in Object(Nn))zr.call(Nn,Is)&&Is!="constructor"&&Ks.push(Is);return Ks}function is(Nn){return As(Nn)?Nn:qn(Nn)}function bs(Nn,ns,Ps,Ss,Ks,Is){var An=2&Ks,Vs=Nn.length,Fs=ns.length;if(Vs!=Fs&&!(An&&Fs>Vs))return!1;var Cs=Is.get(Nn);if(Cs&&Is.get(ns))return Cs==ns;var Ns=-1,Ys=!0,js=1&Ks?new Kn:void 0;for(Is.set(Nn,ns),Is.set(ns,Nn);++Ns<Vs;){var Js=Nn[Ns],to=ns[Ns];if(Ss)var mo=An?Ss(to,Js,Ns,ns,Nn,Is):Ss(Js,to,Ns,Nn,ns,Is);if(mo!==void 0){if(mo)continue;Ys=!1;break}if(js){if(!Ir(ns,function(Eo,fo){if(!js.has(fo)&&(Js===Eo||Ps(Js,Eo,Ss,Ks,Is)))return js.add(fo)})){Ys=!1;break}}else if(Js!==to&&!Ps(Js,to,Ss,Ks,Is)){Ys=!1;break}}return Is.delete(Nn),Is.delete(ns),Ys}function Bn(Nn,ns){var Ps,Ss,Ks=Nn.__data__;return((Ss=typeof(Ps=ns))=="string"||Ss=="number"||Ss=="symbol"||Ss=="boolean"?Ps!=="__proto__":Ps===null)?Ks[typeof ns=="string"?"string":"hash"]:Ks.map}function Yn(Nn,ns){var Ps=function(Ss,Ks){return Ss==null?void 0:Ss[Ks]}(Nn,ns);return xs(Ps)?Ps:void 0}var vn=function(Nn){return Gr.call(Nn)};function _n(Nn,ns){return!!(ns=ns??9007199254740991)&&(typeof Nn=="number"||pr.test(Nn))&&Nn>-1&&Nn%1==0&&Nn<ns}function Mn(Nn,ns){if(As(Nn))return!1;var Ps=typeof Nn;return!(Ps!="number"&&Ps!="symbol"&&Ps!="boolean"&&Nn!=null&&!eo(Nn))||hr.test(Nn)||!ur.test(Nn)||ns!=null&&Nn in Object(ns)}function Cn(Nn){return Nn==Nn&&!Zs(Nn)}function Zn(Nn,ns){return function(Ps){return Ps!=null&&Ps[Nn]===ns&&(ns!==void 0||Nn in Object(Ps))}}(Jr&&vn(new Jr(new ArrayBuffer(1)))!="[object DataView]"||tn&&vn(new tn)!=cr||an&&vn(an.resolve())!="[object Promise]"||dn&&vn(new dn)!=or||en&&vn(new en)!="[object WeakMap]")&&(vn=function(Nn){var ns=Gr.call(Nn),Ps=ns==lr?Nn.constructor:void 0,Ss=Ps?On(Ps):void 0;if(Ss)switch(Ss){case sn:return"[object DataView]";case on:return cr;case fn:return"[object Promise]";case pn:return or;case gn:return"[object WeakMap]"}return ns});var qn=$s(function(Nn){var ns;Nn=(ns=Nn)==null?"":function(Ss){if(typeof Ss=="string")return Ss;if(eo(Ss))return En?En.call(Ss):"";var Ks=Ss+"";return Ks=="0"&&1/Ss==-1/0?"-0":Ks}(ns);var Ps=[];return dr.test(Nn)&&Ps.push(""),Nn.replace(fr,function(Ss,Ks,Is,An){Ps.push(Is?An.replace(gr,"$1"):Ks||Ss)}),Ps});function wn(Nn){if(typeof Nn=="string"||eo(Nn))return Nn;var ns=Nn+"";return ns=="0"&&1/Nn==-1/0?"-0":ns}function On(Nn){if(Nn!=null){try{return Br.call(Nn)}catch{}try{return Nn+""}catch{}}return""}var Gn,Qn=(Gn=function(Nn,ns,Ps){zr.call(Nn,Ps)?Nn[Ps].push(ns):Nn[Ps]=[ns]},function(Nn,ns){var Ps=As(Nn)?Dr:fs,Ss={};return Ps(Nn,Gn,kn(ns),Ss)});function $s(Nn,ns){if(typeof Nn!="function"||ns&&typeof ns!="function")throw new TypeError("Expected a function");var Ps=function(){var Ss=arguments,Ks=ns?ns.apply(this,Ss):Ss[0],Is=Ps.cache;if(Is.has(Ks))return Is.get(Ks);var An=Nn.apply(this,Ss);return Ps.cache=Is.set(Ks,An),An};return Ps.cache=new($s.Cache||Vn),Ps}function us(Nn,ns){return Nn===ns||Nn!=Nn&&ns!=ns}function ws(Nn){return function(ns){return Qs(ns)&&Rs(ns)}(Nn)&&zr.call(Nn,"callee")&&(!Fr.call(Nn,"callee")||Gr.call(Nn)==ar)}$s.Cache=Vn;var As=Array.isArray;function Rs(Nn){return Nn!=null&&Bs(Nn.length)&&!Ms(Nn)}function Ms(Nn){var ns=Zs(Nn)?Gr.call(Nn):"";return ns=="[object Function]"||ns=="[object GeneratorFunction]"}function Bs(Nn){return typeof Nn=="number"&&Nn>-1&&Nn%1==0&&Nn<=9007199254740991}function Zs(Nn){var ns=typeof Nn;return!!Nn&&(ns=="object"||ns=="function")}function Qs(Nn){return!!Nn&&typeof Nn=="object"}function eo(Nn){return typeof Nn=="symbol"||Qs(Nn)&&Gr.call(Nn)=="[object Symbol]"}var ao=Nr?function(Nn){return function(ns){return Nn(ns)}}(Nr):function(Nn){return Qs(Nn)&&Bs(Nn.length)&&!!mr[Gr.call(Nn)]};function Un(Nn){return Rs(Nn)?Xn(Nn):Jn(Nn)}function Ts(Nn){return Nn}nr.exports=Qn}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(rr,nr,ir){var sr=Object.prototype.toString;nr.exports=function(ar){return ar===!0||ar===!1||function(cr){return!!cr&&typeof cr=="object"}(ar)&&sr.call(ar)=="[object Boolean]"}},{}],445:[function(rr,nr,ir){(function(sr){(function(){var ar="[object Arguments]",cr="[object Map]",lr="[object Object]",or="[object Set]",ur=/^\[object .+?Constructor\]$/,hr=/^(?:0|[1-9]\d*)$/,dr={};dr["[object Float32Array]"]=dr["[object Float64Array]"]=dr["[object Int8Array]"]=dr["[object Int16Array]"]=dr["[object Int32Array]"]=dr["[object Uint8Array]"]=dr["[object Uint8ClampedArray]"]=dr["[object Uint16Array]"]=dr["[object Uint32Array]"]=!0,dr[ar]=dr["[object Array]"]=dr["[object ArrayBuffer]"]=dr["[object Boolean]"]=dr["[object DataView]"]=dr["[object Date]"]=dr["[object Error]"]=dr["[object Function]"]=dr[cr]=dr["[object Number]"]=dr[lr]=dr["[object RegExp]"]=dr[or]=dr["[object String]"]=dr["[object WeakMap]"]=!1;var fr=typeof sr=="object"&&sr&&sr.Object===Object&&sr,gr=typeof self=="object"&&self&&self.Object===Object&&self,br=fr||gr||Function("return this")(),pr=typeof ir=="object"&&ir&&!ir.nodeType&&ir,mr=pr&&typeof nr=="object"&&nr&&!nr.nodeType&&nr,yr=mr&&mr.exports===pr,xr=yr&&fr.process,vr=function(){try{return xr&&xr.binding&&xr.binding("util")}catch{}}(),_r=vr&&vr.isTypedArray;function Er(wn,On){for(var Gn=-1,Qn=wn==null?0:wn.length;++Gn<Qn;)if(On(wn[Gn],Gn,wn))return!0;return!1}function Tr(wn){var On=-1,Gn=Array(wn.size);return wn.forEach(function(Qn,$s){Gn[++On]=[$s,Qn]}),Gn}function Rr(wn){var On=-1,Gn=Array(wn.size);return wn.forEach(function(Qn){Gn[++On]=Qn}),Gn}var Nr,Dr,Ir,Or=Array.prototype,jr=Function.prototype,Lr=Object.prototype,Cr=br["__core-js_shared__"],wr=jr.toString,Pr=Lr.hasOwnProperty,Ar=(Nr=/[^.]+$/.exec(Cr&&Cr.keys&&Cr.keys.IE_PROTO||""))?"Symbol(src)_1."+Nr:"",Sr=Lr.toString,Mr=RegExp("^"+wr.call(Pr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qr=yr?br.Buffer:void 0,$r=br.Symbol,Br=br.Uint8Array,zr=Lr.propertyIsEnumerable,Gr=Or.splice,Vr=$r?$r.toStringTag:void 0,Xr=Object.getOwnPropertySymbols,Ur=qr?qr.isBuffer:void 0,Fr=(Dr=Object.keys,Ir=Object,function(wn){return Dr(Ir(wn))}),Kr=ls(br,"DataView"),Zr=ls(br,"Map"),Jr=ls(br,"Promise"),tn=ls(br,"Set"),an=ls(br,"WeakMap"),dn=ls(Object,"create"),en=Jn(Kr),rn=Jn(Zr),sn=Jn(Jr),on=Jn(tn),fn=Jn(an),pn=$r?$r.prototype:void 0,gn=pn?pn.valueOf:void 0;function Pn(wn){var On=-1,Gn=wn==null?0:wn.length;for(this.clear();++On<Gn;){var Qn=wn[On];this.set(Qn[0],Qn[1])}}function In(wn){var On=-1,Gn=wn==null?0:wn.length;for(this.clear();++On<Gn;){var Qn=wn[On];this.set(Qn[0],Qn[1])}}function En(wn){var On=-1,Gn=wn==null?0:wn.length;for(this.clear();++On<Gn;){var Qn=wn[On];this.set(Qn[0],Qn[1])}}function zn(wn){var On=-1,Gn=wn==null?0:wn.length;for(this.__data__=new En;++On<Gn;)this.add(wn[On])}function yn(wn){var On=this.__data__=new In(wn);this.size=On.size}function Vn(wn,On){var Gn=Bn(wn),Qn=!Gn&&bs(wn),$s=!Gn&&!Qn&&Yn(wn),us=!Gn&&!Qn&&!$s&&Zn(wn),ws=Gn||Qn||$s||us,As=ws?function(Bs,Zs){for(var Qs=-1,eo=Array(Bs);++Qs<Bs;)eo[Qs]=Zs(Qs);return eo}(wn.length,String):[],Rs=As.length;for(var Ms in wn)!Pr.call(wn,Ms)||ws&&(Ms=="length"||$s&&(Ms=="offset"||Ms=="parent")||us&&(Ms=="buffer"||Ms=="byteLength"||Ms=="byteOffset")||kn(Ms,Rs))||As.push(Ms);return As}function Kn(wn,On){for(var Gn=wn.length;Gn--;)if(is(wn[Gn][0],On))return Gn;return-1}function es(wn){return wn==null?wn===void 0?"[object Undefined]":"[object Null]":Vr&&Vr in Object(wn)?function(On){var Gn=Pr.call(On,Vr),Qn=On[Vr];try{On[Vr]=void 0;var $s=!0}catch{}var us=Sr.call(On);return $s&&(Gn?On[Vr]=Qn:delete On[Vr]),us}(wn):function(On){return Sr.call(On)}(wn)}function Xn(wn){return Cn(wn)&&es(wn)==ar}function ds(wn,On,Gn,Qn,$s){return wn===On||(wn==null||On==null||!Cn(wn)&&!Cn(On)?wn!=wn&&On!=On:function(us,ws,As,Rs,Ms,Bs){var Zs=Bn(us),Qs=Bn(ws),eo=Zs?"[object Array]":xs(us),ao=Qs?"[object Array]":xs(ws),Un=(eo=eo==ar?lr:eo)==lr,Ts=(ao=ao==ar?lr:ao)==lr,Nn=eo==ao;if(Nn&&Yn(us)){if(!Yn(ws))return!1;Zs=!0,Un=!1}if(Nn&&!Un)return Bs||(Bs=new yn),Zs||Zn(us)?Hn(us,ws,As,Rs,Ms,Bs):function(Is,An,Vs,Fs,Cs,Ns,Ys){switch(Vs){case"[object DataView]":if(Is.byteLength!=An.byteLength||Is.byteOffset!=An.byteOffset)return!1;Is=Is.buffer,An=An.buffer;case"[object ArrayBuffer]":return!(Is.byteLength!=An.byteLength||!Ns(new Br(Is),new Br(An)));case"[object Boolean]":case"[object Date]":case"[object Number]":return is(+Is,+An);case"[object Error]":return Is.name==An.name&&Is.message==An.message;case"[object RegExp]":case"[object String]":return Is==An+"";case cr:var js=Tr;case or:var Js=1&Fs;if(js||(js=Rr),Is.size!=An.size&&!Js)return!1;var to=Ys.get(Is);if(to)return to==An;Fs|=2,Ys.set(Is,An);var mo=Hn(js(Is),js(An),Fs,Cs,Ns,Ys);return Ys.delete(Is),mo;case"[object Symbol]":if(gn)return gn.call(Is)==gn.call(An)}return!1}(us,ws,eo,As,Rs,Ms,Bs);if(!(1&As)){var ns=Un&&Pr.call(us,"__wrapped__"),Ps=Ts&&Pr.call(ws,"__wrapped__");if(ns||Ps){var Ss=ns?us.value():us,Ks=Ps?ws.value():ws;return Bs||(Bs=new yn),Ms(Ss,Ks,As,Rs,Bs)}}return Nn?(Bs||(Bs=new yn),function(Is,An,Vs,Fs,Cs,Ns){var Ys=1&Vs,js=Ln(Is),Js=js.length,to=Ln(An).length;if(Js!=to&&!Ys)return!1;for(var mo=Js;mo--;){var Eo=js[mo];if(!(Ys?Eo in An:Pr.call(An,Eo)))return!1}var fo=Ns.get(Is);if(fo&&Ns.get(An))return fo==An;var No=!0;Ns.set(Is,An),Ns.set(An,Is);for(var Bo=Ys;++mo<Js;){Eo=js[mo];var go=Is[Eo],jo=An[Eo];if(Fs)var ro=Ys?Fs(jo,go,Eo,An,Is,Ns):Fs(go,jo,Eo,Is,An,Ns);if(!(ro===void 0?go===jo||Cs(go,jo,Vs,Fs,Ns):ro)){No=!1;break}Bo||(Bo=Eo=="constructor")}if(No&&!Bo){var no=Is.constructor,Do=An.constructor;no==Do||!("constructor"in Is)||!("constructor"in An)||typeof no=="function"&&no instanceof no&&typeof Do=="function"&&Do instanceof Do||(No=!1)}return Ns.delete(Is),Ns.delete(An),No}(us,ws,As,Rs,Ms,Bs)):!1}(wn,On,Gn,Qn,ds,$s))}function fs(wn){return!(!Mn(wn)||function(On){return!!Ar&&Ar in On}(wn))&&(vn(wn)?Mr:ur).test(Jn(wn))}function os(wn){if(Gn=(On=wn)&&On.constructor,Qn=typeof Gn=="function"&&Gn.prototype||Lr,On!==Qn)return Fr(wn);var On,Gn,Qn,$s=[];for(var us in Object(wn))Pr.call(wn,us)&&us!="constructor"&&$s.push(us);return $s}function Hn(wn,On,Gn,Qn,$s,us){var ws=1&Gn,As=wn.length,Rs=On.length;if(As!=Rs&&!(ws&&Rs>As))return!1;var Ms=us.get(wn);if(Ms&&us.get(On))return Ms==On;var Bs=-1,Zs=!0,Qs=2&Gn?new zn:void 0;for(us.set(wn,On),us.set(On,wn);++Bs<As;){var eo=wn[Bs],ao=On[Bs];if(Qn)var Un=ws?Qn(ao,eo,Bs,On,wn,us):Qn(eo,ao,Bs,wn,On,us);if(Un!==void 0){if(Un)continue;Zs=!1;break}if(Qs){if(!Er(On,function(Ts,Nn){if(ns=Nn,!Qs.has(ns)&&(eo===Ts||$s(eo,Ts,Gn,Qn,us)))return Qs.push(Nn);var ns})){Zs=!1;break}}else if(eo!==ao&&!$s(eo,ao,Gn,Qn,us)){Zs=!1;break}}return us.delete(wn),us.delete(On),Zs}function Ln(wn){return function(On,Gn,Qn){var $s=Gn(On);return Bn(On)?$s:function(us,ws){for(var As=-1,Rs=ws.length,Ms=us.length;++As<Rs;)us[Ms+As]=ws[As];return us}($s,Qn(On))}(wn,qn,Ds)}function Dn(wn,On){var Gn,Qn,$s=wn.__data__;return((Qn=typeof(Gn=On))=="string"||Qn=="number"||Qn=="symbol"||Qn=="boolean"?Gn!=="__proto__":Gn===null)?$s[typeof On=="string"?"string":"hash"]:$s.map}function ls(wn,On){var Gn=function(Qn,$s){return Qn==null?void 0:Qn[$s]}(wn,On);return fs(Gn)?Gn:void 0}Pn.prototype.clear=function(){this.__data__=dn?dn(null):{},this.size=0},Pn.prototype.delete=function(wn){var On=this.has(wn)&&delete this.__data__[wn];return this.size-=On?1:0,On},Pn.prototype.get=function(wn){var On=this.__data__;if(dn){var Gn=On[wn];return Gn==="__lodash_hash_undefined__"?void 0:Gn}return Pr.call(On,wn)?On[wn]:void 0},Pn.prototype.has=function(wn){var On=this.__data__;return dn?On[wn]!==void 0:Pr.call(On,wn)},Pn.prototype.set=function(wn,On){var Gn=this.__data__;return this.size+=this.has(wn)?0:1,Gn[wn]=dn&&On===void 0?"__lodash_hash_undefined__":On,this},In.prototype.clear=function(){this.__data__=[],this.size=0},In.prototype.delete=function(wn){var On=this.__data__,Gn=Kn(On,wn);return!(Gn<0)&&(Gn==On.length-1?On.pop():Gr.call(On,Gn,1),--this.size,!0)},In.prototype.get=function(wn){var On=this.__data__,Gn=Kn(On,wn);return Gn<0?void 0:On[Gn][1]},In.prototype.has=function(wn){return Kn(this.__data__,wn)>-1},In.prototype.set=function(wn,On){var Gn=this.__data__,Qn=Kn(Gn,wn);return Qn<0?(++this.size,Gn.push([wn,On])):Gn[Qn][1]=On,this},En.prototype.clear=function(){this.size=0,this.__data__={hash:new Pn,map:new(Zr||In),string:new Pn}},En.prototype.delete=function(wn){var On=Dn(this,wn).delete(wn);return this.size-=On?1:0,On},En.prototype.get=function(wn){return Dn(this,wn).get(wn)},En.prototype.has=function(wn){return Dn(this,wn).has(wn)},En.prototype.set=function(wn,On){var Gn=Dn(this,wn),Qn=Gn.size;return Gn.set(wn,On),this.size+=Gn.size==Qn?0:1,this},zn.prototype.add=zn.prototype.push=function(wn){return this.__data__.set(wn,"__lodash_hash_undefined__"),this},zn.prototype.has=function(wn){return this.__data__.has(wn)},yn.prototype.clear=function(){this.__data__=new In,this.size=0},yn.prototype.delete=function(wn){var On=this.__data__,Gn=On.delete(wn);return this.size=On.size,Gn},yn.prototype.get=function(wn){return this.__data__.get(wn)},yn.prototype.has=function(wn){return this.__data__.has(wn)},yn.prototype.set=function(wn,On){var Gn=this.__data__;if(Gn instanceof In){var Qn=Gn.__data__;if(!Zr||Qn.length<199)return Qn.push([wn,On]),this.size=++Gn.size,this;Gn=this.__data__=new En(Qn)}return Gn.set(wn,On),this.size=Gn.size,this};var Ds=Xr?function(wn){return wn==null?[]:(wn=Object(wn),function(On,Gn){for(var Qn=-1,$s=On==null?0:On.length,us=0,ws=[];++Qn<$s;){var As=On[Qn];Gn(As,Qn,On)&&(ws[us++]=As)}return ws}(Xr(wn),function(On){return zr.call(wn,On)}))}:function(){return[]},xs=es;function kn(wn,On){return!!(On=On??9007199254740991)&&(typeof wn=="number"||hr.test(wn))&&wn>-1&&wn%1==0&&wn<On}function Jn(wn){if(wn!=null){try{return wr.call(wn)}catch{}try{return wn+""}catch{}}return""}function is(wn,On){return wn===On||wn!=wn&&On!=On}(Kr&&xs(new Kr(new ArrayBuffer(1)))!="[object DataView]"||Zr&&xs(new Zr)!=cr||Jr&&xs(Jr.resolve())!="[object Promise]"||tn&&xs(new tn)!=or||an&&xs(new an)!="[object WeakMap]")&&(xs=function(wn){var On=es(wn),Gn=On==lr?wn.constructor:void 0,Qn=Gn?Jn(Gn):"";if(Qn)switch(Qn){case en:return"[object DataView]";case rn:return cr;case sn:return"[object Promise]";case on:return or;case fn:return"[object WeakMap]"}return On});var bs=Xn(function(){return arguments}())?Xn:function(wn){return Cn(wn)&&Pr.call(wn,"callee")&&!zr.call(wn,"callee")},Bn=Array.isArray,Yn=Ur||function(){return!1};function vn(wn){if(!Mn(wn))return!1;var On=es(wn);return On=="[object Function]"||On=="[object GeneratorFunction]"||On=="[object AsyncFunction]"||On=="[object Proxy]"}function _n(wn){return typeof wn=="number"&&wn>-1&&wn%1==0&&wn<=9007199254740991}function Mn(wn){var On=typeof wn;return wn!=null&&(On=="object"||On=="function")}function Cn(wn){return wn!=null&&typeof wn=="object"}var Zn=_r?function(wn){return function(On){return wn(On)}}(_r):function(wn){return Cn(wn)&&_n(wn.length)&&!!dr[es(wn)]};function qn(wn){return(On=wn)!=null&&_n(On.length)&&!vn(On)?Vn(wn):os(wn);var On}nr.exports=function(wn,On){return ds(wn,On)}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(rr,nr,ir){(function(sr){(function(){var ar=typeof sr=="object"&&sr&&sr.Object===Object&&sr,cr=typeof self=="object"&&self&&self.Object===Object&&self,lr=ar||cr||Function("return this")(),or=Object.prototype,ur=or.hasOwnProperty,hr=or.toString,dr=lr.Symbol,fr=dr?dr.toStringTag:void 0;function gr(br){return br==null?br===void 0?"[object Undefined]":"[object Null]":fr&&fr in Object(br)?function(pr){var mr=ur.call(pr,fr),yr=pr[fr];try{pr[fr]=void 0;var xr=!0}catch{}var vr=hr.call(pr);return xr&&(mr?pr[fr]=yr:delete pr[fr]),vr}(br):function(pr){return hr.call(pr)}(br)}nr.exports=function(br){if(!function(mr){var yr=typeof mr;return mr!=null&&(yr=="object"||yr=="function")}(br))return!1;var pr=gr(br);return pr=="[object Function]"||pr=="[object GeneratorFunction]"||pr=="[object AsyncFunction]"||pr=="[object Proxy]"}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(rr,nr,ir){nr.exports=function(sr){return sr==null}},{}],448:[function(rr,nr,ir){nr.exports=function(sr){return sr===void 0}},{}],449:[function(rr,nr,ir){(function(sr){(function(){var ar=/^\[object .+?Constructor\]$/,cr=typeof sr=="object"&&sr&&sr.Object===Object&&sr,lr=typeof self=="object"&&self&&self.Object===Object&&self,or=cr||lr||Function("return this")();function ur($r,Br){return!!($r&&$r.length)&&function(zr,Gr,Vr){if(Gr!=Gr)return function(Fr,Kr,Zr,Jr){for(var tn=Fr.length,an=Zr+-1;++an<tn;)if(Kr(Fr[an],an,Fr))return an;return-1}(zr,hr,Vr);for(var Xr=Vr-1,Ur=zr.length;++Xr<Ur;)if(zr[Xr]===Gr)return Xr;return-1}($r,Br,0)>-1}function hr($r){return $r!=$r}function dr($r,Br){return $r.has(Br)}function fr($r){var Br=-1,zr=Array($r.size);return $r.forEach(function(Gr){zr[++Br]=Gr}),zr}var gr,br=Array.prototype,pr=Function.prototype,mr=Object.prototype,yr=or["__core-js_shared__"],xr=(gr=/[^.]+$/.exec(yr&&yr.keys&&yr.keys.IE_PROTO||""))?"Symbol(src)_1."+gr:"",vr=pr.toString,_r=mr.hasOwnProperty,Er=mr.toString,Tr=RegExp("^"+vr.call(_r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rr=br.splice,Nr=Mr(or,"Map"),Dr=Mr(or,"Set"),Ir=Mr(Object,"create");function Or($r){var Br=-1,zr=$r?$r.length:0;for(this.clear();++Br<zr;){var Gr=$r[Br];this.set(Gr[0],Gr[1])}}function jr($r){var Br=-1,zr=$r?$r.length:0;for(this.clear();++Br<zr;){var Gr=$r[Br];this.set(Gr[0],Gr[1])}}function Lr($r){var Br=-1,zr=$r?$r.length:0;for(this.clear();++Br<zr;){var Gr=$r[Br];this.set(Gr[0],Gr[1])}}function Cr($r){var Br=-1,zr=$r?$r.length:0;for(this.__data__=new Lr;++Br<zr;)this.add($r[Br])}function wr($r,Br){for(var zr,Gr,Vr=$r.length;Vr--;)if((zr=$r[Vr][0])===(Gr=Br)||zr!=zr&&Gr!=Gr)return Vr;return-1}function Pr($r){return!(!qr($r)||(Br=$r,xr&&xr in Br))&&(function(zr){var Gr=qr(zr)?Er.call(zr):"";return Gr=="[object Function]"||Gr=="[object GeneratorFunction]"}($r)||function(zr){var Gr=!1;if(zr!=null&&typeof zr.toString!="function")try{Gr=!!(zr+"")}catch{}return Gr}($r)?Tr:ar).test(function(zr){if(zr!=null){try{return vr.call(zr)}catch{}try{return zr+""}catch{}}return""}($r));var Br}Or.prototype.clear=function(){this.__data__=Ir?Ir(null):{}},Or.prototype.delete=function($r){return this.has($r)&&delete this.__data__[$r]},Or.prototype.get=function($r){var Br=this.__data__;if(Ir){var zr=Br[$r];return zr==="__lodash_hash_undefined__"?void 0:zr}return _r.call(Br,$r)?Br[$r]:void 0},Or.prototype.has=function($r){var Br=this.__data__;return Ir?Br[$r]!==void 0:_r.call(Br,$r)},Or.prototype.set=function($r,Br){return this.__data__[$r]=Ir&&Br===void 0?"__lodash_hash_undefined__":Br,this},jr.prototype.clear=function(){this.__data__=[]},jr.prototype.delete=function($r){var Br=this.__data__,zr=wr(Br,$r);return!(zr<0)&&(zr==Br.length-1?Br.pop():Rr.call(Br,zr,1),!0)},jr.prototype.get=function($r){var Br=this.__data__,zr=wr(Br,$r);return zr<0?void 0:Br[zr][1]},jr.prototype.has=function($r){return wr(this.__data__,$r)>-1},jr.prototype.set=function($r,Br){var zr=this.__data__,Gr=wr(zr,$r);return Gr<0?zr.push([$r,Br]):zr[Gr][1]=Br,this},Lr.prototype.clear=function(){this.__data__={hash:new Or,map:new(Nr||jr),string:new Or}},Lr.prototype.delete=function($r){return Sr(this,$r).delete($r)},Lr.prototype.get=function($r){return Sr(this,$r).get($r)},Lr.prototype.has=function($r){return Sr(this,$r).has($r)},Lr.prototype.set=function($r,Br){return Sr(this,$r).set($r,Br),this},Cr.prototype.add=Cr.prototype.push=function($r){return this.__data__.set($r,"__lodash_hash_undefined__"),this},Cr.prototype.has=function($r){return this.__data__.has($r)};var Ar=Dr&&1/fr(new Dr([,-0]))[1]==1/0?function($r){return new Dr($r)}:function(){};function Sr($r,Br){var zr,Gr,Vr=$r.__data__;return((Gr=typeof(zr=Br))=="string"||Gr=="number"||Gr=="symbol"||Gr=="boolean"?zr!=="__proto__":zr===null)?Vr[typeof Br=="string"?"string":"hash"]:Vr.map}function Mr($r,Br){var zr=function(Gr,Vr){return Gr==null?void 0:Gr[Vr]}($r,Br);return Pr(zr)?zr:void 0}function qr($r){var Br=typeof $r;return!!$r&&(Br=="object"||Br=="function")}nr.exports=function($r){return $r&&$r.length?function(Br,zr,Gr){var Vr=-1,Xr=ur,Ur=Br.length,Fr=!0,Kr=[],Zr=Kr;if(Ur>=200){var Jr=Ar(Br);if(Jr)return fr(Jr);Fr=!1,Xr=dr,Zr=new Cr}else Zr=Kr;e:for(;++Vr<Ur;){var tn=Br[Vr],an=tn;if(tn=tn!==0?tn:0,Fr&&an==an){for(var dn=Zr.length;dn--;)if(Zr[dn]===an)continue e;Kr.push(tn)}else Xr(Zr,an,Gr)||(Zr!==Kr&&Zr.push(an),Kr.push(tn))}return Kr}($r):[]}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("hash-base"),cr=rr("safe-buffer").Buffer,lr=new Array(16);function or(){ar.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function ur(br,pr){return br<<pr|br>>>32-pr}function hr(br,pr,mr,yr,xr,vr,_r){return ur(br+(pr&mr|~pr&yr)+xr+vr|0,_r)+pr|0}function dr(br,pr,mr,yr,xr,vr,_r){return ur(br+(pr&yr|mr&~yr)+xr+vr|0,_r)+pr|0}function fr(br,pr,mr,yr,xr,vr,_r){return ur(br+(pr^mr^yr)+xr+vr|0,_r)+pr|0}function gr(br,pr,mr,yr,xr,vr,_r){return ur(br+(mr^(pr|~yr))+xr+vr|0,_r)+pr|0}sr(or,ar),or.prototype._update=function(){for(var br=lr,pr=0;pr<16;++pr)br[pr]=this._block.readInt32LE(4*pr);var mr=this._a,yr=this._b,xr=this._c,vr=this._d;mr=hr(mr,yr,xr,vr,br[0],3614090360,7),vr=hr(vr,mr,yr,xr,br[1],3905402710,12),xr=hr(xr,vr,mr,yr,br[2],606105819,17),yr=hr(yr,xr,vr,mr,br[3],3250441966,22),mr=hr(mr,yr,xr,vr,br[4],4118548399,7),vr=hr(vr,mr,yr,xr,br[5],1200080426,12),xr=hr(xr,vr,mr,yr,br[6],2821735955,17),yr=hr(yr,xr,vr,mr,br[7],4249261313,22),mr=hr(mr,yr,xr,vr,br[8],1770035416,7),vr=hr(vr,mr,yr,xr,br[9],2336552879,12),xr=hr(xr,vr,mr,yr,br[10],4294925233,17),yr=hr(yr,xr,vr,mr,br[11],2304563134,22),mr=hr(mr,yr,xr,vr,br[12],1804603682,7),vr=hr(vr,mr,yr,xr,br[13],4254626195,12),xr=hr(xr,vr,mr,yr,br[14],2792965006,17),mr=dr(mr,yr=hr(yr,xr,vr,mr,br[15],1236535329,22),xr,vr,br[1],4129170786,5),vr=dr(vr,mr,yr,xr,br[6],3225465664,9),xr=dr(xr,vr,mr,yr,br[11],643717713,14),yr=dr(yr,xr,vr,mr,br[0],3921069994,20),mr=dr(mr,yr,xr,vr,br[5],3593408605,5),vr=dr(vr,mr,yr,xr,br[10],38016083,9),xr=dr(xr,vr,mr,yr,br[15],3634488961,14),yr=dr(yr,xr,vr,mr,br[4],3889429448,20),mr=dr(mr,yr,xr,vr,br[9],568446438,5),vr=dr(vr,mr,yr,xr,br[14],3275163606,9),xr=dr(xr,vr,mr,yr,br[3],4107603335,14),yr=dr(yr,xr,vr,mr,br[8],1163531501,20),mr=dr(mr,yr,xr,vr,br[13],2850285829,5),vr=dr(vr,mr,yr,xr,br[2],4243563512,9),xr=dr(xr,vr,mr,yr,br[7],1735328473,14),mr=fr(mr,yr=dr(yr,xr,vr,mr,br[12],2368359562,20),xr,vr,br[5],4294588738,4),vr=fr(vr,mr,yr,xr,br[8],2272392833,11),xr=fr(xr,vr,mr,yr,br[11],1839030562,16),yr=fr(yr,xr,vr,mr,br[14],4259657740,23),mr=fr(mr,yr,xr,vr,br[1],2763975236,4),vr=fr(vr,mr,yr,xr,br[4],1272893353,11),xr=fr(xr,vr,mr,yr,br[7],4139469664,16),yr=fr(yr,xr,vr,mr,br[10],3200236656,23),mr=fr(mr,yr,xr,vr,br[13],681279174,4),vr=fr(vr,mr,yr,xr,br[0],3936430074,11),xr=fr(xr,vr,mr,yr,br[3],3572445317,16),yr=fr(yr,xr,vr,mr,br[6],76029189,23),mr=fr(mr,yr,xr,vr,br[9],3654602809,4),vr=fr(vr,mr,yr,xr,br[12],3873151461,11),xr=fr(xr,vr,mr,yr,br[15],530742520,16),mr=gr(mr,yr=fr(yr,xr,vr,mr,br[2],3299628645,23),xr,vr,br[0],4096336452,6),vr=gr(vr,mr,yr,xr,br[7],1126891415,10),xr=gr(xr,vr,mr,yr,br[14],2878612391,15),yr=gr(yr,xr,vr,mr,br[5],4237533241,21),mr=gr(mr,yr,xr,vr,br[12],1700485571,6),vr=gr(vr,mr,yr,xr,br[3],2399980690,10),xr=gr(xr,vr,mr,yr,br[10],4293915773,15),yr=gr(yr,xr,vr,mr,br[1],2240044497,21),mr=gr(mr,yr,xr,vr,br[8],1873313359,6),vr=gr(vr,mr,yr,xr,br[15],4264355552,10),xr=gr(xr,vr,mr,yr,br[6],2734768916,15),yr=gr(yr,xr,vr,mr,br[13],1309151649,21),mr=gr(mr,yr,xr,vr,br[4],4149444226,6),vr=gr(vr,mr,yr,xr,br[11],3174756917,10),xr=gr(xr,vr,mr,yr,br[2],718787259,15),yr=gr(yr,xr,vr,mr,br[9],3951481745,21),this._a=this._a+mr|0,this._b=this._b+yr|0,this._c=this._c+xr|0,this._d=this._d+vr|0},or.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var br=cr.allocUnsafe(16);return br.writeInt32LE(this._a,0),br.writeInt32LE(this._b,4),br.writeInt32LE(this._c,8),br.writeInt32LE(this._d,12),br},nr.exports=or},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("brorand");function cr(lr){this.rand=lr||new ar.Rand}nr.exports=cr,cr.create=function(lr){return new cr(lr)},cr.prototype._randbelow=function(lr){var or=lr.bitLength(),ur=Math.ceil(or/8);do var hr=new sr(this.rand.generate(ur));while(hr.cmp(lr)>=0);return hr},cr.prototype._randrange=function(lr,or){var ur=or.sub(lr);return lr.add(this._randbelow(ur))},cr.prototype.test=function(lr,or,ur){var hr=lr.bitLength(),dr=sr.mont(lr),fr=new sr(1).toRed(dr);or||(or=Math.max(1,hr/48|0));for(var gr=lr.subn(1),br=0;!gr.testn(br);br++);for(var pr=lr.shrn(br),mr=gr.toRed(dr);or>0;or--){var yr=this._randrange(new sr(2),gr);ur&&ur(yr);var xr=yr.toRed(dr).redPow(pr);if(xr.cmp(fr)!==0&&xr.cmp(mr)!==0){for(var vr=1;vr<br;vr++){if((xr=xr.redSqr()).cmp(fr)===0)return!1;if(xr.cmp(mr)===0)break}if(vr===br)return!1}}return!0},cr.prototype.getDivisor=function(lr,or){var ur=lr.bitLength(),hr=sr.mont(lr),dr=new sr(1).toRed(hr);or||(or=Math.max(1,ur/48|0));for(var fr=lr.subn(1),gr=0;!fr.testn(gr);gr++);for(var br=lr.shrn(gr),pr=fr.toRed(hr);or>0;or--){var mr=this._randrange(new sr(2),fr),yr=lr.gcd(mr);if(yr.cmpn(1)!==0)return yr;var xr=mr.toRed(hr).redPow(br);if(xr.cmp(dr)!==0&&xr.cmp(pr)!==0){for(var vr=1;vr<gr;vr++){if((xr=xr.redSqr()).cmp(dr)===0)return xr.fromRed().subn(1).gcd(lr);if(xr.cmp(pr)===0)break}if(vr===gr)return(xr=xr.redSqr()).fromRed().subn(1).gcd(lr)}}return!1}},{"bn.js":452,brorand:187}],452:[function(rr,nr,ir){arguments[4][184][0].apply(ir,arguments)},{buffer:188,dup:184}],453:[function(rr,nr,ir){function sr(ar,cr){if(!ar)throw new Error(cr||"Assertion failed")}nr.exports=sr,sr.equal=function(ar,cr,lr){if(ar!=cr)throw new Error(lr||"Assertion failed: "+ar+" != "+cr)}},{}],454:[function(rr,nr,ir){var sr=ir;function ar(lr){return lr.length===1?"0"+lr:lr}function cr(lr){for(var or="",ur=0;ur<lr.length;ur++)or+=ar(lr[ur].toString(16));return or}sr.toArray=function(lr,or){if(Array.isArray(lr))return lr.slice();if(!lr)return[];var ur=[];if(typeof lr!="string"){for(var hr=0;hr<lr.length;hr++)ur[hr]=0|lr[hr];return ur}if(or==="hex")for((lr=lr.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(lr="0"+lr),hr=0;hr<lr.length;hr+=2)ur.push(parseInt(lr[hr]+lr[hr+1],16));else for(hr=0;hr<lr.length;hr++){var dr=lr.charCodeAt(hr),fr=dr>>8,gr=255&dr;fr?ur.push(fr,gr):ur.push(gr)}return ur},sr.zero2=ar,sr.toHex=cr,sr.encode=function(lr,or){return or==="hex"?cr(lr):lr}},{}],455:[function(rr,nr,ir){nr.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(rr,nr,ir){var sr=rr("asn1.js");ir.certificate=rr("./certificate");var ar=sr.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});ir.RSAPrivateKey=ar;var cr=sr.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});ir.RSAPublicKey=cr;var lr=sr.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(or),this.key("subjectPublicKey").bitstr())});ir.PublicKey=lr;var or=sr.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),ur=sr.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(or),this.key("subjectPrivateKey").octstr())});ir.PrivateKey=ur;var hr=sr.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});ir.EncryptedPrivateKey=hr;var dr=sr.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});ir.DSAPrivateKey=dr,ir.DSAparam=sr.define("DSAparam",function(){this.int()});var fr=sr.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(gr),this.key("publicKey").optional().explicit(1).bitstr())});ir.ECPrivateKey=fr;var gr=sr.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});ir.signature=sr.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":457,"asn1.js":170}],457:[function(rr,nr,ir){var sr=rr("asn1.js"),ar=sr.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),cr=sr.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),lr=sr.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),or=sr.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(lr),this.key("subjectPublicKey").bitstr())}),ur=sr.define("RelativeDistinguishedName",function(){this.setof(cr)}),hr=sr.define("RDNSequence",function(){this.seqof(ur)}),dr=sr.define("Name",function(){this.choice({rdnSequence:this.use(hr)})}),fr=sr.define("Validity",function(){this.seq().obj(this.key("notBefore").use(ar),this.key("notAfter").use(ar))}),gr=sr.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),br=sr.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(lr),this.key("issuer").use(dr),this.key("validity").use(fr),this.key("subject").use(dr),this.key("subjectPublicKeyInfo").use(or),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(gr).optional())}),pr=sr.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(br),this.key("signatureAlgorithm").use(lr),this.key("signatureValue").bitstr())});nr.exports=pr},{"asn1.js":170}],458:[function(rr,nr,ir){var sr=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,ar=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,cr=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,lr=rr("evp_bytestokey"),or=rr("browserify-aes"),ur=rr("safe-buffer").Buffer;nr.exports=function(hr,dr){var fr,gr=hr.toString(),br=gr.match(sr);if(br){var pr="aes"+br[1],mr=ur.from(br[2],"hex"),yr=ur.from(br[3].replace(/[\r\n]/g,""),"base64"),xr=lr(dr,mr.slice(0,8),parseInt(br[1],10)).key,vr=[],_r=or.createDecipheriv(pr,xr,mr);vr.push(_r.update(yr)),vr.push(_r.final()),fr=ur.concat(vr)}else{var Er=gr.match(cr);fr=ur.from(Er[2].replace(/[\r\n]/g,""),"base64")}return{tag:gr.match(ar)[1],data:fr}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(rr,nr,ir){var sr=rr("./asn1"),ar=rr("./aesid.json"),cr=rr("./fixProc"),lr=rr("browserify-aes"),or=rr("pbkdf2"),ur=rr("safe-buffer").Buffer;function hr(dr){var fr;typeof dr!="object"||ur.isBuffer(dr)||(fr=dr.passphrase,dr=dr.key),typeof dr=="string"&&(dr=ur.from(dr));var gr,br,pr=cr(dr,fr),mr=pr.tag,yr=pr.data;switch(mr){case"CERTIFICATE":br=sr.certificate.decode(yr,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(br||(br=sr.PublicKey.decode(yr,"der")),gr=br.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return sr.RSAPublicKey.decode(br.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return br.subjectPrivateKey=br.subjectPublicKey,{type:"ec",data:br};case"1.2.840.10040.4.1":return br.algorithm.params.pub_key=sr.DSAparam.decode(br.subjectPublicKey.data,"der"),{type:"dsa",data:br.algorithm.params};default:throw new Error("unknown key id "+gr)}case"ENCRYPTED PRIVATE KEY":yr=function(xr,vr){var _r=xr.algorithm.decrypt.kde.kdeparams.salt,Er=parseInt(xr.algorithm.decrypt.kde.kdeparams.iters.toString(),10),Tr=ar[xr.algorithm.decrypt.cipher.algo.join(".")],Rr=xr.algorithm.decrypt.cipher.iv,Nr=xr.subjectPrivateKey,Dr=parseInt(Tr.split("-")[1],10)/8,Ir=or.pbkdf2Sync(vr,_r,Er,Dr,"sha1"),Or=lr.createDecipheriv(Tr,Ir,Rr),jr=[];return jr.push(Or.update(Nr)),jr.push(Or.final()),ur.concat(jr)}(yr=sr.EncryptedPrivateKey.decode(yr,"der"),fr);case"PRIVATE KEY":switch(gr=(br=sr.PrivateKey.decode(yr,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return sr.RSAPrivateKey.decode(br.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:br.algorithm.curve,privateKey:sr.ECPrivateKey.decode(br.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return br.algorithm.params.priv_key=sr.DSAparam.decode(br.subjectPrivateKey,"der"),{type:"dsa",params:br.algorithm.params};default:throw new Error("unknown key id "+gr)}case"RSA PUBLIC KEY":return sr.RSAPublicKey.decode(yr,"der");case"RSA PRIVATE KEY":return sr.RSAPrivateKey.decode(yr,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:sr.DSAPrivateKey.decode(yr,"der")};case"EC PRIVATE KEY":return{curve:(yr=sr.ECPrivateKey.decode(yr,"der")).parameters.value,privateKey:yr.privateKey};default:throw new Error("unknown key type "+mr)}}nr.exports=hr,hr.signature=sr.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(rr,nr,ir){ir.pbkdf2=rr("./lib/async"),ir.pbkdf2Sync=rr("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(rr,nr,ir){(function(sr){(function(){var ar,cr,lr=rr("safe-buffer").Buffer,or=rr("./precondition"),ur=rr("./default-encoding"),hr=rr("./sync"),dr=rr("./to-buffer"),fr=sr.crypto&&sr.crypto.subtle,gr={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},br=[];function pr(){return cr||(cr=sr.process&&sr.process.nextTick?sr.process.nextTick:sr.queueMicrotask?sr.queueMicrotask:sr.setImmediate?sr.setImmediate:sr.setTimeout)}function mr(yr,xr,vr,_r,Er){return fr.importKey("raw",yr,{name:"PBKDF2"},!1,["deriveBits"]).then(function(Tr){return fr.deriveBits({name:"PBKDF2",salt:xr,iterations:vr,hash:{name:Er}},Tr,_r<<3)}).then(function(Tr){return lr.from(Tr)})}nr.exports=function(yr,xr,vr,_r,Er,Tr){typeof Er=="function"&&(Tr=Er,Er=void 0);var Rr=gr[(Er=Er||"sha1").toLowerCase()];if(Rr&&typeof sr.Promise=="function"){if(or(vr,_r),yr=dr(yr,ur,"Password"),xr=dr(xr,ur,"Salt"),typeof Tr!="function")throw new Error("No callback provided to pbkdf2");(function(Nr,Dr){Nr.then(function(Ir){pr()(function(){Dr(null,Ir)})},function(Ir){pr()(function(){Dr(Ir)})})})(function(Nr){if(sr.process&&!sr.process.browser||!fr||!fr.importKey||!fr.deriveBits)return Promise.resolve(!1);if(br[Nr]!==void 0)return br[Nr];var Dr=mr(ar=ar||lr.alloc(8),ar,10,128,Nr).then(function(){return!0}).catch(function(){return!1});return br[Nr]=Dr,Dr}(Rr).then(function(Nr){return Nr?mr(yr,xr,vr,_r,Rr):hr(yr,xr,vr,_r,Er)}),Tr)}else pr()(function(){var Nr;try{Nr=hr(yr,xr,vr,_r,Er)}catch(Dr){return Tr(Dr)}Tr(null,Nr)})}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(rr,nr,ir){(function(sr,ar){(function(){var cr;ar.process&&ar.process.browser?cr="utf-8":ar.process&&ar.process.version?cr=parseInt(sr.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":cr="utf-8",nr.exports=cr}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(rr,nr,ir){var sr=Math.pow(2,30)-1;nr.exports=function(ar,cr){if(typeof ar!="number")throw new TypeError("Iterations not a number");if(ar<0)throw new TypeError("Bad iterations");if(typeof cr!="number")throw new TypeError("Key length not a number");if(cr<0||cr>sr||cr!=cr)throw new TypeError("Bad key length")}},{}],464:[function(rr,nr,ir){var sr=rr("create-hash/md5"),ar=rr("ripemd160"),cr=rr("sha.js"),lr=rr("safe-buffer").Buffer,or=rr("./precondition"),ur=rr("./default-encoding"),hr=rr("./to-buffer"),dr=lr.alloc(128),fr={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function gr(br,pr,mr){var yr=function(Rr){function Nr(Dr){return cr(Rr).update(Dr).digest()}return Rr==="rmd160"||Rr==="ripemd160"?function(Dr){return new ar().update(Dr).digest()}:Rr==="md5"?sr:Nr}(br),xr=br==="sha512"||br==="sha384"?128:64;pr.length>xr?pr=yr(pr):pr.length<xr&&(pr=lr.concat([pr,dr],xr));for(var vr=lr.allocUnsafe(xr+fr[br]),_r=lr.allocUnsafe(xr+fr[br]),Er=0;Er<xr;Er++)vr[Er]=54^pr[Er],_r[Er]=92^pr[Er];var Tr=lr.allocUnsafe(xr+mr+4);vr.copy(Tr,0,0,xr),this.ipad1=Tr,this.ipad2=vr,this.opad=_r,this.alg=br,this.blocksize=xr,this.hash=yr,this.size=fr[br]}gr.prototype.run=function(br,pr){return br.copy(pr,this.blocksize),this.hash(pr).copy(this.opad,this.blocksize),this.hash(this.opad)},nr.exports=function(br,pr,mr,yr,xr){or(mr,yr);var vr=new gr(xr=xr||"sha1",br=hr(br,ur,"Password"),(pr=hr(pr,ur,"Salt")).length),_r=lr.allocUnsafe(yr),Er=lr.allocUnsafe(pr.length+4);pr.copy(Er,0,0,pr.length);for(var Tr=0,Rr=fr[xr],Nr=Math.ceil(yr/Rr),Dr=1;Dr<=Nr;Dr++){Er.writeUInt32BE(Dr,pr.length);for(var Ir=vr.run(Er,vr.ipad1),Or=Ir,jr=1;jr<mr;jr++){Or=vr.run(Or,vr.ipad2);for(var Lr=0;Lr<Rr;Lr++)Ir[Lr]^=Or[Lr]}Ir.copy(_r,Tr),Tr+=Rr}return _r}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer;nr.exports=function(ar,cr,lr){if(sr.isBuffer(ar))return ar;if(typeof ar=="string")return sr.from(ar,cr);if(ArrayBuffer.isView(ar))return sr.from(ar.buffer);throw new TypeError(lr+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(rr,nr,ir){(function(sr){(function(){sr===void 0||!sr.version||sr.version.indexOf("v0.")===0||sr.version.indexOf("v1.")===0&&sr.version.indexOf("v1.8.")!==0?nr.exports={nextTick:function(ar,cr,lr,or){if(typeof ar!="function")throw new TypeError('"callback" argument must be a function');var ur,hr,dr=arguments.length;switch(dr){case 0:case 1:return sr.nextTick(ar);case 2:return sr.nextTick(function(){ar.call(null,cr)});case 3:return sr.nextTick(function(){ar.call(null,cr,lr)});case 4:return sr.nextTick(function(){ar.call(null,cr,lr,or)});default:for(ur=new Array(dr-1),hr=0;hr<ur.length;)ur[hr++]=arguments[hr];return sr.nextTick(function(){ar.apply(null,ur)})}}}:nr.exports=sr}).call(this)}).call(this,rr("_process"))},{_process:467}],467:[function(rr,nr,ir){var sr,ar,cr=nr.exports={};function lr(){throw new Error("setTimeout has not been defined")}function or(){throw new Error("clearTimeout has not been defined")}function ur(xr){if(sr===setTimeout)return setTimeout(xr,0);if((sr===lr||!sr)&&setTimeout)return sr=setTimeout,setTimeout(xr,0);try{return sr(xr,0)}catch{try{return sr.call(null,xr,0)}catch{return sr.call(this,xr,0)}}}(function(){try{sr=typeof setTimeout=="function"?setTimeout:lr}catch{sr=lr}try{ar=typeof clearTimeout=="function"?clearTimeout:or}catch{ar=or}})();var hr,dr=[],fr=!1,gr=-1;function br(){fr&&hr&&(fr=!1,hr.length?dr=hr.concat(dr):gr=-1,dr.length&&pr())}function pr(){if(!fr){var xr=ur(br);fr=!0;for(var vr=dr.length;vr;){for(hr=dr,dr=[];++gr<vr;)hr&&hr[gr].run();gr=-1,vr=dr.length}hr=null,fr=!1,function(_r){if(ar===clearTimeout)return clearTimeout(_r);if((ar===or||!ar)&&clearTimeout)return ar=clearTimeout,clearTimeout(_r);try{ar(_r)}catch{try{return ar.call(null,_r)}catch{return ar.call(this,_r)}}}(xr)}}function mr(xr,vr){this.fun=xr,this.array=vr}function yr(){}cr.nextTick=function(xr){var vr=new Array(arguments.length-1);if(arguments.length>1)for(var _r=1;_r<arguments.length;_r++)vr[_r-1]=arguments[_r];dr.push(new mr(xr,vr)),dr.length!==1||fr||ur(pr)},mr.prototype.run=function(){this.fun.apply(null,this.array)},cr.title="browser",cr.browser=!0,cr.env={},cr.argv=[],cr.version="",cr.versions={},cr.on=yr,cr.addListener=yr,cr.once=yr,cr.off=yr,cr.removeListener=yr,cr.removeAllListeners=yr,cr.emit=yr,cr.prependListener=yr,cr.prependOnceListener=yr,cr.listeners=function(xr){return[]},cr.binding=function(xr){throw new Error("process.binding is not supported")},cr.cwd=function(){return"/"},cr.chdir=function(xr){throw new Error("process.chdir is not supported")},cr.umask=function(){return 0}},{}],468:[function(rr,nr,ir){ir.publicEncrypt=rr("./publicEncrypt"),ir.privateDecrypt=rr("./privateDecrypt"),ir.privateEncrypt=function(sr,ar){return ir.publicEncrypt(sr,ar,!0)},ir.publicDecrypt=function(sr,ar){return ir.privateDecrypt(sr,ar,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(rr,nr,ir){var sr=rr("create-hash"),ar=rr("safe-buffer").Buffer;function cr(lr){var or=ar.allocUnsafe(4);return or.writeUInt32BE(lr,0),or}nr.exports=function(lr,or){for(var ur,hr=ar.alloc(0),dr=0;hr.length<or;)ur=cr(dr++),hr=ar.concat([hr,sr("sha1").update(lr).update(ur).digest()]);return hr.slice(0,or)}},{"create-hash":386,"safe-buffer":494}],470:[function(rr,nr,ir){arguments[4][184][0].apply(ir,arguments)},{buffer:188,dup:184}],471:[function(rr,nr,ir){var sr=rr("parse-asn1"),ar=rr("./mgf"),cr=rr("./xor"),lr=rr("bn.js"),or=rr("browserify-rsa"),ur=rr("create-hash"),hr=rr("./withPublic"),dr=rr("safe-buffer").Buffer;nr.exports=function(fr,gr,br){var pr;pr=fr.padding?fr.padding:br?1:4;var mr,yr=sr(fr),xr=yr.modulus.byteLength();if(gr.length>xr||new lr(gr).cmp(yr.modulus)>=0)throw new Error("decryption error");mr=br?hr(new lr(gr),yr):or(gr,yr);var vr=dr.alloc(xr-mr.length);if(mr=dr.concat([vr,mr],xr),pr===4)return function(_r,Er){var Tr=_r.modulus.byteLength(),Rr=ur("sha1").update(dr.alloc(0)).digest(),Nr=Rr.length;if(Er[0]!==0)throw new Error("decryption error");var Dr=Er.slice(1,Nr+1),Ir=Er.slice(Nr+1),Or=cr(Dr,ar(Ir,Nr)),jr=cr(Ir,ar(Or,Tr-Nr-1));if(function(Cr,wr){Cr=dr.from(Cr),wr=dr.from(wr);var Pr=0,Ar=Cr.length;Cr.length!==wr.length&&(Pr++,Ar=Math.min(Cr.length,wr.length));for(var Sr=-1;++Sr<Ar;)Pr+=Cr[Sr]^wr[Sr];return Pr}(Rr,jr.slice(0,Nr)))throw new Error("decryption error");for(var Lr=Nr;jr[Lr]===0;)Lr++;if(jr[Lr++]!==1)throw new Error("decryption error");return jr.slice(Lr)}(yr,mr);if(pr===1)return function(_r,Er,Tr){for(var Rr=Er.slice(0,2),Nr=2,Dr=0;Er[Nr++]!==0;)if(Nr>=Er.length){Dr++;break}var Ir=Er.slice(2,Nr-1);if((Rr.toString("hex")!=="0002"&&!Tr||Rr.toString("hex")!=="0001"&&Tr)&&Dr++,Ir.length<8&&Dr++,Dr)throw new Error("decryption error");return Er.slice(Nr)}(0,mr,br);if(pr===3)return mr;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(rr,nr,ir){var sr=rr("parse-asn1"),ar=rr("randombytes"),cr=rr("create-hash"),lr=rr("./mgf"),or=rr("./xor"),ur=rr("bn.js"),hr=rr("./withPublic"),dr=rr("browserify-rsa"),fr=rr("safe-buffer").Buffer;nr.exports=function(gr,br,pr){var mr;mr=gr.padding?gr.padding:pr?1:4;var yr,xr=sr(gr);if(mr===4)yr=function(vr,_r){var Er=vr.modulus.byteLength(),Tr=_r.length,Rr=cr("sha1").update(fr.alloc(0)).digest(),Nr=Rr.length,Dr=2*Nr;if(Tr>Er-Dr-2)throw new Error("message too long");var Ir=fr.alloc(Er-Tr-Dr-2),Or=Er-Nr-1,jr=ar(Nr),Lr=or(fr.concat([Rr,Ir,fr.alloc(1,1),_r],Or),lr(jr,Or)),Cr=or(jr,lr(Lr,Nr));return new ur(fr.concat([fr.alloc(1),Cr,Lr],Er))}(xr,br);else if(mr===1)yr=function(vr,_r,Er){var Tr,Rr=_r.length,Nr=vr.modulus.byteLength();if(Rr>Nr-11)throw new Error("message too long");return Tr=Er?fr.alloc(Nr-Rr-3,255):function(Dr){for(var Ir,Or=fr.allocUnsafe(Dr),jr=0,Lr=ar(2*Dr),Cr=0;jr<Dr;)Cr===Lr.length&&(Lr=ar(2*Dr),Cr=0),(Ir=Lr[Cr++])&&(Or[jr++]=Ir);return Or}(Nr-Rr-3),new ur(fr.concat([fr.from([0,Er?1:2]),Tr,fr.alloc(1),_r],Nr))}(xr,br,pr);else{if(mr!==3)throw new Error("unknown padding");if((yr=new ur(br)).cmp(xr.modulus)>=0)throw new Error("data too long for modulus")}return pr?dr(yr,xr):hr(yr,xr)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(rr,nr,ir){var sr=rr("bn.js"),ar=rr("safe-buffer").Buffer;nr.exports=function(cr,lr){return ar.from(cr.toRed(sr.mont(lr.modulus)).redPow(new sr(lr.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(rr,nr,ir){nr.exports=function(sr,ar){for(var cr=sr.length,lr=-1;++lr<cr;)sr[lr]^=ar[lr];return sr}},{}],475:[function(rr,nr,ir){(function(sr,ar){(function(){var cr=rr("safe-buffer").Buffer,lr=ar.crypto||ar.msCrypto;lr&&lr.getRandomValues?nr.exports=function(or,ur){if(or>4294967295)throw new RangeError("requested too many random bytes");var hr=cr.allocUnsafe(or);if(or>0)if(or>65536)for(var dr=0;dr<or;dr+=65536)lr.getRandomValues(hr.slice(dr,dr+65536));else lr.getRandomValues(hr);return typeof ur=="function"?sr.nextTick(function(){ur(null,hr)}):hr}:nr.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(rr,nr,ir){(function(sr,ar){(function(){function cr(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var lr=rr("safe-buffer"),or=rr("randombytes"),ur=lr.Buffer,hr=lr.kMaxLength,dr=ar.crypto||ar.msCrypto,fr=Math.pow(2,32)-1;function gr(mr,yr){if(typeof mr!="number"||mr!=mr)throw new TypeError("offset must be a number");if(mr>fr||mr<0)throw new TypeError("offset must be a uint32");if(mr>hr||mr>yr)throw new RangeError("offset out of range")}function br(mr,yr,xr){if(typeof mr!="number"||mr!=mr)throw new TypeError("size must be a number");if(mr>fr||mr<0)throw new TypeError("size must be a uint32");if(mr+yr>xr||mr>hr)throw new RangeError("buffer too small")}function pr(mr,yr,xr,vr){if(sr.browser){var _r=mr.buffer,Er=new Uint8Array(_r,yr,xr);return dr.getRandomValues(Er),vr?void sr.nextTick(function(){vr(null,mr)}):mr}if(!vr)return or(xr).copy(mr,yr),mr;or(xr,function(Tr,Rr){if(Tr)return vr(Tr);Rr.copy(mr,yr),vr(null,mr)})}dr&&dr.getRandomValues||!sr.browser?(ir.randomFill=function(mr,yr,xr,vr){if(!(ur.isBuffer(mr)||mr instanceof ar.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof yr=="function")vr=yr,yr=0,xr=mr.length;else if(typeof xr=="function")vr=xr,xr=mr.length-yr;else if(typeof vr!="function")throw new TypeError('"cb" argument must be a function');return gr(yr,mr.length),br(xr,yr,mr.length),pr(mr,yr,xr,vr)},ir.randomFillSync=function(mr,yr,xr){if(yr===void 0&&(yr=0),!(ur.isBuffer(mr)||mr instanceof ar.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return gr(yr,mr.length),xr===void 0&&(xr=mr.length-yr),br(xr,yr,mr.length),pr(mr,yr,xr)}):(ir.randomFill=cr,ir.randomFillSync=cr)}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(rr,nr,ir){var sr={};function ar(lr,or,ur){ur||(ur=Error);var hr=function(dr){var fr,gr;function br(pr,mr,yr){return dr.call(this,function(xr,vr,_r){return typeof or=="string"?or:or(xr,vr,_r)}(pr,mr,yr))||this}return gr=dr,(fr=br).prototype=Object.create(gr.prototype),fr.prototype.constructor=fr,fr.__proto__=gr,br}(ur);hr.prototype.name=ur.name,hr.prototype.code=lr,sr[lr]=hr}function cr(lr,or){if(Array.isArray(lr)){var ur=lr.length;return lr=lr.map(function(hr){return String(hr)}),ur>2?"one of ".concat(or," ").concat(lr.slice(0,ur-1).join(", "),", or ")+lr[ur-1]:ur===2?"one of ".concat(or," ").concat(lr[0]," or ").concat(lr[1]):"of ".concat(or," ").concat(lr[0])}return"of ".concat(or," ").concat(String(lr))}ar("ERR_INVALID_OPT_VALUE",function(lr,or){return'The value "'+or+'" is invalid for option "'+lr+'"'},TypeError),ar("ERR_INVALID_ARG_TYPE",function(lr,or,ur){var hr,dr,fr;if(typeof or=="string"&&(dr="not ",or.substr(0,dr.length)===dr)?(hr="must not be",or=or.replace(/^not /,"")):hr="must be",function(br,pr,mr){return(mr===void 0||mr>br.length)&&(mr=br.length),br.substring(mr-pr.length,mr)===pr}(lr," argument"))fr="The ".concat(lr," ").concat(hr," ").concat(cr(or,"type"));else{var gr=function(br,pr,mr){return typeof mr!="number"&&(mr=0),!(mr+pr.length>br.length)&&br.indexOf(pr,mr)!==-1}(lr,".")?"property":"argument";fr='The "'.concat(lr,'" ').concat(gr," ").concat(hr," ").concat(cr(or,"type"))}return fr+=". Received type ".concat(typeof ur)},TypeError),ar("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),ar("ERR_METHOD_NOT_IMPLEMENTED",function(lr){return"The "+lr+" method is not implemented"}),ar("ERR_STREAM_PREMATURE_CLOSE","Premature close"),ar("ERR_STREAM_DESTROYED",function(lr){return"Cannot call "+lr+" after a stream was destroyed"}),ar("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),ar("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),ar("ERR_STREAM_WRITE_AFTER_END","write after end"),ar("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),ar("ERR_UNKNOWN_ENCODING",function(lr){return"Unknown encoding: "+lr},TypeError),ar("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),nr.exports.codes=sr},{}],478:[function(rr,nr,ir){(function(sr){(function(){var ar=Object.keys||function(br){var pr=[];for(var mr in br)pr.push(mr);return pr};nr.exports=dr;var cr=rr("./_stream_readable"),lr=rr("./_stream_writable");rr("inherits")(dr,cr);for(var or=ar(lr.prototype),ur=0;ur<or.length;ur++){var hr=or[ur];dr.prototype[hr]||(dr.prototype[hr]=lr.prototype[hr])}function dr(br){if(!(this instanceof dr))return new dr(br);cr.call(this,br),lr.call(this,br),this.allowHalfOpen=!0,br&&(br.readable===!1&&(this.readable=!1),br.writable===!1&&(this.writable=!1),br.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",fr)))}function fr(){this._writableState.ended||sr.nextTick(gr,this)}function gr(br){br.end()}Object.defineProperty(dr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(dr.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(dr.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(dr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(br){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=br,this._writableState.destroyed=br)}})}).call(this)}).call(this,rr("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(rr,nr,ir){nr.exports=ar;var sr=rr("./_stream_transform");function ar(cr){if(!(this instanceof ar))return new ar(cr);sr.call(this,cr)}rr("inherits")(ar,sr),ar.prototype._transform=function(cr,lr,or){or(null,cr)}},{"./_stream_transform":481,inherits:440}],480:[function(rr,nr,ir){(function(sr,ar){(function(){var cr;nr.exports=Or,Or.ReadableState=Ir,rr("events").EventEmitter;var lr=function(Ur,Fr){return Ur.listeners(Fr).length},or=rr("./internal/streams/stream"),ur=rr("buffer").Buffer,hr=(ar!==void 0?ar:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},dr,fr=rr("util");dr=fr&&fr.debuglog?fr.debuglog("stream"):function(){};var gr,br,pr,mr=rr("./internal/streams/buffer_list"),yr=rr("./internal/streams/destroy"),xr=rr("./internal/streams/state").getHighWaterMark,vr=rr("../errors").codes,_r=vr.ERR_INVALID_ARG_TYPE,Er=vr.ERR_STREAM_PUSH_AFTER_EOF,Tr=vr.ERR_METHOD_NOT_IMPLEMENTED,Rr=vr.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;rr("inherits")(Or,or);var Nr=yr.errorOrDestroy,Dr=["error","close","destroy","pause","resume"];function Ir(Ur,Fr,Kr){cr=cr||rr("./_stream_duplex"),Ur=Ur||{},typeof Kr!="boolean"&&(Kr=Fr instanceof cr),this.objectMode=!!Ur.objectMode,Kr&&(this.objectMode=this.objectMode||!!Ur.readableObjectMode),this.highWaterMark=xr(this,Ur,"readableHighWaterMark",Kr),this.buffer=new mr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ur.emitClose!==!1,this.autoDestroy=!!Ur.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ur.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ur.encoding&&(gr||(gr=rr("string_decoder/").StringDecoder),this.decoder=new gr(Ur.encoding),this.encoding=Ur.encoding)}function Or(Ur){if(cr=cr||rr("./_stream_duplex"),!(this instanceof Or))return new Or(Ur);var Fr=this instanceof cr;this._readableState=new Ir(Ur,this,Fr),this.readable=!0,Ur&&(typeof Ur.read=="function"&&(this._read=Ur.read),typeof Ur.destroy=="function"&&(this._destroy=Ur.destroy)),or.call(this)}function jr(Ur,Fr,Kr,Zr,Jr){dr("readableAddChunk",Fr);var tn,an=Ur._readableState;if(Fr===null)an.reading=!1,function(dn,en){if(dr("onEofChunk"),!en.ended){if(en.decoder){var rn=en.decoder.end();rn&&rn.length&&(en.buffer.push(rn),en.length+=en.objectMode?1:rn.length)}en.ended=!0,en.sync?wr(dn):(en.needReadable=!1,en.emittedReadable||(en.emittedReadable=!0,Pr(dn)))}}(Ur,an);else if(Jr||(tn=function(dn,en){var rn;sn=en,ur.isBuffer(sn)||sn instanceof hr||typeof en=="string"||en===void 0||dn.objectMode||(rn=new _r("chunk",["string","Buffer","Uint8Array"],en));var sn;return rn}(an,Fr)),tn)Nr(Ur,tn);else if(an.objectMode||Fr&&Fr.length>0)if(typeof Fr=="string"||an.objectMode||Object.getPrototypeOf(Fr)===ur.prototype||(Fr=function(dn){return ur.from(dn)}(Fr)),Zr)an.endEmitted?Nr(Ur,new Rr):Lr(Ur,an,Fr,!0);else if(an.ended)Nr(Ur,new Er);else{if(an.destroyed)return!1;an.reading=!1,an.decoder&&!Kr?(Fr=an.decoder.write(Fr),an.objectMode||Fr.length!==0?Lr(Ur,an,Fr,!1):Ar(Ur,an)):Lr(Ur,an,Fr,!1)}else Zr||(an.reading=!1,Ar(Ur,an));return!an.ended&&(an.length<an.highWaterMark||an.length===0)}function Lr(Ur,Fr,Kr,Zr){Fr.flowing&&Fr.length===0&&!Fr.sync?(Fr.awaitDrain=0,Ur.emit("data",Kr)):(Fr.length+=Fr.objectMode?1:Kr.length,Zr?Fr.buffer.unshift(Kr):Fr.buffer.push(Kr),Fr.needReadable&&wr(Ur)),Ar(Ur,Fr)}Object.defineProperty(Or.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ur){this._readableState&&(this._readableState.destroyed=Ur)}}),Or.prototype.destroy=yr.destroy,Or.prototype._undestroy=yr.undestroy,Or.prototype._destroy=function(Ur,Fr){Fr(Ur)},Or.prototype.push=function(Ur,Fr){var Kr,Zr=this._readableState;return Zr.objectMode?Kr=!0:typeof Ur=="string"&&((Fr=Fr||Zr.defaultEncoding)!==Zr.encoding&&(Ur=ur.from(Ur,Fr),Fr=""),Kr=!0),jr(this,Ur,Fr,!1,Kr)},Or.prototype.unshift=function(Ur){return jr(this,Ur,null,!0,!1)},Or.prototype.isPaused=function(){return this._readableState.flowing===!1},Or.prototype.setEncoding=function(Ur){gr||(gr=rr("string_decoder/").StringDecoder);var Fr=new gr(Ur);this._readableState.decoder=Fr,this._readableState.encoding=this._readableState.decoder.encoding;for(var Kr=this._readableState.buffer.head,Zr="";Kr!==null;)Zr+=Fr.write(Kr.data),Kr=Kr.next;return this._readableState.buffer.clear(),Zr!==""&&this._readableState.buffer.push(Zr),this._readableState.length=Zr.length,this};function Cr(Ur,Fr){return Ur<=0||Fr.length===0&&Fr.ended?0:Fr.objectMode?1:Ur!=Ur?Fr.flowing&&Fr.length?Fr.buffer.head.data.length:Fr.length:(Ur>Fr.highWaterMark&&(Fr.highWaterMark=function(Kr){return Kr>=1073741824?Kr=1073741824:(Kr--,Kr|=Kr>>>1,Kr|=Kr>>>2,Kr|=Kr>>>4,Kr|=Kr>>>8,Kr|=Kr>>>16,Kr++),Kr}(Ur)),Ur<=Fr.length?Ur:Fr.ended?Fr.length:(Fr.needReadable=!0,0))}function wr(Ur){var Fr=Ur._readableState;dr("emitReadable",Fr.needReadable,Fr.emittedReadable),Fr.needReadable=!1,Fr.emittedReadable||(dr("emitReadable",Fr.flowing),Fr.emittedReadable=!0,sr.nextTick(Pr,Ur))}function Pr(Ur){var Fr=Ur._readableState;dr("emitReadable_",Fr.destroyed,Fr.length,Fr.ended),Fr.destroyed||!Fr.length&&!Fr.ended||(Ur.emit("readable"),Fr.emittedReadable=!1),Fr.needReadable=!Fr.flowing&&!Fr.ended&&Fr.length<=Fr.highWaterMark,Br(Ur)}function Ar(Ur,Fr){Fr.readingMore||(Fr.readingMore=!0,sr.nextTick(Sr,Ur,Fr))}function Sr(Ur,Fr){for(;!Fr.reading&&!Fr.ended&&(Fr.length<Fr.highWaterMark||Fr.flowing&&Fr.length===0);){var Kr=Fr.length;if(dr("maybeReadMore read 0"),Ur.read(0),Kr===Fr.length)break}Fr.readingMore=!1}function Mr(Ur){var Fr=Ur._readableState;Fr.readableListening=Ur.listenerCount("readable")>0,Fr.resumeScheduled&&!Fr.paused?Fr.flowing=!0:Ur.listenerCount("data")>0&&Ur.resume()}function qr(Ur){dr("readable nexttick read 0"),Ur.read(0)}function $r(Ur,Fr){dr("resume",Fr.reading),Fr.reading||Ur.read(0),Fr.resumeScheduled=!1,Ur.emit("resume"),Br(Ur),Fr.flowing&&!Fr.reading&&Ur.read(0)}function Br(Ur){var Fr=Ur._readableState;for(dr("flow",Fr.flowing);Fr.flowing&&Ur.read()!==null;);}function zr(Ur,Fr){return Fr.length===0?null:(Fr.objectMode?Kr=Fr.buffer.shift():!Ur||Ur>=Fr.length?(Kr=Fr.decoder?Fr.buffer.join(""):Fr.buffer.length===1?Fr.buffer.first():Fr.buffer.concat(Fr.length),Fr.buffer.clear()):Kr=Fr.buffer.consume(Ur,Fr.decoder),Kr);var Kr}function Gr(Ur){var Fr=Ur._readableState;dr("endReadable",Fr.endEmitted),Fr.endEmitted||(Fr.ended=!0,sr.nextTick(Vr,Fr,Ur))}function Vr(Ur,Fr){if(dr("endReadableNT",Ur.endEmitted,Ur.length),!Ur.endEmitted&&Ur.length===0&&(Ur.endEmitted=!0,Fr.readable=!1,Fr.emit("end"),Ur.autoDestroy)){var Kr=Fr._writableState;(!Kr||Kr.autoDestroy&&Kr.finished)&&Fr.destroy()}}function Xr(Ur,Fr){for(var Kr=0,Zr=Ur.length;Kr<Zr;Kr++)if(Ur[Kr]===Fr)return Kr;return-1}Or.prototype.read=function(Ur){dr("read",Ur),Ur=parseInt(Ur,10);var Fr=this._readableState,Kr=Ur;if(Ur!==0&&(Fr.emittedReadable=!1),Ur===0&&Fr.needReadable&&((Fr.highWaterMark!==0?Fr.length>=Fr.highWaterMark:Fr.length>0)||Fr.ended))return dr("read: emitReadable",Fr.length,Fr.ended),Fr.length===0&&Fr.ended?Gr(this):wr(this),null;if((Ur=Cr(Ur,Fr))===0&&Fr.ended)return Fr.length===0&&Gr(this),null;var Zr,Jr=Fr.needReadable;return dr("need readable",Jr),(Fr.length===0||Fr.length-Ur<Fr.highWaterMark)&&dr("length less than watermark",Jr=!0),Fr.ended||Fr.reading?dr("reading or ended",Jr=!1):Jr&&(dr("do read"),Fr.reading=!0,Fr.sync=!0,Fr.length===0&&(Fr.needReadable=!0),this._read(Fr.highWaterMark),Fr.sync=!1,Fr.reading||(Ur=Cr(Kr,Fr))),(Zr=Ur>0?zr(Ur,Fr):null)===null?(Fr.needReadable=Fr.length<=Fr.highWaterMark,Ur=0):(Fr.length-=Ur,Fr.awaitDrain=0),Fr.length===0&&(Fr.ended||(Fr.needReadable=!0),Kr!==Ur&&Fr.ended&&Gr(this)),Zr!==null&&this.emit("data",Zr),Zr},Or.prototype._read=function(Ur){Nr(this,new Tr("_read()"))},Or.prototype.pipe=function(Ur,Fr){var Kr=this,Zr=this._readableState;switch(Zr.pipesCount){case 0:Zr.pipes=Ur;break;case 1:Zr.pipes=[Zr.pipes,Ur];break;default:Zr.pipes.push(Ur)}Zr.pipesCount+=1,dr("pipe count=%d opts=%j",Zr.pipesCount,Fr);var Jr=(!Fr||Fr.end!==!1)&&Ur!==sr.stdout&&Ur!==sr.stderr?an:pn;function tn(gn,Pn){dr("onunpipe"),gn===Kr&&Pn&&Pn.hasUnpiped===!1&&(Pn.hasUnpiped=!0,dr("cleanup"),Ur.removeListener("close",on),Ur.removeListener("finish",fn),Ur.removeListener("drain",dn),Ur.removeListener("error",sn),Ur.removeListener("unpipe",tn),Kr.removeListener("end",an),Kr.removeListener("end",pn),Kr.removeListener("data",rn),en=!0,!Zr.awaitDrain||Ur._writableState&&!Ur._writableState.needDrain||dn())}function an(){dr("onend"),Ur.end()}Zr.endEmitted?sr.nextTick(Jr):Kr.once("end",Jr),Ur.on("unpipe",tn);var dn=function(gn){return function(){var Pn=gn._readableState;dr("pipeOnDrain",Pn.awaitDrain),Pn.awaitDrain&&Pn.awaitDrain--,Pn.awaitDrain===0&&lr(gn,"data")&&(Pn.flowing=!0,Br(gn))}}(Kr);Ur.on("drain",dn);var en=!1;function rn(gn){dr("ondata");var Pn=Ur.write(gn);dr("dest.write",Pn),Pn===!1&&((Zr.pipesCount===1&&Zr.pipes===Ur||Zr.pipesCount>1&&Xr(Zr.pipes,Ur)!==-1)&&!en&&(dr("false write response, pause",Zr.awaitDrain),Zr.awaitDrain++),Kr.pause())}function sn(gn){dr("onerror",gn),pn(),Ur.removeListener("error",sn),lr(Ur,"error")===0&&Nr(Ur,gn)}function on(){Ur.removeListener("finish",fn),pn()}function fn(){dr("onfinish"),Ur.removeListener("close",on),pn()}function pn(){dr("unpipe"),Kr.unpipe(Ur)}return Kr.on("data",rn),function(gn,Pn,In){if(typeof gn.prependListener=="function")return gn.prependListener(Pn,In);gn._events&&gn._events[Pn]?Array.isArray(gn._events[Pn])?gn._events[Pn].unshift(In):gn._events[Pn]=[In,gn._events[Pn]]:gn.on(Pn,In)}(Ur,"error",sn),Ur.once("close",on),Ur.once("finish",fn),Ur.emit("pipe",Kr),Zr.flowing||(dr("pipe resume"),Kr.resume()),Ur},Or.prototype.unpipe=function(Ur){var Fr=this._readableState,Kr={hasUnpiped:!1};if(Fr.pipesCount===0)return this;if(Fr.pipesCount===1)return Ur&&Ur!==Fr.pipes||(Ur||(Ur=Fr.pipes),Fr.pipes=null,Fr.pipesCount=0,Fr.flowing=!1,Ur&&Ur.emit("unpipe",this,Kr)),this;if(!Ur){var Zr=Fr.pipes,Jr=Fr.pipesCount;Fr.pipes=null,Fr.pipesCount=0,Fr.flowing=!1;for(var tn=0;tn<Jr;tn++)Zr[tn].emit("unpipe",this,{hasUnpiped:!1});return this}var an=Xr(Fr.pipes,Ur);return an===-1||(Fr.pipes.splice(an,1),Fr.pipesCount-=1,Fr.pipesCount===1&&(Fr.pipes=Fr.pipes[0]),Ur.emit("unpipe",this,Kr)),this},Or.prototype.on=function(Ur,Fr){var Kr=or.prototype.on.call(this,Ur,Fr),Zr=this._readableState;return Ur==="data"?(Zr.readableListening=this.listenerCount("readable")>0,Zr.flowing!==!1&&this.resume()):Ur==="readable"&&(Zr.endEmitted||Zr.readableListening||(Zr.readableListening=Zr.needReadable=!0,Zr.flowing=!1,Zr.emittedReadable=!1,dr("on readable",Zr.length,Zr.reading),Zr.length?wr(this):Zr.reading||sr.nextTick(qr,this))),Kr},Or.prototype.addListener=Or.prototype.on,Or.prototype.removeListener=function(Ur,Fr){var Kr=or.prototype.removeListener.call(this,Ur,Fr);return Ur==="readable"&&sr.nextTick(Mr,this),Kr},Or.prototype.removeAllListeners=function(Ur){var Fr=or.prototype.removeAllListeners.apply(this,arguments);return Ur!=="readable"&&Ur!==void 0||sr.nextTick(Mr,this),Fr},Or.prototype.resume=function(){var Ur=this._readableState;return Ur.flowing||(dr("resume"),Ur.flowing=!Ur.readableListening,function(Fr,Kr){Kr.resumeScheduled||(Kr.resumeScheduled=!0,sr.nextTick($r,Fr,Kr))}(this,Ur)),Ur.paused=!1,this},Or.prototype.pause=function(){return dr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(dr("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Or.prototype.wrap=function(Ur){var Fr=this,Kr=this._readableState,Zr=!1;for(var Jr in Ur.on("end",function(){if(dr("wrapped end"),Kr.decoder&&!Kr.ended){var an=Kr.decoder.end();an&&an.length&&Fr.push(an)}Fr.push(null)}),Ur.on("data",function(an){dr("wrapped data"),Kr.decoder&&(an=Kr.decoder.write(an)),Kr.objectMode&&an==null||(Kr.objectMode||an&&an.length)&&(Fr.push(an)||(Zr=!0,Ur.pause()))}),Ur)this[Jr]===void 0&&typeof Ur[Jr]=="function"&&(this[Jr]=function(an){return function(){return Ur[an].apply(Ur,arguments)}}(Jr));for(var tn=0;tn<Dr.length;tn++)Ur.on(Dr[tn],this.emit.bind(this,Dr[tn]));return this._read=function(an){dr("wrapped _read",an),Zr&&(Zr=!1,Ur.resume())},this},typeof Symbol=="function"&&(Or.prototype[Symbol.asyncIterator]=function(){return br===void 0&&(br=rr("./internal/streams/async_iterator")),br(this)}),Object.defineProperty(Or.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Or.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Or.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ur){this._readableState&&(this._readableState.flowing=Ur)}}),Or._fromList=zr,Object.defineProperty(Or.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(Or.from=function(Ur,Fr){return pr===void 0&&(pr=rr("./internal/streams/from")),pr(Or,Ur,Fr)})}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(rr,nr,ir){nr.exports=dr;var sr=rr("../errors").codes,ar=sr.ERR_METHOD_NOT_IMPLEMENTED,cr=sr.ERR_MULTIPLE_CALLBACK,lr=sr.ERR_TRANSFORM_ALREADY_TRANSFORMING,or=sr.ERR_TRANSFORM_WITH_LENGTH_0,ur=rr("./_stream_duplex");function hr(br,pr){var mr=this._transformState;mr.transforming=!1;var yr=mr.writecb;if(yr===null)return this.emit("error",new cr);mr.writechunk=null,mr.writecb=null,pr!=null&&this.push(pr),yr(br);var xr=this._readableState;xr.reading=!1,(xr.needReadable||xr.length<xr.highWaterMark)&&this._read(xr.highWaterMark)}function dr(br){if(!(this instanceof dr))return new dr(br);ur.call(this,br),this._transformState={afterTransform:hr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,br&&(typeof br.transform=="function"&&(this._transform=br.transform),typeof br.flush=="function"&&(this._flush=br.flush)),this.on("prefinish",fr)}function fr(){var br=this;typeof this._flush!="function"||this._readableState.destroyed?gr(this,null,null):this._flush(function(pr,mr){gr(br,pr,mr)})}function gr(br,pr,mr){if(pr)return br.emit("error",pr);if(mr!=null&&br.push(mr),br._writableState.length)throw new or;if(br._transformState.transforming)throw new lr;return br.push(null)}rr("inherits")(dr,ur),dr.prototype.push=function(br,pr){return this._transformState.needTransform=!1,ur.prototype.push.call(this,br,pr)},dr.prototype._transform=function(br,pr,mr){mr(new ar("_transform()"))},dr.prototype._write=function(br,pr,mr){var yr=this._transformState;if(yr.writecb=mr,yr.writechunk=br,yr.writeencoding=pr,!yr.transforming){var xr=this._readableState;(yr.needTransform||xr.needReadable||xr.length<xr.highWaterMark)&&this._read(xr.highWaterMark)}},dr.prototype._read=function(br){var pr=this._transformState;pr.writechunk===null||pr.transforming?pr.needTransform=!0:(pr.transforming=!0,this._transform(pr.writechunk,pr.writeencoding,pr.afterTransform))},dr.prototype._destroy=function(br,pr){ur.prototype._destroy.call(this,br,function(mr){pr(mr)})}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(rr,nr,ir){(function(sr,ar){(function(){function cr(Sr){var Mr=this;this.next=null,this.entry=null,this.finish=function(){(function(qr,$r,Br){var zr=qr.entry;for(qr.entry=null;zr;){var Gr=zr.callback;$r.pendingcb--,Gr(Br),zr=zr.next}$r.corkedRequestsFree.next=qr})(Mr,Sr)}}var lr;nr.exports=Or,Or.WritableState=Ir;var or={deprecate:rr("util-deprecate")},ur=rr("./internal/streams/stream"),hr=rr("buffer").Buffer,dr=(ar!==void 0?ar:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},fr,gr=rr("./internal/streams/destroy"),br=rr("./internal/streams/state").getHighWaterMark,pr=rr("../errors").codes,mr=pr.ERR_INVALID_ARG_TYPE,yr=pr.ERR_METHOD_NOT_IMPLEMENTED,xr=pr.ERR_MULTIPLE_CALLBACK,vr=pr.ERR_STREAM_CANNOT_PIPE,_r=pr.ERR_STREAM_DESTROYED,Er=pr.ERR_STREAM_NULL_VALUES,Tr=pr.ERR_STREAM_WRITE_AFTER_END,Rr=pr.ERR_UNKNOWN_ENCODING,Nr=gr.errorOrDestroy;function Dr(){}function Ir(Sr,Mr,qr){lr=lr||rr("./_stream_duplex"),Sr=Sr||{},typeof qr!="boolean"&&(qr=Mr instanceof lr),this.objectMode=!!Sr.objectMode,qr&&(this.objectMode=this.objectMode||!!Sr.writableObjectMode),this.highWaterMark=br(this,Sr,"writableHighWaterMark",qr),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $r=Sr.decodeStrings===!1;this.decodeStrings=!$r,this.defaultEncoding=Sr.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Br){(function(zr,Gr){var Vr=zr._writableState,Xr=Vr.sync,Ur=Vr.writecb;if(typeof Ur!="function")throw new xr;if(function(Kr){Kr.writing=!1,Kr.writecb=null,Kr.length-=Kr.writelen,Kr.writelen=0}(Vr),Gr)(function(Kr,Zr,Jr,tn,an){--Zr.pendingcb,Jr?(sr.nextTick(an,tn),sr.nextTick(Ar,Kr,Zr),Kr._writableState.errorEmitted=!0,Nr(Kr,tn)):(an(tn),Kr._writableState.errorEmitted=!0,Nr(Kr,tn),Ar(Kr,Zr))})(zr,Vr,Xr,Gr,Ur);else{var Fr=wr(Vr)||zr.destroyed;Fr||Vr.corked||Vr.bufferProcessing||!Vr.bufferedRequest||Cr(zr,Vr),Xr?sr.nextTick(Lr,zr,Vr,Fr,Ur):Lr(zr,Vr,Fr,Ur)}})(Mr,Br)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Sr.emitClose!==!1,this.autoDestroy=!!Sr.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new cr(this)}function Or(Sr){var Mr=this instanceof(lr=lr||rr("./_stream_duplex"));if(!Mr&&!fr.call(Or,this))return new Or(Sr);this._writableState=new Ir(Sr,this,Mr),this.writable=!0,Sr&&(typeof Sr.write=="function"&&(this._write=Sr.write),typeof Sr.writev=="function"&&(this._writev=Sr.writev),typeof Sr.destroy=="function"&&(this._destroy=Sr.destroy),typeof Sr.final=="function"&&(this._final=Sr.final)),ur.call(this)}function jr(Sr,Mr,qr,$r,Br,zr,Gr){Mr.writelen=$r,Mr.writecb=Gr,Mr.writing=!0,Mr.sync=!0,Mr.destroyed?Mr.onwrite(new _r("write")):qr?Sr._writev(Br,Mr.onwrite):Sr._write(Br,zr,Mr.onwrite),Mr.sync=!1}function Lr(Sr,Mr,qr,$r){qr||function(Br,zr){zr.length===0&&zr.needDrain&&(zr.needDrain=!1,Br.emit("drain"))}(Sr,Mr),Mr.pendingcb--,$r(),Ar(Sr,Mr)}function Cr(Sr,Mr){Mr.bufferProcessing=!0;var qr=Mr.bufferedRequest;if(Sr._writev&&qr&&qr.next){var $r=Mr.bufferedRequestCount,Br=new Array($r),zr=Mr.corkedRequestsFree;zr.entry=qr;for(var Gr=0,Vr=!0;qr;)Br[Gr]=qr,qr.isBuf||(Vr=!1),qr=qr.next,Gr+=1;Br.allBuffers=Vr,jr(Sr,Mr,!0,Mr.length,Br,"",zr.finish),Mr.pendingcb++,Mr.lastBufferedRequest=null,zr.next?(Mr.corkedRequestsFree=zr.next,zr.next=null):Mr.corkedRequestsFree=new cr(Mr),Mr.bufferedRequestCount=0}else{for(;qr;){var Xr=qr.chunk,Ur=qr.encoding,Fr=qr.callback;if(jr(Sr,Mr,!1,Mr.objectMode?1:Xr.length,Xr,Ur,Fr),qr=qr.next,Mr.bufferedRequestCount--,Mr.writing)break}qr===null&&(Mr.lastBufferedRequest=null)}Mr.bufferedRequest=qr,Mr.bufferProcessing=!1}function wr(Sr){return Sr.ending&&Sr.length===0&&Sr.bufferedRequest===null&&!Sr.finished&&!Sr.writing}function Pr(Sr,Mr){Sr._final(function(qr){Mr.pendingcb--,qr&&Nr(Sr,qr),Mr.prefinished=!0,Sr.emit("prefinish"),Ar(Sr,Mr)})}function Ar(Sr,Mr){var qr=wr(Mr);if(qr&&(function(Br,zr){zr.prefinished||zr.finalCalled||(typeof Br._final!="function"||zr.destroyed?(zr.prefinished=!0,Br.emit("prefinish")):(zr.pendingcb++,zr.finalCalled=!0,sr.nextTick(Pr,Br,zr)))}(Sr,Mr),Mr.pendingcb===0&&(Mr.finished=!0,Sr.emit("finish"),Mr.autoDestroy))){var $r=Sr._readableState;(!$r||$r.autoDestroy&&$r.endEmitted)&&Sr.destroy()}return qr}rr("inherits")(Or,ur),Ir.prototype.getBuffer=function(){for(var Sr=this.bufferedRequest,Mr=[];Sr;)Mr.push(Sr),Sr=Sr.next;return Mr},function(){try{Object.defineProperty(Ir.prototype,"buffer",{get:or.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(fr=Function.prototype[Symbol.hasInstance],Object.defineProperty(Or,Symbol.hasInstance,{value:function(Sr){return!!fr.call(this,Sr)||this===Or&&Sr&&Sr._writableState instanceof Ir}})):fr=function(Sr){return Sr instanceof this},Or.prototype.pipe=function(){Nr(this,new vr)},Or.prototype.write=function(Sr,Mr,qr){var $r,Br=this._writableState,zr=!1,Gr=!Br.objectMode&&($r=Sr,hr.isBuffer($r)||$r instanceof dr);return Gr&&!hr.isBuffer(Sr)&&(Sr=function(Vr){return hr.from(Vr)}(Sr)),typeof Mr=="function"&&(qr=Mr,Mr=null),Gr?Mr="buffer":Mr||(Mr=Br.defaultEncoding),typeof qr!="function"&&(qr=Dr),Br.ending?function(Vr,Xr){var Ur=new Tr;Nr(Vr,Ur),sr.nextTick(Xr,Ur)}(this,qr):(Gr||function(Vr,Xr,Ur,Fr){var Kr;return Ur===null?Kr=new Er:typeof Ur=="string"||Xr.objectMode||(Kr=new mr("chunk",["string","Buffer"],Ur)),!Kr||(Nr(Vr,Kr),sr.nextTick(Fr,Kr),!1)}(this,Br,Sr,qr))&&(Br.pendingcb++,zr=function(Vr,Xr,Ur,Fr,Kr,Zr){if(!Ur){var Jr=function(en,rn,sn){return en.objectMode||en.decodeStrings===!1||typeof rn!="string"||(rn=hr.from(rn,sn)),rn}(Xr,Fr,Kr);Fr!==Jr&&(Ur=!0,Kr="buffer",Fr=Jr)}var tn=Xr.objectMode?1:Fr.length;Xr.length+=tn;var an=Xr.length<Xr.highWaterMark;if(an||(Xr.needDrain=!0),Xr.writing||Xr.corked){var dn=Xr.lastBufferedRequest;Xr.lastBufferedRequest={chunk:Fr,encoding:Kr,isBuf:Ur,callback:Zr,next:null},dn?dn.next=Xr.lastBufferedRequest:Xr.bufferedRequest=Xr.lastBufferedRequest,Xr.bufferedRequestCount+=1}else jr(Vr,Xr,!1,tn,Fr,Kr,Zr);return an}(this,Br,Gr,Sr,Mr,qr)),zr},Or.prototype.cork=function(){this._writableState.corked++},Or.prototype.uncork=function(){var Sr=this._writableState;Sr.corked&&(Sr.corked--,Sr.writing||Sr.corked||Sr.bufferProcessing||!Sr.bufferedRequest||Cr(this,Sr))},Or.prototype.setDefaultEncoding=function(Sr){if(typeof Sr=="string"&&(Sr=Sr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Sr+"").toLowerCase())>-1))throw new Rr(Sr);return this._writableState.defaultEncoding=Sr,this},Object.defineProperty(Or.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Or.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Or.prototype._write=function(Sr,Mr,qr){qr(new yr("_write()"))},Or.prototype._writev=null,Or.prototype.end=function(Sr,Mr,qr){var $r=this._writableState;return typeof Sr=="function"?(qr=Sr,Sr=null,Mr=null):typeof Mr=="function"&&(qr=Mr,Mr=null),Sr!=null&&this.write(Sr,Mr),$r.corked&&($r.corked=1,this.uncork()),$r.ending||function(Br,zr,Gr){zr.ending=!0,Ar(Br,zr),Gr&&(zr.finished?sr.nextTick(Gr):Br.once("finish",Gr)),zr.ended=!0,Br.writable=!1}(this,$r,qr),this},Object.defineProperty(Or.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Or.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Sr){this._writableState&&(this._writableState.destroyed=Sr)}}),Or.prototype.destroy=gr.destroy,Or.prototype._undestroy=gr.undestroy,Or.prototype._destroy=function(Sr,Mr){Mr(Sr)}}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(rr,nr,ir){(function(sr){(function(){var ar;function cr(_r,Er,Tr){return(Er=function(Rr){var Nr=function(Dr,Ir){if(typeof Dr!="object"||Dr===null)return Dr;var Or=Dr[Symbol.toPrimitive];if(Or!==void 0){var jr=Or.call(Dr,Ir);if(typeof jr!="object")return jr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ir==="string"?String:Number)(Dr)}(Rr,"string");return typeof Nr=="symbol"?Nr:String(Nr)}(Er))in _r?Object.defineProperty(_r,Er,{value:Tr,enumerable:!0,configurable:!0,writable:!0}):_r[Er]=Tr,_r}var lr=rr("./end-of-stream"),or=Symbol("lastResolve"),ur=Symbol("lastReject"),hr=Symbol("error"),dr=Symbol("ended"),fr=Symbol("lastPromise"),gr=Symbol("handlePromise"),br=Symbol("stream");function pr(_r,Er){return{value:_r,done:Er}}function mr(_r){var Er=_r[or];if(Er!==null){var Tr=_r[br].read();Tr!==null&&(_r[fr]=null,_r[or]=null,_r[ur]=null,Er(pr(Tr,!1)))}}function yr(_r){sr.nextTick(mr,_r)}var xr=Object.getPrototypeOf(function(){}),vr=Object.setPrototypeOf((cr(ar={get stream(){return this[br]},next:function(){var _r=this,Er=this[hr];if(Er!==null)return Promise.reject(Er);if(this[dr])return Promise.resolve(pr(void 0,!0));if(this[br].destroyed)return new Promise(function(Dr,Ir){sr.nextTick(function(){_r[hr]?Ir(_r[hr]):Dr(pr(void 0,!0))})});var Tr,Rr=this[fr];if(Rr)Tr=new Promise(function(Dr,Ir){return function(Or,jr){Dr.then(function(){Ir[dr]?Or(pr(void 0,!0)):Ir[gr](Or,jr)},jr)}}(Rr,this));else{var Nr=this[br].read();if(Nr!==null)return Promise.resolve(pr(Nr,!1));Tr=new Promise(this[gr])}return this[fr]=Tr,Tr}},Symbol.asyncIterator,function(){return this}),cr(ar,"return",function(){var _r=this;return new Promise(function(Er,Tr){_r[br].destroy(null,function(Rr){Rr?Tr(Rr):Er(pr(void 0,!0))})})}),ar),xr);nr.exports=function(_r){var Er,Tr=Object.create(vr,(cr(Er={},br,{value:_r,writable:!0}),cr(Er,or,{value:null,writable:!0}),cr(Er,ur,{value:null,writable:!0}),cr(Er,hr,{value:null,writable:!0}),cr(Er,dr,{value:_r._readableState.endEmitted,writable:!0}),cr(Er,gr,{value:function(Rr,Nr){var Dr=Tr[br].read();Dr?(Tr[fr]=null,Tr[or]=null,Tr[ur]=null,Rr(pr(Dr,!1))):(Tr[or]=Rr,Tr[ur]=Nr)},writable:!0}),Er));return Tr[fr]=null,lr(_r,function(Rr){if(Rr&&Rr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Nr=Tr[ur];return Nr!==null&&(Tr[fr]=null,Tr[or]=null,Tr[ur]=null,Nr(Rr)),void(Tr[hr]=Rr)}var Dr=Tr[or];Dr!==null&&(Tr[fr]=null,Tr[or]=null,Tr[ur]=null,Dr(pr(void 0,!0))),Tr[dr]=!0}),_r.on("readable",yr.bind(null,Tr)),Tr}}).call(this)}).call(this,rr("_process"))},{"./end-of-stream":486,_process:467}],484:[function(rr,nr,ir){function sr(fr,gr){var br=Object.keys(fr);if(Object.getOwnPropertySymbols){var pr=Object.getOwnPropertySymbols(fr);gr&&(pr=pr.filter(function(mr){return Object.getOwnPropertyDescriptor(fr,mr).enumerable})),br.push.apply(br,pr)}return br}function ar(fr){for(var gr=1;gr<arguments.length;gr++){var br=arguments[gr]!=null?arguments[gr]:{};gr%2?sr(Object(br),!0).forEach(function(pr){cr(fr,pr,br[pr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fr,Object.getOwnPropertyDescriptors(br)):sr(Object(br)).forEach(function(pr){Object.defineProperty(fr,pr,Object.getOwnPropertyDescriptor(br,pr))})}return fr}function cr(fr,gr,br){return(gr=or(gr))in fr?Object.defineProperty(fr,gr,{value:br,enumerable:!0,configurable:!0,writable:!0}):fr[gr]=br,fr}function lr(fr,gr){for(var br=0;br<gr.length;br++){var pr=gr[br];pr.enumerable=pr.enumerable||!1,pr.configurable=!0,"value"in pr&&(pr.writable=!0),Object.defineProperty(fr,or(pr.key),pr)}}function or(fr){var gr=function(br,pr){if(typeof br!="object"||br===null)return br;var mr=br[Symbol.toPrimitive];if(mr!==void 0){var yr=mr.call(br,pr);if(typeof yr!="object")return yr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(pr==="string"?String:Number)(br)}(fr,"string");return typeof gr=="symbol"?gr:String(gr)}var ur=rr("buffer").Buffer,hr=rr("util").inspect,dr=hr&&hr.custom||"inspect";nr.exports=function(){function fr(){(function(pr,mr){if(!(pr instanceof mr))throw new TypeError("Cannot call a class as a function")})(this,fr),this.head=null,this.tail=null,this.length=0}var gr,br;return gr=fr,(br=[{key:"push",value:function(pr){var mr={data:pr,next:null};this.length>0?this.tail.next=mr:this.head=mr,this.tail=mr,++this.length}},{key:"unshift",value:function(pr){var mr={data:pr,next:this.head};this.length===0&&(this.tail=mr),this.head=mr,++this.length}},{key:"shift",value:function(){if(this.length!==0){var pr=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,pr}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(pr){if(this.length===0)return"";for(var mr=this.head,yr=""+mr.data;mr=mr.next;)yr+=pr+mr.data;return yr}},{key:"concat",value:function(pr){if(this.length===0)return ur.alloc(0);for(var mr,yr,xr,vr=ur.allocUnsafe(pr>>>0),_r=this.head,Er=0;_r;)mr=_r.data,yr=vr,xr=Er,ur.prototype.copy.call(mr,yr,xr),Er+=_r.data.length,_r=_r.next;return vr}},{key:"consume",value:function(pr,mr){var yr;return pr<this.head.data.length?(yr=this.head.data.slice(0,pr),this.head.data=this.head.data.slice(pr)):yr=pr===this.head.data.length?this.shift():mr?this._getString(pr):this._getBuffer(pr),yr}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(pr){var mr=this.head,yr=1,xr=mr.data;for(pr-=xr.length;mr=mr.next;){var vr=mr.data,_r=pr>vr.length?vr.length:pr;if(_r===vr.length?xr+=vr:xr+=vr.slice(0,pr),(pr-=_r)==0){_r===vr.length?(++yr,mr.next?this.head=mr.next:this.head=this.tail=null):(this.head=mr,mr.data=vr.slice(_r));break}++yr}return this.length-=yr,xr}},{key:"_getBuffer",value:function(pr){var mr=ur.allocUnsafe(pr),yr=this.head,xr=1;for(yr.data.copy(mr),pr-=yr.data.length;yr=yr.next;){var vr=yr.data,_r=pr>vr.length?vr.length:pr;if(vr.copy(mr,mr.length-pr,0,_r),(pr-=_r)==0){_r===vr.length?(++xr,yr.next?this.head=yr.next:this.head=this.tail=null):(this.head=yr,yr.data=vr.slice(_r));break}++xr}return this.length-=xr,mr}},{key:dr,value:function(pr,mr){return hr(this,ar(ar({},mr),{},{depth:0,customInspect:!1}))}}])&&lr(gr.prototype,br),Object.defineProperty(gr,"prototype",{writable:!1}),fr}()},{buffer:220,util:188}],485:[function(rr,nr,ir){(function(sr){(function(){function ar(or,ur){lr(or,ur),cr(or)}function cr(or){or._writableState&&!or._writableState.emitClose||or._readableState&&!or._readableState.emitClose||or.emit("close")}function lr(or,ur){or.emit("error",ur)}nr.exports={destroy:function(or,ur){var hr=this,dr=this._readableState&&this._readableState.destroyed,fr=this._writableState&&this._writableState.destroyed;return dr||fr?(ur?ur(or):or&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,sr.nextTick(lr,this,or)):sr.nextTick(lr,this,or)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(or||null,function(gr){!ur&&gr?hr._writableState?hr._writableState.errorEmitted?sr.nextTick(cr,hr):(hr._writableState.errorEmitted=!0,sr.nextTick(ar,hr,gr)):sr.nextTick(ar,hr,gr):ur?(sr.nextTick(cr,hr),ur(gr)):sr.nextTick(cr,hr)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(or,ur){var hr=or._readableState,dr=or._writableState;hr&&hr.autoDestroy||dr&&dr.autoDestroy?or.destroy(ur):or.emit("error",ur)}}}).call(this)}).call(this,rr("_process"))},{_process:467}],486:[function(rr,nr,ir){var sr=rr("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function ar(){}nr.exports=function cr(lr,or,ur){if(typeof or=="function")return cr(lr,null,or);or||(or={}),ur=function(_r){var Er=!1;return function(){if(!Er){Er=!0;for(var Tr=arguments.length,Rr=new Array(Tr),Nr=0;Nr<Tr;Nr++)Rr[Nr]=arguments[Nr];_r.apply(this,Rr)}}}(ur||ar);var hr=or.readable||or.readable!==!1&&lr.readable,dr=or.writable||or.writable!==!1&&lr.writable,fr=function(){lr.writable||br()},gr=lr._writableState&&lr._writableState.finished,br=function(){dr=!1,gr=!0,hr||ur.call(lr)},pr=lr._readableState&&lr._readableState.endEmitted,mr=function(){hr=!1,pr=!0,dr||ur.call(lr)},yr=function(_r){ur.call(lr,_r)},xr=function(){var _r;return hr&&!pr?(lr._readableState&&lr._readableState.ended||(_r=new sr),ur.call(lr,_r)):dr&&!gr?(lr._writableState&&lr._writableState.ended||(_r=new sr),ur.call(lr,_r)):void 0},vr=function(){lr.req.on("finish",br)};return function(_r){return _r.setHeader&&typeof _r.abort=="function"}(lr)?(lr.on("complete",br),lr.on("abort",xr),lr.req?vr():lr.on("request",vr)):dr&&!lr._writableState&&(lr.on("end",fr),lr.on("close",fr)),lr.on("end",mr),lr.on("finish",br),or.error!==!1&&lr.on("error",yr),lr.on("close",xr),function(){lr.removeListener("complete",br),lr.removeListener("abort",xr),lr.removeListener("request",vr),lr.req&&lr.req.removeListener("finish",br),lr.removeListener("end",fr),lr.removeListener("close",fr),lr.removeListener("finish",br),lr.removeListener("end",mr),lr.removeListener("error",yr),lr.removeListener("close",xr)}}},{"../../../errors":477}],487:[function(rr,nr,ir){nr.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(rr,nr,ir){var sr,ar=rr("../../../errors").codes,cr=ar.ERR_MISSING_ARGS,lr=ar.ERR_STREAM_DESTROYED;function or(gr){if(gr)throw gr}function ur(gr,br,pr,mr){mr=function(vr){var _r=!1;return function(){_r||(_r=!0,vr.apply(void 0,arguments))}}(mr);var yr=!1;gr.on("close",function(){yr=!0}),sr===void 0&&(sr=rr("./end-of-stream")),sr(gr,{readable:br,writable:pr},function(vr){if(vr)return mr(vr);yr=!0,mr()});var xr=!1;return function(vr){if(!yr&&!xr)return xr=!0,function(_r){return _r.setHeader&&typeof _r.abort=="function"}(gr)?gr.abort():typeof gr.destroy=="function"?gr.destroy():void mr(vr||new lr("pipe"))}}function hr(gr){gr()}function dr(gr,br){return gr.pipe(br)}function fr(gr){return gr.length?typeof gr[gr.length-1]!="function"?or:gr.pop():or}nr.exports=function(){for(var gr=arguments.length,br=new Array(gr),pr=0;pr<gr;pr++)br[pr]=arguments[pr];var mr,yr=fr(br);if(Array.isArray(br[0])&&(br=br[0]),br.length<2)throw new cr("streams");var xr=br.map(function(vr,_r){var Er=_r<br.length-1;return ur(vr,Er,_r>0,function(Tr){mr||(mr=Tr),Tr&&xr.forEach(hr),Er||(xr.forEach(hr),yr(mr))})});return br.reduce(dr)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(rr,nr,ir){var sr=rr("../../../errors").codes.ERR_INVALID_OPT_VALUE;nr.exports={getHighWaterMark:function(ar,cr,lr,or){var ur=function(hr,dr,fr){return hr.highWaterMark!=null?hr.highWaterMark:dr?hr[fr]:null}(cr,or,lr);if(ur!=null){if(!isFinite(ur)||Math.floor(ur)!==ur||ur<0)throw new sr(or?lr:"highWaterMark",ur);return Math.floor(ur)}return ar.objectMode?16:16384}}},{"../../../errors":477}],490:[function(rr,nr,ir){nr.exports=rr("events").EventEmitter},{events:422}],491:[function(rr,nr,ir){(ir=nr.exports=rr("./lib/_stream_readable.js")).Stream=ir,ir.Readable=ir,ir.Writable=rr("./lib/_stream_writable.js"),ir.Duplex=rr("./lib/_stream_duplex.js"),ir.Transform=rr("./lib/_stream_transform.js"),ir.PassThrough=rr("./lib/_stream_passthrough.js"),ir.finished=rr("./lib/internal/streams/end-of-stream.js"),ir.pipeline=rr("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(rr,nr,ir){var sr=function(ar){var cr=Object.prototype,lr=cr.hasOwnProperty,or=Object.defineProperty||function(Ar,Sr,Mr){Ar[Sr]=Mr.value},ur=typeof Symbol=="function"?Symbol:{},hr=ur.iterator||"@@iterator",dr=ur.asyncIterator||"@@asyncIterator",fr=ur.toStringTag||"@@toStringTag";function gr(Ar,Sr,Mr){return Object.defineProperty(Ar,Sr,{value:Mr,enumerable:!0,configurable:!0,writable:!0}),Ar[Sr]}try{gr({},"")}catch{gr=function(Sr,Mr,qr){return Sr[Mr]=qr}}function br(Ar,Sr,Mr,qr){var $r=Sr&&Sr.prototype instanceof yr?Sr:yr,Br=Object.create($r.prototype),zr=new Cr(qr||[]);return or(Br,"_invoke",{value:Ir(Ar,Mr,zr)}),Br}function pr(Ar,Sr,Mr){try{return{type:"normal",arg:Ar.call(Sr,Mr)}}catch(qr){return{type:"throw",arg:qr}}}ar.wrap=br;var mr={};function yr(){}function xr(){}function vr(){}var _r={};gr(_r,hr,function(){return this});var Er=Object.getPrototypeOf,Tr=Er&&Er(Er(wr([])));Tr&&Tr!==cr&&lr.call(Tr,hr)&&(_r=Tr);var Rr=vr.prototype=yr.prototype=Object.create(_r);function Nr(Ar){["next","throw","return"].forEach(function(Sr){gr(Ar,Sr,function(Mr){return this._invoke(Sr,Mr)})})}function Dr(Ar,Sr){var Mr;or(this,"_invoke",{value:function(qr,$r){function Br(){return new Sr(function(zr,Gr){(function Vr(Xr,Ur,Fr,Kr){var Zr=pr(Ar[Xr],Ar,Ur);if(Zr.type!=="throw"){var Jr=Zr.arg,tn=Jr.value;return tn&&typeof tn=="object"&&lr.call(tn,"__await")?Sr.resolve(tn.__await).then(function(an){Vr("next",an,Fr,Kr)},function(an){Vr("throw",an,Fr,Kr)}):Sr.resolve(tn).then(function(an){Jr.value=an,Fr(Jr)},function(an){return Vr("throw",an,Fr,Kr)})}Kr(Zr.arg)})(qr,$r,zr,Gr)})}return Mr=Mr?Mr.then(Br,Br):Br()}})}function Ir(Ar,Sr,Mr){var qr="suspendedStart";return function($r,Br){if(qr==="executing")throw new Error("Generator is already running");if(qr==="completed"){if($r==="throw")throw Br;return Pr()}for(Mr.method=$r,Mr.arg=Br;;){var zr=Mr.delegate;if(zr){var Gr=Or(zr,Mr);if(Gr){if(Gr===mr)continue;return Gr}}if(Mr.method==="next")Mr.sent=Mr._sent=Mr.arg;else if(Mr.method==="throw"){if(qr==="suspendedStart")throw qr="completed",Mr.arg;Mr.dispatchException(Mr.arg)}else Mr.method==="return"&&Mr.abrupt("return",Mr.arg);qr="executing";var Vr=pr(Ar,Sr,Mr);if(Vr.type==="normal"){if(qr=Mr.done?"completed":"suspendedYield",Vr.arg===mr)continue;return{value:Vr.arg,done:Mr.done}}Vr.type==="throw"&&(qr="completed",Mr.method="throw",Mr.arg=Vr.arg)}}}function Or(Ar,Sr){var Mr=Sr.method,qr=Ar.iterator[Mr];if(qr===void 0)return Sr.delegate=null,Mr==="throw"&&Ar.iterator.return&&(Sr.method="return",Sr.arg=void 0,Or(Ar,Sr),Sr.method==="throw")||Mr!=="return"&&(Sr.method="throw",Sr.arg=new TypeError("The iterator does not provide a '"+Mr+"' method")),mr;var $r=pr(qr,Ar.iterator,Sr.arg);if($r.type==="throw")return Sr.method="throw",Sr.arg=$r.arg,Sr.delegate=null,mr;var Br=$r.arg;return Br?Br.done?(Sr[Ar.resultName]=Br.value,Sr.next=Ar.nextLoc,Sr.method!=="return"&&(Sr.method="next",Sr.arg=void 0),Sr.delegate=null,mr):Br:(Sr.method="throw",Sr.arg=new TypeError("iterator result is not an object"),Sr.delegate=null,mr)}function jr(Ar){var Sr={tryLoc:Ar[0]};1 in Ar&&(Sr.catchLoc=Ar[1]),2 in Ar&&(Sr.finallyLoc=Ar[2],Sr.afterLoc=Ar[3]),this.tryEntries.push(Sr)}function Lr(Ar){var Sr=Ar.completion||{};Sr.type="normal",delete Sr.arg,Ar.completion=Sr}function Cr(Ar){this.tryEntries=[{tryLoc:"root"}],Ar.forEach(jr,this),this.reset(!0)}function wr(Ar){if(Ar){var Sr=Ar[hr];if(Sr)return Sr.call(Ar);if(typeof Ar.next=="function")return Ar;if(!isNaN(Ar.length)){var Mr=-1,qr=function $r(){for(;++Mr<Ar.length;)if(lr.call(Ar,Mr))return $r.value=Ar[Mr],$r.done=!1,$r;return $r.value=void 0,$r.done=!0,$r};return qr.next=qr}}return{next:Pr}}function Pr(){return{value:void 0,done:!0}}return xr.prototype=vr,or(Rr,"constructor",{value:vr,configurable:!0}),or(vr,"constructor",{value:xr,configurable:!0}),xr.displayName=gr(vr,fr,"GeneratorFunction"),ar.isGeneratorFunction=function(Ar){var Sr=typeof Ar=="function"&&Ar.constructor;return!!Sr&&(Sr===xr||(Sr.displayName||Sr.name)==="GeneratorFunction")},ar.mark=function(Ar){return Object.setPrototypeOf?Object.setPrototypeOf(Ar,vr):(Ar.__proto__=vr,gr(Ar,fr,"GeneratorFunction")),Ar.prototype=Object.create(Rr),Ar},ar.awrap=function(Ar){return{__await:Ar}},Nr(Dr.prototype),gr(Dr.prototype,dr,function(){return this}),ar.AsyncIterator=Dr,ar.async=function(Ar,Sr,Mr,qr,$r){$r===void 0&&($r=Promise);var Br=new Dr(br(Ar,Sr,Mr,qr),$r);return ar.isGeneratorFunction(Sr)?Br:Br.next().then(function(zr){return zr.done?zr.value:Br.next()})},Nr(Rr),gr(Rr,fr,"Generator"),gr(Rr,hr,function(){return this}),gr(Rr,"toString",function(){return"[object Generator]"}),ar.keys=function(Ar){var Sr=Object(Ar),Mr=[];for(var qr in Sr)Mr.push(qr);return Mr.reverse(),function $r(){for(;Mr.length;){var Br=Mr.pop();if(Br in Sr)return $r.value=Br,$r.done=!1,$r}return $r.done=!0,$r}},ar.values=wr,Cr.prototype={constructor:Cr,reset:function(Ar){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Lr),!Ar)for(var Sr in this)Sr.charAt(0)==="t"&&lr.call(this,Sr)&&!isNaN(+Sr.slice(1))&&(this[Sr]=void 0)},stop:function(){this.done=!0;var Ar=this.tryEntries[0].completion;if(Ar.type==="throw")throw Ar.arg;return this.rval},dispatchException:function(Ar){if(this.done)throw Ar;var Sr=this;function Mr(Vr,Xr){return Br.type="throw",Br.arg=Ar,Sr.next=Vr,Xr&&(Sr.method="next",Sr.arg=void 0),!!Xr}for(var qr=this.tryEntries.length-1;qr>=0;--qr){var $r=this.tryEntries[qr],Br=$r.completion;if($r.tryLoc==="root")return Mr("end");if($r.tryLoc<=this.prev){var zr=lr.call($r,"catchLoc"),Gr=lr.call($r,"finallyLoc");if(zr&&Gr){if(this.prev<$r.catchLoc)return Mr($r.catchLoc,!0);if(this.prev<$r.finallyLoc)return Mr($r.finallyLoc)}else if(zr){if(this.prev<$r.catchLoc)return Mr($r.catchLoc,!0)}else{if(!Gr)throw new Error("try statement without catch or finally");if(this.prev<$r.finallyLoc)return Mr($r.finallyLoc)}}}},abrupt:function(Ar,Sr){for(var Mr=this.tryEntries.length-1;Mr>=0;--Mr){var qr=this.tryEntries[Mr];if(qr.tryLoc<=this.prev&&lr.call(qr,"finallyLoc")&&this.prev<qr.finallyLoc){var $r=qr;break}}$r&&(Ar==="break"||Ar==="continue")&&$r.tryLoc<=Sr&&Sr<=$r.finallyLoc&&($r=null);var Br=$r?$r.completion:{};return Br.type=Ar,Br.arg=Sr,$r?(this.method="next",this.next=$r.finallyLoc,mr):this.complete(Br)},complete:function(Ar,Sr){if(Ar.type==="throw")throw Ar.arg;return Ar.type==="break"||Ar.type==="continue"?this.next=Ar.arg:Ar.type==="return"?(this.rval=this.arg=Ar.arg,this.method="return",this.next="end"):Ar.type==="normal"&&Sr&&(this.next=Sr),mr},finish:function(Ar){for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var Mr=this.tryEntries[Sr];if(Mr.finallyLoc===Ar)return this.complete(Mr.completion,Mr.afterLoc),Lr(Mr),mr}},catch:function(Ar){for(var Sr=this.tryEntries.length-1;Sr>=0;--Sr){var Mr=this.tryEntries[Sr];if(Mr.tryLoc===Ar){var qr=Mr.completion;if(qr.type==="throw"){var $r=qr.arg;Lr(Mr)}return $r}}throw new Error("illegal catch attempt")},delegateYield:function(Ar,Sr,Mr){return this.delegate={iterator:wr(Ar),resultName:Sr,nextLoc:Mr},this.method==="next"&&(this.arg=void 0),mr}},ar}(typeof nr=="object"?nr.exports:{});try{regeneratorRuntime=sr}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=sr:Function("r","regeneratorRuntime = r")(sr)}},{}],493:[function(rr,nr,ir){var sr=rr("buffer").Buffer,ar=rr("inherits"),cr=rr("hash-base"),lr=new Array(16),or=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ur=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],hr=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],dr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],fr=[0,1518500249,1859775393,2400959708,2840853838],gr=[1352829926,1548603684,1836072691,2053994217,0];function br(){cr.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function pr(Er,Tr){return Er<<Tr|Er>>>32-Tr}function mr(Er,Tr,Rr,Nr,Dr,Ir,Or,jr){return pr(Er+(Tr^Rr^Nr)+Ir+Or|0,jr)+Dr|0}function yr(Er,Tr,Rr,Nr,Dr,Ir,Or,jr){return pr(Er+(Tr&Rr|~Tr&Nr)+Ir+Or|0,jr)+Dr|0}function xr(Er,Tr,Rr,Nr,Dr,Ir,Or,jr){return pr(Er+((Tr|~Rr)^Nr)+Ir+Or|0,jr)+Dr|0}function vr(Er,Tr,Rr,Nr,Dr,Ir,Or,jr){return pr(Er+(Tr&Nr|Rr&~Nr)+Ir+Or|0,jr)+Dr|0}function _r(Er,Tr,Rr,Nr,Dr,Ir,Or,jr){return pr(Er+(Tr^(Rr|~Nr))+Ir+Or|0,jr)+Dr|0}ar(br,cr),br.prototype._update=function(){for(var Er=lr,Tr=0;Tr<16;++Tr)Er[Tr]=this._block.readInt32LE(4*Tr);for(var Rr=0|this._a,Nr=0|this._b,Dr=0|this._c,Ir=0|this._d,Or=0|this._e,jr=0|this._a,Lr=0|this._b,Cr=0|this._c,wr=0|this._d,Pr=0|this._e,Ar=0;Ar<80;Ar+=1){var Sr,Mr;Ar<16?(Sr=mr(Rr,Nr,Dr,Ir,Or,Er[or[Ar]],fr[0],hr[Ar]),Mr=_r(jr,Lr,Cr,wr,Pr,Er[ur[Ar]],gr[0],dr[Ar])):Ar<32?(Sr=yr(Rr,Nr,Dr,Ir,Or,Er[or[Ar]],fr[1],hr[Ar]),Mr=vr(jr,Lr,Cr,wr,Pr,Er[ur[Ar]],gr[1],dr[Ar])):Ar<48?(Sr=xr(Rr,Nr,Dr,Ir,Or,Er[or[Ar]],fr[2],hr[Ar]),Mr=xr(jr,Lr,Cr,wr,Pr,Er[ur[Ar]],gr[2],dr[Ar])):Ar<64?(Sr=vr(Rr,Nr,Dr,Ir,Or,Er[or[Ar]],fr[3],hr[Ar]),Mr=yr(jr,Lr,Cr,wr,Pr,Er[ur[Ar]],gr[3],dr[Ar])):(Sr=_r(Rr,Nr,Dr,Ir,Or,Er[or[Ar]],fr[4],hr[Ar]),Mr=mr(jr,Lr,Cr,wr,Pr,Er[ur[Ar]],gr[4],dr[Ar])),Rr=Or,Or=Ir,Ir=pr(Dr,10),Dr=Nr,Nr=Sr,jr=Pr,Pr=wr,wr=pr(Cr,10),Cr=Lr,Lr=Mr}var qr=this._b+Dr+wr|0;this._b=this._c+Ir+Pr|0,this._c=this._d+Or+jr|0,this._d=this._e+Rr+Lr|0,this._e=this._a+Nr+Cr|0,this._a=qr},br.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var Er=sr.alloc?sr.alloc(20):new sr(20);return Er.writeInt32LE(this._a,0),Er.writeInt32LE(this._b,4),Er.writeInt32LE(this._c,8),Er.writeInt32LE(this._d,12),Er.writeInt32LE(this._e,16),Er},nr.exports=br},{buffer:220,"hash-base":425,inherits:440}],494:[function(rr,nr,ir){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var sr=rr("buffer"),ar=sr.Buffer;function cr(or,ur){for(var hr in or)ur[hr]=or[hr]}function lr(or,ur,hr){return ar(or,ur,hr)}ar.from&&ar.alloc&&ar.allocUnsafe&&ar.allocUnsafeSlow?nr.exports=sr:(cr(sr,ir),ir.Buffer=lr),lr.prototype=Object.create(ar.prototype),cr(ar,lr),lr.from=function(or,ur,hr){if(typeof or=="number")throw new TypeError("Argument must not be a number");return ar(or,ur,hr)},lr.alloc=function(or,ur,hr){if(typeof or!="number")throw new TypeError("Argument must be a number");var dr=ar(or);return ur!==void 0?typeof hr=="string"?dr.fill(ur,hr):dr.fill(ur):dr.fill(0),dr},lr.allocUnsafe=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return ar(or)},lr.allocUnsafeSlow=function(or){if(typeof or!="number")throw new TypeError("Argument must be a number");return sr.SlowBuffer(or)}},{buffer:220}],495:[function(rr,nr,ir){(function(sr){(function(){var ar,cr=rr("buffer"),lr=cr.Buffer,or={};for(ar in cr)cr.hasOwnProperty(ar)&&ar!=="SlowBuffer"&&ar!=="Buffer"&&(or[ar]=cr[ar]);var ur=or.Buffer={};for(ar in lr)lr.hasOwnProperty(ar)&&ar!=="allocUnsafe"&&ar!=="allocUnsafeSlow"&&(ur[ar]=lr[ar]);if(or.Buffer.prototype=lr.prototype,ur.from&&ur.from!==Uint8Array.from||(ur.from=function(hr,dr,fr){if(typeof hr=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof hr);if(hr&&hr.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof hr);return lr(hr,dr,fr)}),ur.alloc||(ur.alloc=function(hr,dr,fr){if(typeof hr!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof hr);if(hr<0||hr>=2*(1<<30))throw new RangeError('The value "'+hr+'" is invalid for option "size"');var gr=lr(hr);return dr&&dr.length!==0?typeof fr=="string"?gr.fill(dr,fr):gr.fill(dr):gr.fill(0),gr}),!or.kStringMaxLength)try{or.kStringMaxLength=sr.binding("buffer").kStringMaxLength}catch{}or.constants||(or.constants={MAX_LENGTH:or.kMaxLength},or.kStringMaxLength&&(or.constants.MAX_STRING_LENGTH=or.kStringMaxLength)),nr.exports=or}).call(this)}).call(this,rr("_process"))},{_process:467,buffer:220}],496:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0});const sr=rr("xmlchars/xml/1.0/ed5"),ar=rr("xmlchars/xml/1.1/ed2"),cr=rr("xmlchars/xmlns/1.0/ed3");var lr=sr.isS,or=sr.isChar,ur=sr.isNameStartChar,hr=sr.isNameChar,dr=sr.S_LIST,fr=sr.NAME_RE,gr=ar.isChar,br=cr.isNCNameStartChar,pr=cr.isNCNameChar,mr=cr.NC_NAME_RE;const yr="http://www.w3.org/XML/1998/namespace",xr="http://www.w3.org/2000/xmlns/",vr={__proto__:null,xml:yr,xmlns:xr},_r={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Er=wr=>wr===34||wr===39,Tr=[34,39],Rr=[...Tr,91,62],Nr=[...Tr,60,93],Dr=[61,63,...dr],Ir=[...dr,62,38,60];function Or(wr,Pr,Ar){switch(Pr){case"xml":Ar!==yr&&wr.fail(`xml prefix must be bound to ${yr}.`);break;case"xmlns":Ar!==xr&&wr.fail(`xmlns prefix must be bound to ${xr}.`)}switch(Ar){case xr:wr.fail(Pr===""?`the default namespace may not be set to ${Ar}.`:`may not assign a prefix (even "xmlns") to the URI ${xr}.`);break;case yr:switch(Pr){case"xml":break;case"":wr.fail(`the default namespace may not be set to ${Ar}.`);break;default:wr.fail("may not assign the xml namespace to another prefix.")}}}const jr=wr=>mr.test(wr),Lr=wr=>fr.test(wr);ir.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Cr={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};ir.SaxesParser=class{constructor(wr){this.opt=wr??{},this.fragmentOpt=!!this.opt.fragment;const Pr=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,Pr){this.nameStartCheck=br,this.nameCheck=pr,this.isName=jr,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},vr);const Ar=this.opt.additionalNamespaces;Ar!=null&&(function(Sr,Mr){for(const qr of Object.keys(Mr))Or(Sr,qr,Mr[qr])}(this,Ar),Object.assign(this.ns,Ar))}else this.nameStartCheck=ur,this.nameCheck=hr,this.isName=Lr,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var wr;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:Pr}=this;this.state=Pr?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Pr,this.xmlDeclPossible=!Pr,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:Ar}=this.opt;if(Ar===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");Ar="1.0"}this.setXMLVersion(Ar),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_r),(wr=this.readyHandler)===null||wr===void 0||wr.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(wr,Pr){this[Cr[wr]]=Pr}off(wr){this[Cr[wr]]=void 0}makeError(wr){var Pr;let Ar=(Pr=this.fileName)!==null&&Pr!==void 0?Pr:"";return this.trackPosition&&(Ar.length>0&&(Ar+=":"),Ar+=`${this.line}:${this.column}`),Ar.length>0&&(Ar+=": "),new Error(Ar+wr)}fail(wr){const Pr=this.makeError(wr),Ar=this.errorHandler;if(Ar===void 0)throw Pr;return Ar(Pr),this}write(wr){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Pr=!1;wr===null?(Pr=!0,wr=""):typeof wr=="object"&&(wr=wr.toString()),this.carriedFromPrevious!==void 0&&(wr=`${this.carriedFromPrevious}${wr}`,this.carriedFromPrevious=void 0);let Ar=wr.length;const Sr=wr.charCodeAt(Ar-1);!Pr&&(Sr===13||Sr>=55296&&Sr<=56319)&&(this.carriedFromPrevious=wr[Ar-1],Ar--,wr=wr.slice(0,Ar));const{stateTable:Mr}=this;for(this.chunk=wr,this.i=0;this.i<Ar;)Mr[this.state].call(this);return this.chunkPosition+=Ar,Pr?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:wr,i:Pr}=this;if(this.prevI=Pr,this.i=Pr+1,Pr>=wr.length)return-1;const Ar=wr.charCodeAt(Pr);if(this.column++,Ar<55296){if(Ar>=32||Ar===9)return Ar;switch(Ar){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return wr.charCodeAt(Pr+1)===10&&(this.i=Pr+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),Ar}}if(Ar>56319)return Ar>=57344&&Ar<=65533||this.fail("disallowed character."),Ar;const Sr=65536+1024*(Ar-55296)+(wr.charCodeAt(Pr+1)-56320);return this.i=Pr+2,Sr>1114111&&this.fail("disallowed character."),Sr}getCode11(){const{chunk:wr,i:Pr}=this;if(this.prevI=Pr,this.i=Pr+1,Pr>=wr.length)return-1;const Ar=wr.charCodeAt(Pr);if(this.column++,Ar<55296){if(Ar>31&&Ar<127||Ar>159&&Ar!==8232||Ar===9)return Ar;switch(Ar){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const Mr=wr.charCodeAt(Pr+1);Mr!==10&&Mr!==133||(this.i=Pr+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),Ar}}if(Ar>56319)return Ar>=57344&&Ar<=65533||this.fail("disallowed character."),Ar;const Sr=65536+1024*(Ar-55296)+(wr.charCodeAt(Pr+1)-56320);return this.i=Pr+2,Sr>1114111&&this.fail("disallowed character."),Sr}getCodeNorm(){const wr=this.getCode();return wr===-2?10:wr}unget(){this.i=this.prevI,this.column--}captureTo(wr){let{i:Pr}=this;const{chunk:Ar}=this;for(;;){const Sr=this.getCode(),Mr=Sr===-2,qr=Mr?10:Sr;if(qr===-1||wr.includes(qr))return this.text+=Ar.slice(Pr,this.prevI),qr;Mr&&(this.text+=Ar.slice(Pr,this.prevI)+`
`,Pr=this.i)}}captureToChar(wr){let{i:Pr}=this;const{chunk:Ar}=this;for(;;){let Sr=this.getCode();switch(Sr){case-2:this.text+=Ar.slice(Pr,this.prevI)+`
`,Pr=this.i,Sr=10;break;case-1:return this.text+=Ar.slice(Pr),!1}if(Sr===wr)return this.text+=Ar.slice(Pr,this.prevI),!0}}captureNameChars(){const{chunk:wr,i:Pr}=this;for(;;){const Ar=this.getCode();if(Ar===-1)return this.name+=wr.slice(Pr),-1;if(!hr(Ar))return this.name+=wr.slice(Pr,this.prevI),Ar===-2?10:Ar}}skipSpaces(){for(;;){const wr=this.getCodeNorm();if(wr===-1||!lr(wr))return wr}}setXMLVersion(wr){this.currentXMLVersion=wr,wr==="1.0"?(this.isChar=or,this.getCode=this.getCode10):(this.isChar=gr,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const wr=this.i,Pr=this.skipSpaces();switch(this.prevI!==wr&&(this.xmlDeclPossible=!1),Pr){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var wr;const Pr=this.captureTo(Rr);switch(Pr){case 62:(wr=this.doctypeHandler)===null||wr===void 0||wr.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(Pr),Pr===91?this.state=4:Er(Pr)&&(this.state=3,this.q=Pr)}}sDoctypeQuote(){const wr=this.q;this.captureToChar(wr)&&(this.text+=String.fromCodePoint(wr),this.q=null,this.state=2)}sDTD(){const wr=this.captureTo(Nr);wr!==-1&&(this.text+=String.fromCodePoint(wr),wr===93?this.state=2:wr===60?this.state=6:Er(wr)&&(this.state=5,this.q=wr))}sDTDQuoted(){const wr=this.q;this.captureToChar(wr)&&(this.text+=String.fromCodePoint(wr),this.state=4,this.q=null)}sDTDOpenWaka(){const wr=this.getCodeNorm();switch(this.text+=String.fromCodePoint(wr),wr){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const wr=String.fromCodePoint(this.getCodeNorm()),Pr=this.openWakaBang+=wr;this.text+=wr,Pr!=="-"&&(this.state=Pr==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const wr=this.getCodeNorm();this.text+=String.fromCodePoint(wr),this.state=wr===45?10:8}sDTDCommentEnded(){const wr=this.getCodeNorm();this.text+=String.fromCodePoint(wr),wr===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const wr=this.getCodeNorm();this.text+=String.fromCodePoint(wr),wr===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:wr}=this;const{chunk:Pr}=this;e:for(;;)switch(this.getCode()){case-2:this.entity+=Pr.slice(wr,this.prevI)+`
`,wr=this.i;break;case 59:{const{entityReturnState:Ar}=this,Sr=this.entity+Pr.slice(wr,this.prevI);let Mr;this.state=Ar,Sr===""?(this.fail("empty entity name."),Mr="&;"):(Mr=this.parseEntity(Sr),this.entity=""),Ar===13&&this.textHandler===void 0||(this.text+=Mr);break e}case-1:this.entity+=Pr.slice(wr);break e}}sOpenWaka(){const wr=this.getCode();if(ur(wr))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(wr){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var wr;const Pr=this.getCodeNorm();Pr===45?(this.state=19,(wr=this.commentHandler)===null||wr===void 0||wr.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(Pr),this.state=17)}sCommentEnded(){const wr=this.getCodeNorm();wr!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(wr),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const wr=this.getCodeNorm();wr===93?this.state=22:(this.text+="]"+String.fromCodePoint(wr),this.state=20)}sCDataEnding2(){var wr;const Pr=this.getCodeNorm();switch(Pr){case 62:(wr=this.cdataHandler)===null||wr===void 0||wr.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(Pr),this.state=20}}sPIFirstChar(){const wr=this.getCodeNorm();this.nameStartCheck(wr)?(this.piTarget+=String.fromCodePoint(wr),this.state=24):wr===63||lr(wr)?(this.fail("processing instruction without a target."),this.state=wr===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(wr),this.state=24)}sPIRest(){const{chunk:wr,i:Pr}=this;for(;;){const Ar=this.getCodeNorm();if(Ar===-1)return void(this.piTarget+=wr.slice(Pr));if(!this.nameCheck(Ar)){this.piTarget+=wr.slice(Pr,this.prevI);const Sr=Ar===63;Sr||lr(Ar)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=Sr?33:27):this.state=Sr?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(Ar));break}}}sPIBody(){if(this.text.length===0){const wr=this.getCodeNorm();wr===63?this.state=26:lr(wr)||(this.text=String.fromCodePoint(wr))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var wr;const Pr=this.getCodeNorm();if(Pr===62){const{piTarget:Ar}=this;Ar.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(wr=this.piHandler)===null||wr===void 0||wr.call(this,{target:Ar,body:this.text}),this.piTarget=this.text="",this.state=13}else Pr===63?this.text+="?":(this.text+="?"+String.fromCodePoint(Pr),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const wr=this.skipSpaces();wr!==63?wr!==-1&&(this.state=28,this.name=String.fromCodePoint(wr)):this.state=33}sXMLDeclName(){const wr=this.captureTo(Dr);if(wr===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(lr(wr)||wr===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=wr===61?30:29}}sXMLDeclEq(){const wr=this.getCodeNorm();if(wr===63)return this.state=33,void this.fail("XML declaration is incomplete.");lr(wr)||(wr!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const wr=this.getCodeNorm();if(wr===63)return this.state=33,void this.fail("XML declaration is incomplete.");lr(wr)||(Er(wr)?this.q=wr:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const wr=this.captureTo([this.q,63]);if(wr===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(wr===-1)return;const Pr=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const Ar=Pr;this.xmlDecl.version=Ar,/^1\.[0-9]+$/.test(Ar)?this.opt.forceXMLVersion||this.setXMLVersion(Ar):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Pr)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Pr;break;case"standalone":Pr!=="yes"&&Pr!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Pr}this.name="",this.state=32}sXMLDeclSeparator(){const wr=this.getCodeNorm();wr!==63?(lr(wr)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var wr;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(wr=this.xmldeclHandler)===null||wr===void 0||wr.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var wr;const Pr=this.captureNameChars();if(Pr===-1)return;const Ar=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=Ar.ns=Object.create(null)),(wr=this.openTagStartHandler)===null||wr===void 0||wr.call(this,Ar),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Pr){case 62:this.openTag();break;case 47:this.state=35;break;default:lr(Pr)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const wr=this.skipSpaces();wr!==-1&&(ur(wr)?(this.unget(),this.state=37):wr===62?this.openTag():wr===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const wr=this.captureNameChars();wr===61?this.state=39:lr(wr)?this.state=38:wr===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):wr!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const wr=this.skipSpaces();switch(wr){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",wr===62?this.openTag():ur(wr)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const wr=this.getCodeNorm();Er(wr)?(this.q=wr,this.state=40):lr(wr)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:wr,chunk:Pr}=this;let{i:Ar}=this;for(;;)switch(this.getCode()){case wr:return this.pushAttrib(this.name,this.text+Pr.slice(Ar,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=Pr.slice(Ar,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=Pr.slice(Ar,this.prevI)+" ",Ar=this.i;break;case 60:return this.text+=Pr.slice(Ar,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=Pr.slice(Ar))}}sAttribValueClosed(){const wr=this.getCodeNorm();lr(wr)?this.state=36:wr===62?this.openTag():wr===47?this.state=35:ur(wr)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const wr=this.captureTo(Ir);switch(wr){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",wr===62?this.openTag():this.state=36}}sCloseTag(){const wr=this.captureNameChars();wr===62?this.closeTag():lr(wr)?this.state=44:wr!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:wr,forbiddenState:Pr}=this;const{chunk:Ar,textHandler:Sr}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,Sr!==void 0){const{text:Mr}=this,qr=Ar.slice(wr,this.prevI);Mr.length!==0?(Sr(Mr+qr),this.text=""):qr.length!==0&&Sr(qr)}Pr=0;break e;case 38:this.state=14,this.entityReturnState=13,Sr!==void 0&&(this.text+=Ar.slice(wr,this.prevI)),Pr=0;break e;case 93:switch(Pr){case 0:Pr=1;break;case 1:Pr=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:Pr===2&&this.fail('the string "]]>" is disallowed in char data.'),Pr=0;break;case-2:Sr!==void 0&&(this.text+=Ar.slice(wr,this.prevI)+`
`),wr=this.i,Pr=0;break;case-1:Sr!==void 0&&(this.text+=Ar.slice(wr));break e;default:Pr=0}this.forbiddenState=Pr}handleTextOutsideRoot(){let{i:wr}=this;const{chunk:Pr,textHandler:Ar}=this;let Sr=!1;e:for(;;){const Mr=this.getCode();switch(Mr){case 60:if(this.state=15,Ar!==void 0){const{text:qr}=this,$r=Pr.slice(wr,this.prevI);qr.length!==0?(Ar(qr+$r),this.text=""):$r.length!==0&&Ar($r)}break e;case 38:this.state=14,this.entityReturnState=13,Ar!==void 0&&(this.text+=Pr.slice(wr,this.prevI)),Sr=!0;break e;case-2:Ar!==void 0&&(this.text+=Pr.slice(wr,this.prevI)+`
`),wr=this.i;break;case-1:Ar!==void 0&&(this.text+=Pr.slice(wr));break e;default:lr(Mr)||(Sr=!0)}}Sr&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(wr,Pr){var Ar;const{prefix:Sr,local:Mr}=this.qname(wr),qr={name:wr,prefix:Sr,local:Mr,value:Pr};if(this.attribList.push(qr),(Ar=this.attributeHandler)===null||Ar===void 0||Ar.call(this,qr),Sr==="xmlns"){const $r=Pr.trim();this.currentXMLVersion==="1.0"&&$r===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Mr]=$r,Or(this,Mr,$r)}else if(wr==="xmlns"){const $r=Pr.trim();this.topNS[""]=$r,Or(this,"",$r)}}pushAttribPlain(wr,Pr){var Ar;const Sr={name:wr,value:Pr};this.attribList.push(Sr),(Ar=this.attributeHandler)===null||Ar===void 0||Ar.call(this,Sr)}end(){var wr,Pr;this.sawRoot||this.fail("document must contain a root element.");const{tags:Ar}=this;for(;Ar.length>0;){const Mr=Ar.pop();this.fail("unclosed tag: "+Mr.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:Sr}=this;return Sr.length!==0&&((wr=this.textHandler)===null||wr===void 0||wr.call(this,Sr),this.text=""),this._closed=!0,(Pr=this.endHandler)===null||Pr===void 0||Pr.call(this),this._init(),this}resolve(wr){var Pr,Ar;let Sr=this.topNS[wr];if(Sr!==void 0)return Sr;const{tags:Mr}=this;for(let qr=Mr.length-1;qr>=0;qr--)if(Sr=Mr[qr].ns[wr],Sr!==void 0)return Sr;return Sr=this.ns[wr],Sr!==void 0?Sr:(Ar=(Pr=this.opt).resolvePrefix)===null||Ar===void 0?void 0:Ar.call(Pr,wr)}qname(wr){const Pr=wr.indexOf(":");if(Pr===-1)return{prefix:"",local:wr};const Ar=wr.slice(Pr+1),Sr=wr.slice(0,Pr);return(Sr===""||Ar===""||Ar.includes(":"))&&this.fail(`malformed name: ${wr}.`),{prefix:Sr,local:Ar}}processAttribsNS(){var wr;const{attribList:Pr}=this,Ar=this.tag;{const{prefix:qr,local:$r}=this.qname(Ar.name);Ar.prefix=qr,Ar.local=$r;const Br=Ar.uri=(wr=this.resolve(qr))!==null&&wr!==void 0?wr:"";qr!==""&&(qr==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),Br===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(qr)}.`),Ar.uri=qr))}if(Pr.length===0)return;const{attributes:Sr}=Ar,Mr=new Set;for(const qr of Pr){const{name:$r,prefix:Br,local:zr}=qr;let Gr,Vr;Br===""?(Gr=$r==="xmlns"?xr:"",Vr=$r):(Gr=this.resolve(Br),Gr===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Br)}.`),Gr=Br),Vr=`{${Gr}}${zr}`),Mr.has(Vr)&&this.fail(`duplicate attribute: ${Vr}.`),Mr.add(Vr),qr.uri=Gr,Sr[$r]=qr}this.attribList=[]}processAttribsPlain(){const{attribList:wr}=this,Pr=this.tag.attributes;for(const{name:Ar,value:Sr}of wr)Pr[Ar]!==void 0&&this.fail(`duplicate attribute: ${Ar}.`),Pr[Ar]=Sr;this.attribList=[]}openTag(){var wr;this.processAttribs();const{tags:Pr}=this,Ar=this.tag;Ar.isSelfClosing=!1,(wr=this.openTagHandler)===null||wr===void 0||wr.call(this,Ar),Pr.push(Ar),this.state=13,this.name=""}openSelfClosingTag(){var wr,Pr,Ar;this.processAttribs();const{tags:Sr}=this,Mr=this.tag;Mr.isSelfClosing=!0,(wr=this.openTagHandler)===null||wr===void 0||wr.call(this,Mr),(Pr=this.closeTagHandler)===null||Pr===void 0||Pr.call(this,Mr),(this.tag=(Ar=Sr[Sr.length-1])!==null&&Ar!==void 0?Ar:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:wr,name:Pr}=this;if(this.state=13,this.name="",Pr==="")return this.fail("weird empty close tag."),void(this.text+="</>");const Ar=this.closeTagHandler;let Sr=wr.length;for(;Sr-- >0;){const Mr=this.tag=wr.pop();if(this.topNS=Mr.ns,Ar==null||Ar(Mr),Mr.name===Pr)break;this.fail("unexpected close tag.")}Sr===0?this.closedRoot=!0:Sr<0&&(this.fail(`unmatched closing tag: ${Pr}.`),this.text+=`</${Pr}>`)}parseEntity(wr){if(wr[0]!=="#"){const Ar=this.ENTITIES[wr];return Ar!==void 0?Ar:(this.fail(this.isName(wr)?"undefined entity.":"disallowed character in entity name."),`&${wr};`)}let Pr=NaN;return wr[1]==="x"&&/^#x[0-9a-f]+$/i.test(wr)?Pr=parseInt(wr.slice(2),16):/^#[0-9]+$/.test(wr)&&(Pr=parseInt(wr.slice(1),10)),this.isChar(Pr)?String.fromCodePoint(Pr):(this.fail("malformed character entity."),`&${wr};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer;function ar(cr,lr){this._block=sr.alloc(cr),this._finalSize=lr,this._blockSize=cr,this._len=0}ar.prototype.update=function(cr,lr){typeof cr=="string"&&(lr=lr||"utf8",cr=sr.from(cr,lr));for(var or=this._block,ur=this._blockSize,hr=cr.length,dr=this._len,fr=0;fr<hr;){for(var gr=dr%ur,br=Math.min(hr-fr,ur-gr),pr=0;pr<br;pr++)or[gr+pr]=cr[fr+pr];fr+=br,(dr+=br)%ur==0&&this._update(or)}return this._len+=hr,this},ar.prototype.digest=function(cr){var lr=this._len%this._blockSize;this._block[lr]=128,this._block.fill(0,lr+1),lr>=this._finalSize&&(this._update(this._block),this._block.fill(0));var or=8*this._len;if(or<=4294967295)this._block.writeUInt32BE(or,this._blockSize-4);else{var ur=(4294967295&or)>>>0,hr=(or-ur)/4294967296;this._block.writeUInt32BE(hr,this._blockSize-8),this._block.writeUInt32BE(ur,this._blockSize-4)}this._update(this._block);var dr=this._hash();return cr?dr.toString(cr):dr},ar.prototype._update=function(){throw new Error("_update must be implemented by subclass")},nr.exports=ar},{"safe-buffer":494}],498:[function(rr,nr,ir){var sr=nr.exports=function(ar){ar=ar.toLowerCase();var cr=sr[ar];if(!cr)throw new Error(ar+" is not supported (we accept pull requests)");return new cr};sr.sha=rr("./sha"),sr.sha1=rr("./sha1"),sr.sha224=rr("./sha224"),sr.sha256=rr("./sha256"),sr.sha384=rr("./sha384"),sr.sha512=rr("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./hash"),cr=rr("safe-buffer").Buffer,lr=[1518500249,1859775393,-1894007588,-899497514],or=new Array(80);function ur(){this.init(),this._w=or,ar.call(this,64,56)}function hr(fr){return fr<<30|fr>>>2}function dr(fr,gr,br,pr){return fr===0?gr&br|~gr&pr:fr===2?gr&br|gr&pr|br&pr:gr^br^pr}sr(ur,ar),ur.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},ur.prototype._update=function(fr){for(var gr,br=this._w,pr=0|this._a,mr=0|this._b,yr=0|this._c,xr=0|this._d,vr=0|this._e,_r=0;_r<16;++_r)br[_r]=fr.readInt32BE(4*_r);for(;_r<80;++_r)br[_r]=br[_r-3]^br[_r-8]^br[_r-14]^br[_r-16];for(var Er=0;Er<80;++Er){var Tr=~~(Er/20),Rr=0|((gr=pr)<<5|gr>>>27)+dr(Tr,mr,yr,xr)+vr+br[Er]+lr[Tr];vr=xr,xr=yr,yr=hr(mr),mr=pr,pr=Rr}this._a=pr+this._a|0,this._b=mr+this._b|0,this._c=yr+this._c|0,this._d=xr+this._d|0,this._e=vr+this._e|0},ur.prototype._hash=function(){var fr=cr.allocUnsafe(20);return fr.writeInt32BE(0|this._a,0),fr.writeInt32BE(0|this._b,4),fr.writeInt32BE(0|this._c,8),fr.writeInt32BE(0|this._d,12),fr.writeInt32BE(0|this._e,16),fr},nr.exports=ur},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./hash"),cr=rr("safe-buffer").Buffer,lr=[1518500249,1859775393,-1894007588,-899497514],or=new Array(80);function ur(){this.init(),this._w=or,ar.call(this,64,56)}function hr(gr){return gr<<5|gr>>>27}function dr(gr){return gr<<30|gr>>>2}function fr(gr,br,pr,mr){return gr===0?br&pr|~br&mr:gr===2?br&pr|br&mr|pr&mr:br^pr^mr}sr(ur,ar),ur.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},ur.prototype._update=function(gr){for(var br,pr=this._w,mr=0|this._a,yr=0|this._b,xr=0|this._c,vr=0|this._d,_r=0|this._e,Er=0;Er<16;++Er)pr[Er]=gr.readInt32BE(4*Er);for(;Er<80;++Er)pr[Er]=(br=pr[Er-3]^pr[Er-8]^pr[Er-14]^pr[Er-16])<<1|br>>>31;for(var Tr=0;Tr<80;++Tr){var Rr=~~(Tr/20),Nr=hr(mr)+fr(Rr,yr,xr,vr)+_r+pr[Tr]+lr[Rr]|0;_r=vr,vr=xr,xr=dr(yr),yr=mr,mr=Nr}this._a=mr+this._a|0,this._b=yr+this._b|0,this._c=xr+this._c|0,this._d=vr+this._d|0,this._e=_r+this._e|0},ur.prototype._hash=function(){var gr=cr.allocUnsafe(20);return gr.writeInt32BE(0|this._a,0),gr.writeInt32BE(0|this._b,4),gr.writeInt32BE(0|this._c,8),gr.writeInt32BE(0|this._d,12),gr.writeInt32BE(0|this._e,16),gr},nr.exports=ur},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./sha256"),cr=rr("./hash"),lr=rr("safe-buffer").Buffer,or=new Array(64);function ur(){this.init(),this._w=or,cr.call(this,64,56)}sr(ur,ar),ur.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},ur.prototype._hash=function(){var hr=lr.allocUnsafe(28);return hr.writeInt32BE(this._a,0),hr.writeInt32BE(this._b,4),hr.writeInt32BE(this._c,8),hr.writeInt32BE(this._d,12),hr.writeInt32BE(this._e,16),hr.writeInt32BE(this._f,20),hr.writeInt32BE(this._g,24),hr},nr.exports=ur},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./hash"),cr=rr("safe-buffer").Buffer,lr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],or=new Array(64);function ur(){this.init(),this._w=or,ar.call(this,64,56)}function hr(pr,mr,yr){return yr^pr&(mr^yr)}function dr(pr,mr,yr){return pr&mr|yr&(pr|mr)}function fr(pr){return(pr>>>2|pr<<30)^(pr>>>13|pr<<19)^(pr>>>22|pr<<10)}function gr(pr){return(pr>>>6|pr<<26)^(pr>>>11|pr<<21)^(pr>>>25|pr<<7)}function br(pr){return(pr>>>7|pr<<25)^(pr>>>18|pr<<14)^pr>>>3}sr(ur,ar),ur.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},ur.prototype._update=function(pr){for(var mr,yr=this._w,xr=0|this._a,vr=0|this._b,_r=0|this._c,Er=0|this._d,Tr=0|this._e,Rr=0|this._f,Nr=0|this._g,Dr=0|this._h,Ir=0;Ir<16;++Ir)yr[Ir]=pr.readInt32BE(4*Ir);for(;Ir<64;++Ir)yr[Ir]=0|(((mr=yr[Ir-2])>>>17|mr<<15)^(mr>>>19|mr<<13)^mr>>>10)+yr[Ir-7]+br(yr[Ir-15])+yr[Ir-16];for(var Or=0;Or<64;++Or){var jr=Dr+gr(Tr)+hr(Tr,Rr,Nr)+lr[Or]+yr[Or]|0,Lr=fr(xr)+dr(xr,vr,_r)|0;Dr=Nr,Nr=Rr,Rr=Tr,Tr=Er+jr|0,Er=_r,_r=vr,vr=xr,xr=jr+Lr|0}this._a=xr+this._a|0,this._b=vr+this._b|0,this._c=_r+this._c|0,this._d=Er+this._d|0,this._e=Tr+this._e|0,this._f=Rr+this._f|0,this._g=Nr+this._g|0,this._h=Dr+this._h|0},ur.prototype._hash=function(){var pr=cr.allocUnsafe(32);return pr.writeInt32BE(this._a,0),pr.writeInt32BE(this._b,4),pr.writeInt32BE(this._c,8),pr.writeInt32BE(this._d,12),pr.writeInt32BE(this._e,16),pr.writeInt32BE(this._f,20),pr.writeInt32BE(this._g,24),pr.writeInt32BE(this._h,28),pr},nr.exports=ur},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./sha512"),cr=rr("./hash"),lr=rr("safe-buffer").Buffer,or=new Array(160);function ur(){this.init(),this._w=or,cr.call(this,128,112)}sr(ur,ar),ur.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},ur.prototype._hash=function(){var hr=lr.allocUnsafe(48);function dr(fr,gr,br){hr.writeInt32BE(fr,br),hr.writeInt32BE(gr,br+4)}return dr(this._ah,this._al,0),dr(this._bh,this._bl,8),dr(this._ch,this._cl,16),dr(this._dh,this._dl,24),dr(this._eh,this._el,32),dr(this._fh,this._fl,40),hr},nr.exports=ur},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(rr,nr,ir){var sr=rr("inherits"),ar=rr("./hash"),cr=rr("safe-buffer").Buffer,lr=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],or=new Array(160);function ur(){this.init(),this._w=or,ar.call(this,128,112)}function hr(vr,_r,Er){return Er^vr&(_r^Er)}function dr(vr,_r,Er){return vr&_r|Er&(vr|_r)}function fr(vr,_r){return(vr>>>28|_r<<4)^(_r>>>2|vr<<30)^(_r>>>7|vr<<25)}function gr(vr,_r){return(vr>>>14|_r<<18)^(vr>>>18|_r<<14)^(_r>>>9|vr<<23)}function br(vr,_r){return(vr>>>1|_r<<31)^(vr>>>8|_r<<24)^vr>>>7}function pr(vr,_r){return(vr>>>1|_r<<31)^(vr>>>8|_r<<24)^(vr>>>7|_r<<25)}function mr(vr,_r){return(vr>>>19|_r<<13)^(_r>>>29|vr<<3)^vr>>>6}function yr(vr,_r){return(vr>>>19|_r<<13)^(_r>>>29|vr<<3)^(vr>>>6|_r<<26)}function xr(vr,_r){return vr>>>0<_r>>>0?1:0}sr(ur,ar),ur.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},ur.prototype._update=function(vr){for(var _r=this._w,Er=0|this._ah,Tr=0|this._bh,Rr=0|this._ch,Nr=0|this._dh,Dr=0|this._eh,Ir=0|this._fh,Or=0|this._gh,jr=0|this._hh,Lr=0|this._al,Cr=0|this._bl,wr=0|this._cl,Pr=0|this._dl,Ar=0|this._el,Sr=0|this._fl,Mr=0|this._gl,qr=0|this._hl,$r=0;$r<32;$r+=2)_r[$r]=vr.readInt32BE(4*$r),_r[$r+1]=vr.readInt32BE(4*$r+4);for(;$r<160;$r+=2){var Br=_r[$r-30],zr=_r[$r-30+1],Gr=br(Br,zr),Vr=pr(zr,Br),Xr=mr(Br=_r[$r-4],zr=_r[$r-4+1]),Ur=yr(zr,Br),Fr=_r[$r-14],Kr=_r[$r-14+1],Zr=_r[$r-32],Jr=_r[$r-32+1],tn=Vr+Kr|0,an=Gr+Fr+xr(tn,Vr)|0;an=(an=an+Xr+xr(tn=tn+Ur|0,Ur)|0)+Zr+xr(tn=tn+Jr|0,Jr)|0,_r[$r]=an,_r[$r+1]=tn}for(var dn=0;dn<160;dn+=2){an=_r[dn],tn=_r[dn+1];var en=dr(Er,Tr,Rr),rn=dr(Lr,Cr,wr),sn=fr(Er,Lr),on=fr(Lr,Er),fn=gr(Dr,Ar),pn=gr(Ar,Dr),gn=lr[dn],Pn=lr[dn+1],In=hr(Dr,Ir,Or),En=hr(Ar,Sr,Mr),zn=qr+pn|0,yn=jr+fn+xr(zn,qr)|0;yn=(yn=(yn=yn+In+xr(zn=zn+En|0,En)|0)+gn+xr(zn=zn+Pn|0,Pn)|0)+an+xr(zn=zn+tn|0,tn)|0;var Vn=on+rn|0,Kn=sn+en+xr(Vn,on)|0;jr=Or,qr=Mr,Or=Ir,Mr=Sr,Ir=Dr,Sr=Ar,Dr=Nr+yn+xr(Ar=Pr+zn|0,Pr)|0,Nr=Rr,Pr=wr,Rr=Tr,wr=Cr,Tr=Er,Cr=Lr,Er=yn+Kn+xr(Lr=zn+Vn|0,zn)|0}this._al=this._al+Lr|0,this._bl=this._bl+Cr|0,this._cl=this._cl+wr|0,this._dl=this._dl+Pr|0,this._el=this._el+Ar|0,this._fl=this._fl+Sr|0,this._gl=this._gl+Mr|0,this._hl=this._hl+qr|0,this._ah=this._ah+Er+xr(this._al,Lr)|0,this._bh=this._bh+Tr+xr(this._bl,Cr)|0,this._ch=this._ch+Rr+xr(this._cl,wr)|0,this._dh=this._dh+Nr+xr(this._dl,Pr)|0,this._eh=this._eh+Dr+xr(this._el,Ar)|0,this._fh=this._fh+Ir+xr(this._fl,Sr)|0,this._gh=this._gh+Or+xr(this._gl,Mr)|0,this._hh=this._hh+jr+xr(this._hl,qr)|0},ur.prototype._hash=function(){var vr=cr.allocUnsafe(64);function _r(Er,Tr,Rr){vr.writeInt32BE(Er,Rr),vr.writeInt32BE(Tr,Rr+4)}return _r(this._ah,this._al,0),_r(this._bh,this._bl,8),_r(this._ch,this._cl,16),_r(this._dh,this._dl,24),_r(this._eh,this._el,32),_r(this._fh,this._fl,40),_r(this._gh,this._gl,48),_r(this._hh,this._hl,56),vr},nr.exports=ur},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(rr,nr,ir){nr.exports=ar;var sr=rr("events").EventEmitter;function ar(){sr.call(this)}rr("inherits")(ar,sr),ar.Readable=rr("readable-stream/readable.js"),ar.Writable=rr("readable-stream/writable.js"),ar.Duplex=rr("readable-stream/duplex.js"),ar.Transform=rr("readable-stream/transform.js"),ar.PassThrough=rr("readable-stream/passthrough.js"),ar.Stream=ar,ar.prototype.pipe=function(cr,lr){var or=this;function ur(mr){cr.writable&&cr.write(mr)===!1&&or.pause&&or.pause()}function hr(){or.readable&&or.resume&&or.resume()}or.on("data",ur),cr.on("drain",hr),cr._isStdio||lr&&lr.end===!1||(or.on("end",fr),or.on("close",gr));var dr=!1;function fr(){dr||(dr=!0,cr.end())}function gr(){dr||(dr=!0,typeof cr.destroy=="function"&&cr.destroy())}function br(mr){if(pr(),sr.listenerCount(this,"error")===0)throw mr}function pr(){or.removeListener("data",ur),cr.removeListener("drain",hr),or.removeListener("end",fr),or.removeListener("close",gr),or.removeListener("error",br),cr.removeListener("error",br),or.removeListener("end",pr),or.removeListener("close",pr),cr.removeListener("close",pr)}return or.on("error",br),cr.on("error",br),or.on("end",pr),or.on("close",pr),cr.on("close",pr),cr.emit("pipe",or),cr}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(rr,nr,ir){var sr={}.toString;nr.exports=Array.isArray||function(ar){return sr.call(ar)=="[object Array]"}},{}],507:[function(rr,nr,ir){nr.exports=rr("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(rr,nr,ir){var sr=rr("process-nextick-args"),ar=Object.keys||function(pr){var mr=[];for(var yr in pr)mr.push(yr);return mr};nr.exports=fr;var cr=Object.create(rr("core-util-is"));cr.inherits=rr("inherits");var lr=rr("./_stream_readable"),or=rr("./_stream_writable");cr.inherits(fr,lr);for(var ur=ar(or.prototype),hr=0;hr<ur.length;hr++){var dr=ur[hr];fr.prototype[dr]||(fr.prototype[dr]=or.prototype[dr])}function fr(pr){if(!(this instanceof fr))return new fr(pr);lr.call(this,pr),or.call(this,pr),pr&&pr.readable===!1&&(this.readable=!1),pr&&pr.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,pr&&pr.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",gr)}function gr(){this.allowHalfOpen||this._writableState.ended||sr.nextTick(br,this)}function br(pr){pr.end()}Object.defineProperty(fr.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(fr.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(pr){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=pr,this._writableState.destroyed=pr)}}),fr.prototype._destroy=function(pr,mr){this.push(null),this.end(),sr.nextTick(mr,pr)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(rr,nr,ir){nr.exports=cr;var sr=rr("./_stream_transform"),ar=Object.create(rr("core-util-is"));function cr(lr){if(!(this instanceof cr))return new cr(lr);sr.call(this,lr)}ar.inherits=rr("inherits"),ar.inherits(cr,sr),cr.prototype._transform=function(lr,or,ur){ur(null,lr)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(rr,nr,ir){(function(sr,ar){(function(){var cr=rr("process-nextick-args");nr.exports=Er;var lr,or=rr("isarray");Er.ReadableState=_r,rr("events").EventEmitter;var ur=function(qr,$r){return qr.listeners($r).length},hr=rr("./internal/streams/stream"),dr=rr("safe-buffer").Buffer,fr=(ar!==void 0?ar:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},gr=Object.create(rr("core-util-is"));gr.inherits=rr("inherits");var br=rr("util"),pr=void 0;pr=br&&br.debuglog?br.debuglog("stream"):function(){};var mr,yr=rr("./internal/streams/BufferList"),xr=rr("./internal/streams/destroy");gr.inherits(Er,hr);var vr=["error","close","destroy","pause","resume"];function _r(qr,$r){qr=qr||{};var Br=$r instanceof(lr=lr||rr("./_stream_duplex"));this.objectMode=!!qr.objectMode,Br&&(this.objectMode=this.objectMode||!!qr.readableObjectMode);var zr=qr.highWaterMark,Gr=qr.readableHighWaterMark,Vr=this.objectMode?16:16384;this.highWaterMark=zr||zr===0?zr:Br&&(Gr||Gr===0)?Gr:Vr,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new yr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=qr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,qr.encoding&&(mr||(mr=rr("string_decoder/").StringDecoder),this.decoder=new mr(qr.encoding),this.encoding=qr.encoding)}function Er(qr){if(lr=lr||rr("./_stream_duplex"),!(this instanceof Er))return new Er(qr);this._readableState=new _r(qr,this),this.readable=!0,qr&&(typeof qr.read=="function"&&(this._read=qr.read),typeof qr.destroy=="function"&&(this._destroy=qr.destroy)),hr.call(this)}function Tr(qr,$r,Br,zr,Gr){var Vr,Xr=qr._readableState;return $r===null?(Xr.reading=!1,function(Ur,Fr){if(!Fr.ended){if(Fr.decoder){var Kr=Fr.decoder.end();Kr&&Kr.length&&(Fr.buffer.push(Kr),Fr.length+=Fr.objectMode?1:Kr.length)}Fr.ended=!0,Dr(Ur)}}(qr,Xr)):(Gr||(Vr=function(Ur,Fr){var Kr;Zr=Fr,dr.isBuffer(Zr)||Zr instanceof fr||typeof Fr=="string"||Fr===void 0||Ur.objectMode||(Kr=new TypeError("Invalid non-string/buffer chunk"));var Zr;return Kr}(Xr,$r)),Vr?qr.emit("error",Vr):Xr.objectMode||$r&&$r.length>0?(typeof $r=="string"||Xr.objectMode||Object.getPrototypeOf($r)===dr.prototype||($r=function(Ur){return dr.from(Ur)}($r)),zr?Xr.endEmitted?qr.emit("error",new Error("stream.unshift() after end event")):Rr(qr,Xr,$r,!0):Xr.ended?qr.emit("error",new Error("stream.push() after EOF")):(Xr.reading=!1,Xr.decoder&&!Br?($r=Xr.decoder.write($r),Xr.objectMode||$r.length!==0?Rr(qr,Xr,$r,!1):Or(qr,Xr)):Rr(qr,Xr,$r,!1))):zr||(Xr.reading=!1)),function(Ur){return!Ur.ended&&(Ur.needReadable||Ur.length<Ur.highWaterMark||Ur.length===0)}(Xr)}function Rr(qr,$r,Br,zr){$r.flowing&&$r.length===0&&!$r.sync?(qr.emit("data",Br),qr.read(0)):($r.length+=$r.objectMode?1:Br.length,zr?$r.buffer.unshift(Br):$r.buffer.push(Br),$r.needReadable&&Dr(qr)),Or(qr,$r)}Object.defineProperty(Er.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(qr){this._readableState&&(this._readableState.destroyed=qr)}}),Er.prototype.destroy=xr.destroy,Er.prototype._undestroy=xr.undestroy,Er.prototype._destroy=function(qr,$r){this.push(null),$r(qr)},Er.prototype.push=function(qr,$r){var Br,zr=this._readableState;return zr.objectMode?Br=!0:typeof qr=="string"&&(($r=$r||zr.defaultEncoding)!==zr.encoding&&(qr=dr.from(qr,$r),$r=""),Br=!0),Tr(this,qr,$r,!1,Br)},Er.prototype.unshift=function(qr){return Tr(this,qr,null,!0,!1)},Er.prototype.isPaused=function(){return this._readableState.flowing===!1},Er.prototype.setEncoding=function(qr){return mr||(mr=rr("string_decoder/").StringDecoder),this._readableState.decoder=new mr(qr),this._readableState.encoding=qr,this};function Nr(qr,$r){return qr<=0||$r.length===0&&$r.ended?0:$r.objectMode?1:qr!=qr?$r.flowing&&$r.length?$r.buffer.head.data.length:$r.length:(qr>$r.highWaterMark&&($r.highWaterMark=function(Br){return Br>=8388608?Br=8388608:(Br--,Br|=Br>>>1,Br|=Br>>>2,Br|=Br>>>4,Br|=Br>>>8,Br|=Br>>>16,Br++),Br}(qr)),qr<=$r.length?qr:$r.ended?$r.length:($r.needReadable=!0,0))}function Dr(qr){var $r=qr._readableState;$r.needReadable=!1,$r.emittedReadable||(pr("emitReadable",$r.flowing),$r.emittedReadable=!0,$r.sync?cr.nextTick(Ir,qr):Ir(qr))}function Ir(qr){pr("emit readable"),qr.emit("readable"),wr(qr)}function Or(qr,$r){$r.readingMore||($r.readingMore=!0,cr.nextTick(jr,qr,$r))}function jr(qr,$r){for(var Br=$r.length;!$r.reading&&!$r.flowing&&!$r.ended&&$r.length<$r.highWaterMark&&(pr("maybeReadMore read 0"),qr.read(0),Br!==$r.length);)Br=$r.length;$r.readingMore=!1}function Lr(qr){pr("readable nexttick read 0"),qr.read(0)}function Cr(qr,$r){$r.reading||(pr("resume read 0"),qr.read(0)),$r.resumeScheduled=!1,$r.awaitDrain=0,qr.emit("resume"),wr(qr),$r.flowing&&!$r.reading&&qr.read(0)}function wr(qr){var $r=qr._readableState;for(pr("flow",$r.flowing);$r.flowing&&qr.read()!==null;);}function Pr(qr,$r){return $r.length===0?null:($r.objectMode?Br=$r.buffer.shift():!qr||qr>=$r.length?(Br=$r.decoder?$r.buffer.join(""):$r.buffer.length===1?$r.buffer.head.data:$r.buffer.concat($r.length),$r.buffer.clear()):Br=function(zr,Gr,Vr){var Xr;return zr<Gr.head.data.length?(Xr=Gr.head.data.slice(0,zr),Gr.head.data=Gr.head.data.slice(zr)):Xr=zr===Gr.head.data.length?Gr.shift():Vr?function(Ur,Fr){var Kr=Fr.head,Zr=1,Jr=Kr.data;for(Ur-=Jr.length;Kr=Kr.next;){var tn=Kr.data,an=Ur>tn.length?tn.length:Ur;if(an===tn.length?Jr+=tn:Jr+=tn.slice(0,Ur),(Ur-=an)===0){an===tn.length?(++Zr,Kr.next?Fr.head=Kr.next:Fr.head=Fr.tail=null):(Fr.head=Kr,Kr.data=tn.slice(an));break}++Zr}return Fr.length-=Zr,Jr}(zr,Gr):function(Ur,Fr){var Kr=dr.allocUnsafe(Ur),Zr=Fr.head,Jr=1;for(Zr.data.copy(Kr),Ur-=Zr.data.length;Zr=Zr.next;){var tn=Zr.data,an=Ur>tn.length?tn.length:Ur;if(tn.copy(Kr,Kr.length-Ur,0,an),(Ur-=an)===0){an===tn.length?(++Jr,Zr.next?Fr.head=Zr.next:Fr.head=Fr.tail=null):(Fr.head=Zr,Zr.data=tn.slice(an));break}++Jr}return Fr.length-=Jr,Kr}(zr,Gr),Xr}(qr,$r.buffer,$r.decoder),Br);var Br}function Ar(qr){var $r=qr._readableState;if($r.length>0)throw new Error('"endReadable()" called on non-empty stream');$r.endEmitted||($r.ended=!0,cr.nextTick(Sr,$r,qr))}function Sr(qr,$r){qr.endEmitted||qr.length!==0||(qr.endEmitted=!0,$r.readable=!1,$r.emit("end"))}function Mr(qr,$r){for(var Br=0,zr=qr.length;Br<zr;Br++)if(qr[Br]===$r)return Br;return-1}Er.prototype.read=function(qr){pr("read",qr),qr=parseInt(qr,10);var $r=this._readableState,Br=qr;if(qr!==0&&($r.emittedReadable=!1),qr===0&&$r.needReadable&&($r.length>=$r.highWaterMark||$r.ended))return pr("read: emitReadable",$r.length,$r.ended),$r.length===0&&$r.ended?Ar(this):Dr(this),null;if((qr=Nr(qr,$r))===0&&$r.ended)return $r.length===0&&Ar(this),null;var zr,Gr=$r.needReadable;return pr("need readable",Gr),($r.length===0||$r.length-qr<$r.highWaterMark)&&pr("length less than watermark",Gr=!0),$r.ended||$r.reading?pr("reading or ended",Gr=!1):Gr&&(pr("do read"),$r.reading=!0,$r.sync=!0,$r.length===0&&($r.needReadable=!0),this._read($r.highWaterMark),$r.sync=!1,$r.reading||(qr=Nr(Br,$r))),(zr=qr>0?Pr(qr,$r):null)===null?($r.needReadable=!0,qr=0):$r.length-=qr,$r.length===0&&($r.ended||($r.needReadable=!0),Br!==qr&&$r.ended&&Ar(this)),zr!==null&&this.emit("data",zr),zr},Er.prototype._read=function(qr){this.emit("error",new Error("_read() is not implemented"))},Er.prototype.pipe=function(qr,$r){var Br=this,zr=this._readableState;switch(zr.pipesCount){case 0:zr.pipes=qr;break;case 1:zr.pipes=[zr.pipes,qr];break;default:zr.pipes.push(qr)}zr.pipesCount+=1,pr("pipe count=%d opts=%j",zr.pipesCount,$r);var Gr=(!$r||$r.end!==!1)&&qr!==sr.stdout&&qr!==sr.stderr?Xr:dn;function Vr(en,rn){pr("onunpipe"),en===Br&&rn&&rn.hasUnpiped===!1&&(rn.hasUnpiped=!0,pr("cleanup"),qr.removeListener("close",tn),qr.removeListener("finish",an),qr.removeListener("drain",Ur),qr.removeListener("error",Jr),qr.removeListener("unpipe",Vr),Br.removeListener("end",Xr),Br.removeListener("end",dn),Br.removeListener("data",Zr),Fr=!0,!zr.awaitDrain||qr._writableState&&!qr._writableState.needDrain||Ur())}function Xr(){pr("onend"),qr.end()}zr.endEmitted?cr.nextTick(Gr):Br.once("end",Gr),qr.on("unpipe",Vr);var Ur=function(en){return function(){var rn=en._readableState;pr("pipeOnDrain",rn.awaitDrain),rn.awaitDrain&&rn.awaitDrain--,rn.awaitDrain===0&&ur(en,"data")&&(rn.flowing=!0,wr(en))}}(Br);qr.on("drain",Ur);var Fr=!1,Kr=!1;function Zr(en){pr("ondata"),Kr=!1,qr.write(en)!==!1||Kr||((zr.pipesCount===1&&zr.pipes===qr||zr.pipesCount>1&&Mr(zr.pipes,qr)!==-1)&&!Fr&&(pr("false write response, pause",zr.awaitDrain),zr.awaitDrain++,Kr=!0),Br.pause())}function Jr(en){pr("onerror",en),dn(),qr.removeListener("error",Jr),ur(qr,"error")===0&&qr.emit("error",en)}function tn(){qr.removeListener("finish",an),dn()}function an(){pr("onfinish"),qr.removeListener("close",tn),dn()}function dn(){pr("unpipe"),Br.unpipe(qr)}return Br.on("data",Zr),function(en,rn,sn){if(typeof en.prependListener=="function")return en.prependListener(rn,sn);en._events&&en._events[rn]?or(en._events[rn])?en._events[rn].unshift(sn):en._events[rn]=[sn,en._events[rn]]:en.on(rn,sn)}(qr,"error",Jr),qr.once("close",tn),qr.once("finish",an),qr.emit("pipe",Br),zr.flowing||(pr("pipe resume"),Br.resume()),qr},Er.prototype.unpipe=function(qr){var $r=this._readableState,Br={hasUnpiped:!1};if($r.pipesCount===0)return this;if($r.pipesCount===1)return qr&&qr!==$r.pipes||(qr||(qr=$r.pipes),$r.pipes=null,$r.pipesCount=0,$r.flowing=!1,qr&&qr.emit("unpipe",this,Br)),this;if(!qr){var zr=$r.pipes,Gr=$r.pipesCount;$r.pipes=null,$r.pipesCount=0,$r.flowing=!1;for(var Vr=0;Vr<Gr;Vr++)zr[Vr].emit("unpipe",this,{hasUnpiped:!1});return this}var Xr=Mr($r.pipes,qr);return Xr===-1||($r.pipes.splice(Xr,1),$r.pipesCount-=1,$r.pipesCount===1&&($r.pipes=$r.pipes[0]),qr.emit("unpipe",this,Br)),this},Er.prototype.on=function(qr,$r){var Br=hr.prototype.on.call(this,qr,$r);if(qr==="data")this._readableState.flowing!==!1&&this.resume();else if(qr==="readable"){var zr=this._readableState;zr.endEmitted||zr.readableListening||(zr.readableListening=zr.needReadable=!0,zr.emittedReadable=!1,zr.reading?zr.length&&Dr(this):cr.nextTick(Lr,this))}return Br},Er.prototype.addListener=Er.prototype.on,Er.prototype.resume=function(){var qr=this._readableState;return qr.flowing||(pr("resume"),qr.flowing=!0,function($r,Br){Br.resumeScheduled||(Br.resumeScheduled=!0,cr.nextTick(Cr,$r,Br))}(this,qr)),this},Er.prototype.pause=function(){return pr("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(pr("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Er.prototype.wrap=function(qr){var $r=this,Br=this._readableState,zr=!1;for(var Gr in qr.on("end",function(){if(pr("wrapped end"),Br.decoder&&!Br.ended){var Xr=Br.decoder.end();Xr&&Xr.length&&$r.push(Xr)}$r.push(null)}),qr.on("data",function(Xr){pr("wrapped data"),Br.decoder&&(Xr=Br.decoder.write(Xr)),Br.objectMode&&Xr==null||(Br.objectMode||Xr&&Xr.length)&&($r.push(Xr)||(zr=!0,qr.pause()))}),qr)this[Gr]===void 0&&typeof qr[Gr]=="function"&&(this[Gr]=function(Xr){return function(){return qr[Xr].apply(qr,arguments)}}(Gr));for(var Vr=0;Vr<vr.length;Vr++)qr.on(vr[Vr],this.emit.bind(this,vr[Vr]));return this._read=function(Xr){pr("wrapped _read",Xr),zr&&(zr=!1,qr.resume())},this},Object.defineProperty(Er.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Er._fromList=Pr}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(rr,nr,ir){nr.exports=lr;var sr=rr("./_stream_duplex"),ar=Object.create(rr("core-util-is"));function cr(hr,dr){var fr=this._transformState;fr.transforming=!1;var gr=fr.writecb;if(!gr)return this.emit("error",new Error("write callback called multiple times"));fr.writechunk=null,fr.writecb=null,dr!=null&&this.push(dr),gr(hr);var br=this._readableState;br.reading=!1,(br.needReadable||br.length<br.highWaterMark)&&this._read(br.highWaterMark)}function lr(hr){if(!(this instanceof lr))return new lr(hr);sr.call(this,hr),this._transformState={afterTransform:cr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,hr&&(typeof hr.transform=="function"&&(this._transform=hr.transform),typeof hr.flush=="function"&&(this._flush=hr.flush)),this.on("prefinish",or)}function or(){var hr=this;typeof this._flush=="function"?this._flush(function(dr,fr){ur(hr,dr,fr)}):ur(this,null,null)}function ur(hr,dr,fr){if(dr)return hr.emit("error",dr);if(fr!=null&&hr.push(fr),hr._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(hr._transformState.transforming)throw new Error("Calling transform done when still transforming");return hr.push(null)}ar.inherits=rr("inherits"),ar.inherits(lr,sr),lr.prototype.push=function(hr,dr){return this._transformState.needTransform=!1,sr.prototype.push.call(this,hr,dr)},lr.prototype._transform=function(hr,dr,fr){throw new Error("_transform() is not implemented")},lr.prototype._write=function(hr,dr,fr){var gr=this._transformState;if(gr.writecb=fr,gr.writechunk=hr,gr.writeencoding=dr,!gr.transforming){var br=this._readableState;(gr.needTransform||br.needReadable||br.length<br.highWaterMark)&&this._read(br.highWaterMark)}},lr.prototype._read=function(hr){var dr=this._transformState;dr.writechunk!==null&&dr.writecb&&!dr.transforming?(dr.transforming=!0,this._transform(dr.writechunk,dr.writeencoding,dr.afterTransform)):dr.needTransform=!0},lr.prototype._destroy=function(hr,dr){var fr=this;sr.prototype._destroy.call(this,hr,function(gr){dr(gr),fr.emit("close")})}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(rr,nr,ir){(function(sr,ar,cr){(function(){var lr=rr("process-nextick-args");function or(Or){var jr=this;this.next=null,this.entry=null,this.finish=function(){(function(Lr,Cr,wr){var Pr=Lr.entry;for(Lr.entry=null;Pr;){var Ar=Pr.callback;Cr.pendingcb--,Ar(wr),Pr=Pr.next}Cr.corkedRequestsFree.next=Lr})(jr,Or)}}nr.exports=_r;var ur,hr=!sr.browser&&["v0.10","v0.9."].indexOf(sr.version.slice(0,5))>-1?cr:lr.nextTick;_r.WritableState=vr;var dr=Object.create(rr("core-util-is"));dr.inherits=rr("inherits");var fr={deprecate:rr("util-deprecate")},gr=rr("./internal/streams/stream"),br=rr("safe-buffer").Buffer,pr=(ar!==void 0?ar:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},mr,yr=rr("./internal/streams/destroy");function xr(){}function vr(Or,jr){ur=ur||rr("./_stream_duplex"),Or=Or||{};var Lr=jr instanceof ur;this.objectMode=!!Or.objectMode,Lr&&(this.objectMode=this.objectMode||!!Or.writableObjectMode);var Cr=Or.highWaterMark,wr=Or.writableHighWaterMark,Pr=this.objectMode?16:16384;this.highWaterMark=Cr||Cr===0?Cr:Lr&&(wr||wr===0)?wr:Pr,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ar=Or.decodeStrings===!1;this.decodeStrings=!Ar,this.defaultEncoding=Or.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Sr){(function(Mr,qr){var $r=Mr._writableState,Br=$r.sync,zr=$r.writecb;if(function(Vr){Vr.writing=!1,Vr.writecb=null,Vr.length-=Vr.writelen,Vr.writelen=0}($r),qr)(function(Vr,Xr,Ur,Fr,Kr){--Xr.pendingcb,Ur?(lr.nextTick(Kr,Fr),lr.nextTick(Ir,Vr,Xr),Vr._writableState.errorEmitted=!0,Vr.emit("error",Fr)):(Kr(Fr),Vr._writableState.errorEmitted=!0,Vr.emit("error",Fr),Ir(Vr,Xr))})(Mr,$r,Br,qr,zr);else{var Gr=Nr($r);Gr||$r.corked||$r.bufferProcessing||!$r.bufferedRequest||Rr(Mr,$r),Br?hr(Tr,Mr,$r,Gr,zr):Tr(Mr,$r,Gr,zr)}})(jr,Sr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new or(this)}function _r(Or){if(ur=ur||rr("./_stream_duplex"),!(mr.call(_r,this)||this instanceof ur))return new _r(Or);this._writableState=new vr(Or,this),this.writable=!0,Or&&(typeof Or.write=="function"&&(this._write=Or.write),typeof Or.writev=="function"&&(this._writev=Or.writev),typeof Or.destroy=="function"&&(this._destroy=Or.destroy),typeof Or.final=="function"&&(this._final=Or.final)),gr.call(this)}function Er(Or,jr,Lr,Cr,wr,Pr,Ar){jr.writelen=Cr,jr.writecb=Ar,jr.writing=!0,jr.sync=!0,Lr?Or._writev(wr,jr.onwrite):Or._write(wr,Pr,jr.onwrite),jr.sync=!1}function Tr(Or,jr,Lr,Cr){Lr||function(wr,Pr){Pr.length===0&&Pr.needDrain&&(Pr.needDrain=!1,wr.emit("drain"))}(Or,jr),jr.pendingcb--,Cr(),Ir(Or,jr)}function Rr(Or,jr){jr.bufferProcessing=!0;var Lr=jr.bufferedRequest;if(Or._writev&&Lr&&Lr.next){var Cr=jr.bufferedRequestCount,wr=new Array(Cr),Pr=jr.corkedRequestsFree;Pr.entry=Lr;for(var Ar=0,Sr=!0;Lr;)wr[Ar]=Lr,Lr.isBuf||(Sr=!1),Lr=Lr.next,Ar+=1;wr.allBuffers=Sr,Er(Or,jr,!0,jr.length,wr,"",Pr.finish),jr.pendingcb++,jr.lastBufferedRequest=null,Pr.next?(jr.corkedRequestsFree=Pr.next,Pr.next=null):jr.corkedRequestsFree=new or(jr),jr.bufferedRequestCount=0}else{for(;Lr;){var Mr=Lr.chunk,qr=Lr.encoding,$r=Lr.callback;if(Er(Or,jr,!1,jr.objectMode?1:Mr.length,Mr,qr,$r),Lr=Lr.next,jr.bufferedRequestCount--,jr.writing)break}Lr===null&&(jr.lastBufferedRequest=null)}jr.bufferedRequest=Lr,jr.bufferProcessing=!1}function Nr(Or){return Or.ending&&Or.length===0&&Or.bufferedRequest===null&&!Or.finished&&!Or.writing}function Dr(Or,jr){Or._final(function(Lr){jr.pendingcb--,Lr&&Or.emit("error",Lr),jr.prefinished=!0,Or.emit("prefinish"),Ir(Or,jr)})}function Ir(Or,jr){var Lr=Nr(jr);return Lr&&(function(Cr,wr){wr.prefinished||wr.finalCalled||(typeof Cr._final=="function"?(wr.pendingcb++,wr.finalCalled=!0,lr.nextTick(Dr,Cr,wr)):(wr.prefinished=!0,Cr.emit("prefinish")))}(Or,jr),jr.pendingcb===0&&(jr.finished=!0,Or.emit("finish"))),Lr}dr.inherits(_r,gr),vr.prototype.getBuffer=function(){for(var Or=this.bufferedRequest,jr=[];Or;)jr.push(Or),Or=Or.next;return jr},function(){try{Object.defineProperty(vr.prototype,"buffer",{get:fr.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(mr=Function.prototype[Symbol.hasInstance],Object.defineProperty(_r,Symbol.hasInstance,{value:function(Or){return!!mr.call(this,Or)||this===_r&&Or&&Or._writableState instanceof vr}})):mr=function(Or){return Or instanceof this},_r.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},_r.prototype.write=function(Or,jr,Lr){var Cr,wr=this._writableState,Pr=!1,Ar=!wr.objectMode&&(Cr=Or,br.isBuffer(Cr)||Cr instanceof pr);return Ar&&!br.isBuffer(Or)&&(Or=function(Sr){return br.from(Sr)}(Or)),typeof jr=="function"&&(Lr=jr,jr=null),Ar?jr="buffer":jr||(jr=wr.defaultEncoding),typeof Lr!="function"&&(Lr=xr),wr.ended?function(Sr,Mr){var qr=new Error("write after end");Sr.emit("error",qr),lr.nextTick(Mr,qr)}(this,Lr):(Ar||function(Sr,Mr,qr,$r){var Br=!0,zr=!1;return qr===null?zr=new TypeError("May not write null values to stream"):typeof qr=="string"||qr===void 0||Mr.objectMode||(zr=new TypeError("Invalid non-string/buffer chunk")),zr&&(Sr.emit("error",zr),lr.nextTick($r,zr),Br=!1),Br}(this,wr,Or,Lr))&&(wr.pendingcb++,Pr=function(Sr,Mr,qr,$r,Br,zr){if(!qr){var Gr=function(Fr,Kr,Zr){return Fr.objectMode||Fr.decodeStrings===!1||typeof Kr!="string"||(Kr=br.from(Kr,Zr)),Kr}(Mr,$r,Br);$r!==Gr&&(qr=!0,Br="buffer",$r=Gr)}var Vr=Mr.objectMode?1:$r.length;Mr.length+=Vr;var Xr=Mr.length<Mr.highWaterMark;if(Xr||(Mr.needDrain=!0),Mr.writing||Mr.corked){var Ur=Mr.lastBufferedRequest;Mr.lastBufferedRequest={chunk:$r,encoding:Br,isBuf:qr,callback:zr,next:null},Ur?Ur.next=Mr.lastBufferedRequest:Mr.bufferedRequest=Mr.lastBufferedRequest,Mr.bufferedRequestCount+=1}else Er(Sr,Mr,!1,Vr,$r,Br,zr);return Xr}(this,wr,Ar,Or,jr,Lr)),Pr},_r.prototype.cork=function(){this._writableState.corked++},_r.prototype.uncork=function(){var Or=this._writableState;Or.corked&&(Or.corked--,Or.writing||Or.corked||Or.bufferProcessing||!Or.bufferedRequest||Rr(this,Or))},_r.prototype.setDefaultEncoding=function(Or){if(typeof Or=="string"&&(Or=Or.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Or+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+Or);return this._writableState.defaultEncoding=Or,this},Object.defineProperty(_r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),_r.prototype._write=function(Or,jr,Lr){Lr(new Error("_write() is not implemented"))},_r.prototype._writev=null,_r.prototype.end=function(Or,jr,Lr){var Cr=this._writableState;typeof Or=="function"?(Lr=Or,Or=null,jr=null):typeof jr=="function"&&(Lr=jr,jr=null),Or!=null&&this.write(Or,jr),Cr.corked&&(Cr.corked=1,this.uncork()),Cr.ending||function(wr,Pr,Ar){Pr.ending=!0,Ir(wr,Pr),Ar&&(Pr.finished?lr.nextTick(Ar):wr.once("finish",Ar)),Pr.ended=!0,wr.writable=!1}(this,Cr,Lr)},Object.defineProperty(_r.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Or){this._writableState&&(this._writableState.destroyed=Or)}}),_r.prototype.destroy=yr.destroy,_r.prototype._undestroy=yr.undestroy,_r.prototype._destroy=function(Or,jr){this.end(),jr(Or)}}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{},rr("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(rr,nr,ir){var sr=rr("safe-buffer").Buffer,ar=rr("util");nr.exports=function(){function cr(){(function(lr,or){if(!(lr instanceof or))throw new TypeError("Cannot call a class as a function")})(this,cr),this.head=null,this.tail=null,this.length=0}return cr.prototype.push=function(lr){var or={data:lr,next:null};this.length>0?this.tail.next=or:this.head=or,this.tail=or,++this.length},cr.prototype.unshift=function(lr){var or={data:lr,next:this.head};this.length===0&&(this.tail=or),this.head=or,++this.length},cr.prototype.shift=function(){if(this.length!==0){var lr=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,lr}},cr.prototype.clear=function(){this.head=this.tail=null,this.length=0},cr.prototype.join=function(lr){if(this.length===0)return"";for(var or=this.head,ur=""+or.data;or=or.next;)ur+=lr+or.data;return ur},cr.prototype.concat=function(lr){if(this.length===0)return sr.alloc(0);for(var or,ur,hr,dr=sr.allocUnsafe(lr>>>0),fr=this.head,gr=0;fr;)or=fr.data,ur=dr,hr=gr,or.copy(ur,hr),gr+=fr.data.length,fr=fr.next;return dr},cr}(),ar&&ar.inspect&&ar.inspect.custom&&(nr.exports.prototype[ar.inspect.custom]=function(){var cr=ar.inspect({length:this.length});return this.constructor.name+" "+cr})},{"safe-buffer":520,util:188}],514:[function(rr,nr,ir){var sr=rr("process-nextick-args");function ar(cr,lr){cr.emit("error",lr)}nr.exports={destroy:function(cr,lr){var or=this,ur=this._readableState&&this._readableState.destroyed,hr=this._writableState&&this._writableState.destroyed;return ur||hr?(lr?lr(cr):cr&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,sr.nextTick(ar,this,cr)):sr.nextTick(ar,this,cr)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(cr||null,function(dr){!lr&&dr?or._writableState?or._writableState.errorEmitted||(or._writableState.errorEmitted=!0,sr.nextTick(ar,or,dr)):sr.nextTick(ar,or,dr):lr&&lr(dr)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(rr,nr,ir){arguments[4][490][0].apply(ir,arguments)},{dup:490,events:422}],516:[function(rr,nr,ir){nr.exports=rr("./readable").PassThrough},{"./readable":517}],517:[function(rr,nr,ir){(ir=nr.exports=rr("./lib/_stream_readable.js")).Stream=ir,ir.Readable=ir,ir.Writable=rr("./lib/_stream_writable.js"),ir.Duplex=rr("./lib/_stream_duplex.js"),ir.Transform=rr("./lib/_stream_transform.js"),ir.PassThrough=rr("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(rr,nr,ir){nr.exports=rr("./readable").Transform},{"./readable":517}],519:[function(rr,nr,ir){nr.exports=rr("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(rr,nr,ir){arguments[4][217][0].apply(ir,arguments)},{buffer:220,dup:217}],521:[function(rr,nr,ir){arguments[4][218][0].apply(ir,arguments)},{dup:218,"safe-buffer":520}],522:[function(rr,nr,ir){arguments[4][218][0].apply(ir,arguments)},{dup:218,"safe-buffer":494}],523:[function(rr,nr,ir){(function(sr,ar){(function(){var cr=rr("process/browser.js").nextTick,lr=Function.prototype.apply,or=Array.prototype.slice,ur={},hr=0;function dr(fr,gr){this._id=fr,this._clearFn=gr}ir.setTimeout=function(){return new dr(lr.call(setTimeout,window,arguments),clearTimeout)},ir.setInterval=function(){return new dr(lr.call(setInterval,window,arguments),clearInterval)},ir.clearTimeout=ir.clearInterval=function(fr){fr.close()},dr.prototype.unref=dr.prototype.ref=function(){},dr.prototype.close=function(){this._clearFn.call(window,this._id)},ir.enroll=function(fr,gr){clearTimeout(fr._idleTimeoutId),fr._idleTimeout=gr},ir.unenroll=function(fr){clearTimeout(fr._idleTimeoutId),fr._idleTimeout=-1},ir._unrefActive=ir.active=function(fr){clearTimeout(fr._idleTimeoutId);var gr=fr._idleTimeout;gr>=0&&(fr._idleTimeoutId=setTimeout(function(){fr._onTimeout&&fr._onTimeout()},gr))},ir.setImmediate=typeof sr=="function"?sr:function(fr){var gr=hr++,br=!(arguments.length<2)&&or.call(arguments,1);return ur[gr]=!0,cr(function(){ur[gr]&&(br?fr.apply(null,br):fr.call(null),ir.clearImmediate(gr))}),gr},ir.clearImmediate=typeof ar=="function"?ar:function(fr){delete ur[fr]}}).call(this)}).call(this,rr("timers").setImmediate,rr("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(rr,nr,ir){(function(sr){(function(){function ar(cr){try{if(!sr.localStorage)return!1}catch{return!1}var lr=sr.localStorage[cr];return lr!=null&&String(lr).toLowerCase()==="true"}nr.exports=function(cr,lr){if(ar("noDeprecation"))return cr;var or=!1;return function(){if(!or){if(ar("throwDeprecation"))throw new Error(lr);ar("traceDeprecation")?console.trace(lr):console.warn(lr),or=!0}return cr.apply(this,arguments)}}}).call(this)}).call(this,typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(rr,nr,ir){typeof Object.create=="function"?nr.exports=function(sr,ar){sr.super_=ar,sr.prototype=Object.create(ar.prototype,{constructor:{value:sr,enumerable:!1,writable:!0,configurable:!0}})}:nr.exports=function(sr,ar){sr.super_=ar;var cr=function(){};cr.prototype=ar.prototype,sr.prototype=new cr,sr.prototype.constructor=sr}},{}],526:[function(rr,nr,ir){nr.exports=function(sr){return sr&&typeof sr=="object"&&typeof sr.copy=="function"&&typeof sr.fill=="function"&&typeof sr.readUInt8=="function"}},{}],527:[function(rr,nr,ir){(function(sr,ar){(function(){var cr=/%[sdj%]/g;ir.format=function(wr){if(!vr(wr)){for(var Pr=[],Ar=0;Ar<arguments.length;Ar++)Pr.push(ur(arguments[Ar]));return Pr.join(" ")}Ar=1;for(var Sr=arguments,Mr=Sr.length,qr=String(wr).replace(cr,function(Br){if(Br==="%%")return"%";if(Ar>=Mr)return Br;switch(Br){case"%s":return String(Sr[Ar++]);case"%d":return Number(Sr[Ar++]);case"%j":try{return JSON.stringify(Sr[Ar++])}catch{return"[Circular]"}default:return Br}}),$r=Sr[Ar];Ar<Mr;$r=Sr[++Ar])yr($r)||!Tr($r)?qr+=" "+$r:qr+=" "+ur($r);return qr},ir.deprecate=function(wr,Pr){if(_r(ar.process))return function(){return ir.deprecate(wr,Pr).apply(this,arguments)};if(sr.noDeprecation===!0)return wr;var Ar=!1;return function(){if(!Ar){if(sr.throwDeprecation)throw new Error(Pr);sr.traceDeprecation?console.trace(Pr):console.error(Pr),Ar=!0}return wr.apply(this,arguments)}};var lr,or={};function ur(wr,Pr){var Ar={seen:[],stylize:dr};return arguments.length>=3&&(Ar.depth=arguments[2]),arguments.length>=4&&(Ar.colors=arguments[3]),mr(Pr)?Ar.showHidden=Pr:Pr&&ir._extend(Ar,Pr),_r(Ar.showHidden)&&(Ar.showHidden=!1),_r(Ar.depth)&&(Ar.depth=2),_r(Ar.colors)&&(Ar.colors=!1),_r(Ar.customInspect)&&(Ar.customInspect=!0),Ar.colors&&(Ar.stylize=hr),fr(Ar,wr,Ar.depth)}function hr(wr,Pr){var Ar=ur.styles[Pr];return Ar?"\x1B["+ur.colors[Ar][0]+"m"+wr+"\x1B["+ur.colors[Ar][1]+"m":wr}function dr(wr,Pr){return wr}function fr(wr,Pr,Ar){if(wr.customInspect&&Pr&&Dr(Pr.inspect)&&Pr.inspect!==ir.inspect&&(!Pr.constructor||Pr.constructor.prototype!==Pr)){var Sr=Pr.inspect(Ar,wr);return vr(Sr)||(Sr=fr(wr,Sr,Ar)),Sr}var Mr=function(Ur,Fr){if(_r(Fr))return Ur.stylize("undefined","undefined");if(vr(Fr)){var Kr="'"+JSON.stringify(Fr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Ur.stylize(Kr,"string")}if(xr(Fr))return Ur.stylize(""+Fr,"number");if(mr(Fr))return Ur.stylize(""+Fr,"boolean");if(yr(Fr))return Ur.stylize("null","null")}(wr,Pr);if(Mr)return Mr;var qr=Object.keys(Pr),$r=function(Ur){var Fr={};return Ur.forEach(function(Kr,Zr){Fr[Kr]=!0}),Fr}(qr);if(wr.showHidden&&(qr=Object.getOwnPropertyNames(Pr)),Nr(Pr)&&(qr.indexOf("message")>=0||qr.indexOf("description")>=0))return gr(Pr);if(qr.length===0){if(Dr(Pr)){var Br=Pr.name?": "+Pr.name:"";return wr.stylize("[Function"+Br+"]","special")}if(Er(Pr))return wr.stylize(RegExp.prototype.toString.call(Pr),"regexp");if(Rr(Pr))return wr.stylize(Date.prototype.toString.call(Pr),"date");if(Nr(Pr))return gr(Pr)}var zr,Gr="",Vr=!1,Xr=["{","}"];return pr(Pr)&&(Vr=!0,Xr=["[","]"]),Dr(Pr)&&(Gr=" [Function"+(Pr.name?": "+Pr.name:"")+"]"),Er(Pr)&&(Gr=" "+RegExp.prototype.toString.call(Pr)),Rr(Pr)&&(Gr=" "+Date.prototype.toUTCString.call(Pr)),Nr(Pr)&&(Gr=" "+gr(Pr)),qr.length!==0||Vr&&Pr.length!=0?Ar<0?Er(Pr)?wr.stylize(RegExp.prototype.toString.call(Pr),"regexp"):wr.stylize("[Object]","special"):(wr.seen.push(Pr),zr=Vr?function(Ur,Fr,Kr,Zr,Jr){for(var tn=[],an=0,dn=Fr.length;an<dn;++an)Cr(Fr,String(an))?tn.push(br(Ur,Fr,Kr,Zr,String(an),!0)):tn.push("");return Jr.forEach(function(en){en.match(/^\d+$/)||tn.push(br(Ur,Fr,Kr,Zr,en,!0))}),tn}(wr,Pr,Ar,$r,qr):qr.map(function(Ur){return br(wr,Pr,Ar,$r,Ur,Vr)}),wr.seen.pop(),function(Ur,Fr,Kr){return Ur.reduce(function(Zr,Jr){return Jr.indexOf(`
`)>=0,Zr+Jr.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?Kr[0]+(Fr===""?"":Fr+`
 `)+" "+Ur.join(`,
  `)+" "+Kr[1]:Kr[0]+Fr+" "+Ur.join(", ")+" "+Kr[1]}(zr,Gr,Xr)):Xr[0]+Gr+Xr[1]}function gr(wr){return"["+Error.prototype.toString.call(wr)+"]"}function br(wr,Pr,Ar,Sr,Mr,qr){var $r,Br,zr;if((zr=Object.getOwnPropertyDescriptor(Pr,Mr)||{value:Pr[Mr]}).get?Br=zr.set?wr.stylize("[Getter/Setter]","special"):wr.stylize("[Getter]","special"):zr.set&&(Br=wr.stylize("[Setter]","special")),Cr(Sr,Mr)||($r="["+Mr+"]"),Br||(wr.seen.indexOf(zr.value)<0?(Br=yr(Ar)?fr(wr,zr.value,null):fr(wr,zr.value,Ar-1)).indexOf(`
`)>-1&&(Br=qr?Br.split(`
`).map(function(Gr){return"  "+Gr}).join(`
`).substr(2):`
`+Br.split(`
`).map(function(Gr){return"   "+Gr}).join(`
`)):Br=wr.stylize("[Circular]","special")),_r($r)){if(qr&&Mr.match(/^\d+$/))return Br;($r=JSON.stringify(""+Mr)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($r=$r.substr(1,$r.length-2),$r=wr.stylize($r,"name")):($r=$r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),$r=wr.stylize($r,"string"))}return $r+": "+Br}function pr(wr){return Array.isArray(wr)}function mr(wr){return typeof wr=="boolean"}function yr(wr){return wr===null}function xr(wr){return typeof wr=="number"}function vr(wr){return typeof wr=="string"}function _r(wr){return wr===void 0}function Er(wr){return Tr(wr)&&Ir(wr)==="[object RegExp]"}function Tr(wr){return typeof wr=="object"&&wr!==null}function Rr(wr){return Tr(wr)&&Ir(wr)==="[object Date]"}function Nr(wr){return Tr(wr)&&(Ir(wr)==="[object Error]"||wr instanceof Error)}function Dr(wr){return typeof wr=="function"}function Ir(wr){return Object.prototype.toString.call(wr)}function Or(wr){return wr<10?"0"+wr.toString(10):wr.toString(10)}ir.debuglog=function(wr){if(_r(lr)&&(lr=sr.env.NODE_DEBUG||""),wr=wr.toUpperCase(),!or[wr])if(new RegExp("\\b"+wr+"\\b","i").test(lr)){var Pr=sr.pid;or[wr]=function(){var Ar=ir.format.apply(ir,arguments);console.error("%s %d: %s",wr,Pr,Ar)}}else or[wr]=function(){};return or[wr]},ir.inspect=ur,ur.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ur.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ir.isArray=pr,ir.isBoolean=mr,ir.isNull=yr,ir.isNullOrUndefined=function(wr){return wr==null},ir.isNumber=xr,ir.isString=vr,ir.isSymbol=function(wr){return typeof wr=="symbol"},ir.isUndefined=_r,ir.isRegExp=Er,ir.isObject=Tr,ir.isDate=Rr,ir.isError=Nr,ir.isFunction=Dr,ir.isPrimitive=function(wr){return wr===null||typeof wr=="boolean"||typeof wr=="number"||typeof wr=="string"||typeof wr=="symbol"||wr===void 0},ir.isBuffer=rr("./support/isBuffer");var jr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Lr(){var wr=new Date,Pr=[Or(wr.getHours()),Or(wr.getMinutes()),Or(wr.getSeconds())].join(":");return[wr.getDate(),jr[wr.getMonth()],Pr].join(" ")}function Cr(wr,Pr){return Object.prototype.hasOwnProperty.call(wr,Pr)}ir.log=function(){console.log("%s - %s",Lr(),ir.format.apply(ir,arguments))},ir.inherits=rr("inherits"),ir._extend=function(wr,Pr){if(!Pr||!Tr(Pr))return wr;for(var Ar=Object.keys(Pr),Sr=Ar.length;Sr--;)wr[Ar[Sr]]=Pr[Ar[Sr]];return wr}}).call(this)}).call(this,rr("_process"),typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),Object.defineProperty(ir,"v1",{enumerable:!0,get:function(){return sr.default}}),Object.defineProperty(ir,"v3",{enumerable:!0,get:function(){return ar.default}}),Object.defineProperty(ir,"v4",{enumerable:!0,get:function(){return cr.default}}),Object.defineProperty(ir,"v5",{enumerable:!0,get:function(){return lr.default}}),Object.defineProperty(ir,"NIL",{enumerable:!0,get:function(){return or.default}}),Object.defineProperty(ir,"version",{enumerable:!0,get:function(){return ur.default}}),Object.defineProperty(ir,"validate",{enumerable:!0,get:function(){return hr.default}}),Object.defineProperty(ir,"stringify",{enumerable:!0,get:function(){return dr.default}}),Object.defineProperty(ir,"parse",{enumerable:!0,get:function(){return fr.default}});var sr=gr(rr("./v1.js")),ar=gr(rr("./v3.js")),cr=gr(rr("./v4.js")),lr=gr(rr("./v5.js")),or=gr(rr("./nil.js")),ur=gr(rr("./version.js")),hr=gr(rr("./validate.js")),dr=gr(rr("./stringify.js")),fr=gr(rr("./parse.js"));function gr(br){return br&&br.__esModule?br:{default:br}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(rr,nr,ir){function sr(fr){return 14+(fr+64>>>9<<4)+1}function ar(fr,gr){const br=(65535&fr)+(65535&gr);return(fr>>16)+(gr>>16)+(br>>16)<<16|65535&br}function cr(fr,gr,br,pr,mr,yr){return ar((xr=ar(ar(gr,fr),ar(pr,yr)))<<(vr=mr)|xr>>>32-vr,br);var xr,vr}function lr(fr,gr,br,pr,mr,yr,xr){return cr(gr&br|~gr&pr,fr,gr,mr,yr,xr)}function or(fr,gr,br,pr,mr,yr,xr){return cr(gr&pr|br&~pr,fr,gr,mr,yr,xr)}function ur(fr,gr,br,pr,mr,yr,xr){return cr(gr^br^pr,fr,gr,mr,yr,xr)}function hr(fr,gr,br,pr,mr,yr,xr){return cr(br^(gr|~pr),fr,gr,mr,yr,xr)}Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var dr=function(fr){if(typeof fr=="string"){const gr=unescape(encodeURIComponent(fr));fr=new Uint8Array(gr.length);for(let br=0;br<gr.length;++br)fr[br]=gr.charCodeAt(br)}return function(gr){const br=[],pr=32*gr.length;for(let mr=0;mr<pr;mr+=8){const yr=gr[mr>>5]>>>mr%32&255,xr=parseInt("0123456789abcdef".charAt(yr>>>4&15)+"0123456789abcdef".charAt(15&yr),16);br.push(xr)}return br}(function(gr,br){gr[br>>5]|=128<<br%32,gr[sr(br)-1]=br;let pr=1732584193,mr=-271733879,yr=-1732584194,xr=271733878;for(let vr=0;vr<gr.length;vr+=16){const _r=pr,Er=mr,Tr=yr,Rr=xr;pr=lr(pr,mr,yr,xr,gr[vr],7,-680876936),xr=lr(xr,pr,mr,yr,gr[vr+1],12,-389564586),yr=lr(yr,xr,pr,mr,gr[vr+2],17,606105819),mr=lr(mr,yr,xr,pr,gr[vr+3],22,-1044525330),pr=lr(pr,mr,yr,xr,gr[vr+4],7,-176418897),xr=lr(xr,pr,mr,yr,gr[vr+5],12,1200080426),yr=lr(yr,xr,pr,mr,gr[vr+6],17,-1473231341),mr=lr(mr,yr,xr,pr,gr[vr+7],22,-45705983),pr=lr(pr,mr,yr,xr,gr[vr+8],7,1770035416),xr=lr(xr,pr,mr,yr,gr[vr+9],12,-1958414417),yr=lr(yr,xr,pr,mr,gr[vr+10],17,-42063),mr=lr(mr,yr,xr,pr,gr[vr+11],22,-1990404162),pr=lr(pr,mr,yr,xr,gr[vr+12],7,1804603682),xr=lr(xr,pr,mr,yr,gr[vr+13],12,-40341101),yr=lr(yr,xr,pr,mr,gr[vr+14],17,-1502002290),mr=lr(mr,yr,xr,pr,gr[vr+15],22,1236535329),pr=or(pr,mr,yr,xr,gr[vr+1],5,-165796510),xr=or(xr,pr,mr,yr,gr[vr+6],9,-1069501632),yr=or(yr,xr,pr,mr,gr[vr+11],14,643717713),mr=or(mr,yr,xr,pr,gr[vr],20,-373897302),pr=or(pr,mr,yr,xr,gr[vr+5],5,-701558691),xr=or(xr,pr,mr,yr,gr[vr+10],9,38016083),yr=or(yr,xr,pr,mr,gr[vr+15],14,-660478335),mr=or(mr,yr,xr,pr,gr[vr+4],20,-405537848),pr=or(pr,mr,yr,xr,gr[vr+9],5,568446438),xr=or(xr,pr,mr,yr,gr[vr+14],9,-1019803690),yr=or(yr,xr,pr,mr,gr[vr+3],14,-187363961),mr=or(mr,yr,xr,pr,gr[vr+8],20,1163531501),pr=or(pr,mr,yr,xr,gr[vr+13],5,-1444681467),xr=or(xr,pr,mr,yr,gr[vr+2],9,-51403784),yr=or(yr,xr,pr,mr,gr[vr+7],14,1735328473),mr=or(mr,yr,xr,pr,gr[vr+12],20,-1926607734),pr=ur(pr,mr,yr,xr,gr[vr+5],4,-378558),xr=ur(xr,pr,mr,yr,gr[vr+8],11,-2022574463),yr=ur(yr,xr,pr,mr,gr[vr+11],16,1839030562),mr=ur(mr,yr,xr,pr,gr[vr+14],23,-35309556),pr=ur(pr,mr,yr,xr,gr[vr+1],4,-1530992060),xr=ur(xr,pr,mr,yr,gr[vr+4],11,1272893353),yr=ur(yr,xr,pr,mr,gr[vr+7],16,-155497632),mr=ur(mr,yr,xr,pr,gr[vr+10],23,-1094730640),pr=ur(pr,mr,yr,xr,gr[vr+13],4,681279174),xr=ur(xr,pr,mr,yr,gr[vr],11,-358537222),yr=ur(yr,xr,pr,mr,gr[vr+3],16,-722521979),mr=ur(mr,yr,xr,pr,gr[vr+6],23,76029189),pr=ur(pr,mr,yr,xr,gr[vr+9],4,-640364487),xr=ur(xr,pr,mr,yr,gr[vr+12],11,-421815835),yr=ur(yr,xr,pr,mr,gr[vr+15],16,530742520),mr=ur(mr,yr,xr,pr,gr[vr+2],23,-995338651),pr=hr(pr,mr,yr,xr,gr[vr],6,-198630844),xr=hr(xr,pr,mr,yr,gr[vr+7],10,1126891415),yr=hr(yr,xr,pr,mr,gr[vr+14],15,-1416354905),mr=hr(mr,yr,xr,pr,gr[vr+5],21,-57434055),pr=hr(pr,mr,yr,xr,gr[vr+12],6,1700485571),xr=hr(xr,pr,mr,yr,gr[vr+3],10,-1894986606),yr=hr(yr,xr,pr,mr,gr[vr+10],15,-1051523),mr=hr(mr,yr,xr,pr,gr[vr+1],21,-2054922799),pr=hr(pr,mr,yr,xr,gr[vr+8],6,1873313359),xr=hr(xr,pr,mr,yr,gr[vr+15],10,-30611744),yr=hr(yr,xr,pr,mr,gr[vr+6],15,-1560198380),mr=hr(mr,yr,xr,pr,gr[vr+13],21,1309151649),pr=hr(pr,mr,yr,xr,gr[vr+4],6,-145523070),xr=hr(xr,pr,mr,yr,gr[vr+11],10,-1120210379),yr=hr(yr,xr,pr,mr,gr[vr+2],15,718787259),mr=hr(mr,yr,xr,pr,gr[vr+9],21,-343485551),pr=ar(pr,_r),mr=ar(mr,Er),yr=ar(yr,Tr),xr=ar(xr,Rr)}return[pr,mr,yr,xr]}(function(gr){if(gr.length===0)return[];const br=8*gr.length,pr=new Uint32Array(sr(br));for(let mr=0;mr<br;mr+=8)pr[mr>>5]|=(255&gr[mr/8])<<mr%32;return pr}(fr),8*fr.length))};ir.default=dr},{}],530:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0,ir.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr,ar=(sr=rr("./validate.js"))&&sr.__esModule?sr:{default:sr},cr=function(lr){if(!(0,ar.default)(lr))throw TypeError("Invalid UUID");let or;const ur=new Uint8Array(16);return ur[0]=(or=parseInt(lr.slice(0,8),16))>>>24,ur[1]=or>>>16&255,ur[2]=or>>>8&255,ur[3]=255&or,ur[4]=(or=parseInt(lr.slice(9,13),16))>>>8,ur[5]=255&or,ur[6]=(or=parseInt(lr.slice(14,18),16))>>>8,ur[7]=255&or,ur[8]=(or=parseInt(lr.slice(19,23),16))>>>8,ur[9]=255&or,ur[10]=(or=parseInt(lr.slice(24,36),16))/1099511627776&255,ur[11]=or/4294967296&255,ur[12]=or>>>24&255,ur[13]=or>>>16&255,ur[14]=or>>>8&255,ur[15]=255&or,ur};ir.default=cr},{"./validate.js":541}],532:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0,ir.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(rr,nr,ir){let sr;Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=function(){if(!sr&&(sr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sr(ar)};const ar=new Uint8Array(16)},{}],534:[function(rr,nr,ir){function sr(lr,or,ur,hr){switch(lr){case 0:return or&ur^~or&hr;case 1:return or^ur^hr;case 2:return or&ur^or&hr^ur&hr;case 3:return or^ur^hr}}function ar(lr,or){return lr<<or|lr>>>32-or}Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var cr=function(lr){const or=[1518500249,1859775393,2400959708,3395469782],ur=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof lr=="string"){const gr=unescape(encodeURIComponent(lr));lr=[];for(let br=0;br<gr.length;++br)lr.push(gr.charCodeAt(br))}else Array.isArray(lr)||(lr=Array.prototype.slice.call(lr));lr.push(128);const hr=lr.length/4+2,dr=Math.ceil(hr/16),fr=new Array(dr);for(let gr=0;gr<dr;++gr){const br=new Uint32Array(16);for(let pr=0;pr<16;++pr)br[pr]=lr[64*gr+4*pr]<<24|lr[64*gr+4*pr+1]<<16|lr[64*gr+4*pr+2]<<8|lr[64*gr+4*pr+3];fr[gr]=br}fr[dr-1][14]=8*(lr.length-1)/Math.pow(2,32),fr[dr-1][14]=Math.floor(fr[dr-1][14]),fr[dr-1][15]=8*(lr.length-1)&4294967295;for(let gr=0;gr<dr;++gr){const br=new Uint32Array(80);for(let _r=0;_r<16;++_r)br[_r]=fr[gr][_r];for(let _r=16;_r<80;++_r)br[_r]=ar(br[_r-3]^br[_r-8]^br[_r-14]^br[_r-16],1);let pr=ur[0],mr=ur[1],yr=ur[2],xr=ur[3],vr=ur[4];for(let _r=0;_r<80;++_r){const Er=Math.floor(_r/20),Tr=ar(pr,5)+sr(Er,mr,yr,xr)+vr+or[Er]+br[_r]>>>0;vr=xr,xr=yr,yr=ar(mr,30)>>>0,mr=pr,pr=Tr}ur[0]=ur[0]+pr>>>0,ur[1]=ur[1]+mr>>>0,ur[2]=ur[2]+yr>>>0,ur[3]=ur[3]+xr>>>0,ur[4]=ur[4]+vr>>>0}return[ur[0]>>24&255,ur[0]>>16&255,ur[0]>>8&255,255&ur[0],ur[1]>>24&255,ur[1]>>16&255,ur[1]>>8&255,255&ur[1],ur[2]>>24&255,ur[2]>>16&255,ur[2]>>8&255,255&ur[2],ur[3]>>24&255,ur[3]>>16&255,ur[3]>>8&255,255&ur[3],ur[4]>>24&255,ur[4]>>16&255,ur[4]>>8&255,255&ur[4]]};ir.default=cr},{}],535:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr,ar=(sr=rr("./validate.js"))&&sr.__esModule?sr:{default:sr};const cr=[];for(let or=0;or<256;++or)cr.push((or+256).toString(16).substr(1));var lr=function(or){let ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const hr=(cr[or[ur+0]]+cr[or[ur+1]]+cr[or[ur+2]]+cr[or[ur+3]]+"-"+cr[or[ur+4]]+cr[or[ur+5]]+"-"+cr[or[ur+6]]+cr[or[ur+7]]+"-"+cr[or[ur+8]]+cr[or[ur+9]]+"-"+cr[or[ur+10]]+cr[or[ur+11]]+cr[or[ur+12]]+cr[or[ur+13]]+cr[or[ur+14]]+cr[or[ur+15]]).toLowerCase();if(!(0,ar.default)(hr))throw TypeError("Stringified UUID is invalid");return hr};ir.default=lr},{"./validate.js":541}],536:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr=cr(rr("./rng.js")),ar=cr(rr("./stringify.js"));function cr(fr){return fr&&fr.__esModule?fr:{default:fr}}let lr,or,ur=0,hr=0;var dr=function(fr,gr,br){let pr=gr&&br||0;const mr=gr||new Array(16);let yr=(fr=fr||{}).node||lr,xr=fr.clockseq!==void 0?fr.clockseq:or;if(yr==null||xr==null){const Nr=fr.random||(fr.rng||sr.default)();yr==null&&(yr=lr=[1|Nr[0],Nr[1],Nr[2],Nr[3],Nr[4],Nr[5]]),xr==null&&(xr=or=16383&(Nr[6]<<8|Nr[7]))}let vr=fr.msecs!==void 0?fr.msecs:Date.now(),_r=fr.nsecs!==void 0?fr.nsecs:hr+1;const Er=vr-ur+(_r-hr)/1e4;if(Er<0&&fr.clockseq===void 0&&(xr=xr+1&16383),(Er<0||vr>ur)&&fr.nsecs===void 0&&(_r=0),_r>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ur=vr,hr=_r,or=xr,vr+=122192928e5;const Tr=(1e4*(268435455&vr)+_r)%4294967296;mr[pr++]=Tr>>>24&255,mr[pr++]=Tr>>>16&255,mr[pr++]=Tr>>>8&255,mr[pr++]=255&Tr;const Rr=vr/4294967296*1e4&268435455;mr[pr++]=Rr>>>8&255,mr[pr++]=255&Rr,mr[pr++]=Rr>>>24&15|16,mr[pr++]=Rr>>>16&255,mr[pr++]=xr>>>8|128,mr[pr++]=255&xr;for(let Nr=0;Nr<6;++Nr)mr[pr+Nr]=yr[Nr];return gr||(0,ar.default)(mr)};ir.default=dr},{"./rng.js":533,"./stringify.js":535}],537:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr=cr(rr("./v35.js")),ar=cr(rr("./md5.js"));function cr(or){return or&&or.__esModule?or:{default:or}}var lr=(0,sr.default)("v3",48,ar.default);ir.default=lr},{"./md5.js":529,"./v35.js":538}],538:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=function(ur,hr,dr){function fr(gr,br,pr,mr){if(typeof gr=="string"&&(gr=function(xr){xr=unescape(encodeURIComponent(xr));const vr=[];for(let _r=0;_r<xr.length;++_r)vr.push(xr.charCodeAt(_r));return vr}(gr)),typeof br=="string"&&(br=(0,ar.default)(br)),br.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let yr=new Uint8Array(16+gr.length);if(yr.set(br),yr.set(gr,br.length),yr=dr(yr),yr[6]=15&yr[6]|hr,yr[8]=63&yr[8]|128,pr){mr=mr||0;for(let xr=0;xr<16;++xr)pr[mr+xr]=yr[xr];return pr}return(0,sr.default)(yr)}try{fr.name=ur}catch{}return fr.DNS=lr,fr.URL=or,fr},ir.URL=ir.DNS=void 0;var sr=cr(rr("./stringify.js")),ar=cr(rr("./parse.js"));function cr(ur){return ur&&ur.__esModule?ur:{default:ur}}const lr="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ir.DNS=lr;const or="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ir.URL=or},{"./parse.js":531,"./stringify.js":535}],539:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr=cr(rr("./rng.js")),ar=cr(rr("./stringify.js"));function cr(or){return or&&or.__esModule?or:{default:or}}var lr=function(or,ur,hr){const dr=(or=or||{}).random||(or.rng||sr.default)();if(dr[6]=15&dr[6]|64,dr[8]=63&dr[8]|128,ur){hr=hr||0;for(let fr=0;fr<16;++fr)ur[hr+fr]=dr[fr];return ur}return(0,ar.default)(dr)};ir.default=lr},{"./rng.js":533,"./stringify.js":535}],540:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr=cr(rr("./v35.js")),ar=cr(rr("./sha1.js"));function cr(or){return or&&or.__esModule?or:{default:or}}var lr=(0,sr.default)("v5",80,ar.default);ir.default=lr},{"./sha1.js":534,"./v35.js":538}],541:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr,ar=(sr=rr("./regex.js"))&&sr.__esModule?sr:{default:sr},cr=function(lr){return typeof lr=="string"&&ar.default.test(lr)};ir.default=cr},{"./regex.js":532}],542:[function(rr,nr,ir){Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var sr,ar=(sr=rr("./validate.js"))&&sr.__esModule?sr:{default:sr},cr=function(lr){if(!(0,ar.default)(lr))throw TypeError("Invalid UUID");return parseInt(lr.substr(14,1),16)};ir.default=cr},{"./validate.js":541}],543:[function(rr,nr,ir){/**
* Character classes and associated utilities for the 5th edition of XML 1.0.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(ir,"__esModule",{value:!0}),ir.CHAR=`	
\r ---`,ir.S=` 	\r
`,ir.NAME_START_CHAR=":A-Z_a-z-----------",ir.NAME_CHAR="-"+ir.NAME_START_CHAR+".0-9--",ir.CHAR_RE=new RegExp("^["+ir.CHAR+"]$","u"),ir.S_RE=new RegExp("^["+ir.S+"]+$","u"),ir.NAME_START_CHAR_RE=new RegExp("^["+ir.NAME_START_CHAR+"]$","u"),ir.NAME_CHAR_RE=new RegExp("^["+ir.NAME_CHAR+"]$","u"),ir.NAME_RE=new RegExp("^["+ir.NAME_START_CHAR+"]["+ir.NAME_CHAR+"]*$","u"),ir.NMTOKEN_RE=new RegExp("^["+ir.NAME_CHAR+"]+$","u");function sr(ar){return ar>=65&&ar<=90||ar>=97&&ar<=122||ar===58||ar===95||ar===8204||ar===8205||ar>=192&&ar<=214||ar>=216&&ar<=246||ar>=248&&ar<=767||ar>=880&&ar<=893||ar>=895&&ar<=8191||ar>=8304&&ar<=8591||ar>=11264&&ar<=12271||ar>=12289&&ar<=55295||ar>=63744&&ar<=64975||ar>=65008&&ar<=65533||ar>=65536&&ar<=983039}ir.S_LIST=[32,10,13,9],ir.isChar=function(ar){return ar>=32&&ar<=55295||ar===10||ar===13||ar===9||ar>=57344&&ar<=65533||ar>=65536&&ar<=1114111},ir.isS=function(ar){return ar===32||ar===10||ar===13||ar===9},ir.isNameStartChar=sr,ir.isNameChar=function(ar){return sr(ar)||ar>=48&&ar<=57||ar===45||ar===46||ar===183||ar>=768&&ar<=879||ar>=8255&&ar<=8256}},{}],544:[function(rr,nr,ir){/**
* Character classes and associated utilities for the 2nd edition of XML 1.1.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/Object.defineProperty(ir,"__esModule",{value:!0}),ir.CHAR="---",ir.RESTRICTED_CHAR="-\b\v\f---",ir.S=` 	\r
`,ir.NAME_START_CHAR=":A-Z_a-z-----------",ir.NAME_CHAR="-"+ir.NAME_START_CHAR+".0-9--",ir.CHAR_RE=new RegExp("^["+ir.CHAR+"]$","u"),ir.RESTRICTED_CHAR_RE=new RegExp("^["+ir.RESTRICTED_CHAR+"]$","u"),ir.S_RE=new RegExp("^["+ir.S+"]+$","u"),ir.NAME_START_CHAR_RE=new RegExp("^["+ir.NAME_START_CHAR+"]$","u"),ir.NAME_CHAR_RE=new RegExp("^["+ir.NAME_CHAR+"]$","u"),ir.NAME_RE=new RegExp("^["+ir.NAME_START_CHAR+"]["+ir.NAME_CHAR+"]*$","u"),ir.NMTOKEN_RE=new RegExp("^["+ir.NAME_CHAR+"]+$","u");function sr(ar){return ar>=65&&ar<=90||ar>=97&&ar<=122||ar===58||ar===95||ar===8204||ar===8205||ar>=192&&ar<=214||ar>=216&&ar<=246||ar>=248&&ar<=767||ar>=880&&ar<=893||ar>=895&&ar<=8191||ar>=8304&&ar<=8591||ar>=11264&&ar<=12271||ar>=12289&&ar<=55295||ar>=63744&&ar<=64975||ar>=65008&&ar<=65533||ar>=65536&&ar<=983039}ir.S_LIST=[32,10,13,9],ir.isChar=function(ar){return ar>=1&&ar<=55295||ar>=57344&&ar<=65533||ar>=65536&&ar<=1114111},ir.isRestrictedChar=function(ar){return ar>=1&&ar<=8||ar===11||ar===12||ar>=14&&ar<=31||ar>=127&&ar<=132||ar>=134&&ar<=159},ir.isCharAndNotRestricted=function(ar){return ar===9||ar===10||ar===13||ar>31&&ar<127||ar===133||ar>159&&ar<=55295||ar>=57344&&ar<=65533||ar>=65536&&ar<=1114111},ir.isS=function(ar){return ar===32||ar===10||ar===13||ar===9},ir.isNameStartChar=sr,ir.isNameChar=function(ar){return sr(ar)||ar>=48&&ar<=57||ar===45||ar===46||ar===183||ar>=768&&ar<=879||ar>=8255&&ar<=8256}},{}],545:[function(rr,nr,ir){/**
* Character class utilities for XML NS 1.0 edition 3.
*
* @author Louis-Dominique Dubeau
* @license MIT
* @copyright Louis-Dominique Dubeau
*/function sr(ar){return ar>=65&&ar<=90||ar===95||ar>=97&&ar<=122||ar>=192&&ar<=214||ar>=216&&ar<=246||ar>=248&&ar<=767||ar>=880&&ar<=893||ar>=895&&ar<=8191||ar>=8204&&ar<=8205||ar>=8304&&ar<=8591||ar>=11264&&ar<=12271||ar>=12289&&ar<=55295||ar>=63744&&ar<=64975||ar>=65008&&ar<=65533||ar>=65536&&ar<=983039}Object.defineProperty(ir,"__esModule",{value:!0}),ir.NC_NAME_START_CHAR="A-Z_a-z------------",ir.NC_NAME_CHAR="-"+ir.NC_NAME_START_CHAR+".0-9--",ir.NC_NAME_START_CHAR_RE=new RegExp("^["+ir.NC_NAME_START_CHAR+"]$","u"),ir.NC_NAME_CHAR_RE=new RegExp("^["+ir.NC_NAME_CHAR+"]$","u"),ir.NC_NAME_RE=new RegExp("^["+ir.NC_NAME_START_CHAR+"]["+ir.NC_NAME_CHAR+"]*$","u"),ir.isNCNameStartChar=sr,ir.isNCNameChar=function(ar){return sr(ar)||ar===45||ar===46||ar>=48&&ar<=57||ar===183||ar>=768&&ar<=879||ar>=8255&&ar<=8256}},{}]},{},[15])(15)})})(exceljs_min);var exceljs_minExports=exceljs_min.exports;const ExcelJS=getDefaultExportFromCjs(exceljs_minExports);function Modal({isOpen:tr,onClose:er,children:rr,title:nr,size:ir="md"}){const sr=reactExports.useRef(null);reactExports.useEffect(()=>{const hr=dr=>{dr.key==="Escape"&&er()};return tr&&(document.addEventListener("keydown",hr),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",hr),document.body.style.overflow="unset"}},[tr,er]);const ar=reactExports.useCallback(hr=>{sr.current=hr.target},[]),cr=reactExports.useCallback(hr=>{if(sr.current!==hr.target)return;const dr=window.getSelection();dr&&dr.toString().trim().length>0||er()},[er]);if(!tr)return null;const lr={sm:"max-w-sm",md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4 md:mx-8"},or=ir==="full"?"flex-1 overflow-hidden p-0":"flex-1 overflow-auto p-6",ur=ir==="full"?"h-[90vh] md:h-[85vh]":"max-h-[90vh] md:max-h-[85vh]";return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-fadeIn",onMouseDown:ar,onClick:cr,children:jsxRuntimeExports.jsxs("div",{className:`
          modal-content bg-white rounded-lg shadow-xl w-full ${lr[ir]}
          ${ur} overflow-hidden flex flex-col animate-slideIn
          md:rounded-lg
        `,onClick:hr=>hr.stopPropagation(),onMouseDown:hr=>hr.stopPropagation(),children:[nr&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:nr}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx("div",{className:or,children:rr})]})})}function ToastContainer({toasts:tr,onRemove:er}){return tr.length===0?null:jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm",children:tr.map(rr=>jsxRuntimeExports.jsx(Toast,{toast:rr,onRemove:er},rr.id))})}function Toast({toast:tr,onRemove:er}){const rr={success:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-400"}),error:jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5 text-red-400"}),warning:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5 text-yellow-400"}),info:jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 text-blue-400"})},nr={success:"bg-gray-800 border-green-500",error:"bg-gray-800 border-red-500",warning:"bg-gray-800 border-yellow-500",info:"bg-gray-800 border-blue-500"};return jsxRuntimeExports.jsxs("div",{className:`
        toast flex items-center gap-3 px-4 py-3 rounded-lg border shadow-lg
        ${nr[tr.type]}
      `,children:[rr[tr.type],jsxRuntimeExports.jsx("p",{className:"flex-1 text-sm text-white",children:tr.message}),jsxRuntimeExports.jsx("button",{onClick:()=>er(tr.id),className:"p-1 rounded hover:bg-white/10 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4 text-gray-400"})})]})}function Button({children:tr,variant:er="primary",size:rr="md",loading:nr=!1,icon:ir,className:sr="",disabled:ar,...cr}){const lr="inline-flex items-center justify-center font-medium rounded-lg transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 ring-offset-white dark:ring-offset-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",or={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500 dark:text-gray-200 dark:hover:bg-gray-700"},ur={sm:"px-3 py-1.5 text-sm gap-1.5",md:"px-4 py-2 text-sm gap-2",lg:"px-6 py-3 text-base gap-2"};return jsxRuntimeExports.jsxs("button",{className:`${lr} ${or[er]} ${ur[rr]} ${sr}`,disabled:ar||nr,...cr,children:[nr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}):ir||null,tr]})}const Input=reactExports.forwardRef(({label:tr,error:er,helperText:rr,className:nr="",...ir},sr)=>jsxRuntimeExports.jsxs("div",{className:"w-full",children:[tr&&jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:tr}),jsxRuntimeExports.jsx("input",{ref:sr,className:`
            w-full px-3 py-2 border rounded-lg text-sm
            transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
            ${er?"border-red-300 bg-red-50":"border-gray-300 bg-white"}
            ${nr}
          `,...ir}),er&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-red-500",children:er}),rr&&!er&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-xs text-gray-500",children:rr})]}));Input.displayName="Input";function toNumber$3(tr){if(tr==null)return 0;if(typeof tr=="number")return tr;if(typeof tr=="string"){const er=tr.replace(/\./g,"").replace(",","."),rr=Number(er);return Number.isFinite(rr)?rr:0}return 0}function toText$1(tr){return tr==null?"":typeof tr=="string"?tr:typeof tr=="number"?String(tr):""}function normalizeHeader(tr){return tr.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/\s+/g," ").trim()}function guessHeader(tr,er){const rr=tr.map(nr=>({raw:nr,norm:normalizeHeader(nr)})).filter(nr=>nr.raw);for(const nr of er){const ir=normalizeHeader(nr),sr=rr.find(ar=>ar.norm===ir);if(sr)return sr.raw}for(const nr of er){const ir=normalizeHeader(nr),sr=rr.find(ar=>ar.norm.includes(ir)||ir.includes(ar.norm));if(sr)return sr.raw}return""}function ImportQuantitiesModal({isOpen:tr,onClose:er,activeSolicitudTag:rr,activeStockTag:nr,repuestos:ir,onImport:sr}){const ar=reactExports.useRef(null),[cr,lr]=reactExports.useState("file"),[or,ur]=reactExports.useState(""),[hr,dr]=reactExports.useState(!1),[fr,gr]=reactExports.useState(null),[br,pr]=reactExports.useState([]),[mr,yr]=reactExports.useState([]),[xr,vr]=reactExports.useState(!1),[_r,Er]=reactExports.useState([]),[Tr,Rr]=reactExports.useState([]),[Nr,Dr]=reactExports.useState([]),[Ir,Or]=reactExports.useState({codigoSAP:"",codigoBaader:"",textoBreve:"",descripcion:"",cantidad:"",valorUnitario:""}),[jr,Lr]=reactExports.useState(!1),[Cr,wr]=reactExports.useState(!1),[Pr,Ar]=reactExports.useState(null),[Sr,Mr]=reactExports.useState(!1),qr=reactExports.useMemo(()=>{const yn=[];return rr&&yn.push({tipo:"solicitud",tagName:rr}),nr&&yn.push({tipo:"stock",tagName:nr}),yn},[rr,nr]),[$r,Br]=reactExports.useState(""),zr=reactExports.useMemo(()=>$r==="catalog"?{mode:"catalog"}:$r==="solicitud"&&rr?{tipo:"solicitud",tagName:rr}:$r==="stock"&&nr?{tipo:"stock",tagName:nr}:qr.length===0?{mode:"catalog"}:qr.length===1?{...qr[0],mode:"context"}:null,[$r,rr,nr,qr]),Gr=()=>{gr(null),pr([]),yr([]),vr(!1),Er([]),Rr([]),Dr([]),Or({codigoSAP:"",codigoBaader:"",textoBreve:"",descripcion:"",cantidad:"",valorUnitario:""}),Ar(null),Mr(!1),lr("file"),ur(""),dr(!1),ar.current&&(ar.current.value="")},Vr=yn=>{const Vn=new Map;return yn.map((Kn,es)=>{const Xn=(Kn||"").trim()||`Col ${es+1}`,ds=Vn.get(Xn)??0;return Vn.set(Xn,ds+1),ds===0?Xn:`${Xn} (${ds+1})`})},Xr=yn=>yn.includes("	")?"	":yn.includes(";")?";":yn.includes(",")?",":"	",Ur=(yn,Vn)=>{const Kn=yn.replace(/\r\n/g,`
`).replace(/\r/g,`
`).split(`
`).map(Ds=>Ds.replace(/\s+$/g,"")).filter(Ds=>Ds.trim().length>0);if(Kn.length===0)return{headers:[],rows:[]};const es=Xr(Kn[0]),Xn=Kn.map(Ds=>Ds.split(es)),ds=Math.max(...Xn.map(Ds=>Ds.length)),fs=Ds=>{const xs=[...Ds];for(;xs.length<ds;)xs.push("");return xs},os=Xn.map(fs),Hn=Vn?os[0]:Array.from({length:ds},(Ds,xs)=>`Col ${xs+1}`),Ln=Vr(Hn.map(Ds=>(Ds??"").toString())),ls=(Vn?os.slice(1):os).map(Ds=>{const xs={};return Ln.forEach((kn,Jn)=>{xs[kn]=(Ds[Jn]??"").toString()}),xs});return{headers:Ln,rows:ls}},Fr=yn=>{if(yn.length===2)return{codigoSAP:yn[0],codigoBaader:"",textoBreve:"",descripcion:"",cantidad:yn[1],valorUnitario:""};const Vn={codigoSAP:guessHeader(yn,["codigo sap","cdigo sap","sap","cod sap"]),codigoBaader:guessHeader(yn,["codigo baader","cdigo baader","baader","n parte","parte","part","part#"]),textoBreve:guessHeader(yn,["texto breve","breve","descripcion sap","descripcin sap"]),descripcion:guessHeader(yn,["descripcion","descripcin","descripcion extendida","descripcin extendida","nombre"]),cantidad:guessHeader(yn,["cantidad","cant","qty"]),valorUnitario:guessHeader(yn,["valor unitario","precio","usd","unitario"])};return!Vn.codigoSAP&&yn.length>=1&&(Vn.codigoSAP=yn[0]),!Vn.cantidad&&yn.length>=2&&(Vn.cantidad=yn[1]),Vn},Kr=()=>{Ar(null);const{headers:yn,rows:Vn}=Ur(or,hr);if(yn.length===0||Vn.length===0){Ar("No se detectaron filas vlidas. Copia desde Excel y pega aqu (idealmente con columnas separadas por TAB).");return}gr(null),Er(yn),Rr(Vn),Dr(Vn.slice(0,50));const Kn=Fr(yn);Or(Kn),Mr(!0),Zr(Vn,Kn)},Zr=(yn,Vn)=>{const Kn=[];for(const es of yn){const Xn=toText$1(Vn.codigoSAP?es[Vn.codigoSAP]:""),ds=toText$1(Vn.codigoBaader?es[Vn.codigoBaader]:""),fs=toText$1(Vn.textoBreve?es[Vn.textoBreve]:""),os=toText$1(Vn.descripcion?es[Vn.descripcion]:""),Hn=toNumber$3(Vn.cantidad?es[Vn.cantidad]:0),Ln=toNumber$3(Vn.valorUnitario?es[Vn.valorUnitario]:0),Dn=Xn.trim()||"pendiente",ls=ds.trim()||"pendiente";Dn==="pendiente"&&ls==="pendiente"&&!fs.trim()&&!os.trim()||Kn.push({codigoSAP:Dn,codigoBaader:ls,textoBreve:fs.trim(),descripcion:os.trim(),valorUnitario:Ln,cantidad:Hn})}pr(Kn),rn(Kn),Kn.length===0&&Ar("Con el mapeo seleccionado no se pudieron construir filas vlidas. Ajusta las columnas e intenta nuevamente.")},Jr=yn=>yn.toLowerCase().replace(/\s+/g,"").trim(),tn=yn=>yn.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),an=()=>!zr||"mode"in zr&&zr.mode==="catalog"||!("tipo"in zr)||!("tagName"in zr)?null:{tipo:zr.tipo,tagName:zr.tagName},dn=(yn,Vn,Kn)=>{for(const es of yn.tags??[])if(isTagAsignado(es)&&es.tipo===Vn&&es.nombre===Kn)return Number.isFinite(es.cantidad)?es.cantidad:0;return null},en=(yn,Vn)=>{const Kn=tn(yn),es=tn(Vn);if(Kn===es)return 100;if(!Kn||!es)return 0;const Xn=Kn.split(" ").filter(Ds=>Ds.length>2),ds=es.split(" ").filter(Ds=>Ds.length>2);if(Xn.length===0||ds.length===0)return 0;const fs=Xn.filter(Ds=>ds.includes(Ds)).length,os=Math.max(Xn.length,ds.length),Hn=fs/os*100,Ln=Math.max(Kn.length,es.length);let Dn=0;for(let Ds=0;Ds<Math.min(Kn.length,es.length);Ds++)Kn[Ds]===es[Ds]&&Dn++;const ls=Dn/Ln*100;return Math.round(Hn*.7+ls*.3)},rn=yn=>{const Vn=new Map,Kn=new Map,es=new Map;ir.forEach(os=>{os.codigoSAP&&os.codigoSAP!=="pendiente"&&Vn.set(Jr(os.codigoSAP),os),os.codigoBaader&&os.codigoBaader!=="pendiente"&&Kn.set(Jr(os.codigoBaader),os);const Hn=tn(os.descripcion||os.textoBreve||"");Hn.length>5&&es.set(Hn,os)});const Xn=[],ds=an(),fs=!ds;yn.forEach((os,Hn)=>{const Ln=os.codigoSAP!=="pendiente"?Jr(os.codigoSAP):"",Dn=os.codigoBaader!=="pendiente"?Jr(os.codigoBaader):"";let ls=Ln&&Vn.get(Ln)||Dn&&Kn.get(Dn),Ds="exact",xs=100;if(!ls&&os.codigoSAP==="pendiente"&&os.codigoBaader==="pendiente"){const kn=os.descripcion||os.textoBreve||"",Jn=tn(kn);if(Jn.length>5&&(ls=es.get(Jn),!ls)){let is,bs=0;ir.forEach(Bn=>{if((Bn.codigoSAP==="pendiente"||!Bn.codigoSAP)&&(Bn.codigoBaader==="pendiente"||!Bn.codigoBaader)){const Yn=Bn.descripcion||Bn.textoBreve||"";if(Yn.length>5){const vn=en(kn,Yn);vn>=60&&vn>bs&&(bs=vn,is=Bn)}}}),is&&bs>=60&&(ls=is,Ds="similar",xs=bs)}}if(ls){const kn=os.codigoSAP!=="pendiente"&&ls.codigoSAP!==os.codigoSAP||os.codigoBaader!=="pendiente"&&ls.codigoBaader!==os.codigoBaader||os.textoBreve&&ls.textoBreve!==os.textoBreve||os.descripcion&&ls.descripcion!==os.descripcion||os.valorUnitario>0&&ls.valorUnitario!==os.valorUnitario;let Jn=!1,is;if(!kn&&Ds==="exact"){if(fs)Jn=!0,is="Sin cambios en el catlogo (reimportacin repetida).";else if(ds){const bs=dn(ls,ds.tipo,ds.tagName);bs!=null&&bs===os.cantidad&&(Jn=!0,is="Misma cantidad ya registrada en este evento.")}}(kn||Ds==="similar"||Jn)&&Xn.push({rowIndex:Hn,newData:os,existing:ls,skipImport:Jn,similarity:xs,matchType:Ds,isDuplicateNoOp:Jn,duplicateDetail:is,overrides:{codigoSAP:!1,codigoBaader:!1,textoBreve:!1,descripcion:!1,valorUnitario:!1}})}}),yr(Xn)};reactExports.useEffect(()=>{br.length!==0&&rn(br)},[zr,ir]);const sn=async yn=>{Lr(!0),Ar(null);try{const Vn=await yn.arrayBuffer(),Kn=new ExcelJS.Workbook;await Kn.xlsx.load(Vn);const es=Kn.worksheets[0];if(!es)throw new Error("No se encontr ninguna hoja en el archivo");const Xn=[];es.getRow(1).eachCell((Hn,Ln)=>{Xn[Ln]=String(Hn.value||"").trim()});const ds=Xn.filter(Boolean),fs=[],os=[];es.eachRow((Hn,Ln)=>{if(Ln===1)return;const Dn={};Hn.eachCell((Yn,vn)=>{const _n=Xn[vn];_n&&(Dn[_n]=Yn.value)}),fs.push(Dn);const ls=toText$1(Dn["Cdigo SAP"]??Dn["CODIGO SAP"]??Dn.Material),Ds=toText$1(Dn["Cdigo Baader"]??Dn["CODIGO BAADER"]??Dn["Cdigo proveedor"]??Dn["N Parte"]??Dn["No. Parte"]??Dn["Numero Parte"]??Dn["Nmero Parte"]),xs=toText$1(Dn["Texto Breve"]??Dn["TEXTO BREVE"]??Dn.Descripcin??Dn.Descripcion??Dn["DESCRIPCION SAP"]),kn=toText$1(Dn["Descripcin extendida"]??Dn["Descripcion extendida"]??Dn["Nombre comn"]??Dn["Nombre comun"]??Dn["NOMBRE COMUN"]??Dn["COMPONENTE O NOMBRE COMUN DESCRIPTIVO"]??Dn["Componente o nombre comun descriptivo"]),Jn=toNumber$3(Dn.Cantidad??Dn["Cant."]??Dn.Cant??Dn.QTY??Dn.Qty??Dn["Cantidad Solicitada"]??Dn.Stock),is=toNumber$3(Dn["Valor Unitario"]??Dn["Valor Unit."]??Dn.Precio??Dn.USD),bs=ls.trim()||"pendiente",Bn=Ds.trim()||"pendiente";bs==="pendiente"&&Bn==="pendiente"&&!xs.trim()&&!kn.trim()||os.push({codigoSAP:bs,codigoBaader:Bn,textoBreve:xs.trim()||kn.trim(),descripcion:kn.trim(),valorUnitario:is,cantidad:Jn})}),gr(yn),Er(ds),Rr(fs),Dr(fs.slice(0,20)),pr(os),rn(os),Or({codigoSAP:guessHeader(ds,["Cdigo SAP","CODIGO SAP","SAP","Material"]),codigoBaader:guessHeader(ds,["N Parte","No. Parte","Nmero Parte","Numero Parte","Cdigo proveedor","Codigo proveedor","Part#","Parte","Cdigo Baader","CODIGO BAADER"]),textoBreve:guessHeader(ds,["Texto Breve","TEXTO BREVE","DESCRIPCION SAP","Descripcin","Descripcion","Texto"]),descripcion:guessHeader(ds,["COMPONENTE O NOMBRE COMUN DESCRIPTIVO","Nombre comn","Nombre comun","Descripcin extendida","Descripcion extendida","Nombre"]),cantidad:guessHeader(ds,["Cantidad","Cant.","Cant","QTY","Qty","Cantidad Solicitada","Stock"]),valorUnitario:guessHeader(ds,["Valor Unitario","Valor Unit.","Precio","USD","Unit Price","Unitario"])}),qr.length===0?Br("catalog"):qr.length===1&&Br(qr[0].tipo)}catch(Vn){console.error("Error al parsear Excel:",Vn),Ar("Error al leer el archivo Excel. Verifica que el formato sea correcto.")}finally{Lr(!1)}},on=yn=>{var Kn;const Vn=(Kn=yn.target.files)==null?void 0:Kn[0];Vn&&sn(Vn)},fn=yn=>{yn.preventDefault();const Vn=yn.dataTransfer.files[0];Vn&&(Vn.name.endsWith(".xlsx")||Vn.name.endsWith(".xls"))?sn(Vn):Ar("Por favor selecciona un archivo Excel (.xlsx o .xls)")},pn=async()=>{var yn;if(!zr){Ar("Selecciona un destino de importacin.");return}if(br.length===0){(yn=ar.current)==null||yn.click();return}wr(!0),Ar(null);try{const Vn=br.map((es,Xn)=>{const ds=mr.find(fs=>fs.rowIndex===Xn);return{row:es,conflict:ds}}).filter(({conflict:es})=>!(es&&es.skipImport)).map(({row:es,conflict:Xn})=>Xn?{...es,forceOverride:Xn.overrides}:es),Kn=br.length-Vn.length;"mode"in zr&&zr.mode==="catalog"?await sr({mode:"catalog",rows:Vn}):await sr({mode:"context",tipo:zr.tipo,tagName:zr.tagName,rows:Vn}),Kn>0&&Ar(null),Gr(),er()}catch(Vn){console.error(Vn),Ar("Error al importar los datos")}finally{wr(!1)}},gn=br.length>0&&!!zr,Pn=mr.filter(yn=>yn.skipImport).length,In=br.length-Pn,En=!jr&&_r.length>0,zn=zr?!("mode"in zr&&zr.mode==="catalog"):$r!=="catalog";return jsxRuntimeExports.jsx(Modal,{isOpen:tr,onClose:er,title:"Importar cantidades (Excel)",size:"xl",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-700 dark:text-gray-100 mb-2",children:"Destino de importacin"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"import-target",checked:$r==="catalog",onChange:()=>Br("catalog")}),"Solo catlogo (sin contexto)"]}),qr.length===0?jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No hay contextos activos. Se importar solo al catlogo."}):qr.length===1?jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"import-target",checked:$r===qr[0].tipo,onChange:()=>Br(qr[0].tipo)}),qr[0].tipo==="solicitud"?"Solicitud":"Stock","  ",qr[0].tagName]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"import-target",checked:$r==="solicitud",onChange:()=>Br("solicitud")}),"Solicitud  ",rr]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"import-target",checked:$r==="stock",onChange:()=>Br("stock")}),"Stock  ",nr]})]})]})]}),!fr&&br.length===0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>lr("file"),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-colors ${cr==="file"?"bg-primary-100 dark:bg-primary-900/30 border-primary-300 dark:border-primary-700 text-primary-700 dark:text-primary-300":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Archivo Excel"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>lr("paste"),className:`px-3 py-2 rounded-lg text-sm font-medium border transition-colors ${cr==="paste"?"bg-primary-100 dark:bg-primary-900/30 border-primary-300 dark:border-primary-700 text-primary-700 dark:text-primary-300":"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:"Pegar desde Excel"})]}),cr==="file"?jsxRuntimeExports.jsxs("div",{onDrop:yn=>{lr("file"),fn(yn)},onDragOver:yn=>yn.preventDefault(),className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center hover:border-primary-500 transition-colors cursor-pointer",onClick:()=>{var yn;return(yn=ar.current)==null?void 0:yn.click()},children:[jsxRuntimeExports.jsx("input",{ref:ar,type:"file",accept:".xlsx,.xls",onChange:yn=>{lr("file"),on(yn)},className:"hidden"}),jr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 mx-auto text-primary-600 animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:"Arrastra tu archivo Excel aqu o haz clic para seleccionar"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Formatos aceptados: .xlsx, .xls"})]})]}):jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-900 space-y-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Copia un rango desde Excel y pgalo aqu. Luego asigna qu columna es SAP/Cantidad/etc."}),jsxRuntimeExports.jsx("textarea",{value:or,onChange:yn=>ur(yn.target.value),placeholder:"Ej: (TAB) separa columnas, ENTER separa filas",className:"w-full h-40 rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-800 dark:text-gray-100 font-mono"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-200",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:hr,onChange:yn=>dr(yn.target.checked)}),"Primera fila es encabezado"]})]})]}),Pr&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{children:Pr})]}),br.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[br.length," filas encontradas"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[En&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>Mr(yn=>!yn),children:Sr?"Ocultar mapeo":"Ajustar columnas"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Gr,children:"Cambiar archivo"})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-h-64 overflow-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:[jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-200",children:"SAP"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-200",children:"N Parte"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-200",children:"Descripcin"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 dark:text-gray-200",children:"Cant."}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600 dark:text-gray-200",children:"USD"})]})}),jsxRuntimeExports.jsx("tbody",{children:br.slice(0,30).map((yn,Vn)=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:yn.codigoSAP}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 font-mono text-xs text-primary-600 dark:text-primary-300",children:yn.codigoBaader}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 truncate max-w-[240px] text-gray-700 dark:text-gray-200",children:yn.textoBreve||yn.descripcion||""}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-200",children:yn.cantidad}),jsxRuntimeExports.jsxs("td",{className:"px-3 py-2 text-right text-gray-700 dark:text-gray-200",children:["$",yn.valorUnitario.toFixed(2)]})]},Vn))})]}),br.length>30&&jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 text-center text-sm text-gray-500 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 border-t border-gray-100 dark:border-gray-700",children:["... y ",br.length-30," ms"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Reglas"}),jsxRuntimeExports.jsxs("ul",{className:"text-blue-700 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:[" La cantidad del evento se ",jsxRuntimeExports.jsx("b",{children:"reemplaza"})," (no se suma)."]}),jsxRuntimeExports.jsxs("li",{children:[" Si falta SAP o N Parte, se guarda como ",jsxRuntimeExports.jsx("b",{children:"pendiente"}),"."]}),jsxRuntimeExports.jsx("li",{children:" Si el repuesto no existe en el catlogo, se crea para completar el catlogo."})]})]}),mr.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border-2 border-amber-300 dark:border-amber-600 bg-amber-50 dark:bg-amber-900/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(GitCompare,{className:"w-5 h-5 text-amber-700 dark:text-amber-400"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold text-amber-900 dark:text-amber-100",children:[mr.length," repuesto",mr.length>1?"s":""," ya existe",mr.length>1?"n":""," en el catlogo"]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>vr(yn=>!yn),children:xr?"Ocultar":"Revisar"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:"Algunos repuestos del Excel ya estn en el catlogo. Puedes revisar qu datos actualizar."}),xr&&jsxRuntimeExports.jsx("div",{className:"mt-4 space-y-3 max-h-96 overflow-y-auto",children:mr.map((yn,Vn)=>jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg border ${yn.matchType==="similar"?"border-orange-300 dark:border-orange-600 bg-orange-50/50 dark:bg-orange-900/10":"border-amber-200 dark:border-amber-700 bg-white dark:bg-gray-900"}`,children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:[yn.existing.codigoSAP!=="pendiente"&&`SAP: ${yn.existing.codigoSAP}`,yn.existing.codigoSAP!=="pendiente"&&yn.existing.codigoBaader!=="pendiente"&&"  ",yn.existing.codigoBaader!=="pendiente"&&`N Parte: ${yn.existing.codigoBaader}`]}),yn.matchType==="similar"&&jsxRuntimeExports.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 font-medium",children:[" ",Math.round(yn.similarity),"% similar"]})]})}),yn.matchType==="similar"&&jsxRuntimeExports.jsxs("div",{className:"mb-3 p-2 bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-700 rounded text-xs text-orange-800 dark:text-orange-200",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Posible duplicado:"}),' Este repuesto parece similar a uno existente. Verifica si son el mismo y decide si actualizar los campos o crear uno nuevo marcando " No importar".']}),yn.isDuplicateNoOp&&jsxRuntimeExports.jsxs("div",{className:"mb-3 p-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded text-xs text-blue-800 dark:text-blue-200",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Repetido sin cambios:"})," ",yn.duplicateDetail??"No se detectaron cambios."," Se omitir por defecto (puedes Revertir si igual quieres importarlo)."]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[auto,1fr,1fr] gap-2 text-xs",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Campo"}),jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Actual"}),jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-600 dark:text-gray-400",children:"Nuevo (Excel)"}),yn.newData.codigoSAP!=="pendiente"&&yn.existing.codigoSAP!==yn.newData.codigoSAP&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn.overrides.codigoSAP,onChange:Kn=>{const es=[...mr];es[Vn].overrides.codigoSAP=Kn.target.checked,yr(es)},className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"SAP"})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:yn.existing.codigoSAP}),jsxRuntimeExports.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-medium",children:yn.newData.codigoSAP})]}),yn.newData.codigoBaader!=="pendiente"&&yn.existing.codigoBaader!==yn.newData.codigoBaader&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn.overrides.codigoBaader,onChange:Kn=>{const es=[...mr];es[Vn].overrides.codigoBaader=Kn.target.checked,yr(es)},className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"N Parte"})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-300",children:yn.existing.codigoBaader}),jsxRuntimeExports.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-medium",children:yn.newData.codigoBaader})]}),yn.newData.textoBreve&&yn.existing.textoBreve!==yn.newData.textoBreve&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn.overrides.textoBreve,onChange:Kn=>{const es=[...mr];es[Vn].overrides.textoBreve=Kn.target.checked,yr(es)},className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Texto"})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-300 truncate",children:yn.existing.textoBreve||"(vaco)"}),jsxRuntimeExports.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-medium truncate",children:yn.newData.textoBreve})]}),yn.newData.descripcion&&yn.existing.descripcion!==yn.newData.descripcion&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn.overrides.descripcion,onChange:Kn=>{const es=[...mr];es[Vn].overrides.descripcion=Kn.target.checked,yr(es)},className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Desc."})]}),jsxRuntimeExports.jsx("div",{className:"text-gray-600 dark:text-gray-300 truncate",children:yn.existing.descripcion||"(vaco)"}),jsxRuntimeExports.jsx("div",{className:"text-primary-600 dark:text-primary-400 font-medium truncate",children:yn.newData.descripcion})]}),yn.newData.valorUnitario>0&&yn.existing.valorUnitario!==yn.newData.valorUnitario&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn.overrides.valorUnitario,onChange:Kn=>{const es=[...mr];es[Vn].overrides.valorUnitario=Kn.target.checked,yr(es)},className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"V.U."})]}),jsxRuntimeExports.jsxs("div",{className:"text-gray-600 dark:text-gray-300",children:["$",yn.existing.valorUnitario.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{className:"text-primary-600 dark:text-primary-400 font-medium",children:["$",yn.newData.valorUnitario.toFixed(2)]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-2 pt-2 border-t border-amber-100 dark:border-amber-800 flex gap-2 flex-wrap",children:yn.skipImport?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 w-full",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:" Este repuesto no se importar"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Kn=[...mr];Kn[Vn].skipImport=!1,yr(Kn)},className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900 dark:text-green-200 dark:hover:bg-green-800 ml-auto",children:"Revertir (s importar)"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>{const Kn=[...mr];Kn[Vn].overrides={codigoSAP:!0,codigoBaader:!0,textoBreve:!0,descripcion:!0,valorUnitario:!0},yr(Kn)},className:"text-xs px-2 py-1 rounded bg-primary-100 text-primary-700 hover:bg-primary-200 dark:bg-primary-900 dark:text-primary-200 dark:hover:bg-primary-800",children:"Actualizar todo"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Kn=[...mr];Kn[Vn].overrides={codigoSAP:!1,codigoBaader:!1,textoBreve:!1,descripcion:!1,valorUnitario:!1},yr(Kn)},className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:hover:bg-gray-700",children:"Mantener actual"}),jsxRuntimeExports.jsx("button",{onClick:()=>{const Kn=[...mr];Kn[Vn].skipImport=!0,yr(Kn)},className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200 dark:hover:bg-red-800",children:"No importar"})]})})]},Vn))})]})]}),fr&&!jr&&br.length===0&&!Pr&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsx("p",{children:"No se encontraron filas vlidas con los encabezados esperados. Si el Excel tiene los datos pero el encabezado est escrito distinto, usa Ajustar columnas."})]}),En&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[br.length===0&&jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>Mr(yn=>!yn),children:Sr?"Ocultar mapeo":"Ajustar columnas"})}),Sr&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Mapeo de columnas"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Cdigo SAP",jsxRuntimeExports.jsxs("select",{value:Ir.codigoSAP,onChange:yn=>Or(Vn=>({...Vn,codigoSAP:yn.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:" Selecciona columna "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`sap-${yn}`))]})]}),jsxRuntimeExports.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-200",children:["N Parte (cdigo proveedor)",jsxRuntimeExports.jsxs("select",{value:Ir.codigoBaader,onChange:yn=>Or(Vn=>({...Vn,codigoBaader:yn.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:" Selecciona columna "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`parte-${yn}`))]})]}),jsxRuntimeExports.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Texto Breve (SAP)",jsxRuntimeExports.jsxs("select",{value:Ir.textoBreve,onChange:yn=>Or(Vn=>({...Vn,textoBreve:yn.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:" Selecciona columna "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`texto-${yn}`))]})]}),jsxRuntimeExports.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Descripcin extendida / Nombre comn",jsxRuntimeExports.jsxs("select",{value:Ir.descripcion,onChange:yn=>Or(Vn=>({...Vn,descripcion:yn.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:" (sin columna) "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`desc-${yn}`))]})]}),jsxRuntimeExports.jsxs("label",{className:`text-sm text-gray-700 dark:text-gray-200 ${zn?"":"opacity-60"}`,children:["Cantidad ",zn?"":"(solo contexto)",jsxRuntimeExports.jsxs("select",{value:Ir.cantidad,onChange:yn=>Or(Vn=>({...Vn,cantidad:yn.target.value})),disabled:!zn,className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm disabled:opacity-60",children:[jsxRuntimeExports.jsx("option",{value:"",children:" Selecciona columna "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`cant-${yn}`))]})]}),jsxRuntimeExports.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Valor Unitario (opcional)",jsxRuntimeExports.jsxs("select",{value:Ir.valorUnitario,onChange:yn=>Or(Vn=>({...Vn,valorUnitario:yn.target.value})),className:"mt-1 w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 px-3 py-2 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:" (sin columna) "}),_r.map(yn=>jsxRuntimeExports.jsx("option",{value:yn,children:yn},`vu-${yn}`))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tip: con que haya SAP o N Parte (o Texto) por fila, se importar."}),jsxRuntimeExports.jsx(Button,{onClick:()=>{Ar(null),Zr(Tr.length?Tr:Nr,Ir),Mr(!1)},icon:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-4 h-4"}),children:"Aplicar mapeo"})]}),jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Vista previa (primeras filas)"}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-auto border border-gray-200 dark:border-gray-700 rounded-lg",children:jsxRuntimeExports.jsxs("table",{className:"min-w-max w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 sticky top-0",children:jsxRuntimeExports.jsx("tr",{children:_r.map(yn=>jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600 dark:text-gray-200 whitespace-nowrap",children:yn},`h-${yn}`))})}),jsxRuntimeExports.jsx("tbody",{children:Nr.slice(0,8).map((yn,Vn)=>jsxRuntimeExports.jsx("tr",{className:"border-t border-gray-100 dark:border-gray-700",children:_r.map(Kn=>jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-gray-700 dark:text-gray-200 whitespace-nowrap",children:toText$1(yn[Kn]??"")},`c-${Vn}-${Kn}`))},`r-${Vn}`))})]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:er,children:"Cancelar"}),br.length>0?jsxRuntimeExports.jsxs(Button,{onClick:pn,disabled:!gn,loading:Cr,icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:["Importar ",In," fila",In!==1?"s":"",Pn>0&&` (${Pn} omitida${Pn!==1?"s":""})`]}):cr==="paste"?jsxRuntimeExports.jsx(Button,{onClick:Kr,disabled:jr||or.trim().length===0,icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Procesar pegado"}):jsxRuntimeExports.jsx(Button,{onClick:()=>{var yn;return(yn=ar.current)==null?void 0:yn.click()},disabled:jr,icon:jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-4 h-4"}),children:"Seleccionar Excel"})]})]})})}const ITEMS_PER_PAGE=15;function HistorialCampoModal({isOpen:tr,onClose:er,campo:rr,historial:nr}){if(!tr)return null;const ir=nr.filter(sr=>sr.campo===rr);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:er,children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 max-h-[80vh] overflow-hidden",onClick:sr=>sr.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Historial de ",rr==="cantidadSolicitada"?"Cantidad Solicitada":"Stock Bodega"]}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"p-5 max-h-96 overflow-y-auto",children:ir.length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-8",children:"Sin cambios registrados"}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ir.map((sr,ar)=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-600",children:new Date(sr.fecha).toLocaleDateString("es-CL",{day:"2-digit",month:"short",year:"numeric"})}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:new Date(sr.fecha).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-base",children:[jsxRuntimeExports.jsx("span",{className:"text-red-500 line-through",children:sr.valorAnterior??0}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:""}),jsxRuntimeExports.jsx("span",{className:"text-green-600 font-semibold",children:sr.valorNuevo??0})]})]},ar))})})]})})}function RepuestosTable({machineId:tr,repuestos:er,catalogScope:rr="machine",onCatalogScopeChange:nr,machines:ir=[],selectedCatalogMachineIds:sr=[],onSelectedCatalogMachineIdsChange:ar,globalRepuestos:cr=[],globalLoading:lr=!1,onJumpToMachineRepuesto:or,focusRepuestoId:ur,onFocusHandled:hr,selectedRepuesto:dr,onSelect:fr,onEdit:gr,onDelete:br,onViewManual:pr,onViewPhotos:mr,onViewHistory:yr,onAddNew:xr,onMarkInManual:vr,getHistorial:_r,onManageTags:Er,onFilteredChange:Tr,onAddToContext:Rr,onContextChange:Nr,onContextsChange:Dr,onImportCantidadesPorTag:Ir,onImportCatalogoDesdeExcel:Or,compactMode:jr=!1}){const[Lr,Cr]=reactExports.useState(""),[wr,Pr]=reactExports.useState(1),[Ar,Sr]=reactExports.useState(null),[Mr,qr]=reactExports.useState([]),[$r]=reactExports.useState("OR"),[Br,zr]=reactExports.useState(!1),[Gr,Vr]=reactExports.useState({solicitud:null,stock:null}),[Xr,Ur]=reactExports.useState(!1),[Fr,Kr]=reactExports.useState(!1),[Zr,Jr]=reactExports.useState(null),[tn,an]=reactExports.useState(null),[dn,en]=reactExports.useState(""),[rn,sn]=reactExports.useState(""),[on,fn]=reactExports.useState(!1),pn=rr==="global"||rr==="selected",gn=reactExports.useMemo(()=>ir.filter(An=>An.activa),[ir]),Pn=sr.length>0,In=rr==="machine"?er:rr==="selected"&&!Pn?[]:cr,[En,zn]=reactExports.useState(!1),[yn,Vn]=reactExports.useState(!1),[Kn,es]=reactExports.useState(!1),[Xn,ds]=reactExports.useState("codigoSAP"),[fs,os]=reactExports.useState("asc"),{columns:Hn,toggleColumn:Ln,resetColumns:Dn,isColumnVisible:ls,reorderColumns:Ds,getColumn:xs}=useTableColumns(),{tags:kn}=useTags(er,tr),Jn=reactExports.useMemo(()=>{const An=new Map;return kn.forEach(Vs=>{An.set(Vs.nombre,{nombre:Vs.nombre,tipo:Vs.tipo})}),er.forEach(Vs=>{Vs.tags&&Vs.tags.forEach(Fs=>{isTagAsignado(Fs)&&!An.has(Fs.nombre)&&An.set(Fs.nombre,{nombre:Fs.nombre,tipo:Fs.tipo})})}),Array.from(An.values())},[kn,er]),is=reactExports.useMemo(()=>Gr.solicitud||Gr.stock||null,[Gr]),bs=async An=>{if(An.mode==="catalog"){if(!Or)throw new Error("Importacin no disponible");const Vs=An.rows.map(({codigoSAP:Fs,codigoBaader:Cs,textoBreve:Ns,descripcion:Ys,valorUnitario:js})=>({codigoSAP:Fs,codigoBaader:Cs,textoBreve:Ns,descripcion:Ys,valorUnitario:js}));await Or({rows:Vs});return}if(!Ir)throw new Error("Importacin no disponible");await Ir({tipo:An.tipo,tagName:An.tagName,rows:An.rows})},Bn=reactExports.useMemo(()=>Gr.solicitud?"solicitud":Gr.stock?"stock":null,[Gr]),Yn=reactExports.useMemo(()=>Gr.solicitud!==null||Gr.stock!==null,[Gr]),vn=["nombreManual","tagsSolicitud","tagsStock","totalSolicitadoUSD","totalStockUSD","valorUnitario","totalUSD"],_n=["tagsSolicitud","cantidadSolicitada","totalSolicitadoUSD"],Mn=["tagsStock","cantidadStockBodega","totalStockUSD"],Cn=An=>jr&&vn.includes(An)||!Yn&&(_n.includes(An)||Mn.includes(An)||An==="totalUSD")||Yn&&(!Gr.solicitud&&_n.includes(An)||!Gr.stock&&Mn.includes(An))?!1:ls(An),[Zn,qn]=reactExports.useState(null),[wn,On]=reactExports.useState(null),[Gn,Qn]=reactExports.useState({isOpen:!1,campo:"",historial:[]}),$s=An=>{const Vs=xs(An),Fs="px-3 py-2.5 font-bold text-sm uppercase tracking-wide transition-colors cursor-move select-none border-r border-gray-200/60 dark:border-gray-600/60 last:border-r-0 border-b-2";if(!Vs)return Fs+" bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 border-b-gray-300 dark:border-b-gray-700";let Cs="";return Vs.group==="solicitada"?Cs="bg-blue-700 dark:bg-blue-800 text-white hover:bg-blue-800 dark:hover:bg-blue-700 border-blue-600 dark:border-blue-700 border-b-blue-900/40 dark:border-b-blue-300/20":Vs.group==="stock"?Cs="bg-green-700 dark:bg-green-800 text-white hover:bg-green-800 dark:hover:bg-green-700 border-green-600 dark:border-green-700 border-b-green-900/40 dark:border-b-green-300/20":Cs="bg-gray-800 dark:bg-gray-900 text-white hover:bg-gray-900 dark:hover:bg-gray-800 border-gray-700 dark:border-gray-700 border-b-gray-900/40 dark:border-b-gray-300/20",Zn===An&&(Cs+=" opacity-50"),wn===An&&(Cs+=" ring-2 ring-primary-500"),`${Fs} ${Cs}`},us=An=>{qn(An)},ws=(An,Vs)=>{An.preventDefault(),On(Vs)},As=(An,Vs)=>{if(An.preventDefault(),!Zn||Zn===Vs){qn(null),On(null);return}const Fs=Hn.findIndex(Ns=>Ns.key===Zn),Cs=Hn.findIndex(Ns=>Ns.key===Vs);Fs!==-1&&Cs!==-1&&Ds(Fs,Cs),qn(null),On(null)},Rs=()=>{qn(null),On(null)},Ms=reactExports.useMemo(()=>{let An=In;if(Yn&&!pn&&(An=An.filter(Cs=>{const Ns=Cs.tags||[],Ys=!!Gr.solicitud&&Ns.some(Js=>isTagAsignado(Js)?Js.tipo==="solicitud"&&Js.nombre===Gr.solicitud:typeof Js=="string"&&Js===Gr.solicitud),js=!!Gr.stock&&Ns.some(Js=>isTagAsignado(Js)?Js.tipo==="stock"&&Js.nombre===Gr.stock:typeof Js=="string"&&Js===Gr.stock);return Ys||js})),Lr.trim()){const Cs=Lr.toLowerCase();An=An.filter(Ns=>{var Ys,js,Js,to,mo;return((Ys=Ns.codigoSAP)==null?void 0:Ys.toLowerCase().includes(Cs))||((js=Ns.textoBreve)==null?void 0:js.toLowerCase().includes(Cs))||((Js=Ns.descripcion)==null?void 0:Js.toLowerCase().includes(Cs))||((to=Ns.nombreManual)==null?void 0:to.toLowerCase().includes(Cs))||((mo=Ns.codigoBaader)==null?void 0:mo.toLowerCase().includes(Cs))})}if(Mr.length>0){const Cs=(Ns,Ys)=>{var js;return(js=Ns.tags)==null?void 0:js.some(Js=>getTagNombre(Js)===Ys)};$r==="AND"?An=An.filter(Ns=>Mr.every(Ys=>Cs(Ns,Ys))):An=An.filter(Ns=>Mr.some(Ys=>Cs(Ns,Ys)))}Fr&&(An=An.filter(Cs=>{var Ns;if(Gr.stock){const Ys=(Ns=Cs.tags)==null?void 0:Ns.find(js=>isTagAsignado(js)&&js.nombre===Gr.stock&&js.tipo==="stock");return!Ys||!isTagAsignado(Ys)?!1:Ys.cantidad===0}return!Cs.cantidadStockBodega||Cs.cantidadStockBodega===0})),Zr!==null&&(An=An.filter(Cs=>{const Ns=Cs.vinculosManual&&Cs.vinculosManual.length>0;return Zr?Ns:!Ns})),tn!==null&&(An=An.filter(Cs=>{const Ns=Cs.tags&&Cs.tags.length>0;return tn?!Ns:Ns}));const Vs=parseFloat(dn)||0,Fs=parseFloat(rn)||1/0;return(Vs>0||Fs<1/0)&&(An=An.filter(Cs=>{const Ns=Cs.total||0;return Ns>=Vs&&Ns<=Fs})),An=[...An].sort((Cs,Ns)=>{let Ys="",js="";switch(Xn){case"codigoSAP":Ys=Cs.codigoSAP||"",js=Ns.codigoSAP||"";break;case"codigoBaader":Ys=Cs.codigoBaader||"",js=Ns.codigoBaader||"";break;case"textoBreve":Ys=Cs.textoBreve||"",js=Ns.textoBreve||"";break;case"descripcion":Ys=Cs.descripcion||"",js=Ns.descripcion||"";break;case"nombreManual":Ys=Cs.nombreManual||"",js=Ns.nombreManual||"";break;case"cantidadSolicitada":Ys=Cs.cantidadSolicitada||0,js=Ns.cantidadSolicitada||0;break;case"cantidadStockBodega":Ys=Cs.cantidadStockBodega||0,js=Ns.cantidadStockBodega||0;break;case"valorUnitario":Ys=Cs.valorUnitario||0,js=Ns.valorUnitario||0;break;case"totalUSD":Ys=Cs.total||0,js=Ns.total||0;break;default:Ys=Cs.codigoSAP||"",js=Ns.codigoSAP||""}if(typeof Ys=="string"&&typeof js=="string"){const Js=Ys.localeCompare(js,"es",{numeric:!0});return fs==="asc"?Js:-Js}else{const Js=Ys-js;return fs==="asc"?Js:-Js}}),An},[In,Lr,Mr,$r,Fr,Zr,tn,dn,rn,Xn,fs,Gr,Yn,pn]),Bs=An=>{Xn===An?os(fs==="asc"?"desc":"asc"):(ds(An),os("asc"))},Zs=({column:An})=>Xn!==An?jsxRuntimeExports.jsx(ArrowUpDown,{className:"w-3 h-3 text-gray-300"}):fs==="asc"?jsxRuntimeExports.jsx(ArrowUp,{className:"w-3 h-3 text-primary-600"}):jsxRuntimeExports.jsx(ArrowDown,{className:"w-3 h-3 text-primary-600"}),Qs=Math.ceil(Ms.length/ITEMS_PER_PAGE),eo=(wr-1)*ITEMS_PER_PAGE,ao=Ms.slice(eo,eo+ITEMS_PER_PAGE),Un=reactExports.useMemo(()=>er.length===0?null:er.reduce((An,Vs)=>{const Fs=An.updatedAt instanceof Date?An.updatedAt:new Date(An.updatedAt);return(Vs.updatedAt instanceof Date?Vs.updatedAt:new Date(Vs.updatedAt))>Fs?Vs:An}),[er]);reactExports.useEffect(()=>{if(!ur||pn)return;const An=Ms.findIndex(Fs=>Fs.id===ur);if(An===-1)return;const Vs=Math.floor(An/ITEMS_PER_PAGE)+1;Pr(Vs),setTimeout(()=>{const Fs=document.getElementById(`repuesto-${ur}`);Fs==null||Fs.scrollIntoView({behavior:"smooth",block:"center"}),hr==null||hr()},100)},[ur,Ms,pn,hr]);const Ts=()=>{if(!Un)return;const An=Ms.findIndex(Fs=>Fs.id===Un.id);if(An===-1)return;const Vs=Math.floor(An/ITEMS_PER_PAGE)+1;Pr(Vs),fr(Un),setTimeout(()=>{const Fs=document.getElementById(`repuesto-${Un.id}`);Fs==null||Fs.scrollIntoView({behavior:"smooth",block:"center"})},100)};reactExports.useEffect(()=>{Pr(1)},[Lr,Mr,$r,Fr,Zr,tn,dn,rn,Xn,fs,Gr]),reactExports.useEffect(()=>{Tr==null||Tr(Ms)},[Ms,Tr]),reactExports.useEffect(()=>{Nr==null||Nr(is,Bn)},[is,Bn,Nr]),reactExports.useEffect(()=>{Dr==null||Dr(Gr)},[Gr,Dr]);const Nn=async(An,Vs)=>{try{await navigator.clipboard.writeText(An),Sr(Vs),setTimeout(()=>Sr(null),2e3)}catch(Fs){console.error("Error al copiar:",Fs)}},ns=async(An,Vs)=>{if(_r)try{const Fs=await _r(An.id);Qn({isOpen:!0,campo:Vs,historial:Fs})}catch(Fs){console.error("Error al cargar historial:",Fs)}},Ps=er.filter(An=>!An.vinculosManual||An.vinculosManual.length===0).length,Ss=reactExports.useMemo(()=>(An,Vs)=>{var Ys,js;const Fs=Vs==="solicitud"?Gr.solicitud:Gr.stock;if(!Fs)return 0;const Cs=(Ys=An.tags)==null?void 0:Ys.find(Js=>isTagAsignado(Js)?Js.nombre===Fs&&Js.tipo===Vs:!1);return Cs&&isTagAsignado(Cs)?Cs.cantidad:((js=An.tags)==null?void 0:js.some(Js=>typeof Js=="string"&&Js===Fs))?Vs==="solicitud"?An.cantidadSolicitada||0:An.cantidadStockBodega||0:0},[Gr]),Ks=reactExports.useMemo(()=>{if(!Yn)return{totalSolicitado:0,totalBodega:0,totalSolicitadoUSD:0,totalStockUSD:0,totalUSD:0,sinContexto:!0};let An=0,Vs=0,Fs=0,Cs=0;return Ms.forEach(Ns=>{const Ys=Ss(Ns,"solicitud"),js=Ss(Ns,"stock");An+=Ys,Vs+=js,Fs+=Ys*Ns.valorUnitario,Cs+=js*Ns.valorUnitario}),{totalSolicitado:An,totalBodega:Vs,totalSolicitadoUSD:Fs,totalStockUSD:Cs,totalUSD:Fs+Cs,sinContexto:!1}},[Ms,Yn,Ss]),Is=An=>{if(!Cn(An))return null;const Vs=xs(An);if(!Vs)return null;const Fs=["codigoSAP","codigoBaader","textoBreve","descripcion","nombreManual","cantidadSolicitada","cantidadStockBodega","valorUnitario","totalUSD"].includes(An),Cs=["cantidadSolicitada","cantidadStockBodega","acciones"].includes(An)?"center":["valorUnitario","totalUSD","totalSolicitadoUSD","totalStockUSD"].includes(An)?"right":"left";return jsxRuntimeExports.jsx("th",{draggable:!0,onDragStart:()=>us(An),onDragOver:Ns=>ws(Ns,An),onDrop:Ns=>As(Ns,An),onDragEnd:Rs,className:`${$s(An)} text-${Cs}`,onClick:Fs?()=>Bs(An):void 0,children:jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1 ${Cs==="center"?"justify-center":Cs==="right"?"justify-end":""}`,children:[Vs.label,Fs&&jsxRuntimeExports.jsx(Zs,{column:An})]})},An)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-800 transition-colors",children:[jsxRuntimeExports.jsxs("div",{className:"sticky top-0 z-20 p-3 lg:p-4 border-b border-gray-200 dark:border-gray-700 space-y-3 bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2 lg:hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 text-primary-600 shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-base font-bold text-gray-800 dark:text-gray-100 truncate",children:Yn?"Repuestos":"Catlogo"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[Ms.length," / ",In.length,Yn&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Gr.solicitud&&jsxRuntimeExports.jsxs("span",{className:"ml-2",children:[" Sol: ",Gr.solicitud]}),Gr.stock&&jsxRuntimeExports.jsxs("span",{className:"ml-2",children:[" Stock: ",Gr.stock]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>zr(An=>!An),className:`flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors ${Br?"border-primary-500 bg-primary-50 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 dark:border-primary-700":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,title:"Controles",children:[jsxRuntimeExports.jsx(SlidersHorizontal,{className:"w-4 h-4"}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 transition-transform ${Br?"rotate-180":""}`})]}),jsxRuntimeExports.jsx("button",{onClick:xr,className:"flex items-center justify-center w-10 h-10 rounded-xl bg-primary-600 text-white hover:bg-primary-700 transition-colors",title:"Agregar",children:jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center justify-between flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"w-6 h-6 text-primary-600"}),Yn?"Repuestos":"Catlogo de repuestos",jsxRuntimeExports.jsxs("span",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:["(",Ms.length," de ",In.length,")",Yn&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Gr.solicitud&&jsxRuntimeExports.jsxs("span",{className:"ml-2",children:[" Solicitud: ",Gr.solicitud]}),Gr.stock&&jsxRuntimeExports.jsxs("span",{className:"ml-2",children:[" Stock: ",Gr.stock]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Un&&jsxRuntimeExports.jsxs("button",{onClick:Ts,className:"flex items-center gap-2 px-3 py-2.5 border border-orange-300 bg-orange-50 text-orange-700 rounded-lg hover:bg-orange-100 transition-colors",title:`Ir a ${Un.codigoSAP}`,children:[jsxRuntimeExports.jsx(History,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"ltimo editado"})]}),Er&&jsxRuntimeExports.jsxs("button",{onClick:()=>Er(),className:"flex items-center gap-2 px-3 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline text-sm",children:"Gestor de Tags"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Kr(!Fr),className:`flex items-center gap-2 px-3 py-2.5 border rounded-lg transition-colors ${Fr?"border-red-500 bg-red-50 text-red-700":"border-gray-300 hover:bg-gray-50 text-gray-600"}`,title:Fr?"Mostrando sin stock":"Filtrar sin stock",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline text-sm",children:"Sin Stock"})]}),jsxRuntimeExports.jsxs("div",{className:"relative hidden lg:block",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ur(!Xr),className:`flex items-center gap-2 px-3 py-2.5 border rounded-lg transition-colors ${Xr?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:bg-gray-50"}`,title:"Configurar columnas",children:jsxRuntimeExports.jsx(Columns2,{className:"w-4 h-4"})}),Xr&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 z-20",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 border-b border-gray-100 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Columnas visibles"}),jsxRuntimeExports.jsx("button",{onClick:Dn,className:"p-1 text-gray-400 hover:text-gray-600 rounded",title:"Restaurar por defecto",children:jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("div",{className:"p-2 max-h-72 overflow-y-auto",children:Hn.map(An=>jsxRuntimeExports.jsxs("button",{onClick:()=>!An.required&&Ln(An.key),className:`w-full px-3 py-2 text-left text-sm rounded flex items-center gap-2 ${An.required?"text-gray-400 cursor-not-allowed":An.visible?"text-gray-700 hover:bg-gray-50":"text-gray-400 hover:bg-gray-50"}`,disabled:An.required,children:[An.visible?jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:An.visible?"":"line-through",children:An.label}),An.required&&jsxRuntimeExports.jsx("span",{className:"text-[10px] text-gray-400 ml-auto",children:"requerido"})]},An.key))})]})]}),jsxRuntimeExports.jsxs("button",{onClick:xr,className:"flex items-center gap-2 px-4 py-2.5 bg-primary-600 text-white text-base font-medium rounded-lg hover:bg-primary-700 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Agregar"})]})]})]}),Br&&jsxRuntimeExports.jsxs("div",{className:"lg:hidden space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[Un&&jsxRuntimeExports.jsxs("button",{onClick:Ts,className:"flex items-center gap-2 px-3 py-2 border border-orange-300 bg-orange-50 text-orange-700 rounded-xl hover:bg-orange-100 transition-colors",title:`Ir a ${Un.codigoSAP}`,children:[jsxRuntimeExports.jsx(History,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"ltimo editado"})]}),Er&&jsxRuntimeExports.jsxs("button",{onClick:()=>Er(),className:"flex items-center gap-2 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-xl transition-colors hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:[jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Gestor de Tags"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Kr(!Fr),className:`flex items-center gap-2 px-3 py-2 border rounded-xl transition-colors ${Fr?"border-red-500 bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,title:Fr?"Mostrando sin stock":"Filtrar sin stock",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Sin stock"})]}),Yn&&Rr&&jsxRuntimeExports.jsxs("button",{onClick:()=>Vn(!0),className:"flex items-center gap-2 px-3 py-2 rounded-xl font-medium transition-colors bg-primary-600 hover:bg-primary-700 text-white",title:"Agregar repuestos a la lista activa",children:[jsxRuntimeExports.jsx(ListPlus,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Agregar a lista"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>fn(!on),className:`flex items-center gap-2 px-3 py-2 border rounded-xl transition-colors ${on||Zr!==null||tn!==null||dn||rn?"border-primary-500 bg-primary-50 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 dark:border-primary-700":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,title:"Filtros avanzados",children:[jsxRuntimeExports.jsx(SlidersHorizontal,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Filtros"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap items-center gap-3 px-3 py-3 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-200 uppercase mb-2",children:"Contextos activos"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Gr.solicitud||"",onChange:An=>Vr(Vs=>({...Vs,solicitud:An.target.value||null})),className:`w-full px-3 py-2 text-sm font-medium rounded-xl border transition-colors appearance-none cursor-pointer ${Gr.solicitud?"bg-blue-100 dark:bg-blue-900/50 border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:" Solicitud..."}),Jn.filter(An=>An.tipo==="solicitud").map(An=>jsxRuntimeExports.jsxs("option",{value:An.nombre,children:[" ",An.nombre]},An.nombre))]}),jsxRuntimeExports.jsx(ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 pointer-events-none text-gray-400 dark:text-gray-300"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Gr.stock||"",onChange:An=>Vr(Vs=>({...Vs,stock:An.target.value||null})),className:`w-full px-3 py-2 text-sm font-medium rounded-xl border transition-colors appearance-none cursor-pointer ${Gr.stock?"bg-green-100 dark:bg-green-900/50 border-green-300 dark:border-green-600 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:" Stock..."}),Jn.filter(An=>An.tipo==="stock").map(An=>jsxRuntimeExports.jsxs("option",{value:An.nombre,children:[" ",An.nombre]},An.nombre))]}),jsxRuntimeExports.jsx(ChevronDown,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 pointer-events-none text-gray-400 dark:text-gray-300"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[Yn&&jsxRuntimeExports.jsx("button",{onClick:()=>Vr({solicitud:null,stock:null}),className:"flex-1 px-3 py-2 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Limpiar contextos",children:"Limpiar contextos"}),jsxRuntimeExports.jsxs("button",{onClick:()=>es(!0),disabled:!Yn&&!Or||!Ir&&!Or,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-xl transition-colors border ${Ir||Or?"text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 border-gray-300 dark:border-gray-600":"text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 opacity-60 cursor-not-allowed"}`,title:!Ir&&!Or?"Importacin no disponible":Yn?"Importar desde Excel (puede ser catlogo o contexto)":"Importar solo al catlogo (sin contexto)",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-4 h-4"}),"Importar"]})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex flex-wrap items-center gap-3 px-4 py-3 bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 rounded-xl border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 pr-4 border-r border-gray-300 dark:border-gray-600",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-200 uppercase mb-1",children:"Contextos Activos"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Gr.solicitud||"",onChange:An=>Vr(Vs=>({...Vs,solicitud:An.target.value||null})),className:`px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors min-w-[150px] appearance-none cursor-pointer ${Gr.solicitud?"bg-blue-100 dark:bg-blue-900/50 border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-200"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:" Solicitud..."}),Jn.filter(An=>An.tipo==="solicitud").map(An=>jsxRuntimeExports.jsxs("option",{value:An.nombre,children:[" ",An.nombre]},An.nombre))]}),jsxRuntimeExports.jsx(ChevronDown,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 pointer-events-none text-gray-400 dark:text-gray-300"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("select",{value:Gr.stock||"",onChange:An=>Vr(Vs=>({...Vs,stock:An.target.value||null})),className:`px-3 py-1.5 text-sm font-medium rounded-lg border transition-colors min-w-[150px] appearance-none cursor-pointer ${Gr.stock?"bg-green-100 dark:bg-green-900/50 border-green-300 dark:border-green-600 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-800 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-200"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:" Stock..."}),Jn.filter(An=>An.tipo==="stock").map(An=>jsxRuntimeExports.jsxs("option",{value:An.nombre,children:[" ",An.nombre]},An.nombre))]}),jsxRuntimeExports.jsx(ChevronDown,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-4 h-4 pointer-events-none text-gray-400 dark:text-gray-300"})]}),Yn&&jsxRuntimeExports.jsx("button",{onClick:()=>Vr({solicitud:null,stock:null}),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Limpiar contextos",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("button",{onClick:()=>es(!0),disabled:!Yn&&!Or||!Ir&&!Or,className:`flex items-center gap-1 px-2 py-1.5 text-xs font-medium rounded-lg transition-colors border ${Ir||Or?"text-gray-700 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 border-gray-300 dark:border-gray-600":"text-gray-400 dark:text-gray-500 border-gray-200 dark:border-gray-700 opacity-60 cursor-not-allowed"}`,title:!Ir&&!Or?"Importacin no disponible":Yn?"Importar desde Excel (puede ser catlogo o contexto)":"Importar solo al catlogo (sin contexto)",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-4 h-4"}),"Importar"]})]})]})}),Ks.sinContexto?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"text-center px-3",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"En lista"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold text-gray-700 dark:text-gray-200",children:Ms.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 pr-4 border-r border-gray-300 dark:border-gray-600",children:[Gr.solicitud&&jsxRuntimeExports.jsxs("div",{className:"text-center group relative cursor-help",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-500 dark:text-blue-400 uppercase flex items-center gap-1 justify-center",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3 h-3"}),"Solicitado"]}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Ks.totalSolicitado.toLocaleString()}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:['Unidades solicitadas en "',Gr.solicitud,'"',jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]}),Gr.stock&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"text-center group relative cursor-help",children:[jsxRuntimeExports.jsxs("div",{className:"text-xs text-green-500 dark:text-green-400 uppercase flex items-center gap-1 justify-center",children:[jsxRuntimeExports.jsx(Package,{className:"w-3 h-3"}),"En Bodega"]}),jsxRuntimeExports.jsx("div",{className:`text-lg font-bold ${Ks.totalBodega>0?"text-green-600 dark:text-green-400":"text-gray-400"}`,children:Ks.totalBodega.toLocaleString()}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:['Unidades en bodega en "',Gr.stock,'"',jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Kr(!Fr),className:`text-center cursor-pointer rounded-lg px-2 py-1 transition-colors group relative ${Fr?"bg-red-100 dark:bg-red-900/50":"hover:bg-red-50 dark:hover:bg-red-900/30"}`,children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-red-500 dark:text-red-400 uppercase",children:"Sin Stock"}),jsxRuntimeExports.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:Ms.filter(An=>Ss(An,"stock")===0).length}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:["Repuestos con stock = 0 (click para filtrar)",jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[Gr.solicitud&&jsxRuntimeExports.jsxs("div",{className:"text-center group relative cursor-help",children:[jsxRuntimeExports.jsx("div",{className:"text-xs uppercase font-semibold text-blue-500 dark:text-blue-400",children:"USD Solicitado"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold text-blue-700 dark:text-blue-300",children:["$",Ks.totalSolicitadoUSD.toLocaleString("en-US",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:["Valor USD de unidades solicitadas",jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]}),Gr.stock&&jsxRuntimeExports.jsxs("div",{className:"text-center group relative cursor-help",children:[jsxRuntimeExports.jsx("div",{className:"text-xs uppercase font-semibold text-green-500 dark:text-green-400",children:"USD Stock"}),jsxRuntimeExports.jsxs("div",{className:"text-xl font-bold text-green-700 dark:text-green-300",children:["$",Ks.totalStockUSD.toLocaleString("en-US",{minimumFractionDigits:2})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50 pointer-events-none shadow-lg",children:["Valor USD de unidades en bodega",jsxRuntimeExports.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-900 dark:border-t-gray-700"})]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("select",{value:rr,onChange:An=>{zn(!1),nr==null||nr(An.target.value)},className:"px-3 py-2.5 lg:py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Alcance del buscador",children:[jsxRuntimeExports.jsx("option",{value:"machine",children:"Mquina actual"}),jsxRuntimeExports.jsx("option",{value:"selected",children:"Mquinas seleccionadas"}),jsxRuntimeExports.jsx("option",{value:"global",children:"Catlogo completo"})]}),rr==="selected"&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>zn(An=>!An),className:"px-3 py-2.5 lg:py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl text-sm hover:bg-gray-50 dark:hover:bg-gray-600",title:"Seleccionar mquinas",children:sr.length>0?`Mquinas: ${sr.length}`:"Elegir mquinas"}),En&&jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-0 mt-1 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg z-50 p-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 px-2 py-1",children:"Selecciona las mquinas donde buscar"}),jsxRuntimeExports.jsx("div",{className:"max-h-60 overflow-y-auto",children:gn.map(An=>{const Vs=sr.includes(An.id);return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 px-2 py-1.5 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Vs,onChange:Fs=>{const Cs=Fs.target.checked?Array.from(new Set([...sr,An.id])):sr.filter(Ns=>Ns!==An.id);ar==null||ar(Cs)}}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-100 truncate",children:An.nombre})]},An.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ar==null?void 0:ar([]),className:"text-xs px-2 py-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300",children:"Limpiar"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>zn(!1),className:"text-xs px-2 py-1 rounded-lg bg-primary-600 text-white hover:bg-primary-700",children:"Listo"})]})]})]}),pn&&lr&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-300",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Cargando..."]})]}),jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:Lr,onChange:An=>Cr(An.target.value),placeholder:pn?rr==="selected"?"Buscar en mquinas seleccionadas...":"Buscar en el catlogo completo...":Yn?"Buscar en contextos activos...":"Buscar por cdigo SAP, Baader o descripcin...",className:"w-full pl-12 pr-4 py-2.5 lg:py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white rounded-xl text-base focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),Yn&&!pn&&Rr&&jsxRuntimeExports.jsxs("button",{onClick:()=>Vn(!0),className:"flex items-center gap-2 px-4 py-3 rounded-xl font-medium transition-colors bg-primary-600 hover:bg-primary-700 text-white",title:"Agregar repuestos a la lista activa",children:[jsxRuntimeExports.jsx(ListPlus,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Agregar a lista"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>fn(!on),className:`hidden lg:flex items-center gap-2 px-4 py-3 border rounded-xl transition-colors ${on||Zr!==null||tn!==null||dn||rn?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-300 hover:bg-gray-50"}`,title:"Filtros avanzados",children:jsxRuntimeExports.jsx(SlidersHorizontal,{className:"w-5 h-5"})})]}),on&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl border border-gray-200 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-semibold text-gray-700 flex items-center gap-2",children:[jsxRuntimeExports.jsx(SlidersHorizontal,{className:"w-4 h-4"}),"Filtros Avanzados"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{Jr(null),an(null),en(""),sn("")},className:"text-xs text-gray-500 hover:text-gray-700",children:"Limpiar filtros"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:[jsxRuntimeExports.jsx(BookMarked,{className:"w-3 h-3 inline mr-1"}),"Marcador en Manual"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Jr(null),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${Zr===null?"bg-primary-100 border-primary-500 text-primary-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Todos"}),jsxRuntimeExports.jsx("button",{onClick:()=>Jr(!0),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${Zr===!0?"bg-green-100 border-green-500 text-green-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Con marcador"}),jsxRuntimeExports.jsx("button",{onClick:()=>Jr(!1),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${Zr===!1?"bg-orange-100 border-orange-500 text-orange-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Sin marcador"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:[jsxRuntimeExports.jsx(Tag,{className:"w-3 h-3 inline mr-1"}),"Contexto/Evento Asignado"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>an(null),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${tn===null?"bg-primary-100 border-primary-500 text-primary-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Todos"}),jsxRuntimeExports.jsx("button",{onClick:()=>an(!1),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${tn===!1?"bg-green-100 border-green-500 text-green-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Con tag"}),jsxRuntimeExports.jsx("button",{onClick:()=>an(!0),className:`flex-1 px-3 py-2 text-xs rounded-lg border transition-colors ${tn===!0?"bg-red-100 border-red-500 text-red-700":"bg-white border-gray-200 hover:bg-gray-50"}`,children:"Sin tag"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:[jsxRuntimeExports.jsx(DollarSign,{className:"w-3 h-3 inline mr-1"}),"Rango de Precio (USD)"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:dn,onChange:An=>en(An.target.value),placeholder:"Mnimo",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"-"}),jsxRuntimeExports.jsx("input",{type:"number",value:rn,onChange:An=>sn(An.target.value),placeholder:"Mximo",className:"flex-1 px-3 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]})]})]}),Mr.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["Filtrado por (",$r,"):"]}),Mr.map(An=>jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm font-medium",children:[jsxRuntimeExports.jsx(Tag,{className:"w-3 h-3"}),An,jsxRuntimeExports.jsx("button",{onClick:()=>qr(Mr.filter(Vs=>Vs!==An)),className:"ml-1 hover:text-primary-900",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]},An)),jsxRuntimeExports.jsx("button",{onClick:()=>qr([]),className:"text-xs text-gray-500 hover:text-gray-700 underline",children:"Limpiar filtros"})]}),Ps>0&&Mr.length===0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-2.5 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-5 h-5"}),jsxRuntimeExports.jsxs("span",{children:[Ps," repuestos sin ubicacin en el manual"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto hidden lg:block",children:[rr==="selected"&&!Pn&&jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("div",{className:"p-3 rounded-xl border border-amber-300 dark:border-amber-700 bg-amber-50 dark:bg-amber-900/20 text-sm text-amber-800 dark:text-amber-200",children:"Selecciona al menos una mquina para buscar."})}),jsxRuntimeExports.jsxs("table",{className:"w-full",children:[jsxRuntimeExports.jsx("thead",{className:"sticky top-0",children:jsxRuntimeExports.jsxs("tr",{children:[pn&&jsxRuntimeExports.jsx("th",{className:"px-3 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-50 dark:bg-gray-800 dark:text-gray-300",children:"Mquina"}),Cn("codigoSAP")&&Is("codigoSAP"),Cn("codigoBaader")&&Is("codigoBaader"),Cn("textoBreve")&&Is("textoBreve"),Cn("descripcion")&&Is("descripcion"),Cn("nombreManual")&&Is("nombreManual"),Cn("tagsSolicitud")&&Is("tagsSolicitud"),Cn("tagsStock")&&Is("tagsStock"),Cn("cantidadSolicitada")&&Is("cantidadSolicitada"),Cn("totalSolicitadoUSD")&&Is("totalSolicitadoUSD"),Cn("cantidadStockBodega")&&Is("cantidadStockBodega"),Cn("totalStockUSD")&&Is("totalStockUSD"),Cn("valorUnitario")&&Is("valorUnitario"),Cn("totalUSD")&&Is("totalUSD"),Cn("acciones")&&Is("acciones")]})}),jsxRuntimeExports.jsxs("tbody",{children:[ao.map(An=>{var Ns,Ys;const Vs=An.vinculosManual&&An.vinculosManual.length>0,Fs=(Un==null?void 0:Un.id)===An.id,Cs=An;return jsxRuntimeExports.jsxs("tr",{id:`repuesto-${An.id}`,onClick:()=>{if(pn){or&&Cs.machineId&&or(Cs.machineId,An.id);return}fr((dr==null?void 0:dr.id)===An.id?null:An)},className:`
                    border-b cursor-pointer transition-colors group
                    ${Fs?"bg-orange-100/50 dark:bg-orange-900/30 border-orange-300 border-2":(dr==null?void 0:dr.id)===An.id?"bg-primary-500/15 dark:bg-primary-500/20 border-primary-200 dark:border-primary-700 ring-1 ring-inset ring-primary-400/40 dark:ring-primary-400/30":"border-gray-100 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700"}
                  `,children:[pn&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),or&&Cs.machineId&&or(Cs.machineId,An.id)},className:"text-sm font-medium text-primary-700 dark:text-primary-300 hover:underline",title:"Cambiar a esta mquina y ubicar el repuesto",children:Cs.machineNombre||Cs.machineId})}),Cn("codigoSAP")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded font-bold text-gray-800 dark:text-gray-200",children:An.codigoSAP}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),Nn(An.codigoSAP,`sap-${An.id}`)},className:"p-1 rounded-lg hover:bg-gray-200 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar cdigo SAP",children:Ar===`sap-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]})}),Cn("codigoBaader")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-sm text-primary-700 dark:text-primary-400 font-bold",children:An.codigoBaader}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),Nn(An.codigoBaader,`baader-${An.id}`)},className:"p-1 rounded-lg hover:bg-gray-200 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar cdigo Baader",children:Ar===`baader-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]})}),Cn("textoBreve")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 min-w-[200px] max-w-[300px]",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-200 line-clamp-2",title:An.textoBreve,children:An.textoBreve}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),Nn(An.textoBreve,`sap-${An.id}`)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-200 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar",children:Ar===`sap-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3"})})]})}),Cn("descripcion")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 min-w-[250px] max-w-[400px]",children:jsxRuntimeExports.jsx("div",{className:"space-y-0.5",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[An.descripcion?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300 line-clamp-2",title:An.descripcion,children:An.descripcion}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),Nn(An.descripcion,`desc-${An.id}`)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-200 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar",children:Ar===`desc-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3"})})]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 italic",children:"-"}),!Vs&&vr&&jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),vr(An)},className:"flex-shrink-0 p-1 rounded bg-amber-100 text-amber-600 hover:bg-amber-200 transition-colors",title:"Marcar ubicacin en manual",children:jsxRuntimeExports.jsx(MapPin,{className:"w-3 h-3"})})]})})}),Cn("nombreManual")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:An.nombreManual?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[150px]",title:An.nombreManual,children:An.nombreManual}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),Nn(An.nombreManual||"",`manual-${An.id}`)},className:"flex-shrink-0 p-1 rounded hover:bg-gray-200 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar",children:Ar===`manual-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3 h-3"})})]}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 italic",children:"-"})}),Cn("tagsSolicitud")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:An.tags&&An.tags.filter(js=>isTagAsignado(js)&&js.tipo==="solicitud").length>0?jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:An.tags.filter(js=>isTagAsignado(js)&&js.tipo==="solicitud").map((js,Js)=>{const to=js;return jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-semibold bg-blue-50 text-blue-800 border border-blue-200",title:`${to.nombre} (solicitud: ${to.cantidad})`,children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3 h-3"}),to.nombre.length>15?to.nombre.substring(0,15)+"...":to.nombre,jsxRuntimeExports.jsxs("span",{className:"text-[10px] opacity-70",children:["(",to.cantidad,")"]})]},`${to.nombre}-${Js}`)})}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 italic",children:"-"})}),Cn("tagsStock")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:An.tags&&An.tags.filter(js=>isTagAsignado(js)&&js.tipo==="stock").length>0?jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:An.tags.filter(js=>isTagAsignado(js)&&js.tipo==="stock").map((js,Js)=>{const to=js;return jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-md text-xs font-semibold bg-green-50 text-green-800 border border-green-200",title:`${to.nombre} (stock: ${to.cantidad})`,children:[jsxRuntimeExports.jsx(Package,{className:"w-3 h-3"}),to.nombre.length>15?to.nombre.substring(0,15)+"...":to.nombre,jsxRuntimeExports.jsxs("span",{className:"text-[10px] opacity-70",children:["(",to.cantidad,")"]})]},`${to.nombre}-${Js}`)})}):jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400 italic",children:"-"})}),Cn("cantidadSolicitada")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:Gr.solicitud?jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),ns(An,"cantidadSolicitada")},className:"text-lg font-bold px-3 py-1.5 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 transition-colors min-w-[60px]",title:`Cantidad en "${Gr.solicitud}" - Ver historial`,children:Ss(An,"solicitud")}):jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"--"})}),Cn("totalSolicitadoUSD")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:Gr.solicitud?jsxRuntimeExports.jsxs("span",{className:"text-base font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap",children:["$",(An.valorUnitario*Ss(An,"solicitud")).toLocaleString("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"--"})}),Cn("cantidadStockBodega")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:Gr.stock?(()=>{const js=Ss(An,"stock");return jsxRuntimeExports.jsx("button",{onClick:Js=>{Js.stopPropagation(),ns(An,"cantidadStockBodega")},className:`
                            px-3 py-1.5 rounded-md text-lg font-bold transition-colors min-w-[60px]
                            ${js>0?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400 hover:bg-green-200 dark:hover:bg-green-900/60":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}
                          `,title:`Stock en "${Gr.stock}" - Ver historial`,children:js})})():jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"--"})}),Cn("totalStockUSD")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:Gr.stock?jsxRuntimeExports.jsxs("span",{className:"text-base font-bold text-green-600 dark:text-green-400 whitespace-nowrap",children:["$",(An.valorUnitario*Ss(An,"stock")).toLocaleString("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"--"})}),Cn("valorUnitario")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 whitespace-nowrap",children:["$",((Ns=An.valorUnitario)==null?void 0:Ns.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"]})}),Cn("totalUSD")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2 text-center",children:Yn?jsxRuntimeExports.jsxs("span",{className:"text-lg font-black text-gray-900 dark:text-white whitespace-nowrap bg-yellow-50 dark:bg-yellow-900/30 px-2.5 py-0.5 rounded-md",children:["$",(An.valorUnitario*Ss(An,"solicitud")+An.valorUnitario*Ss(An,"stock")).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"--"})}),Cn("acciones")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),pr(An)},className:`p-1.5 rounded-lg transition-colors ${Vs?"hover:bg-primary-100 text-primary-600":"hover:bg-gray-100 text-gray-400"}`,title:Vs?"Ver en manual":"Ir al manual",children:jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),mr(An)},className:`p-1.5 rounded-lg transition-colors ${((Ys=An.fotosReales)==null?void 0:Ys.length)>0?"hover:bg-gray-100 text-gray-600":"hover:bg-gray-100 text-gray-300"}`,title:"Fotos reales",children:jsxRuntimeExports.jsx(Camera,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),yr(An)},className:"p-1.5 rounded-lg hover:bg-gray-100 text-gray-500 transition-colors",title:"Ver historial completo",children:jsxRuntimeExports.jsx(History,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),gr(An)},className:"p-1.5 rounded-lg hover:bg-blue-50 text-gray-500 hover:text-blue-600 transition-colors",title:"Editar",children:jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:js=>{js.stopPropagation(),br(An)},className:"p-1.5 rounded-lg hover:bg-red-50 text-gray-500 hover:text-red-600 transition-colors",title:"Eliminar",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})]},An.id)}),ao.length>0&&jsxRuntimeExports.jsxs("tr",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/30 dark:to-blue-900/30 border-t-2 border-purple-300 dark:border-purple-700 font-bold",children:[Cn("codigoSAP")&&jsxRuntimeExports.jsxs("td",{className:"px-3 py-2 text-left",children:[jsxRuntimeExports.jsx("span",{className:"text-purple-700 dark:text-purple-300 font-bold",children:"TOTALES"}),!Yn&&jsxRuntimeExports.jsx("span",{className:"block text-xs font-normal text-amber-600 dark:text-amber-400",children:"Selecciona contexto"})]}),Cn("codigoBaader")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("textoBreve")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("descripcion")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("nombreManual")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("tagsSolicitud")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("tagsStock")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("cantidadSolicitada")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-center",children:Gr.solicitud?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1.5 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded-md font-bold text-sm",children:Ks.totalSolicitado}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),Cn("totalSolicitadoUSD")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right",children:Gr.solicitud?jsxRuntimeExports.jsxs("span",{className:"text-blue-700 dark:text-blue-300 font-bold text-sm",title:" (Valor Unitario  Cantidad Solicitada)",children:["$",Ks.totalSolicitadoUSD.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),Cn("cantidadStockBodega")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-center",children:Gr.stock?jsxRuntimeExports.jsx("span",{className:"inline-block px-3 py-1.5 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200 rounded-md font-bold text-sm",children:Ks.totalBodega}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),Cn("totalStockUSD")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right",children:Gr.stock?jsxRuntimeExports.jsxs("span",{className:"text-green-700 dark:text-green-300 font-bold text-sm",title:" (Valor Unitario  Stock en Bodega)",children:["$",Ks.totalStockUSD.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),Cn("valorUnitario")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2"}),Cn("totalUSD")&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right",children:Yn?jsxRuntimeExports.jsxs("span",{className:"text-purple-700 dark:text-purple-300 font-bold text-base",title:"Total Solicitado + Total Stock",children:["$",Ks.totalUSD.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"--"})}),Cn("acciones")&&jsxRuntimeExports.jsx("td",{className:"px-2 py-2"})]})]})]}),Ms.length===0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500",children:[jsxRuntimeExports.jsx(Package,{className:"w-16 h-16 mb-4 opacity-40"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"No se encontraron repuestos"}),Lr&&jsxRuntimeExports.jsx("button",{onClick:()=>Cr(""),className:"mt-3 text-primary-600 hover:underline font-medium",children:"Limpiar bsqueda"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto lg:hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-3 space-y-2",children:ao.map(An=>{var mo,Eo;const Vs=An.vinculosManual&&An.vinculosManual.length>0,Fs=(Un==null?void 0:Un.id)===An.id,Cs=(dr==null?void 0:dr.id)===An.id,Ns=!!Gr.solicitud,Ys=!!Gr.stock,js=Ns?Ss(An,"solicitud"):0,Js=Ys?Ss(An,"stock"):0,to=Ns||Ys?(An.valorUnitario||0)*(js+Js):0;return jsxRuntimeExports.jsxs("div",{onClick:()=>fr((dr==null?void 0:dr.id)===An.id?null:An),className:`
                  bg-white dark:bg-gray-800 rounded-xl border p-3 cursor-pointer transition-all
                  ${Fs?"border-orange-400 dark:border-orange-500 bg-orange-50 dark:bg-orange-900/20 shadow-sm":Cs?"border-primary-400 dark:border-primary-400 bg-primary-500/10 dark:bg-primary-500/15 shadow-sm":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}
                `,children:[Fs&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-orange-600 dark:text-orange-400 mb-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full"}),"ltimo editado"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide",children:"SAP"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-sm bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-lg font-bold text-gray-800 dark:text-gray-200 truncate",children:An.codigoSAP}),jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),Nn(An.codigoSAP,`sap-m-${An.id}`)},className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 transition-colors",children:Ar===`sap-m-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wide",children:"Part#"}),jsxRuntimeExports.jsx("span",{className:"font-mono text-sm text-primary-600 dark:text-primary-400 font-bold",children:An.codigoBaader}),jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),Nn(An.codigoBaader,`baader-m-${An.id}`)},className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-400 transition-colors",children:Ar===`baader-m-${An.id}`?jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-green-500"}):jsxRuntimeExports.jsx(Copy,{className:"w-3.5 h-3.5"})})]})]}),!Vs&&vr&&jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),vr(An)},className:"p-2 rounded-xl bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400",title:"Marcar en manual",children:jsxRuntimeExports.jsx(MapPin,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 space-y-1",children:[An.textoBreve&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200 font-medium line-clamp-2",children:An.textoBreve}),An.descripcion&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:An.descripcion}),An.nombreManual&&An.nombreManual!==An.textoBreve&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-primary-600 dark:text-primary-400 italic line-clamp-1",children:["Manual: ",An.nombreManual]}),!An.textoBreve&&!An.descripcion&&!An.nombreManual&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 italic",children:"Sin descripcin"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-300 flex flex-wrap gap-x-2 gap-y-1",children:[Ns&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:js})]}),Ys&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx(Package,{className:"w-3.5 h-3.5 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:Js})]}),jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"V.U."}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["$",((mo=An.valorUnitario)==null?void 0:mo.toLocaleString("en-US",{minimumFractionDigits:2}))||"0.00"]})]}),(Ns||Ys)&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"Total"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["$",to.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),pr(An)},className:`p-2 rounded-xl transition-colors ${Vs?"bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400":"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:"Ver en manual",children:jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),mr(An)},className:`p-2 rounded-xl transition-colors ${((Eo=An.fotosReales)==null?void 0:Eo.length)>0?"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400":"bg-gray-100 dark:bg-gray-700 text-gray-300 dark:text-gray-600"}`,title:"Fotos",children:jsxRuntimeExports.jsx(Camera,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),yr(An)},className:"p-2 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 transition-colors",title:"Historial",children:jsxRuntimeExports.jsx(History,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1.5",children:[jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),gr(An)},className:"p-2 rounded-xl bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400 transition-colors",title:"Editar",children:jsxRuntimeExports.jsx(Pen,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:fo=>{fo.stopPropagation(),br(An)},className:"p-2 rounded-xl bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400 transition-colors",title:"Eliminar",children:jsxRuntimeExports.jsx(Trash2,{className:"w-5 h-5"})})]})]})]},An.id)})}),Ms.length===0&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500",children:[jsxRuntimeExports.jsx(Package,{className:"w-16 h-16 mb-4 opacity-40"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"No se encontraron repuestos"}),Lr&&jsxRuntimeExports.jsx("button",{onClick:()=>Cr(""),className:"mt-3 text-primary-600 hover:underline font-medium",children:"Limpiar bsqueda"})]})]}),Qs>1&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 font-medium",children:["Mostrando ",eo+1,"-",Math.min(eo+ITEMS_PER_PAGE,Ms.length)," de ",Ms.length]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Pr(An=>Math.max(1,An-1)),disabled:wr===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Qs)},(An,Vs)=>{let Fs;return Qs<=5||wr<=3?Fs=Vs+1:wr>=Qs-2?Fs=Qs-4+Vs:Fs=wr-2+Vs,jsxRuntimeExports.jsx("button",{onClick:()=>Pr(Fs),className:`w-10 h-10 rounded-lg text-sm font-semibold transition-colors ${wr===Fs?"bg-primary-600 text-white":"hover:bg-white border border-gray-300"}`,children:Fs},Fs)})}),jsxRuntimeExports.jsx("button",{onClick:()=>Pr(An=>Math.min(Qs,An+1)),disabled:wr===Qs,className:"p-2 rounded-lg border border-gray-300 hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx(HistorialCampoModal,{isOpen:Gn.isOpen,onClose:()=>Qn({...Gn,isOpen:!1}),campo:Gn.campo,historial:Gn.historial}),is&&Bn&&Rr&&jsxRuntimeExports.jsx(AddToListModal,{isOpen:yn,onClose:()=>Vn(!1),allRepuestos:er,currentContextTag:is,currentContextTipo:Bn,onAddToList:(An,Vs)=>{Rr(An,is,Vs,Bn)}}),jsxRuntimeExports.jsx(ImportQuantitiesModal,{isOpen:Kn,onClose:()=>es(!1),activeSolicitudTag:Gr.solicitud,activeStockTag:Gr.stock,repuestos:er,onImport:bs})]})}function TagEventSelector({tags:tr,onTagsChange:er,valorUnitario:rr,allRepuestos:nr,machineId:ir}){const{tags:sr,addTag:ar,getTagTipo:cr}=useTags(nr,ir),[lr,or]=reactExports.useState(!1),[ur,hr]=reactExports.useState(""),[dr,fr]=reactExports.useState(0),[gr,br]=reactExports.useState(""),pr=tr.map(Er=>{if(isTagAsignado(Er))return Er;const Tr=cr(Er)||"solicitud";return{nombre:Er,tipo:Tr,cantidad:0,fecha:new Date}}),mr=sr.filter(Er=>!pr.some(Rr=>Rr.nombre===Er.nombre)),yr=gr?cr(gr):ur.trim()?ur.toLowerCase().includes("stock")?"stock":"solicitud":null,xr=()=>{const Er=gr||ur.trim();if(!Er||dr<0)return;const Tr=cr(Er)||(Er.toLowerCase().includes("stock")?"stock":"solicitud"),Rr={nombre:Er,tipo:Tr,cantidad:dr,fecha:new Date};sr.some(Ir=>Ir.nombre===Er)||ar(Er,Tr);const Nr=[...pr],Dr=Nr.findIndex(Ir=>Ir.nombre===Er);Dr>=0?Nr[Dr]=Rr:Nr.push(Rr),er(Nr),hr(""),fr(0),br(""),or(!1)},vr=Er=>{const Tr=pr.filter(Rr=>Rr.nombre!==Er);er(Tr)},_r=(Er,Tr)=>{const Rr=pr.map(Nr=>Nr.nombre===Er?{...Nr,cantidad:Tr}:Nr);er(Rr)};return jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("label",{className:"text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4"}),"Tags / Eventos"]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>or(!lr),className:"text-xs sm:text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 font-medium flex items-center gap-1 whitespace-nowrap",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Asignar tag"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 min-h-[40px]",children:pr.length===0?jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-400 dark:text-gray-500 italic py-2",children:"Sin tags asignados - Los valores no se mostrarn hasta seleccionar un contexto"}):pr.map(Er=>jsxRuntimeExports.jsxs("div",{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1.5 sm:gap-3 p-1.5 sm:p-3 rounded-lg border ${Er.tipo==="solicitud"?"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800":"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start sm:items-center gap-2 sm:gap-3 min-w-0",children:[Er.tipo==="solicitud"?jsxRuntimeExports.jsx(ShoppingCart,{className:"w-4 h-4 sm:w-5 sm:h-5 text-blue-500 flex-shrink-0"}):jsxRuntimeExports.jsx(Package,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-500 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200 text-[13px] sm:text-base truncate",children:Er.nombre}),jsxRuntimeExports.jsx("span",{className:`px-1 py-0.5 text-[9px] sm:text-xs font-medium rounded-full flex-shrink-0 ${Er.tipo==="solicitud"?"bg-blue-200 text-blue-800":"bg-green-200 text-green-800"}`,children:Er.tipo==="solicitud"?" Solicitud":" Stock"})]}),Er.fecha&&jsxRuntimeExports.jsxs("span",{className:"hidden sm:flex text-[10px] sm:text-xs text-gray-400 items-center gap-1",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-3 h-3 flex-shrink-0"}),(()=>{try{const Tr=Er.fecha instanceof Date?Er.fecha:new Date(Er.fecha);return isNaN(Tr.getTime())?"":Tr.toLocaleDateString("es-CL")}catch{return""}})()]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-[11px] sm:text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap",children:Er.tipo==="solicitud"?"Cant:":"Stock:"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:Er.cantidad,onChange:Tr=>_r(Er.nombre,parseInt(Tr.target.value)||0),className:"w-12 sm:w-20 px-1.5 py-1 text-center text-xs sm:text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-1 focus:ring-primary-500"})]}),jsxRuntimeExports.jsxs("span",{className:"text-[11px] sm:text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:["$",(Er.cantidad*rr).toLocaleString("en-US",{minimumFractionDigits:0})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>vr(Er.nombre),className:"w-9 h-9 sm:w-auto sm:h-auto sm:p-1 flex items-center justify-center hover:bg-red-100 dark:hover:bg-red-900/30 rounded text-red-500 transition-colors",title:"Quitar tag",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})]},Er.nombre))}),lr&&jsxRuntimeExports.jsxs("div",{className:"border border-primary-200 dark:border-primary-800 rounded-lg p-3 sm:p-4 bg-primary-50 dark:bg-primary-900/20 space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Asignar evento/tag"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Tag/Evento:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("select",{value:gr,onChange:Er=>{br(Er.target.value),hr("")},className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleccionar existente --"}),mr.map(Er=>jsxRuntimeExports.jsxs("option",{value:Er.nombre,children:[Er.tipo==="solicitud"?"":""," ",Er.nombre]},Er.nombre))]}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 self-center",children:"o"}),jsxRuntimeExports.jsx("input",{type:"text",value:ur,onChange:Er=>{hr(Er.target.value),br("")},placeholder:"Crear nuevo...",className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-primary-500"})]})]}),yr&&jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg text-sm ${yr==="solicitud"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:[yr==="solicitud"?jsxRuntimeExports.jsx(ShoppingCart,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(Package,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{children:["Este tag es de tipo ",jsxRuntimeExports.jsx("strong",{children:yr==="solicitud"?"Solicitud":"Stock"}),ur.trim()&&!sr.some(Er=>Er.nombre===ur.trim())&&jsxRuntimeExports.jsx("span",{className:"text-xs ml-2",children:"(nuevo tag, tipo inferido del nombre)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:yr==="stock"?"Cantidad en Stock:":"Cantidad Solicitada:"}),jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:dr,onChange:Er=>fr(parseInt(Er.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-primary-500",placeholder:yr==="stock"?"Cantidad en bodega":"Cantidad a solicitar"}),dr>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Total: $",(dr*rr).toLocaleString("en-US",{minimumFractionDigits:2})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{or(!1),hr(""),fr(0),br("")},className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:xr,disabled:!gr&&!ur.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Asignar"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3 h-3 text-blue-500"})," Solicitud = cantidad a pedir"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Package,{className:"w-3 h-3 text-green-500"})," Stock = inventario en bodega"]})]})]})}function RepuestoForm({isOpen:tr,onClose:er,onSave:rr,repuesto:nr,allRepuestos:ir,machineId:sr,initialContexts:ar}){const[cr,lr]=reactExports.useState(!1),[or,ur]=reactExports.useState({codigoSAP:"",textoBreve:"",descripcion:"",nombreManual:"",codigoBaader:"",cantidadSolicitada:0,valorUnitario:0,cantidadStockBodega:0,tags:[]});reactExports.useEffect(()=>{if(nr)ur({codigoSAP:nr.codigoSAP,textoBreve:nr.textoBreve,descripcion:nr.descripcion||"",nombreManual:nr.nombreManual||"",codigoBaader:nr.codigoBaader,cantidadSolicitada:nr.cantidadSolicitada,valorUnitario:nr.valorUnitario,cantidadStockBodega:nr.cantidadStockBodega,tags:nr.tags||[]});else{const gr=[];ar!=null&&ar.solicitud&&gr.push({nombre:ar.solicitud,tipo:"solicitud",cantidad:0,fecha:new Date}),ar!=null&&ar.stock&&gr.push({nombre:ar.stock,tipo:"stock",cantidad:0,fecha:new Date}),ur({codigoSAP:"",textoBreve:"",descripcion:"",nombreManual:"",codigoBaader:"",cantidadSolicitada:0,valorUnitario:0,cantidadStockBodega:0,tags:gr})}},[nr,tr,ar==null?void 0:ar.solicitud,ar==null?void 0:ar.stock]);const hr=async gr=>{gr.preventDefault(),lr(!0);try{await rr(or),er()}catch(br){console.error("Error al guardar:",br)}finally{lr(!1)}},dr=(gr,br)=>{ur(pr=>({...pr,[gr]:br}))},fr=gr=>{ur(br=>({...br,tags:gr}))};return jsxRuntimeExports.jsx(Modal,{isOpen:tr,onClose:er,title:nr?"Editar Repuesto":"Nuevo Repuesto",size:"lg",children:jsxRuntimeExports.jsxs("form",{onSubmit:hr,className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Cdigo SAP",value:or.codigoSAP,onChange:gr=>dr("codigoSAP",gr.target.value),placeholder:"Ej: 10038163",required:!0}),jsxRuntimeExports.jsx(Input,{label:"Cdigo Baader",value:or.codigoBaader,onChange:gr=>dr("codigoBaader",gr.target.value),placeholder:"Ej: 200.1234",required:!0})]}),jsxRuntimeExports.jsx(Input,{label:"Descripcin SAP (Texto Breve)",value:or.textoBreve,onChange:gr=>dr("textoBreve",gr.target.value),placeholder:"Descripcin del repuesto segn SAP",required:!0}),jsxRuntimeExports.jsx(Input,{label:"Nombre segn Manual (opcional)",value:or.nombreManual||"",onChange:gr=>dr("nombreManual",gr.target.value),placeholder:"Nombre del repuesto segn el manual Baader"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin Extendida (opcional)"}),jsxRuntimeExports.jsx("textarea",{value:or.descripcion||"",onChange:gr=>dr("descripcion",gr.target.value),placeholder:"Notas adicionales, observaciones o detalles importantes...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none",rows:2})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 gap-4",children:jsxRuntimeExports.jsx(Input,{label:"Valor Unitario (USD)",type:"number",min:"0",step:"0.01",value:or.valorUnitario,onChange:gr=>dr("valorUnitario",parseFloat(gr.target.value)||0),required:!0})}),jsxRuntimeExports.jsx(TagEventSelector,{tags:or.tags||[],onTagsChange:fr,valorUnitario:or.valorUnitario,allRepuestos:ir,machineId:sr}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"secondary",onClick:er,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",loading:cr,icon:jsxRuntimeExports.jsx(Save,{className:"w-4 h-4"}),children:nr?"Guardar Cambios":"Crear Repuesto"})]})]})})}function HistorialModal({isOpen:tr,onClose:er,repuesto:rr,getHistorial:nr}){const[ir,sr]=reactExports.useState([]),[ar,cr]=reactExports.useState(!1);reactExports.useEffect(()=>{tr&&rr&&(cr(!0),nr(rr.id).then(sr).finally(()=>cr(!1)))},[tr,rr,nr]);const lr=reactExports.useMemo(()=>{const br=new Map;return ir.forEach(pr=>{const mr=new Date(pr.fecha).toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"});br.has(mr)||br.set(mr,[]),br.get(mr).push(pr)}),Array.from(br.entries()).map(([pr,mr])=>({fecha:pr,items:mr.sort((yr,xr)=>new Date(xr.fecha).getTime()-new Date(yr.fecha).getTime())}))},[ir]),or=br=>new Intl.DateTimeFormat("es-CL",{hour:"2-digit",minute:"2-digit"}).format(br),ur=br=>({codigoSAP:"Cdigo SAP",textoBreve:"Descripcin SAP",descripcion:"Descripcin Extendida",nombreManual:"Nombre Manual",codigoBaader:"Cdigo Baader",cantidadSolicitada:"Cantidad Solicitada",cantidadStockBodega:"Stock Bodega",valorUnitario:"Valor Unitario",total:"Total",tags:"Tags",creacion:"Creacin"})[br]||br,hr=br=>{switch(br){case"cantidadSolicitada":case"cantidadStockBodega":return jsxRuntimeExports.jsx(Package,{className:"w-4 h-4"});case"valorUnitario":case"total":return jsxRuntimeExports.jsx(DollarSign,{className:"w-4 h-4"});case"codigoSAP":case"codigoBaader":return jsxRuntimeExports.jsx(Hash$2,{className:"w-4 h-4"});case"creacion":return jsxRuntimeExports.jsx(CirclePlus,{className:"w-4 h-4"});default:return jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"})}},dr=br=>{switch(br){case"cantidadSolicitada":return"bg-blue-100 text-blue-700 border-blue-200";case"cantidadStockBodega":return"bg-green-100 text-green-700 border-green-200";case"valorUnitario":case"total":return"bg-amber-100 text-amber-700 border-amber-200";case"creacion":return"bg-purple-100 text-purple-700 border-purple-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},fr=br=>{if(!["cantidadSolicitada","cantidadStockBodega","valorUnitario","total"].includes(br.campo))return null;const mr=Number(br.valorAnterior)||0,yr=Number(br.valorNuevo)||0;return yr>mr?jsxRuntimeExports.jsx(TrendingUp,{className:"w-3 h-3 text-green-500"}):yr<mr?jsxRuntimeExports.jsx(TrendingDown,{className:"w-3 h-3 text-red-500"}):jsxRuntimeExports.jsx(Minus,{className:"w-3 h-3 text-gray-400"})},gr=(br,pr)=>{if(pr==null||pr==="")return"-";if(br==="valorUnitario"||br==="total"){const mr=Number(pr);return isNaN(mr)?String(pr):`$${mr.toLocaleString("en-US",{minimumFractionDigits:2})}`}return String(pr)};return jsxRuntimeExports.jsxs(Modal,{isOpen:tr,onClose:er,title:"Historial de Cambios",size:"lg",children:[rr&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 text-primary-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-mono font-semibold text-gray-800",children:rr.codigoBaader}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:rr.textoBreve||rr.descripcion})]})]})}),ar?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center py-12",children:jsxRuntimeExports.jsx("div",{className:"spinner"})}):ir.length===0?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[jsxRuntimeExports.jsx(Clock,{className:"w-16 h-16 mb-4 opacity-30"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"No hay cambios registrados"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Los cambios aparecern aqu cuando edites este repuesto"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto pr-2",children:lr.map(br=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 bg-white py-2 z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-gray-200"}),jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide px-2",children:br.fecha}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-gray-200"})]})}),jsxRuntimeExports.jsxs("div",{className:"relative pl-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-2 top-0 bottom-0 w-0.5 bg-gray-200"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:br.items.map(pr=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:`absolute -left-4 top-3 w-3 h-3 rounded-full border-2 bg-white ${pr.campo==="creacion"?"border-purple-500":"border-primary-500"}`}),jsxRuntimeExports.jsxs("div",{className:`rounded-lg border p-3 ${dr(pr.campo)}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[hr(pr.campo),jsxRuntimeExports.jsx("span",{className:"font-medium text-sm",children:ur(pr.campo)}),fr(pr)]}),jsxRuntimeExports.jsx("span",{className:"text-xs opacity-70",children:or(pr.fecha)})]}),pr.campo==="creacion"?jsxRuntimeExports.jsx("div",{className:"text-sm",children:"Repuesto creado"}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-white/50 rounded line-through opacity-70",children:gr(pr.campo,pr.valorAnterior)}),jsxRuntimeExports.jsx(ArrowRight,{className:"w-4 h-4 opacity-50"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 bg-white/70 rounded font-medium",children:gr(pr.campo,pr.valorNuevo)})]})]})]},pr.id))})]})]},br.fecha))}),ir.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[ir.length," cambio",ir.length!==1?"s":""," registrado",ir.length!==1?"s":""]})})]})}function DeleteConfirmModal({isOpen:tr,onClose:er,onConfirm:rr,repuesto:nr,loading:ir}){return jsxRuntimeExports.jsx(Modal,{isOpen:tr,onClose:er,size:"sm",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mb-4",children:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-6 h-6 text-red-600"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Eliminar repuesto?"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-2",children:"Ests por eliminar el repuesto:"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"font-mono text-sm text-primary-600",children:nr==null?void 0:nr.codigoBaader}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 truncate",children:nr==null?void 0:nr.textoBreve})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Esta accin no se puede deshacer."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:er,className:"flex-1",children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{variant:"danger",onClick:rr,loading:ir,icon:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"}),className:"flex-1",children:"Eliminar"})]})]})})}function TagManagerModal({isOpen:tr,onClose:er,machineId:rr,repuestos:nr,onRenameTag:ir,onDeleteTag:sr}){const{tags:ar,tagsGlobales:cr,addTag:lr,removeTag:or,renameTag:ur,changeTagTipo:hr,loading:dr,addMultipleTags:fr}=useTags(nr,rr),[gr,br]=reactExports.useState(null),[pr,mr]=reactExports.useState(""),[yr,xr]=reactExports.useState(null),[vr,_r]=reactExports.useState(!1),[Er,Tr]=reactExports.useState(null),[Rr,Nr]=reactExports.useState(""),[Dr,Ir]=reactExports.useState("solicitud"),[Or,jr]=reactExports.useState(!1),Lr=reactExports.useMemo(()=>{const Vr=new Map;return nr.forEach(Xr=>{var Ur;(Ur=Xr.tags)==null||Ur.forEach(Fr=>{const Kr=getTagNombre(Fr);Vr.set(Kr,(Vr.get(Kr)||0)+1)})}),Array.from(Vr.entries()).map(([Xr,Ur])=>({name:Xr,count:Ur})).sort((Xr,Ur)=>Xr.name.localeCompare(Ur.name))},[nr]);reactExports.useEffect(()=>{if(tr&&!dr&&Lr.length>0){const Xr=Lr.map(Ur=>Ur.name).filter(Ur=>!cr.some(Fr=>Fr.nombre===Ur));if(Xr.length>0){console.log("Sincronizando tags faltantes:",Xr);const Ur=Xr.map(Fr=>({nombre:Fr,tipo:Fr.toLowerCase().includes("stock")?"stock":"solicitud"}));fr(Ur)}}},[tr,dr,Lr,cr,fr]);const Cr=Vr=>{br(Vr),mr(Vr),Tr(null)},wr=()=>{br(null),mr("")},Pr=async()=>{if(!gr||!pr.trim())return;if(!rr){Tr({type:"error",text:"Selecciona una mquina para gestionar tags"});return}const Vr=pr.trim();if(Vr===gr){wr();return}const Xr=Lr.some(Fr=>Fr.name.toLowerCase()===Vr.toLowerCase()&&Fr.name!==gr),Ur=ar.some(Fr=>Fr.nombre.toLowerCase()===Vr.toLowerCase()&&Fr.nombre!==gr);if(Xr||Ur){Tr({type:"error",text:"Ya existe un tag con ese nombre"});return}_r(!0);try{await ur(gr,Vr);const Fr=Lr.find(Kr=>Kr.name===gr);if(Fr&&Fr.count>0){const Kr=await ir(gr,Vr);Tr({type:"success",text:`Tag renombrado en ${Kr} repuesto(s)`})}else Tr({type:"success",text:"Tag actualizado"});wr()}catch{Tr({type:"error",text:"Error al renombrar el tag"})}finally{_r(!1)}},Ar=Vr=>{xr(Vr),Tr(null)},Sr=()=>{xr(null)},Mr=async()=>{if(yr){if(!rr){Tr({type:"error",text:"Selecciona una mquina para gestionar tags"});return}_r(!0);try{await or(yr);const Vr=Lr.find(Xr=>Xr.name===yr);if(Vr&&Vr.count>0){const Xr=await sr(yr);Tr({type:"success",text:`Tag eliminado de ${Xr} repuesto(s)`})}else Tr({type:"success",text:"Tag eliminado"});xr(null)}catch{Tr({type:"error",text:"Error al eliminar el tag"})}finally{_r(!1)}}},qr=async()=>{const Vr=Rr.trim();if(!Vr)return;if(!rr){Tr({type:"error",text:"Selecciona una mquina para gestionar tags"});return}const Xr=Lr.some(Fr=>Fr.name.toLowerCase()===Vr.toLowerCase()),Ur=ar.some(Fr=>Fr.nombre.toLowerCase()===Vr.toLowerCase());if(Xr||Ur){Tr({type:"error",text:"Ya existe un tag con ese nombre"});return}_r(!0);try{await lr(Vr,Dr),Nr(""),Ir("solicitud"),jr(!1),Tr({type:"success",text:`Tag "${Vr}" agregado como ${Dr==="solicitud"?"Solicitud":"Stock"}`})}catch{Tr({type:"error",text:"Error al agregar el tag"})}finally{_r(!1)}},$r=async(Vr,Xr)=>{if(!rr){Tr({type:"error",text:"Selecciona una mquina para gestionar tags"});return}_r(!0);try{await hr(Vr,Xr),Tr({type:"success",text:`Tag "${Vr}" cambiado a ${Xr==="solicitud"?"Solicitud":"Stock"}`})}catch{Tr({type:"error",text:"Error al cambiar el tipo"})}finally{_r(!1)}};if(!tr)return null;const Br=(Vr,Xr)=>{const{nombre:Ur,tipo:Fr}=Vr;return gr===Ur?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[jsxRuntimeExports.jsx("input",{type:"text",value:pr,onChange:Kr=>mr(Kr.target.value),className:"flex-1 px-3 py-1.5 border border-primary-300 dark:border-primary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0,onKeyDown:Kr=>{Kr.key==="Enter"&&Pr(),Kr.key==="Escape"&&wr()}}),jsxRuntimeExports.jsx("button",{onClick:()=>Pr(),disabled:vr,className:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"Guardar",children:jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:wr,disabled:vr,className:"p-2 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",title:"Cancelar",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]}):yr===Ur?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5 text-amber-500 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:['Eliminar "',Ur,'"?']}),Xr!==null&&Xr>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:["(se quitar de ",Xr," repuesto",Xr!==1?"s":"",")"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Mr(),disabled:vr,className:"px-3 py-1.5 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Eliminar"}),jsxRuntimeExports.jsx("button",{onClick:Sr,disabled:vr,className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Cancelar"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[Fr==="solicitud"?jsxRuntimeExports.jsx(ShoppingCart,{className:"w-4 h-4 text-blue-500"}):jsxRuntimeExports.jsx(Package,{className:"w-4 h-4 text-green-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:Ur}),jsxRuntimeExports.jsx("button",{onClick:()=>$r(Ur,Fr==="solicitud"?"stock":"solicitud"),disabled:vr,className:`px-2 py-0.5 rounded-full text-xs font-medium transition-colors ${Fr==="solicitud"?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800/50":"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800/50"}`,title:"Click para cambiar tipo",children:Fr==="solicitud"?" Solicitud":" Stock"}),Xr!==null&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-600 px-2 py-0.5 rounded-full",children:[Xr," repuesto",Xr!==1?"s":""]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Cr(Ur),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Editar nombre",children:jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ar(Ur),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Eliminar",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})]})},zr=ar.filter(Vr=>Vr.tipo==="solicitud"),Gr=ar.filter(Vr=>Vr.tipo==="stock");return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onMouseDown:Vr=>{var Xr;Vr.target===Vr.currentTarget&&!((Xr=window.getSelection())!=null&&Xr.toString())&&er()},children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",onMouseDown:Vr=>Vr.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/50 rounded-lg",children:jsxRuntimeExports.jsx(Tag,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Gestor de Tags/Eventos"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ar.length," tags (",zr.length," solicitudes, ",Gr.length," stock)  ",Lr.reduce((Vr,Xr)=>Vr+Xr.count,0)," asignaciones"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),Er&&jsxRuntimeExports.jsx("div",{className:`px-5 py-3 flex-shrink-0 ${Er.type==="success"?"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:Er.text}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[Or?jsxRuntimeExports.jsxs("div",{className:"p-4 bg-primary-50 dark:bg-primary-900/30 rounded-lg border border-primary-200 dark:border-primary-700",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mb-3",children:jsxRuntimeExports.jsx("input",{type:"text",value:Rr,onChange:Vr=>Nr(Vr.target.value),placeholder:"Nombre del nuevo tag/evento...",className:"flex-1 px-3 py-2 border border-primary-300 dark:border-primary-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",autoFocus:!0,onKeyDown:Vr=>{Vr.key==="Enter"&&qr(),Vr.key==="Escape"&&(jr(!1),Nr(""))}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Tipo:"}),jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-colors ${Dr==="solicitud"?"bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-400 dark:border-blue-600":"bg-gray-100 dark:bg-gray-700 border-2 border-transparent hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"newTagTipo",value:"solicitud",checked:Dr==="solicitud",onChange:()=>Ir("solicitud"),className:"sr-only"}),jsxRuntimeExports.jsx(ShoppingCart,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Solicitud"})]}),jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-colors ${Dr==="stock"?"bg-green-100 dark:bg-green-900/50 border-2 border-green-400 dark:border-green-600":"bg-gray-100 dark:bg-gray-700 border-2 border-transparent hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"newTagTipo",value:"stock",checked:Dr==="stock",onChange:()=>Ir("stock"),className:"sr-only"}),jsxRuntimeExports.jsx(Package,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Stock"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:qr,disabled:vr||!Rr.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 text-sm font-medium",children:"Crear Tag"}),jsxRuntimeExports.jsx("button",{onClick:()=>{jr(!1),Nr(""),Ir("solicitud")},className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors text-sm",children:"Cancelar"})]})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>jr(!0),className:"w-full flex items-center justify-center gap-2 p-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-500 dark:text-gray-400 hover:border-primary-400 dark:hover:border-primary-500 hover:text-primary-600 dark:hover:text-primary-400 hover:bg-primary-50 dark:hover:bg-primary-900/20 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),"Agregar nuevo tag/evento"]}),dr?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Cargando tags..."}):ar.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(Tag,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),jsxRuntimeExports.jsx("p",{children:"No hay tags disponibles"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Crea tags de tipo Solicitud o Stock para organizar tus eventos"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[zr.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:["Solicitudes (",zr.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:zr.map(Vr=>{const Xr=Lr.find(Ur=>Ur.name===Vr.nombre);return jsxRuntimeExports.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${Xr?"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800":"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:Br(Vr,(Xr==null?void 0:Xr.count)??null)},Vr.nombre)})})]}),Gr.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 text-green-600 dark:text-green-400"}),jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-700 dark:text-gray-200",children:["Stock (",Gr.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Gr.map(Vr=>{const Xr=Lr.find(Ur=>Ur.name===Vr.nombre);return jsxRuntimeExports.jsx("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${Xr?"bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800":"bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:Br(Vr,(Xr==null?void 0:Xr.count)??null)},Vr.nombre)})})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3 h-3 text-blue-500"}),"Solicitud = Cantidad a pedir"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Package,{className:"w-3 h-3 text-green-500"}),"Stock = Inventario en bodega"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:" Click en el badge de tipo para cambiar entre Solicitud y Stock"})]})]})})}var roundNumber=function(tr,er){return Number(tr.toFixed(er))},checkIsNumber=function(tr,er){return er},handleCallback=function(tr,er,rr){rr&&typeof rr=="function"&&rr(tr,er)},easeOut=function(tr){return-Math.cos(tr*Math.PI)/2+.5},linear$2=function(tr){return tr},easeInQuad=function(tr){return tr*tr},easeOutQuad=function(tr){return tr*(2-tr)},easeInOutQuad=function(tr){return tr<.5?2*tr*tr:-1+(4-2*tr)*tr},easeInCubic=function(tr){return tr*tr*tr},easeOutCubic=function(tr){return--tr*tr*tr+1},easeInOutCubic=function(tr){return tr<.5?4*tr*tr*tr:(tr-1)*(2*tr-2)*(2*tr-2)+1},easeInQuart=function(tr){return tr*tr*tr*tr},easeOutQuart=function(tr){return 1- --tr*tr*tr*tr},easeInOutQuart=function(tr){return tr<.5?8*tr*tr*tr*tr:1-8*--tr*tr*tr*tr},easeInQuint=function(tr){return tr*tr*tr*tr*tr},easeOutQuint=function(tr){return 1+--tr*tr*tr*tr*tr},easeInOutQuint=function(tr){return tr<.5?16*tr*tr*tr*tr*tr:1+16*--tr*tr*tr*tr*tr},animations={easeOut,linear:linear$2,easeInQuad,easeOutQuad,easeInOutQuad,easeInCubic,easeOutCubic,easeInOutCubic,easeInQuart,easeOutQuart,easeInOutQuart,easeInQuint,easeOutQuint,easeInOutQuint},handleCancelAnimationFrame=function(tr){typeof tr=="number"&&cancelAnimationFrame(tr)},handleCancelAnimation=function(tr){tr.mounted&&(handleCancelAnimationFrame(tr.animation),tr.animate=!1,tr.animation=null,tr.velocity=null)};function handleSetupAnimation(tr,er,rr,nr){if(tr.mounted){var ir=new Date().getTime(),sr=1;handleCancelAnimation(tr),tr.animation=function(){if(!tr.mounted)return handleCancelAnimationFrame(tr.animation);var ar=new Date().getTime()-ir,cr=ar/rr,lr=animations[er],or=lr(cr);ar>=rr?(nr(sr),tr.animation=null):tr.animation&&(nr(or),requestAnimationFrame(tr.animation))},requestAnimationFrame(tr.animation)}}function isValidTargetState(tr){var er=tr.scale,rr=tr.positionX,nr=tr.positionY;return!(Number.isNaN(er)||Number.isNaN(rr)||Number.isNaN(nr))}function animate(tr,er,rr,nr){var ir=isValidTargetState(er);if(!(!tr.mounted||!ir)){var sr=tr.setTransformState,ar=tr.transformState,cr=ar.scale,lr=ar.positionX,or=ar.positionY,ur=er.scale-cr,hr=er.positionX-lr,dr=er.positionY-or;rr===0?sr(er.scale,er.positionX,er.positionY):handleSetupAnimation(tr,nr,rr,function(fr){var gr=cr+ur*fr,br=lr+hr*fr,pr=or+dr*fr;sr(gr,br,pr)})}}function getComponentsSizes(tr,er,rr){var nr=tr.offsetWidth,ir=tr.offsetHeight,sr=er.offsetWidth,ar=er.offsetHeight,cr=sr*rr,lr=ar*rr,or=nr-cr,ur=ir-lr;return{wrapperWidth:nr,wrapperHeight:ir,newContentWidth:cr,newDiffWidth:or,newContentHeight:lr,newDiffHeight:ur}}var getBounds=function(tr,er,rr,nr,ir,sr,ar){var cr=tr>er?rr*(ar?1:.5):0,lr=nr>ir?sr*(ar?1:.5):0,or=tr-er-cr,ur=cr,hr=nr-ir-lr,dr=lr;return{minPositionX:or,maxPositionX:ur,minPositionY:hr,maxPositionY:dr}},calculateBounds=function(tr,er){var rr=tr.wrapperComponent,nr=tr.contentComponent,ir=tr.setup.centerZoomedOut;if(!rr||!nr)throw new Error("Components are not mounted");var sr=getComponentsSizes(rr,nr,er),ar=sr.wrapperWidth,cr=sr.wrapperHeight,lr=sr.newContentWidth,or=sr.newDiffWidth,ur=sr.newContentHeight,hr=sr.newDiffHeight,dr=getBounds(ar,lr,or,cr,ur,hr,!!ir);return dr},boundLimiter=function(tr,er,rr,nr){return nr?tr<er?roundNumber(er,2):tr>rr?roundNumber(rr,2):roundNumber(tr,2):roundNumber(tr,2)},handleCalculateBounds=function(tr,er){var rr=calculateBounds(tr,er);return tr.bounds=rr,rr};function getMouseBoundedPosition(tr,er,rr,nr,ir,sr,ar){var cr=rr.minPositionX,lr=rr.minPositionY,or=rr.maxPositionX,ur=rr.maxPositionY,hr=0,dr=0;ar&&(hr=ir,dr=sr);var fr=boundLimiter(tr,cr-hr,or+hr,nr),gr=boundLimiter(er,lr-dr,ur+dr,nr);return{x:fr,y:gr}}function handleCalculateZoomPositions(tr,er,rr,nr,ir,sr){var ar=tr.transformState,cr=ar.scale,lr=ar.positionX,or=ar.positionY,ur=nr-cr;if(typeof er!="number"||typeof rr!="number")return console.error("Mouse X and Y position were not provided!"),{x:lr,y:or};var hr=lr-er*ur,dr=or-rr*ur,fr=getMouseBoundedPosition(hr,dr,ir,sr,0,0,null);return fr}function checkZoomBounds(tr,er,rr,nr,ir){var sr=ir?nr:0,ar=er-sr;return!Number.isNaN(rr)&&tr>=rr?rr:!Number.isNaN(er)&&tr<=ar?ar:tr}var isPanningStartAllowed=function(tr,er){var rr=tr.setup.panning.excluded,nr=tr.isInitialized,ir=tr.wrapperComponent,sr=er.target,ar="shadowRoot"in sr&&"composedPath"in er,cr=ar?er.composedPath().some(function(ur){return ur instanceof Element?ir==null?void 0:ir.contains(ur):!1}):ir==null?void 0:ir.contains(sr),lr=nr&&sr&&cr;if(!lr)return!1;var or=isExcludedNode(sr,rr);return!or},isPanningAllowed=function(tr){var er=tr.isInitialized,rr=tr.isPanning,nr=tr.setup,ir=nr.panning.disabled,sr=er&&rr&&!ir;return!!sr},handlePanningSetup=function(tr,er){var rr=tr.transformState,nr=rr.positionX,ir=rr.positionY;tr.isPanning=!0;var sr=er.clientX,ar=er.clientY;tr.startCoords={x:sr-nr,y:ar-ir}},handleTouchPanningSetup=function(tr,er){var rr=er.touches,nr=tr.transformState,ir=nr.positionX,sr=nr.positionY;tr.isPanning=!0;var ar=rr.length===1;if(ar){var cr=rr[0].clientX,lr=rr[0].clientY;tr.startCoords={x:cr-ir,y:lr-sr}}};function handlePanToBounds(tr){var er=tr.transformState,rr=er.positionX,nr=er.positionY,ir=er.scale,sr=tr.setup,ar=sr.disabled,cr=sr.limitToBounds,lr=sr.centerZoomedOut,or=tr.wrapperComponent;if(!(ar||!or||!tr.bounds)){var ur=tr.bounds,hr=ur.maxPositionX,dr=ur.minPositionX,fr=ur.maxPositionY,gr=ur.minPositionY,br=rr>hr||rr<dr,pr=nr>fr||nr<gr,mr=rr>hr?or.offsetWidth:tr.setup.minPositionX||0,yr=nr>fr?or.offsetHeight:tr.setup.minPositionY||0,xr=handleCalculateZoomPositions(tr,mr,yr,ir,tr.bounds,cr||lr),vr=xr.x,_r=xr.y;return{scale:ir,positionX:br?vr:rr,positionY:pr?_r:nr}}}function handleNewPosition(tr,er,rr,nr,ir){var sr=tr.setup.limitToBounds,ar=tr.wrapperComponent,cr=tr.bounds,lr=tr.transformState,or=lr.scale,ur=lr.positionX,hr=lr.positionY;if(!(ar===null||cr===null||er===ur&&rr===hr)){var dr=getMouseBoundedPosition(er,rr,cr,sr,nr,ir,ar),fr=dr.x,gr=dr.y;tr.setTransformState(or,fr,gr)}}var getPanningClientPosition=function(tr,er,rr){var nr=tr.startCoords,ir=tr.transformState,sr=tr.setup.panning,ar=sr.lockAxisX,cr=sr.lockAxisY,lr=ir.positionX,or=ir.positionY;if(!nr)return{x:lr,y:or};var ur=er-nr.x,hr=rr-nr.y,dr=ar?lr:ur,fr=cr?or:hr;return{x:dr,y:fr}},getPaddingValue=function(tr,er){var rr=tr.setup,nr=tr.transformState,ir=nr.scale,sr=rr.minScale,ar=rr.disablePadding;return er>0&&ir>=sr&&!ar?er:0},isVelocityCalculationAllowed=function(tr){var er=tr.mounted,rr=tr.setup,nr=rr.disabled,ir=rr.velocityAnimation,sr=tr.transformState.scale,ar=ir.disabled,cr=!ar||sr>1||!nr||er;return!!cr},isVelocityAllowed=function(tr){var er=tr.mounted,rr=tr.velocity,nr=tr.bounds,ir=tr.setup,sr=ir.disabled,ar=ir.velocityAnimation,cr=tr.transformState.scale,lr=ar.disabled,or=!lr||cr>1||!sr||er;return!(!or||!rr||!nr)};function getVelocityMoveTime(tr,er){var rr=tr.setup.velocityAnimation,nr=rr.equalToMove,ir=rr.animationTime,sr=rr.sensitivity;return nr?ir*er*sr:ir}function getVelocityPosition(tr,er,rr,nr,ir,sr,ar,cr,lr,or){if(ir){if(er>ar&&rr>ar){var ur=ar+(tr-ar)*or;return ur>lr?lr:ur<ar?ar:ur}if(er<sr&&rr<sr){var ur=sr+(tr-sr)*or;return ur<cr?cr:ur>sr?sr:ur}}return nr?er:boundLimiter(tr,sr,ar,ir)}function getSizeMultiplier(tr,er){var rr=1;return er?Math.min(rr,tr.offsetWidth/window.innerWidth):rr}function handleCalculateVelocity(tr,er){var rr=isVelocityCalculationAllowed(tr);if(rr){var nr=tr.lastMousePosition,ir=tr.velocityTime,sr=tr.setup,ar=tr.wrapperComponent,cr=sr.velocityAnimation.equalToMove,lr=Date.now();if(nr&&ir&&ar){var or=getSizeMultiplier(ar,cr),ur=er.x-nr.x,hr=er.y-nr.y,dr=ur/or,fr=hr/or,gr=lr-ir,br=ur*ur+hr*hr,pr=Math.sqrt(br)/gr;tr.velocity={velocityX:dr,velocityY:fr,total:pr}}tr.lastMousePosition=er,tr.velocityTime=lr}}function handleVelocityPanning(tr){var er=tr.velocity,rr=tr.bounds,nr=tr.setup,ir=tr.wrapperComponent,sr=isVelocityAllowed(tr);if(!(!sr||!er||!rr||!ir)){var ar=er.velocityX,cr=er.velocityY,lr=er.total,or=rr.maxPositionX,ur=rr.minPositionX,hr=rr.maxPositionY,dr=rr.minPositionY,fr=nr.limitToBounds,gr=nr.alignmentAnimation,br=nr.zoomAnimation,pr=nr.panning,mr=pr.lockAxisY,yr=pr.lockAxisX,xr=br.animationType,vr=gr.sizeX,_r=gr.sizeY,Er=gr.velocityAlignmentTime,Tr=Er,Rr=getVelocityMoveTime(tr,lr),Nr=Math.max(Rr,Tr),Dr=getPaddingValue(tr,vr),Ir=getPaddingValue(tr,_r),Or=Dr*ir.offsetWidth/100,jr=Ir*ir.offsetHeight/100,Lr=or+Or,Cr=ur-Or,wr=hr+jr,Pr=dr-jr,Ar=tr.transformState,Sr=new Date().getTime();handleSetupAnimation(tr,xr,Nr,function(Mr){var qr=tr.transformState,$r=qr.scale,Br=qr.positionX,zr=qr.positionY,Gr=new Date().getTime()-Sr,Vr=Gr/Tr,Xr=animations[gr.animationType],Ur=1-Xr(Math.min(1,Vr)),Fr=1-Mr,Kr=Br+ar*Fr,Zr=zr+cr*Fr,Jr=getVelocityPosition(Kr,Ar.positionX,Br,yr,fr,ur,or,Cr,Lr,Ur),tn=getVelocityPosition(Zr,Ar.positionY,zr,mr,fr,dr,hr,Pr,wr,Ur);(Br!==Kr||zr!==Zr)&&tr.setTransformState($r,Jr,tn)})}}function handlePanningStart(tr,er){var rr=tr.transformState.scale;handleCancelAnimation(tr),handleCalculateBounds(tr,rr),window.TouchEvent!==void 0&&er instanceof TouchEvent?handleTouchPanningSetup(tr,er):handlePanningSetup(tr,er)}function handleAlignToBounds(tr,er){var rr=tr.transformState.scale,nr=tr.setup,ir=nr.minScale,sr=nr.alignmentAnimation,ar=sr.disabled,cr=sr.sizeX,lr=sr.sizeY,or=sr.animationTime,ur=sr.animationType,hr=ar||rr<ir||!cr&&!lr;if(!hr){var dr=handlePanToBounds(tr);dr&&animate(tr,dr,er??or,ur)}}function handlePanning(tr,er,rr){var nr=tr.startCoords,ir=tr.setup,sr=ir.alignmentAnimation,ar=sr.sizeX,cr=sr.sizeY;if(nr){var lr=getPanningClientPosition(tr,er,rr),or=lr.x,ur=lr.y,hr=getPaddingValue(tr,ar),dr=getPaddingValue(tr,cr);handleCalculateVelocity(tr,{x:or,y:ur}),handleNewPosition(tr,or,ur,hr,dr)}}function handlePanningEnd(tr){if(tr.isPanning){var er=tr.setup.panning.velocityDisabled,rr=tr.velocity,nr=tr.wrapperComponent,ir=tr.contentComponent;tr.isPanning=!1,tr.animate=!1,tr.animation=null;var sr=nr==null?void 0:nr.getBoundingClientRect(),ar=ir==null?void 0:ir.getBoundingClientRect(),cr=(sr==null?void 0:sr.width)||0,lr=(sr==null?void 0:sr.height)||0,or=(ar==null?void 0:ar.width)||0,ur=(ar==null?void 0:ar.height)||0,hr=cr<or||lr<ur,dr=!er&&rr&&(rr==null?void 0:rr.total)>.1&&hr;dr?handleVelocityPanning(tr):handleAlignToBounds(tr)}}function handleZoomToPoint(tr,er,rr,nr){var ir=tr.setup,sr=ir.minScale,ar=ir.maxScale,cr=ir.limitToBounds,lr=checkZoomBounds(roundNumber(er,2),sr,ar,0,!1),or=handleCalculateBounds(tr,lr),ur=handleCalculateZoomPositions(tr,rr,nr,lr,or,cr),hr=ur.x,dr=ur.y;return{scale:lr,positionX:hr,positionY:dr}}function handleAlignToScaleBounds(tr,er,rr){var nr=tr.transformState.scale,ir=tr.wrapperComponent,sr=tr.setup,ar=sr.minScale,cr=sr.limitToBounds,lr=sr.zoomAnimation,or=lr.disabled,ur=lr.animationTime,hr=lr.animationType,dr=or||nr>=ar;if((nr>=1||cr)&&handleAlignToBounds(tr),!(dr||!ir||!tr.mounted)){var fr=er||ir.offsetWidth/2,gr=rr||ir.offsetHeight/2,br=handleZoomToPoint(tr,ar,fr,gr);br&&animate(tr,br,ur,hr)}}var __assign=function(){return __assign=Object.assign||function(er){for(var rr,nr=1,ir=arguments.length;nr<ir;nr++){rr=arguments[nr];for(var sr in rr)Object.prototype.hasOwnProperty.call(rr,sr)&&(er[sr]=rr[sr])}return er},__assign.apply(this,arguments)};function __spreadArray(tr,er,rr){for(var nr=0,ir=er.length,sr;nr<ir;nr++)(sr||!(nr in er))&&(sr||(sr=Array.prototype.slice.call(er,0,nr)),sr[nr]=er[nr]);return tr.concat(sr||Array.prototype.slice.call(er))}typeof SuppressedError=="function"&&SuppressedError;var initialState={scale:1,positionX:0,positionY:0},initialSetup={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},baseClasses={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},createState=function(tr){var er,rr,nr,ir;return{previousScale:(er=tr.initialScale)!==null&&er!==void 0?er:initialState.scale,scale:(rr=tr.initialScale)!==null&&rr!==void 0?rr:initialState.scale,positionX:(nr=tr.initialPositionX)!==null&&nr!==void 0?nr:initialState.positionX,positionY:(ir=tr.initialPositionY)!==null&&ir!==void 0?ir:initialState.positionY}},createSetup=function(tr){var er=__assign({},initialSetup);return Object.keys(tr).forEach(function(rr){var nr=typeof tr[rr]<"u",ir=typeof initialSetup[rr]<"u";if(ir&&nr){var sr=Object.prototype.toString.call(initialSetup[rr]),ar=sr==="[object Object]",cr=sr==="[object Array]";ar?er[rr]=__assign(__assign({},initialSetup[rr]),tr[rr]):cr?er[rr]=__spreadArray(__spreadArray([],initialSetup[rr],!0),tr[rr]):er[rr]=tr[rr]}}),er},handleCalculateButtonZoom=function(tr,er,rr){var nr=tr.transformState.scale,ir=tr.wrapperComponent,sr=tr.setup,ar=sr.maxScale,cr=sr.minScale,lr=sr.zoomAnimation,or=sr.smooth,ur=lr.size;if(!ir)throw new Error("Wrapper is not mounted");var hr=or?nr*Math.exp(er*rr):nr+er*rr,dr=checkZoomBounds(roundNumber(hr,3),cr,ar,ur,!1);return dr};function handleZoomToViewCenter(tr,er,rr,nr,ir){var sr=tr.wrapperComponent,ar=tr.transformState,cr=ar.scale,lr=ar.positionX,or=ar.positionY;if(!sr)return console.error("No WrapperComponent found");var ur=sr.offsetWidth,hr=sr.offsetHeight,dr=(ur/2-lr)/cr,fr=(hr/2-or)/cr,gr=handleCalculateButtonZoom(tr,er,rr),br=handleZoomToPoint(tr,gr,dr,fr);if(!br)return console.error("Error during zoom event. New transformation state was not calculated.");animate(tr,br,nr,ir)}function resetTransformations(tr,er,rr,nr){var ir=tr.setup,sr=tr.wrapperComponent,ar=ir.limitToBounds,cr=createState(tr.props),lr=tr.transformState,or=lr.scale,ur=lr.positionX,hr=lr.positionY;if(sr){var dr=calculateBounds(tr,cr.scale),fr=getMouseBoundedPosition(cr.positionX,cr.positionY,dr,ar,0,0,sr),gr={scale:cr.scale,positionX:fr.x,positionY:fr.y};or===cr.scale&&ur===cr.positionX&&hr===cr.positionY||(nr==null||nr(),animate(tr,gr,er,rr))}}function getOffset$1(tr,er,rr,nr){var ir=tr.getBoundingClientRect(),sr=er.getBoundingClientRect(),ar=rr.getBoundingClientRect(),cr=sr.x*nr.scale,lr=sr.y*nr.scale;return{x:(ir.x-ar.x+cr)/nr.scale,y:(ir.y-ar.y+lr)/nr.scale}}function calculateZoomToNode(tr,er,rr){var nr=tr.wrapperComponent,ir=tr.contentComponent,sr=tr.transformState,ar=tr.setup,cr=ar.limitToBounds,lr=ar.minScale,or=ar.maxScale;if(!nr||!ir)return sr;var ur=nr.getBoundingClientRect(),hr=er.getBoundingClientRect(),dr=getOffset$1(er,nr,ir,sr),fr=dr.x,gr=dr.y,br=hr.width/sr.scale,pr=hr.height/sr.scale,mr=nr.offsetWidth/br,yr=nr.offsetHeight/pr,xr=checkZoomBounds(rr||Math.min(mr,yr),lr,or,0,!1),vr=(ur.width-br*xr)/2,_r=(ur.height-pr*xr)/2,Er=(ur.left-fr)*xr+vr,Tr=(ur.top-gr)*xr+_r,Rr=calculateBounds(tr,xr),Nr=getMouseBoundedPosition(Er,Tr,Rr,cr,0,0,nr),Dr=Nr.x,Ir=Nr.y;return{positionX:Dr,positionY:Ir,scale:xr}}var zoomIn=function(tr){return function(er,rr,nr){er===void 0&&(er=.5),rr===void 0&&(rr=300),nr===void 0&&(nr="easeOut"),handleZoomToViewCenter(tr,1,er,rr,nr)}},zoomOut=function(tr){return function(er,rr,nr){er===void 0&&(er=.5),rr===void 0&&(rr=300),nr===void 0&&(nr="easeOut"),handleZoomToViewCenter(tr,-1,er,rr,nr)}},setTransform=function(tr){return function(er,rr,nr,ir,sr){ir===void 0&&(ir=300),sr===void 0&&(sr="easeOut");var ar=tr.transformState,cr=ar.positionX,lr=ar.positionY,or=ar.scale,ur=tr.wrapperComponent,hr=tr.contentComponent,dr=tr.setup.disabled;if(!(dr||!ur||!hr)){var fr={positionX:Number.isNaN(er)?cr:er,positionY:Number.isNaN(rr)?lr:rr,scale:Number.isNaN(nr)?or:nr};animate(tr,fr,ir,sr)}}},resetTransform=function(tr){return function(er,rr){er===void 0&&(er=200),rr===void 0&&(rr="easeOut"),resetTransformations(tr,er,rr)}},centerView=function(tr){return function(er,rr,nr){rr===void 0&&(rr=200),nr===void 0&&(nr="easeOut");var ir=tr.transformState,sr=tr.wrapperComponent,ar=tr.contentComponent;if(sr&&ar){var cr=getCenterPosition(er||ir.scale,sr,ar);animate(tr,cr,rr,nr)}}},zoomToElement=function(tr){return function(er,rr,nr,ir){nr===void 0&&(nr=600),ir===void 0&&(ir="easeOut"),handleCancelAnimation(tr);var sr=tr.wrapperComponent,ar=typeof er=="string"?document.getElementById(er):er;if(sr&&ar&&sr.contains(ar)){var cr=calculateZoomToNode(tr,ar,rr);animate(tr,cr,nr,ir)}}},getControls=function(tr){return{instance:tr,zoomIn:zoomIn(tr),zoomOut:zoomOut(tr),setTransform:setTransform(tr),resetTransform:resetTransform(tr),centerView:centerView(tr),zoomToElement:zoomToElement(tr)}},getState=function(tr){return{instance:tr,state:tr.transformState}},getContext=function(tr){var er={};return Object.assign(er,getState(tr)),Object.assign(er,getControls(tr)),er},passiveSupported=!1;function makePassiveEventOption(){try{var tr={get passive(){return passiveSupported=!0,!1}};return tr}catch{return passiveSupported=!1,passiveSupported}}var matchPrefix=".".concat(baseClasses.wrapperClass),isExcludedNode=function(tr,er){return er.some(function(rr){return tr.matches("".concat(matchPrefix," ").concat(rr,", ").concat(matchPrefix," .").concat(rr,", ").concat(matchPrefix," ").concat(rr," *, ").concat(matchPrefix," .").concat(rr," *"))})},cancelTimeout=function(tr){tr&&clearTimeout(tr)},getTransformStyles=function(tr,er,rr){return"translate(".concat(tr,"px, ").concat(er,"px) scale(").concat(rr,")")},getCenterPosition=function(tr,er,rr){var nr=rr.offsetWidth*tr,ir=rr.offsetHeight*tr,sr=(er.offsetWidth-nr)/2,ar=(er.offsetHeight-ir)/2;return{scale:tr,positionX:sr,positionY:ar}};function mergeRefs(tr){return function(er){tr.forEach(function(rr){typeof rr=="function"?rr(er):rr!=null&&(rr.current=er)})}}var isWheelAllowed=function(tr,er){var rr=tr.setup.wheel,nr=rr.disabled,ir=rr.wheelDisabled,sr=rr.touchPadDisabled,ar=rr.excluded,cr=tr.isInitialized,lr=tr.isPanning,or=er.target,ur=cr&&!lr&&!nr&&or;if(!ur||ir&&!er.ctrlKey||sr&&er.ctrlKey)return!1;var hr=isExcludedNode(or,ar);return!hr},getDeltaY=function(tr){return tr?tr.deltaY<0?1:-1:0};function getDelta(tr,er){var rr=getDeltaY(tr),nr=checkIsNumber(er,rr);return nr}function getMousePosition(tr,er,rr){var nr=er.getBoundingClientRect(),ir=0,sr=0;if("clientX"in tr)ir=(tr.clientX-nr.left)/rr,sr=(tr.clientY-nr.top)/rr;else{var ar=tr.touches[0];ir=(ar.clientX-nr.left)/rr,sr=(ar.clientY-nr.top)/rr}return(Number.isNaN(ir)||Number.isNaN(sr))&&console.error("No mouse or touch offset found"),{x:ir,y:sr}}var handleCalculateWheelZoom=function(tr,er,rr,nr,ir){var sr=tr.transformState.scale,ar=tr.wrapperComponent,cr=tr.setup,lr=cr.maxScale,or=cr.minScale,ur=cr.zoomAnimation,hr=cr.disablePadding,dr=ur.size,fr=ur.disabled;if(!ar)throw new Error("Wrapper is not mounted");var gr=sr+er*rr,br=nr?!1:!fr,pr=checkZoomBounds(roundNumber(gr,3),or,lr,dr,br&&!hr);return pr},handleWheelZoomStop=function(tr,er){var rr=tr.previousWheelEvent,nr=tr.transformState.scale,ir=tr.setup,sr=ir.maxScale,ar=ir.minScale;return rr?nr<sr||nr>ar||Math.sign(rr.deltaY)!==Math.sign(er.deltaY)||rr.deltaY>0&&rr.deltaY<er.deltaY||rr.deltaY<0&&rr.deltaY>er.deltaY||Math.sign(rr.deltaY)!==Math.sign(er.deltaY):!1},isPinchStartAllowed=function(tr,er){var rr=tr.setup.pinch,nr=rr.disabled,ir=rr.excluded,sr=tr.isInitialized,ar=er.target,cr=sr&&!nr&&ar;if(!cr)return!1;var lr=isExcludedNode(ar,ir);return!lr},isPinchAllowed=function(tr){var er=tr.setup.pinch.disabled,rr=tr.isInitialized,nr=tr.pinchStartDistance,ir=rr&&!er&&nr;return!!ir},calculateTouchMidPoint=function(tr,er,rr){var nr=rr.getBoundingClientRect(),ir=tr.touches,sr=roundNumber(ir[0].clientX-nr.left,5),ar=roundNumber(ir[0].clientY-nr.top,5),cr=roundNumber(ir[1].clientX-nr.left,5),lr=roundNumber(ir[1].clientY-nr.top,5);return{x:(sr+cr)/2/er,y:(ar+lr)/2/er}},getTouchDistance=function(tr){return Math.sqrt(Math.pow(tr.touches[0].pageX-tr.touches[1].pageX,2)+Math.pow(tr.touches[0].pageY-tr.touches[1].pageY,2))},calculatePinchZoom=function(tr,er){var rr=tr.pinchStartScale,nr=tr.pinchStartDistance,ir=tr.setup,sr=ir.maxScale,ar=ir.minScale,cr=ir.zoomAnimation,lr=ir.disablePadding,or=cr.size,ur=cr.disabled;if(!rr||nr===null||!er)throw new Error("Pinch touches distance was not provided");if(er<0)return tr.transformState.scale;var hr=er/nr,dr=hr*rr;return checkZoomBounds(roundNumber(dr,2),ar,sr,or,!ur&&!lr)},wheelStopEventTime=160,wheelAnimationTime=100,handleWheelStart=function(tr,er){var rr=tr.props,nr=rr.onWheelStart,ir=rr.onZoomStart;tr.wheelStopEventTimer||(handleCancelAnimation(tr),handleCallback(getContext(tr),er,nr),handleCallback(getContext(tr),er,ir))},handleWheelZoom=function(tr,er){var rr=tr.props,nr=rr.onWheel,ir=rr.onZoom,sr=tr.contentComponent,ar=tr.setup,cr=tr.transformState,lr=cr.scale,or=ar.limitToBounds,ur=ar.centerZoomedOut,hr=ar.zoomAnimation,dr=ar.wheel,fr=ar.disablePadding,gr=ar.smooth,br=hr.size,pr=hr.disabled,mr=dr.step,yr=dr.smoothStep;if(!sr)throw new Error("Component not mounted");er.preventDefault(),er.stopPropagation();var xr=getDelta(er,null),vr=gr?yr*Math.abs(er.deltaY):mr,_r=handleCalculateWheelZoom(tr,xr,vr,!er.ctrlKey);if(lr!==_r){var Er=handleCalculateBounds(tr,_r),Tr=getMousePosition(er,sr,lr),Rr=pr||br===0||ur||fr,Nr=or&&Rr,Dr=handleCalculateZoomPositions(tr,Tr.x,Tr.y,_r,Er,Nr),Ir=Dr.x,Or=Dr.y;tr.previousWheelEvent=er,tr.setTransformState(_r,Ir,Or),handleCallback(getContext(tr),er,nr),handleCallback(getContext(tr),er,ir)}},handleWheelStop=function(tr,er){var rr=tr.props,nr=rr.onWheelStop,ir=rr.onZoomStop;cancelTimeout(tr.wheelAnimationTimer),tr.wheelAnimationTimer=setTimeout(function(){tr.mounted&&(handleAlignToScaleBounds(tr,er.x,er.y),tr.wheelAnimationTimer=null)},wheelAnimationTime);var sr=handleWheelZoomStop(tr,er);sr&&(cancelTimeout(tr.wheelStopEventTimer),tr.wheelStopEventTimer=setTimeout(function(){tr.mounted&&(tr.wheelStopEventTimer=null,handleCallback(getContext(tr),er,nr),handleCallback(getContext(tr),er,ir))},wheelStopEventTime))},getTouchCenter=function(tr){for(var er=0,rr=0,nr=0;nr<2;nr+=1)er+=tr.touches[nr].clientX,rr+=tr.touches[nr].clientY;var ir=er/2,sr=rr/2;return{x:ir,y:sr}},handlePinchStart=function(tr,er){var rr=getTouchDistance(er);tr.pinchStartDistance=rr,tr.lastDistance=rr,tr.pinchStartScale=tr.transformState.scale,tr.isPanning=!1;var nr=getTouchCenter(er);tr.pinchLastCenterX=nr.x,tr.pinchLastCenterY=nr.y,handleCancelAnimation(tr)},handlePinchZoom=function(tr,er){var rr=tr.contentComponent,nr=tr.pinchStartDistance,ir=tr.wrapperComponent,sr=tr.transformState.scale,ar=tr.setup,cr=ar.limitToBounds,lr=ar.centerZoomedOut,or=ar.zoomAnimation,ur=ar.alignmentAnimation,hr=or.disabled,dr=or.size;if(!(nr===null||!rr)){var fr=calculateTouchMidPoint(er,sr,rr);if(!(!Number.isFinite(fr.x)||!Number.isFinite(fr.y))){var gr=getTouchDistance(er),br=calculatePinchZoom(tr,gr),pr=getTouchCenter(er),mr=pr.x-(tr.pinchLastCenterX||0),yr=pr.y-(tr.pinchLastCenterY||0);if(!(br===sr&&mr===0&&yr===0)){tr.pinchLastCenterX=pr.x,tr.pinchLastCenterY=pr.y;var xr=handleCalculateBounds(tr,br),vr=hr||dr===0||lr,_r=cr&&vr,Er=handleCalculateZoomPositions(tr,fr.x,fr.y,br,xr,_r),Tr=Er.x,Rr=Er.y;tr.pinchMidpoint=fr,tr.lastDistance=gr;var Nr=ur.sizeX,Dr=ur.sizeY,Ir=getPaddingValue(tr,Nr),Or=getPaddingValue(tr,Dr),jr=Tr+mr,Lr=Rr+yr,Cr=getMouseBoundedPosition(jr,Lr,xr,cr,Ir,Or,ir),wr=Cr.x,Pr=Cr.y;tr.setTransformState(br,wr,Pr)}}}},handlePinchStop=function(tr){var er=tr.pinchMidpoint;tr.velocity=null,tr.lastDistance=null,tr.pinchMidpoint=null,tr.pinchStartScale=null,tr.pinchStartDistance=null,handleAlignToScaleBounds(tr,er==null?void 0:er.x,er==null?void 0:er.y)},handleDoubleClickStop=function(tr,er){var rr=tr.props.onZoomStop,nr=tr.setup.doubleClick.animationTime;cancelTimeout(tr.doubleClickStopEventTimer),tr.doubleClickStopEventTimer=setTimeout(function(){tr.doubleClickStopEventTimer=null,handleCallback(getContext(tr),er,rr)},nr)},handleDoubleClickResetMode=function(tr,er){var rr=tr.props,nr=rr.onZoomStart,ir=rr.onZoom,sr=tr.setup.doubleClick,ar=sr.animationTime,cr=sr.animationType;handleCallback(getContext(tr),er,nr),resetTransformations(tr,ar,cr,function(){return handleCallback(getContext(tr),er,ir)}),handleDoubleClickStop(tr,er)};function getDoubleClickScale(tr,er){return tr==="toggle"?er===1?1:-1:tr==="zoomOut"?-1:1}function handleDoubleClick(tr,er){var rr=tr.setup,nr=tr.doubleClickStopEventTimer,ir=tr.transformState,sr=tr.contentComponent,ar=ir.scale,cr=tr.props,lr=cr.onZoomStart,or=cr.onZoom,ur=rr.doubleClick,hr=ur.disabled,dr=ur.mode,fr=ur.step,gr=ur.animationTime,br=ur.animationType;if(!hr&&!nr){if(dr==="reset")return handleDoubleClickResetMode(tr,er);if(!sr)return console.error("No ContentComponent found");var pr=getDoubleClickScale(dr,tr.transformState.scale),mr=handleCalculateButtonZoom(tr,pr,fr);if(ar!==mr){handleCallback(getContext(tr),er,lr);var yr=getMousePosition(er,sr,ar),xr=handleZoomToPoint(tr,mr,yr.x,yr.y);if(!xr)return console.error("Error during zoom event. New transformation state was not calculated.");handleCallback(getContext(tr),er,or),animate(tr,xr,gr,br),handleDoubleClickStop(tr,er)}}}var isDoubleClickAllowed=function(tr,er){var rr=tr.isInitialized,nr=tr.setup,ir=tr.wrapperComponent,sr=nr.doubleClick,ar=sr.disabled,cr=sr.excluded,lr=er.target,or=ir==null?void 0:ir.contains(lr),ur=rr&&lr&&or&&!ar;if(!ur)return!1;var hr=isExcludedNode(lr,cr);return!hr},ZoomPanPinch=function(){function tr(er){var rr=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){rr.initializeWindowEvents()},this.unmount=function(){rr.cleanupWindowEvents()},this.update=function(nr){rr.props=nr,handleCalculateBounds(rr,rr.transformState.scale),rr.setup=createSetup(nr)},this.initializeWindowEvents=function(){var nr,ir,sr=makePassiveEventOption(),ar=(nr=rr.wrapperComponent)===null||nr===void 0?void 0:nr.ownerDocument,cr=ar==null?void 0:ar.defaultView;(ir=rr.wrapperComponent)===null||ir===void 0||ir.addEventListener("wheel",rr.onWheelPanning,sr),cr==null||cr.addEventListener("mousedown",rr.onPanningStart,sr),cr==null||cr.addEventListener("mousemove",rr.onPanning,sr),cr==null||cr.addEventListener("mouseup",rr.onPanningStop,sr),ar==null||ar.addEventListener("mouseleave",rr.clearPanning,sr),cr==null||cr.addEventListener("keyup",rr.setKeyUnPressed,sr),cr==null||cr.addEventListener("keydown",rr.setKeyPressed,sr)},this.cleanupWindowEvents=function(){var nr,ir,sr=makePassiveEventOption(),ar=(nr=rr.wrapperComponent)===null||nr===void 0?void 0:nr.ownerDocument,cr=ar==null?void 0:ar.defaultView;cr==null||cr.removeEventListener("mousedown",rr.onPanningStart,sr),cr==null||cr.removeEventListener("mousemove",rr.onPanning,sr),cr==null||cr.removeEventListener("mouseup",rr.onPanningStop,sr),ar==null||ar.removeEventListener("mouseleave",rr.clearPanning,sr),cr==null||cr.removeEventListener("keyup",rr.setKeyUnPressed,sr),cr==null||cr.removeEventListener("keydown",rr.setKeyPressed,sr),document.removeEventListener("mouseleave",rr.clearPanning,sr),handleCancelAnimation(rr),(ir=rr.observer)===null||ir===void 0||ir.disconnect()},this.handleInitializeWrapperEvents=function(nr){var ir=makePassiveEventOption();nr.addEventListener("wheel",rr.onWheelZoom,ir),nr.addEventListener("dblclick",rr.onDoubleClick,ir),nr.addEventListener("touchstart",rr.onTouchPanningStart,ir),nr.addEventListener("touchmove",rr.onTouchPanning,ir),nr.addEventListener("touchend",rr.onTouchPanningStop,ir)},this.handleInitialize=function(nr,ir){var sr=!1,ar=rr.setup.centerOnInit,cr=function(lr,or){for(var ur=0,hr=lr;ur<hr.length;ur++){var dr=hr[ur];if(dr.target===or)return!0}return!1};rr.applyTransformation(),rr.onInitCallbacks.forEach(function(lr){lr(getContext(rr))}),rr.observer=new ResizeObserver(function(lr){if(cr(lr,nr)||cr(lr,ir))if(ar&&!sr){var or=ir.offsetWidth,ur=ir.offsetHeight;(or>0||ur>0)&&(sr=!0,rr.setCenter())}else handleCancelAnimation(rr),handleCalculateBounds(rr,rr.transformState.scale),handleAlignToBounds(rr,0)}),rr.observer.observe(nr),rr.observer.observe(ir)},this.onWheelZoom=function(nr){var ir=rr.setup.disabled;if(!ir){var sr=isWheelAllowed(rr,nr);if(sr){var ar=rr.isPressingKeys(rr.setup.wheel.activationKeys);ar&&(handleWheelStart(rr,nr),handleWheelZoom(rr,nr),handleWheelStop(rr,nr))}}},this.onWheelPanning=function(nr){var ir=rr.setup,sr=ir.disabled,ar=ir.wheel,cr=ir.panning;if(!(!rr.wrapperComponent||!rr.contentComponent||sr||!ar.wheelDisabled||cr.disabled||!cr.wheelPanning||nr.ctrlKey)){nr.preventDefault(),nr.stopPropagation();var lr=rr.transformState,or=lr.positionX,ur=lr.positionY,hr=or-nr.deltaX,dr=ur-nr.deltaY,fr=cr.lockAxisX?or:hr,gr=cr.lockAxisY?ur:dr,br=rr.setup.alignmentAnimation,pr=br.sizeX,mr=br.sizeY,yr=getPaddingValue(rr,pr),xr=getPaddingValue(rr,mr);fr===or&&gr===ur||handleNewPosition(rr,fr,gr,yr,xr)}},this.onPanningStart=function(nr){var ir=rr.setup.disabled,sr=rr.props.onPanningStart;if(!ir){var ar=isPanningStartAllowed(rr,nr);if(ar){var cr=rr.isPressingKeys(rr.setup.panning.activationKeys);cr&&(nr.button===0&&!rr.setup.panning.allowLeftClickPan||nr.button===1&&!rr.setup.panning.allowMiddleClickPan||nr.button===2&&!rr.setup.panning.allowRightClickPan||(nr.preventDefault(),nr.stopPropagation(),handleCancelAnimation(rr),handlePanningStart(rr,nr),handleCallback(getContext(rr),nr,sr)))}}},this.onPanning=function(nr){var ir=rr.setup.disabled,sr=rr.props.onPanning;if(!ir){var ar=isPanningAllowed(rr);if(ar){var cr=rr.isPressingKeys(rr.setup.panning.activationKeys);cr&&(nr.preventDefault(),nr.stopPropagation(),handlePanning(rr,nr.clientX,nr.clientY),handleCallback(getContext(rr),nr,sr))}}},this.onPanningStop=function(nr){var ir=rr.props.onPanningStop;rr.isPanning&&(handlePanningEnd(rr),handleCallback(getContext(rr),nr,ir))},this.onPinchStart=function(nr){var ir=rr.setup.disabled,sr=rr.props,ar=sr.onPinchingStart,cr=sr.onZoomStart;if(!ir){var lr=isPinchStartAllowed(rr,nr);lr&&(handlePinchStart(rr,nr),handleCancelAnimation(rr),handleCallback(getContext(rr),nr,ar),handleCallback(getContext(rr),nr,cr))}},this.onPinch=function(nr){var ir=rr.setup.disabled,sr=rr.props,ar=sr.onPinching,cr=sr.onZoom;if(!ir){var lr=isPinchAllowed(rr);lr&&(nr.preventDefault(),nr.stopPropagation(),handlePinchZoom(rr,nr),handleCallback(getContext(rr),nr,ar),handleCallback(getContext(rr),nr,cr))}},this.onPinchStop=function(nr){var ir=rr.props,sr=ir.onPinchingStop,ar=ir.onZoomStop;rr.pinchStartScale&&(handlePinchStop(rr),handleCallback(getContext(rr),nr,sr),handleCallback(getContext(rr),nr,ar))},this.onTouchPanningStart=function(nr){var ir=rr.setup.disabled,sr=rr.props.onPanningStart;if(!ir){var ar=isPanningStartAllowed(rr,nr);if(ar){var cr=rr.lastTouch&&+new Date-rr.lastTouch<200&&nr.touches.length===1;if(!cr){rr.lastTouch=+new Date,handleCancelAnimation(rr);var lr=nr.touches,or=lr.length===1,ur=lr.length===2;or&&(handleCancelAnimation(rr),handlePanningStart(rr,nr),handleCallback(getContext(rr),nr,sr)),ur&&rr.onPinchStart(nr)}}}},this.onTouchPanning=function(nr){var ir=rr.setup.disabled,sr=rr.props.onPanning;if(rr.isPanning&&nr.touches.length===1){if(ir)return;var ar=isPanningAllowed(rr);if(!ar)return;nr.preventDefault(),nr.stopPropagation();var cr=nr.touches[0];handlePanning(rr,cr.clientX,cr.clientY),handleCallback(getContext(rr),nr,sr)}else nr.touches.length>1&&rr.onPinch(nr)},this.onTouchPanningStop=function(nr){rr.onPanningStop(nr),rr.onPinchStop(nr)},this.onDoubleClick=function(nr){var ir=rr.setup.disabled;if(!ir){var sr=isDoubleClickAllowed(rr,nr);sr&&handleDoubleClick(rr,nr)}},this.clearPanning=function(nr){rr.isPanning&&rr.onPanningStop(nr)},this.setKeyPressed=function(nr){rr.pressedKeys[nr.key]=!0},this.setKeyUnPressed=function(nr){rr.pressedKeys[nr.key]=!1},this.isPressingKeys=function(nr){return nr.length?!!nr.find(function(ir){return rr.pressedKeys[ir]}):!0},this.setTransformState=function(nr,ir,sr){var ar=rr.props.onTransformed;if(!Number.isNaN(nr)&&!Number.isNaN(ir)&&!Number.isNaN(sr)){nr!==rr.transformState.scale&&(rr.transformState.previousScale=rr.transformState.scale,rr.transformState.scale=nr),rr.transformState.positionX=ir,rr.transformState.positionY=sr,rr.applyTransformation();var cr=getContext(rr);rr.onChangeCallbacks.forEach(function(lr){return lr(cr)}),handleCallback(cr,{scale:nr,positionX:ir,positionY:sr},ar)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(rr.wrapperComponent&&rr.contentComponent){var nr=getCenterPosition(rr.transformState.scale,rr.wrapperComponent,rr.contentComponent);rr.setTransformState(nr.scale,nr.positionX,nr.positionY)}},this.handleTransformStyles=function(nr,ir,sr){return rr.props.customTransform?rr.props.customTransform(nr,ir,sr):getTransformStyles(nr,ir,sr)},this.applyTransformation=function(){if(!(!rr.mounted||!rr.contentComponent)){var nr=rr.transformState,ir=nr.scale,sr=nr.positionX,ar=nr.positionY,cr=rr.handleTransformStyles(sr,ar,ir);rr.contentComponent.style.transform=cr}},this.getContext=function(){return getContext(rr)},this.onChange=function(nr){return rr.onChangeCallbacks.has(nr)||rr.onChangeCallbacks.add(nr),function(){rr.onChangeCallbacks.delete(nr)}},this.onInit=function(nr){return rr.onInitCallbacks.has(nr)||rr.onInitCallbacks.add(nr),function(){rr.onInitCallbacks.delete(nr)}},this.init=function(nr,ir){rr.cleanupWindowEvents(),rr.wrapperComponent=nr,rr.contentComponent=ir,handleCalculateBounds(rr,rr.transformState.scale),rr.handleInitializeWrapperEvents(nr),rr.handleInitialize(nr,ir),rr.initializeWindowEvents(),rr.isInitialized=!0;var sr=getContext(rr);handleCallback(sr,void 0,rr.props.onInit)},this.props=er,this.setup=createSetup(this.props),this.transformState=createState(this.props)}return tr}(),Context=React.createContext(null),getContent=function(tr,er){return typeof tr=="function"?tr(er):tr},TransformWrapper=React.forwardRef(function(tr,er){var rr=reactExports.useRef(new ZoomPanPinch(tr)).current,nr=getContent(tr.children,getControls(rr));return reactExports.useImperativeHandle(er,function(){return getControls(rr)},[rr]),reactExports.useEffect(function(){rr.update(tr)},[rr,tr]),React.createElement(Context.Provider,{value:rr},nr)});React.forwardRef(function(tr,er){var rr=reactExports.useRef(null),nr=reactExports.useContext(Context);return reactExports.useEffect(function(){return nr.onChange(function(ir){if(rr.current){var sr=0,ar=0;rr.current.style.transform=nr.handleTransformStyles(sr,ar,1/ir.instance.transformState.scale)}})},[nr]),React.createElement("div",__assign({},tr,{ref:mergeRefs([rr,er])}))});function styleInject(tr,er){er===void 0&&(er={});var rr=er.insertAt;if(!(typeof document>"u")){var nr=document.head||document.getElementsByTagName("head")[0],ir=document.createElement("style");ir.type="text/css",rr==="top"&&nr.firstChild?nr.insertBefore(ir,nr.firstChild):nr.appendChild(ir),ir.styleSheet?ir.styleSheet.cssText=tr:ir.appendChild(document.createTextNode(tr))}}var css_248z=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,styles={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};styleInject(css_248z);var TransformComponent=function(tr){var er=tr.children,rr=tr.wrapperClass,nr=rr===void 0?"":rr,ir=tr.contentClass,sr=ir===void 0?"":ir,ar=tr.wrapperStyle,cr=tr.contentStyle,lr=tr.wrapperProps,or=lr===void 0?{}:lr,ur=tr.contentProps,hr=ur===void 0?{}:ur,dr=reactExports.useContext(Context),fr=dr.init,gr=dr.cleanupWindowEvents,br=reactExports.useRef(null),pr=reactExports.useRef(null);return reactExports.useEffect(function(){var mr=br.current,yr=pr.current;return mr!==null&&yr!==null&&fr&&(fr==null||fr(mr,yr)),function(){gr==null||gr()}},[]),React.createElement("div",__assign({},or,{ref:br,className:"".concat(baseClasses.wrapperClass," ").concat(styles.wrapper," ").concat(nr),style:ar}),React.createElement("div",__assign({},hr,{ref:pr,className:"".concat(baseClasses.contentClass," ").concat(styles.content," ").concat(sr),style:cr}),er))};function ImageGallery({repuesto:tr,tipo:er,onUpload:rr,onDelete:nr,onSetPrimary:ir}){var Ir,Or,jr,Lr;const[sr,ar]=reactExports.useState(0),[cr,lr]=reactExports.useState(null),[or,ur]=reactExports.useState(1),[hr,dr]=reactExports.useState(!1),[fr,gr]=reactExports.useState(1),[br,pr]=reactExports.useState(!1),[mr,yr]=reactExports.useState(!1),xr=reactExports.useRef(null),vr=reactExports.useRef(null),_r=reactExports.useRef(null),Tr=[...(er==="manual"?tr==null?void 0:tr.imagenesManual:tr==null?void 0:tr.fotosReales)||[]].sort((Cr,wr)=>Cr.orden-wr.orden),Rr=async Cr=>{const wr=Cr.target.files;if(!wr||!tr||wr.length===0)return;const Pr=Array.from(wr);yr(!0);try{for(const Ar of Pr){const{optimizeImage:Sr}=await __vitePreload(async()=>{const{optimizeImage:qr}=await Promise.resolve().then(()=>imageUtils);return{optimizeImage:qr}},void 0),Mr=await Sr(Ar,.95);console.log("[ImageGallery] Optimizacin:",Mr.log.join(" | ")),await rr(Mr.file,tr.id,er,{originalSize:Ar.size,optimizedSize:Mr.file.size,chosen:Mr.chosen,skipOptimize:!0,log:Mr.log})}}finally{yr(!1),xr.current&&(xr.current.value="")}},Nr=()=>{ar(Cr=>Cr>0?Cr-1:Tr.length-1)},Dr=()=>{ar(Cr=>Cr<Tr.length-1?Cr+1:0)};return reactExports.useEffect(()=>{const Cr=wr=>{var Sr;if(Tr.length<=1)return;const Pr=document.activeElement,Ar=(Sr=Pr==null?void 0:Pr.tagName)==null?void 0:Sr.toLowerCase();Ar==="input"||Ar==="textarea"||Pr&&Pr.isContentEditable||(wr.key==="ArrowLeft"&&(wr.preventDefault(),Nr()),wr.key==="ArrowRight"&&(wr.preventDefault(),Dr()))};return window.addEventListener("keydown",Cr),()=>window.removeEventListener("keydown",Cr)},[Tr.length]),tr?jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden animate-slideInRight",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-200",children:"Imgenes"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[tr.codigoBaader," - ",tr.textoBreve.substring(0,30),"..."]})]}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>{var Cr;return(Cr=xr.current)==null?void 0:Cr.click()},loading:mr,icon:jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4"}),title:"Seleccionar de galera",children:jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Galera"})}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:()=>{var Cr;return(Cr=vr.current)==null?void 0:Cr.click()},loading:mr,icon:jsxRuntimeExports.jsx(Camera,{className:"w-4 h-4"}),title:"Tomar foto con cmara",children:jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Cmara"})})]})}),jsxRuntimeExports.jsx("input",{ref:xr,type:"file",accept:"image/*",multiple:!0,onChange:Rr,className:"hidden"}),jsxRuntimeExports.jsx("input",{ref:vr,type:"file",accept:"image/*",capture:"environment",onChange:Rr,className:"hidden"})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col",children:Tr.length===0?jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 missing-image-indicator",children:[jsxRuntimeExports.jsx(Upload,{className:"w-12 h-12 text-amber-500 mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-amber-700 dark:text-amber-400 font-medium mb-3",children:"Sin imgenes"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full max-w-xs",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{var Cr;return(Cr=xr.current)==null?void 0:Cr.click()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-gray-700 dark:text-gray-300 font-medium transition-colors",children:[jsxRuntimeExports.jsx(Image$1,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{children:"Galera"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{var Cr;return(Cr=vr.current)==null?void 0:Cr.click()},className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-primary-100 dark:bg-primary-900/50 hover:bg-primary-200 dark:hover:bg-primary-900/70 rounded-xl text-primary-700 dark:text-primary-300 font-medium transition-colors",children:[jsxRuntimeExports.jsx(Camera,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{children:"Cmara"})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-3",children:"Las imgenes se optimizarn automticamente (WebP/JPEG)"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 bg-gray-100 dark:bg-gray-900 flex items-center justify-center min-h-[200px]",children:[jsxRuntimeExports.jsx(TransformWrapper,{initialScale:1,minScale:1,maxScale:6,centerOnInit:!0,centerZoomedOut:!0,disablePadding:!0,wheel:{step:.2,wheelDisabled:!1},doubleClick:{mode:"toggle",step:.8},pinch:{step:.4},panning:{disabled:!1,velocityDisabled:!1,allowLeftClickPan:!0},onTransformed:(Cr,wr)=>gr(wr.scale),onPanningStart:(Cr,wr)=>{if(Cr.state.scale<=1.01){Cr.resetTransform(),Cr.centerView(),pr(!1),wr instanceof MouseEvent&&Cr.instance.clearPanning(wr);return}pr(!0)},onPanningStop:()=>pr(!1),children:({zoomIn:Cr,zoomOut:wr,resetTransform:Pr})=>{var Ar,Sr;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 bg-black/60 text-white backdrop-blur px-3 py-2 rounded-full shadow border border-white/15",children:[jsxRuntimeExports.jsx("button",{onClick:()=>wr(),className:"p-1 rounded hover:bg-white/10",title:"Alejar",children:jsxRuntimeExports.jsx(Minus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{Pr(),gr(1),pr(!1)},className:"p-1 rounded hover:bg-white/10",title:"Reset",children:jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Cr(),className:"p-1 rounded hover:bg-white/10",title:"Acercar",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("span",{className:"ml-1 text-xs tabular-nums text-white/90 select-none",children:[Math.round(fr*100),"%"]})]}),jsxRuntimeExports.jsx(TransformComponent,{wrapperClass:"w-full h-full "+(fr>1?br?"cursor-grabbing":"cursor-grab":"cursor-default"),wrapperStyle:{width:"100%",height:"100%"},wrapperProps:{style:{touchAction:"none"},onTouchStart:Mr=>{if(fr>1.01)return;const qr=Mr.touches[0];_r.current={x:qr.clientX,y:qr.clientY,time:Date.now()}},onTouchEnd:Mr=>{if(fr>1.01||!_r.current||Tr.length<=1)return;const qr=_r.current;_r.current=null;const $r=Mr.changedTouches[0],Br=$r.clientX-qr.x,zr=$r.clientY-qr.y;Date.now()-qr.time>700||Math.abs(Br)<60||Math.abs(zr)>60||(Br<0?Dr():Nr())}},contentStyle:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("img",{src:(Ar=Tr[sr])==null?void 0:Ar.url,alt:((Sr=Tr[sr])==null?void 0:Sr.descripcion)||"Imagen del repuesto",className:"max-w-full max-h-full object-contain select-none",draggable:!1})})]})}},(Ir=Tr[sr])==null?void 0:Ir.id),Tr.length>1&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{onClick:Nr,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-black/60 text-white rounded-full shadow hover:bg-black/75 transition-colors border border-white/15","aria-label":"Anterior",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:Dr,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-black/60 text-white rounded-full shadow hover:bg-black/75 transition-colors border border-white/15","aria-label":"Siguiente",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 px-3 py-1 bg-black/50 text-white text-sm rounded-full",children:[sr+1," / ",Tr.length]}),((Or=Tr[sr])==null?void 0:Or.esPrincipal)&&jsxRuntimeExports.jsxs("div",{className:"absolute top-2 left-2 px-2 py-1 bg-yellow-400 text-yellow-900 text-xs rounded-full flex items-center gap-1",children:[jsxRuntimeExports.jsx(Star,{className:"w-3 h-3 fill-current"}),"Principal"]})]}),jsxRuntimeExports.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2 overflow-x-auto carousel-container pb-1",children:Tr.map((Cr,wr)=>jsxRuntimeExports.jsxs("div",{className:`
                      relative flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden cursor-pointer
                      border-2 transition-all carousel-item
                      ${wr===sr?"border-primary-500":"border-transparent hover:border-gray-300"}
                    `,onClick:()=>ar(wr),children:[jsxRuntimeExports.jsx("img",{src:Cr.url,alt:"",className:"w-full h-full object-cover"}),(Cr.sizeFinal||Cr.sizeOriginal)&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 inset-x-0 bg-black/70 px-1 py-1",children:jsxRuntimeExports.jsxs("p",{className:"text-[9px] leading-tight text-white font-semibold truncate",children:[Cr.sizeFinal?formatFileSize(Cr.sizeFinal):formatFileSize(Cr.sizeOriginal||0),Cr.formatFinal&&Cr.formatFinal!=="original"?`  ${Cr.formatFinal.toUpperCase()}`:""]})}),Cr.esPrincipal&&jsxRuntimeExports.jsx(Star,{className:"absolute top-1 right-1 w-3 h-3 text-yellow-400 fill-current"})]},Cr.id))})}),jsxRuntimeExports.jsxs("div",{className:"p-3 border-t border-gray-200 flex items-center gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>tr&&ir(tr,Tr[sr]),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm transition-colors ${(jr=Tr[sr])!=null&&jr.esPrincipal?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[(Lr=Tr[sr])!=null&&Lr.esPrincipal?jsxRuntimeExports.jsx(Star,{className:"w-4 h-4 fill-current"}):jsxRuntimeExports.jsx(StarOff,{className:"w-4 h-4"}),"Principal"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>tr&&nr(tr,Tr[sr]),className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-red-100 text-red-600 hover:bg-red-200 transition-colors ml-auto",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"}),"Eliminar"]})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:!!cr,onClose:()=>{lr(null),ur(1),dr(!1)},size:"full",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full h-full min-h-[70vh]",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{lr(null),ur(1),dr(!1)},className:"absolute top-2 right-2 z-10 p-2 bg-white rounded-full shadow hover:bg-gray-100",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})}),cr&&jsxRuntimeExports.jsx(TransformWrapper,{initialScale:1,minScale:1,maxScale:6,centerOnInit:!0,centerZoomedOut:!0,disablePadding:!0,wheel:{step:.2,wheelDisabled:!1},doubleClick:{mode:"toggle",step:.8},pinch:{step:.4},panning:{disabled:!1,velocityDisabled:!1,allowLeftClickPan:!0},onTransformed:(Cr,wr)=>ur(wr.scale),onPanningStart:(Cr,wr)=>{if(Cr.state.scale<=1.01){Cr.resetTransform(),Cr.centerView(),dr(!1),wr instanceof MouseEvent&&Cr.instance.clearPanning(wr);return}dr(!0)},onPanningStop:()=>dr(!1),children:({zoomIn:Cr,zoomOut:wr,resetTransform:Pr})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-3 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 bg-black/60 text-white backdrop-blur px-3 py-2 rounded-full shadow border border-white/15",children:[jsxRuntimeExports.jsx("button",{onClick:()=>wr(),className:"p-1 rounded hover:bg-white/10",title:"Alejar",children:jsxRuntimeExports.jsx(Minus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Pr(),className:"p-1 rounded hover:bg-white/10",title:"Reset",children:jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Cr(),className:"p-1 rounded hover:bg-white/10",title:"Acercar",children:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("span",{className:"ml-1 text-xs tabular-nums text-white/90 select-none",children:[Math.round(or*100),"%"]})]}),jsxRuntimeExports.jsx(TransformComponent,{wrapperClass:"w-full h-full "+(or>1?hr?"cursor-grabbing":"cursor-grab":"cursor-default"),wrapperStyle:{width:"100%",height:"100%"},wrapperProps:{style:{touchAction:"none"}},contentStyle:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntimeExports.jsx("img",{src:cr.url,alt:cr.descripcion,className:"max-w-full max-h-full object-contain select-none",draggable:!1})})]})}),jsxRuntimeExports.jsx("p",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-xs text-white bg-black/60 backdrop-blur px-3 py-1 rounded shadow border border-white/15",children:"Scroll o pellizca para zoom  arrastra (con zoom) para mover  doble click: zoom / reset"})]})})]}):null}const COLLECTION_NAME$2="repuestosBaader200";function ActivityLogModal({isOpen:tr,onClose:er,onRestoreAction:rr}){const[nr,ir]=reactExports.useState([]),[sr,ar]=reactExports.useState(!0),[cr,lr]=reactExports.useState(""),[or,ur]=reactExports.useState("all"),[hr,dr]=reactExports.useState(new Set),[fr,gr]=reactExports.useState(100);reactExports.useEffect(()=>{if(!tr)return;(async()=>{var Tr;ar(!0);try{const Rr=query(collectionGroup(db,"historial"),orderBy("fecha","desc"),limit(fr)),Nr=await getDocs(Rr),Dr=[];for(const Lr of Nr.docs){const Cr=Lr.data(),Pr=Lr.ref.path.split("/")[1];Dr.push({id:Lr.id,repuestoId:Pr,campo:Cr.campo,valorAnterior:Cr.valorAnterior,valorNuevo:Cr.valorNuevo,fecha:((Tr=Cr.fecha)==null?void 0:Tr.toDate())||new Date})}const Ir=[...new Set(Dr.map(Lr=>Lr.repuestoId))],Or={};for(const Lr of Ir)try{const wr=(await getDocs(query(collection(db,COLLECTION_NAME$2)))).docs.find(Pr=>Pr.id===Lr);wr&&(Or[Lr]=wr.data().codigoSAP||Lr.slice(0,8))}catch{Or[Lr]=Lr.slice(0,8)}const jr=Dr.map(Lr=>({...Lr,repuestoCode:Or[Lr.repuestoId]||Lr.repuestoId.slice(0,8)}));ir(jr)}catch(Rr){console.error("Error cargando logs:",Rr)}finally{ar(!1)}})()},[tr,fr]);const br=reactExports.useMemo(()=>{const Er=new Set(nr.map(Tr=>Tr.campo));return Array.from(Er).sort()},[nr]),pr=reactExports.useMemo(()=>nr.filter(Er=>{var Tr;if(cr){const Rr=cr.toLowerCase(),Nr=(Tr=Er.repuestoCode)==null?void 0:Tr.toLowerCase().includes(Rr),Dr=Er.campo.toLowerCase().includes(Rr),Ir=String(Er.valorAnterior).toLowerCase().includes(Rr)||String(Er.valorNuevo).toLowerCase().includes(Rr);if(!Nr&&!Dr&&!Ir)return!1}return!(or!=="all"&&Er.campo!==or)}),[nr,cr,or]),mr=reactExports.useMemo(()=>{const Er={};return pr.forEach(Tr=>{const Rr=Tr.fecha.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"});Er[Rr]||(Er[Rr]=[]),Er[Rr].push(Tr)}),Er},[pr]),yr=Er=>{dr(Tr=>{const Rr=new Set(Tr);return Rr.has(Er)?Rr.delete(Er):Rr.add(Er),Rr})},xr=Er=>Er==="creacion"?jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 text-green-500"}):Er==="eliminacion"?jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 text-red-500"}):Er.includes("tag")?jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4 text-purple-500"}):Er.includes("cantidad")||Er.includes("stock")?jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 text-blue-500"}):jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4 text-gray-500"}),vr=Er=>{if(Er==null)return"(vaco)";if(typeof Er=="object")try{const Tr=JSON.stringify(Er);return Tr.length>100?Tr.slice(0,100)+"...":Tr}catch{return String(Er)}return String(Er)},_r=Er=>({creacion:"Creacin",tags:"Tags",cantidadSolicitada:"Cantidad Solicitada",cantidadStockBodega:"Stock Bodega",valorUnitario:"Valor Unitario",descripcionSAP:"Descripcin SAP",textoBreve:"Texto Breve",nombreManual:"Nombre Manual",ubicacion:"Ubicacin",codigoSAP:"Cdigo SAP",vinculosManual:"Vnculos Manual",fotosReales:"Fotos Reales",observacionesMarcadorManual:"Observaciones Marcador"})[Er]||Er;return tr?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:Er=>{Er.target===Er.currentTarget&&er()},children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:jsxRuntimeExports.jsx(History,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Registro de Actividad"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[pr.length," de ",nr.length," cambios registrados"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-6 h-6 text-gray-500"})})]}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700 flex flex-wrap items-center gap-3 bg-gray-50 dark:bg-gray-800/50",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:cr,onChange:Er=>lr(Er.target.value),placeholder:"Buscar por cdigo, campo o valor...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsxs("select",{value:or,onChange:Er=>ur(Er.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[jsxRuntimeExports.jsx("option",{value:"all",children:"Todos los campos"}),br.map(Er=>jsxRuntimeExports.jsx("option",{value:Er,children:_r(Er)},Er))]})]}),jsxRuntimeExports.jsxs("select",{value:fr,onChange:Er=>gr(Number(Er.target.value)),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[jsxRuntimeExports.jsx("option",{value:50,children:"ltimos 50"}),jsxRuntimeExports.jsx("option",{value:100,children:"ltimos 100"}),jsxRuntimeExports.jsx("option",{value:200,children:"ltimos 200"}),jsxRuntimeExports.jsx("option",{value:500,children:"ltimos 500"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:sr?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center py-12",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),jsxRuntimeExports.jsx("span",{className:"ml-3 text-gray-500 dark:text-gray-400",children:"Cargando actividad..."})]}):pr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(FileText,{className:"w-12 h-12 mx-auto mb-3 text-gray-300 dark:text-gray-600"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No hay registros de actividad"}),cr&&jsxRuntimeExports.jsx("button",{onClick:()=>lr(""),className:"mt-2 text-indigo-600 hover:underline text-sm",children:"Limpiar bsqueda"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-6",children:Object.entries(mr).map(([Er,Tr])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 bg-gray-50 dark:bg-gray-800 py-2 px-3 rounded-lg mb-3 z-10",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:Er}),jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["(",Tr.length," cambios)"]})]})}),jsxRuntimeExports.jsx("div",{className:"space-y-2 pl-4",children:Tr.map(Rr=>jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>yr(Rr.id),className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-left",children:[xr(Rr.campo),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-100",children:Rr.repuestoCode}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:_r(Rr.campo)})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:Rr.fecha.toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),rr&&Rr.campo!=="creacion"&&jsxRuntimeExports.jsx("button",{onClick:Nr=>{Nr.stopPropagation(),rr(Rr)},className:"p-2 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg transition-colors",title:"Restaurar valor anterior",children:jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4"})}),hr.has(Rr.id)?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),hr.has(Rr.id)&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Valor Anterior"}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded text-red-700 dark:text-red-300 font-mono text-xs break-all",children:vr(Rr.valorAnterior)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase mb-1",children:"Valor Nuevo"}),jsxRuntimeExports.jsx("div",{className:"p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-green-700 dark:text-green-300 font-mono text-xs break-all",children:vr(Rr.valorNuevo)})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["ID Repuesto: ",Rr.repuestoId]})]})]},Rr.id))})]},Er))})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Click en una entrada para ver detalles  Click en  para restaurar valor anterior"}),jsxRuntimeExports.jsx("button",{onClick:er,className:"px-4 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cerrar"})]})]})}):null}var FileSaver_min={exports:{}};(function(tr,er){(function(rr,nr){nr()})(commonjsGlobal$2,function(){function rr(or,ur){return typeof ur>"u"?ur={autoBom:!1}:typeof ur!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ur={autoBom:!ur}),ur.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(or.type)?new Blob(["\uFEFF",or],{type:or.type}):or}function nr(or,ur,hr){var dr=new XMLHttpRequest;dr.open("GET",or),dr.responseType="blob",dr.onload=function(){lr(dr.response,ur,hr)},dr.onerror=function(){console.error("could not download file")},dr.send()}function ir(or){var ur=new XMLHttpRequest;ur.open("HEAD",or,!1);try{ur.send()}catch{}return 200<=ur.status&&299>=ur.status}function sr(or){try{or.dispatchEvent(new MouseEvent("click"))}catch{var ur=document.createEvent("MouseEvents");ur.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),or.dispatchEvent(ur)}}var ar=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal$2=="object"&&commonjsGlobal$2.global===commonjsGlobal$2?commonjsGlobal$2:void 0,cr=ar.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),lr=ar.saveAs||(typeof window!="object"||window!==ar?function(){}:"download"in HTMLAnchorElement.prototype&&!cr?function(or,ur,hr){var dr=ar.URL||ar.webkitURL,fr=document.createElement("a");ur=ur||or.name||"download",fr.download=ur,fr.rel="noopener",typeof or=="string"?(fr.href=or,fr.origin===location.origin?sr(fr):ir(fr.href)?nr(or,ur,hr):sr(fr,fr.target="_blank")):(fr.href=dr.createObjectURL(or),setTimeout(function(){dr.revokeObjectURL(fr.href)},4e4),setTimeout(function(){sr(fr)},0))}:"msSaveOrOpenBlob"in navigator?function(or,ur,hr){if(ur=ur||or.name||"download",typeof or!="string")navigator.msSaveOrOpenBlob(rr(or,hr),ur);else if(ir(or))nr(or,ur,hr);else{var dr=document.createElement("a");dr.href=or,dr.target="_blank",setTimeout(function(){sr(dr)})}}:function(or,ur,hr,dr){if(dr=dr||open("","_blank"),dr&&(dr.document.title=dr.document.body.innerText="downloading..."),typeof or=="string")return nr(or,ur,hr);var fr=or.type==="application/octet-stream",gr=/constructor/i.test(ar.HTMLElement)||ar.safari,br=/CriOS\/[\d]+/.test(navigator.userAgent);if((br||fr&&gr||cr)&&typeof FileReader<"u"){var pr=new FileReader;pr.onloadend=function(){var xr=pr.result;xr=br?xr:xr.replace(/^data:[^;]*;/,"data:attachment/file;"),dr?dr.location.href=xr:location=xr,dr=null},pr.readAsDataURL(or)}else{var mr=ar.URL||ar.webkitURL,yr=mr.createObjectURL(or);dr?dr.location=yr:location.href=yr,dr=null,setTimeout(function(){mr.revokeObjectURL(yr)},4e4)}});ar.saveAs=lr.saveAs=lr,tr.exports=lr})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;pdfExports.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";function PDFViewer$1({pdfUrl:tr,targetPage:er,marker:rr,onCapture:nr,onEditMarker:ir,onDeleteMarker:sr,onAddMarker:ar,preloadedPDF:cr,preloadedText:lr}){var bs;const or=reactExports.useRef(null),ur=reactExports.useRef(null),hr=reactExports.useRef(null),dr=reactExports.useRef(null),fr=reactExports.useRef(null),gr=reactExports.useRef(!1),br=typeof window<"u"&&(window.matchMedia("(max-width: 1024px)").matches||"ontouchstart"in window||navigator.maxTouchPoints>0),[pr,mr]=reactExports.useState(null),[yr,xr]=reactExports.useState(1),[vr,_r]=reactExports.useState(0),[Er,Tr]=reactExports.useState(()=>{const Bn=localStorage.getItem("pdf-viewer-zoom");if(Bn){const Yn=parseFloat(Bn);if(!isNaN(Yn)&&Yn>=.25&&Yn<=5)return Yn}return br?.5:1}),[Rr,Nr]=reactExports.useState(!0),[Dr,Ir]=reactExports.useState(null),[Or,jr]=reactExports.useState(!1),[Lr,Cr]=reactExports.useState(""),[wr,Pr]=reactExports.useState(!1),Ar=reactExports.useRef(null),Sr=reactExports.useRef(br?.5:1),[Mr,qr]=reactExports.useState(!1),[$r,Br]=reactExports.useState({x:0,y:0}),zr=reactExports.useRef(null),[Gr,Vr]=reactExports.useState(""),[Xr,Ur]=reactExports.useState([]),[Fr,Kr]=reactExports.useState(-1),[Zr,Jr]=reactExports.useState(!1),[tn,an]=reactExports.useState(!1),[dn,en]=reactExports.useState([]),[rn,sn]=reactExports.useState(new Map),on=reactExports.useRef(null);reactExports.useEffect(()=>{if(!tr)return;const Bn=getGlobalPDFCache();if(cr||Bn&&Bn.url===tr){const vn=cr||Bn.pdf,_n=lr||(Bn==null?void 0:Bn.textContent);console.log("[PDFViewer] Usando PDF precargado "),mr(vn),_r(vn.numPages),_n&&_n.size>0?sn(_n):fn(vn),Nr(!1);return}Nr(!0),Ir(null),pdfExports.getDocument(tr).promise.then(vn=>{mr(vn),_r(vn.numPages),Nr(!1),fn(vn)}).catch(vn=>{console.error("Error al cargar PDF:",vn),Ir("No se pudo cargar el manual PDF"),Nr(!1)})},[tr,cr,lr]);const fn=async Bn=>{const Yn=new Map;for(let vn=1;vn<=Bn.numPages;vn++)try{const Cn=(await(await Bn.getPage(vn)).getTextContent()).items.filter(wn=>"str"in wn&&"transform"in wn).map(wn=>({str:wn.str,transform:wn.transform}));let Zn="",qn=-1;for(const wn of Cn){const On=wn.transform[4];qn!==-1&&On-qn>10&&(Zn+=" "),Zn+=wn.str,qn=On+wn.str.length*5}Yn.set(vn,{text:Zn,items:Cn})}catch(_n){console.error(`Error cargando texto de pgina ${vn}:`,_n)}sn(Yn)};reactExports.useEffect(()=>{const Bn=Yn=>{(Yn.ctrlKey||Yn.metaKey)&&Yn.key==="f"&&(Yn.preventDefault(),an(!0)),Yn.key==="Escape"&&tn&&an(!1)};return window.addEventListener("keydown",Bn),()=>window.removeEventListener("keydown",Bn)},[tn]),reactExports.useEffect(()=>{if(!Rr&&pr&&er&&er>0&&vr>0&&er<=vr){const Bn=setTimeout(()=>{xr(er)},100);return()=>clearTimeout(Bn)}},[Rr,pr,er,vr]);const pn=reactExports.useRef(null),gn=reactExports.useRef(0),Pn=reactExports.useCallback(async Bn=>{!pr||!or.current||(pn.current&&clearTimeout(pn.current),pn.current=setTimeout(async()=>{var Yn,vn,_n;if(!(gr.current&&gn.current===Bn)){if(fr.current){try{fr.current.cancel(),await new Promise(Mn=>setTimeout(Mn,50))}catch{}fr.current=null}if(gr.current){pn.current=setTimeout(()=>Pn(Bn),100);return}gr.current=!0,gn.current=Bn;try{const Mn=await pr.getPage(Bn),Cn=or.current;if(!Cn){gr.current=!1;return}const Zn=Cn.getContext("2d");if(!Zn){gr.current=!1;return}const qn=Mn.getViewport({scale:Er});Zn.clearRect(0,0,Cn.width,Cn.height),Cn.height=qn.height,Cn.width=qn.width,ur.current&&(ur.current.height=qn.height,ur.current.width=qn.width);const wn=Mn.render({canvasContext:Zn,viewport:qn});if(fr.current=wn,await wn.promise,rr&&rr.pagina===Bn&&ur.current){const On=ur.current.getContext("2d");if(On){if(On.clearRect(0,0,ur.current.width,ur.current.height),On.fillStyle=rr.color||"rgba(239, 68, 68, 0.4)",rr.forma==="poligono"&&rr.puntos&&rr.puntos.length>=3){const Gn=rr.puntos.map(Qn=>({x:Qn.x*qn.width,y:Qn.y*qn.height}));On.beginPath(),On.moveTo(Gn[0].x,Gn[0].y);for(let Qn=1;Qn<Gn.length;Qn++)On.lineTo(Gn[Qn].x,Gn[Qn].y);On.closePath(),On.fill(),rr.sinBorde||(On.strokeStyle=((Yn=rr.color)==null?void 0:Yn.replace("0.4","0.8"))||"#ef4444",On.lineWidth=2,On.stroke())}else if(rr.coordenadas){const{x:Gn,y:Qn,width:$s,height:us}=rr.coordenadas,ws=Gn<=1&&Qn<=1&&$s<=1&&us<=1;let As,Rs,Ms,Bs;if(ws?(As=Gn*qn.width,Rs=Qn*qn.height,Ms=$s*qn.width,Bs=us*qn.height):(As=Gn*Er,Rs=Qn*Er,Ms=$s*Er,Bs=us*Er),rr.forma==="circulo"){const Zs=As+Ms/2,Qs=Rs+Bs/2;On.beginPath(),On.ellipse(Zs,Qs,Ms/2,Bs/2,0,0,2*Math.PI),On.fill(),rr.sinBorde||(On.strokeStyle=((vn=rr.color)==null?void 0:vn.replace("0.4","0.8"))||"#ef4444",On.lineWidth=2,On.stroke())}else On.fillRect(As,Rs,Ms,Bs),rr.sinBorde||(On.strokeStyle=((_n=rr.color)==null?void 0:_n.replace("0.4","0.8"))||"#ef4444",On.lineWidth=2,On.strokeRect(As,Rs,Ms,Bs))}}}else if(ur.current){const On=ur.current.getContext("2d");On&&On.clearRect(0,0,ur.current.width,ur.current.height)}fr.current=null}catch(Mn){if(Mn&&typeof Mn=="object"&&"name"in Mn&&Mn.name==="RenderingCancelledException")return}finally{gr.current=!1}}},30))},[pr,Er,rr]);reactExports.useEffect(()=>{Pn(yr)},[yr,Pn]),reactExports.useEffect(()=>()=>{if(pn.current&&clearTimeout(pn.current),fr.current)try{fr.current.cancel()}catch{}},[]);const In=()=>{yr>1&&xr(Bn=>Bn-1)},En=()=>{yr<vr&&xr(Bn=>Bn+1)},zn=.25,yn=5,Vn=.25,Kn=()=>{Tr(Bn=>{const Yn=Math.min(Bn+Vn,yn);return localStorage.setItem("pdf-viewer-zoom",String(Yn)),Yn})},es=()=>{Tr(Bn=>{const Yn=Math.max(Bn-Vn,zn);return localStorage.setItem("pdf-viewer-zoom",String(Yn)),Yn})};reactExports.useEffect(()=>{const Bn=dr.current;if(!Bn||Rr)return;const Yn=vn=>{vn.preventDefault(),vn.stopPropagation();const _n=vn.deltaY>0?-Vn:Vn;Tr(Mn=>{const Cn=Math.min(yn,Math.max(zn,Mn+_n));return localStorage.setItem("pdf-viewer-zoom",String(Cn)),Cn})};return Bn.addEventListener("wheel",Yn,{passive:!1}),()=>{Bn.removeEventListener("wheel",Yn)}},[Rr]);const Xn=reactExports.useCallback(Bn=>{if(Bn.touches.length===2){const Yn=Bn.touches[0],vn=Bn.touches[1],_n=Math.hypot(vn.clientX-Yn.clientX,vn.clientY-Yn.clientY);Ar.current=_n,Sr.current=Er}},[Er]),ds=reactExports.useCallback(Bn=>{if(Bn.touches.length===2&&Ar.current!==null){Bn.preventDefault();const Yn=Bn.touches[0],vn=Bn.touches[1],Mn=Math.hypot(vn.clientX-Yn.clientX,vn.clientY-Yn.clientY)/Ar.current,Cn=Math.min(Math.max(Sr.current*Mn,zn),yn);Tr(Cn),localStorage.setItem("pdf-viewer-zoom",String(Cn))}},[]),fs=reactExports.useCallback(()=>{Ar.current=null},[]);reactExports.useEffect(()=>{Br({x:0,y:0})},[yr,Er]);const os=reactExports.useCallback(Bn=>{Bn.button===0&&(qr(!0),zr.current={x:Bn.clientX,y:Bn.clientY,panX:$r.x,panY:$r.y},Bn.preventDefault())},[$r]),Hn=reactExports.useCallback(Bn=>{if(!Mr||!zr.current)return;const Yn=Bn.clientX-zr.current.x,vn=Bn.clientY-zr.current.y;Br({x:zr.current.panX+Yn,y:zr.current.panY+vn})},[Mr]),Ln=reactExports.useCallback(()=>{qr(!1),zr.current=null},[]),Dn=reactExports.useCallback(()=>{Mr&&(qr(!1),zr.current=null)},[Mr]),ls=()=>{const Bn=parseInt(Lr);!isNaN(Bn)&&Bn>=1&&Bn<=vr&&(xr(Bn),Cr(""))},Ds=reactExports.useCallback(Bn=>{if(!Bn.trim()||Bn.length<1){Ur([]),Kr(-1),en([]);return}Jr(!0);const Yn=[],vn=Bn.toLowerCase().trim(),_n=vn.replace(/\s+/g,"");rn.forEach((Mn,Cn)=>{const Zn=Mn.text.toLowerCase(),qn=Zn.replace(/\s+/g,"");let wn=!1,On=0;if(Zn.includes(vn)&&(wn=!0,On=(Zn.match(new RegExp(vn.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length),!wn&&_n.length>=2&&qn.includes(_n)&&(wn=!0,On=(qn.match(new RegExp(_n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"))||[]).length),wn){const Gn=Zn.indexOf(vn)!==-1?Zn.indexOf(vn):qn.indexOf(_n),Qn=Math.max(0,Gn-30),$s=Math.min(Mn.text.length,Gn+Bn.length+30),us=(Qn>0?"...":"")+Mn.text.substring(Qn,$s)+($s<Mn.text.length?"...":"");Yn.push({pageNum:Cn,text:us,matches:On})}}),Yn.sort((Mn,Cn)=>Cn.matches-Mn.matches),Ur(Yn),Kr(Yn.length>0?0:-1),Jr(!1),Yn.length>0&&xr(Yn[0].pageNum)},[rn]);reactExports.useEffect(()=>(on.current&&clearTimeout(on.current),Gr.length>=1?on.current=setTimeout(()=>{Ds(Gr)},150):(Ur([]),en([])),()=>{on.current&&clearTimeout(on.current)}),[Gr,Ds]),reactExports.useEffect(()=>{if(!ur.current||!pr||!Gr.trim()){en([]);return}(async()=>{if(!rn.get(yr))return;const vn=await pr.getPage(yr),_n=vn.getViewport({scale:Er}),Mn=await vn.getTextContent(),Cn=Gr.toLowerCase().trim(),Zn=Cn.replace(/\s+/g,""),qn=[],wn=Mn.items.filter(On=>"str"in On&&"transform"in On).map(On=>({str:On.str,x:On.transform[4],y:On.transform[5],width:On.width||On.str.length*6,height:On.height||12}));if(wn.forEach(On=>{if(On.str.toLowerCase().includes(Cn)){const Gn=On.x*Er,Qn=_n.height-On.y*Er-On.height*Er;qn.push({x:Gn,y:Qn,width:On.width*Er,height:On.height*Er*1.3})}}),qn.length===0&&Zn.length>=2){let On="";const Gn=[];wn.forEach(ws=>{const As=On.length;On+=ws.str,Gn.push({start:As,end:On.length,item:ws})});const Qn=On.toLowerCase(),$s=Qn.replace(/\s+/g,"");let us=0;for(;;){const ws=$s.indexOf(Zn,us);if(ws===-1)break;let As=0,Rs=0;for(let Qs=0;Qs<Qn.length&&Rs<ws;Qs++)Qn[Qs]!==" "&&Rs++,As=Qs+1;const Ms=Cn.length,Bs=As+Ms,Zs=Gn.filter(Qs=>Qs.start<Bs&&Qs.end>As);if(Zs.length>0){const Qs=Math.min(...Zs.map(Ss=>Ss.item.x)),eo=Math.max(...Zs.map(Ss=>Ss.item.x+Ss.item.width)),ao=Math.min(...Zs.map(Ss=>Ss.item.y)),Un=Math.max(...Zs.map(Ss=>Ss.item.y+Ss.item.height)),Ts=Qs*Er,Nn=_n.height-Un*Er,ns=(eo-Qs)*Er,Ps=(Un-ao)*Er*1.3;qn.push({x:Ts,y:Nn,width:ns,height:Ps})}us=ws+1}}en(qn)})()},[yr,Gr,pr,Er,rn]),reactExports.useEffect(()=>{if(!ur.current)return;const Bn=ur.current.getContext("2d");Bn&&((!rr||rr.pagina!==yr)&&Bn.clearRect(0,0,ur.current.width,ur.current.height),dn.length>0&&(Bn.fillStyle="rgba(255, 255, 0, 0.5)",Bn.strokeStyle="rgba(255, 180, 0, 1)",Bn.lineWidth=3,dn.forEach(Yn=>{Bn.shadowColor="rgba(255, 200, 0, 0.8)",Bn.shadowBlur=8,Bn.fillRect(Yn.x-2,Yn.y-2,Yn.width+4,Yn.height+4),Bn.shadowBlur=0,Bn.strokeRect(Yn.x-2,Yn.y-2,Yn.width+4,Yn.height+4)})))},[dn,rr,yr]);const xs=()=>{if(Xr.length===0)return;const Bn=(Fr+1)%Xr.length;Kr(Bn),xr(Xr[Bn].pageNum)},kn=()=>{if(Xr.length===0)return;const Bn=Fr<=0?Xr.length-1:Fr-1;Kr(Bn),xr(Xr[Bn].pageNum)},Jn=()=>{if(!or.current||!nr)return;const Bn=or.current.toDataURL("image/png");nr(Bn,yr),Pr(!1)},is=()=>{if(br)jr(Bn=>!Bn);else{if(!hr.current)return;if(document.fullscreenElement){const Bn=document;Bn.exitFullscreen?Bn.exitFullscreen():Bn.webkitExitFullscreen?Bn.webkitExitFullscreen():Bn.msExitFullscreen&&Bn.msExitFullscreen(),jr(!1)}else{const Bn=hr.current;Bn.requestFullscreen?Bn.requestFullscreen():Bn.webkitRequestFullscreen?Bn.webkitRequestFullscreen():Bn.msRequestFullscreen&&Bn.msRequestFullscreen(),jr(!0)}}};return reactExports.useEffect(()=>{const Bn=()=>{br||jr(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Bn),document.addEventListener("webkitfullscreenchange",Bn),()=>{document.removeEventListener("fullscreenchange",Bn),document.removeEventListener("webkitfullscreenchange",Bn)}},[br]),tr?Rr?jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col items-center justify-center bg-gray-100",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-8 h-8 text-primary-600 animate-spin mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Cargando manual..."})]}):Dr?jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100 text-red-500",children:jsxRuntimeExports.jsx("p",{children:Dr})}):jsxRuntimeExports.jsxs("div",{ref:hr,className:`h-full flex flex-col bg-gray-800 ${Or&&br?"fixed inset-0 z-[9999] w-screen h-screen":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center justify-between px-4 py-2 bg-gray-900 text-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:In,disabled:yr<=1,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium bg-gray-700 px-4 py-1 rounded-lg min-w-[80px] text-center",children:[yr," / ",vr]}),jsxRuntimeExports.jsx("button",{onClick:En,disabled:yr>=vr,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:Lr,onChange:Bn=>Cr(Bn.target.value),onKeyDown:Bn=>Bn.key==="Enter"&&ls(),placeholder:"Pg.",className:"w-16 px-2 py-1 text-sm bg-gray-700 rounded border border-gray-600 text-white placeholder-gray-400",min:"1",max:vr}),jsxRuntimeExports.jsx("button",{onClick:ls,className:"p-2 rounded hover:bg-gray-700",title:"Ir a pgina",children:jsxRuntimeExports.jsx(Search,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:es,className:"p-2 rounded hover:bg-gray-700",title:"Alejar",children:jsxRuntimeExports.jsx(ZoomOut,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm w-12 text-center",children:[Math.round(Er*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:Kn,className:"p-2 rounded hover:bg-gray-700",title:"Acercar",children:jsxRuntimeExports.jsx(ZoomIn,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-700 mx-2"}),jsxRuntimeExports.jsx("button",{onClick:()=>an(!tn),className:`p-2 rounded transition-colors ${tn?"bg-primary-600":"hover:bg-gray-700"}`,title:"Buscar texto en PDF (Ctrl+F)",children:jsxRuntimeExports.jsx(Search,{className:"w-5 h-5"})}),nr&&jsxRuntimeExports.jsx("button",{onClick:()=>Pr(!wr),className:`p-2 rounded transition-colors ${wr?"bg-primary-600":"hover:bg-gray-700"}`,title:"Capturar imagen",children:jsxRuntimeExports.jsx(Camera,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:is,className:"p-2 rounded hover:bg-gray-700",title:Or?"Salir de pantalla completa":"Pantalla completa",children:Or?jsxRuntimeExports.jsx(Minimize2,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"w-5 h-5"})})]})]}),jsxRuntimeExports.jsx("div",{className:"lg:hidden flex flex-col bg-gray-900 text-white",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-2 py-2 border-b border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:In,disabled:yr<=1,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium bg-gray-700 px-4 py-1 rounded-lg min-w-[70px] text-center",children:[yr," / ",vr]}),jsxRuntimeExports.jsx("button",{onClick:En,disabled:yr>=vr,className:"p-2 rounded hover:bg-gray-700 disabled:opacity-50",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:es,className:"p-2 rounded hover:bg-gray-700",children:jsxRuntimeExports.jsx(ZoomOut,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("span",{className:"text-xs w-10 text-center",children:[Math.round(Er*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:Kn,className:"p-2 rounded hover:bg-gray-700",children:jsxRuntimeExports.jsx(ZoomIn,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("div",{className:"w-px h-6 bg-gray-700 mx-1"}),jsxRuntimeExports.jsx("button",{onClick:()=>an(!tn),className:`p-2 rounded transition-colors ${tn?"bg-primary-600 text-white":"hover:bg-gray-700"}`,title:"Buscar en PDF",children:jsxRuntimeExports.jsx(Search,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:is,className:`p-2.5 rounded-lg transition-colors ${Or?"bg-primary-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,title:Or?"Salir":"Pantalla completa",children:Or?jsxRuntimeExports.jsx(Minimize2,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Maximize2,{className:"w-5 h-5"})})]})]})}),tn&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 bg-gray-800 border-b border-gray-700 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",value:Gr,onChange:Bn=>Vr(Bn.target.value),placeholder:"Buscar en el PDF... (ej: 200, 1-0201, Baader)",className:"w-full pl-10 pr-4 py-2.5 text-sm bg-gray-700 rounded-l-lg border border-gray-600 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",autoFocus:!0}),Zr&&jsxRuntimeExports.jsx(LoaderCircle,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-primary-400 animate-spin"})]}),Gr&&!Zr&&jsxRuntimeExports.jsx("div",{className:`px-3 py-2.5 text-sm border-y border-gray-600 ${Xr.length>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:Xr.length>0?`${Xr.length} pg${Xr.length>1?"s":""}`:"0"}),Xr.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex border border-gray-600 border-l-0 rounded-r-lg overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:kn,className:"p-2.5 bg-gray-700 hover:bg-gray-600 text-white border-r border-gray-600",title:"Anterior ()",children:jsxRuntimeExports.jsx(ChevronUp,{className:"w-4 h-4"})}),jsxRuntimeExports.jsx("button",{onClick:xs,className:"p-2.5 bg-gray-700 hover:bg-gray-600 text-white",title:"Siguiente ()",children:jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4"})})]}),!Xr.length&&Gr&&!Zr&&jsxRuntimeExports.jsx("div",{className:"px-3 py-2.5 bg-gray-700 rounded-r-lg border border-l-0 border-gray-600",children:jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-sm",children:""})})]}),Gr&&Xr.length>0&&jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 text-xs text-gray-400 border-b border-gray-700 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{children:[" ",Xr.length," pgina",Xr.length>1?"s":""," con resultados"]}),jsxRuntimeExports.jsx("span",{className:"text-yellow-400",children:" Resaltado activo"})]}),Xr.map((Bn,Yn)=>jsxRuntimeExports.jsxs("button",{onClick:()=>{Kr(Yn),xr(Bn.pageNum)},className:`w-full text-left px-3 py-2 text-sm border-b border-gray-700 last:border-b-0 transition-colors ${Yn===Fr?"bg-primary-600 text-white":"text-gray-300 hover:bg-gray-700"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"font-medium",children:["Pgina ",Bn.pageNum]}),Bn.matches>1&&jsxRuntimeExports.jsxs("span",{className:`text-xs px-2 py-0.5 rounded ${Yn===Fr?"bg-primary-700":"bg-gray-600"}`,children:[Bn.matches," coincidencias"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1 opacity-70 truncate",children:Bn.text})]},`${Bn.pageNum}-${Yn}`))]}),Gr&&Xr.length===0&&!Zr&&jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-xl z-50 p-4 text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-yellow-400 text-sm",children:[' No se encontr "',Gr,'"']}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Prueba con otro trmino o revisa la ortografa"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{an(!1),Vr(""),Ur([]),Kr(-1),en([])},className:"p-2 text-gray-400 hover:text-white rounded hover:bg-gray-700",title:"Cerrar bsqueda (Esc)",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),Xr.length>0&&Fr>=0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Resultado ",Fr+1," de ",Xr.length,"  Pgina ",(bs=Xr[Fr])==null?void 0:bs.pageNum]}),jsxRuntimeExports.jsxs("span",{className:"text-yellow-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-3 h-3 bg-yellow-400/40 border border-yellow-500 rounded-sm"}),"Texto resaltado en amarillo"]})]})]}),wr&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 bg-primary-600 text-white text-sm flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Modo captura activo - La pgina actual ser capturada como imagen"}),jsxRuntimeExports.jsxs("button",{onClick:Jn,className:"px-4 py-1 bg-white text-primary-600 rounded font-medium hover:bg-gray-100",children:["Capturar pgina ",yr]})]}),(rr||ar)&&jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-700 text-white text-sm flex items-center justify-between",children:rr&&rr.pagina===yr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 text-green-400"}),jsxRuntimeExports.jsx("span",{className:"text-green-400 font-medium",children:"Marcador en esta pgina"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[ir&&jsxRuntimeExports.jsxs("button",{onClick:()=>ir(rr),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(PenLine,{className:"w-3 h-3"}),"Editar"]}),sr&&jsxRuntimeExports.jsxs("button",{onClick:()=>{confirm("Eliminar este marcador?")&&sr(rr)},className:"px-3 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"}),"Eliminar"]})]})]}):rr?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 text-yellow-400"}),jsxRuntimeExports.jsxs("span",{className:"text-yellow-400",children:["Marcador en pgina ",rr.pagina]}),jsxRuntimeExports.jsx("button",{onClick:()=>xr(rr.pagina),className:"px-2 py-0.5 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700",children:"Ir al marcador"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[ir&&jsxRuntimeExports.jsxs("button",{onClick:()=>ir(rr),className:"px-3 py-1 bg-blue-600 text-white rounded text-xs font-medium hover:bg-blue-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(PenLine,{className:"w-3 h-3"}),"Editar"]}),sr&&jsxRuntimeExports.jsxs("button",{onClick:()=>{confirm("Eliminar este marcador?")&&sr(rr)},className:"px-3 py-1 bg-red-600 text-white rounded text-xs font-medium hover:bg-red-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"}),"Eliminar"]})]})]}):ar?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Sin marcador"})]}),jsxRuntimeExports.jsxs("button",{onClick:ar,className:"px-3 py-1 bg-green-600 text-white rounded text-xs font-medium hover:bg-green-700 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Plus,{className:"w-3 h-3"}),"Agregar marcador"]})]}):null}),jsxRuntimeExports.jsx("div",{ref:dr,className:"flex-1 overflow-hidden pdf-container flex items-center justify-center",onTouchStart:Xn,onTouchMove:ds,onTouchEnd:fs,onMouseDown:os,onMouseMove:Hn,onMouseUp:Ln,onMouseLeave:Dn,style:{cursor:Mr?"grabbing":"grab",userSelect:"none"},children:jsxRuntimeExports.jsxs("div",{className:"relative",style:{transform:`translate(${$r.x}px, ${$r.y}px)`,transition:Mr?"none":"transform 0.1s ease-out"},children:[jsxRuntimeExports.jsx("canvas",{ref:or,className:"pdf-page bg-white shadow-lg block"}),jsxRuntimeExports.jsx("canvas",{ref:ur,className:"absolute top-0 left-0 pointer-events-none"})]})}),jsxRuntimeExports.jsx("div",{className:"px-4 py-1 bg-gray-900 text-gray-400 text-xs text-center",children:br?jsxRuntimeExports.jsx("span",{children:" Pellizca para zoom  Desliza para navegar"}):jsxRuntimeExports.jsx("span",{children:" Scroll = Zoom  Arrastra con clic = Mover"})})]}):jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center bg-gray-100 text-gray-500",children:jsxRuntimeExports.jsx("p",{children:"Selecciona un repuesto para ver el manual"})})}const PDFViewer$2=Object.freeze(Object.defineProperty({__proto__:null,PDFViewer:PDFViewer$1},Symbol.toStringTag,{value:"Module"}));function getTagTipo(tr){return isTagAsignado(tr)?tr.tipo:"solicitud"}function getTagCantidad(tr){return isTagAsignado(tr)?tr.cantidad:0}function getAllUniqueTagsByType(tr){const er=new Set,rr=new Set;return tr.forEach(nr=>{var ir;(ir=nr.tags)==null||ir.forEach(sr=>{const ar=getTagNombre(sr);if(!ar)return;getTagTipo(sr)==="stock"?rr.add(ar):er.add(ar)})}),{solicitud:Array.from(er).sort(),stock:Array.from(rr).sort()}}function getCantidadTag(tr,er){var nr;const rr=(nr=tr.tags)==null?void 0:nr.find(ir=>getTagNombre(ir)===er);return rr?getTagCantidad(rr):null}const ContextComparator=({isOpen:tr,onClose:er,repuestos:rr,isDarkMode:nr,onViewInManual:ir,pdfUrl:sr})=>{const[ar,cr]=reactExports.useState([]),[lr,or]=reactExports.useState(""),[ur,hr]=reactExports.useState("codigoSAP"),[dr,fr]=reactExports.useState("asc"),[gr,br]=reactExports.useState("todos"),[pr,mr]=reactExports.useState(!1),[yr,xr]=reactExports.useState(!1),[vr,_r]=reactExports.useState(0),[Er,Tr]=reactExports.useState(!1),[Rr,Nr]=reactExports.useState(null),[Dr,Ir]=reactExports.useState(),[Or,jr]=reactExports.useState(),Lr=reactExports.useMemo(()=>getAllUniqueTagsByType(rr),[rr]);reactExports.useMemo(()=>[...Lr.solicitud,...Lr.stock],[Lr]);const Cr=reactExports.useCallback((Fr,Kr,Zr)=>{if(!Kr&&!Zr)return"sin-datos";const Jr=Kr?getCantidadTag(Fr,Kr)??0:0,tn=Zr?getCantidadTag(Fr,Zr)??0:0;return Jr===0&&tn===0?"sin-datos":Jr===0?"no-solicitado":tn>=Jr?"cubierto":tn>0?"parcial":"sin-stock"},[]),{solicitudTag:wr,stockTag:Pr}=reactExports.useMemo(()=>{let Fr=null,Kr=null;return ar.forEach(Zr=>{Lr.stock.includes(Zr)?Kr=Zr:Fr||(Fr=Zr)}),{solicitudTag:Fr,stockTag:Kr}},[ar,Lr]),Ar=reactExports.useMemo(()=>{if(ar.length===0)return[];let Fr=rr.filter(Kr=>ar.some(Zr=>getCantidadTag(Kr,Zr)!==null));if(lr.trim()){const Kr=lr.toLowerCase();Fr=Fr.filter(Zr=>{var Jr;return Zr.codigoSAP.toLowerCase().includes(Kr)||Zr.textoBreve.toLowerCase().includes(Kr)||((Jr=Zr.codigoBaader)==null?void 0:Jr.toLowerCase().includes(Kr))})}if(ar.length>=2){const Kr=ar[0],Zr=ar[1];switch(gr){case"con-diferencia":Fr=Fr.filter(Jr=>{const tn=getCantidadTag(Jr,Kr)??0,an=getCantidadTag(Jr,Zr)??0;return tn!==an});break;case"solo-primero":Fr=Fr.filter(Jr=>{const tn=getCantidadTag(Jr,Kr),an=getCantidadTag(Jr,Zr);return tn!==null&&tn>0&&(an===null||an===0)});break;case"solo-segundo":Fr=Fr.filter(Jr=>{const tn=getCantidadTag(Jr,Kr),an=getCantidadTag(Jr,Zr);return an!==null&&an>0&&(tn===null||tn===0)});break;case"en-ambos":Fr=Fr.filter(Jr=>{const tn=getCantidadTag(Jr,Kr),an=getCantidadTag(Jr,Zr);return tn!==null&&tn>0&&an!==null&&an>0});break;case"faltante-alguno":Fr=Fr.filter(Jr=>{const tn=getCantidadTag(Jr,Kr),an=getCantidadTag(Jr,Zr);return tn===null||tn===0||an===null||an===0});break;case"cubierto":Fr=Fr.filter(Jr=>Cr(Jr,wr,Pr)==="cubierto");break;case"parcial":Fr=Fr.filter(Jr=>Cr(Jr,wr,Pr)==="parcial");break;case"sin-stock":Fr=Fr.filter(Jr=>Cr(Jr,wr,Pr)==="sin-stock");break}}return Fr.sort((Kr,Zr)=>{let Jr=0;const tn=ar[vr]||ar[0];switch(ur){case"codigoSAP":Jr=Kr.codigoSAP.localeCompare(Zr.codigoSAP);break;case"textoBreve":Jr=Kr.textoBreve.localeCompare(Zr.textoBreve);break;case"valorUnitario":Jr=Kr.valorUnitario-Zr.valorUnitario;break;case"diferencia":if(ar.length>=2){const rn=(getCantidadTag(Kr,ar[0])??0)-(getCantidadTag(Kr,ar[1])??0),sn=(getCantidadTag(Zr,ar[0])??0)-(getCantidadTag(Zr,ar[1])??0);Jr=rn-sn}break;case"deltaRef":if(ar.length>=2){const rn=getCantidadTag(Kr,tn)??0,sn=getCantidadTag(Zr,tn)??0,on=ar.reduce((pn,gn)=>gn===tn?pn:pn+Math.abs((getCantidadTag(Kr,gn)??0)-rn),0),fn=ar.reduce((pn,gn)=>gn===tn?pn:pn+Math.abs((getCantidadTag(Zr,gn)??0)-sn),0);Jr=on-fn}break;case"estado":const an={"sin-stock":0,parcial:1,cubierto:2,"no-solicitado":3,"sin-datos":4},dn=Cr(Kr,wr,Pr),en=Cr(Zr,wr,Pr);Jr=an[dn]-an[en];break;case"tag1":ar.length>=1&&(Jr=(getCantidadTag(Kr,ar[0])??0)-(getCantidadTag(Zr,ar[0])??0));break;case"tag2":ar.length>=2&&(Jr=(getCantidadTag(Kr,ar[1])??0)-(getCantidadTag(Zr,ar[1])??0));break}return dr==="asc"?Jr:-Jr}),Fr},[rr,ar,lr,gr,ur,dr,vr,Cr,wr,Pr]),Sr=reactExports.useMemo(()=>{const Fr={};return ar.forEach(Kr=>{Fr[Kr]={count:0,total:0,totalUSD:0,avg:0,max:0,min:1/0}}),Ar.forEach(Kr=>{ar.forEach(Zr=>{const Jr=getCantidadTag(Kr,Zr);Jr!==null&&Jr>0&&(Fr[Zr].count++,Fr[Zr].total+=Jr,Fr[Zr].totalUSD+=Jr*Kr.valorUnitario,Fr[Zr].max=Math.max(Fr[Zr].max,Jr),Fr[Zr].min=Math.min(Fr[Zr].min,Jr))})}),ar.forEach(Kr=>{Fr[Kr].avg=Fr[Kr].count>0?Fr[Kr].total/Fr[Kr].count:0,Fr[Kr].min===1/0&&(Fr[Kr].min=0)}),Fr},[Ar,ar]),Mr=reactExports.useMemo(()=>{if(ar.length<2)return null;let Fr=0,Kr=0,Zr=0,Jr=0,tn=0;return Ar.forEach(an=>{const dn=getCantidadTag(an,ar[0])??0,en=getCantidadTag(an,ar[1])??0,rn=dn-en;rn>0?Fr++:rn<0?Kr++:Zr++,Jr+=rn,tn+=rn*an.valorUnitario}),{positivas:Fr,negativas:Kr,iguales:Zr,sumDiff:Jr,sumDiffUSD:tn}},[Ar,ar]),qr=reactExports.useMemo(()=>{if(!wr||!Pr)return null;let Fr=0,Kr=0,Zr=0,Jr=0,tn=0,an=0,dn=0,en=0,rn=0,sn=0;Ar.forEach(pn=>{const gn=getCantidadTag(pn,wr)??0,Pn=getCantidadTag(pn,Pr)??0;switch(Cr(pn,wr,Pr)){case"cubierto":Fr++;break;case"parcial":Kr++;break;case"sin-stock":Zr++;break;case"no-solicitado":Jr++;break}tn+=gn,an+=Math.min(Pn,gn),dn+=Math.max(0,gn-Pn),en+=gn*pn.valorUnitario,rn+=Math.min(Pn,gn)*pn.valorUnitario,sn+=Math.max(0,gn-Pn)*pn.valorUnitario});const on=tn>0?an/tn*100:0,fn=en>0?rn/en*100:0;return{cubiertos:Fr,parciales:Kr,sinStock:Zr,noSolicitados:Jr,totalSolicitado:tn,totalEnBodega:an,totalFaltante:dn,totalSolicitadoUSD:en,totalEnBodegaUSD:rn,totalFaltanteUSD:sn,tasaCobertura:on,tasaCoberturaUSD:fn}},[Ar,wr,Pr,Cr]),$r=reactExports.useMemo(()=>{if(ar.length<2)return[];const Fr=ar[vr]||ar[0];return ar.filter((Zr,Jr)=>Jr!==vr).map(Zr=>{let Jr=0,tn=0,an=0,dn=0,en=0,rn=0;Ar.forEach(on=>{const fn=getCantidadTag(on,Fr)??0,gn=(getCantidadTag(on,Zr)??0)-fn;gn>0?Jr++:gn<0?tn++:an++,dn+=gn,en+=gn*on.valorUnitario,rn+=fn});const sn=rn>0?dn/rn*100:0;return{tagName:Zr,aumentaron:Jr,disminuyeron:tn,iguales:an,sumDiff:dn,sumDiffUSD:en,tasaAjuste:sn}})},[Ar,ar,vr]),Br=Fr=>{cr(Kr=>Kr.includes(Fr)?Kr.filter(Zr=>Zr!==Fr):[...Kr,Fr])},zr=Fr=>{ur===Fr?fr(Kr=>Kr==="asc"?"desc":"asc"):(hr(Fr),fr("asc"))},Gr=Fr=>ur!==Fr?jsxRuntimeExports.jsx(ArrowUpDown,{className:"w-3 h-3 opacity-40"}):dr==="asc"?jsxRuntimeExports.jsx(ArrowUp,{className:"w-3 h-3 text-blue-500"}):jsxRuntimeExports.jsx(ArrowDown,{className:"w-3 h-3 text-blue-500"}),Vr=reactExports.useCallback(async()=>{if(ar.length<2||Ar.length===0)return;const Fr=new ExcelJS.Workbook;Fr.creator="Baader 200 App - Comparador",Fr.created=new Date;const Kr=Fr.addWorksheet("Comparacin"),Zr=[{header:"Cdigo SAP",key:"codigoSAP",width:14},{header:"Cod. Baader",key:"codBaader",width:14},{header:"Descripcin",key:"descripcion",width:40},{header:"Valor Unit.",key:"valorUnit",width:12},...ar.map((fn,pn)=>({header:fn,key:`tag${pn}`,width:18})),{header:"Diferencia",key:"diferencia",width:12},{header:"Dif. USD",key:"difUSD",width:14}];Kr.columns=Zr;const Jr=Kr.getRow(1);Jr.font={bold:!0,color:{argb:"FFFFFFFF"}},Jr.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1E40AF"}},Jr.alignment={vertical:"middle",horizontal:"center"},Ar.forEach((fn,pn)=>{const gn=ar.map(yn=>getCantidadTag(fn,yn)??0),Pn=gn.length>=2?gn[0]-gn[1]:0,In={codigoSAP:fn.codigoSAP,codBaader:fn.codigoBaader,descripcion:fn.textoBreve,valorUnit:fn.valorUnitario,diferencia:Pn,difUSD:Pn*fn.valorUnitario};ar.forEach((yn,Vn)=>{In[`tag${Vn}`]=gn[Vn]});const En=Kr.addRow(In);pn%2===1&&(En.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF3F4F6"}});const zn=En.getCell("diferencia");Pn>0?zn.font={color:{argb:"FF16A34A"}}:Pn<0&&(zn.font={color:{argb:"FFDC2626"}}),En.getCell("valorUnit").numFmt='"$"#,##0.00',En.getCell("difUSD").numFmt='"$"#,##0.00'});const tn=Kr.addRow({codigoSAP:"",codBaader:"",descripcion:"TOTALES",valorUnit:"",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.total)||0]})),diferencia:(Mr==null?void 0:Mr.sumDiff)||0,difUSD:(Mr==null?void 0:Mr.sumDiffUSD)||0});tn.font={bold:!0},tn.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFDBEAFE"}},tn.getCell("difUSD").numFmt='"$"#,##0.00';const an=Fr.addWorksheet("Resumen");an.columns=[{header:"Mtrica",key:"metrica",width:30},...ar.map((fn,pn)=>({header:fn,key:`tag${pn}`,width:20}))],an.getRow(1).font={bold:!0},[{metrica:"Total repuestos",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.count)||0]}))},{metrica:"Total unidades",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.total)||0]}))},{metrica:"Total USD",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.totalUSD)||0]}))},{metrica:"Promedio por repuesto",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.avg.toFixed(2))||0]}))},{metrica:"Mximo",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.max)||0]}))},{metrica:"Mnimo",...Object.fromEntries(ar.map((fn,pn)=>{var gn;return[`tag${pn}`,((gn=Sr[fn])==null?void 0:gn.min)||0]}))}].forEach(fn=>an.addRow(fn));const en=await Fr.xlsx.writeBuffer(),rn=new Blob([en],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),sn=ar[0].substring(0,15).replace(/[^a-zA-Z0-9]/g,"_"),on=ar[1].substring(0,15).replace(/[^a-zA-Z0-9]/g,"_");FileSaver_minExports.saveAs(rn,`comparacion_${sn}_vs_${on}.xlsx`)},[Ar,ar,Sr,Mr]),[Xr,Ur]=reactExports.useState(!1);return tr?jsxRuntimeExports.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col ${nr?"bg-gray-900 text-white":"bg-gray-100"}`,children:[jsxRuntimeExports.jsxs("header",{className:`flex items-center justify-between px-4 py-3 border-b shadow-sm ${nr?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:er,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors
              ${nr?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[jsxRuntimeExports.jsx(House,{className:"w-4 h-4"}),"Volver"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(GitCompare,{className:"w-6 h-6 text-blue-500"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"Comparador de Contextos"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[Ar.length," de ",rr.length," repuestos"]}),ar.length>=2&&jsxRuntimeExports.jsxs("button",{onClick:Vr,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Exportar Excel"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[jsxRuntimeExports.jsxs("aside",{className:`${Xr?"w-12":"w-80"} flex-shrink-0 border-r overflow-hidden transition-all duration-300 flex flex-col
          ${nr?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ur(!Xr),className:`w-full p-3 flex items-center justify-center border-b ${nr?"border-gray-700 hover:bg-gray-700":"border-gray-200 hover:bg-gray-100"}`,title:Xr?"Expandir panel":"Colapsar panel",children:Xr?jsxRuntimeExports.jsx(PanelLeftOpen,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(PanelLeftClose,{className:"w-5 h-5"})}),!Xr&&jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4 text-blue-500"}),"Contextos a comparar"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Selecciona 2 o ms:"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400",children:["Solicitudes (",Lr.solicitud.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Lr.solicitud.map(Fr=>{const Kr=ar.includes(Fr),Zr=ar.indexOf(Fr);return jsxRuntimeExports.jsxs("button",{onClick:()=>Br(Fr),className:`px-2 py-1 rounded text-xs transition-all flex items-center gap-1
                            ${Kr?"bg-blue-500 text-white":nr?"bg-gray-700 hover:bg-blue-900/50":"bg-blue-50 hover:bg-blue-100 text-blue-700"}`,title:Fr,children:[Kr&&jsxRuntimeExports.jsx("span",{className:"w-3 h-3 rounded-full bg-white/30 text-[9px] flex items-center justify-center",children:Zr+1}),jsxRuntimeExports.jsx("span",{className:"truncate max-w-[120px]",children:Fr})]},Fr)})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:["Stock (",Lr.stock.length,")"]})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Lr.stock.map(Fr=>{const Kr=ar.includes(Fr),Zr=ar.indexOf(Fr);return jsxRuntimeExports.jsxs("button",{onClick:()=>Br(Fr),className:`px-2 py-1 rounded text-xs transition-all flex items-center gap-1
                            ${Kr?"bg-green-500 text-white":nr?"bg-gray-700 hover:bg-green-900/50":"bg-green-50 hover:bg-green-100 text-green-700"}`,title:Fr,children:[Kr&&jsxRuntimeExports.jsx("span",{className:"w-3 h-3 rounded-full bg-white/30 text-[9px] flex items-center justify-center",children:Zr+1}),jsxRuntimeExports.jsx("span",{className:"truncate max-w-[120px]",children:Fr})]},Fr)})})]}),ar.length>0&&jsxRuntimeExports.jsx("button",{onClick:()=>cr([]),className:"text-xs text-red-500 hover:text-red-600 mt-2",children:"Limpiar seleccin"})]}),ar.length>=2&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg ${nr?"bg-gray-700":"bg-gray-50"}`,children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4 text-purple-500"}),"Resumen por contexto"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:ar.map((Fr,Kr)=>{var Jr,tn,an;const Zr=Lr.solicitud.includes(Fr);return jsxRuntimeExports.jsxs("div",{className:`p-2 rounded text-xs ${Zr?"bg-blue-50 dark:bg-blue-900/20":"bg-green-50 dark:bg-green-900/20"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[jsxRuntimeExports.jsx("span",{className:`w-4 h-4 rounded-full flex items-center justify-center text-[10px] font-bold text-white
                              ${Zr?"bg-blue-500":"bg-green-500"}`,children:Kr+1}),jsxRuntimeExports.jsx("span",{className:"truncate flex-1 font-medium",title:Fr,children:Fr})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block font-semibold",children:((Jr=Sr[Fr])==null?void 0:Jr.count)||0}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"items"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block font-semibold",children:((tn=Sr[Fr])==null?void 0:tn.total)||0}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"uds"})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("span",{className:"block font-semibold text-green-600",children:["$",(((an=Sr[Fr])==null?void 0:an.totalUSD)||0).toLocaleString("es-CL",{maximumFractionDigits:0})]})})]})]},Fr)})})]}),wr&&Pr&&qr&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg border-2 ${nr?"bg-gray-700 border-purple-700":"bg-purple-50 border-purple-200"}`,children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2 text-purple-700 dark:text-purple-300",title:"Anlisis de qu tanto el stock en bodega cubre la cantidad solicitada",children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4"}),"Cobertura de Bodega"]}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-3",children:[jsxRuntimeExports.jsxs("div",{className:`text-3xl font-bold cursor-help ${qr.tasaCobertura>=80?"text-green-600":qr.tasaCobertura>=50?"text-amber-600":"text-red-600"}`,title:`Tasa de cobertura = (Total en bodega / Total solicitado)  100

Significa que el ${qr.tasaCobertura.toFixed(1)}% de las unidades solicitadas estn disponibles en bodega.

80% = Excelente (verde)
50-79% = Regular (amarillo)
<50% = Crtico (rojo)`,children:[qr.tasaCobertura.toFixed(1),"%"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Tasa de cobertura"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between cursor-help",title:`${qr.cubiertos} repuestos donde la cantidad en bodega es IGUAL o MAYOR a lo solicitado.

Estos items estn 100% cubiertos y no necesitan compra.`,children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-3 h-3 text-green-500"}),"Cubiertos"]}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-600",children:qr.cubiertos})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between cursor-help",title:`${qr.parciales} repuestos donde hay ALGO en bodega pero NO alcanza para cubrir lo solicitado.

Estos items necesitan compra parcial.`,children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-3 h-3 text-amber-500"}),"Parciales"]}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-amber-600",children:qr.parciales})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between cursor-help",title:`${qr.sinStock} repuestos donde la cantidad en bodega es CERO.

Estos items necesitan compra completa.`,children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(CircleX,{className:"w-3 h-3 text-red-500"}),"Sin stock"]}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-red-600",children:qr.sinStock})]})]}),jsxRuntimeExports.jsxs("div",{className:"h-4 rounded-full overflow-hidden flex bg-gray-200 dark:bg-gray-700 mt-2 cursor-help",title:"Barra visual de distribucin:\\n Verde = % de items cubiertos\\n Amarillo = % de items parciales\\n Rojo = % de items sin stock",children:[qr.cubiertos>0&&jsxRuntimeExports.jsx("div",{className:"bg-green-500 h-full",style:{width:`${qr.cubiertos/(qr.cubiertos+qr.parciales+qr.sinStock)*100}%`}}),qr.parciales>0&&jsxRuntimeExports.jsx("div",{className:"bg-amber-500 h-full",style:{width:`${qr.parciales/(qr.cubiertos+qr.parciales+qr.sinStock)*100}%`}}),qr.sinStock>0&&jsxRuntimeExports.jsx("div",{className:"bg-red-500 h-full",style:{width:`${qr.sinStock/(qr.cubiertos+qr.parciales+qr.sinStock)*100}%`}})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-500 grid grid-cols-3 gap-1 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`Total de unidades solicitadas sumando todos los repuestos: ${qr.totalSolicitado} unidades`,children:["Solicitado",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:qr.totalSolicitado})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`Total de unidades disponibles en bodega que cubren lo solicitado: ${qr.totalEnBodega} unidades

(Se cuenta mximo lo solicitado por item)`,children:["En bodega",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-green-600",children:qr.totalEnBodega})]}),jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`Total de unidades que FALTAN para cubrir lo solicitado: ${qr.totalFaltante} unidades

Faltante = Solicitado - En bodega`,children:["Faltante",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-red-600",children:qr.totalFaltante})]})]})]}),Mr&&ar.length===2&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg ${nr?"bg-gray-700":"bg-gray-50"}`,children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",title:`Comparacin entre:
 ${ar[0]}
 ${ar[1]}

Muestra cuntos repuestos tienen ms, igual o menos cantidad en el contexto  vs `,children:[jsxRuntimeExports.jsx(Percent,{className:"w-4 h-4 text-orange-500"}),"Diferencias"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`${Mr.positivas} repuestos donde el contexto  tiene MS cantidad que el contexto .

(Cantidad > Cantidad)`,children:[jsxRuntimeExports.jsxs("span",{className:"block text-lg font-bold text-green-600",children:["+",Mr.positivas]}),"Mayor"]}),jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`${Mr.iguales} repuestos donde AMBOS contextos tienen la MISMA cantidad.

(Cantidad = Cantidad)`,children:[jsxRuntimeExports.jsx("span",{className:"block text-lg font-bold text-gray-500",children:Mr.iguales}),"Igual"]}),jsxRuntimeExports.jsxs("div",{className:"cursor-help",title:`${Mr.negativas} repuestos donde el contexto  tiene MENOS cantidad que el contexto .

(Cantidad < Cantidad)`,children:[jsxRuntimeExports.jsx("span",{className:"block text-lg font-bold text-red-600",children:Mr.negativas}),"Menor"]})]}),jsxRuntimeExports.jsxs("div",{className:`p-2 rounded text-center cursor-help ${Mr.sumDiff>=0?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"}`,title:`Balance total de unidades:

Suma de (Cantidad - Cantidad) para todos los repuestos.

${Mr.sumDiff>=0?"Positivo: El contexto  tiene ms unidades en total":"Negativo: El contexto  tiene ms unidades en total"}

Valor en USD: ${Mr.sumDiffUSD>=0?"+":""}$${Mr.sumDiffUSD.toLocaleString("es-CL")}`,children:[jsxRuntimeExports.jsxs("span",{className:`text-lg font-bold ${Mr.sumDiff>=0?"text-green-600":"text-red-600"}`,children:[Mr.sumDiff>=0?"+":"",Mr.sumDiff]}),jsxRuntimeExports.jsxs("span",{className:`block text-xs ${Mr.sumDiffUSD>=0?"text-green-600":"text-red-600"}`,children:[Mr.sumDiffUSD>=0?"+":"","$",Mr.sumDiffUSD.toLocaleString("es-CL",{minimumFractionDigits:0})]})]})]}),ar.length>=2&&$r.length>0&&jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg border ${nr?"bg-gray-700 border-blue-700":"bg-blue-50 border-blue-200"}`,children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2 text-blue-700 dark:text-blue-300",title:"Compara cada contexto contra el contexto de referencia seleccionado.\\n\\nPermite ver cmo varan las cantidades respecto a una base.",children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4"}),"vs Referencia"]}),jsxRuntimeExports.jsx("select",{value:vr,onChange:Fr=>_r(parseInt(Fr.target.value)),className:`w-full px-2 py-1 rounded text-xs mb-2 ${nr?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,title:"Selecciona cul contexto ser la BASE de comparacin (referencia)",children:ar.map((Fr,Kr)=>jsxRuntimeExports.jsxs("option",{value:Kr,children:["Ref: ",Fr.substring(0,30)]},Fr))}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:$r.map(Fr=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded text-xs ${nr?"bg-gray-800":"bg-white"}`,children:[jsxRuntimeExports.jsx("p",{className:"truncate font-medium mb-1",title:`Comparando: ${Fr.tagName} vs ${ar[vr]}`,children:Fr.tagName.substring(0,25)}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-1 text-center",children:[jsxRuntimeExports.jsxs("span",{className:"text-green-600 cursor-help",title:`${Fr.aumentaron} repuestos donde "${Fr.tagName.substring(0,20)}" tiene MS cantidad que la referencia.

Estos items tienen mayor cantidad en este contexto.`,children:["",Fr.aumentaron]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-500 cursor-help",title:`${Fr.iguales} repuestos donde "${Fr.tagName.substring(0,20)}" tiene la MISMA cantidad que la referencia.

Estos items no cambiaron.`,children:["=",Fr.iguales]}),jsxRuntimeExports.jsxs("span",{className:"text-red-600 cursor-help",title:`${Fr.disminuyeron} repuestos donde "${Fr.tagName.substring(0,20)}" tiene MENOS cantidad que la referencia.

Estos items tienen menor cantidad en este contexto.`,children:["",Fr.disminuyeron]})]})]},Fr.tagName))})]})]})]}),jsxRuntimeExports.jsxs("main",{className:`flex-1 flex flex-col overflow-hidden ${nr?"bg-gray-900":"bg-gray-50"}`,children:[ar.length>=2&&jsxRuntimeExports.jsxs("div",{className:`p-3 border-b flex flex-wrap items-center gap-3 ${nr?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-1 min-w-[200px] max-w-sm",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Buscar cdigo o descripcin...",value:lr,onChange:Fr=>or(Fr.target.value),className:`w-full pl-9 pr-4 py-2 rounded-lg border text-sm
                    ${nr?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"}`}),lr&&jsxRuntimeExports.jsx("button",{onClick:()=>or(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>mr(!pr),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm
                    ${gr!=="todos"?"bg-blue-50 border-blue-300 text-blue-700 dark:bg-blue-900/30 dark:border-blue-700":nr?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}`,children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4"}),"Filtrar",gr!=="todos"&&jsxRuntimeExports.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),pr&&jsxRuntimeExports.jsx("div",{className:`absolute top-full left-0 mt-1 w-64 rounded-lg shadow-xl border z-20
                    ${nr?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"p-2 space-y-1",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 px-3 py-1 font-medium",children:"Filtros generales"}),[{value:"todos",label:"Todos"},{value:"con-diferencia",label:"Con diferencia"},{value:"en-ambos",label:"En ambos"},{value:"faltante-alguno",label:"Falta en alguno"}].map(Fr=>jsxRuntimeExports.jsxs("button",{onClick:()=>{br(Fr.value),mr(!1)},className:`w-full text-left px-3 py-2 rounded text-sm flex items-center justify-between
                            ${gr===Fr.value?"bg-blue-100 text-blue-700 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[Fr.label,gr===Fr.value&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"})]},Fr.value)),wr&&Pr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"border-t my-2 mx-2 opacity-30"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 px-3 py-1 font-medium",children:"Cobertura"}),[{value:"cubierto",label:" Cubiertos"},{value:"parcial",label:" Parciales"},{value:"sin-stock",label:" Sin stock"}].map(Fr=>jsxRuntimeExports.jsxs("button",{onClick:()=>{br(Fr.value),mr(!1)},className:`w-full text-left px-3 py-2 rounded text-sm flex items-center justify-between
                                ${gr===Fr.value?"bg-blue-100 text-blue-700 dark:bg-blue-900/30":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[Fr.label,gr===Fr.value&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4"})]},Fr.value))]})]})})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>xr(!yr),className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm
                  ${nr?"bg-gray-700 border-gray-600":"bg-white border-gray-300"}
                  ${yr?"text-blue-600":""}`,children:[yr?jsxRuntimeExports.jsx(Eye,{className:"w-4 h-4"}):jsxRuntimeExports.jsx(EyeOff,{className:"w-4 h-4"}),yr?"Normal":"Compacto"]}),jsxRuntimeExports.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[Ar.length," repuestos",gr!=="todos"&&" (filtrado)"]})]}),ar.length>=2?jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto",children:[jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:`sticky top-0 z-10 ${nr?"bg-gray-800":"bg-white"}`,children:jsxRuntimeExports.jsxs("tr",{className:`border-b ${nr?"border-gray-700":"border-gray-200"}`,children:[(sr||ir)&&jsxRuntimeExports.jsx("th",{className:"text-center p-2 font-semibold w-10",children:jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4 mx-auto opacity-50"})}),jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>zr("codigoSAP"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Cdigo SAP ",Gr("codigoSAP")]})}),!yr&&jsxRuntimeExports.jsx("th",{className:"text-left p-2 font-semibold cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>zr("textoBreve"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:["Descripcin ",Gr("textoBreve")]})}),jsxRuntimeExports.jsx("th",{className:"text-right p-2 font-semibold cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>zr("valorUnitario"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-end gap-1",children:["Valor ",Gr("valorUnitario")]})}),ar.map((Fr,Kr)=>{const Zr=Lr.solicitud.includes(Fr);return jsxRuntimeExports.jsx("th",{className:`text-center p-2 font-semibold min-w-[80px] cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700
                            ${Zr?"bg-blue-50 dark:bg-blue-900/20":"bg-green-50 dark:bg-green-900/20"}`,onClick:()=>zr(`tag${Kr+1}`),title:Fr,children:jsxRuntimeExports.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold mx-auto text-white
                            ${Zr?"bg-blue-500":"bg-green-500"}`,children:Kr+1})},Fr)}),ar.length===2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("th",{className:"text-center p-2 font-semibold cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>zr("diferencia"),children:jsxRuntimeExports.jsxs("span",{className:"flex items-center justify-center gap-1",children:["Dif. ",Gr("diferencia")]})}),!yr&&jsxRuntimeExports.jsx("th",{className:"text-center p-2 font-semibold",children:"Dif. $"})]}),wr&&Pr&&jsxRuntimeExports.jsx("th",{className:"text-center p-2 font-semibold cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 w-16",onClick:()=>zr("estado"),title:"Estado de cobertura",children:jsxRuntimeExports.jsx(Target,{className:"w-4 h-4 mx-auto"})})]})}),jsxRuntimeExports.jsx("tbody",{children:Ar.map((Fr,Kr)=>{const Zr=ar.map(dn=>getCantidadTag(Fr,dn)??0),Jr=ar.length===2?Zr[0]-Zr[1]:0,tn=Jr*Fr.valorUnitario,an=()=>{sr?(Nr(Fr),Fr.vinculosManual&&Fr.vinculosManual.length>0?(Ir(Fr.vinculosManual[0].pagina),jr(Fr.vinculosManual[0])):(Ir(void 0),jr(void 0)),Tr(!0)):ir&&ir(Fr)};return jsxRuntimeExports.jsxs("tr",{className:`border-b ${nr?"border-gray-700":"border-gray-100"} 
                          ${Kr%2===1?nr?"bg-gray-800/50":"bg-gray-50":""}
                          hover:bg-blue-50 dark:hover:bg-blue-900/10`,children:[(sr||ir)&&jsxRuntimeExports.jsx("td",{className:"p-1 text-center",children:jsxRuntimeExports.jsx("button",{onClick:an,className:`p-1 rounded ${Fr.vinculosManual&&Fr.vinculosManual.length>0?"hover:bg-blue-100 dark:hover:bg-blue-900/30 text-blue-500":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-400 dark:text-gray-500"}`,title:Fr.vinculosManual&&Fr.vinculosManual.length>0?"Ver en manual (tiene marcador)":"Ver en manual (sin marcador)",children:jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsx("td",{className:"p-2 font-mono text-xs",children:Fr.codigoSAP}),!yr&&jsxRuntimeExports.jsx("td",{className:"p-2 truncate max-w-[250px]",title:Fr.textoBreve,children:Fr.textoBreve}),jsxRuntimeExports.jsxs("td",{className:"p-2 text-right text-xs",children:["$",Fr.valorUnitario.toFixed(2)]}),ar.map(dn=>{const en=getCantidadTag(Fr,dn),rn=en===null||en===0,sn=Lr.solicitud.includes(dn);return jsxRuntimeExports.jsx("td",{className:`p-2 text-center font-medium
                                ${rn?"text-gray-300 dark:text-gray-600":""}
                                ${!rn&&sn?"text-blue-600":""}
                                ${!rn&&!sn?"text-green-600":""}
                              `,children:rn?jsxRuntimeExports.jsx(Minus,{className:"w-4 h-4 mx-auto opacity-30"}):en},dn)}),ar.length===2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("td",{className:`p-2 text-center font-bold
                              ${Jr>0?"text-green-600":Jr<0?"text-red-600":"text-gray-400"}
                            `,children:Jr>0?`+${Jr}`:Jr===0?"=":Jr}),!yr&&jsxRuntimeExports.jsx("td",{className:`p-2 text-center text-xs
                                ${tn>0?"text-green-600":tn<0?"text-red-600":"text-gray-400"}
                              `,children:tn!==0?`${tn>0?"+":""}$${tn.toFixed(0)}`:"-"})]}),wr&&Pr&&(()=>{const dn=Cr(Fr,wr,Pr),en={cubierto:{icon:CircleCheck,color:"text-green-500",bg:"bg-green-100 dark:bg-green-900/30"},parcial:{icon:CircleAlert,color:"text-amber-500",bg:"bg-amber-100 dark:bg-amber-900/30"},"sin-stock":{icon:CircleX,color:"text-red-500",bg:"bg-red-100 dark:bg-red-900/30"},"no-solicitado":{icon:Minus,color:"text-gray-400",bg:""},"sin-datos":{icon:Minus,color:"text-gray-300",bg:""}}[dn],rn=en.icon;return jsxRuntimeExports.jsx("td",{className:`p-2 text-center ${en.bg}`,children:jsxRuntimeExports.jsx(rn,{className:`w-5 h-5 mx-auto ${en.color}`})})})()]},Fr.id)})}),jsxRuntimeExports.jsx("tfoot",{className:`sticky bottom-0 ${nr?"bg-gray-800":"bg-white"} font-bold border-t-2`,children:jsxRuntimeExports.jsxs("tr",{children:[(sr||ir)&&jsxRuntimeExports.jsx("td",{}),jsxRuntimeExports.jsxs("td",{className:"p-2",colSpan:yr?2:3,children:["TOTALES (",Ar.length,")"]}),ar.map(Fr=>{var Kr;return jsxRuntimeExports.jsx("td",{className:"p-2 text-center",children:((Kr=Sr[Fr])==null?void 0:Kr.total)||0},Fr)}),ar.length===2&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("td",{className:`p-2 text-center ${((Mr==null?void 0:Mr.sumDiff)||0)>=0?"text-green-600":"text-red-600"}`,children:[((Mr==null?void 0:Mr.sumDiff)||0)>=0?"+":"",(Mr==null?void 0:Mr.sumDiff)||0]}),!yr&&jsxRuntimeExports.jsxs("td",{className:`p-2 text-center ${((Mr==null?void 0:Mr.sumDiffUSD)||0)>=0?"text-green-600":"text-red-600"}`,children:["$",((Mr==null?void 0:Mr.sumDiffUSD)||0).toLocaleString("es-CL",{minimumFractionDigits:0})]})]}),wr&&Pr&&qr&&jsxRuntimeExports.jsxs("td",{className:"p-2 text-center text-xs",children:[qr.tasaCobertura.toFixed(0),"%"]})]})})]}),Ar.length===0&&jsxRuntimeExports.jsx("div",{className:"text-center py-12 text-gray-500",children:lr||gr!=="todos"?"No hay repuestos que coincidan con los filtros":"No hay repuestos con los contextos seleccionados"})]}):jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-500",children:[jsxRuntimeExports.jsx(GitCompare,{className:"w-20 h-20 mx-auto mb-4 opacity-20"}),jsxRuntimeExports.jsx("p",{className:"text-xl mb-2",children:"Selecciona al menos 2 contextos"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Usa el panel izquierdo para elegir qu comparar"})]})})]}),sr&&jsxRuntimeExports.jsx("div",{className:`fixed top-0 right-0 h-full bg-gray-900 shadow-2xl transition-all duration-300 z-50 flex flex-col ${Er?"w-[600px]":"w-0"}`,style:{overflow:"hidden"},children:Er&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 border-b border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-white min-w-0",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-blue-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"font-medium truncate",children:(Rr==null?void 0:Rr.codigoSAP)||"Manual PDF"}),(Rr==null?void 0:Rr.vinculosManual)&&Rr.vinculosManual.length>0&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-green-600 px-2 py-0.5 rounded flex-shrink-0",children:"Con marcador"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Tr(!1),className:"p-2 rounded hover:bg-gray-700 text-gray-400 hover:text-white transition-colors",title:"Cerrar visor",children:jsxRuntimeExports.jsx(PanelRightClose,{className:"w-5 h-5"})})]}),Rr&&jsxRuntimeExports.jsx("div",{className:"px-4 py-2 bg-gray-850 border-b border-gray-700 text-xs text-gray-400",children:jsxRuntimeExports.jsx("p",{className:"truncate",title:Rr.textoBreve,children:Rr.textoBreve})}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-h-0",children:jsxRuntimeExports.jsx(PDFViewer$1,{pdfUrl:sr,targetPage:Dr,marker:Or})})]})}),Er&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/20 z-40",onClick:()=>Tr(!1)})]})]}):null};function ImportModal({isOpen:tr,onClose:er,onImport:rr}){const[nr,ir]=reactExports.useState(null),[sr,ar]=reactExports.useState([]),[cr,lr]=reactExports.useState(!1),[or,ur]=reactExports.useState(!1),[hr,dr]=reactExports.useState(null),fr=reactExports.useRef(null),gr=async xr=>{lr(!0),dr(null);try{const vr=await xr.arrayBuffer(),_r=new ExcelJS.Workbook;await _r.xlsx.load(vr);const Er=_r.worksheets[0];if(!Er)throw new Error("No se encontr ninguna hoja en el archivo");const Tr=[];Er.getRow(1).eachCell((Nr,Dr)=>{Tr[Dr]=String(Nr.value||"").trim()});const Rr=[];Er.eachRow((Nr,Dr)=>{if(Dr===1)return;const Ir={};Nr.eachCell((jr,Lr)=>{const Cr=Tr[Lr];Cr&&(Ir[Cr]=jr.value)});const Or={codigoSAP:String(Ir["Cdigo SAP"]||Ir["CODIGO SAP"]||Ir.Material||""),textoBreve:String(Ir["Texto Breve"]||Ir["TEXTO BREVE"]||Ir.Descripcin||Ir.Descripcion||""),codigoBaader:String(Ir["Cdigo Baader"]||Ir["CODIGO BAADER"]||Ir["Cdigo proveedor"]||Ir["N Parte"]||""),cantidadSolicitada:Number(Ir.Cantidad||Ir["Cant."]||Ir["Cantidad Solicitada"]||0),valorUnitario:Number(Ir["Valor Unitario"]||Ir.Precio||Ir["Valor Unit."]||Ir.USD||0),cantidadStockBodega:Number(Ir.Stock||Ir["Stock Bodega"]||0)};(Or.codigoSAP||Or.codigoBaader)&&Rr.push(Or)}),ar(Rr),ir(xr)}catch(vr){console.error("Error al parsear Excel:",vr),dr("Error al leer el archivo Excel. Verifica que el formato sea correcto.")}finally{lr(!1)}},br=xr=>{var _r;const vr=(_r=xr.target.files)==null?void 0:_r[0];vr&&gr(vr)},pr=xr=>{xr.preventDefault();const vr=xr.dataTransfer.files[0];vr&&(vr.name.endsWith(".xlsx")||vr.name.endsWith(".xls"))?gr(vr):dr("Por favor selecciona un archivo Excel (.xlsx o .xls)")},mr=async()=>{if(sr.length!==0){ur(!0);try{await rr(sr),er(),ir(null),ar([])}catch{dr("Error al importar los datos")}finally{ur(!1)}}},yr=()=>{ir(null),ar([]),dr(null),fr.current&&(fr.current.value="")};return jsxRuntimeExports.jsx(Modal,{isOpen:tr,onClose:er,title:"Importar Repuestos desde Excel",size:"xl",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[!nr&&jsxRuntimeExports.jsxs("div",{onDrop:pr,onDragOver:xr=>xr.preventDefault(),className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-primary-500 transition-colors cursor-pointer",onClick:()=>{var xr;return(xr=fr.current)==null?void 0:xr.click()},children:[jsxRuntimeExports.jsx("input",{ref:fr,type:"file",accept:".xlsx,.xls",onChange:br,className:"hidden"}),cr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-12 h-12 mx-auto text-primary-600 animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-2",children:"Arrastra tu archivo Excel aqu o haz clic para seleccionar"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Formatos aceptados: .xlsx, .xls"})]})]}),hr&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 flex-shrink-0"}),jsxRuntimeExports.jsx("p",{children:hr})]}),sr.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[sr.length," repuestos encontrados"]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:yr,children:"Cambiar archivo"})]}),jsxRuntimeExports.jsxs("div",{className:"max-h-64 overflow-auto border border-gray-200 rounded-lg",children:[jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"bg-gray-50 sticky top-0",children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"SAP"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Baader"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-left font-medium text-gray-600",children:"Descripcin"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600",children:"Cant."}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2 text-right font-medium text-gray-600",children:"USD"})]})}),jsxRuntimeExports.jsx("tbody",{children:sr.slice(0,20).map((xr,vr)=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-100",children:[jsxRuntimeExports.jsx("td",{className:"px-3 py-2 font-mono text-xs",children:xr.codigoSAP}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 font-mono text-xs text-primary-600",children:xr.codigoBaader}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 truncate max-w-[200px]",children:xr.textoBreve}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right",children:xr.cantidadSolicitada}),jsxRuntimeExports.jsxs("td",{className:"px-3 py-2 text-right",children:["$",xr.valorUnitario.toFixed(2)]})]},vr))})]}),sr.length>20&&jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 text-center text-sm text-gray-500 bg-gray-50 border-t",children:["... y ",sr.length-20," ms"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-800 mb-2",children:"Mapeo de columnas detectado:"}),jsxRuntimeExports.jsxs("ul",{className:"text-blue-700 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:' Cdigo SAP: "Cdigo SAP", "Material"'}),jsxRuntimeExports.jsx("li",{children:' Cdigo Baader: "Cdigo Baader", "Cdigo proveedor", "N Parte"'}),jsxRuntimeExports.jsx("li",{children:' Descripcin: "Texto Breve", "Descripcin"'}),jsxRuntimeExports.jsx("li",{children:' Cantidad: "Cantidad", "Cant."'}),jsxRuntimeExports.jsx("li",{children:' Valor: "Valor Unitario", "Precio", "USD"'})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:er,children:"Cancelar"}),jsxRuntimeExports.jsxs(Button,{onClick:mr,disabled:sr.length===0,loading:or,icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:["Importar ",sr.length," repuestos"]})]})]})})}function StatsPanel({repuestos:tr}){const[er,rr]=reactExports.useState(null),[nr,ir]=reactExports.useState("valorTotal"),[sr,ar]=reactExports.useState("desc"),[cr,lr]=reactExports.useState(10),or=reactExports.useMemo(()=>{var vr;if(!er)return null;for(const _r of tr){const Er=(vr=_r.tags)==null?void 0:vr.find(Tr=>isTagAsignado(Tr)&&Tr.nombre===er);if(Er&&isTagAsignado(Er))return Er.tipo}return null},[er,tr]),ur=vr=>{var Er;if(!er)return 0;const _r=(Er=vr.tags)==null?void 0:Er.find(Tr=>(isTagAsignado(Tr)?Tr.nombre:Tr)===er);return _r?isTagAsignado(_r)?_r.cantidad||0:(vr.cantidadSolicitada||0)+(vr.cantidadStockBodega||0):0},hr=reactExports.useMemo(()=>er?tr.filter(vr=>{var Er;const _r=(Er=vr.tags)==null?void 0:Er.find(Tr=>(isTagAsignado(Tr)?Tr.nombre:Tr)===er);return _r?isTagAsignado(_r)?(_r.cantidad||0)>0:!0:!1}):tr,[tr,er]),dr=reactExports.useMemo(()=>{const vr=er?hr.reduce((Ar,Sr)=>Ar+Sr.valorUnitario*ur(Sr),0):0,_r=er?hr.reduce((Ar,Sr)=>Ar+ur(Sr),0):0,Er=or==="solicitud"?vr:0,Tr=or==="stock"?vr:0,Rr=vr,Nr=or==="solicitud"?_r:0,Dr=or==="stock"?_r:0,Ir=hr.length>0?hr.reduce((Ar,Sr)=>Ar+(Sr.valorUnitario||0),0)/hr.length:0,Or=hr.length>0?Math.max(...hr.map(Ar=>Ar.valorUnitario||0)):0,jr=hr.filter(Ar=>Ar.valorUnitario>0).length>0?Math.min(...hr.filter(Ar=>Ar.valorUnitario>0).map(Ar=>Ar.valorUnitario)):0,Lr=er?hr.filter(Ar=>ur(Ar)>0).length:hr.filter(Ar=>Ar.cantidadStockBodega>0).length,Cr=er?hr.filter(Ar=>ur(Ar)===0).length:hr.filter(Ar=>Ar.cantidadStockBodega===0).length,wr=hr.filter(Ar=>{var Sr,Mr;return(((Sr=Ar.imagenesManual)==null?void 0:Sr.length)||0)>0||(((Mr=Ar.fotosReales)==null?void 0:Mr.length)||0)>0}).length,Pr=hr.filter(Ar=>{var Sr;return(((Sr=Ar.vinculosManual)==null?void 0:Sr.length)||0)>0}).length;return{totalSolicitadoUSD:Er,totalStockUSD:Tr,totalGeneralUSD:Rr,totalUnidades:Nr,totalStock:Dr,promedioValorUnitario:Ir,maxValorUnitario:Or,minValorUnitario:jr,conStock:Lr,sinStock:Cr,conImagenes:wr,conMarcador:Pr,total:hr.length}},[hr,er]),fr=reactExports.useMemo(()=>{const vr=new Map;return tr.forEach(_r=>{(_r.tags||[]).forEach(Er=>{const Tr=getTagNombre(Er),Rr=vr.get(Tr)||{count:0,totalValor:0,unidades:0,tipo:"mixto"};let Nr=0,Dr="mixto";if(isTagAsignado(Er)?(Dr=Er.tipo,Nr=Er.cantidad||0):Nr=(_r.cantidadSolicitada||0)+(_r.cantidadStockBodega||0),Nr===0)return;const Ir=Rr.count===0||Rr.tipo===Dr?Dr:"mixto";vr.set(Tr,{count:Rr.count+1,totalValor:Rr.totalValor+_r.valorUnitario*Nr,unidades:Rr.unidades+Nr,tipo:Ir})})}),Array.from(vr.entries()).map(([_r,Er])=>({tag:_r,...Er})).sort((_r,Er)=>Er.totalValor-_r.totalValor)},[tr]),gr=reactExports.useMemo(()=>[...hr].sort((_r,Er)=>{let Tr=0,Rr=0;switch(nr){case"valorTotal":er?(Tr=_r.valorUnitario*ur(_r),Rr=Er.valorUnitario*ur(Er)):(Tr=_r.valorUnitario*_r.cantidadSolicitada+_r.valorUnitario*(_r.cantidadStockBodega||0),Rr=Er.valorUnitario*Er.cantidadSolicitada+Er.valorUnitario*(Er.cantidadStockBodega||0));break;case"valorUnitario":Tr=_r.valorUnitario||0,Rr=Er.valorUnitario||0;break;case"cantidad":case"stock":Tr=er?ur(_r):_r.cantidadSolicitada||0,Rr=er?ur(Er):Er.cantidadSolicitada||0;break}return sr==="desc"?Rr-Tr:Tr-Rr}).slice(0,cr),[hr,nr,sr,cr,er]),br=reactExports.useMemo(()=>{const vr=new Set;return tr.forEach(_r=>{var Er;return(Er=_r.tags)==null?void 0:Er.forEach(Tr=>vr.add(getTagNombre(Tr)))}),[...TAGS_PREDEFINIDOS,...Array.from(vr).filter(_r=>!TAGS_PREDEFINIDOS.includes(_r))]},[tr]),pr=vr=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(vr),mr=vr=>new Intl.NumberFormat("es-CL").format(vr),yr=(vr,_r)=>_r>0?Math.max(5,vr/_r*100):0,xr=gr.length>0?Math.max(...gr.map(vr=>er?vr.valorUnitario*ur(vr):vr.valorUnitario*vr.cantidadSolicitada+vr.valorUnitario*(vr.cantidadStockBodega||0))):0;return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-gray-50 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"px-6 py-4 bg-white border-b border-gray-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:jsxRuntimeExports.jsx(ChartColumn,{className:"w-6 h-6 text-primary-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Estadsticas"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:er?jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Tag,{className:"w-3 h-3"})," Contexto: ",jsxRuntimeExports.jsx("span",{className:"font-medium text-primary-600",children:er})]}):jsxRuntimeExports.jsx("span",{className:"text-amber-600",children:" Selecciona un tag/evento para ver cantidades"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Filter,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsxs("select",{value:er||"",onChange:vr=>rr(vr.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleccionar contexto --"}),br.map(vr=>jsxRuntimeExports.jsx("option",{value:vr,children:vr},vr))]}),er&&jsxRuntimeExports.jsx("button",{onClick:()=>rr(null),className:"p-2 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto p-6 space-y-6",children:[!er&&jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start gap-3",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Sin contexto seleccionado"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-600 mt-1",children:'Selecciona un tag/evento en el filtro superior para ver las cantidades y valores asociados a ese evento especfico (ej: "Solicitud Dic 2025" o "Stock Bodega Dic 2025").'})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-xl p-5 shadow-sm border ${er?"border-blue-200":"border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${er?"bg-blue-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsx(ShoppingCart,{className:`w-5 h-5 ${er?"text-blue-600":"text-gray-400"}`})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Solicitado"})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold ${er?"text-blue-700":"text-gray-400"}`,children:er?pr(dr.totalSolicitadoUSD):"--"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"USD"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2 italic",children:er?` (Valor  Cant. en "${er}")`:"Selecciona un contexto"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-xl p-5 shadow-sm border ${er?"border-green-200":"border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${er?"bg-green-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsx(Package,{className:`w-5 h-5 ${er?"text-green-600":"text-gray-400"}`})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total Stock"})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold ${er?"text-green-700":"text-gray-400"}`,children:er?pr(dr.totalStockUSD):"--"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"USD"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2 italic",children:er?` (Valor  Stock en "${er}")`:"Selecciona un contexto"})]}),jsxRuntimeExports.jsxs("div",{className:`bg-white rounded-xl p-5 shadow-sm border ${er?"border-purple-200":"border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${er?"bg-purple-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsx(DollarSign,{className:`w-5 h-5 ${er?"text-purple-600":"text-gray-400"}`})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total General"})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold ${er?"text-purple-700":"text-gray-400"}`,children:er?pr(dr.totalGeneralUSD):"--"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Solicitado + Stock"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${er?"bg-amber-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsx(Package,{className:`w-5 h-5 ${er?"text-amber-600":"text-gray-400"}`})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Unidades"})]}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold ${er?"text-gray-900":"text-gray-400"}`,children:er?`${mr(dr.totalUnidades)} / ${mr(dr.totalStock)}`:"-- / --"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Solicitadas / Stock"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-teal-100 rounded-lg",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-teal-600"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Con Stock"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:dr.conStock}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["de ",dr.total," tems"]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-amber-600"})}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Promedio Unitario"})]}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pr(dr.promedioValorUnitario)}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Rango: ",pr(dr.minValorUnitario)," - ",pr(dr.maxValorUnitario)]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-100 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5 text-green-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:dr.conStock}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Con stock"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-100 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 text-red-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:dr.sinStock}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Sin stock"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-100 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(ChartPie,{className:"w-5 h-5 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:dr.conImagenes}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Con imgenes"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-100 flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-amber-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:dr.conMarcador}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Marcados en PDF"})]})]})]}),fr.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Tag,{className:"w-5 h-5 text-primary-600"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800",children:"Distribucin por Tags/Eventos"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:fr.map(({tag:vr,count:_r,totalValor:Er,unidades:Tr,tipo:Rr})=>{var Nr;return jsxRuntimeExports.jsxs("div",{className:"group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>rr(er===vr?null:vr),className:`text-sm font-medium hover:text-primary-600 transition-colors flex items-center gap-2 ${er===vr?"text-primary-600":"text-gray-700"}`,children:[vr,er===vr&&jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-3 h-3"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:[_r," tems"]}),jsxRuntimeExports.jsx("span",{className:`text-xs flex items-center gap-1 ${Rr==="solicitud"?"text-blue-600":Rr==="stock"?"text-green-600":"text-gray-600"}`,children:Rr==="solicitud"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-3 h-3"})," ",Tr," sol."]}):Rr==="stock"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Package,{className:"w-3 h-3"})," ",Tr," stk."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Tr," uds."]})}),jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-900",children:pr(Er)})]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full transition-all ${Rr==="solicitud"?"bg-blue-500":Rr==="stock"?"bg-green-500":"bg-gray-500"}`,style:{width:`${yr(Er,((Nr=fr[0])==null?void 0:Nr.totalValor)||1)}%`},title:`${Rr==="solicitud"?"Solicitado":Rr==="stock"?"Stock":"Total"}: ${pr(Er)}`})})]},vr)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mt-4 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"})," Solicitudes"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"})," Stock"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-primary-600"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800",children:"Top Repuestos"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsxs("select",{value:nr,onChange:vr=>ir(vr.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[jsxRuntimeExports.jsx("option",{value:"valorTotal",children:"Por Valor Total"}),jsxRuntimeExports.jsx("option",{value:"valorUnitario",children:"Por Valor Unitario"}),jsxRuntimeExports.jsx("option",{value:"cantidad",children:"Por Cantidad"}),jsxRuntimeExports.jsx("option",{value:"stock",children:"Por Stock"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ar(sr==="desc"?"asc":"desc"),className:`p-2 rounded-lg border border-gray-300 hover:bg-gray-50 ${sr==="desc"?"text-primary-600":"text-gray-400"}`,title:sr==="desc"?"Mayor a menor":"Menor a mayor",children:jsxRuntimeExports.jsx(ArrowUpDown,{className:"w-4 h-4"})}),jsxRuntimeExports.jsxs("select",{value:cr,onChange:vr=>lr(Number(vr.target.value)),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[jsxRuntimeExports.jsx("option",{value:5,children:"Top 5"}),jsxRuntimeExports.jsx("option",{value:10,children:"Top 10"}),jsxRuntimeExports.jsx("option",{value:20,children:"Top 20"}),jsxRuntimeExports.jsx("option",{value:50,children:"Top 50"}),jsxRuntimeExports.jsx("option",{value:9999,children:"Todos"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:gr.map((vr,_r)=>{const Er=er?ur(vr):0,Tr=er?vr.valorUnitario*Er:vr.valorUnitario*vr.cantidadSolicitada+vr.valorUnitario*(vr.cantidadStockBodega||0),Rr=nr==="valorTotal"?Tr:nr==="valorUnitario"?vr.valorUnitario:Er;return jsxRuntimeExports.jsxs("div",{className:"group",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[jsxRuntimeExports.jsx("span",{className:`
                      w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold
                      ${_r<3?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-500"}
                    `,children:_r+1}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-xs bg-gray-100 px-2 py-0.5 rounded text-gray-600",children:vr.codigoSAP}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-800 truncate",children:vr.descripcion||vr.textoBreve})]})}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:`text-sm font-bold ${er||nr==="valorUnitario"?"text-gray-900":"text-gray-400"}`,children:er||nr==="valorUnitario"?nr==="cantidad"||nr==="stock"?mr(Rr||0):pr(Rr||0):"--"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:er?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Er," ",or==="solicitud"?"sol.":"stk."," + $",pr(Tr)]}):nr==="valorUnitario"?`Unit: ${pr(vr.valorUnitario)}`:"Selecciona contexto"})]})]}),jsxRuntimeExports.jsx("div",{className:"ml-9 h-1.5 bg-gray-100 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full rounded-full transition-all ${_r===0?"bg-primary-600":_r===1?"bg-primary-500":_r===2?"bg-primary-400":"bg-primary-300"}`,style:{width:`${yr(Rr||0,xr)}%`}})})]},vr.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 rounded-xl p-6 text-white",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[" Resumen ",er?`- ${er}`:"Rpido"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-primary-200",children:er?"Total del evento":"Inversin total"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:er?pr(dr.totalGeneralUSD):"--"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-primary-200",children:"Repuesto ms costoso (unit.)"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:pr(dr.maxValorUnitario)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-primary-200",children:er?"Items en este evento":"Total items"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:dr.total})]})]})]})]})]})}function r(tr){var er,rr,nr="";if(typeof tr=="string"||typeof tr=="number")nr+=tr;else if(typeof tr=="object")if(Array.isArray(tr)){var ir=tr.length;for(er=0;er<ir;er++)tr[er]&&(rr=r(tr[er]))&&(nr&&(nr+=" "),nr+=rr)}else for(rr in tr)tr[rr]&&(nr&&(nr+=" "),nr+=rr);return nr}function clsx(){for(var tr,er,rr=0,nr="",ir=arguments.length;rr<ir;rr++)(tr=arguments[rr])&&(er=r(tr))&&(nr&&(nr+=" "),nr+=er);return nr}var isArray$e=Array.isArray,isArray_1=isArray$e,freeGlobal$1=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(tr){var er=hasOwnProperty$a.call(tr,symToStringTag$1),rr=tr[symToStringTag$1];try{tr[symToStringTag$1]=void 0;var nr=!0}catch{}var ir=nativeObjectToString$1.call(tr);return nr&&(er?tr[symToStringTag$1]=rr:delete tr[symToStringTag$1]),ir}var _getRawTag=getRawTag$1,objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString$1(tr){return nativeObjectToString.call(tr)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$9(tr){return tr==null?tr===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(tr)?getRawTag(tr):objectToString(tr)}var _baseGetTag=baseGetTag$9;function isObjectLike$9(tr){return tr!=null&&typeof tr=="object"}var isObjectLike_1=isObjectLike$9,baseGetTag$8=_baseGetTag,isObjectLike$8=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$6(tr){return typeof tr=="symbol"||isObjectLike$8(tr)&&baseGetTag$8(tr)==symbolTag$1}var isSymbol_1=isSymbol$6,isArray$d=isArray_1,isSymbol$5=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$3(tr,er){if(isArray$d(tr))return!1;var rr=typeof tr;return rr=="number"||rr=="symbol"||rr=="boolean"||tr==null||isSymbol$5(tr)?!0:reIsPlainProp.test(tr)||!reIsDeepProp.test(tr)||er!=null&&tr in Object(er)}var _isKey=isKey$3;function isObject$7(tr){var er=typeof tr;return tr!=null&&(er=="object"||er=="function")}var isObject_1=isObject$7;const isObject$8=getDefaultExportFromCjs(isObject_1);var baseGetTag$7=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(tr){if(!isObject$6(tr))return!1;var er=baseGetTag$7(tr);return er==funcTag$1||er==genTag||er==asyncTag||er==proxyTag}var isFunction_1=isFunction$2;const isFunction$3=getDefaultExportFromCjs(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var tr=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return tr?"Symbol(src)_1."+tr:""}();function isMasked$1(tr){return!!maskSrcKey&&maskSrcKey in tr}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(tr){if(tr!=null){try{return funcToString$2.call(tr)}catch{}try{return tr+""}catch{}}return""}var _toSource=toSource$2,isFunction$1=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(tr){if(!isObject$5(tr)||isMasked(tr))return!1;var er=isFunction$1(tr)?reIsNative:reIsHostCtor;return er.test(toSource$1(tr))}var _baseIsNative=baseIsNative$1;function getValue$1(tr,er){return tr==null?void 0:tr[er]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(tr,er){var rr=getValue(tr,er);return baseIsNative(rr)?rr:void 0}var _getNative=getNative$7,getNative$6=_getNative,nativeCreate$4=getNative$6(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(tr){var er=this.has(tr)&&delete this.__data__[tr];return this.size-=er?1:0,er}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet$1(tr){var er=this.__data__;if(nativeCreate$2){var rr=er[tr];return rr===HASH_UNDEFINED$2?void 0:rr}return hasOwnProperty$8.call(er,tr)?er[tr]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas$1(tr){var er=this.__data__;return nativeCreate$1?er[tr]!==void 0:hasOwnProperty$7.call(er,tr)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(tr,er){var rr=this.__data__;return this.size+=this.has(tr)?0:1,rr[tr]=nativeCreate&&er===void 0?HASH_UNDEFINED$1:er,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(tr){var er=-1,rr=tr==null?0:tr.length;for(this.clear();++er<rr;){var nr=tr[er];this.set(nr[0],nr[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(tr,er){return tr===er||tr!==tr&&er!==er}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(tr,er){for(var rr=tr.length;rr--;)if(eq$2(tr[rr][0],er))return rr;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(tr){var er=this.__data__,rr=assocIndexOf$3(er,tr);if(rr<0)return!1;var nr=er.length-1;return rr==nr?er.pop():splice.call(er,rr,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(tr){var er=this.__data__,rr=assocIndexOf$2(er,tr);return rr<0?void 0:er[rr][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(tr){return assocIndexOf$1(this.__data__,tr)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(tr,er){var rr=this.__data__,nr=assocIndexOf(rr,tr);return nr<0?(++this.size,rr.push([tr,er])):rr[nr][1]=er,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(tr){var er=-1,rr=tr==null?0:tr.length;for(this.clear();++er<rr;){var nr=tr[er];this.set(nr[0],nr[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$5=_getNative,root$6=_root,Map$4=getNative$5(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(tr){var er=typeof tr;return er=="string"||er=="number"||er=="symbol"||er=="boolean"?tr!=="__proto__":tr===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(tr,er){var rr=tr.__data__;return isKeyable(er)?rr[typeof er=="string"?"string":"hash"]:rr.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(tr){var er=getMapData$3(this,tr).delete(tr);return this.size-=er?1:0,er}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(tr){return getMapData$2(this,tr).get(tr)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(tr){return getMapData$1(this,tr).has(tr)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(tr,er){var rr=getMapData(this,tr),nr=rr.size;return rr.set(tr,er),this.size+=rr.size==nr?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(tr){var er=-1,rr=tr==null?0:tr.length;for(this.clear();++er<rr;){var nr=tr[er];this.set(nr[0],nr[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$2="Expected a function";function memoize$2(tr,er){if(typeof tr!="function"||er!=null&&typeof er!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var rr=function(){var nr=arguments,ir=er?er.apply(this,nr):nr[0],sr=rr.cache;if(sr.has(ir))return sr.get(ir);var ar=tr.apply(this,nr);return rr.cache=sr.set(ir,ar)||sr,ar};return rr.cache=new(memoize$2.Cache||MapCache$2),rr}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2;const memoize$3=getDefaultExportFromCjs(memoize_1);var memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(tr){var er=memoize$1(tr,function(nr){return rr.size===MAX_MEMOIZE_SIZE&&rr.clear(),nr}),rr=er.cache;return er}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(tr){var er=[];return tr.charCodeAt(0)===46&&er.push(""),tr.replace(rePropName,function(rr,nr,ir,sr){er.push(ir?sr.replace(reEscapeChar,"$1"):nr||rr)}),er}),_stringToPath=stringToPath$1;function arrayMap$3(tr,er){for(var rr=-1,nr=tr==null?0:tr.length,ir=Array(nr);++rr<nr;)ir[rr]=er(tr[rr],rr,tr);return ir}var _arrayMap=arrayMap$3,Symbol$4=_Symbol,arrayMap$2=_arrayMap,isArray$c=isArray_1,isSymbol$4=isSymbol_1,symbolProto$1=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(tr){if(typeof tr=="string")return tr;if(isArray$c(tr))return arrayMap$2(tr,baseToString$1)+"";if(isSymbol$4(tr))return symbolToString?symbolToString.call(tr):"";var er=tr+"";return er=="0"&&1/tr==-1/0?"-0":er}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$4(tr){return tr==null?"":baseToString(tr)}var toString_1=toString$4,isArray$b=isArray_1,isKey$2=_isKey,stringToPath=_stringToPath,toString$3=toString_1;function castPath$2(tr,er){return isArray$b(tr)?tr:isKey$2(tr,er)?[tr]:stringToPath(toString$3(tr))}var _castPath=castPath$2,isSymbol$3=isSymbol_1;function toKey$4(tr){if(typeof tr=="string"||isSymbol$3(tr))return tr;var er=tr+"";return er=="0"&&1/tr==-1/0?"-0":er}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$3(tr,er){er=castPath$1(er,tr);for(var rr=0,nr=er.length;tr!=null&&rr<nr;)tr=tr[toKey$3(er[rr++])];return rr&&rr==nr?tr:void 0}var _baseGet=baseGet$3,baseGet$2=_baseGet;function get$1(tr,er,rr){var nr=tr==null?void 0:baseGet$2(tr,er);return nr===void 0?rr:nr}var get_1=get$1;const get$2=getDefaultExportFromCjs(get_1);function isNil(tr){return tr==null}var isNil_1=isNil;const isNil$1=getDefaultExportFromCjs(isNil_1);var baseGetTag$6=_baseGetTag,isArray$a=isArray_1,isObjectLike$7=isObjectLike_1,stringTag$2="[object String]";function isString(tr){return typeof tr=="string"||!isArray$a(tr)&&isObjectLike$7(tr)&&baseGetTag$6(tr)==stringTag$2}var isString_1=isString;const isString$1=getDefaultExportFromCjs(isString_1);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=Symbol.for("react.element"),c$2=Symbol.for("react.portal"),d$1=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$1=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$1=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u$1;u$1=Symbol.for("react.module.reference");function v$1(tr){if(typeof tr=="object"&&tr!==null){var er=tr.$$typeof;switch(er){case b$1:switch(tr=tr.type,tr){case d$1:case f$1:case e:case m$1:case n$1:return tr;default:switch(tr=tr&&tr.$$typeof,tr){case k$2:case h$1:case l$1:case q$1:case p$1:case g$1:return tr;default:return er}}case c$2:return er}}}reactIs_production_min.ContextConsumer=h$1;reactIs_production_min.ContextProvider=g$1;reactIs_production_min.Element=b$1;reactIs_production_min.ForwardRef=l$1;reactIs_production_min.Fragment=d$1;reactIs_production_min.Lazy=q$1;reactIs_production_min.Memo=p$1;reactIs_production_min.Portal=c$2;reactIs_production_min.Profiler=f$1;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m$1;reactIs_production_min.SuspenseList=n$1;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(tr){return v$1(tr)===h$1};reactIs_production_min.isContextProvider=function(tr){return v$1(tr)===g$1};reactIs_production_min.isElement=function(tr){return typeof tr=="object"&&tr!==null&&tr.$$typeof===b$1};reactIs_production_min.isForwardRef=function(tr){return v$1(tr)===l$1};reactIs_production_min.isFragment=function(tr){return v$1(tr)===d$1};reactIs_production_min.isLazy=function(tr){return v$1(tr)===q$1};reactIs_production_min.isMemo=function(tr){return v$1(tr)===p$1};reactIs_production_min.isPortal=function(tr){return v$1(tr)===c$2};reactIs_production_min.isProfiler=function(tr){return v$1(tr)===f$1};reactIs_production_min.isStrictMode=function(tr){return v$1(tr)===e};reactIs_production_min.isSuspense=function(tr){return v$1(tr)===m$1};reactIs_production_min.isSuspenseList=function(tr){return v$1(tr)===n$1};reactIs_production_min.isValidElementType=function(tr){return typeof tr=="string"||typeof tr=="function"||tr===d$1||tr===f$1||tr===e||tr===m$1||tr===n$1||tr===t||typeof tr=="object"&&tr!==null&&(tr.$$typeof===q$1||tr.$$typeof===p$1||tr.$$typeof===g$1||tr.$$typeof===h$1||tr.$$typeof===l$1||tr.$$typeof===u$1||tr.getModuleId!==void 0)};reactIs_production_min.typeOf=v$1;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,numberTag$2="[object Number]";function isNumber$2(tr){return typeof tr=="number"||isObjectLike$6(tr)&&baseGetTag$5(tr)==numberTag$2}var isNumber_1=isNumber$2;const isNumber$3=getDefaultExportFromCjs(isNumber_1);var isNumber$1=isNumber_1;function isNaN$1(tr){return isNumber$1(tr)&&tr!=+tr}var _isNaN=isNaN$1;const isNan=getDefaultExportFromCjs(_isNaN);var mathSign=function tr(er){return er===0?0:er>0?1:-1},isPercent=function tr(er){return isString$1(er)&&er.indexOf("%")===er.length-1},isNumber=function tr(er){return isNumber$3(er)&&!isNan(er)},isNullish=function tr(er){return isNil$1(er)},isNumOrStr=function tr(er){return isNumber(er)||isString$1(er)},idCounter=0,uniqueId=function tr(er){var rr=++idCounter;return"".concat(er||"").concat(rr)},getPercentValue=function tr(er,rr){var nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,ir=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber(er)&&!isString$1(er))return nr;var sr;if(isPercent(er)){var ar=er.indexOf("%");sr=rr*parseFloat(er.slice(0,ar))/100}else sr=+er;return isNan(sr)&&(sr=nr),ir&&sr>rr&&(sr=rr),sr},getAnyElementOfObject=function tr(er){if(!er)return null;var rr=Object.keys(er);return rr&&rr.length?er[rr[0]]:null},hasDuplicate=function tr(er){if(!Array.isArray(er))return!1;for(var rr=er.length,nr={},ir=0;ir<rr;ir++)if(!nr[er[ir]])nr[er[ir]]=!0;else return!0;return!1},interpolateNumber$2=function tr(er,rr){return isNumber(er)&&isNumber(rr)?function(nr){return er+nr*(rr-er)}:function(){return rr}};function findEntryInArray(tr,er,rr){return!tr||!tr.length?null:tr.find(function(nr){return nr&&(typeof er=="function"?er(nr):get$2(nr,er))===rr})}var getLinearRegression=function tr(er){if(!er||!er.length)return null;for(var rr=er.length,nr=0,ir=0,sr=0,ar=0,cr=1/0,lr=-1/0,or=0,ur=0,hr=0;hr<rr;hr++)or=er[hr].cx||0,ur=er[hr].cy||0,nr+=or,ir+=ur,sr+=or*ur,ar+=or*or,cr=Math.min(cr,or),lr=Math.max(lr,or);var dr=rr*ar!==nr*nr?(rr*sr-nr*ir)/(rr*ar-nr*nr):0;return{xmin:cr,xmax:lr,a:dr,b:(ir-dr*nr)/rr}},compareValues=function tr(er,rr){return isNumber(er)&&isNumber(rr)?er-rr:isString$1(er)&&isString$1(rr)?er.localeCompare(rr):er instanceof Date&&rr instanceof Date?er.getTime()-rr.getTime():String(er).localeCompare(String(rr))};function shallowEqual(tr,er){for(var rr in tr)if({}.hasOwnProperty.call(tr,rr)&&(!{}.hasOwnProperty.call(er,rr)||tr[rr]!==er[rr]))return!1;for(var nr in er)if({}.hasOwnProperty.call(er,nr)&&!{}.hasOwnProperty.call(tr,nr))return!1;return!0}function _typeof$P(tr){"@babel/helpers - typeof";return _typeof$P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$P(tr)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function tr(er,rr){if(!er||typeof er=="function"||typeof er=="boolean")return null;var nr=er;if(reactExports.isValidElement(er)&&(nr=er.props),!isObject$8(nr))return null;var ir={};return Object.keys(nr).forEach(function(sr){EventKeys.includes(sr)&&(ir[sr]=rr||function(ar){return nr[sr](nr,ar)})}),ir},getEventHandlerOfChild=function tr(er,rr,nr){return function(ir){return er(rr,nr,ir),null}},adaptEventsOfChild=function tr(er,rr,nr){if(!isObject$8(er)||_typeof$P(er)!=="object")return null;var ir=null;return Object.keys(er).forEach(function(sr){var ar=er[sr];EventKeys.includes(sr)&&typeof ar=="function"&&(ir||(ir={}),ir[sr]=getEventHandlerOfChild(ar,rr,nr))}),ir},_excluded$l=["children"],_excluded2$8=["children"];function _objectWithoutProperties$l(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$l(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$l(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _typeof$O(tr){"@babel/helpers - typeof";return _typeof$O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$O(tr)}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},getDisplayName=function tr(er){return typeof er=="string"?er:er?er.displayName||er.name||"Component":""},lastChildren=null,lastResult=null,toArray=function tr(er){if(er===lastChildren&&Array.isArray(lastResult))return lastResult;var rr=[];return reactExports.Children.forEach(er,function(nr){isNil$1(nr)||(reactIsExports.isFragment(nr)?rr=rr.concat(tr(nr.props.children)):rr.push(nr))}),lastResult=rr,lastChildren=er,rr};function findAllByType(tr,er){var rr=[],nr=[];return Array.isArray(er)?nr=er.map(function(ir){return getDisplayName(ir)}):nr=[getDisplayName(er)],toArray(tr).forEach(function(ir){var sr=get$2(ir,"type.displayName")||get$2(ir,"type.name");nr.indexOf(sr)!==-1&&rr.push(ir)}),rr}function findChildByType(tr,er){var rr=findAllByType(tr,er);return rr&&rr[0]}var validateWidthHeight=function tr(er){if(!er||!er.props)return!1;var rr=er.props,nr=rr.width,ir=rr.height;return!(!isNumber(nr)||nr<=0||!isNumber(ir)||ir<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function tr(er){return er&&er.type&&isString$1(er.type)&&SVG_TAGS.indexOf(er.type)>=0},hasClipDot=function tr(er){return er&&_typeof$O(er)==="object"&&"clipDot"in er},isValidSpreadableProp=function tr(er,rr,nr,ir){var sr,ar=(sr=FilteredElementKeyMap==null?void 0:FilteredElementKeyMap[ir])!==null&&sr!==void 0?sr:[];return rr.startsWith("data-")||!isFunction$3(er)&&(ir&&ar.includes(rr)||SVGElementPropKeys.includes(rr))||nr&&EventKeys.includes(rr)},filterProps=function tr(er,rr,nr){if(!er||typeof er=="function"||typeof er=="boolean")return null;var ir=er;if(reactExports.isValidElement(er)&&(ir=er.props),!isObject$8(ir))return null;var sr={};return Object.keys(ir).forEach(function(ar){var cr;isValidSpreadableProp((cr=ir)===null||cr===void 0?void 0:cr[ar],ar,rr,nr)&&(sr[ar]=ir[ar])}),sr},isChildrenEqual=function tr(er,rr){if(er===rr)return!0;var nr=reactExports.Children.count(er);if(nr!==reactExports.Children.count(rr))return!1;if(nr===0)return!0;if(nr===1)return isSingleChildEqual(Array.isArray(er)?er[0]:er,Array.isArray(rr)?rr[0]:rr);for(var ir=0;ir<nr;ir++){var sr=er[ir],ar=rr[ir];if(Array.isArray(sr)||Array.isArray(ar)){if(!tr(sr,ar))return!1}else if(!isSingleChildEqual(sr,ar))return!1}return!0},isSingleChildEqual=function tr(er,rr){if(isNil$1(er)&&isNil$1(rr))return!0;if(!isNil$1(er)&&!isNil$1(rr)){var nr=er.props||{},ir=nr.children,sr=_objectWithoutProperties$l(nr,_excluded$l),ar=rr.props||{},cr=ar.children,lr=_objectWithoutProperties$l(ar,_excluded2$8);return ir&&cr?shallowEqual(sr,lr)&&isChildrenEqual(ir,cr):!ir&&!cr?shallowEqual(sr,lr):!1}return!1},renderByOrder=function tr(er,rr){var nr=[],ir={};return toArray(er).forEach(function(sr,ar){if(isSvgElement(sr))nr.push(sr);else if(sr){var cr=getDisplayName(sr.type),lr=rr[cr]||{},or=lr.handler,ur=lr.once;if(or&&(!ur||!ir[cr])){var hr=or(sr,cr,ar);nr.push(hr),ir[cr]=!0}}}),nr},getReactEventByType=function tr(er){var rr=er&&er.type;return rr&&REACT_BROWSER_EVENT_MAP[rr]?REACT_BROWSER_EVENT_MAP[rr]:null},parseChildIndex=function tr(er,rr){return toArray(rr).indexOf(er)},_excluded$k=["children","width","height","viewBox","className","style","title","desc"];function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$x.apply(this,arguments)}function _objectWithoutProperties$k(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$k(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$k(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function Surface(tr){var er=tr.children,rr=tr.width,nr=tr.height,ir=tr.viewBox,sr=tr.className,ar=tr.style,cr=tr.title,lr=tr.desc,or=_objectWithoutProperties$k(tr,_excluded$k),ur=ir||{width:rr,height:nr,x:0,y:0},hr=clsx("recharts-surface",sr);return React.createElement("svg",_extends$x({},filterProps(or,!0,"svg"),{className:hr,width:rr,height:nr,style:ar,viewBox:"".concat(ur.x," ").concat(ur.y," ").concat(ur.width," ").concat(ur.height)}),React.createElement("title",null,cr),React.createElement("desc",null,lr),er)}var _excluded$j=["children","className"];function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$w.apply(this,arguments)}function _objectWithoutProperties$j(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$j(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$j(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}var Layer=React.forwardRef(function(tr,er){var rr=tr.children,nr=tr.className,ir=_objectWithoutProperties$j(tr,_excluded$j),sr=clsx("recharts-layer",nr);return React.createElement("g",_extends$w({className:sr},filterProps(ir,!0),{ref:er}),rr)}),warn=function tr(er,rr){for(var nr=arguments.length,ir=new Array(nr>2?nr-2:0),sr=2;sr<nr;sr++)ir[sr-2]=arguments[sr]};function baseSlice$1(tr,er,rr){var nr=-1,ir=tr.length;er<0&&(er=-er>ir?0:ir+er),rr=rr>ir?ir:rr,rr<0&&(rr+=ir),ir=er>rr?0:rr-er>>>0,er>>>=0;for(var sr=Array(ir);++nr<ir;)sr[nr]=tr[nr+er];return sr}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$1(tr,er,rr){var nr=tr.length;return rr=rr===void 0?nr:rr,!er&&rr>=nr?tr:baseSlice(tr,er,rr)}var _castSlice=castSlice$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode$2(tr){return reHasUnicode.test(tr)}var _hasUnicode=hasUnicode$2;function asciiToArray$1(tr){return tr.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(tr){return tr.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(tr){return hasUnicode$1(tr)?unicodeToArray(tr):asciiToArray(tr)}var _stringToArray=stringToArray$1,castSlice=_castSlice,hasUnicode=_hasUnicode,stringToArray=_stringToArray,toString$2=toString_1;function createCaseFirst$1(tr){return function(er){er=toString$2(er);var rr=hasUnicode(er)?stringToArray(er):void 0,nr=rr?rr[0]:er.charAt(0),ir=rr?castSlice(rr,1).join(""):er.slice(1);return nr[tr]()+ir}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst;const upperFirst$1=getDefaultExportFromCjs(upperFirst_1);function constant$3(tr){return function(){return tr}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(tr){this._+=tr[0];for(let er=1,rr=tr.length;er<rr;++er)this._+=arguments[er]+tr[er]}function appendRound(tr){let er=Math.floor(tr);if(!(er>=0))throw new Error(`invalid digits: ${tr}`);if(er>15)return append;const rr=10**er;return function(nr){this._+=nr[0];for(let ir=1,sr=nr.length;ir<sr;++ir)this._+=Math.round(arguments[ir]*rr)/rr+nr[ir]}}class Path{constructor(er){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=er==null?append:appendRound(er)}moveTo(er,rr){this._append`M${this._x0=this._x1=+er},${this._y0=this._y1=+rr}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(er,rr){this._append`L${this._x1=+er},${this._y1=+rr}`}quadraticCurveTo(er,rr,nr,ir){this._append`Q${+er},${+rr},${this._x1=+nr},${this._y1=+ir}`}bezierCurveTo(er,rr,nr,ir,sr,ar){this._append`C${+er},${+rr},${+nr},${+ir},${this._x1=+sr},${this._y1=+ar}`}arcTo(er,rr,nr,ir,sr){if(er=+er,rr=+rr,nr=+nr,ir=+ir,sr=+sr,sr<0)throw new Error(`negative radius: ${sr}`);let ar=this._x1,cr=this._y1,lr=nr-er,or=ir-rr,ur=ar-er,hr=cr-rr,dr=ur*ur+hr*hr;if(this._x1===null)this._append`M${this._x1=er},${this._y1=rr}`;else if(dr>epsilon)if(!(Math.abs(hr*lr-or*ur)>epsilon)||!sr)this._append`L${this._x1=er},${this._y1=rr}`;else{let fr=nr-ar,gr=ir-cr,br=lr*lr+or*or,pr=fr*fr+gr*gr,mr=Math.sqrt(br),yr=Math.sqrt(dr),xr=sr*Math.tan((pi-Math.acos((br+dr-pr)/(2*mr*yr)))/2),vr=xr/yr,_r=xr/mr;Math.abs(vr-1)>epsilon&&this._append`L${er+vr*ur},${rr+vr*hr}`,this._append`A${sr},${sr},0,0,${+(hr*fr>ur*gr)},${this._x1=er+_r*lr},${this._y1=rr+_r*or}`}}arc(er,rr,nr,ir,sr,ar){if(er=+er,rr=+rr,nr=+nr,ar=!!ar,nr<0)throw new Error(`negative radius: ${nr}`);let cr=nr*Math.cos(ir),lr=nr*Math.sin(ir),or=er+cr,ur=rr+lr,hr=1^ar,dr=ar?ir-sr:sr-ir;this._x1===null?this._append`M${or},${ur}`:(Math.abs(this._x1-or)>epsilon||Math.abs(this._y1-ur)>epsilon)&&this._append`L${or},${ur}`,nr&&(dr<0&&(dr=dr%tau+tau),dr>tauEpsilon?this._append`A${nr},${nr},0,1,${hr},${er-cr},${rr-lr}A${nr},${nr},0,1,${hr},${this._x1=or},${this._y1=ur}`:dr>epsilon&&this._append`A${nr},${nr},0,${+(dr>=pi)},${hr},${this._x1=er+nr*Math.cos(sr)},${this._y1=rr+nr*Math.sin(sr)}`)}rect(er,rr,nr,ir){this._append`M${this._x0=this._x1=+er},${this._y0=this._y1=+rr}h${nr=+nr}v${+ir}h${-nr}Z`}toString(){return this._}}function withPath(tr){let er=3;return tr.digits=function(rr){if(!arguments.length)return er;if(rr==null)er=null;else{const nr=Math.floor(rr);if(!(nr>=0))throw new RangeError(`invalid digits: ${rr}`);er=nr}return tr},()=>new Path(er)}function array(tr){return typeof tr=="object"&&"length"in tr?tr:Array.from(tr)}function Linear(tr){this._context=tr}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(tr,er){switch(tr=+tr,er=+er,this._point){case 0:this._point=1,this._line?this._context.lineTo(tr,er):this._context.moveTo(tr,er);break;case 1:this._point=2;default:this._context.lineTo(tr,er);break}}};function curveLinear(tr){return new Linear(tr)}function x$2(tr){return tr[0]}function y$1(tr){return tr[1]}function shapeLine(tr,er){var rr=constant$3(!0),nr=null,ir=curveLinear,sr=null,ar=withPath(cr);tr=typeof tr=="function"?tr:tr===void 0?x$2:constant$3(tr),er=typeof er=="function"?er:er===void 0?y$1:constant$3(er);function cr(lr){var or,ur=(lr=array(lr)).length,hr,dr=!1,fr;for(nr==null&&(sr=ir(fr=ar())),or=0;or<=ur;++or)!(or<ur&&rr(hr=lr[or],or,lr))===dr&&((dr=!dr)?sr.lineStart():sr.lineEnd()),dr&&sr.point(+tr(hr,or,lr),+er(hr,or,lr));if(fr)return sr=null,fr+""||null}return cr.x=function(lr){return arguments.length?(tr=typeof lr=="function"?lr:constant$3(+lr),cr):tr},cr.y=function(lr){return arguments.length?(er=typeof lr=="function"?lr:constant$3(+lr),cr):er},cr.defined=function(lr){return arguments.length?(rr=typeof lr=="function"?lr:constant$3(!!lr),cr):rr},cr.curve=function(lr){return arguments.length?(ir=lr,nr!=null&&(sr=ir(nr)),cr):ir},cr.context=function(lr){return arguments.length?(lr==null?nr=sr=null:sr=ir(nr=lr),cr):nr},cr}function shapeArea(tr,er,rr){var nr=null,ir=constant$3(!0),sr=null,ar=curveLinear,cr=null,lr=withPath(or);tr=typeof tr=="function"?tr:tr===void 0?x$2:constant$3(+tr),er=typeof er=="function"?er:constant$3(er===void 0?0:+er),rr=typeof rr=="function"?rr:rr===void 0?y$1:constant$3(+rr);function or(hr){var dr,fr,gr,br=(hr=array(hr)).length,pr,mr=!1,yr,xr=new Array(br),vr=new Array(br);for(sr==null&&(cr=ar(yr=lr())),dr=0;dr<=br;++dr){if(!(dr<br&&ir(pr=hr[dr],dr,hr))===mr)if(mr=!mr)fr=dr,cr.areaStart(),cr.lineStart();else{for(cr.lineEnd(),cr.lineStart(),gr=dr-1;gr>=fr;--gr)cr.point(xr[gr],vr[gr]);cr.lineEnd(),cr.areaEnd()}mr&&(xr[dr]=+tr(pr,dr,hr),vr[dr]=+er(pr,dr,hr),cr.point(nr?+nr(pr,dr,hr):xr[dr],rr?+rr(pr,dr,hr):vr[dr]))}if(yr)return cr=null,yr+""||null}function ur(){return shapeLine().defined(ir).curve(ar).context(sr)}return or.x=function(hr){return arguments.length?(tr=typeof hr=="function"?hr:constant$3(+hr),nr=null,or):tr},or.x0=function(hr){return arguments.length?(tr=typeof hr=="function"?hr:constant$3(+hr),or):tr},or.x1=function(hr){return arguments.length?(nr=hr==null?null:typeof hr=="function"?hr:constant$3(+hr),or):nr},or.y=function(hr){return arguments.length?(er=typeof hr=="function"?hr:constant$3(+hr),rr=null,or):er},or.y0=function(hr){return arguments.length?(er=typeof hr=="function"?hr:constant$3(+hr),or):er},or.y1=function(hr){return arguments.length?(rr=hr==null?null:typeof hr=="function"?hr:constant$3(+hr),or):rr},or.lineX0=or.lineY0=function(){return ur().x(tr).y(er)},or.lineY1=function(){return ur().x(tr).y(rr)},or.lineX1=function(){return ur().x(nr).y(er)},or.defined=function(hr){return arguments.length?(ir=typeof hr=="function"?hr:constant$3(!!hr),or):ir},or.curve=function(hr){return arguments.length?(ar=hr,sr!=null&&(cr=ar(sr)),or):ar},or.context=function(hr){return arguments.length?(hr==null?sr=cr=null:cr=ar(sr=hr),or):sr},or}class Bump{constructor(er,rr){this._context=er,this._x=rr}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(er,rr){switch(er=+er,rr=+rr,this._point){case 0:{this._point=1,this._line?this._context.lineTo(er,rr):this._context.moveTo(er,rr);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+er)/2,this._y0,this._x0,rr,er,rr):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+rr)/2,er,this._y0,er,rr);break}}this._x0=er,this._y0=rr}}function bumpX(tr){return new Bump(tr,!0)}function bumpY(tr){return new Bump(tr,!1)}const symbolCircle={draw(tr,er){const rr=sqrt$1(er/pi$1);tr.moveTo(rr,0),tr.arc(0,0,rr,0,tau$1)}},symbolCross={draw(tr,er){const rr=sqrt$1(er/5)/2;tr.moveTo(-3*rr,-rr),tr.lineTo(-rr,-rr),tr.lineTo(-rr,-3*rr),tr.lineTo(rr,-3*rr),tr.lineTo(rr,-rr),tr.lineTo(3*rr,-rr),tr.lineTo(3*rr,rr),tr.lineTo(rr,rr),tr.lineTo(rr,3*rr),tr.lineTo(-rr,3*rr),tr.lineTo(-rr,rr),tr.lineTo(-3*rr,rr),tr.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(tr,er){const rr=sqrt$1(er/tan30_2),nr=rr*tan30;tr.moveTo(0,-rr),tr.lineTo(nr,0),tr.lineTo(0,rr),tr.lineTo(-nr,0),tr.closePath()}},symbolSquare={draw(tr,er){const rr=sqrt$1(er),nr=-rr/2;tr.rect(nr,nr,rr,rr)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(tr,er){const rr=sqrt$1(er*ka),nr=kx*rr,ir=ky*rr;tr.moveTo(0,-rr),tr.lineTo(nr,ir);for(let sr=1;sr<5;++sr){const ar=tau$1*sr/5,cr=cos(ar),lr=sin(ar);tr.lineTo(lr*rr,-cr*rr),tr.lineTo(cr*nr-lr*ir,lr*nr+cr*ir)}tr.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(tr,er){const rr=-sqrt$1(er/(sqrt3*3));tr.moveTo(0,rr*2),tr.lineTo(-sqrt3*rr,-rr),tr.lineTo(sqrt3*rr,-rr),tr.closePath()}},c$1=-.5,s$1=sqrt$1(3)/2,k$1=1/sqrt$1(12),a$1=(k$1/2+1)*3,symbolWye={draw(tr,er){const rr=sqrt$1(er/a$1),nr=rr/2,ir=rr*k$1,sr=nr,ar=rr*k$1+rr,cr=-sr,lr=ar;tr.moveTo(nr,ir),tr.lineTo(sr,ar),tr.lineTo(cr,lr),tr.lineTo(c$1*nr-s$1*ir,s$1*nr+c$1*ir),tr.lineTo(c$1*sr-s$1*ar,s$1*sr+c$1*ar),tr.lineTo(c$1*cr-s$1*lr,s$1*cr+c$1*lr),tr.lineTo(c$1*nr+s$1*ir,c$1*ir-s$1*nr),tr.lineTo(c$1*sr+s$1*ar,c$1*ar-s$1*sr),tr.lineTo(c$1*cr+s$1*lr,c$1*lr-s$1*cr),tr.closePath()}};function Symbol$3(tr,er){let rr=null,nr=withPath(ir);tr=typeof tr=="function"?tr:constant$3(tr||symbolCircle),er=typeof er=="function"?er:constant$3(er===void 0?64:+er);function ir(){let sr;if(rr||(rr=sr=nr()),tr.apply(this,arguments).draw(rr,+er.apply(this,arguments)),sr)return rr=null,sr+""||null}return ir.type=function(sr){return arguments.length?(tr=typeof sr=="function"?sr:constant$3(sr),ir):tr},ir.size=function(sr){return arguments.length?(er=typeof sr=="function"?sr:constant$3(+sr),ir):er},ir.context=function(sr){return arguments.length?(rr=sr??null,ir):rr},ir}function noop$2(){}function point$2(tr,er,rr){tr._context.bezierCurveTo((2*tr._x0+tr._x1)/3,(2*tr._y0+tr._y1)/3,(tr._x0+2*tr._x1)/3,(tr._y0+2*tr._y1)/3,(tr._x0+4*tr._x1+er)/6,(tr._y0+4*tr._y1+rr)/6)}function Basis(tr){this._context=tr}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(tr,er){switch(tr=+tr,er=+er,this._point){case 0:this._point=1,this._line?this._context.lineTo(tr,er):this._context.moveTo(tr,er);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,tr,er);break}this._x0=this._x1,this._x1=tr,this._y0=this._y1,this._y1=er}};function curveBasis(tr){return new Basis(tr)}function BasisClosed(tr){this._context=tr}BasisClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(tr,er){switch(tr=+tr,er=+er,this._point){case 0:this._point=1,this._x2=tr,this._y2=er;break;case 1:this._point=2,this._x3=tr,this._y3=er;break;case 2:this._point=3,this._x4=tr,this._y4=er,this._context.moveTo((this._x0+4*this._x1+tr)/6,(this._y0+4*this._y1+er)/6);break;default:point$2(this,tr,er);break}this._x0=this._x1,this._x1=tr,this._y0=this._y1,this._y1=er}};function curveBasisClosed(tr){return new BasisClosed(tr)}function BasisOpen(tr){this._context=tr}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(tr,er){switch(tr=+tr,er=+er,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var rr=(this._x0+4*this._x1+tr)/6,nr=(this._y0+4*this._y1+er)/6;this._line?this._context.lineTo(rr,nr):this._context.moveTo(rr,nr);break;case 3:this._point=4;default:point$2(this,tr,er);break}this._x0=this._x1,this._x1=tr,this._y0=this._y1,this._y1=er}};function curveBasisOpen(tr){return new BasisOpen(tr)}function LinearClosed(tr){this._context=tr}LinearClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(tr,er){tr=+tr,er=+er,this._point?this._context.lineTo(tr,er):(this._point=1,this._context.moveTo(tr,er))}};function curveLinearClosed(tr){return new LinearClosed(tr)}function sign(tr){return tr<0?-1:1}function slope3(tr,er,rr){var nr=tr._x1-tr._x0,ir=er-tr._x1,sr=(tr._y1-tr._y0)/(nr||ir<0&&-0),ar=(rr-tr._y1)/(ir||nr<0&&-0),cr=(sr*ir+ar*nr)/(nr+ir);return(sign(sr)+sign(ar))*Math.min(Math.abs(sr),Math.abs(ar),.5*Math.abs(cr))||0}function slope2(tr,er){var rr=tr._x1-tr._x0;return rr?(3*(tr._y1-tr._y0)/rr-er)/2:er}function point$1(tr,er,rr){var nr=tr._x0,ir=tr._y0,sr=tr._x1,ar=tr._y1,cr=(sr-nr)/3;tr._context.bezierCurveTo(nr+cr,ir+cr*er,sr-cr,ar-cr*rr,sr,ar)}function MonotoneX(tr){this._context=tr}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(tr,er){var rr=NaN;if(tr=+tr,er=+er,!(tr===this._x1&&er===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(tr,er):this._context.moveTo(tr,er);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,rr=slope3(this,tr,er)),rr);break;default:point$1(this,this._t0,rr=slope3(this,tr,er));break}this._x0=this._x1,this._x1=tr,this._y0=this._y1,this._y1=er,this._t0=rr}}};function MonotoneY(tr){this._context=new ReflectContext(tr)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(tr,er){MonotoneX.prototype.point.call(this,er,tr)};function ReflectContext(tr){this._context=tr}ReflectContext.prototype={moveTo:function(tr,er){this._context.moveTo(er,tr)},closePath:function(){this._context.closePath()},lineTo:function(tr,er){this._context.lineTo(er,tr)},bezierCurveTo:function(tr,er,rr,nr,ir,sr){this._context.bezierCurveTo(er,tr,nr,rr,sr,ir)}};function monotoneX(tr){return new MonotoneX(tr)}function monotoneY(tr){return new MonotoneY(tr)}function Natural(tr){this._context=tr}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var tr=this._x,er=this._y,rr=tr.length;if(rr)if(this._line?this._context.lineTo(tr[0],er[0]):this._context.moveTo(tr[0],er[0]),rr===2)this._context.lineTo(tr[1],er[1]);else for(var nr=controlPoints(tr),ir=controlPoints(er),sr=0,ar=1;ar<rr;++sr,++ar)this._context.bezierCurveTo(nr[0][sr],ir[0][sr],nr[1][sr],ir[1][sr],tr[ar],er[ar]);(this._line||this._line!==0&&rr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(tr,er){this._x.push(+tr),this._y.push(+er)}};function controlPoints(tr){var er,rr=tr.length-1,nr,ir=new Array(rr),sr=new Array(rr),ar=new Array(rr);for(ir[0]=0,sr[0]=2,ar[0]=tr[0]+2*tr[1],er=1;er<rr-1;++er)ir[er]=1,sr[er]=4,ar[er]=4*tr[er]+2*tr[er+1];for(ir[rr-1]=2,sr[rr-1]=7,ar[rr-1]=8*tr[rr-1]+tr[rr],er=1;er<rr;++er)nr=ir[er]/sr[er-1],sr[er]-=nr,ar[er]-=nr*ar[er-1];for(ir[rr-1]=ar[rr-1]/sr[rr-1],er=rr-2;er>=0;--er)ir[er]=(ar[er]-ir[er+1])/sr[er];for(sr[rr-1]=(tr[rr]+ir[rr-1])/2,er=0;er<rr-1;++er)sr[er]=2*tr[er+1]-ir[er+1];return[ir,sr]}function curveNatural(tr){return new Natural(tr)}function Step(tr,er){this._context=tr,this._t=er}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(tr,er){switch(tr=+tr,er=+er,this._point){case 0:this._point=1,this._line?this._context.lineTo(tr,er):this._context.moveTo(tr,er);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,er),this._context.lineTo(tr,er);else{var rr=this._x*(1-this._t)+tr*this._t;this._context.lineTo(rr,this._y),this._context.lineTo(rr,er)}break}}this._x=tr,this._y=er}};function curveStep(tr){return new Step(tr,.5)}function stepBefore(tr){return new Step(tr,0)}function stepAfter(tr){return new Step(tr,1)}function stackOffsetNone(tr,er){if((ar=tr.length)>1)for(var rr=1,nr,ir,sr=tr[er[0]],ar,cr=sr.length;rr<ar;++rr)for(ir=sr,sr=tr[er[rr]],nr=0;nr<cr;++nr)sr[nr][1]+=sr[nr][0]=isNaN(ir[nr][1])?ir[nr][0]:ir[nr][1]}function stackOrderNone(tr){for(var er=tr.length,rr=new Array(er);--er>=0;)rr[er]=er;return rr}function stackValue(tr,er){return tr[er]}function stackSeries(tr){const er=[];return er.key=tr,er}function shapeStack(){var tr=constant$3([]),er=stackOrderNone,rr=stackOffsetNone,nr=stackValue;function ir(sr){var ar=Array.from(tr.apply(this,arguments),stackSeries),cr,lr=ar.length,or=-1,ur;for(const hr of sr)for(cr=0,++or;cr<lr;++cr)(ar[cr][or]=[0,+nr(hr,ar[cr].key,or,sr)]).data=hr;for(cr=0,ur=array(er(ar));cr<lr;++cr)ar[ur[cr]].index=cr;return rr(ar,ur),ar}return ir.keys=function(sr){return arguments.length?(tr=typeof sr=="function"?sr:constant$3(Array.from(sr)),ir):tr},ir.value=function(sr){return arguments.length?(nr=typeof sr=="function"?sr:constant$3(+sr),ir):nr},ir.order=function(sr){return arguments.length?(er=sr==null?stackOrderNone:typeof sr=="function"?sr:constant$3(Array.from(sr)),ir):er},ir.offset=function(sr){return arguments.length?(rr=sr??stackOffsetNone,ir):rr},ir}function stackOffsetExpand(tr,er){if((nr=tr.length)>0){for(var rr,nr,ir=0,sr=tr[0].length,ar;ir<sr;++ir){for(ar=rr=0;rr<nr;++rr)ar+=tr[rr][ir][1]||0;if(ar)for(rr=0;rr<nr;++rr)tr[rr][ir][1]/=ar}stackOffsetNone(tr,er)}}function stackOffsetSilhouette(tr,er){if((ir=tr.length)>0){for(var rr=0,nr=tr[er[0]],ir,sr=nr.length;rr<sr;++rr){for(var ar=0,cr=0;ar<ir;++ar)cr+=tr[ar][rr][1]||0;nr[rr][1]+=nr[rr][0]=-cr/2}stackOffsetNone(tr,er)}}function stackOffsetWiggle(tr,er){if(!(!((ar=tr.length)>0)||!((sr=(ir=tr[er[0]]).length)>0))){for(var rr=0,nr=1,ir,sr,ar;nr<sr;++nr){for(var cr=0,lr=0,or=0;cr<ar;++cr){for(var ur=tr[er[cr]],hr=ur[nr][1]||0,dr=ur[nr-1][1]||0,fr=(hr-dr)/2,gr=0;gr<cr;++gr){var br=tr[er[gr]],pr=br[nr][1]||0,mr=br[nr-1][1]||0;fr+=pr-mr}lr+=hr,or+=fr*hr}ir[nr-1][1]+=ir[nr-1][0]=rr,lr&&(rr-=or/lr)}ir[nr-1][1]+=ir[nr-1][0]=rr,stackOffsetNone(tr,er)}}function _typeof$N(tr){"@babel/helpers - typeof";return _typeof$N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$N(tr)}var _excluded$i=["type","size","sizeType"];function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$v.apply(this,arguments)}function ownKeys$E(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$E(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$E(Object(rr),!0).forEach(function(nr){_defineProperty$L(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$E(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$L(tr,er,rr){return er=_toPropertyKey$L(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$L(tr){var er=_toPrimitive$L(tr,"string");return _typeof$N(er)=="symbol"?er:er+""}function _toPrimitive$L(tr,er){if(_typeof$N(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$N(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _objectWithoutProperties$i(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$i(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$i(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$2=Math.PI/180,getSymbolFactory=function tr(er){var rr="symbol".concat(upperFirst$1(er));return symbolFactories[rr]||symbolCircle},calculateAreaSize=function tr(er,rr,nr){if(rr==="area")return er;switch(nr){case"cross":return 5*er*er/9;case"diamond":return .5*er*er/Math.sqrt(3);case"square":return er*er;case"star":{var ir=18*RADIAN$2;return 1.25*er*er*(Math.tan(ir)-Math.tan(ir*2)*Math.pow(Math.tan(ir),2))}case"triangle":return Math.sqrt(3)*er*er/4;case"wye":return(21-10*Math.sqrt(3))*er*er/8;default:return Math.PI*er*er/4}},registerSymbol=function tr(er,rr){symbolFactories["symbol".concat(upperFirst$1(er))]=rr},Symbols=function tr(er){var rr=er.type,nr=rr===void 0?"circle":rr,ir=er.size,sr=ir===void 0?64:ir,ar=er.sizeType,cr=ar===void 0?"area":ar,lr=_objectWithoutProperties$i(er,_excluded$i),or=_objectSpread$E(_objectSpread$E({},lr),{},{type:nr,size:sr,sizeType:cr}),ur=function(){var pr=getSymbolFactory(nr),mr=Symbol$3().type(pr).size(calculateAreaSize(sr,cr,nr));return mr()},hr=or.className,dr=or.cx,fr=or.cy,gr=filterProps(or,!0);return dr===+dr&&fr===+fr&&sr===+sr?React.createElement("path",_extends$v({},gr,{className:clsx("recharts-symbols",hr),transform:"translate(".concat(dr,", ").concat(fr,")"),d:ur()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$M(tr){"@babel/helpers - typeof";return _typeof$M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$M(tr)}function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$u.apply(this,arguments)}function ownKeys$D(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$D(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$D(Object(rr),!0).forEach(function(nr){_defineProperty$K(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$D(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$o(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$o(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$K(nr.key),nr)}}function _createClass$o(tr,er,rr){return er&&_defineProperties$o(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$k(tr,er,rr){return er=_getPrototypeOf$l(er),_possibleConstructorReturn$l(tr,_isNativeReflectConstruct$l()?Reflect.construct(er,rr||[],_getPrototypeOf$l(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$l(tr,er){if(er&&(_typeof$M(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$l(tr)}function _assertThisInitialized$l(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$l(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$l=function(){return!!tr})()}function _getPrototypeOf$l(tr){return _getPrototypeOf$l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$l(tr)}function _inherits$l(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$l(tr,er)}function _setPrototypeOf$l(tr,er){return _setPrototypeOf$l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$l(tr,er)}function _defineProperty$K(tr,er,rr){return er=_toPropertyKey$K(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$K(tr){var er=_toPrimitive$K(tr,"string");return _typeof$M(er)=="symbol"?er:er+""}function _toPrimitive$K(tr,er){if(_typeof$M(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$M(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var SIZE=32,DefaultLegendContent=function(tr){function er(){return _classCallCheck$o(this,er),_callSuper$k(this,er,arguments)}return _inherits$l(er,tr),_createClass$o(er,[{key:"renderIcon",value:function(nr){var ir=this.props.inactiveColor,sr=SIZE/2,ar=SIZE/6,cr=SIZE/3,lr=nr.inactive?ir:nr.color;if(nr.type==="plainline")return React.createElement("line",{strokeWidth:4,fill:"none",stroke:lr,strokeDasharray:nr.payload.strokeDasharray,x1:0,y1:sr,x2:SIZE,y2:sr,className:"recharts-legend-icon"});if(nr.type==="line")return React.createElement("path",{strokeWidth:4,fill:"none",stroke:lr,d:"M0,".concat(sr,"h").concat(cr,`
            A`).concat(ar,",").concat(ar,",0,1,1,").concat(2*cr,",").concat(sr,`
            H`).concat(SIZE,"M").concat(2*cr,",").concat(sr,`
            A`).concat(ar,",").concat(ar,",0,1,1,").concat(cr,",").concat(sr),className:"recharts-legend-icon"});if(nr.type==="rect")return React.createElement("path",{stroke:"none",fill:lr,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React.isValidElement(nr.legendIcon)){var or=_objectSpread$D({},nr);return delete or.legendIcon,React.cloneElement(nr.legendIcon,or)}return React.createElement(Symbols,{fill:lr,cx:sr,cy:sr,size:SIZE,sizeType:"diameter",type:nr.type})}},{key:"renderItems",value:function(){var nr=this,ir=this.props,sr=ir.payload,ar=ir.iconSize,cr=ir.layout,lr=ir.formatter,or=ir.inactiveColor,ur={x:0,y:0,width:SIZE,height:SIZE},hr={display:cr==="horizontal"?"inline-block":"block",marginRight:10},dr={display:"inline-block",verticalAlign:"middle",marginRight:4};return sr.map(function(fr,gr){var br=fr.formatter||lr,pr=clsx(_defineProperty$K(_defineProperty$K({"recharts-legend-item":!0},"legend-item-".concat(gr),!0),"inactive",fr.inactive));if(fr.type==="none")return null;var mr=isFunction$3(fr.value)?null:fr.value;warn(!isFunction$3(fr.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var yr=fr.inactive?or:fr.color;return React.createElement("li",_extends$u({className:pr,style:hr,key:"legend-item-".concat(gr)},adaptEventsOfChild(nr.props,fr,gr)),React.createElement(Surface,{width:ar,height:ar,viewBox:ur,style:dr},nr.renderIcon(fr)),React.createElement("span",{className:"recharts-legend-item-text",style:{color:yr}},br?br(mr,fr,gr):mr))})}},{key:"render",value:function(){var nr=this.props,ir=nr.payload,sr=nr.layout,ar=nr.align;if(!ir||!ir.length)return null;var cr={padding:0,margin:0,textAlign:sr==="horizontal"?ar:"left"};return React.createElement("ul",{className:"recharts-default-legend",style:cr},this.renderItems())}}])}(reactExports.PureComponent);_defineProperty$K(DefaultLegendContent,"displayName","Legend");_defineProperty$K(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(tr){var er=this.__data__,rr=er.delete(tr);return this.size=er.size,rr}var _stackDelete=stackDelete$1;function stackGet$1(tr){return this.__data__.get(tr)}var _stackGet=stackGet$1;function stackHas$1(tr){return this.__data__.has(tr)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(tr,er){var rr=this.__data__;if(rr instanceof ListCache$1){var nr=rr.__data__;if(!Map$2||nr.length<LARGE_ARRAY_SIZE$1-1)return nr.push([tr,er]),this.size=++rr.size,this;rr=this.__data__=new MapCache$1(nr)}return rr.set(tr,er),this.size=rr.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(tr){var er=this.__data__=new ListCache(tr);this.size=er.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(tr){return this.__data__.set(tr,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(tr){return this.__data__.has(tr)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(tr){var er=-1,rr=tr==null?0:tr.length;for(this.__data__=new MapCache;++er<rr;)this.add(tr[er])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$2(tr,er){for(var rr=-1,nr=tr==null?0:tr.length;++rr<nr;)if(er(tr[rr],rr,tr))return!0;return!1}var _arraySome=arraySome$2;function cacheHas$2(tr,er){return tr.has(er)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome$1=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(tr,er,rr,nr,ir,sr){var ar=rr&COMPARE_PARTIAL_FLAG$5,cr=tr.length,lr=er.length;if(cr!=lr&&!(ar&&lr>cr))return!1;var or=sr.get(tr),ur=sr.get(er);if(or&&ur)return or==er&&ur==tr;var hr=-1,dr=!0,fr=rr&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(sr.set(tr,er),sr.set(er,tr);++hr<cr;){var gr=tr[hr],br=er[hr];if(nr)var pr=ar?nr(br,gr,hr,er,tr,sr):nr(gr,br,hr,tr,er,sr);if(pr!==void 0){if(pr)continue;dr=!1;break}if(fr){if(!arraySome$1(er,function(mr,yr){if(!cacheHas$1(fr,yr)&&(gr===mr||ir(gr,mr,rr,nr,sr)))return fr.push(yr)})){dr=!1;break}}else if(!(gr===br||ir(gr,br,rr,nr,sr))){dr=!1;break}}return sr.delete(tr),sr.delete(er),dr}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(tr){var er=-1,rr=Array(tr.size);return tr.forEach(function(nr,ir){rr[++er]=[ir,nr]}),rr}var _mapToArray=mapToArray$1;function setToArray$3(tr){var er=-1,rr=Array(tr.size);return tr.forEach(function(nr){rr[++er]=nr}),rr}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(tr,er,rr,nr,ir,sr,ar){switch(rr){case dataViewTag$2:if(tr.byteLength!=er.byteLength||tr.byteOffset!=er.byteOffset)return!1;tr=tr.buffer,er=er.buffer;case arrayBufferTag$1:return!(tr.byteLength!=er.byteLength||!sr(new Uint8Array$1(tr),new Uint8Array$1(er)));case boolTag$2:case dateTag$1:case numberTag$1:return eq$1(+tr,+er);case errorTag$1:return tr.name==er.name&&tr.message==er.message;case regexpTag$1:case stringTag$1:return tr==er+"";case mapTag$2:var cr=mapToArray;case setTag$2:var lr=nr&COMPARE_PARTIAL_FLAG$4;if(cr||(cr=setToArray$2),tr.size!=er.size&&!lr)return!1;var or=ar.get(tr);if(or)return or==er;nr|=COMPARE_UNORDERED_FLAG$2,ar.set(tr,er);var ur=equalArrays$1(cr(tr),cr(er),nr,ir,sr,ar);return ar.delete(tr),ur;case symbolTag:if(symbolValueOf)return symbolValueOf.call(tr)==symbolValueOf.call(er)}return!1}var _equalByTag=equalByTag$1;function arrayPush$2(tr,er){for(var rr=-1,nr=er.length,ir=tr.length;++rr<nr;)tr[ir+rr]=er[rr];return tr}var _arrayPush=arrayPush$2,arrayPush$1=_arrayPush,isArray$9=isArray_1;function baseGetAllKeys$1(tr,er,rr){var nr=er(tr);return isArray$9(tr)?nr:arrayPush$1(nr,rr(tr))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(tr,er){for(var rr=-1,nr=tr==null?0:tr.length,ir=0,sr=[];++rr<nr;){var ar=tr[rr];er(ar,rr,tr)&&(sr[ir++]=ar)}return sr}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$7=Object.prototype,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(tr){return tr==null?[]:(tr=Object(tr),arrayFilter(nativeGetSymbols(tr),function(er){return propertyIsEnumerable$1.call(tr,er)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(tr,er){for(var rr=-1,nr=Array(tr);++rr<tr;)nr[rr]=er(rr);return nr}var _baseTimes=baseTimes$1,baseGetTag$4=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(tr){return isObjectLike$5(tr)&&baseGetTag$4(tr)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(tr){return isObjectLike$4(tr)&&hasOwnProperty$6.call(tr,"callee")&&!propertyIsEnumerable.call(tr,"callee")},isArguments_1=isArguments$3,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(tr,er){var rr=_root,nr=stubFalse_1,ir=er&&!er.nodeType&&er,sr=ir&&!0&&tr&&!tr.nodeType&&tr,ar=sr&&sr.exports===ir,cr=ar?rr.Buffer:void 0,lr=cr?cr.isBuffer:void 0,or=lr||nr;tr.exports=or})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(tr,er){var rr=typeof tr;return er=er??MAX_SAFE_INTEGER$2,!!er&&(rr=="number"||rr!="symbol"&&reIsUint.test(tr))&&tr>-1&&tr%1==0&&tr<er}var _isIndex=isIndex$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$3(tr){return typeof tr=="number"&&tr>-1&&tr%1==0&&tr<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$3,baseGetTag$3=_baseGetTag,isLength$2=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$3="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(tr){return isObjectLike$3(tr)&&isLength$2(tr.length)&&!!typedArrayTags[baseGetTag$3(tr)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(tr){return function(er){return tr(er)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(tr,er){var rr=_freeGlobal,nr=er&&!er.nodeType&&er,ir=nr&&!0&&tr&&!tr.nodeType&&tr,sr=ir&&ir.exports===nr,ar=sr&&rr.process,cr=function(){try{var lr=ir&&ir.require&&ir.require("util").types;return lr||ar&&ar.binding&&ar.binding("util")}catch{}}();tr.exports=cr})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments$2=isArguments_1,isArray$8=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function arrayLikeKeys$1(tr,er){var rr=isArray$8(tr),nr=!rr&&isArguments$2(tr),ir=!rr&&!nr&&isBuffer$1(tr),sr=!rr&&!nr&&!ir&&isTypedArray$1(tr),ar=rr||nr||ir||sr,cr=ar?baseTimes(tr.length,String):[],lr=cr.length;for(var or in tr)(er||hasOwnProperty$5.call(tr,or))&&!(ar&&(or=="length"||ir&&(or=="offset"||or=="parent")||sr&&(or=="buffer"||or=="byteLength"||or=="byteOffset")||isIndex$2(or,lr)))&&cr.push(or);return cr}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$4=Object.prototype;function isPrototype$1(tr){var er=tr&&tr.constructor,rr=typeof er=="function"&&er.prototype||objectProto$4;return tr===rr}var _isPrototype=isPrototype$1;function overArg$2(tr,er){return function(rr){return tr(er(rr))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function baseKeys$1(tr){if(!isPrototype(tr))return nativeKeys(tr);var er=[];for(var rr in Object(tr))hasOwnProperty$4.call(tr,rr)&&rr!="constructor"&&er.push(rr);return er}var _baseKeys=baseKeys$1,isFunction=isFunction_1,isLength$1=isLength_1;function isArrayLike$5(tr){return tr!=null&&isLength$1(tr.length)&&!isFunction(tr)}var isArrayLike_1=isArrayLike$5,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$4=isArrayLike_1;function keys$5(tr){return isArrayLike$4(tr)?arrayLikeKeys(tr):baseKeys(tr)}var keys_1=keys$5,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$4=keys_1;function getAllKeys$1(tr){return baseGetAllKeys(tr,keys$4,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects$1(tr,er,rr,nr,ir,sr){var ar=rr&COMPARE_PARTIAL_FLAG$3,cr=getAllKeys(tr),lr=cr.length,or=getAllKeys(er),ur=or.length;if(lr!=ur&&!ar)return!1;for(var hr=lr;hr--;){var dr=cr[hr];if(!(ar?dr in er:hasOwnProperty$3.call(er,dr)))return!1}var fr=sr.get(tr),gr=sr.get(er);if(fr&&gr)return fr==er&&gr==tr;var br=!0;sr.set(tr,er),sr.set(er,tr);for(var pr=ar;++hr<lr;){dr=cr[hr];var mr=tr[dr],yr=er[dr];if(nr)var xr=ar?nr(yr,mr,dr,er,tr,sr):nr(mr,yr,dr,tr,er,sr);if(!(xr===void 0?mr===yr||ir(mr,yr,rr,nr,sr):xr)){br=!1;break}pr||(pr=dr=="constructor")}if(br&&!pr){var vr=tr.constructor,_r=er.constructor;vr!=_r&&"constructor"in tr&&"constructor"in er&&!(typeof vr=="function"&&vr instanceof vr&&typeof _r=="function"&&_r instanceof _r)&&(br=!1)}return sr.delete(tr),sr.delete(er),br}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$2=getNative$4(root$4,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$3=getNative$2(root$2,"Set"),_Set=Set$3,getNative$1=_getNative,root$1=_root,WeakMap$2=getNative$1(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag$2;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$2&&getTag$1(new Set$2)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(tr){var er=baseGetTag$2(tr),rr=er==objectTag$2?tr.constructor:void 0,nr=rr?toSource(rr):"";if(nr)switch(nr){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return er});var _getTag=getTag$1,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$7=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(tr,er,rr,nr,ir,sr){var ar=isArray$7(tr),cr=isArray$7(er),lr=ar?arrayTag:getTag(tr),or=cr?arrayTag:getTag(er);lr=lr==argsTag?objectTag$1:lr,or=or==argsTag?objectTag$1:or;var ur=lr==objectTag$1,hr=or==objectTag$1,dr=lr==or;if(dr&&isBuffer(tr)){if(!isBuffer(er))return!1;ar=!0,ur=!1}if(dr&&!ur)return sr||(sr=new Stack$1),ar||isTypedArray(tr)?equalArrays(tr,er,rr,nr,ir,sr):equalByTag(tr,er,lr,rr,nr,ir,sr);if(!(rr&COMPARE_PARTIAL_FLAG$2)){var fr=ur&&hasOwnProperty$2.call(tr,"__wrapped__"),gr=hr&&hasOwnProperty$2.call(er,"__wrapped__");if(fr||gr){var br=fr?tr.value():tr,pr=gr?er.value():er;return sr||(sr=new Stack$1),ir(br,pr,rr,nr,sr)}}return dr?(sr||(sr=new Stack$1),equalObjects(tr,er,rr,nr,ir,sr)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$2=isObjectLike_1;function baseIsEqual$3(tr,er,rr,nr,ir){return tr===er?!0:tr==null||er==null||!isObjectLike$2(tr)&&!isObjectLike$2(er)?tr!==tr&&er!==er:baseIsEqualDeep(tr,er,rr,nr,baseIsEqual$3,ir)}var _baseIsEqual=baseIsEqual$3,Stack=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(tr,er,rr,nr){var ir=rr.length,sr=ir,ar=!nr;if(tr==null)return!sr;for(tr=Object(tr);ir--;){var cr=rr[ir];if(ar&&cr[2]?cr[1]!==tr[cr[0]]:!(cr[0]in tr))return!1}for(;++ir<sr;){cr=rr[ir];var lr=cr[0],or=tr[lr],ur=cr[1];if(ar&&cr[2]){if(or===void 0&&!(lr in tr))return!1}else{var hr=new Stack;if(nr)var dr=nr(or,ur,lr,tr,er,hr);if(!(dr===void 0?baseIsEqual$2(ur,or,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,nr,hr):dr))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$4=isObject_1;function isStrictComparable$2(tr){return tr===tr&&!isObject$4(tr)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(tr){for(var er=keys$3(tr),rr=er.length;rr--;){var nr=er[rr],ir=tr[nr];er[rr]=[nr,ir,isStrictComparable$1(ir)]}return er}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(tr,er){return function(rr){return rr==null?!1:rr[tr]===er&&(er!==void 0||tr in Object(rr))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(tr){var er=getMatchData(tr);return er.length==1&&er[0][2]?matchesStrictComparable$1(er[0][0],er[0][1]):function(rr){return rr===tr||baseIsMatch(rr,tr,er)}}var _baseMatches=baseMatches$1;function baseHasIn$1(tr,er){return tr!=null&&er in Object(tr)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments$1=isArguments_1,isArray$6=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(tr,er,rr){er=castPath(er,tr);for(var nr=-1,ir=er.length,sr=!1;++nr<ir;){var ar=toKey$2(er[nr]);if(!(sr=tr!=null&&rr(tr,ar)))break;tr=tr[ar]}return sr||++nr!=ir?sr:(ir=tr==null?0:tr.length,!!ir&&isLength(ir)&&isIndex$1(ar,ir)&&(isArray$6(tr)||isArguments$1(tr)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(tr,er){return tr!=null&&hasPath(tr,er,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual$1=_baseIsEqual,get=get_1,hasIn=hasIn_1,isKey$1=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(tr,er){return isKey$1(tr)&&isStrictComparable(er)?matchesStrictComparable(toKey$1(tr),er):function(rr){var nr=get(rr,tr);return nr===void 0&&nr===er?hasIn(rr,tr):baseIsEqual$1(er,nr,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$b(tr){return tr}var identity_1=identity$b;function baseProperty$1(tr){return function(er){return er==null?void 0:er[tr]}}var _baseProperty=baseProperty$1,baseGet$1=_baseGet;function basePropertyDeep$1(tr){return function(er){return baseGet$1(er,tr)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey=_isKey,toKey=_toKey;function property$1(tr){return isKey(tr)?baseProperty(toKey(tr)):basePropertyDeep(tr)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$a=identity_1,isArray$5=isArray_1,property=property_1;function baseIteratee$a(tr){return typeof tr=="function"?tr:tr==null?identity$a:typeof tr=="object"?isArray$5(tr)?baseMatchesProperty(tr[0],tr[1]):baseMatches(tr):property(tr)}var _baseIteratee=baseIteratee$a;function baseFindIndex$2(tr,er,rr,nr){for(var ir=tr.length,sr=rr+(nr?1:-1);nr?sr--:++sr<ir;)if(er(tr[sr],sr,tr))return sr;return-1}var _baseFindIndex=baseFindIndex$2;function baseIsNaN$1(tr){return tr!==tr}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(tr,er,rr){for(var nr=rr-1,ir=tr.length;++nr<ir;)if(tr[nr]===er)return nr;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex$1=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(tr,er,rr){return er===er?strictIndexOf(tr,er,rr):baseFindIndex$1(tr,baseIsNaN,rr)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(tr,er){var rr=tr==null?0:tr.length;return!!rr&&baseIndexOf(tr,er,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(tr,er,rr){for(var nr=-1,ir=tr==null?0:tr.length;++nr<ir;)if(rr(er,tr[nr]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(tr){return new Set$1(tr)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(tr,er,rr){var nr=-1,ir=arrayIncludes,sr=tr.length,ar=!0,cr=[],lr=cr;if(rr)ar=!1,ir=arrayIncludesWith;else if(sr>=LARGE_ARRAY_SIZE){var or=er?null:createSet(tr);if(or)return setToArray(or);ar=!1,ir=cacheHas,lr=new SetCache}else lr=er?[]:cr;e:for(;++nr<sr;){var ur=tr[nr],hr=er?er(ur):ur;if(ur=rr||ur!==0?ur:0,ar&&hr===hr){for(var dr=lr.length;dr--;)if(lr[dr]===hr)continue e;er&&lr.push(hr),cr.push(ur)}else ir(lr,hr,rr)||(lr!==cr&&lr.push(hr),cr.push(ur))}return cr}var _baseUniq=baseUniq$1,baseIteratee$9=_baseIteratee,baseUniq=_baseUniq;function uniqBy(tr,er){return tr&&tr.length?baseUniq(tr,baseIteratee$9(er)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function getUniqPayload(tr,er,rr){return er===!0?uniqBy$1(tr,rr):isFunction$3(er)?uniqBy$1(tr,er):tr}function _typeof$L(tr){"@babel/helpers - typeof";return _typeof$L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$L(tr)}var _excluded$h=["ref"];function ownKeys$C(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$C(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$C(Object(rr),!0).forEach(function(nr){_defineProperty$J(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$C(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$n(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$n(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$J(nr.key),nr)}}function _createClass$n(tr,er,rr){return er&&_defineProperties$n(tr.prototype,er),rr&&_defineProperties$n(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$j(tr,er,rr){return er=_getPrototypeOf$k(er),_possibleConstructorReturn$k(tr,_isNativeReflectConstruct$k()?Reflect.construct(er,rr||[],_getPrototypeOf$k(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$k(tr,er){if(er&&(_typeof$L(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$k(tr)}function _assertThisInitialized$k(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$k(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$k=function(){return!!tr})()}function _getPrototypeOf$k(tr){return _getPrototypeOf$k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$k(tr)}function _inherits$k(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$k(tr,er)}function _setPrototypeOf$k(tr,er){return _setPrototypeOf$k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$k(tr,er)}function _defineProperty$J(tr,er,rr){return er=_toPropertyKey$J(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$J(tr){var er=_toPrimitive$J(tr,"string");return _typeof$L(er)=="symbol"?er:er+""}function _toPrimitive$J(tr,er){if(_typeof$L(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$L(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}function _objectWithoutProperties$h(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$h(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$h(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function defaultUniqBy$1(tr){return tr.value}function renderContent$1(tr,er){if(React.isValidElement(tr))return React.cloneElement(tr,er);if(typeof tr=="function")return React.createElement(tr,er);er.ref;var rr=_objectWithoutProperties$h(er,_excluded$h);return React.createElement(DefaultLegendContent,rr)}var EPS$1=1,Legend=function(tr){function er(){var rr;_classCallCheck$n(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$j(this,er,[].concat(ir)),_defineProperty$J(rr,"lastBoundingBox",{width:-1,height:-1}),rr}return _inherits$k(er,tr),_createClass$n(er,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var nr=this.wrapperNode.getBoundingClientRect();return nr.height=this.wrapperNode.offsetHeight,nr.width=this.wrapperNode.offsetWidth,nr}return null}},{key:"updateBBox",value:function(){var nr=this.props.onBBoxUpdate,ir=this.getBBox();ir?(Math.abs(ir.width-this.lastBoundingBox.width)>EPS$1||Math.abs(ir.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=ir.width,this.lastBoundingBox.height=ir.height,nr&&nr(ir)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,nr&&nr(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$C({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(nr){var ir=this.props,sr=ir.layout,ar=ir.align,cr=ir.verticalAlign,lr=ir.margin,or=ir.chartWidth,ur=ir.chartHeight,hr,dr;if(!nr||(nr.left===void 0||nr.left===null)&&(nr.right===void 0||nr.right===null))if(ar==="center"&&sr==="vertical"){var fr=this.getBBoxSnapshot();hr={left:((or||0)-fr.width)/2}}else hr=ar==="right"?{right:lr&&lr.right||0}:{left:lr&&lr.left||0};if(!nr||(nr.top===void 0||nr.top===null)&&(nr.bottom===void 0||nr.bottom===null))if(cr==="middle"){var gr=this.getBBoxSnapshot();dr={top:((ur||0)-gr.height)/2}}else dr=cr==="bottom"?{bottom:lr&&lr.bottom||0}:{top:lr&&lr.top||0};return _objectSpread$C(_objectSpread$C({},hr),dr)}},{key:"render",value:function(){var nr=this,ir=this.props,sr=ir.content,ar=ir.width,cr=ir.height,lr=ir.wrapperStyle,or=ir.payloadUniqBy,ur=ir.payload,hr=_objectSpread$C(_objectSpread$C({position:"absolute",width:ar||"auto",height:cr||"auto"},this.getDefaultPosition(lr)),lr);return React.createElement("div",{className:"recharts-legend-wrapper",style:hr,ref:function(fr){nr.wrapperNode=fr}},renderContent$1(sr,_objectSpread$C(_objectSpread$C({},this.props),{},{payload:getUniqPayload(ur,or,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(nr,ir){var sr=_objectSpread$C(_objectSpread$C({},this.defaultProps),nr.props),ar=sr.layout;return ar==="vertical"&&isNumber(nr.props.height)?{height:nr.props.height}:ar==="horizontal"?{width:nr.props.width||ir}:null}}])}(reactExports.PureComponent);_defineProperty$J(Legend,"displayName","Legend");_defineProperty$J(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Symbol$1=_Symbol,isArguments=isArguments_1,isArray$4=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(tr){return isArray$4(tr)||isArguments(tr)||!!(spreadableSymbol&&tr&&tr[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(tr,er,rr,nr,ir){var sr=-1,ar=tr.length;for(rr||(rr=isFlattenable),ir||(ir=[]);++sr<ar;){var cr=tr[sr];er>0&&rr(cr)?er>1?baseFlatten$2(cr,er-1,rr,nr,ir):arrayPush(ir,cr):nr||(ir[ir.length]=cr)}return ir}var _baseFlatten=baseFlatten$2;function createBaseFor$1(tr){return function(er,rr,nr){for(var ir=-1,sr=Object(er),ar=nr(er),cr=ar.length;cr--;){var lr=ar[tr?cr:++ir];if(rr(sr[lr],lr,sr)===!1)break}return er}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys$2=keys_1;function baseForOwn$2(tr,er){return tr&&baseFor(tr,er,keys$2)}var _baseForOwn=baseForOwn$2,isArrayLike$3=isArrayLike_1;function createBaseEach$1(tr,er){return function(rr,nr){if(rr==null)return rr;if(!isArrayLike$3(rr))return tr(rr,nr);for(var ir=rr.length,sr=er?ir:-1,ar=Object(rr);(er?sr--:++sr<ir)&&nr(ar[sr],sr,ar)!==!1;);return rr}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$3=createBaseEach(baseForOwn$1),_baseEach=baseEach$3,baseEach$2=_baseEach,isArrayLike$2=isArrayLike_1;function baseMap$2(tr,er){var rr=-1,nr=isArrayLike$2(tr)?Array(tr.length):[];return baseEach$2(tr,function(ir,sr,ar){nr[++rr]=er(ir,sr,ar)}),nr}var _baseMap=baseMap$2;function baseSortBy$1(tr,er){var rr=tr.length;for(tr.sort(er);rr--;)tr[rr]=tr[rr].value;return tr}var _baseSortBy=baseSortBy$1,isSymbol$2=isSymbol_1;function compareAscending$1(tr,er){if(tr!==er){var rr=tr!==void 0,nr=tr===null,ir=tr===tr,sr=isSymbol$2(tr),ar=er!==void 0,cr=er===null,lr=er===er,or=isSymbol$2(er);if(!cr&&!or&&!sr&&tr>er||sr&&ar&&lr&&!cr&&!or||nr&&ar&&lr||!rr&&lr||!ir)return 1;if(!nr&&!sr&&!or&&tr<er||or&&rr&&ir&&!nr&&!sr||cr&&rr&&ir||!ar&&ir||!lr)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(tr,er,rr){for(var nr=-1,ir=tr.criteria,sr=er.criteria,ar=ir.length,cr=rr.length;++nr<ar;){var lr=compareAscending(ir[nr],sr[nr]);if(lr){if(nr>=cr)return lr;var or=rr[nr];return lr*(or=="desc"?-1:1)}}return tr.index-er.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet=_baseGet,baseIteratee$8=_baseIteratee,baseMap$1=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity$9=identity_1,isArray$3=isArray_1;function baseOrderBy$1(tr,er,rr){er.length?er=arrayMap$1(er,function(sr){return isArray$3(sr)?function(ar){return baseGet(ar,sr.length===1?sr[0]:sr)}:sr}):er=[identity$9];var nr=-1;er=arrayMap$1(er,baseUnary(baseIteratee$8));var ir=baseMap$1(tr,function(sr,ar,cr){var lr=arrayMap$1(er,function(or){return or(sr)});return{criteria:lr,index:++nr,value:sr}});return baseSortBy(ir,function(sr,ar){return compareMultiple(sr,ar,rr)})}var _baseOrderBy=baseOrderBy$1;function apply$1(tr,er,rr){switch(rr.length){case 0:return tr.call(er);case 1:return tr.call(er,rr[0]);case 2:return tr.call(er,rr[0],rr[1]);case 3:return tr.call(er,rr[0],rr[1],rr[2])}return tr.apply(er,rr)}var _apply=apply$1,apply=_apply,nativeMax$3=Math.max;function overRest$1(tr,er,rr){return er=nativeMax$3(er===void 0?tr.length-1:er,0),function(){for(var nr=arguments,ir=-1,sr=nativeMax$3(nr.length-er,0),ar=Array(sr);++ir<sr;)ar[ir]=nr[er+ir];ir=-1;for(var cr=Array(er+1);++ir<er;)cr[ir]=nr[ir];return cr[er]=rr(ar),apply(tr,this,cr)}}var _overRest=overRest$1;function constant$2(tr){return function(){return tr}}var constant_1=constant$2,getNative=_getNative,defineProperty$2=function(){try{var tr=getNative(Object,"defineProperty");return tr({},"",{}),tr}catch{}}(),_defineProperty$I=defineProperty$2,constant$1=constant_1,defineProperty$1=_defineProperty$I,identity$8=identity_1,baseSetToString$1=defineProperty$1?function(tr,er){return defineProperty$1(tr,"toString",{configurable:!0,enumerable:!1,value:constant$1(er),writable:!0})}:identity$8,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(tr){var er=0,rr=0;return function(){var nr=nativeNow(),ir=HOT_SPAN-(nr-rr);if(rr=nr,ir>0){if(++er>=HOT_COUNT)return arguments[0]}else er=0;return tr.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity$7=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(tr,er){return setToString(overRest(tr,er,identity$7),tr+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$3=isObject_1;function isIterateeCall$4(tr,er,rr){if(!isObject$3(rr))return!1;var nr=typeof er;return(nr=="number"?isArrayLike$1(rr)&&isIndex(er,rr.length):nr=="string"&&er in rr)?eq(rr[er],tr):!1}var _isIterateeCall=isIterateeCall$4,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall$3=_isIterateeCall,sortBy=baseRest(function(tr,er){if(tr==null)return[];var rr=er.length;return rr>1&&isIterateeCall$3(tr,er[0],er[1])?er=[]:rr>2&&isIterateeCall$3(er[0],er[1],er[2])&&(er=[er[0]]),baseOrderBy(tr,baseFlatten$1(er,1),[])}),sortBy_1=sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy_1);function _typeof$K(tr){"@babel/helpers - typeof";return _typeof$K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$K(tr)}function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$t.apply(this,arguments)}function _slicedToArray$c(tr,er){return _arrayWithHoles$d(tr)||_iterableToArrayLimit$c(tr,er)||_unsupportedIterableToArray$l(tr,er)||_nonIterableRest$d()}function _nonIterableRest$d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$l(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$l(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$l(tr,er)}}function _arrayLikeToArray$l(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$c(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$d(tr){if(Array.isArray(tr))return tr}function ownKeys$B(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$B(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$B(Object(rr),!0).forEach(function(nr){_defineProperty$H(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$B(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$H(tr,er,rr){return er=_toPropertyKey$I(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$I(tr){var er=_toPrimitive$I(tr,"string");return _typeof$K(er)=="symbol"?er:er+""}function _toPrimitive$I(tr,er){if(_typeof$K(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$K(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function defaultFormatter(tr){return Array.isArray(tr)&&isNumOrStr(tr[0])&&isNumOrStr(tr[1])?tr.join(" ~ "):tr}var DefaultTooltipContent=function tr(er){var rr=er.separator,nr=rr===void 0?" : ":rr,ir=er.contentStyle,sr=ir===void 0?{}:ir,ar=er.itemStyle,cr=ar===void 0?{}:ar,lr=er.labelStyle,or=lr===void 0?{}:lr,ur=er.payload,hr=er.formatter,dr=er.itemSorter,fr=er.wrapperClassName,gr=er.labelClassName,br=er.label,pr=er.labelFormatter,mr=er.accessibilityLayer,yr=mr===void 0?!1:mr,xr=function(){if(ur&&ur.length){var Or={padding:0,margin:0},jr=(dr?sortBy$1(ur,dr):ur).map(function(Lr,Cr){if(Lr.type==="none")return null;var wr=_objectSpread$B({display:"block",paddingTop:4,paddingBottom:4,color:Lr.color||"#000"},cr),Pr=Lr.formatter||hr||defaultFormatter,Ar=Lr.value,Sr=Lr.name,Mr=Ar,qr=Sr;if(Pr&&Mr!=null&&qr!=null){var $r=Pr(Ar,Sr,Lr,Cr,ur);if(Array.isArray($r)){var Br=_slicedToArray$c($r,2);Mr=Br[0],qr=Br[1]}else Mr=$r}return React.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Cr),style:wr},isNumOrStr(qr)?React.createElement("span",{className:"recharts-tooltip-item-name"},qr):null,isNumOrStr(qr)?React.createElement("span",{className:"recharts-tooltip-item-separator"},nr):null,React.createElement("span",{className:"recharts-tooltip-item-value"},Mr),React.createElement("span",{className:"recharts-tooltip-item-unit"},Lr.unit||""))});return React.createElement("ul",{className:"recharts-tooltip-item-list",style:Or},jr)}return null},vr=_objectSpread$B({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},sr),_r=_objectSpread$B({margin:0},or),Er=!isNil$1(br),Tr=Er?br:"",Rr=clsx("recharts-default-tooltip",fr),Nr=clsx("recharts-tooltip-label",gr);Er&&pr&&ur!==void 0&&ur!==null&&(Tr=pr(br,ur));var Dr=yr?{role:"status","aria-live":"assertive"}:{};return React.createElement("div",_extends$t({className:Rr,style:vr},Dr),React.createElement("p",{className:Nr,style:_r},React.isValidElement(Tr)?Tr:"".concat(Tr)),xr())};function _typeof$J(tr){"@babel/helpers - typeof";return _typeof$J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$J(tr)}function _defineProperty$G(tr,er,rr){return er=_toPropertyKey$H(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$H(tr){var er=_toPrimitive$H(tr,"string");return _typeof$J(er)=="symbol"?er:er+""}function _toPrimitive$H(tr,er){if(_typeof$J(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$J(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(tr){var er=tr.coordinate,rr=tr.translateX,nr=tr.translateY;return clsx(CSS_CLASS_PREFIX,_defineProperty$G(_defineProperty$G(_defineProperty$G(_defineProperty$G({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber(rr)&&er&&isNumber(er.x)&&rr>=er.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber(rr)&&er&&isNumber(er.x)&&rr<er.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber(nr)&&er&&isNumber(er.y)&&nr>=er.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber(nr)&&er&&isNumber(er.y)&&nr<er.y))}function getTooltipTranslateXY(tr){var er=tr.allowEscapeViewBox,rr=tr.coordinate,nr=tr.key,ir=tr.offsetTopLeft,sr=tr.position,ar=tr.reverseDirection,cr=tr.tooltipDimension,lr=tr.viewBox,or=tr.viewBoxDimension;if(sr&&isNumber(sr[nr]))return sr[nr];var ur=rr[nr]-cr-ir,hr=rr[nr]+ir;if(er[nr])return ar[nr]?ur:hr;if(ar[nr]){var dr=ur,fr=lr[nr];return dr<fr?Math.max(hr,lr[nr]):Math.max(ur,lr[nr])}var gr=hr+cr,br=lr[nr]+or;return gr>br?Math.max(ur,lr[nr]):Math.max(hr,lr[nr])}function getTransformStyle(tr){var er=tr.translateX,rr=tr.translateY,nr=tr.useTranslate3d;return{transform:nr?"translate3d(".concat(er,"px, ").concat(rr,"px, 0)"):"translate(".concat(er,"px, ").concat(rr,"px)")}}function getTooltipTranslate(tr){var er=tr.allowEscapeViewBox,rr=tr.coordinate,nr=tr.offsetTopLeft,ir=tr.position,sr=tr.reverseDirection,ar=tr.tooltipBox,cr=tr.useTranslate3d,lr=tr.viewBox,or,ur,hr;return ar.height>0&&ar.width>0&&rr?(ur=getTooltipTranslateXY({allowEscapeViewBox:er,coordinate:rr,key:"x",offsetTopLeft:nr,position:ir,reverseDirection:sr,tooltipDimension:ar.width,viewBox:lr,viewBoxDimension:lr.width}),hr=getTooltipTranslateXY({allowEscapeViewBox:er,coordinate:rr,key:"y",offsetTopLeft:nr,position:ir,reverseDirection:sr,tooltipDimension:ar.height,viewBox:lr,viewBoxDimension:lr.height}),or=getTransformStyle({translateX:ur,translateY:hr,useTranslate3d:cr})):or=TOOLTIP_HIDDEN,{cssProperties:or,cssClasses:getTooltipCSSClassName({translateX:ur,translateY:hr,coordinate:rr})}}function _typeof$I(tr){"@babel/helpers - typeof";return _typeof$I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$I(tr)}function ownKeys$A(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$A(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$A(Object(rr),!0).forEach(function(nr){_defineProperty$F(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$A(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$m(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$m(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$G(nr.key),nr)}}function _createClass$m(tr,er,rr){return er&&_defineProperties$m(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$i(tr,er,rr){return er=_getPrototypeOf$j(er),_possibleConstructorReturn$j(tr,_isNativeReflectConstruct$j()?Reflect.construct(er,rr||[],_getPrototypeOf$j(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$j(tr,er){if(er&&(_typeof$I(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$j(tr)}function _assertThisInitialized$j(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$j(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$j=function(){return!!tr})()}function _getPrototypeOf$j(tr){return _getPrototypeOf$j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$j(tr)}function _inherits$j(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$j(tr,er)}function _setPrototypeOf$j(tr,er){return _setPrototypeOf$j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$j(tr,er)}function _defineProperty$F(tr,er,rr){return er=_toPropertyKey$G(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$G(tr){var er=_toPrimitive$G(tr,"string");return _typeof$I(er)=="symbol"?er:er+""}function _toPrimitive$G(tr,er){if(_typeof$I(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$I(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var EPSILON=1,TooltipBoundingBox=function(tr){function er(){var rr;_classCallCheck$m(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$i(this,er,[].concat(ir)),_defineProperty$F(rr,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$F(rr,"handleKeyDown",function(ar){if(ar.key==="Escape"){var cr,lr,or,ur;rr.setState({dismissed:!0,dismissedAtCoordinate:{x:(cr=(lr=rr.props.coordinate)===null||lr===void 0?void 0:lr.x)!==null&&cr!==void 0?cr:0,y:(or=(ur=rr.props.coordinate)===null||ur===void 0?void 0:ur.y)!==null&&or!==void 0?or:0}})}}),rr}return _inherits$j(er,tr),_createClass$m(er,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var nr=this.wrapperNode.getBoundingClientRect();(Math.abs(nr.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(nr.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:nr.width,height:nr.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var nr,ir;this.props.active&&this.updateBBox(),this.state.dismissed&&(((nr=this.props.coordinate)===null||nr===void 0?void 0:nr.x)!==this.state.dismissedAtCoordinate.x||((ir=this.props.coordinate)===null||ir===void 0?void 0:ir.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var nr=this,ir=this.props,sr=ir.active,ar=ir.allowEscapeViewBox,cr=ir.animationDuration,lr=ir.animationEasing,or=ir.children,ur=ir.coordinate,hr=ir.hasPayload,dr=ir.isAnimationActive,fr=ir.offset,gr=ir.position,br=ir.reverseDirection,pr=ir.useTranslate3d,mr=ir.viewBox,yr=ir.wrapperStyle,xr=getTooltipTranslate({allowEscapeViewBox:ar,coordinate:ur,offsetTopLeft:fr,position:gr,reverseDirection:br,tooltipBox:this.state.lastBoundingBox,useTranslate3d:pr,viewBox:mr}),vr=xr.cssClasses,_r=xr.cssProperties,Er=_objectSpread$A(_objectSpread$A({transition:dr&&sr?"transform ".concat(cr,"ms ").concat(lr):void 0},_r),{},{pointerEvents:"none",visibility:!this.state.dismissed&&sr&&hr?"visible":"hidden",position:"absolute",top:0,left:0},yr);return React.createElement("div",{tabIndex:-1,className:vr,style:Er,ref:function(Rr){nr.wrapperNode=Rr}},or)}}])}(reactExports.PureComponent),parseIsSsrByDefault=function tr(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault()};function _typeof$H(tr){"@babel/helpers - typeof";return _typeof$H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$H(tr)}function ownKeys$z(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$z(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$z(Object(rr),!0).forEach(function(nr){_defineProperty$E(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$z(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$l(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$l(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$F(nr.key),nr)}}function _createClass$l(tr,er,rr){return er&&_defineProperties$l(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$h(tr,er,rr){return er=_getPrototypeOf$i(er),_possibleConstructorReturn$i(tr,_isNativeReflectConstruct$i()?Reflect.construct(er,rr||[],_getPrototypeOf$i(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$i(tr,er){if(er&&(_typeof$H(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$i(tr)}function _assertThisInitialized$i(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$i(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$i=function(){return!!tr})()}function _getPrototypeOf$i(tr){return _getPrototypeOf$i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$i(tr)}function _inherits$i(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$i(tr,er)}function _setPrototypeOf$i(tr,er){return _setPrototypeOf$i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$i(tr,er)}function _defineProperty$E(tr,er,rr){return er=_toPropertyKey$F(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$F(tr){var er=_toPrimitive$F(tr,"string");return _typeof$H(er)=="symbol"?er:er+""}function _toPrimitive$F(tr,er){if(_typeof$H(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$H(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}function defaultUniqBy(tr){return tr.dataKey}function renderContent(tr,er){return React.isValidElement(tr)?React.cloneElement(tr,er):typeof tr=="function"?React.createElement(tr,er):React.createElement(DefaultTooltipContent,er)}var Tooltip=function(tr){function er(){return _classCallCheck$l(this,er),_callSuper$h(this,er,arguments)}return _inherits$i(er,tr),_createClass$l(er,[{key:"render",value:function(){var nr=this,ir=this.props,sr=ir.active,ar=ir.allowEscapeViewBox,cr=ir.animationDuration,lr=ir.animationEasing,or=ir.content,ur=ir.coordinate,hr=ir.filterNull,dr=ir.isAnimationActive,fr=ir.offset,gr=ir.payload,br=ir.payloadUniqBy,pr=ir.position,mr=ir.reverseDirection,yr=ir.useTranslate3d,xr=ir.viewBox,vr=ir.wrapperStyle,_r=gr??[];hr&&_r.length&&(_r=getUniqPayload(gr.filter(function(Tr){return Tr.value!=null&&(Tr.hide!==!0||nr.props.includeHidden)}),br,defaultUniqBy));var Er=_r.length>0;return React.createElement(TooltipBoundingBox,{allowEscapeViewBox:ar,animationDuration:cr,animationEasing:lr,isAnimationActive:dr,active:sr,coordinate:ur,hasPayload:Er,offset:fr,position:pr,reverseDirection:mr,useTranslate3d:yr,viewBox:xr,wrapperStyle:vr},renderContent(or,_objectSpread$z(_objectSpread$z({},this.props),{},{payload:_r})))}}])}(reactExports.PureComponent);_defineProperty$E(Tooltip,"displayName","Tooltip");_defineProperty$E(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var root=_root,now$1=function(){return root.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(tr){for(var er=tr.length;er--&&reWhitespace.test(tr.charAt(er)););return er}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(tr){return tr&&tr.slice(0,trimmedEndIndex(tr)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$2=isObject_1,isSymbol$1=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(tr){if(typeof tr=="number")return tr;if(isSymbol$1(tr))return NAN;if(isObject$2(tr)){var er=typeof tr.valueOf=="function"?tr.valueOf():tr;tr=isObject$2(er)?er+"":er}if(typeof tr!="string")return tr===0?tr:+tr;tr=baseTrim(tr);var rr=reIsBinary.test(tr);return rr||reIsOctal.test(tr)?freeParseInt(tr.slice(2),rr?2:8):reIsBadHex.test(tr)?NAN:+tr}var toNumber_1=toNumber$2,isObject$1=isObject_1,now=now_1,toNumber$1=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax$2=Math.max,nativeMin=Math.min;function debounce$1(tr,er,rr){var nr,ir,sr,ar,cr,lr,or=0,ur=!1,hr=!1,dr=!0;if(typeof tr!="function")throw new TypeError(FUNC_ERROR_TEXT$1);er=toNumber$1(er)||0,isObject$1(rr)&&(ur=!!rr.leading,hr="maxWait"in rr,sr=hr?nativeMax$2(toNumber$1(rr.maxWait)||0,er):sr,dr="trailing"in rr?!!rr.trailing:dr);function fr(Er){var Tr=nr,Rr=ir;return nr=ir=void 0,or=Er,ar=tr.apply(Rr,Tr),ar}function gr(Er){return or=Er,cr=setTimeout(mr,er),ur?fr(Er):ar}function br(Er){var Tr=Er-lr,Rr=Er-or,Nr=er-Tr;return hr?nativeMin(Nr,sr-Rr):Nr}function pr(Er){var Tr=Er-lr,Rr=Er-or;return lr===void 0||Tr>=er||Tr<0||hr&&Rr>=sr}function mr(){var Er=now();if(pr(Er))return yr(Er);cr=setTimeout(mr,br(Er))}function yr(Er){return cr=void 0,dr&&nr?fr(Er):(nr=ir=void 0,ar)}function xr(){cr!==void 0&&clearTimeout(cr),or=0,nr=lr=ir=cr=void 0}function vr(){return cr===void 0?ar:yr(now())}function _r(){var Er=now(),Tr=pr(Er);if(nr=arguments,ir=this,lr=Er,Tr){if(cr===void 0)return gr(lr);if(hr)return clearTimeout(cr),cr=setTimeout(mr,er),fr(lr)}return cr===void 0&&(cr=setTimeout(mr,er)),ar}return _r.cancel=xr,_r.flush=vr,_r}var debounce_1=debounce$1,debounce=debounce_1,isObject=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(tr,er,rr){var nr=!0,ir=!0;if(typeof tr!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject(rr)&&(nr="leading"in rr?!!rr.leading:nr,ir="trailing"in rr?!!rr.trailing:ir),debounce(tr,er,{leading:nr,maxWait:er,trailing:ir})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1);function _typeof$G(tr){"@babel/helpers - typeof";return _typeof$G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$G(tr)}function ownKeys$y(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$y(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$y(Object(rr),!0).forEach(function(nr){_defineProperty$D(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$y(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$D(tr,er,rr){return er=_toPropertyKey$E(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$E(tr){var er=_toPrimitive$E(tr,"string");return _typeof$G(er)=="symbol"?er:er+""}function _toPrimitive$E(tr,er){if(_typeof$G(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$G(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _slicedToArray$b(tr,er){return _arrayWithHoles$c(tr)||_iterableToArrayLimit$b(tr,er)||_unsupportedIterableToArray$k(tr,er)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$k(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$k(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$k(tr,er)}}function _arrayLikeToArray$k(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$b(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$c(tr){if(Array.isArray(tr))return tr}var ResponsiveContainer=reactExports.forwardRef(function(tr,er){var rr=tr.aspect,nr=tr.initialDimension,ir=nr===void 0?{width:-1,height:-1}:nr,sr=tr.width,ar=sr===void 0?"100%":sr,cr=tr.height,lr=cr===void 0?"100%":cr,or=tr.minWidth,ur=or===void 0?0:or,hr=tr.minHeight,dr=tr.maxHeight,fr=tr.children,gr=tr.debounce,br=gr===void 0?0:gr,pr=tr.id,mr=tr.className,yr=tr.onResize,xr=tr.style,vr=xr===void 0?{}:xr,_r=reactExports.useRef(null),Er=reactExports.useRef();Er.current=yr,reactExports.useImperativeHandle(er,function(){return Object.defineProperty(_r.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_r.current},configurable:!0})});var Tr=reactExports.useState({containerWidth:ir.width,containerHeight:ir.height}),Rr=_slicedToArray$b(Tr,2),Nr=Rr[0],Dr=Rr[1],Ir=reactExports.useCallback(function(jr,Lr){Dr(function(Cr){var wr=Math.round(jr),Pr=Math.round(Lr);return Cr.containerWidth===wr&&Cr.containerHeight===Pr?Cr:{containerWidth:wr,containerHeight:Pr}})},[]);reactExports.useEffect(function(){var jr=function(Sr){var Mr,qr=Sr[0].contentRect,$r=qr.width,Br=qr.height;Ir($r,Br),(Mr=Er.current)===null||Mr===void 0||Mr.call(Er,$r,Br)};br>0&&(jr=throttle$1(jr,br,{trailing:!0,leading:!1}));var Lr=new ResizeObserver(jr),Cr=_r.current.getBoundingClientRect(),wr=Cr.width,Pr=Cr.height;return Ir(wr,Pr),Lr.observe(_r.current),function(){Lr.disconnect()}},[Ir,br]);var Or=reactExports.useMemo(function(){var jr=Nr.containerWidth,Lr=Nr.containerHeight;if(jr<0||Lr<0)return null;warn(isPercent(ar)||isPercent(lr),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,ar,lr),warn(!rr||rr>0,"The aspect(%s) must be greater than zero.",rr);var Cr=isPercent(ar)?jr:ar,wr=isPercent(lr)?Lr:lr;rr&&rr>0&&(Cr?wr=Cr/rr:wr&&(Cr=wr*rr),dr&&wr>dr&&(wr=dr)),warn(Cr>0||wr>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Cr,wr,ar,lr,ur,hr,rr);var Pr=!Array.isArray(fr)&&getDisplayName(fr.type).endsWith("Chart");return React.Children.map(fr,function(Ar){return React.isValidElement(Ar)?reactExports.cloneElement(Ar,_objectSpread$y({width:Cr,height:wr},Pr?{style:_objectSpread$y({height:"100%",width:"100%",maxHeight:wr,maxWidth:Cr},Ar.props.style)}:{})):Ar})},[rr,fr,lr,dr,hr,ur,Nr,ar]);return React.createElement("div",{id:pr?"".concat(pr):void 0,className:clsx("recharts-responsive-container",mr),style:_objectSpread$y(_objectSpread$y({},vr),{},{width:ar,height:lr,minWidth:ur,minHeight:hr,maxHeight:dr}),ref:_r},Or)}),Cell=function tr(er){return null};Cell.displayName="Cell";function _typeof$F(tr){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$F(tr)}function ownKeys$x(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$x(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$x(Object(rr),!0).forEach(function(nr){_defineProperty$C(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$x(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$C(tr,er,rr){return er=_toPropertyKey$D(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$D(tr){var er=_toPrimitive$D(tr,"string");return _typeof$F(er)=="symbol"?er:er+""}function _toPrimitive$D(tr,er){if(_typeof$F(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$F(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(tr){var er=_objectSpread$x({},tr);return Object.keys(er).forEach(function(rr){er[rr]||delete er[rr]}),er}var getStringSize=function tr(er){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(er==null||Global.isSsr)return{width:0,height:0};var nr=removeInvalidKeys(rr),ir=JSON.stringify({text:er,copyStyle:nr});if(stringCache.widthCache[ir])return stringCache.widthCache[ir];try{var sr=document.getElementById(MEASUREMENT_SPAN_ID);sr||(sr=document.createElement("span"),sr.setAttribute("id",MEASUREMENT_SPAN_ID),sr.setAttribute("aria-hidden","true"),document.body.appendChild(sr));var ar=_objectSpread$x(_objectSpread$x({},SPAN_STYLE),nr);Object.assign(sr.style,ar),sr.textContent="".concat(er);var cr=sr.getBoundingClientRect(),lr={width:cr.width,height:cr.height};return stringCache.widthCache[ir]=lr,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),lr}catch{return{width:0,height:0}}},getOffset=function tr(er){return{top:er.top+window.scrollY-document.documentElement.clientTop,left:er.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$E(tr){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$E(tr)}function _slicedToArray$a(tr,er){return _arrayWithHoles$b(tr)||_iterableToArrayLimit$a(tr,er)||_unsupportedIterableToArray$j(tr,er)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$j(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$j(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$j(tr,er)}}function _arrayLikeToArray$j(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$a(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er===0){if(Object(rr)!==rr)return;lr=!1}else for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$b(tr){if(Array.isArray(tr))return tr}function _classCallCheck$k(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$k(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$C(nr.key),nr)}}function _createClass$k(tr,er,rr){return er&&_defineProperties$k(tr.prototype,er),rr&&_defineProperties$k(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _toPropertyKey$C(tr){var er=_toPrimitive$C(tr,"string");return _typeof$E(er)=="symbol"?er:er+""}function _toPrimitive$C(tr,er){if(_typeof$E(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$E(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(tr,er){return tr*CONVERSION_RATES[er]}var DecimalCSS=function(){function tr(er,rr){_classCallCheck$k(this,tr),this.num=er,this.unit=rr,this.num=er,this.unit=rr,Number.isNaN(er)&&(this.unit=""),rr!==""&&!CSS_LENGTH_UNIT_REGEX.test(rr)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(rr)&&(this.num=convertToPx(er,rr),this.unit="px")}return _createClass$k(tr,[{key:"add",value:function(rr){return this.unit!==rr.unit?new tr(NaN,""):new tr(this.num+rr.num,this.unit)}},{key:"subtract",value:function(rr){return this.unit!==rr.unit?new tr(NaN,""):new tr(this.num-rr.num,this.unit)}},{key:"multiply",value:function(rr){return this.unit!==""&&rr.unit!==""&&this.unit!==rr.unit?new tr(NaN,""):new tr(this.num*rr.num,this.unit||rr.unit)}},{key:"divide",value:function(rr){return this.unit!==""&&rr.unit!==""&&this.unit!==rr.unit?new tr(NaN,""):new tr(this.num/rr.num,this.unit||rr.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(rr){var nr,ir=(nr=NUM_SPLIT_REGEX.exec(rr))!==null&&nr!==void 0?nr:[],sr=_slicedToArray$a(ir,3),ar=sr[1],cr=sr[2];return new tr(parseFloat(ar),cr??"")}}])}();function calculateArithmetic(tr){if(tr.includes(STR_NAN))return STR_NAN;for(var er=tr;er.includes("*")||er.includes("/");){var rr,nr=(rr=MULTIPLY_OR_DIVIDE_REGEX.exec(er))!==null&&rr!==void 0?rr:[],ir=_slicedToArray$a(nr,4),sr=ir[1],ar=ir[2],cr=ir[3],lr=DecimalCSS.parse(sr??""),or=DecimalCSS.parse(cr??""),ur=ar==="*"?lr.multiply(or):lr.divide(or);if(ur.isNaN())return STR_NAN;er=er.replace(MULTIPLY_OR_DIVIDE_REGEX,ur.toString())}for(;er.includes("+")||/.-\d+(?:\.\d+)?/.test(er);){var hr,dr=(hr=ADD_OR_SUBTRACT_REGEX.exec(er))!==null&&hr!==void 0?hr:[],fr=_slicedToArray$a(dr,4),gr=fr[1],br=fr[2],pr=fr[3],mr=DecimalCSS.parse(gr??""),yr=DecimalCSS.parse(pr??""),xr=br==="+"?mr.add(yr):mr.subtract(yr);if(xr.isNaN())return STR_NAN;er=er.replace(ADD_OR_SUBTRACT_REGEX,xr.toString())}return er}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(tr){for(var er=tr;er.includes("(");){var rr=PARENTHESES_REGEX.exec(er),nr=_slicedToArray$a(rr,2),ir=nr[1];er=er.replace(PARENTHESES_REGEX,calculateArithmetic(ir))}return er}function evaluateExpression(tr){var er=tr.replace(/\s+/g,"");return er=calculateParentheses(er),er=calculateArithmetic(er),er}function safeEvaluateExpression(tr){try{return evaluateExpression(tr)}catch{return STR_NAN}}function reduceCSSCalc(tr){var er=safeEvaluateExpression(tr.slice(5,-1));return er===STR_NAN?"":er}var _excluded$g=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$7=["dx","dy","angle","className","breakAll"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$s.apply(this,arguments)}function _objectWithoutProperties$g(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$g(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$g(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _slicedToArray$9(tr,er){return _arrayWithHoles$a(tr)||_iterableToArrayLimit$9(tr,er)||_unsupportedIterableToArray$i(tr,er)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$i(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$i(tr,er)}}function _arrayLikeToArray$i(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$9(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er===0){if(Object(rr)!==rr)return;lr=!1}else for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$a(tr){if(Array.isArray(tr))return tr}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function tr(er){var rr=er.children,nr=er.breakAll,ir=er.style;try{var sr=[];isNil$1(rr)||(nr?sr=rr.toString().split(""):sr=rr.toString().split(BREAKING_SPACES));var ar=sr.map(function(lr){return{word:lr,width:getStringSize(lr,ir).width}}),cr=nr?0:getStringSize("",ir).width;return{wordsWithComputedWidth:ar,spaceWidth:cr}}catch{return null}},calculateWordsByLines=function tr(er,rr,nr,ir,sr){var ar=er.maxLines,cr=er.children,lr=er.style,or=er.breakAll,ur=isNumber(ar),hr=cr,dr=function(){var Cr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Cr.reduce(function(wr,Pr){var Ar=Pr.word,Sr=Pr.width,Mr=wr[wr.length-1];if(Mr&&(ir==null||sr||Mr.width+Sr+nr<Number(ir)))Mr.words.push(Ar),Mr.width+=Sr+nr;else{var qr={words:[Ar],width:Sr};wr.push(qr)}return wr},[])},fr=dr(rr),gr=function(Cr){return Cr.reduce(function(wr,Pr){return wr.width>Pr.width?wr:Pr})};if(!ur)return fr;for(var br="",pr=function(Cr){var wr=hr.slice(0,Cr),Pr=calculateWordWidths({breakAll:or,style:lr,children:wr+br}).wordsWithComputedWidth,Ar=dr(Pr),Sr=Ar.length>ar||gr(Ar).width>Number(ir);return[Sr,Ar]},mr=0,yr=hr.length-1,xr=0,vr;mr<=yr&&xr<=hr.length-1;){var _r=Math.floor((mr+yr)/2),Er=_r-1,Tr=pr(Er),Rr=_slicedToArray$9(Tr,2),Nr=Rr[0],Dr=Rr[1],Ir=pr(_r),Or=_slicedToArray$9(Ir,1),jr=Or[0];if(!Nr&&!jr&&(mr=_r+1),Nr&&jr&&(yr=_r-1),!Nr&&jr){vr=Dr;break}xr++}return vr||fr},getWordsWithoutCalculate=function tr(er){var rr=isNil$1(er)?[]:er.toString().split(BREAKING_SPACES);return[{words:rr}]},getWordsByLines=function tr(er){var rr=er.width,nr=er.scaleToFit,ir=er.children,sr=er.style,ar=er.breakAll,cr=er.maxLines;if((rr||nr)&&!Global.isSsr){var lr,or,ur=calculateWordWidths({breakAll:ar,children:ir,style:sr});if(ur){var hr=ur.wordsWithComputedWidth,dr=ur.spaceWidth;lr=hr,or=dr}else return getWordsWithoutCalculate(ir);return calculateWordsByLines({breakAll:ar,children:ir,maxLines:cr,style:sr},lr,or,rr,nr)}return getWordsWithoutCalculate(ir)},DEFAULT_FILL="#808080",Text=function tr(er){var rr=er.x,nr=rr===void 0?0:rr,ir=er.y,sr=ir===void 0?0:ir,ar=er.lineHeight,cr=ar===void 0?"1em":ar,lr=er.capHeight,or=lr===void 0?"0.71em":lr,ur=er.scaleToFit,hr=ur===void 0?!1:ur,dr=er.textAnchor,fr=dr===void 0?"start":dr,gr=er.verticalAnchor,br=gr===void 0?"end":gr,pr=er.fill,mr=pr===void 0?DEFAULT_FILL:pr,yr=_objectWithoutProperties$g(er,_excluded$g),xr=reactExports.useMemo(function(){return getWordsByLines({breakAll:yr.breakAll,children:yr.children,maxLines:yr.maxLines,scaleToFit:hr,style:yr.style,width:yr.width})},[yr.breakAll,yr.children,yr.maxLines,hr,yr.style,yr.width]),vr=yr.dx,_r=yr.dy,Er=yr.angle,Tr=yr.className,Rr=yr.breakAll,Nr=_objectWithoutProperties$g(yr,_excluded2$7);if(!isNumOrStr(nr)||!isNumOrStr(sr))return null;var Dr=nr+(isNumber(vr)?vr:0),Ir=sr+(isNumber(_r)?_r:0),Or;switch(br){case"start":Or=reduceCSSCalc("calc(".concat(or,")"));break;case"middle":Or=reduceCSSCalc("calc(".concat((xr.length-1)/2," * -").concat(cr," + (").concat(or," / 2))"));break;default:Or=reduceCSSCalc("calc(".concat(xr.length-1," * -").concat(cr,")"));break}var jr=[];if(hr){var Lr=xr[0].width,Cr=yr.width;jr.push("scale(".concat((isNumber(Cr)?Cr/Lr:1)/Lr,")"))}return Er&&jr.push("rotate(".concat(Er,", ").concat(Dr,", ").concat(Ir,")")),jr.length&&(Nr.transform=jr.join(" ")),React.createElement("text",_extends$s({},filterProps(Nr,!0),{x:Dr,y:Ir,className:clsx("recharts-text",Tr),textAnchor:fr,fill:mr.includes("url")?DEFAULT_FILL:mr}),xr.map(function(wr,Pr){var Ar=wr.words.join(Rr?"":" ");return React.createElement("tspan",{x:Dr,dy:Pr===0?Or:cr,key:"".concat(Ar,"-").concat(Pr)},Ar)}))};function ascending(tr,er){return tr==null||er==null?NaN:tr<er?-1:tr>er?1:tr>=er?0:NaN}function descending(tr,er){return tr==null||er==null?NaN:er<tr?-1:er>tr?1:er>=tr?0:NaN}function bisector(tr){let er,rr,nr;tr.length!==2?(er=ascending,rr=(cr,lr)=>ascending(tr(cr),lr),nr=(cr,lr)=>tr(cr)-lr):(er=tr===ascending||tr===descending?tr:zero$1,rr=tr,nr=tr);function ir(cr,lr,or=0,ur=cr.length){if(or<ur){if(er(lr,lr)!==0)return ur;do{const hr=or+ur>>>1;rr(cr[hr],lr)<0?or=hr+1:ur=hr}while(or<ur)}return or}function sr(cr,lr,or=0,ur=cr.length){if(or<ur){if(er(lr,lr)!==0)return ur;do{const hr=or+ur>>>1;rr(cr[hr],lr)<=0?or=hr+1:ur=hr}while(or<ur)}return or}function ar(cr,lr,or=0,ur=cr.length){const hr=ir(cr,lr,or,ur-1);return hr>or&&nr(cr[hr-1],lr)>-nr(cr[hr],lr)?hr-1:hr}return{left:ir,center:ar,right:sr}}function zero$1(){return 0}function number$2(tr){return tr===null?NaN:+tr}function*numbers(tr,er){for(let rr of tr)rr!=null&&(rr=+rr)>=rr&&(yield rr)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(er,rr=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:rr}}),er!=null)for(const[nr,ir]of er)this.set(nr,ir)}get(er){return super.get(intern_get(this,er))}has(er){return super.has(intern_get(this,er))}set(er,rr){return super.set(intern_set(this,er),rr)}delete(er){return super.delete(intern_delete(this,er))}}function intern_get({_intern:tr,_key:er},rr){const nr=er(rr);return tr.has(nr)?tr.get(nr):rr}function intern_set({_intern:tr,_key:er},rr){const nr=er(rr);return tr.has(nr)?tr.get(nr):(tr.set(nr,rr),rr)}function intern_delete({_intern:tr,_key:er},rr){const nr=er(rr);return tr.has(nr)&&(rr=tr.get(nr),tr.delete(nr)),rr}function keyof(tr){return tr!==null&&typeof tr=="object"?tr.valueOf():tr}function compareDefined(tr=ascending){if(tr===ascending)return ascendingDefined;if(typeof tr!="function")throw new TypeError("compare is not a function");return(er,rr)=>{const nr=tr(er,rr);return nr||nr===0?nr:(tr(rr,rr)===0)-(tr(er,er)===0)}}function ascendingDefined(tr,er){return(tr==null||!(tr>=tr))-(er==null||!(er>=er))||(tr<er?-1:tr>er?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(tr,er,rr){const nr=(er-tr)/Math.max(0,rr),ir=Math.floor(Math.log10(nr)),sr=nr/Math.pow(10,ir),ar=sr>=e10?10:sr>=e5?5:sr>=e2?2:1;let cr,lr,or;return ir<0?(or=Math.pow(10,-ir)/ar,cr=Math.round(tr*or),lr=Math.round(er*or),cr/or<tr&&++cr,lr/or>er&&--lr,or=-or):(or=Math.pow(10,ir)*ar,cr=Math.round(tr/or),lr=Math.round(er/or),cr*or<tr&&++cr,lr*or>er&&--lr),lr<cr&&.5<=rr&&rr<2?tickSpec(tr,er,rr*2):[cr,lr,or]}function ticks(tr,er,rr){if(er=+er,tr=+tr,rr=+rr,!(rr>0))return[];if(tr===er)return[tr];const nr=er<tr,[ir,sr,ar]=nr?tickSpec(er,tr,rr):tickSpec(tr,er,rr);if(!(sr>=ir))return[];const cr=sr-ir+1,lr=new Array(cr);if(nr)if(ar<0)for(let or=0;or<cr;++or)lr[or]=(sr-or)/-ar;else for(let or=0;or<cr;++or)lr[or]=(sr-or)*ar;else if(ar<0)for(let or=0;or<cr;++or)lr[or]=(ir+or)/-ar;else for(let or=0;or<cr;++or)lr[or]=(ir+or)*ar;return lr}function tickIncrement(tr,er,rr){return er=+er,tr=+tr,rr=+rr,tickSpec(tr,er,rr)[2]}function tickStep(tr,er,rr){er=+er,tr=+tr,rr=+rr;const nr=er<tr,ir=nr?tickIncrement(er,tr,rr):tickIncrement(tr,er,rr);return(nr?-1:1)*(ir<0?1/-ir:ir)}function max$3(tr,er){let rr;for(const nr of tr)nr!=null&&(rr<nr||rr===void 0&&nr>=nr)&&(rr=nr);return rr}function min$2(tr,er){let rr;for(const nr of tr)nr!=null&&(rr>nr||rr===void 0&&nr>=nr)&&(rr=nr);return rr}function quickselect(tr,er,rr=0,nr=1/0,ir){if(er=Math.floor(er),rr=Math.floor(Math.max(0,rr)),nr=Math.floor(Math.min(tr.length-1,nr)),!(rr<=er&&er<=nr))return tr;for(ir=ir===void 0?ascendingDefined:compareDefined(ir);nr>rr;){if(nr-rr>600){const lr=nr-rr+1,or=er-rr+1,ur=Math.log(lr),hr=.5*Math.exp(2*ur/3),dr=.5*Math.sqrt(ur*hr*(lr-hr)/lr)*(or-lr/2<0?-1:1),fr=Math.max(rr,Math.floor(er-or*hr/lr+dr)),gr=Math.min(nr,Math.floor(er+(lr-or)*hr/lr+dr));quickselect(tr,er,fr,gr,ir)}const sr=tr[er];let ar=rr,cr=nr;for(swap(tr,rr,er),ir(tr[nr],sr)>0&&swap(tr,rr,nr);ar<cr;){for(swap(tr,ar,cr),++ar,--cr;ir(tr[ar],sr)<0;)++ar;for(;ir(tr[cr],sr)>0;)--cr}ir(tr[rr],sr)===0?swap(tr,rr,cr):(++cr,swap(tr,cr,nr)),cr<=er&&(rr=cr+1),er<=cr&&(nr=cr-1)}return tr}function swap(tr,er,rr){const nr=tr[er];tr[er]=tr[rr],tr[rr]=nr}function quantile$1(tr,er,rr){if(tr=Float64Array.from(numbers(tr)),!(!(nr=tr.length)||isNaN(er=+er))){if(er<=0||nr<2)return min$2(tr);if(er>=1)return max$3(tr);var nr,ir=(nr-1)*er,sr=Math.floor(ir),ar=max$3(quickselect(tr,sr).subarray(0,sr+1)),cr=min$2(tr.subarray(sr+1));return ar+(cr-ar)*(ir-sr)}}function quantileSorted(tr,er,rr=number$2){if(!(!(nr=tr.length)||isNaN(er=+er))){if(er<=0||nr<2)return+rr(tr[0],0,tr);if(er>=1)return+rr(tr[nr-1],nr-1,tr);var nr,ir=(nr-1)*er,sr=Math.floor(ir),ar=+rr(tr[sr],sr,tr),cr=+rr(tr[sr+1],sr+1,tr);return ar+(cr-ar)*(ir-sr)}}function range$3(tr,er,rr){tr=+tr,er=+er,rr=(ir=arguments.length)<2?(er=tr,tr=0,1):ir<3?1:+rr;for(var nr=-1,ir=Math.max(0,Math.ceil((er-tr)/rr))|0,sr=new Array(ir);++nr<ir;)sr[nr]=tr+nr*rr;return sr}function initRange(tr,er){switch(arguments.length){case 0:break;case 1:this.range(tr);break;default:this.range(er).domain(tr);break}return this}function initInterpolator(tr,er){switch(arguments.length){case 0:break;case 1:{typeof tr=="function"?this.interpolator(tr):this.range(tr);break}default:{this.domain(tr),typeof er=="function"?this.interpolator(er):this.range(er);break}}return this}const implicit=Symbol("implicit");function ordinal(){var tr=new InternMap,er=[],rr=[],nr=implicit;function ir(sr){let ar=tr.get(sr);if(ar===void 0){if(nr!==implicit)return nr;tr.set(sr,ar=er.push(sr)-1)}return rr[ar%rr.length]}return ir.domain=function(sr){if(!arguments.length)return er.slice();er=[],tr=new InternMap;for(const ar of sr)tr.has(ar)||tr.set(ar,er.push(ar)-1);return ir},ir.range=function(sr){return arguments.length?(rr=Array.from(sr),ir):rr.slice()},ir.unknown=function(sr){return arguments.length?(nr=sr,ir):nr},ir.copy=function(){return ordinal(er,rr).unknown(nr)},initRange.apply(ir,arguments),ir}function band(){var tr=ordinal().unknown(void 0),er=tr.domain,rr=tr.range,nr=0,ir=1,sr,ar,cr=!1,lr=0,or=0,ur=.5;delete tr.unknown;function hr(){var dr=er().length,fr=ir<nr,gr=fr?ir:nr,br=fr?nr:ir;sr=(br-gr)/Math.max(1,dr-lr+or*2),cr&&(sr=Math.floor(sr)),gr+=(br-gr-sr*(dr-lr))*ur,ar=sr*(1-lr),cr&&(gr=Math.round(gr),ar=Math.round(ar));var pr=range$3(dr).map(function(mr){return gr+sr*mr});return rr(fr?pr.reverse():pr)}return tr.domain=function(dr){return arguments.length?(er(dr),hr()):er()},tr.range=function(dr){return arguments.length?([nr,ir]=dr,nr=+nr,ir=+ir,hr()):[nr,ir]},tr.rangeRound=function(dr){return[nr,ir]=dr,nr=+nr,ir=+ir,cr=!0,hr()},tr.bandwidth=function(){return ar},tr.step=function(){return sr},tr.round=function(dr){return arguments.length?(cr=!!dr,hr()):cr},tr.padding=function(dr){return arguments.length?(lr=Math.min(1,or=+dr),hr()):lr},tr.paddingInner=function(dr){return arguments.length?(lr=Math.min(1,dr),hr()):lr},tr.paddingOuter=function(dr){return arguments.length?(or=+dr,hr()):or},tr.align=function(dr){return arguments.length?(ur=Math.max(0,Math.min(1,dr)),hr()):ur},tr.copy=function(){return band(er(),[nr,ir]).round(cr).paddingInner(lr).paddingOuter(or).align(ur)},initRange.apply(hr(),arguments)}function pointish(tr){var er=tr.copy;return tr.padding=tr.paddingOuter,delete tr.paddingInner,delete tr.paddingOuter,tr.copy=function(){return pointish(er())},tr}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(tr,er,rr){tr.prototype=er.prototype=rr,rr.constructor=tr}function extend(tr,er){var rr=Object.create(tr.prototype);for(var nr in er)rr[nr]=er[nr];return rr}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(tr){return Object.assign(new this.constructor,this,tr)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(tr){var er,rr;return tr=(tr+"").trim().toLowerCase(),(er=reHex.exec(tr))?(rr=er[1].length,er=parseInt(er[1],16),rr===6?rgbn(er):rr===3?new Rgb(er>>8&15|er>>4&240,er>>4&15|er&240,(er&15)<<4|er&15,1):rr===8?rgba(er>>24&255,er>>16&255,er>>8&255,(er&255)/255):rr===4?rgba(er>>12&15|er>>8&240,er>>8&15|er>>4&240,er>>4&15|er&240,((er&15)<<4|er&15)/255):null):(er=reRgbInteger.exec(tr))?new Rgb(er[1],er[2],er[3],1):(er=reRgbPercent.exec(tr))?new Rgb(er[1]*255/100,er[2]*255/100,er[3]*255/100,1):(er=reRgbaInteger.exec(tr))?rgba(er[1],er[2],er[3],er[4]):(er=reRgbaPercent.exec(tr))?rgba(er[1]*255/100,er[2]*255/100,er[3]*255/100,er[4]):(er=reHslPercent.exec(tr))?hsla(er[1],er[2]/100,er[3]/100,1):(er=reHslaPercent.exec(tr))?hsla(er[1],er[2]/100,er[3]/100,er[4]):named.hasOwnProperty(tr)?rgbn(named[tr]):tr==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(tr){return new Rgb(tr>>16&255,tr>>8&255,tr&255,1)}function rgba(tr,er,rr,nr){return nr<=0&&(tr=er=rr=NaN),new Rgb(tr,er,rr,nr)}function rgbConvert(tr){return tr instanceof Color||(tr=color(tr)),tr?(tr=tr.rgb(),new Rgb(tr.r,tr.g,tr.b,tr.opacity)):new Rgb}function rgb$1(tr,er,rr,nr){return arguments.length===1?rgbConvert(tr):new Rgb(tr,er,rr,nr??1)}function Rgb(tr,er,rr,nr){this.r=+tr,this.g=+er,this.b=+rr,this.opacity=+nr}define(Rgb,rgb$1,extend(Color,{brighter(tr){return tr=tr==null?brighter:Math.pow(brighter,tr),new Rgb(this.r*tr,this.g*tr,this.b*tr,this.opacity)},darker(tr){return tr=tr==null?darker:Math.pow(darker,tr),new Rgb(this.r*tr,this.g*tr,this.b*tr,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const tr=clampa(this.opacity);return`${tr===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${tr===1?")":`, ${tr})`}`}function clampa(tr){return isNaN(tr)?1:Math.max(0,Math.min(1,tr))}function clampi(tr){return Math.max(0,Math.min(255,Math.round(tr)||0))}function hex(tr){return tr=clampi(tr),(tr<16?"0":"")+tr.toString(16)}function hsla(tr,er,rr,nr){return nr<=0?tr=er=rr=NaN:rr<=0||rr>=1?tr=er=NaN:er<=0&&(tr=NaN),new Hsl(tr,er,rr,nr)}function hslConvert(tr){if(tr instanceof Hsl)return new Hsl(tr.h,tr.s,tr.l,tr.opacity);if(tr instanceof Color||(tr=color(tr)),!tr)return new Hsl;if(tr instanceof Hsl)return tr;tr=tr.rgb();var er=tr.r/255,rr=tr.g/255,nr=tr.b/255,ir=Math.min(er,rr,nr),sr=Math.max(er,rr,nr),ar=NaN,cr=sr-ir,lr=(sr+ir)/2;return cr?(er===sr?ar=(rr-nr)/cr+(rr<nr)*6:rr===sr?ar=(nr-er)/cr+2:ar=(er-rr)/cr+4,cr/=lr<.5?sr+ir:2-sr-ir,ar*=60):cr=lr>0&&lr<1?0:ar,new Hsl(ar,cr,lr,tr.opacity)}function hsl(tr,er,rr,nr){return arguments.length===1?hslConvert(tr):new Hsl(tr,er,rr,nr??1)}function Hsl(tr,er,rr,nr){this.h=+tr,this.s=+er,this.l=+rr,this.opacity=+nr}define(Hsl,hsl,extend(Color,{brighter(tr){return tr=tr==null?brighter:Math.pow(brighter,tr),new Hsl(this.h,this.s,this.l*tr,this.opacity)},darker(tr){return tr=tr==null?darker:Math.pow(darker,tr),new Hsl(this.h,this.s,this.l*tr,this.opacity)},rgb(){var tr=this.h%360+(this.h<0)*360,er=isNaN(tr)||isNaN(this.s)?0:this.s,rr=this.l,nr=rr+(rr<.5?rr:1-rr)*er,ir=2*rr-nr;return new Rgb(hsl2rgb(tr>=240?tr-240:tr+120,ir,nr),hsl2rgb(tr,ir,nr),hsl2rgb(tr<120?tr+240:tr-120,ir,nr),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const tr=clampa(this.opacity);return`${tr===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${tr===1?")":`, ${tr})`}`}}));function clamph(tr){return tr=(tr||0)%360,tr<0?tr+360:tr}function clampt(tr){return Math.max(0,Math.min(1,tr||0))}function hsl2rgb(tr,er,rr){return(tr<60?er+(rr-er)*tr/60:tr<180?rr:tr<240?er+(rr-er)*(240-tr)/60:er)*255}const constant=tr=>()=>tr;function linear$1(tr,er){return function(rr){return tr+rr*er}}function exponential(tr,er,rr){return tr=Math.pow(tr,rr),er=Math.pow(er,rr)-tr,rr=1/rr,function(nr){return Math.pow(tr+nr*er,rr)}}function gamma(tr){return(tr=+tr)==1?nogamma:function(er,rr){return rr-er?exponential(er,rr,tr):constant(isNaN(er)?rr:er)}}function nogamma(tr,er){var rr=er-tr;return rr?linear$1(tr,rr):constant(isNaN(tr)?er:tr)}const rgb=function tr(er){var rr=gamma(er);function nr(ir,sr){var ar=rr((ir=rgb$1(ir)).r,(sr=rgb$1(sr)).r),cr=rr(ir.g,sr.g),lr=rr(ir.b,sr.b),or=nogamma(ir.opacity,sr.opacity);return function(ur){return ir.r=ar(ur),ir.g=cr(ur),ir.b=lr(ur),ir.opacity=or(ur),ir+""}}return nr.gamma=tr,nr}(1);function numberArray(tr,er){er||(er=[]);var rr=tr?Math.min(er.length,tr.length):0,nr=er.slice(),ir;return function(sr){for(ir=0;ir<rr;++ir)nr[ir]=tr[ir]*(1-sr)+er[ir]*sr;return nr}}function isNumberArray(tr){return ArrayBuffer.isView(tr)&&!(tr instanceof DataView)}function genericArray(tr,er){var rr=er?er.length:0,nr=tr?Math.min(rr,tr.length):0,ir=new Array(nr),sr=new Array(rr),ar;for(ar=0;ar<nr;++ar)ir[ar]=interpolate(tr[ar],er[ar]);for(;ar<rr;++ar)sr[ar]=er[ar];return function(cr){for(ar=0;ar<nr;++ar)sr[ar]=ir[ar](cr);return sr}}function date$1(tr,er){var rr=new Date;return tr=+tr,er=+er,function(nr){return rr.setTime(tr*(1-nr)+er*nr),rr}}function interpolateNumber$1(tr,er){return tr=+tr,er=+er,function(rr){return tr*(1-rr)+er*rr}}function object(tr,er){var rr={},nr={},ir;(tr===null||typeof tr!="object")&&(tr={}),(er===null||typeof er!="object")&&(er={});for(ir in er)ir in tr?rr[ir]=interpolate(tr[ir],er[ir]):nr[ir]=er[ir];return function(sr){for(ir in rr)nr[ir]=rr[ir](sr);return nr}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(tr){return function(){return tr}}function one(tr){return function(er){return tr(er)+""}}function string(tr,er){var rr=reA.lastIndex=reB.lastIndex=0,nr,ir,sr,ar=-1,cr=[],lr=[];for(tr=tr+"",er=er+"";(nr=reA.exec(tr))&&(ir=reB.exec(er));)(sr=ir.index)>rr&&(sr=er.slice(rr,sr),cr[ar]?cr[ar]+=sr:cr[++ar]=sr),(nr=nr[0])===(ir=ir[0])?cr[ar]?cr[ar]+=ir:cr[++ar]=ir:(cr[++ar]=null,lr.push({i:ar,x:interpolateNumber$1(nr,ir)})),rr=reB.lastIndex;return rr<er.length&&(sr=er.slice(rr),cr[ar]?cr[ar]+=sr:cr[++ar]=sr),cr.length<2?lr[0]?one(lr[0].x):zero(er):(er=lr.length,function(or){for(var ur=0,hr;ur<er;++ur)cr[(hr=lr[ur]).i]=hr.x(or);return cr.join("")})}function interpolate(tr,er){var rr=typeof er,nr;return er==null||rr==="boolean"?constant(er):(rr==="number"?interpolateNumber$1:rr==="string"?(nr=color(er))?(er=nr,rgb):string:er instanceof color?rgb:er instanceof Date?date$1:isNumberArray(er)?numberArray:Array.isArray(er)?genericArray:typeof er.valueOf!="function"&&typeof er.toString!="function"||isNaN(er)?object:interpolateNumber$1)(tr,er)}function interpolateRound(tr,er){return tr=+tr,er=+er,function(rr){return Math.round(tr*(1-rr)+er*rr)}}function piecewise(tr,er){er===void 0&&(er=tr,tr=interpolate);for(var rr=0,nr=er.length-1,ir=er[0],sr=new Array(nr<0?0:nr);rr<nr;)sr[rr]=tr(ir,ir=er[++rr]);return function(ar){var cr=Math.max(0,Math.min(nr-1,Math.floor(ar*=nr)));return sr[cr](ar-cr)}}function constants(tr){return function(){return tr}}function number$1(tr){return+tr}var unit=[0,1];function identity$6(tr){return tr}function normalize$1(tr,er){return(er-=tr=+tr)?function(rr){return(rr-tr)/er}:constants(isNaN(er)?NaN:.5)}function clamper(tr,er){var rr;return tr>er&&(rr=tr,tr=er,er=rr),function(nr){return Math.max(tr,Math.min(er,nr))}}function bimap(tr,er,rr){var nr=tr[0],ir=tr[1],sr=er[0],ar=er[1];return ir<nr?(nr=normalize$1(ir,nr),sr=rr(ar,sr)):(nr=normalize$1(nr,ir),sr=rr(sr,ar)),function(cr){return sr(nr(cr))}}function polymap(tr,er,rr){var nr=Math.min(tr.length,er.length)-1,ir=new Array(nr),sr=new Array(nr),ar=-1;for(tr[nr]<tr[0]&&(tr=tr.slice().reverse(),er=er.slice().reverse());++ar<nr;)ir[ar]=normalize$1(tr[ar],tr[ar+1]),sr[ar]=rr(er[ar],er[ar+1]);return function(cr){var lr=bisectRight(tr,cr,1,nr)-1;return sr[lr](ir[lr](cr))}}function copy$1(tr,er){return er.domain(tr.domain()).range(tr.range()).interpolate(tr.interpolate()).clamp(tr.clamp()).unknown(tr.unknown())}function transformer$2(){var tr=unit,er=unit,rr=interpolate,nr,ir,sr,ar=identity$6,cr,lr,or;function ur(){var dr=Math.min(tr.length,er.length);return ar!==identity$6&&(ar=clamper(tr[0],tr[dr-1])),cr=dr>2?polymap:bimap,lr=or=null,hr}function hr(dr){return dr==null||isNaN(dr=+dr)?sr:(lr||(lr=cr(tr.map(nr),er,rr)))(nr(ar(dr)))}return hr.invert=function(dr){return ar(ir((or||(or=cr(er,tr.map(nr),interpolateNumber$1)))(dr)))},hr.domain=function(dr){return arguments.length?(tr=Array.from(dr,number$1),ur()):tr.slice()},hr.range=function(dr){return arguments.length?(er=Array.from(dr),ur()):er.slice()},hr.rangeRound=function(dr){return er=Array.from(dr),rr=interpolateRound,ur()},hr.clamp=function(dr){return arguments.length?(ar=dr?!0:identity$6,ur()):ar!==identity$6},hr.interpolate=function(dr){return arguments.length?(rr=dr,ur()):rr},hr.unknown=function(dr){return arguments.length?(sr=dr,hr):sr},function(dr,fr){return nr=dr,ir=fr,ur()}}function continuous(){return transformer$2()(identity$6,identity$6)}function formatDecimal(tr){return Math.abs(tr=Math.round(tr))>=1e21?tr.toLocaleString("en").replace(/,/g,""):tr.toString(10)}function formatDecimalParts(tr,er){if((rr=(tr=er?tr.toExponential(er-1):tr.toExponential()).indexOf("e"))<0)return null;var rr,nr=tr.slice(0,rr);return[nr.length>1?nr[0]+nr.slice(2):nr,+tr.slice(rr+1)]}function exponent(tr){return tr=formatDecimalParts(Math.abs(tr)),tr?tr[1]:NaN}function formatGroup(tr,er){return function(rr,nr){for(var ir=rr.length,sr=[],ar=0,cr=tr[0],lr=0;ir>0&&cr>0&&(lr+cr+1>nr&&(cr=Math.max(1,nr-lr)),sr.push(rr.substring(ir-=cr,ir+cr)),!((lr+=cr+1)>nr));)cr=tr[ar=(ar+1)%tr.length];return sr.reverse().join(er)}}function formatNumerals(tr){return function(er){return er.replace(/[0-9]/g,function(rr){return tr[+rr]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(tr){if(!(er=re$1.exec(tr)))throw new Error("invalid format: "+tr);var er;return new FormatSpecifier({fill:er[1],align:er[2],sign:er[3],symbol:er[4],zero:er[5],width:er[6],comma:er[7],precision:er[8]&&er[8].slice(1),trim:er[9],type:er[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(tr){this.fill=tr.fill===void 0?" ":tr.fill+"",this.align=tr.align===void 0?">":tr.align+"",this.sign=tr.sign===void 0?"-":tr.sign+"",this.symbol=tr.symbol===void 0?"":tr.symbol+"",this.zero=!!tr.zero,this.width=tr.width===void 0?void 0:+tr.width,this.comma=!!tr.comma,this.precision=tr.precision===void 0?void 0:+tr.precision,this.trim=!!tr.trim,this.type=tr.type===void 0?"":tr.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(tr){e:for(var er=tr.length,rr=1,nr=-1,ir;rr<er;++rr)switch(tr[rr]){case".":nr=ir=rr;break;case"0":nr===0&&(nr=rr),ir=rr;break;default:if(!+tr[rr])break e;nr>0&&(nr=0);break}return nr>0?tr.slice(0,nr)+tr.slice(ir+1):tr}var prefixExponent;function formatPrefixAuto(tr,er){var rr=formatDecimalParts(tr,er);if(!rr)return tr+"";var nr=rr[0],ir=rr[1],sr=ir-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(ir/3)))*3)+1,ar=nr.length;return sr===ar?nr:sr>ar?nr+new Array(sr-ar+1).join("0"):sr>0?nr.slice(0,sr)+"."+nr.slice(sr):"0."+new Array(1-sr).join("0")+formatDecimalParts(tr,Math.max(0,er+sr-1))[0]}function formatRounded(tr,er){var rr=formatDecimalParts(tr,er);if(!rr)return tr+"";var nr=rr[0],ir=rr[1];return ir<0?"0."+new Array(-ir).join("0")+nr:nr.length>ir+1?nr.slice(0,ir+1)+"."+nr.slice(ir+1):nr+new Array(ir-nr.length+2).join("0")}const formatTypes={"%":(tr,er)=>(tr*100).toFixed(er),b:tr=>Math.round(tr).toString(2),c:tr=>tr+"",d:formatDecimal,e:(tr,er)=>tr.toExponential(er),f:(tr,er)=>tr.toFixed(er),g:(tr,er)=>tr.toPrecision(er),o:tr=>Math.round(tr).toString(8),p:(tr,er)=>formatRounded(tr*100,er),r:formatRounded,s:formatPrefixAuto,X:tr=>Math.round(tr).toString(16).toUpperCase(),x:tr=>Math.round(tr).toString(16)};function identity$5(tr){return tr}var map$3=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(tr){var er=tr.grouping===void 0||tr.thousands===void 0?identity$5:formatGroup(map$3.call(tr.grouping,Number),tr.thousands+""),rr=tr.currency===void 0?"":tr.currency[0]+"",nr=tr.currency===void 0?"":tr.currency[1]+"",ir=tr.decimal===void 0?".":tr.decimal+"",sr=tr.numerals===void 0?identity$5:formatNumerals(map$3.call(tr.numerals,String)),ar=tr.percent===void 0?"%":tr.percent+"",cr=tr.minus===void 0?"":tr.minus+"",lr=tr.nan===void 0?"NaN":tr.nan+"";function or(hr){hr=formatSpecifier(hr);var dr=hr.fill,fr=hr.align,gr=hr.sign,br=hr.symbol,pr=hr.zero,mr=hr.width,yr=hr.comma,xr=hr.precision,vr=hr.trim,_r=hr.type;_r==="n"?(yr=!0,_r="g"):formatTypes[_r]||(xr===void 0&&(xr=12),vr=!0,_r="g"),(pr||dr==="0"&&fr==="=")&&(pr=!0,dr="0",fr="=");var Er=br==="$"?rr:br==="#"&&/[boxX]/.test(_r)?"0"+_r.toLowerCase():"",Tr=br==="$"?nr:/[%p]/.test(_r)?ar:"",Rr=formatTypes[_r],Nr=/[defgprs%]/.test(_r);xr=xr===void 0?6:/[gprs]/.test(_r)?Math.max(1,Math.min(21,xr)):Math.max(0,Math.min(20,xr));function Dr(Ir){var Or=Er,jr=Tr,Lr,Cr,wr;if(_r==="c")jr=Rr(Ir)+jr,Ir="";else{Ir=+Ir;var Pr=Ir<0||1/Ir<0;if(Ir=isNaN(Ir)?lr:Rr(Math.abs(Ir),xr),vr&&(Ir=formatTrim(Ir)),Pr&&+Ir==0&&gr!=="+"&&(Pr=!1),Or=(Pr?gr==="("?gr:cr:gr==="-"||gr==="("?"":gr)+Or,jr=(_r==="s"?prefixes[8+prefixExponent/3]:"")+jr+(Pr&&gr==="("?")":""),Nr){for(Lr=-1,Cr=Ir.length;++Lr<Cr;)if(wr=Ir.charCodeAt(Lr),48>wr||wr>57){jr=(wr===46?ir+Ir.slice(Lr+1):Ir.slice(Lr))+jr,Ir=Ir.slice(0,Lr);break}}}yr&&!pr&&(Ir=er(Ir,1/0));var Ar=Or.length+Ir.length+jr.length,Sr=Ar<mr?new Array(mr-Ar+1).join(dr):"";switch(yr&&pr&&(Ir=er(Sr+Ir,Sr.length?mr-jr.length:1/0),Sr=""),fr){case"<":Ir=Or+Ir+jr+Sr;break;case"=":Ir=Or+Sr+Ir+jr;break;case"^":Ir=Sr.slice(0,Ar=Sr.length>>1)+Or+Ir+jr+Sr.slice(Ar);break;default:Ir=Sr+Or+Ir+jr;break}return sr(Ir)}return Dr.toString=function(){return hr+""},Dr}function ur(hr,dr){var fr=or((hr=formatSpecifier(hr),hr.type="f",hr)),gr=Math.max(-8,Math.min(8,Math.floor(exponent(dr)/3)))*3,br=Math.pow(10,-gr),pr=prefixes[8+gr/3];return function(mr){return fr(br*mr)+pr}}return{format:or,formatPrefix:ur}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(tr){return locale$1=formatLocale$1(tr),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(tr){return Math.max(0,-exponent(Math.abs(tr)))}function precisionPrefix(tr,er){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(er)/3)))*3-exponent(Math.abs(tr)))}function precisionRound(tr,er){return tr=Math.abs(tr),er=Math.abs(er)-tr,Math.max(0,exponent(er)-exponent(tr))+1}function tickFormat(tr,er,rr,nr){var ir=tickStep(tr,er,rr),sr;switch(nr=formatSpecifier(nr??",f"),nr.type){case"s":{var ar=Math.max(Math.abs(tr),Math.abs(er));return nr.precision==null&&!isNaN(sr=precisionPrefix(ir,ar))&&(nr.precision=sr),formatPrefix(nr,ar)}case"":case"e":case"g":case"p":case"r":{nr.precision==null&&!isNaN(sr=precisionRound(ir,Math.max(Math.abs(tr),Math.abs(er))))&&(nr.precision=sr-(nr.type==="e"));break}case"f":case"%":{nr.precision==null&&!isNaN(sr=precisionFixed(ir))&&(nr.precision=sr-(nr.type==="%")*2);break}}return format(nr)}function linearish(tr){var er=tr.domain;return tr.ticks=function(rr){var nr=er();return ticks(nr[0],nr[nr.length-1],rr??10)},tr.tickFormat=function(rr,nr){var ir=er();return tickFormat(ir[0],ir[ir.length-1],rr??10,nr)},tr.nice=function(rr){rr==null&&(rr=10);var nr=er(),ir=0,sr=nr.length-1,ar=nr[ir],cr=nr[sr],lr,or,ur=10;for(cr<ar&&(or=ar,ar=cr,cr=or,or=ir,ir=sr,sr=or);ur-- >0;){if(or=tickIncrement(ar,cr,rr),or===lr)return nr[ir]=ar,nr[sr]=cr,er(nr);if(or>0)ar=Math.floor(ar/or)*or,cr=Math.ceil(cr/or)*or;else if(or<0)ar=Math.ceil(ar*or)/or,cr=Math.floor(cr*or)/or;else break;lr=or}return tr},tr}function linear(){var tr=continuous();return tr.copy=function(){return copy$1(tr,linear())},initRange.apply(tr,arguments),linearish(tr)}function identity$4(tr){var er;function rr(nr){return nr==null||isNaN(nr=+nr)?er:nr}return rr.invert=rr,rr.domain=rr.range=function(nr){return arguments.length?(tr=Array.from(nr,number$1),rr):tr.slice()},rr.unknown=function(nr){return arguments.length?(er=nr,rr):er},rr.copy=function(){return identity$4(tr).unknown(er)},tr=arguments.length?Array.from(tr,number$1):[0,1],linearish(rr)}function nice(tr,er){tr=tr.slice();var rr=0,nr=tr.length-1,ir=tr[rr],sr=tr[nr],ar;return sr<ir&&(ar=rr,rr=nr,nr=ar,ar=ir,ir=sr,sr=ar),tr[rr]=er.floor(ir),tr[nr]=er.ceil(sr),tr}function transformLog(tr){return Math.log(tr)}function transformExp(tr){return Math.exp(tr)}function transformLogn(tr){return-Math.log(-tr)}function transformExpn(tr){return-Math.exp(-tr)}function pow10(tr){return isFinite(tr)?+("1e"+tr):tr<0?0:tr}function powp(tr){return tr===10?pow10:tr===Math.E?Math.exp:er=>Math.pow(tr,er)}function logp(tr){return tr===Math.E?Math.log:tr===10&&Math.log10||tr===2&&Math.log2||(tr=Math.log(tr),er=>Math.log(er)/tr)}function reflect(tr){return(er,rr)=>-tr(-er,rr)}function loggish(tr){const er=tr(transformLog,transformExp),rr=er.domain;let nr=10,ir,sr;function ar(){return ir=logp(nr),sr=powp(nr),rr()[0]<0?(ir=reflect(ir),sr=reflect(sr),tr(transformLogn,transformExpn)):tr(transformLog,transformExp),er}return er.base=function(cr){return arguments.length?(nr=+cr,ar()):nr},er.domain=function(cr){return arguments.length?(rr(cr),ar()):rr()},er.ticks=cr=>{const lr=rr();let or=lr[0],ur=lr[lr.length-1];const hr=ur<or;hr&&([or,ur]=[ur,or]);let dr=ir(or),fr=ir(ur),gr,br;const pr=cr==null?10:+cr;let mr=[];if(!(nr%1)&&fr-dr<pr){if(dr=Math.floor(dr),fr=Math.ceil(fr),or>0){for(;dr<=fr;++dr)for(gr=1;gr<nr;++gr)if(br=dr<0?gr/sr(-dr):gr*sr(dr),!(br<or)){if(br>ur)break;mr.push(br)}}else for(;dr<=fr;++dr)for(gr=nr-1;gr>=1;--gr)if(br=dr>0?gr/sr(-dr):gr*sr(dr),!(br<or)){if(br>ur)break;mr.push(br)}mr.length*2<pr&&(mr=ticks(or,ur,pr))}else mr=ticks(dr,fr,Math.min(fr-dr,pr)).map(sr);return hr?mr.reverse():mr},er.tickFormat=(cr,lr)=>{if(cr==null&&(cr=10),lr==null&&(lr=nr===10?"s":","),typeof lr!="function"&&(!(nr%1)&&(lr=formatSpecifier(lr)).precision==null&&(lr.trim=!0),lr=format(lr)),cr===1/0)return lr;const or=Math.max(1,nr*cr/er.ticks().length);return ur=>{let hr=ur/sr(Math.round(ir(ur)));return hr*nr<nr-.5&&(hr*=nr),hr<=or?lr(ur):""}},er.nice=()=>rr(nice(rr(),{floor:cr=>sr(Math.floor(ir(cr))),ceil:cr=>sr(Math.ceil(ir(cr)))})),er}function log(){const tr=loggish(transformer$2()).domain([1,10]);return tr.copy=()=>copy$1(tr,log()).base(tr.base()),initRange.apply(tr,arguments),tr}function transformSymlog(tr){return function(er){return Math.sign(er)*Math.log1p(Math.abs(er/tr))}}function transformSymexp(tr){return function(er){return Math.sign(er)*Math.expm1(Math.abs(er))*tr}}function symlogish(tr){var er=1,rr=tr(transformSymlog(er),transformSymexp(er));return rr.constant=function(nr){return arguments.length?tr(transformSymlog(er=+nr),transformSymexp(er)):er},linearish(rr)}function symlog(){var tr=symlogish(transformer$2());return tr.copy=function(){return copy$1(tr,symlog()).constant(tr.constant())},initRange.apply(tr,arguments)}function transformPow(tr){return function(er){return er<0?-Math.pow(-er,tr):Math.pow(er,tr)}}function transformSqrt(tr){return tr<0?-Math.sqrt(-tr):Math.sqrt(tr)}function transformSquare(tr){return tr<0?-tr*tr:tr*tr}function powish(tr){var er=tr(identity$6,identity$6),rr=1;function nr(){return rr===1?tr(identity$6,identity$6):rr===.5?tr(transformSqrt,transformSquare):tr(transformPow(rr),transformPow(1/rr))}return er.exponent=function(ir){return arguments.length?(rr=+ir,nr()):rr},linearish(er)}function pow(){var tr=powish(transformer$2());return tr.copy=function(){return copy$1(tr,pow()).exponent(tr.exponent())},initRange.apply(tr,arguments),tr}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(tr){return Math.sign(tr)*tr*tr}function unsquare(tr){return Math.sign(tr)*Math.sqrt(Math.abs(tr))}function radial(){var tr=continuous(),er=[0,1],rr=!1,nr;function ir(sr){var ar=unsquare(tr(sr));return isNaN(ar)?nr:rr?Math.round(ar):ar}return ir.invert=function(sr){return tr.invert(square(sr))},ir.domain=function(sr){return arguments.length?(tr.domain(sr),ir):tr.domain()},ir.range=function(sr){return arguments.length?(tr.range((er=Array.from(sr,number$1)).map(square)),ir):er.slice()},ir.rangeRound=function(sr){return ir.range(sr).round(!0)},ir.round=function(sr){return arguments.length?(rr=!!sr,ir):rr},ir.clamp=function(sr){return arguments.length?(tr.clamp(sr),ir):tr.clamp()},ir.unknown=function(sr){return arguments.length?(nr=sr,ir):nr},ir.copy=function(){return radial(tr.domain(),er).round(rr).clamp(tr.clamp()).unknown(nr)},initRange.apply(ir,arguments),linearish(ir)}function quantile(){var tr=[],er=[],rr=[],nr;function ir(){var ar=0,cr=Math.max(1,er.length);for(rr=new Array(cr-1);++ar<cr;)rr[ar-1]=quantileSorted(tr,ar/cr);return sr}function sr(ar){return ar==null||isNaN(ar=+ar)?nr:er[bisectRight(rr,ar)]}return sr.invertExtent=function(ar){var cr=er.indexOf(ar);return cr<0?[NaN,NaN]:[cr>0?rr[cr-1]:tr[0],cr<rr.length?rr[cr]:tr[tr.length-1]]},sr.domain=function(ar){if(!arguments.length)return tr.slice();tr=[];for(let cr of ar)cr!=null&&!isNaN(cr=+cr)&&tr.push(cr);return tr.sort(ascending),ir()},sr.range=function(ar){return arguments.length?(er=Array.from(ar),ir()):er.slice()},sr.unknown=function(ar){return arguments.length?(nr=ar,sr):nr},sr.quantiles=function(){return rr.slice()},sr.copy=function(){return quantile().domain(tr).range(er).unknown(nr)},initRange.apply(sr,arguments)}function quantize(){var tr=0,er=1,rr=1,nr=[.5],ir=[0,1],sr;function ar(lr){return lr!=null&&lr<=lr?ir[bisectRight(nr,lr,0,rr)]:sr}function cr(){var lr=-1;for(nr=new Array(rr);++lr<rr;)nr[lr]=((lr+1)*er-(lr-rr)*tr)/(rr+1);return ar}return ar.domain=function(lr){return arguments.length?([tr,er]=lr,tr=+tr,er=+er,cr()):[tr,er]},ar.range=function(lr){return arguments.length?(rr=(ir=Array.from(lr)).length-1,cr()):ir.slice()},ar.invertExtent=function(lr){var or=ir.indexOf(lr);return or<0?[NaN,NaN]:or<1?[tr,nr[0]]:or>=rr?[nr[rr-1],er]:[nr[or-1],nr[or]]},ar.unknown=function(lr){return arguments.length&&(sr=lr),ar},ar.thresholds=function(){return nr.slice()},ar.copy=function(){return quantize().domain([tr,er]).range(ir).unknown(sr)},initRange.apply(linearish(ar),arguments)}function threshold(){var tr=[.5],er=[0,1],rr,nr=1;function ir(sr){return sr!=null&&sr<=sr?er[bisectRight(tr,sr,0,nr)]:rr}return ir.domain=function(sr){return arguments.length?(tr=Array.from(sr),nr=Math.min(tr.length,er.length-1),ir):tr.slice()},ir.range=function(sr){return arguments.length?(er=Array.from(sr),nr=Math.min(tr.length,er.length-1),ir):er.slice()},ir.invertExtent=function(sr){var ar=er.indexOf(sr);return[tr[ar-1],tr[ar]]},ir.unknown=function(sr){return arguments.length?(rr=sr,ir):rr},ir.copy=function(){return threshold().domain(tr).range(er).unknown(rr)},initRange.apply(ir,arguments)}const t0=new Date,t1=new Date;function timeInterval(tr,er,rr,nr){function ir(sr){return tr(sr=arguments.length===0?new Date:new Date(+sr)),sr}return ir.floor=sr=>(tr(sr=new Date(+sr)),sr),ir.ceil=sr=>(tr(sr=new Date(sr-1)),er(sr,1),tr(sr),sr),ir.round=sr=>{const ar=ir(sr),cr=ir.ceil(sr);return sr-ar<cr-sr?ar:cr},ir.offset=(sr,ar)=>(er(sr=new Date(+sr),ar==null?1:Math.floor(ar)),sr),ir.range=(sr,ar,cr)=>{const lr=[];if(sr=ir.ceil(sr),cr=cr==null?1:Math.floor(cr),!(sr<ar)||!(cr>0))return lr;let or;do lr.push(or=new Date(+sr)),er(sr,cr),tr(sr);while(or<sr&&sr<ar);return lr},ir.filter=sr=>timeInterval(ar=>{if(ar>=ar)for(;tr(ar),!sr(ar);)ar.setTime(ar-1)},(ar,cr)=>{if(ar>=ar)if(cr<0)for(;++cr<=0;)for(;er(ar,-1),!sr(ar););else for(;--cr>=0;)for(;er(ar,1),!sr(ar););}),rr&&(ir.count=(sr,ar)=>(t0.setTime(+sr),t1.setTime(+ar),tr(t0),tr(t1),Math.floor(rr(t0,t1))),ir.every=sr=>(sr=Math.floor(sr),!isFinite(sr)||!(sr>0)?null:sr>1?ir.filter(nr?ar=>nr(ar)%sr===0:ar=>ir.count(0,ar)%sr===0):ir)),ir}const millisecond=timeInterval(()=>{},(tr,er)=>{tr.setTime(+tr+er)},(tr,er)=>er-tr);millisecond.every=tr=>(tr=Math.floor(tr),!isFinite(tr)||!(tr>0)?null:tr>1?timeInterval(er=>{er.setTime(Math.floor(er/tr)*tr)},(er,rr)=>{er.setTime(+er+rr*tr)},(er,rr)=>(rr-er)/tr):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(tr=>{tr.setTime(tr-tr.getMilliseconds())},(tr,er)=>{tr.setTime(+tr+er*durationSecond)},(tr,er)=>(er-tr)/durationSecond,tr=>tr.getUTCSeconds());second.range;const timeMinute=timeInterval(tr=>{tr.setTime(tr-tr.getMilliseconds()-tr.getSeconds()*durationSecond)},(tr,er)=>{tr.setTime(+tr+er*durationMinute)},(tr,er)=>(er-tr)/durationMinute,tr=>tr.getMinutes());timeMinute.range;const utcMinute=timeInterval(tr=>{tr.setUTCSeconds(0,0)},(tr,er)=>{tr.setTime(+tr+er*durationMinute)},(tr,er)=>(er-tr)/durationMinute,tr=>tr.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(tr=>{tr.setTime(tr-tr.getMilliseconds()-tr.getSeconds()*durationSecond-tr.getMinutes()*durationMinute)},(tr,er)=>{tr.setTime(+tr+er*durationHour)},(tr,er)=>(er-tr)/durationHour,tr=>tr.getHours());timeHour.range;const utcHour=timeInterval(tr=>{tr.setUTCMinutes(0,0,0)},(tr,er)=>{tr.setTime(+tr+er*durationHour)},(tr,er)=>(er-tr)/durationHour,tr=>tr.getUTCHours());utcHour.range;const timeDay=timeInterval(tr=>tr.setHours(0,0,0,0),(tr,er)=>tr.setDate(tr.getDate()+er),(tr,er)=>(er-tr-(er.getTimezoneOffset()-tr.getTimezoneOffset())*durationMinute)/durationDay,tr=>tr.getDate()-1);timeDay.range;const utcDay=timeInterval(tr=>{tr.setUTCHours(0,0,0,0)},(tr,er)=>{tr.setUTCDate(tr.getUTCDate()+er)},(tr,er)=>(er-tr)/durationDay,tr=>tr.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(tr=>{tr.setUTCHours(0,0,0,0)},(tr,er)=>{tr.setUTCDate(tr.getUTCDate()+er)},(tr,er)=>(er-tr)/durationDay,tr=>Math.floor(tr/durationDay));unixDay.range;function timeWeekday(tr){return timeInterval(er=>{er.setDate(er.getDate()-(er.getDay()+7-tr)%7),er.setHours(0,0,0,0)},(er,rr)=>{er.setDate(er.getDate()+rr*7)},(er,rr)=>(rr-er-(rr.getTimezoneOffset()-er.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(tr){return timeInterval(er=>{er.setUTCDate(er.getUTCDate()-(er.getUTCDay()+7-tr)%7),er.setUTCHours(0,0,0,0)},(er,rr)=>{er.setUTCDate(er.getUTCDate()+rr*7)},(er,rr)=>(rr-er)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(tr=>{tr.setDate(1),tr.setHours(0,0,0,0)},(tr,er)=>{tr.setMonth(tr.getMonth()+er)},(tr,er)=>er.getMonth()-tr.getMonth()+(er.getFullYear()-tr.getFullYear())*12,tr=>tr.getMonth());timeMonth.range;const utcMonth=timeInterval(tr=>{tr.setUTCDate(1),tr.setUTCHours(0,0,0,0)},(tr,er)=>{tr.setUTCMonth(tr.getUTCMonth()+er)},(tr,er)=>er.getUTCMonth()-tr.getUTCMonth()+(er.getUTCFullYear()-tr.getUTCFullYear())*12,tr=>tr.getUTCMonth());utcMonth.range;const timeYear=timeInterval(tr=>{tr.setMonth(0,1),tr.setHours(0,0,0,0)},(tr,er)=>{tr.setFullYear(tr.getFullYear()+er)},(tr,er)=>er.getFullYear()-tr.getFullYear(),tr=>tr.getFullYear());timeYear.every=tr=>!isFinite(tr=Math.floor(tr))||!(tr>0)?null:timeInterval(er=>{er.setFullYear(Math.floor(er.getFullYear()/tr)*tr),er.setMonth(0,1),er.setHours(0,0,0,0)},(er,rr)=>{er.setFullYear(er.getFullYear()+rr*tr)});timeYear.range;const utcYear=timeInterval(tr=>{tr.setUTCMonth(0,1),tr.setUTCHours(0,0,0,0)},(tr,er)=>{tr.setUTCFullYear(tr.getUTCFullYear()+er)},(tr,er)=>er.getUTCFullYear()-tr.getUTCFullYear(),tr=>tr.getUTCFullYear());utcYear.every=tr=>!isFinite(tr=Math.floor(tr))||!(tr>0)?null:timeInterval(er=>{er.setUTCFullYear(Math.floor(er.getUTCFullYear()/tr)*tr),er.setUTCMonth(0,1),er.setUTCHours(0,0,0,0)},(er,rr)=>{er.setUTCFullYear(er.getUTCFullYear()+rr*tr)});utcYear.range;function ticker(tr,er,rr,nr,ir,sr){const ar=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[sr,1,durationMinute],[sr,5,5*durationMinute],[sr,15,15*durationMinute],[sr,30,30*durationMinute],[ir,1,durationHour],[ir,3,3*durationHour],[ir,6,6*durationHour],[ir,12,12*durationHour],[nr,1,durationDay],[nr,2,2*durationDay],[rr,1,durationWeek],[er,1,durationMonth],[er,3,3*durationMonth],[tr,1,durationYear]];function cr(or,ur,hr){const dr=ur<or;dr&&([or,ur]=[ur,or]);const fr=hr&&typeof hr.range=="function"?hr:lr(or,ur,hr),gr=fr?fr.range(or,+ur+1):[];return dr?gr.reverse():gr}function lr(or,ur,hr){const dr=Math.abs(ur-or)/hr,fr=bisector(([,,pr])=>pr).right(ar,dr);if(fr===ar.length)return tr.every(tickStep(or/durationYear,ur/durationYear,hr));if(fr===0)return millisecond.every(Math.max(tickStep(or,ur,hr),1));const[gr,br]=ar[dr/ar[fr-1][2]<ar[fr][2]/dr?fr-1:fr];return gr.every(br)}return[cr,lr]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(tr){if(0<=tr.y&&tr.y<100){var er=new Date(-1,tr.m,tr.d,tr.H,tr.M,tr.S,tr.L);return er.setFullYear(tr.y),er}return new Date(tr.y,tr.m,tr.d,tr.H,tr.M,tr.S,tr.L)}function utcDate(tr){if(0<=tr.y&&tr.y<100){var er=new Date(Date.UTC(-1,tr.m,tr.d,tr.H,tr.M,tr.S,tr.L));return er.setUTCFullYear(tr.y),er}return new Date(Date.UTC(tr.y,tr.m,tr.d,tr.H,tr.M,tr.S,tr.L))}function newDate(tr,er,rr){return{y:tr,m:er,d:rr,H:0,M:0,S:0,L:0}}function formatLocale(tr){var er=tr.dateTime,rr=tr.date,nr=tr.time,ir=tr.periods,sr=tr.days,ar=tr.shortDays,cr=tr.months,lr=tr.shortMonths,or=formatRe(ir),ur=formatLookup(ir),hr=formatRe(sr),dr=formatLookup(sr),fr=formatRe(ar),gr=formatLookup(ar),br=formatRe(cr),pr=formatLookup(cr),mr=formatRe(lr),yr=formatLookup(lr),xr={a:Pr,A:Ar,b:Sr,B:Mr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:qr,q:$r,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},vr={a:Br,A:zr,b:Gr,B:Vr,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Xr,q:Ur,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},_r={a:Dr,A:Ir,b:Or,B:jr,c:Lr,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:Nr,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Cr,X:wr,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};xr.x=Er(rr,xr),xr.X=Er(nr,xr),xr.c=Er(er,xr),vr.x=Er(rr,vr),vr.X=Er(nr,vr),vr.c=Er(er,vr);function Er(Fr,Kr){return function(Zr){var Jr=[],tn=-1,an=0,dn=Fr.length,en,rn,sn;for(Zr instanceof Date||(Zr=new Date(+Zr));++tn<dn;)Fr.charCodeAt(tn)===37&&(Jr.push(Fr.slice(an,tn)),(rn=pads[en=Fr.charAt(++tn)])!=null?en=Fr.charAt(++tn):rn=en==="e"?" ":"0",(sn=Kr[en])&&(en=sn(Zr,rn)),Jr.push(en),an=tn+1);return Jr.push(Fr.slice(an,tn)),Jr.join("")}}function Tr(Fr,Kr){return function(Zr){var Jr=newDate(1900,void 0,1),tn=Rr(Jr,Fr,Zr+="",0),an,dn;if(tn!=Zr.length)return null;if("Q"in Jr)return new Date(Jr.Q);if("s"in Jr)return new Date(Jr.s*1e3+("L"in Jr?Jr.L:0));if(Kr&&!("Z"in Jr)&&(Jr.Z=0),"p"in Jr&&(Jr.H=Jr.H%12+Jr.p*12),Jr.m===void 0&&(Jr.m="q"in Jr?Jr.q:0),"V"in Jr){if(Jr.V<1||Jr.V>53)return null;"w"in Jr||(Jr.w=1),"Z"in Jr?(an=utcDate(newDate(Jr.y,0,1)),dn=an.getUTCDay(),an=dn>4||dn===0?utcMonday.ceil(an):utcMonday(an),an=utcDay.offset(an,(Jr.V-1)*7),Jr.y=an.getUTCFullYear(),Jr.m=an.getUTCMonth(),Jr.d=an.getUTCDate()+(Jr.w+6)%7):(an=localDate(newDate(Jr.y,0,1)),dn=an.getDay(),an=dn>4||dn===0?timeMonday.ceil(an):timeMonday(an),an=timeDay.offset(an,(Jr.V-1)*7),Jr.y=an.getFullYear(),Jr.m=an.getMonth(),Jr.d=an.getDate()+(Jr.w+6)%7)}else("W"in Jr||"U"in Jr)&&("w"in Jr||(Jr.w="u"in Jr?Jr.u%7:"W"in Jr?1:0),dn="Z"in Jr?utcDate(newDate(Jr.y,0,1)).getUTCDay():localDate(newDate(Jr.y,0,1)).getDay(),Jr.m=0,Jr.d="W"in Jr?(Jr.w+6)%7+Jr.W*7-(dn+5)%7:Jr.w+Jr.U*7-(dn+6)%7);return"Z"in Jr?(Jr.H+=Jr.Z/100|0,Jr.M+=Jr.Z%100,utcDate(Jr)):localDate(Jr)}}function Rr(Fr,Kr,Zr,Jr){for(var tn=0,an=Kr.length,dn=Zr.length,en,rn;tn<an;){if(Jr>=dn)return-1;if(en=Kr.charCodeAt(tn++),en===37){if(en=Kr.charAt(tn++),rn=_r[en in pads?Kr.charAt(tn++):en],!rn||(Jr=rn(Fr,Zr,Jr))<0)return-1}else if(en!=Zr.charCodeAt(Jr++))return-1}return Jr}function Nr(Fr,Kr,Zr){var Jr=or.exec(Kr.slice(Zr));return Jr?(Fr.p=ur.get(Jr[0].toLowerCase()),Zr+Jr[0].length):-1}function Dr(Fr,Kr,Zr){var Jr=fr.exec(Kr.slice(Zr));return Jr?(Fr.w=gr.get(Jr[0].toLowerCase()),Zr+Jr[0].length):-1}function Ir(Fr,Kr,Zr){var Jr=hr.exec(Kr.slice(Zr));return Jr?(Fr.w=dr.get(Jr[0].toLowerCase()),Zr+Jr[0].length):-1}function Or(Fr,Kr,Zr){var Jr=mr.exec(Kr.slice(Zr));return Jr?(Fr.m=yr.get(Jr[0].toLowerCase()),Zr+Jr[0].length):-1}function jr(Fr,Kr,Zr){var Jr=br.exec(Kr.slice(Zr));return Jr?(Fr.m=pr.get(Jr[0].toLowerCase()),Zr+Jr[0].length):-1}function Lr(Fr,Kr,Zr){return Rr(Fr,er,Kr,Zr)}function Cr(Fr,Kr,Zr){return Rr(Fr,rr,Kr,Zr)}function wr(Fr,Kr,Zr){return Rr(Fr,nr,Kr,Zr)}function Pr(Fr){return ar[Fr.getDay()]}function Ar(Fr){return sr[Fr.getDay()]}function Sr(Fr){return lr[Fr.getMonth()]}function Mr(Fr){return cr[Fr.getMonth()]}function qr(Fr){return ir[+(Fr.getHours()>=12)]}function $r(Fr){return 1+~~(Fr.getMonth()/3)}function Br(Fr){return ar[Fr.getUTCDay()]}function zr(Fr){return sr[Fr.getUTCDay()]}function Gr(Fr){return lr[Fr.getUTCMonth()]}function Vr(Fr){return cr[Fr.getUTCMonth()]}function Xr(Fr){return ir[+(Fr.getUTCHours()>=12)]}function Ur(Fr){return 1+~~(Fr.getUTCMonth()/3)}return{format:function(Fr){var Kr=Er(Fr+="",xr);return Kr.toString=function(){return Fr},Kr},parse:function(Fr){var Kr=Tr(Fr+="",!1);return Kr.toString=function(){return Fr},Kr},utcFormat:function(Fr){var Kr=Er(Fr+="",vr);return Kr.toString=function(){return Fr},Kr},utcParse:function(Fr){var Kr=Tr(Fr+="",!0);return Kr.toString=function(){return Fr},Kr}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(tr,er,rr){var nr=tr<0?"-":"",ir=(nr?-tr:tr)+"",sr=ir.length;return nr+(sr<rr?new Array(rr-sr+1).join(er)+ir:ir)}function requote(tr){return tr.replace(requoteRe,"\\$&")}function formatRe(tr){return new RegExp("^(?:"+tr.map(requote).join("|")+")","i")}function formatLookup(tr){return new Map(tr.map((er,rr)=>[er.toLowerCase(),rr]))}function parseWeekdayNumberSunday(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+1));return nr?(tr.w=+nr[0],rr+nr[0].length):-1}function parseWeekdayNumberMonday(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+1));return nr?(tr.u=+nr[0],rr+nr[0].length):-1}function parseWeekNumberSunday(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.U=+nr[0],rr+nr[0].length):-1}function parseWeekNumberISO(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.V=+nr[0],rr+nr[0].length):-1}function parseWeekNumberMonday(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.W=+nr[0],rr+nr[0].length):-1}function parseFullYear(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+4));return nr?(tr.y=+nr[0],rr+nr[0].length):-1}function parseYear(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.y=+nr[0]+(+nr[0]>68?1900:2e3),rr+nr[0].length):-1}function parseZone(tr,er,rr){var nr=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(er.slice(rr,rr+6));return nr?(tr.Z=nr[1]?0:-(nr[2]+(nr[3]||"00")),rr+nr[0].length):-1}function parseQuarter(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+1));return nr?(tr.q=nr[0]*3-3,rr+nr[0].length):-1}function parseMonthNumber(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.m=nr[0]-1,rr+nr[0].length):-1}function parseDayOfMonth(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.d=+nr[0],rr+nr[0].length):-1}function parseDayOfYear(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+3));return nr?(tr.m=0,tr.d=+nr[0],rr+nr[0].length):-1}function parseHour24(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.H=+nr[0],rr+nr[0].length):-1}function parseMinutes(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.M=+nr[0],rr+nr[0].length):-1}function parseSeconds(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+2));return nr?(tr.S=+nr[0],rr+nr[0].length):-1}function parseMilliseconds(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+3));return nr?(tr.L=+nr[0],rr+nr[0].length):-1}function parseMicroseconds(tr,er,rr){var nr=numberRe.exec(er.slice(rr,rr+6));return nr?(tr.L=Math.floor(nr[0]/1e3),rr+nr[0].length):-1}function parseLiteralPercent(tr,er,rr){var nr=percentRe.exec(er.slice(rr,rr+1));return nr?rr+nr[0].length:-1}function parseUnixTimestamp(tr,er,rr){var nr=numberRe.exec(er.slice(rr));return nr?(tr.Q=+nr[0],rr+nr[0].length):-1}function parseUnixTimestampSeconds(tr,er,rr){var nr=numberRe.exec(er.slice(rr));return nr?(tr.s=+nr[0],rr+nr[0].length):-1}function formatDayOfMonth(tr,er){return pad(tr.getDate(),er,2)}function formatHour24(tr,er){return pad(tr.getHours(),er,2)}function formatHour12(tr,er){return pad(tr.getHours()%12||12,er,2)}function formatDayOfYear(tr,er){return pad(1+timeDay.count(timeYear(tr),tr),er,3)}function formatMilliseconds(tr,er){return pad(tr.getMilliseconds(),er,3)}function formatMicroseconds(tr,er){return formatMilliseconds(tr,er)+"000"}function formatMonthNumber(tr,er){return pad(tr.getMonth()+1,er,2)}function formatMinutes(tr,er){return pad(tr.getMinutes(),er,2)}function formatSeconds(tr,er){return pad(tr.getSeconds(),er,2)}function formatWeekdayNumberMonday(tr){var er=tr.getDay();return er===0?7:er}function formatWeekNumberSunday(tr,er){return pad(timeSunday.count(timeYear(tr)-1,tr),er,2)}function dISO(tr){var er=tr.getDay();return er>=4||er===0?timeThursday(tr):timeThursday.ceil(tr)}function formatWeekNumberISO(tr,er){return tr=dISO(tr),pad(timeThursday.count(timeYear(tr),tr)+(timeYear(tr).getDay()===4),er,2)}function formatWeekdayNumberSunday(tr){return tr.getDay()}function formatWeekNumberMonday(tr,er){return pad(timeMonday.count(timeYear(tr)-1,tr),er,2)}function formatYear(tr,er){return pad(tr.getFullYear()%100,er,2)}function formatYearISO(tr,er){return tr=dISO(tr),pad(tr.getFullYear()%100,er,2)}function formatFullYear(tr,er){return pad(tr.getFullYear()%1e4,er,4)}function formatFullYearISO(tr,er){var rr=tr.getDay();return tr=rr>=4||rr===0?timeThursday(tr):timeThursday.ceil(tr),pad(tr.getFullYear()%1e4,er,4)}function formatZone(tr){var er=tr.getTimezoneOffset();return(er>0?"-":(er*=-1,"+"))+pad(er/60|0,"0",2)+pad(er%60,"0",2)}function formatUTCDayOfMonth(tr,er){return pad(tr.getUTCDate(),er,2)}function formatUTCHour24(tr,er){return pad(tr.getUTCHours(),er,2)}function formatUTCHour12(tr,er){return pad(tr.getUTCHours()%12||12,er,2)}function formatUTCDayOfYear(tr,er){return pad(1+utcDay.count(utcYear(tr),tr),er,3)}function formatUTCMilliseconds(tr,er){return pad(tr.getUTCMilliseconds(),er,3)}function formatUTCMicroseconds(tr,er){return formatUTCMilliseconds(tr,er)+"000"}function formatUTCMonthNumber(tr,er){return pad(tr.getUTCMonth()+1,er,2)}function formatUTCMinutes(tr,er){return pad(tr.getUTCMinutes(),er,2)}function formatUTCSeconds(tr,er){return pad(tr.getUTCSeconds(),er,2)}function formatUTCWeekdayNumberMonday(tr){var er=tr.getUTCDay();return er===0?7:er}function formatUTCWeekNumberSunday(tr,er){return pad(utcSunday.count(utcYear(tr)-1,tr),er,2)}function UTCdISO(tr){var er=tr.getUTCDay();return er>=4||er===0?utcThursday(tr):utcThursday.ceil(tr)}function formatUTCWeekNumberISO(tr,er){return tr=UTCdISO(tr),pad(utcThursday.count(utcYear(tr),tr)+(utcYear(tr).getUTCDay()===4),er,2)}function formatUTCWeekdayNumberSunday(tr){return tr.getUTCDay()}function formatUTCWeekNumberMonday(tr,er){return pad(utcMonday.count(utcYear(tr)-1,tr),er,2)}function formatUTCYear(tr,er){return pad(tr.getUTCFullYear()%100,er,2)}function formatUTCYearISO(tr,er){return tr=UTCdISO(tr),pad(tr.getUTCFullYear()%100,er,2)}function formatUTCFullYear(tr,er){return pad(tr.getUTCFullYear()%1e4,er,4)}function formatUTCFullYearISO(tr,er){var rr=tr.getUTCDay();return tr=rr>=4||rr===0?utcThursday(tr):utcThursday.ceil(tr),pad(tr.getUTCFullYear()%1e4,er,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(tr){return+tr}function formatUnixTimestampSeconds(tr){return Math.floor(+tr/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(tr){return locale=formatLocale(tr),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(tr){return new Date(tr)}function number(tr){return tr instanceof Date?+tr:+new Date(+tr)}function calendar(tr,er,rr,nr,ir,sr,ar,cr,lr,or){var ur=continuous(),hr=ur.invert,dr=ur.domain,fr=or(".%L"),gr=or(":%S"),br=or("%I:%M"),pr=or("%I %p"),mr=or("%a %d"),yr=or("%b %d"),xr=or("%B"),vr=or("%Y");function _r(Er){return(lr(Er)<Er?fr:cr(Er)<Er?gr:ar(Er)<Er?br:sr(Er)<Er?pr:nr(Er)<Er?ir(Er)<Er?mr:yr:rr(Er)<Er?xr:vr)(Er)}return ur.invert=function(Er){return new Date(hr(Er))},ur.domain=function(Er){return arguments.length?dr(Array.from(Er,number)):dr().map(date)},ur.ticks=function(Er){var Tr=dr();return tr(Tr[0],Tr[Tr.length-1],Er??10)},ur.tickFormat=function(Er,Tr){return Tr==null?_r:or(Tr)},ur.nice=function(Er){var Tr=dr();return(!Er||typeof Er.range!="function")&&(Er=er(Tr[0],Tr[Tr.length-1],Er??10)),Er?dr(nice(Tr,Er)):ur},ur.copy=function(){return copy$1(ur,calendar(tr,er,rr,nr,ir,sr,ar,cr,lr,or))},ur}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var tr=0,er=1,rr,nr,ir,sr,ar=identity$6,cr=!1,lr;function or(hr){return hr==null||isNaN(hr=+hr)?lr:ar(ir===0?.5:(hr=(sr(hr)-rr)*ir,cr?Math.max(0,Math.min(1,hr)):hr))}or.domain=function(hr){return arguments.length?([tr,er]=hr,rr=sr(tr=+tr),nr=sr(er=+er),ir=rr===nr?0:1/(nr-rr),or):[tr,er]},or.clamp=function(hr){return arguments.length?(cr=!!hr,or):cr},or.interpolator=function(hr){return arguments.length?(ar=hr,or):ar};function ur(hr){return function(dr){var fr,gr;return arguments.length?([fr,gr]=dr,ar=hr(fr,gr),or):[ar(0),ar(1)]}}return or.range=ur(interpolate),or.rangeRound=ur(interpolateRound),or.unknown=function(hr){return arguments.length?(lr=hr,or):lr},function(hr){return sr=hr,rr=hr(tr),nr=hr(er),ir=rr===nr?0:1/(nr-rr),or}}function copy(tr,er){return er.domain(tr.domain()).interpolator(tr.interpolator()).clamp(tr.clamp()).unknown(tr.unknown())}function sequential(){var tr=linearish(transformer$1()(identity$6));return tr.copy=function(){return copy(tr,sequential())},initInterpolator.apply(tr,arguments)}function sequentialLog(){var tr=loggish(transformer$1()).domain([1,10]);return tr.copy=function(){return copy(tr,sequentialLog()).base(tr.base())},initInterpolator.apply(tr,arguments)}function sequentialSymlog(){var tr=symlogish(transformer$1());return tr.copy=function(){return copy(tr,sequentialSymlog()).constant(tr.constant())},initInterpolator.apply(tr,arguments)}function sequentialPow(){var tr=powish(transformer$1());return tr.copy=function(){return copy(tr,sequentialPow()).exponent(tr.exponent())},initInterpolator.apply(tr,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var tr=[],er=identity$6;function rr(nr){if(nr!=null&&!isNaN(nr=+nr))return er((bisectRight(tr,nr,1)-1)/(tr.length-1))}return rr.domain=function(nr){if(!arguments.length)return tr.slice();tr=[];for(let ir of nr)ir!=null&&!isNaN(ir=+ir)&&tr.push(ir);return tr.sort(ascending),rr},rr.interpolator=function(nr){return arguments.length?(er=nr,rr):er},rr.range=function(){return tr.map((nr,ir)=>er(ir/(tr.length-1)))},rr.quantiles=function(nr){return Array.from({length:nr+1},(ir,sr)=>quantile$1(tr,sr/nr))},rr.copy=function(){return sequentialQuantile(er).domain(tr)},initInterpolator.apply(rr,arguments)}function transformer(){var tr=0,er=.5,rr=1,nr=1,ir,sr,ar,cr,lr,or=identity$6,ur,hr=!1,dr;function fr(br){return isNaN(br=+br)?dr:(br=.5+((br=+ur(br))-sr)*(nr*br<nr*sr?cr:lr),or(hr?Math.max(0,Math.min(1,br)):br))}fr.domain=function(br){return arguments.length?([tr,er,rr]=br,ir=ur(tr=+tr),sr=ur(er=+er),ar=ur(rr=+rr),cr=ir===sr?0:.5/(sr-ir),lr=sr===ar?0:.5/(ar-sr),nr=sr<ir?-1:1,fr):[tr,er,rr]},fr.clamp=function(br){return arguments.length?(hr=!!br,fr):hr},fr.interpolator=function(br){return arguments.length?(or=br,fr):or};function gr(br){return function(pr){var mr,yr,xr;return arguments.length?([mr,yr,xr]=pr,or=piecewise(br,[mr,yr,xr]),fr):[or(0),or(.5),or(1)]}}return fr.range=gr(interpolate),fr.rangeRound=gr(interpolateRound),fr.unknown=function(br){return arguments.length?(dr=br,fr):dr},function(br){return ur=br,ir=br(tr),sr=br(er),ar=br(rr),cr=ir===sr?0:.5/(sr-ir),lr=sr===ar?0:.5/(ar-sr),nr=sr<ir?-1:1,fr}}function diverging(){var tr=linearish(transformer()(identity$6));return tr.copy=function(){return copy(tr,diverging())},initInterpolator.apply(tr,arguments)}function divergingLog(){var tr=loggish(transformer()).domain([.1,1,10]);return tr.copy=function(){return copy(tr,divergingLog()).base(tr.base())},initInterpolator.apply(tr,arguments)}function divergingSymlog(){var tr=symlogish(transformer());return tr.copy=function(){return copy(tr,divergingSymlog()).constant(tr.constant())},initInterpolator.apply(tr,arguments)}function divergingPow(){var tr=powish(transformer());return tr.copy=function(){return copy(tr,divergingPow()).exponent(tr.exponent())},initInterpolator.apply(tr,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$4,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var isSymbol=isSymbol_1;function baseExtremum$4(tr,er,rr){for(var nr=-1,ir=tr.length;++nr<ir;){var sr=tr[nr],ar=er(sr);if(ar!=null&&(cr===void 0?ar===ar&&!isSymbol(ar):rr(ar,cr)))var cr=ar,lr=sr}return lr}var _baseExtremum=baseExtremum$4;function baseGt$2(tr,er){return tr>er}var _baseGt=baseGt$2,baseExtremum$3=_baseExtremum,baseGt$1=_baseGt,identity$3=identity_1;function max$1(tr){return tr&&tr.length?baseExtremum$3(tr,identity$3,baseGt$1):void 0}var max_1=max$1;const max$2=getDefaultExportFromCjs(max_1);function baseLt$2(tr,er){return tr<er}var _baseLt=baseLt$2,baseExtremum$2=_baseExtremum,baseLt$1=_baseLt,identity$2=identity_1;function min(tr){return tr&&tr.length?baseExtremum$2(tr,identity$2,baseLt$1):void 0}var min_1=min;const min$1=getDefaultExportFromCjs(min_1);var arrayMap=_arrayMap,baseIteratee$7=_baseIteratee,baseMap=_baseMap,isArray$2=isArray_1;function map$2(tr,er){var rr=isArray$2(tr)?arrayMap:baseMap;return rr(tr,baseIteratee$7(er))}var map_1=map$2,baseFlatten=_baseFlatten,map$1=map_1;function flatMap(tr,er){return baseFlatten(map$1(tr,er),1)}var flatMap_1=flatMap;const flatMap$1=getDefaultExportFromCjs(flatMap_1);var baseIsEqual=_baseIsEqual;function isEqual(tr,er){return baseIsEqual(tr,er)}var isEqual_1=isEqual;const isEqual$1=getDefaultExportFromCjs(isEqual_1);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P$1={};P$1.absoluteValue=P$1.abs=function(){var tr=new this.constructor(this);return tr.s&&(tr.s=1),tr};P$1.comparedTo=P$1.cmp=function(tr){var er,rr,nr,ir,sr=this;if(tr=new sr.constructor(tr),sr.s!==tr.s)return sr.s||-tr.s;if(sr.e!==tr.e)return sr.e>tr.e^sr.s<0?1:-1;for(nr=sr.d.length,ir=tr.d.length,er=0,rr=nr<ir?nr:ir;er<rr;++er)if(sr.d[er]!==tr.d[er])return sr.d[er]>tr.d[er]^sr.s<0?1:-1;return nr===ir?0:nr>ir^sr.s<0?1:-1};P$1.decimalPlaces=P$1.dp=function(){var tr=this,er=tr.d.length-1,rr=(er-tr.e)*LOG_BASE;if(er=tr.d[er],er)for(;er%10==0;er/=10)rr--;return rr<0?0:rr};P$1.dividedBy=P$1.div=function(tr){return divide(this,new this.constructor(tr))};P$1.dividedToIntegerBy=P$1.idiv=function(tr){var er=this,rr=er.constructor;return round(divide(er,new rr(tr),0,1),rr.precision)};P$1.equals=P$1.eq=function(tr){return!this.cmp(tr)};P$1.exponent=function(){return getBase10Exponent(this)};P$1.greaterThan=P$1.gt=function(tr){return this.cmp(tr)>0};P$1.greaterThanOrEqualTo=P$1.gte=function(tr){return this.cmp(tr)>=0};P$1.isInteger=P$1.isint=function(){return this.e>this.d.length-2};P$1.isNegative=P$1.isneg=function(){return this.s<0};P$1.isPositive=P$1.ispos=function(){return this.s>0};P$1.isZero=function(){return this.s===0};P$1.lessThan=P$1.lt=function(tr){return this.cmp(tr)<0};P$1.lessThanOrEqualTo=P$1.lte=function(tr){return this.cmp(tr)<1};P$1.logarithm=P$1.log=function(tr){var er,rr=this,nr=rr.constructor,ir=nr.precision,sr=ir+5;if(tr===void 0)tr=new nr(10);else if(tr=new nr(tr),tr.s<1||tr.eq(ONE))throw Error(decimalError+"NaN");if(rr.s<1)throw Error(decimalError+(rr.s?"NaN":"-Infinity"));return rr.eq(ONE)?new nr(0):(external=!1,er=divide(ln$1(rr,sr),ln$1(tr,sr),sr),external=!0,round(er,ir))};P$1.minus=P$1.sub=function(tr){var er=this;return tr=new er.constructor(tr),er.s==tr.s?subtract(er,tr):add(er,(tr.s=-tr.s,tr))};P$1.modulo=P$1.mod=function(tr){var er,rr=this,nr=rr.constructor,ir=nr.precision;if(tr=new nr(tr),!tr.s)throw Error(decimalError+"NaN");return rr.s?(external=!1,er=divide(rr,tr,0,1).times(tr),external=!0,rr.minus(er)):round(new nr(rr),ir)};P$1.naturalExponential=P$1.exp=function(){return exp(this)};P$1.naturalLogarithm=P$1.ln=function(){return ln$1(this)};P$1.negated=P$1.neg=function(){var tr=new this.constructor(this);return tr.s=-tr.s||0,tr};P$1.plus=P$1.add=function(tr){var er=this;return tr=new er.constructor(tr),er.s==tr.s?add(er,tr):subtract(er,(tr.s=-tr.s,tr))};P$1.precision=P$1.sd=function(tr){var er,rr,nr,ir=this;if(tr!==void 0&&tr!==!!tr&&tr!==1&&tr!==0)throw Error(invalidArgument+tr);if(er=getBase10Exponent(ir)+1,nr=ir.d.length-1,rr=nr*LOG_BASE+1,nr=ir.d[nr],nr){for(;nr%10==0;nr/=10)rr--;for(nr=ir.d[0];nr>=10;nr/=10)rr++}return tr&&er>rr?er:rr};P$1.squareRoot=P$1.sqrt=function(){var tr,er,rr,nr,ir,sr,ar,cr=this,lr=cr.constructor;if(cr.s<1){if(!cr.s)return new lr(0);throw Error(decimalError+"NaN")}for(tr=getBase10Exponent(cr),external=!1,ir=Math.sqrt(+cr),ir==0||ir==1/0?(er=digitsToString(cr.d),(er.length+tr)%2==0&&(er+="0"),ir=Math.sqrt(er),tr=mathfloor((tr+1)/2)-(tr<0||tr%2),ir==1/0?er="5e"+tr:(er=ir.toExponential(),er=er.slice(0,er.indexOf("e")+1)+tr),nr=new lr(er)):nr=new lr(ir.toString()),rr=lr.precision,ir=ar=rr+3;;)if(sr=nr,nr=sr.plus(divide(cr,sr,ar+2)).times(.5),digitsToString(sr.d).slice(0,ar)===(er=digitsToString(nr.d)).slice(0,ar)){if(er=er.slice(ar-3,ar+1),ir==ar&&er=="4999"){if(round(sr,rr+1,0),sr.times(sr).eq(cr)){nr=sr;break}}else if(er!="9999")break;ar+=4}return external=!0,round(nr,rr)};P$1.times=P$1.mul=function(tr){var er,rr,nr,ir,sr,ar,cr,lr,or,ur=this,hr=ur.constructor,dr=ur.d,fr=(tr=new hr(tr)).d;if(!ur.s||!tr.s)return new hr(0);for(tr.s*=ur.s,rr=ur.e+tr.e,lr=dr.length,or=fr.length,lr<or&&(sr=dr,dr=fr,fr=sr,ar=lr,lr=or,or=ar),sr=[],ar=lr+or,nr=ar;nr--;)sr.push(0);for(nr=or;--nr>=0;){for(er=0,ir=lr+nr;ir>nr;)cr=sr[ir]+fr[nr]*dr[ir-nr-1]+er,sr[ir--]=cr%BASE|0,er=cr/BASE|0;sr[ir]=(sr[ir]+er)%BASE|0}for(;!sr[--ar];)sr.pop();return er?++rr:sr.shift(),tr.d=sr,tr.e=rr,external?round(tr,hr.precision):tr};P$1.toDecimalPlaces=P$1.todp=function(tr,er){var rr=this,nr=rr.constructor;return rr=new nr(rr),tr===void 0?rr:(checkInt32(tr,0,MAX_DIGITS),er===void 0?er=nr.rounding:checkInt32(er,0,8),round(rr,tr+getBase10Exponent(rr)+1,er))};P$1.toExponential=function(tr,er){var rr,nr=this,ir=nr.constructor;return tr===void 0?rr=toString$1(nr,!0):(checkInt32(tr,0,MAX_DIGITS),er===void 0?er=ir.rounding:checkInt32(er,0,8),nr=round(new ir(nr),tr+1,er),rr=toString$1(nr,!0,tr+1)),rr};P$1.toFixed=function(tr,er){var rr,nr,ir=this,sr=ir.constructor;return tr===void 0?toString$1(ir):(checkInt32(tr,0,MAX_DIGITS),er===void 0?er=sr.rounding:checkInt32(er,0,8),nr=round(new sr(ir),tr+getBase10Exponent(ir)+1,er),rr=toString$1(nr.abs(),!1,tr+getBase10Exponent(nr)+1),ir.isneg()&&!ir.isZero()?"-"+rr:rr)};P$1.toInteger=P$1.toint=function(){var tr=this,er=tr.constructor;return round(new er(tr),getBase10Exponent(tr)+1,er.rounding)};P$1.toNumber=function(){return+this};P$1.toPower=P$1.pow=function(tr){var er,rr,nr,ir,sr,ar,cr=this,lr=cr.constructor,or=12,ur=+(tr=new lr(tr));if(!tr.s)return new lr(ONE);if(cr=new lr(cr),!cr.s){if(tr.s<1)throw Error(decimalError+"Infinity");return cr}if(cr.eq(ONE))return cr;if(nr=lr.precision,tr.eq(ONE))return round(cr,nr);if(er=tr.e,rr=tr.d.length-1,ar=er>=rr,sr=cr.s,ar){if((rr=ur<0?-ur:ur)<=MAX_SAFE_INTEGER){for(ir=new lr(ONE),er=Math.ceil(nr/LOG_BASE+4),external=!1;rr%2&&(ir=ir.times(cr),truncate(ir.d,er)),rr=mathfloor(rr/2),rr!==0;)cr=cr.times(cr),truncate(cr.d,er);return external=!0,tr.s<0?new lr(ONE).div(ir):round(ir,nr)}}else if(sr<0)throw Error(decimalError+"NaN");return sr=sr<0&&tr.d[Math.max(er,rr)]&1?-1:1,cr.s=1,external=!1,ir=tr.times(ln$1(cr,nr+or)),external=!0,ir=exp(ir),ir.s=sr,ir};P$1.toPrecision=function(tr,er){var rr,nr,ir=this,sr=ir.constructor;return tr===void 0?(rr=getBase10Exponent(ir),nr=toString$1(ir,rr<=sr.toExpNeg||rr>=sr.toExpPos)):(checkInt32(tr,1,MAX_DIGITS),er===void 0?er=sr.rounding:checkInt32(er,0,8),ir=round(new sr(ir),tr,er),rr=getBase10Exponent(ir),nr=toString$1(ir,tr<=rr||rr<=sr.toExpNeg,tr)),nr};P$1.toSignificantDigits=P$1.tosd=function(tr,er){var rr=this,nr=rr.constructor;return tr===void 0?(tr=nr.precision,er=nr.rounding):(checkInt32(tr,1,MAX_DIGITS),er===void 0?er=nr.rounding:checkInt32(er,0,8)),round(new nr(rr),tr,er)};P$1.toString=P$1.valueOf=P$1.val=P$1.toJSON=P$1[Symbol.for("nodejs.util.inspect.custom")]=function(){var tr=this,er=getBase10Exponent(tr),rr=tr.constructor;return toString$1(tr,er<=rr.toExpNeg||er>=rr.toExpPos)};function add(tr,er){var rr,nr,ir,sr,ar,cr,lr,or,ur=tr.constructor,hr=ur.precision;if(!tr.s||!er.s)return er.s||(er=new ur(tr)),external?round(er,hr):er;if(lr=tr.d,or=er.d,ar=tr.e,ir=er.e,lr=lr.slice(),sr=ar-ir,sr){for(sr<0?(nr=lr,sr=-sr,cr=or.length):(nr=or,ir=ar,cr=lr.length),ar=Math.ceil(hr/LOG_BASE),cr=ar>cr?ar+1:cr+1,sr>cr&&(sr=cr,nr.length=1),nr.reverse();sr--;)nr.push(0);nr.reverse()}for(cr=lr.length,sr=or.length,cr-sr<0&&(sr=cr,nr=or,or=lr,lr=nr),rr=0;sr;)rr=(lr[--sr]=lr[sr]+or[sr]+rr)/BASE|0,lr[sr]%=BASE;for(rr&&(lr.unshift(rr),++ir),cr=lr.length;lr[--cr]==0;)lr.pop();return er.d=lr,er.e=ir,external?round(er,hr):er}function checkInt32(tr,er,rr){if(tr!==~~tr||tr<er||tr>rr)throw Error(invalidArgument+tr)}function digitsToString(tr){var er,rr,nr,ir=tr.length-1,sr="",ar=tr[0];if(ir>0){for(sr+=ar,er=1;er<ir;er++)nr=tr[er]+"",rr=LOG_BASE-nr.length,rr&&(sr+=getZeroString(rr)),sr+=nr;ar=tr[er],nr=ar+"",rr=LOG_BASE-nr.length,rr&&(sr+=getZeroString(rr))}else if(ar===0)return"0";for(;ar%10===0;)ar/=10;return sr+ar}var divide=function(){function tr(nr,ir){var sr,ar=0,cr=nr.length;for(nr=nr.slice();cr--;)sr=nr[cr]*ir+ar,nr[cr]=sr%BASE|0,ar=sr/BASE|0;return ar&&nr.unshift(ar),nr}function er(nr,ir,sr,ar){var cr,lr;if(sr!=ar)lr=sr>ar?1:-1;else for(cr=lr=0;cr<sr;cr++)if(nr[cr]!=ir[cr]){lr=nr[cr]>ir[cr]?1:-1;break}return lr}function rr(nr,ir,sr){for(var ar=0;sr--;)nr[sr]-=ar,ar=nr[sr]<ir[sr]?1:0,nr[sr]=ar*BASE+nr[sr]-ir[sr];for(;!nr[0]&&nr.length>1;)nr.shift()}return function(nr,ir,sr,ar){var cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr,vr,_r,Er,Tr,Rr,Nr=nr.constructor,Dr=nr.s==ir.s?1:-1,Ir=nr.d,Or=ir.d;if(!nr.s)return new Nr(nr);if(!ir.s)throw Error(decimalError+"Division by zero");for(lr=nr.e-ir.e,Tr=Or.length,_r=Ir.length,fr=new Nr(Dr),gr=fr.d=[],or=0;Or[or]==(Ir[or]||0);)++or;if(Or[or]>(Ir[or]||0)&&--lr,sr==null?yr=sr=Nr.precision:ar?yr=sr+(getBase10Exponent(nr)-getBase10Exponent(ir))+1:yr=sr,yr<0)return new Nr(0);if(yr=yr/LOG_BASE+2|0,or=0,Tr==1)for(ur=0,Or=Or[0],yr++;(or<_r||ur)&&yr--;or++)xr=ur*BASE+(Ir[or]||0),gr[or]=xr/Or|0,ur=xr%Or|0;else{for(ur=BASE/(Or[0]+1)|0,ur>1&&(Or=tr(Or,ur),Ir=tr(Ir,ur),Tr=Or.length,_r=Ir.length),vr=Tr,br=Ir.slice(0,Tr),pr=br.length;pr<Tr;)br[pr++]=0;Rr=Or.slice(),Rr.unshift(0),Er=Or[0],Or[1]>=BASE/2&&++Er;do ur=0,cr=er(Or,br,Tr,pr),cr<0?(mr=br[0],Tr!=pr&&(mr=mr*BASE+(br[1]||0)),ur=mr/Er|0,ur>1?(ur>=BASE&&(ur=BASE-1),hr=tr(Or,ur),dr=hr.length,pr=br.length,cr=er(hr,br,dr,pr),cr==1&&(ur--,rr(hr,Tr<dr?Rr:Or,dr))):(ur==0&&(cr=ur=1),hr=Or.slice()),dr=hr.length,dr<pr&&hr.unshift(0),rr(br,hr,pr),cr==-1&&(pr=br.length,cr=er(Or,br,Tr,pr),cr<1&&(ur++,rr(br,Tr<pr?Rr:Or,pr))),pr=br.length):cr===0&&(ur++,br=[0]),gr[or++]=ur,cr&&br[0]?br[pr++]=Ir[vr]||0:(br=[Ir[vr]],pr=1);while((vr++<_r||br[0]!==void 0)&&yr--)}return gr[0]||gr.shift(),fr.e=lr,round(fr,ar?sr+getBase10Exponent(fr)+1:sr)}}();function exp(tr,er){var rr,nr,ir,sr,ar,cr,lr=0,or=0,ur=tr.constructor,hr=ur.precision;if(getBase10Exponent(tr)>16)throw Error(exponentOutOfRange+getBase10Exponent(tr));if(!tr.s)return new ur(ONE);for(external=!1,cr=hr,ar=new ur(.03125);tr.abs().gte(.1);)tr=tr.times(ar),or+=5;for(nr=Math.log(mathpow(2,or))/Math.LN10*2+5|0,cr+=nr,rr=ir=sr=new ur(ONE),ur.precision=cr;;){if(ir=round(ir.times(tr),cr),rr=rr.times(++lr),ar=sr.plus(divide(ir,rr,cr)),digitsToString(ar.d).slice(0,cr)===digitsToString(sr.d).slice(0,cr)){for(;or--;)sr=round(sr.times(sr),cr);return ur.precision=hr,er==null?(external=!0,round(sr,hr)):sr}sr=ar}}function getBase10Exponent(tr){for(var er=tr.e*LOG_BASE,rr=tr.d[0];rr>=10;rr/=10)er++;return er}function getLn10(tr,er,rr){if(er>tr.LN10.sd())throw external=!0,rr&&(tr.precision=rr),Error(decimalError+"LN10 precision limit exceeded");return round(new tr(tr.LN10),er)}function getZeroString(tr){for(var er="";tr--;)er+="0";return er}function ln$1(tr,er){var rr,nr,ir,sr,ar,cr,lr,or,ur,hr=1,dr=10,fr=tr,gr=fr.d,br=fr.constructor,pr=br.precision;if(fr.s<1)throw Error(decimalError+(fr.s?"NaN":"-Infinity"));if(fr.eq(ONE))return new br(0);if(er==null?(external=!1,or=pr):or=er,fr.eq(10))return er==null&&(external=!0),getLn10(br,or);if(or+=dr,br.precision=or,rr=digitsToString(gr),nr=rr.charAt(0),sr=getBase10Exponent(fr),Math.abs(sr)<15e14){for(;nr<7&&nr!=1||nr==1&&rr.charAt(1)>3;)fr=fr.times(tr),rr=digitsToString(fr.d),nr=rr.charAt(0),hr++;sr=getBase10Exponent(fr),nr>1?(fr=new br("0."+rr),sr++):fr=new br(nr+"."+rr.slice(1))}else return lr=getLn10(br,or+2,pr).times(sr+""),fr=ln$1(new br(nr+"."+rr.slice(1)),or-dr).plus(lr),br.precision=pr,er==null?(external=!0,round(fr,pr)):fr;for(cr=ar=fr=divide(fr.minus(ONE),fr.plus(ONE),or),ur=round(fr.times(fr),or),ir=3;;){if(ar=round(ar.times(ur),or),lr=cr.plus(divide(ar,new br(ir),or)),digitsToString(lr.d).slice(0,or)===digitsToString(cr.d).slice(0,or))return cr=cr.times(2),sr!==0&&(cr=cr.plus(getLn10(br,or+2,pr).times(sr+""))),cr=divide(cr,new br(hr),or),br.precision=pr,er==null?(external=!0,round(cr,pr)):cr;cr=lr,ir+=2}}function parseDecimal(tr,er){var rr,nr,ir;for((rr=er.indexOf("."))>-1&&(er=er.replace(".","")),(nr=er.search(/e/i))>0?(rr<0&&(rr=nr),rr+=+er.slice(nr+1),er=er.substring(0,nr)):rr<0&&(rr=er.length),nr=0;er.charCodeAt(nr)===48;)++nr;for(ir=er.length;er.charCodeAt(ir-1)===48;)--ir;if(er=er.slice(nr,ir),er){if(ir-=nr,rr=rr-nr-1,tr.e=mathfloor(rr/LOG_BASE),tr.d=[],nr=(rr+1)%LOG_BASE,rr<0&&(nr+=LOG_BASE),nr<ir){for(nr&&tr.d.push(+er.slice(0,nr)),ir-=LOG_BASE;nr<ir;)tr.d.push(+er.slice(nr,nr+=LOG_BASE));er=er.slice(nr),nr=LOG_BASE-er.length}else nr-=ir;for(;nr--;)er+="0";if(tr.d.push(+er),external&&(tr.e>MAX_E||tr.e<-MAX_E))throw Error(exponentOutOfRange+rr)}else tr.s=0,tr.e=0,tr.d=[0];return tr}function round(tr,er,rr){var nr,ir,sr,ar,cr,lr,or,ur,hr=tr.d;for(ar=1,sr=hr[0];sr>=10;sr/=10)ar++;if(nr=er-ar,nr<0)nr+=LOG_BASE,ir=er,or=hr[ur=0];else{if(ur=Math.ceil((nr+1)/LOG_BASE),sr=hr.length,ur>=sr)return tr;for(or=sr=hr[ur],ar=1;sr>=10;sr/=10)ar++;nr%=LOG_BASE,ir=nr-LOG_BASE+ar}if(rr!==void 0&&(sr=mathpow(10,ar-ir-1),cr=or/sr%10|0,lr=er<0||hr[ur+1]!==void 0||or%sr,lr=rr<4?(cr||lr)&&(rr==0||rr==(tr.s<0?3:2)):cr>5||cr==5&&(rr==4||lr||rr==6&&(nr>0?ir>0?or/mathpow(10,ar-ir):0:hr[ur-1])%10&1||rr==(tr.s<0?8:7))),er<1||!hr[0])return lr?(sr=getBase10Exponent(tr),hr.length=1,er=er-sr-1,hr[0]=mathpow(10,(LOG_BASE-er%LOG_BASE)%LOG_BASE),tr.e=mathfloor(-er/LOG_BASE)||0):(hr.length=1,hr[0]=tr.e=tr.s=0),tr;if(nr==0?(hr.length=ur,sr=1,ur--):(hr.length=ur+1,sr=mathpow(10,LOG_BASE-nr),hr[ur]=ir>0?(or/mathpow(10,ar-ir)%mathpow(10,ir)|0)*sr:0),lr)for(;;)if(ur==0){(hr[0]+=sr)==BASE&&(hr[0]=1,++tr.e);break}else{if(hr[ur]+=sr,hr[ur]!=BASE)break;hr[ur--]=0,sr=1}for(nr=hr.length;hr[--nr]===0;)hr.pop();if(external&&(tr.e>MAX_E||tr.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(tr));return tr}function subtract(tr,er){var rr,nr,ir,sr,ar,cr,lr,or,ur,hr,dr=tr.constructor,fr=dr.precision;if(!tr.s||!er.s)return er.s?er.s=-er.s:er=new dr(tr),external?round(er,fr):er;if(lr=tr.d,hr=er.d,nr=er.e,or=tr.e,lr=lr.slice(),ar=or-nr,ar){for(ur=ar<0,ur?(rr=lr,ar=-ar,cr=hr.length):(rr=hr,nr=or,cr=lr.length),ir=Math.max(Math.ceil(fr/LOG_BASE),cr)+2,ar>ir&&(ar=ir,rr.length=1),rr.reverse(),ir=ar;ir--;)rr.push(0);rr.reverse()}else{for(ir=lr.length,cr=hr.length,ur=ir<cr,ur&&(cr=ir),ir=0;ir<cr;ir++)if(lr[ir]!=hr[ir]){ur=lr[ir]<hr[ir];break}ar=0}for(ur&&(rr=lr,lr=hr,hr=rr,er.s=-er.s),cr=lr.length,ir=hr.length-cr;ir>0;--ir)lr[cr++]=0;for(ir=hr.length;ir>ar;){if(lr[--ir]<hr[ir]){for(sr=ir;sr&&lr[--sr]===0;)lr[sr]=BASE-1;--lr[sr],lr[ir]+=BASE}lr[ir]-=hr[ir]}for(;lr[--cr]===0;)lr.pop();for(;lr[0]===0;lr.shift())--nr;return lr[0]?(er.d=lr,er.e=nr,external?round(er,fr):er):new dr(0)}function toString$1(tr,er,rr){var nr,ir=getBase10Exponent(tr),sr=digitsToString(tr.d),ar=sr.length;return er?(rr&&(nr=rr-ar)>0?sr=sr.charAt(0)+"."+sr.slice(1)+getZeroString(nr):ar>1&&(sr=sr.charAt(0)+"."+sr.slice(1)),sr=sr+(ir<0?"e":"e+")+ir):ir<0?(sr="0."+getZeroString(-ir-1)+sr,rr&&(nr=rr-ar)>0&&(sr+=getZeroString(nr))):ir>=ar?(sr+=getZeroString(ir+1-ar),rr&&(nr=rr-ir-1)>0&&(sr=sr+"."+getZeroString(nr))):((nr=ir+1)<ar&&(sr=sr.slice(0,nr)+"."+sr.slice(nr)),rr&&(nr=rr-ar)>0&&(ir+1===ar&&(sr+="."),sr+=getZeroString(nr))),tr.s<0?"-"+sr:sr}function truncate(tr,er){if(tr.length>er)return tr.length=er,!0}function clone(tr){var er,rr,nr;function ir(sr){var ar=this;if(!(ar instanceof ir))return new ir(sr);if(ar.constructor=ir,sr instanceof ir){ar.s=sr.s,ar.e=sr.e,ar.d=(sr=sr.d)?sr.slice():sr;return}if(typeof sr=="number"){if(sr*0!==0)throw Error(invalidArgument+sr);if(sr>0)ar.s=1;else if(sr<0)sr=-sr,ar.s=-1;else{ar.s=0,ar.e=0,ar.d=[0];return}if(sr===~~sr&&sr<1e7){ar.e=0,ar.d=[sr];return}return parseDecimal(ar,sr.toString())}else if(typeof sr!="string")throw Error(invalidArgument+sr);if(sr.charCodeAt(0)===45?(sr=sr.slice(1),ar.s=-1):ar.s=1,isDecimal.test(sr))parseDecimal(ar,sr);else throw Error(invalidArgument+sr)}if(ir.prototype=P$1,ir.ROUND_UP=0,ir.ROUND_DOWN=1,ir.ROUND_CEIL=2,ir.ROUND_FLOOR=3,ir.ROUND_HALF_UP=4,ir.ROUND_HALF_DOWN=5,ir.ROUND_HALF_EVEN=6,ir.ROUND_HALF_CEIL=7,ir.ROUND_HALF_FLOOR=8,ir.clone=clone,ir.config=ir.set=config,tr===void 0&&(tr={}),tr)for(nr=["precision","rounding","toExpNeg","toExpPos","LN10"],er=0;er<nr.length;)tr.hasOwnProperty(rr=nr[er++])||(tr[rr]=this[rr]);return ir.config(tr),ir}function config(tr){if(!tr||typeof tr!="object")throw Error(decimalError+"Object expected");var er,rr,nr,ir=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(er=0;er<ir.length;er+=3)if((nr=tr[rr=ir[er]])!==void 0)if(mathfloor(nr)===nr&&nr>=ir[er+1]&&nr<=ir[er+2])this[rr]=nr;else throw Error(invalidArgument+rr+": "+nr);if((nr=tr[rr="LN10"])!==void 0)if(nr==Math.LN10)this[rr]=new this(nr);else throw Error(invalidArgument+rr+": "+nr);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$b(tr){return _arrayWithoutHoles$b(tr)||_iterableToArray$c(tr)||_unsupportedIterableToArray$h(tr)||_nonIterableSpread$b()}function _nonIterableSpread$b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$h(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$h(tr,er)}}function _iterableToArray$c(tr){if(typeof Symbol<"u"&&Symbol.iterator in Object(tr))return Array.from(tr)}function _arrayWithoutHoles$b(tr){if(Array.isArray(tr))return _arrayLikeToArray$h(tr)}function _arrayLikeToArray$h(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}var identity$1=function tr(er){return er},PLACE_HOLDER={},isPlaceHolder=function tr(er){return er===PLACE_HOLDER},curry0=function tr(er){return function rr(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?rr:er.apply(void 0,arguments)}},curryN=function tr(er,rr){return er===1?rr:curry0(function(){for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];var ar=ir.filter(function(cr){return cr!==PLACE_HOLDER}).length;return ar>=er?rr.apply(void 0,ir):tr(er-ar,curry0(function(){for(var cr=arguments.length,lr=new Array(cr),or=0;or<cr;or++)lr[or]=arguments[or];var ur=ir.map(function(hr){return isPlaceHolder(hr)?lr.shift():hr});return rr.apply(void 0,_toConsumableArray$b(ur).concat(lr))}))})},curry=function tr(er){return curryN(er.length,er)},range$2=function tr(er,rr){for(var nr=[],ir=er;ir<rr;++ir)nr[ir-er]=ir;return nr},map=curry(function(tr,er){return Array.isArray(er)?er.map(tr):Object.keys(er).map(function(rr){return er[rr]}).map(tr)}),compose=function tr(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];if(!rr.length)return identity$1;var ir=rr.reverse(),sr=ir[0],ar=ir.slice(1);return function(){return ar.reduce(function(cr,lr){return lr(cr)},sr.apply(void 0,arguments))}},reverse=function tr(er){return Array.isArray(er)?er.reverse():er.split("").reverse.join("")},memoize=function tr(er){var rr=null,nr=null;return function(){for(var ir=arguments.length,sr=new Array(ir),ar=0;ar<ir;ar++)sr[ar]=arguments[ar];return rr&&sr.every(function(cr,lr){return cr===rr[lr]})||(rr=sr,nr=er.apply(void 0,sr)),nr}};function getDigitCount(tr){var er;return tr===0?er=1:er=Math.floor(new Decimal$1(tr).abs().log(10).toNumber())+1,er}function rangeStep(tr,er,rr){for(var nr=new Decimal$1(tr),ir=0,sr=[];nr.lt(er)&&ir<1e5;)sr.push(nr.toNumber()),nr=nr.add(rr),ir++;return sr}var interpolateNumber=curry(function(tr,er,rr){var nr=+tr,ir=+er;return nr+rr*(ir-nr)}),uninterpolateNumber=curry(function(tr,er,rr){var nr=er-+tr;return nr=nr||1/0,(rr-tr)/nr}),uninterpolateTruncation=curry(function(tr,er,rr){var nr=er-+tr;return nr=nr||1/0,Math.max(0,Math.min(1,(rr-tr)/nr))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$a(tr){return _arrayWithoutHoles$a(tr)||_iterableToArray$b(tr)||_unsupportedIterableToArray$g(tr)||_nonIterableSpread$a()}function _nonIterableSpread$a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$b(tr){if(typeof Symbol<"u"&&Symbol.iterator in Object(tr))return Array.from(tr)}function _arrayWithoutHoles$a(tr){if(Array.isArray(tr))return _arrayLikeToArray$g(tr)}function _slicedToArray$8(tr,er){return _arrayWithHoles$9(tr)||_iterableToArrayLimit$8(tr,er)||_unsupportedIterableToArray$g(tr,er)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$g(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$g(tr,er)}}function _arrayLikeToArray$g(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$8(tr,er){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(tr)))){var rr=[],nr=!0,ir=!1,sr=void 0;try{for(var ar=tr[Symbol.iterator](),cr;!(nr=(cr=ar.next()).done)&&(rr.push(cr.value),!(er&&rr.length===er));nr=!0);}catch(lr){ir=!0,sr=lr}finally{try{!nr&&ar.return!=null&&ar.return()}finally{if(ir)throw sr}}return rr}}function _arrayWithHoles$9(tr){if(Array.isArray(tr))return tr}function getValidInterval(tr){var er=_slicedToArray$8(tr,2),rr=er[0],nr=er[1],ir=rr,sr=nr;return rr>nr&&(ir=nr,sr=rr),[ir,sr]}function getFormatStep(tr,er,rr){if(tr.lte(0))return new Decimal$1(0);var nr=Arithmetic.getDigitCount(tr.toNumber()),ir=new Decimal$1(10).pow(nr),sr=tr.div(ir),ar=nr!==1?.05:.1,cr=new Decimal$1(Math.ceil(sr.div(ar).toNumber())).add(rr).mul(ar),lr=cr.mul(ir);return er?lr:new Decimal$1(Math.ceil(lr))}function getTickOfSingleValue(tr,er,rr){var nr=1,ir=new Decimal$1(tr);if(!ir.isint()&&rr){var sr=Math.abs(tr);sr<1?(nr=new Decimal$1(10).pow(Arithmetic.getDigitCount(tr)-1),ir=new Decimal$1(Math.floor(ir.div(nr).toNumber())).mul(nr)):sr>1&&(ir=new Decimal$1(Math.floor(tr)))}else tr===0?ir=new Decimal$1(Math.floor((er-1)/2)):rr||(ir=new Decimal$1(Math.floor(tr)));var ar=Math.floor((er-1)/2),cr=compose(map(function(lr){return ir.add(new Decimal$1(lr-ar).mul(nr)).toNumber()}),range$2);return cr(0,er)}function calculateStep(tr,er,rr,nr){var ir=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((er-tr)/(rr-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var sr=getFormatStep(new Decimal$1(er).sub(tr).div(rr-1),nr,ir),ar;tr<=0&&er>=0?ar=new Decimal$1(0):(ar=new Decimal$1(tr).add(er).div(2),ar=ar.sub(new Decimal$1(ar).mod(sr)));var cr=Math.ceil(ar.sub(tr).div(sr).toNumber()),lr=Math.ceil(new Decimal$1(er).sub(ar).div(sr).toNumber()),or=cr+lr+1;return or>rr?calculateStep(tr,er,rr,nr,ir+1):(or<rr&&(lr=er>0?lr+(rr-or):lr,cr=er>0?cr:cr+(rr-or)),{step:sr,tickMin:ar.sub(new Decimal$1(cr).mul(sr)),tickMax:ar.add(new Decimal$1(lr).mul(sr))})}function getNiceTickValuesFn(tr){var er=_slicedToArray$8(tr,2),rr=er[0],nr=er[1],ir=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ar=Math.max(ir,2),cr=getValidInterval([rr,nr]),lr=_slicedToArray$8(cr,2),or=lr[0],ur=lr[1];if(or===-1/0||ur===1/0){var hr=ur===1/0?[or].concat(_toConsumableArray$a(range$2(0,ir-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$a(range$2(0,ir-1).map(function(){return-1/0})),[ur]);return rr>nr?reverse(hr):hr}if(or===ur)return getTickOfSingleValue(or,ir,sr);var dr=calculateStep(or,ur,ar,sr),fr=dr.step,gr=dr.tickMin,br=dr.tickMax,pr=Arithmetic.rangeStep(gr,br.add(new Decimal$1(.1).mul(fr)),fr);return rr>nr?reverse(pr):pr}function getTickValuesFixedDomainFn(tr,er){var rr=_slicedToArray$8(tr,2),nr=rr[0],ir=rr[1],sr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ar=getValidInterval([nr,ir]),cr=_slicedToArray$8(ar,2),lr=cr[0],or=cr[1];if(lr===-1/0||or===1/0)return[nr,ir];if(lr===or)return[lr];var ur=Math.max(er,2),hr=getFormatStep(new Decimal$1(or).sub(lr).div(ur-1),sr,0),dr=[].concat(_toConsumableArray$a(Arithmetic.rangeStep(new Decimal$1(lr),new Decimal$1(or).sub(new Decimal$1(.99).mul(hr)),hr)),[or]);return nr>ir?reverse(dr):dr}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant(tr,er){throw new Error(prefix)}var _excluded$f=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _typeof$D(tr){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$D(tr)}function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$r.apply(this,arguments)}function _slicedToArray$7(tr,er){return _arrayWithHoles$8(tr)||_iterableToArrayLimit$7(tr,er)||_unsupportedIterableToArray$f(tr,er)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$f(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$f(tr,er)}}function _arrayLikeToArray$f(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$7(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$8(tr){if(Array.isArray(tr))return tr}function _objectWithoutProperties$f(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$f(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$f(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _classCallCheck$j(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$j(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$B(nr.key),nr)}}function _createClass$j(tr,er,rr){return er&&_defineProperties$j(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$g(tr,er,rr){return er=_getPrototypeOf$h(er),_possibleConstructorReturn$h(tr,_isNativeReflectConstruct$h()?Reflect.construct(er,rr||[],_getPrototypeOf$h(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$h(tr,er){if(er&&(_typeof$D(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$h(tr)}function _assertThisInitialized$h(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$h(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$h=function(){return!!tr})()}function _getPrototypeOf$h(tr){return _getPrototypeOf$h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$h(tr)}function _inherits$h(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$h(tr,er)}function _setPrototypeOf$h(tr,er){return _setPrototypeOf$h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$h(tr,er)}function _defineProperty$B(tr,er,rr){return er=_toPropertyKey$B(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$B(tr){var er=_toPrimitive$B(tr,"string");return _typeof$D(er)=="symbol"?er:er+""}function _toPrimitive$B(tr,er){if(_typeof$D(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$D(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var ErrorBar=function(tr){function er(){return _classCallCheck$j(this,er),_callSuper$g(this,er,arguments)}return _inherits$h(er,tr),_createClass$j(er,[{key:"render",value:function(){var nr=this.props,ir=nr.offset,sr=nr.layout,ar=nr.width,cr=nr.dataKey,lr=nr.data,or=nr.dataPointFormatter,ur=nr.xAxis,hr=nr.yAxis,dr=_objectWithoutProperties$f(nr,_excluded$f),fr=filterProps(dr,!1);this.props.direction==="x"&&ur.type!=="number"&&invariant();var gr=lr.map(function(br){var pr=or(br,cr),mr=pr.x,yr=pr.y,xr=pr.value,vr=pr.errorVal;if(!vr)return null;var _r=[],Er,Tr;if(Array.isArray(vr)){var Rr=_slicedToArray$7(vr,2);Er=Rr[0],Tr=Rr[1]}else Er=Tr=vr;if(sr==="vertical"){var Nr=ur.scale,Dr=yr+ir,Ir=Dr+ar,Or=Dr-ar,jr=Nr(xr-Er),Lr=Nr(xr+Tr);_r.push({x1:Lr,y1:Ir,x2:Lr,y2:Or}),_r.push({x1:jr,y1:Dr,x2:Lr,y2:Dr}),_r.push({x1:jr,y1:Ir,x2:jr,y2:Or})}else if(sr==="horizontal"){var Cr=hr.scale,wr=mr+ir,Pr=wr-ar,Ar=wr+ar,Sr=Cr(xr-Er),Mr=Cr(xr+Tr);_r.push({x1:Pr,y1:Mr,x2:Ar,y2:Mr}),_r.push({x1:wr,y1:Sr,x2:wr,y2:Mr}),_r.push({x1:Pr,y1:Sr,x2:Ar,y2:Sr})}return React.createElement(Layer,_extends$r({className:"recharts-errorBar",key:"bar-".concat(_r.map(function(qr){return"".concat(qr.x1,"-").concat(qr.x2,"-").concat(qr.y1,"-").concat(qr.y2)}))},fr),_r.map(function(qr){return React.createElement("line",_extends$r({},qr,{key:"line-".concat(qr.x1,"-").concat(qr.x2,"-").concat(qr.y1,"-").concat(qr.y2)}))}))});return React.createElement(Layer,{className:"recharts-errorBars"},gr)}}])}(React.Component);_defineProperty$B(ErrorBar,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_defineProperty$B(ErrorBar,"displayName","ErrorBar");function _typeof$C(tr){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$C(tr)}function ownKeys$w(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$w(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$w(Object(rr),!0).forEach(function(nr){_defineProperty$A(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$w(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$A(tr,er,rr){return er=_toPropertyKey$A(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$A(tr){var er=_toPrimitive$A(tr,"string");return _typeof$C(er)=="symbol"?er:er+""}function _toPrimitive$A(tr,er){if(_typeof$C(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$C(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var getLegendProps=function tr(er){var rr=er.children,nr=er.formattedGraphicalItems,ir=er.legendWidth,sr=er.legendContent,ar=findChildByType(rr,Legend);if(!ar)return null;var cr=Legend.defaultProps,lr=cr!==void 0?_objectSpread$w(_objectSpread$w({},cr),ar.props):{},or;return ar.props&&ar.props.payload?or=ar.props&&ar.props.payload:sr==="children"?or=(nr||[]).reduce(function(ur,hr){var dr=hr.item,fr=hr.props,gr=fr.sectors||fr.data||[];return ur.concat(gr.map(function(br){return{type:ar.props.iconType||dr.props.legendType,value:br.name,color:br.fill,payload:br}}))},[]):or=(nr||[]).map(function(ur){var hr=ur.item,dr=hr.type.defaultProps,fr=dr!==void 0?_objectSpread$w(_objectSpread$w({},dr),hr.props):{},gr=fr.dataKey,br=fr.name,pr=fr.legendType,mr=fr.hide;return{inactive:mr,dataKey:gr,type:lr.iconType||pr||"square",color:getMainColorOfGraphicItem(hr),value:br||gr,payload:fr}}),_objectSpread$w(_objectSpread$w(_objectSpread$w({},lr),Legend.getWithHeight(ar,ir)),{},{payload:or,item:ar})};function _typeof$B(tr){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$B(tr)}function _toConsumableArray$9(tr){return _arrayWithoutHoles$9(tr)||_iterableToArray$a(tr)||_unsupportedIterableToArray$e(tr)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$e(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$e(tr,er)}}function _iterableToArray$a(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$9(tr){if(Array.isArray(tr))return _arrayLikeToArray$e(tr)}function _arrayLikeToArray$e(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function ownKeys$v(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$v(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$v(Object(rr),!0).forEach(function(nr){_defineProperty$z(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$v(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$z(tr,er,rr){return er=_toPropertyKey$z(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$z(tr){var er=_toPrimitive$z(tr,"string");return _typeof$B(er)=="symbol"?er:er+""}function _toPrimitive$z(tr,er){if(_typeof$B(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$B(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function getValueByDataKey(tr,er,rr){return isNil$1(tr)||isNil$1(er)?rr:isNumOrStr(er)?get$2(tr,er,rr):isFunction$3(er)?er(tr):rr}function getDomainOfDataByKey(tr,er,rr,nr){var ir=flatMap$1(tr,function(cr){return getValueByDataKey(cr,er)});if(rr==="number"){var sr=ir.filter(function(cr){return isNumber(cr)||parseFloat(cr)});return sr.length?[min$1(sr),max$2(sr)]:[1/0,-1/0]}var ar=nr?ir.filter(function(cr){return!isNil$1(cr)}):ir;return ar.map(function(cr){return isNumOrStr(cr)||cr instanceof Date?cr:""})}var calculateActiveTickIndex=function tr(er){var rr,nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],ir=arguments.length>2?arguments[2]:void 0,sr=arguments.length>3?arguments[3]:void 0,ar=-1,cr=(rr=nr==null?void 0:nr.length)!==null&&rr!==void 0?rr:0;if(cr<=1)return 0;if(sr&&sr.axisType==="angleAxis"&&Math.abs(Math.abs(sr.range[1]-sr.range[0])-360)<=1e-6)for(var lr=sr.range,or=0;or<cr;or++){var ur=or>0?ir[or-1].coordinate:ir[cr-1].coordinate,hr=ir[or].coordinate,dr=or>=cr-1?ir[0].coordinate:ir[or+1].coordinate,fr=void 0;if(mathSign(hr-ur)!==mathSign(dr-hr)){var gr=[];if(mathSign(dr-hr)===mathSign(lr[1]-lr[0])){fr=dr;var br=hr+lr[1]-lr[0];gr[0]=Math.min(br,(br+ur)/2),gr[1]=Math.max(br,(br+ur)/2)}else{fr=ur;var pr=dr+lr[1]-lr[0];gr[0]=Math.min(hr,(pr+hr)/2),gr[1]=Math.max(hr,(pr+hr)/2)}var mr=[Math.min(hr,(fr+hr)/2),Math.max(hr,(fr+hr)/2)];if(er>mr[0]&&er<=mr[1]||er>=gr[0]&&er<=gr[1]){ar=ir[or].index;break}}else{var yr=Math.min(ur,dr),xr=Math.max(ur,dr);if(er>(yr+hr)/2&&er<=(xr+hr)/2){ar=ir[or].index;break}}}else for(var vr=0;vr<cr;vr++)if(vr===0&&er<=(nr[vr].coordinate+nr[vr+1].coordinate)/2||vr>0&&vr<cr-1&&er>(nr[vr].coordinate+nr[vr-1].coordinate)/2&&er<=(nr[vr].coordinate+nr[vr+1].coordinate)/2||vr===cr-1&&er>(nr[vr].coordinate+nr[vr-1].coordinate)/2){ar=nr[vr].index;break}return ar},getMainColorOfGraphicItem=function tr(er){var rr,nr=er,ir=nr.type.displayName,sr=(rr=er.type)!==null&&rr!==void 0&&rr.defaultProps?_objectSpread$v(_objectSpread$v({},er.type.defaultProps),er.props):er.props,ar=sr.stroke,cr=sr.fill,lr;switch(ir){case"Line":lr=ar;break;case"Area":case"Radar":lr=ar&&ar!=="none"?ar:cr;break;default:lr=cr;break}return lr},getBarSizeList=function tr(er){var rr=er.barSize,nr=er.totalSize,ir=er.stackGroups,sr=ir===void 0?{}:ir;if(!sr)return{};for(var ar={},cr=Object.keys(sr),lr=0,or=cr.length;lr<or;lr++)for(var ur=sr[cr[lr]].stackGroups,hr=Object.keys(ur),dr=0,fr=hr.length;dr<fr;dr++){var gr=ur[hr[dr]],br=gr.items,pr=gr.cateAxisId,mr=br.filter(function(Tr){return getDisplayName(Tr.type).indexOf("Bar")>=0});if(mr&&mr.length){var yr=mr[0].type.defaultProps,xr=yr!==void 0?_objectSpread$v(_objectSpread$v({},yr),mr[0].props):mr[0].props,vr=xr.barSize,_r=xr[pr];ar[_r]||(ar[_r]=[]);var Er=isNil$1(vr)?rr:vr;ar[_r].push({item:mr[0],stackList:mr.slice(1),barSize:isNil$1(Er)?void 0:getPercentValue(Er,nr,0)})}}return ar},getBarPosition=function tr(er){var rr=er.barGap,nr=er.barCategoryGap,ir=er.bandSize,sr=er.sizeList,ar=sr===void 0?[]:sr,cr=er.maxBarSize,lr=ar.length;if(lr<1)return null;var or=getPercentValue(rr,ir,0,!0),ur,hr=[];if(ar[0].barSize===+ar[0].barSize){var dr=!1,fr=ir/lr,gr=ar.reduce(function(vr,_r){return vr+_r.barSize||0},0);gr+=(lr-1)*or,gr>=ir&&(gr-=(lr-1)*or,or=0),gr>=ir&&fr>0&&(dr=!0,fr*=.9,gr=lr*fr);var br=(ir-gr)/2>>0,pr={offset:br-or,size:0};ur=ar.reduce(function(vr,_r){var Er={item:_r.item,position:{offset:pr.offset+pr.size+or,size:dr?fr:_r.barSize}},Tr=[].concat(_toConsumableArray$9(vr),[Er]);return pr=Tr[Tr.length-1].position,_r.stackList&&_r.stackList.length&&_r.stackList.forEach(function(Rr){Tr.push({item:Rr,position:pr})}),Tr},hr)}else{var mr=getPercentValue(nr,ir,0,!0);ir-2*mr-(lr-1)*or<=0&&(or=0);var yr=(ir-2*mr-(lr-1)*or)/lr;yr>1&&(yr>>=0);var xr=cr===+cr?Math.min(yr,cr):yr;ur=ar.reduce(function(vr,_r,Er){var Tr=[].concat(_toConsumableArray$9(vr),[{item:_r.item,position:{offset:mr+(yr+or)*Er+(yr-xr)/2,size:xr}}]);return _r.stackList&&_r.stackList.length&&_r.stackList.forEach(function(Rr){Tr.push({item:Rr,position:Tr[Tr.length-1].position})}),Tr},hr)}return ur},appendOffsetOfLegend=function tr(er,rr,nr,ir){var sr=nr.children,ar=nr.width,cr=nr.margin,lr=ar-(cr.left||0)-(cr.right||0),or=getLegendProps({children:sr,legendWidth:lr});if(or){var ur=ir||{},hr=ur.width,dr=ur.height,fr=or.align,gr=or.verticalAlign,br=or.layout;if((br==="vertical"||br==="horizontal"&&gr==="middle")&&fr!=="center"&&isNumber(er[fr]))return _objectSpread$v(_objectSpread$v({},er),{},_defineProperty$z({},fr,er[fr]+(hr||0)));if((br==="horizontal"||br==="vertical"&&fr==="center")&&gr!=="middle"&&isNumber(er[gr]))return _objectSpread$v(_objectSpread$v({},er),{},_defineProperty$z({},gr,er[gr]+(dr||0)))}return er},isErrorBarRelevantForAxis=function tr(er,rr,nr){return isNil$1(rr)?!0:er==="horizontal"?rr==="yAxis":er==="vertical"||nr==="x"?rr==="xAxis":nr==="y"?rr==="yAxis":!0},getDomainOfErrorBars=function tr(er,rr,nr,ir,sr){var ar=rr.props.children,cr=findAllByType(ar,ErrorBar).filter(function(or){return isErrorBarRelevantForAxis(ir,sr,or.props.direction)});if(cr&&cr.length){var lr=cr.map(function(or){return or.props.dataKey});return er.reduce(function(or,ur){var hr=getValueByDataKey(ur,nr);if(isNil$1(hr))return or;var dr=Array.isArray(hr)?[min$1(hr),max$2(hr)]:[hr,hr],fr=lr.reduce(function(gr,br){var pr=getValueByDataKey(ur,br,0),mr=dr[0]-Math.abs(Array.isArray(pr)?pr[0]:pr),yr=dr[1]+Math.abs(Array.isArray(pr)?pr[1]:pr);return[Math.min(mr,gr[0]),Math.max(yr,gr[1])]},[1/0,-1/0]);return[Math.min(fr[0],or[0]),Math.max(fr[1],or[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function tr(er,rr,nr,ir,sr){var ar=rr.map(function(cr){return getDomainOfErrorBars(er,cr,nr,sr,ir)}).filter(function(cr){return!isNil$1(cr)});return ar&&ar.length?ar.reduce(function(cr,lr){return[Math.min(cr[0],lr[0]),Math.max(cr[1],lr[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function tr(er,rr,nr,ir,sr){var ar=rr.map(function(lr){var or=lr.props.dataKey;return nr==="number"&&or&&getDomainOfErrorBars(er,lr,or,ir)||getDomainOfDataByKey(er,or,nr,sr)});if(nr==="number")return ar.reduce(function(lr,or){return[Math.min(lr[0],or[0]),Math.max(lr[1],or[1])]},[1/0,-1/0]);var cr={};return ar.reduce(function(lr,or){for(var ur=0,hr=or.length;ur<hr;ur++)cr[or[ur]]||(cr[or[ur]]=!0,lr.push(or[ur]));return lr},[])},isCategoricalAxis=function tr(er,rr){return er==="horizontal"&&rr==="xAxis"||er==="vertical"&&rr==="yAxis"||er==="centric"&&rr==="angleAxis"||er==="radial"&&rr==="radiusAxis"},getCoordinatesOfGrid=function tr(er,rr,nr,ir){if(ir)return er.map(function(lr){return lr.coordinate});var sr,ar,cr=er.map(function(lr){return lr.coordinate===rr&&(sr=!0),lr.coordinate===nr&&(ar=!0),lr.coordinate});return sr||cr.push(rr),ar||cr.push(nr),cr},getTicksOfAxis=function tr(er,rr,nr){if(!er)return null;var ir=er.scale,sr=er.duplicateDomain,ar=er.type,cr=er.range,lr=er.realScaleType==="scaleBand"?ir.bandwidth()/2:2,or=(rr||nr)&&ar==="category"&&ir.bandwidth?ir.bandwidth()/lr:0;if(or=er.axisType==="angleAxis"&&(cr==null?void 0:cr.length)>=2?mathSign(cr[0]-cr[1])*2*or:or,rr&&(er.ticks||er.niceTicks)){var ur=(er.ticks||er.niceTicks).map(function(hr){var dr=sr?sr.indexOf(hr):hr;return{coordinate:ir(dr)+or,value:hr,offset:or}});return ur.filter(function(hr){return!isNan(hr.coordinate)})}return er.isCategorical&&er.categoricalDomain?er.categoricalDomain.map(function(hr,dr){return{coordinate:ir(hr)+or,value:hr,index:dr,offset:or}}):ir.ticks&&!nr?ir.ticks(er.tickCount).map(function(hr){return{coordinate:ir(hr)+or,value:hr,offset:or}}):ir.domain().map(function(hr,dr){return{coordinate:ir(hr)+or,value:sr?sr[hr]:hr,index:dr,offset:or}})},handlerWeakMap=new WeakMap,combineEventHandlers=function tr(er,rr){if(typeof rr!="function")return er;handlerWeakMap.has(er)||handlerWeakMap.set(er,new WeakMap);var nr=handlerWeakMap.get(er);if(nr.has(rr))return nr.get(rr);var ir=function(){er.apply(void 0,arguments),rr.apply(void 0,arguments)};return nr.set(rr,ir),ir},parseScale=function tr(er,rr,nr){var ir=er.scale,sr=er.type,ar=er.layout,cr=er.axisType;if(ir==="auto")return ar==="radial"&&cr==="radiusAxis"?{scale:band(),realScaleType:"band"}:ar==="radial"&&cr==="angleAxis"?{scale:linear(),realScaleType:"linear"}:sr==="category"&&rr&&(rr.indexOf("LineChart")>=0||rr.indexOf("AreaChart")>=0||rr.indexOf("ComposedChart")>=0&&!nr)?{scale:point(),realScaleType:"point"}:sr==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString$1(ir)){var lr="scale".concat(upperFirst$1(ir));return{scale:(d3Scales[lr]||point)(),realScaleType:d3Scales[lr]?lr:"point"}}return isFunction$3(ir)?{scale:ir}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function tr(er){var rr=er.domain();if(!(!rr||rr.length<=2)){var nr=rr.length,ir=er.range(),sr=Math.min(ir[0],ir[1])-EPS,ar=Math.max(ir[0],ir[1])+EPS,cr=er(rr[0]),lr=er(rr[nr-1]);(cr<sr||cr>ar||lr<sr||lr>ar)&&er.domain([rr[0],rr[nr-1]])}},findPositionOfBar=function tr(er,rr){if(!er)return null;for(var nr=0,ir=er.length;nr<ir;nr++)if(er[nr].item===rr)return er[nr].position;return null},truncateByDomain=function tr(er,rr){if(!rr||rr.length!==2||!isNumber(rr[0])||!isNumber(rr[1]))return er;var nr=Math.min(rr[0],rr[1]),ir=Math.max(rr[0],rr[1]),sr=[er[0],er[1]];return(!isNumber(er[0])||er[0]<nr)&&(sr[0]=nr),(!isNumber(er[1])||er[1]>ir)&&(sr[1]=ir),sr[0]>ir&&(sr[0]=ir),sr[1]<nr&&(sr[1]=nr),sr},offsetSign=function tr(er){var rr=er.length;if(!(rr<=0))for(var nr=0,ir=er[0].length;nr<ir;++nr)for(var sr=0,ar=0,cr=0;cr<rr;++cr){var lr=isNan(er[cr][nr][1])?er[cr][nr][0]:er[cr][nr][1];lr>=0?(er[cr][nr][0]=sr,er[cr][nr][1]=sr+lr,sr=er[cr][nr][1]):(er[cr][nr][0]=ar,er[cr][nr][1]=ar+lr,ar=er[cr][nr][1])}},offsetPositive=function tr(er){var rr=er.length;if(!(rr<=0))for(var nr=0,ir=er[0].length;nr<ir;++nr)for(var sr=0,ar=0;ar<rr;++ar){var cr=isNan(er[ar][nr][1])?er[ar][nr][0]:er[ar][nr][1];cr>=0?(er[ar][nr][0]=sr,er[ar][nr][1]=sr+cr,sr=er[ar][nr][1]):(er[ar][nr][0]=0,er[ar][nr][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function tr(er,rr,nr){var ir=rr.map(function(cr){return cr.props.dataKey}),sr=STACK_OFFSET_MAP[nr],ar=shapeStack().keys(ir).value(function(cr,lr){return+getValueByDataKey(cr,lr,0)}).order(stackOrderNone).offset(sr);return ar(er)},getStackGroupsByAxisId=function tr(er,rr,nr,ir,sr,ar){if(!er)return null;var cr=ar?rr.reverse():rr,lr={},or=cr.reduce(function(hr,dr){var fr,gr=(fr=dr.type)!==null&&fr!==void 0&&fr.defaultProps?_objectSpread$v(_objectSpread$v({},dr.type.defaultProps),dr.props):dr.props,br=gr.stackId,pr=gr.hide;if(pr)return hr;var mr=gr[nr],yr=hr[mr]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(br)){var xr=yr.stackGroups[br]||{numericAxisId:nr,cateAxisId:ir,items:[]};xr.items.push(dr),yr.hasStack=!0,yr.stackGroups[br]=xr}else yr.stackGroups[uniqueId("_stackId_")]={numericAxisId:nr,cateAxisId:ir,items:[dr]};return _objectSpread$v(_objectSpread$v({},hr),{},_defineProperty$z({},mr,yr))},lr),ur={};return Object.keys(or).reduce(function(hr,dr){var fr=or[dr];if(fr.hasStack){var gr={};fr.stackGroups=Object.keys(fr.stackGroups).reduce(function(br,pr){var mr=fr.stackGroups[pr];return _objectSpread$v(_objectSpread$v({},br),{},_defineProperty$z({},pr,{numericAxisId:nr,cateAxisId:ir,items:mr.items,stackedData:getStackedData(er,mr.items,sr)}))},gr)}return _objectSpread$v(_objectSpread$v({},hr),{},_defineProperty$z({},dr,fr))},ur)},getTicksOfScale=function tr(er,rr){var nr=rr.realScaleType,ir=rr.type,sr=rr.tickCount,ar=rr.originalDomain,cr=rr.allowDecimals,lr=nr||rr.scale;if(lr!=="auto"&&lr!=="linear")return null;if(sr&&ir==="number"&&ar&&(ar[0]==="auto"||ar[1]==="auto")){var or=er.domain();if(!or.length)return null;var ur=getNiceTickValues(or,sr,cr);return er.domain([min$1(ur),max$2(ur)]),{niceTicks:ur}}if(sr&&ir==="number"){var hr=er.domain(),dr=getTickValuesFixedDomain(hr,sr,cr);return{niceTicks:dr}}return null};function getCateCoordinateOfLine(tr){var er=tr.axis,rr=tr.ticks,nr=tr.bandSize,ir=tr.entry,sr=tr.index,ar=tr.dataKey;if(er.type==="category"){if(!er.allowDuplicatedCategory&&er.dataKey&&!isNil$1(ir[er.dataKey])){var cr=findEntryInArray(rr,"value",ir[er.dataKey]);if(cr)return cr.coordinate+nr/2}return rr[sr]?rr[sr].coordinate+nr/2:null}var lr=getValueByDataKey(ir,isNil$1(ar)?er.dataKey:ar);return isNil$1(lr)?null:er.scale(lr)}var getCateCoordinateOfBar=function tr(er){var rr=er.axis,nr=er.ticks,ir=er.offset,sr=er.bandSize,ar=er.entry,cr=er.index;if(rr.type==="category")return nr[cr]?nr[cr].coordinate+ir:null;var lr=getValueByDataKey(ar,rr.dataKey,rr.domain[cr]);return isNil$1(lr)?null:rr.scale(lr)-sr/2+ir},getBaseValueOfBar=function tr(er){var rr=er.numericAxis,nr=rr.scale.domain();if(rr.type==="number"){var ir=Math.min(nr[0],nr[1]),sr=Math.max(nr[0],nr[1]);return ir<=0&&sr>=0?0:sr<0?sr:ir}return nr[0]},getStackedDataOfItem=function tr(er,rr){var nr,ir=(nr=er.type)!==null&&nr!==void 0&&nr.defaultProps?_objectSpread$v(_objectSpread$v({},er.type.defaultProps),er.props):er.props,sr=ir.stackId;if(isNumOrStr(sr)){var ar=rr[sr];if(ar){var cr=ar.items.indexOf(er);return cr>=0?ar.stackedData[cr]:null}}return null},getDomainOfSingle=function tr(er){return er.reduce(function(rr,nr){return[min$1(nr.concat([rr[0]]).filter(isNumber)),max$2(nr.concat([rr[1]]).filter(isNumber))]},[1/0,-1/0])},getDomainOfStackGroups=function tr(er,rr,nr){return Object.keys(er).reduce(function(ir,sr){var ar=er[sr],cr=ar.stackedData,lr=cr.reduce(function(or,ur){var hr=getDomainOfSingle(ur.slice(rr,nr+1));return[Math.min(or[0],hr[0]),Math.max(or[1],hr[1])]},[1/0,-1/0]);return[Math.min(lr[0],ir[0]),Math.max(lr[1],ir[1])]},[1/0,-1/0]).map(function(ir){return ir===1/0||ir===-1/0?0:ir})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function tr(er,rr,nr){if(isFunction$3(er))return er(rr,nr);if(!Array.isArray(er))return rr;var ir=[];if(isNumber(er[0]))ir[0]=nr?er[0]:Math.min(er[0],rr[0]);else if(MIN_VALUE_REG.test(er[0])){var sr=+MIN_VALUE_REG.exec(er[0])[1];ir[0]=rr[0]-sr}else isFunction$3(er[0])?ir[0]=er[0](rr[0]):ir[0]=rr[0];if(isNumber(er[1]))ir[1]=nr?er[1]:Math.max(er[1],rr[1]);else if(MAX_VALUE_REG.test(er[1])){var ar=+MAX_VALUE_REG.exec(er[1])[1];ir[1]=rr[1]+ar}else isFunction$3(er[1])?ir[1]=er[1](rr[1]):ir[1]=rr[1];return ir},getBandSizeOfAxis=function tr(er,rr,nr){if(er&&er.scale&&er.scale.bandwidth){var ir=er.scale.bandwidth();if(!nr||ir>0)return ir}if(er&&rr&&rr.length>=2){for(var sr=sortBy$1(rr,function(hr){return hr.coordinate}),ar=1/0,cr=1,lr=sr.length;cr<lr;cr++){var or=sr[cr],ur=sr[cr-1];ar=Math.min((or.coordinate||0)-(ur.coordinate||0),ar)}return ar===1/0?0:ar}return nr?void 0:0},parseDomainOfCategoryAxis=function tr(er,rr,nr){return!er||!er.length||isEqual$1(er,get$2(nr,"type.defaultProps.domain"))?rr:er},getTooltipItem=function tr(er,rr){var nr=er.type.defaultProps?_objectSpread$v(_objectSpread$v({},er.type.defaultProps),er.props):er.props,ir=nr.dataKey,sr=nr.name,ar=nr.unit,cr=nr.formatter,lr=nr.tooltipType,or=nr.chartType,ur=nr.hide;return _objectSpread$v(_objectSpread$v({},filterProps(er,!1)),{},{dataKey:ir,unit:ar,formatter:cr,name:sr||ir,color:getMainColorOfGraphicItem(er),value:getValueByDataKey(rr,ir),type:lr,payload:rr,chartType:or,hide:ur})};function _typeof$A(tr){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$A(tr)}function ownKeys$u(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$u(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$u(Object(rr),!0).forEach(function(nr){_defineProperty$y(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$u(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$y(tr,er,rr){return er=_toPropertyKey$y(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$y(tr){var er=_toPrimitive$y(tr,"string");return _typeof$A(er)=="symbol"?er:er+""}function _toPrimitive$y(tr,er){if(_typeof$A(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$A(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _slicedToArray$6(tr,er){return _arrayWithHoles$7(tr)||_iterableToArrayLimit$6(tr,er)||_unsupportedIterableToArray$d(tr,er)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$d(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$d(tr,er)}}function _arrayLikeToArray$d(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$6(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$7(tr){if(Array.isArray(tr))return tr}var RADIAN$1=Math.PI/180,radianToDegree=function tr(er){return er*180/Math.PI},polarToCartesian=function tr(er,rr,nr,ir){return{x:er+Math.cos(-RADIAN$1*ir)*nr,y:rr+Math.sin(-RADIAN$1*ir)*nr}},getMaxRadius=function tr(er,rr){var nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(er-(nr.left||0)-(nr.right||0)),Math.abs(rr-(nr.top||0)-(nr.bottom||0)))/2},formatAxisMap$1=function tr(er,rr,nr,ir,sr){var ar=er.width,cr=er.height,lr=er.startAngle,or=er.endAngle,ur=getPercentValue(er.cx,ar,ar/2),hr=getPercentValue(er.cy,cr,cr/2),dr=getMaxRadius(ar,cr,nr),fr=getPercentValue(er.innerRadius,dr,0),gr=getPercentValue(er.outerRadius,dr,dr*.8),br=Object.keys(rr);return br.reduce(function(pr,mr){var yr=rr[mr],xr=yr.domain,vr=yr.reversed,_r;if(isNil$1(yr.range))ir==="angleAxis"?_r=[lr,or]:ir==="radiusAxis"&&(_r=[fr,gr]),vr&&(_r=[_r[1],_r[0]]);else{_r=yr.range;var Er=_r,Tr=_slicedToArray$6(Er,2);lr=Tr[0],or=Tr[1]}var Rr=parseScale(yr,sr),Nr=Rr.realScaleType,Dr=Rr.scale;Dr.domain(xr).range(_r),checkDomainOfScale(Dr);var Ir=getTicksOfScale(Dr,_objectSpread$u(_objectSpread$u({},yr),{},{realScaleType:Nr})),Or=_objectSpread$u(_objectSpread$u(_objectSpread$u({},yr),Ir),{},{range:_r,radius:gr,realScaleType:Nr,scale:Dr,cx:ur,cy:hr,innerRadius:fr,outerRadius:gr,startAngle:lr,endAngle:or});return _objectSpread$u(_objectSpread$u({},pr),{},_defineProperty$y({},mr,Or))},{})},distanceBetweenPoints=function tr(er,rr){var nr=er.x,ir=er.y,sr=rr.x,ar=rr.y;return Math.sqrt(Math.pow(nr-sr,2)+Math.pow(ir-ar,2))},getAngleOfPoint=function tr(er,rr){var nr=er.x,ir=er.y,sr=rr.cx,ar=rr.cy,cr=distanceBetweenPoints({x:nr,y:ir},{x:sr,y:ar});if(cr<=0)return{radius:cr};var lr=(nr-sr)/cr,or=Math.acos(lr);return ir>ar&&(or=2*Math.PI-or),{radius:cr,angle:radianToDegree(or),angleInRadian:or}},formatAngleOfSector=function tr(er){var rr=er.startAngle,nr=er.endAngle,ir=Math.floor(rr/360),sr=Math.floor(nr/360),ar=Math.min(ir,sr);return{startAngle:rr-ar*360,endAngle:nr-ar*360}},reverseFormatAngleOfSetor=function tr(er,rr){var nr=rr.startAngle,ir=rr.endAngle,sr=Math.floor(nr/360),ar=Math.floor(ir/360),cr=Math.min(sr,ar);return er+cr*360},inRangeOfSector=function tr(er,rr){var nr=er.x,ir=er.y,sr=getAngleOfPoint({x:nr,y:ir},rr),ar=sr.radius,cr=sr.angle,lr=rr.innerRadius,or=rr.outerRadius;if(ar<lr||ar>or)return!1;if(ar===0)return!0;var ur=formatAngleOfSector(rr),hr=ur.startAngle,dr=ur.endAngle,fr=cr,gr;if(hr<=dr){for(;fr>dr;)fr-=360;for(;fr<hr;)fr+=360;gr=fr>=hr&&fr<=dr}else{for(;fr>hr;)fr-=360;for(;fr<dr;)fr+=360;gr=fr>=dr&&fr<=hr}return gr?_objectSpread$u(_objectSpread$u({},rr),{},{radius:ar,angle:reverseFormatAngleOfSetor(fr,rr)}):null},getTickClassName=function tr(er){return!reactExports.isValidElement(er)&&!isFunction$3(er)&&typeof er!="boolean"?er.className:""};function _typeof$z(tr){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$z(tr)}var _excluded$e=["offset"];function _toConsumableArray$8(tr){return _arrayWithoutHoles$8(tr)||_iterableToArray$9(tr)||_unsupportedIterableToArray$c(tr)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$c(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$c(tr,er)}}function _iterableToArray$9(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$8(tr){if(Array.isArray(tr))return _arrayLikeToArray$c(tr)}function _arrayLikeToArray$c(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _objectWithoutProperties$e(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$e(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$e(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function ownKeys$t(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$t(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$t(Object(rr),!0).forEach(function(nr){_defineProperty$x(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$t(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$x(tr,er,rr){return er=_toPropertyKey$x(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$x(tr){var er=_toPrimitive$x(tr,"string");return _typeof$z(er)=="symbol"?er:er+""}function _toPrimitive$x(tr,er){if(_typeof$z(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$z(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$q.apply(this,arguments)}var getLabel=function tr(er){var rr=er.value,nr=er.formatter,ir=isNil$1(er.children)?rr:er.children;return isFunction$3(nr)?nr(ir):ir},getDeltaAngle$1=function tr(er,rr){var nr=mathSign(rr-er),ir=Math.min(Math.abs(rr-er),360);return nr*ir},renderRadialLabel=function tr(er,rr,nr){var ir=er.position,sr=er.viewBox,ar=er.offset,cr=er.className,lr=sr,or=lr.cx,ur=lr.cy,hr=lr.innerRadius,dr=lr.outerRadius,fr=lr.startAngle,gr=lr.endAngle,br=lr.clockWise,pr=(hr+dr)/2,mr=getDeltaAngle$1(fr,gr),yr=mr>=0?1:-1,xr,vr;ir==="insideStart"?(xr=fr+yr*ar,vr=br):ir==="insideEnd"?(xr=gr-yr*ar,vr=!br):ir==="end"&&(xr=gr+yr*ar,vr=br),vr=mr<=0?vr:!vr;var _r=polarToCartesian(or,ur,pr,xr),Er=polarToCartesian(or,ur,pr,xr+(vr?1:-1)*359),Tr="M".concat(_r.x,",").concat(_r.y,`
    A`).concat(pr,",").concat(pr,",0,1,").concat(vr?0:1,`,
    `).concat(Er.x,",").concat(Er.y),Rr=isNil$1(er.id)?uniqueId("recharts-radial-line-"):er.id;return React.createElement("text",_extends$q({},nr,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",cr)}),React.createElement("defs",null,React.createElement("path",{id:Rr,d:Tr})),React.createElement("textPath",{xlinkHref:"#".concat(Rr)},rr))},getAttrsOfPolarLabel=function tr(er){var rr=er.viewBox,nr=er.offset,ir=er.position,sr=rr,ar=sr.cx,cr=sr.cy,lr=sr.innerRadius,or=sr.outerRadius,ur=sr.startAngle,hr=sr.endAngle,dr=(ur+hr)/2;if(ir==="outside"){var fr=polarToCartesian(ar,cr,or+nr,dr),gr=fr.x,br=fr.y;return{x:gr,y:br,textAnchor:gr>=ar?"start":"end",verticalAnchor:"middle"}}if(ir==="center")return{x:ar,y:cr,textAnchor:"middle",verticalAnchor:"middle"};if(ir==="centerTop")return{x:ar,y:cr,textAnchor:"middle",verticalAnchor:"start"};if(ir==="centerBottom")return{x:ar,y:cr,textAnchor:"middle",verticalAnchor:"end"};var pr=(lr+or)/2,mr=polarToCartesian(ar,cr,pr,dr),yr=mr.x,xr=mr.y;return{x:yr,y:xr,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function tr(er){var rr=er.viewBox,nr=er.parentViewBox,ir=er.offset,sr=er.position,ar=rr,cr=ar.x,lr=ar.y,or=ar.width,ur=ar.height,hr=ur>=0?1:-1,dr=hr*ir,fr=hr>0?"end":"start",gr=hr>0?"start":"end",br=or>=0?1:-1,pr=br*ir,mr=br>0?"end":"start",yr=br>0?"start":"end";if(sr==="top"){var xr={x:cr+or/2,y:lr-hr*ir,textAnchor:"middle",verticalAnchor:fr};return _objectSpread$t(_objectSpread$t({},xr),nr?{height:Math.max(lr-nr.y,0),width:or}:{})}if(sr==="bottom"){var vr={x:cr+or/2,y:lr+ur+dr,textAnchor:"middle",verticalAnchor:gr};return _objectSpread$t(_objectSpread$t({},vr),nr?{height:Math.max(nr.y+nr.height-(lr+ur),0),width:or}:{})}if(sr==="left"){var _r={x:cr-pr,y:lr+ur/2,textAnchor:mr,verticalAnchor:"middle"};return _objectSpread$t(_objectSpread$t({},_r),nr?{width:Math.max(_r.x-nr.x,0),height:ur}:{})}if(sr==="right"){var Er={x:cr+or+pr,y:lr+ur/2,textAnchor:yr,verticalAnchor:"middle"};return _objectSpread$t(_objectSpread$t({},Er),nr?{width:Math.max(nr.x+nr.width-Er.x,0),height:ur}:{})}var Tr=nr?{width:or,height:ur}:{};return sr==="insideLeft"?_objectSpread$t({x:cr+pr,y:lr+ur/2,textAnchor:yr,verticalAnchor:"middle"},Tr):sr==="insideRight"?_objectSpread$t({x:cr+or-pr,y:lr+ur/2,textAnchor:mr,verticalAnchor:"middle"},Tr):sr==="insideTop"?_objectSpread$t({x:cr+or/2,y:lr+dr,textAnchor:"middle",verticalAnchor:gr},Tr):sr==="insideBottom"?_objectSpread$t({x:cr+or/2,y:lr+ur-dr,textAnchor:"middle",verticalAnchor:fr},Tr):sr==="insideTopLeft"?_objectSpread$t({x:cr+pr,y:lr+dr,textAnchor:yr,verticalAnchor:gr},Tr):sr==="insideTopRight"?_objectSpread$t({x:cr+or-pr,y:lr+dr,textAnchor:mr,verticalAnchor:gr},Tr):sr==="insideBottomLeft"?_objectSpread$t({x:cr+pr,y:lr+ur-dr,textAnchor:yr,verticalAnchor:fr},Tr):sr==="insideBottomRight"?_objectSpread$t({x:cr+or-pr,y:lr+ur-dr,textAnchor:mr,verticalAnchor:fr},Tr):isObject$8(sr)&&(isNumber(sr.x)||isPercent(sr.x))&&(isNumber(sr.y)||isPercent(sr.y))?_objectSpread$t({x:cr+getPercentValue(sr.x,or),y:lr+getPercentValue(sr.y,ur),textAnchor:"end",verticalAnchor:"end"},Tr):_objectSpread$t({x:cr+or/2,y:lr+ur/2,textAnchor:"middle",verticalAnchor:"middle"},Tr)},isPolar=function tr(er){return"cx"in er&&isNumber(er.cx)};function Label(tr){var er=tr.offset,rr=er===void 0?5:er,nr=_objectWithoutProperties$e(tr,_excluded$e),ir=_objectSpread$t({offset:rr},nr),sr=ir.viewBox,ar=ir.position,cr=ir.value,lr=ir.children,or=ir.content,ur=ir.className,hr=ur===void 0?"":ur,dr=ir.textBreakAll;if(!sr||isNil$1(cr)&&isNil$1(lr)&&!reactExports.isValidElement(or)&&!isFunction$3(or))return null;if(reactExports.isValidElement(or))return reactExports.cloneElement(or,ir);var fr;if(isFunction$3(or)){if(fr=reactExports.createElement(or,ir),reactExports.isValidElement(fr))return fr}else fr=getLabel(ir);var gr=isPolar(sr),br=filterProps(ir,!0);if(gr&&(ar==="insideStart"||ar==="insideEnd"||ar==="end"))return renderRadialLabel(ir,fr,br);var pr=gr?getAttrsOfPolarLabel(ir):getAttrsOfCartesianLabel(ir);return React.createElement(Text,_extends$q({className:clsx("recharts-label",hr)},br,pr,{breakAll:dr}),fr)}Label.displayName="Label";var parseViewBox=function tr(er){var rr=er.cx,nr=er.cy,ir=er.angle,sr=er.startAngle,ar=er.endAngle,cr=er.r,lr=er.radius,or=er.innerRadius,ur=er.outerRadius,hr=er.x,dr=er.y,fr=er.top,gr=er.left,br=er.width,pr=er.height,mr=er.clockWise,yr=er.labelViewBox;if(yr)return yr;if(isNumber(br)&&isNumber(pr)){if(isNumber(hr)&&isNumber(dr))return{x:hr,y:dr,width:br,height:pr};if(isNumber(fr)&&isNumber(gr))return{x:fr,y:gr,width:br,height:pr}}return isNumber(hr)&&isNumber(dr)?{x:hr,y:dr,width:0,height:0}:isNumber(rr)&&isNumber(nr)?{cx:rr,cy:nr,startAngle:sr||ir||0,endAngle:ar||ir||0,innerRadius:or||0,outerRadius:ur||lr||cr||0,clockWise:mr}:er.viewBox?er.viewBox:{}},parseLabel=function tr(er,rr){return er?er===!0?React.createElement(Label,{key:"label-implicit",viewBox:rr}):isNumOrStr(er)?React.createElement(Label,{key:"label-implicit",viewBox:rr,value:er}):reactExports.isValidElement(er)?er.type===Label?reactExports.cloneElement(er,{key:"label-implicit",viewBox:rr}):React.createElement(Label,{key:"label-implicit",content:er,viewBox:rr}):isFunction$3(er)?React.createElement(Label,{key:"label-implicit",content:er,viewBox:rr}):isObject$8(er)?React.createElement(Label,_extends$q({viewBox:rr},er,{key:"label-implicit"})):null:null},renderCallByParent$1=function tr(er,rr){var nr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!er||!er.children&&nr&&!er.label)return null;var ir=er.children,sr=parseViewBox(er),ar=findAllByType(ir,Label).map(function(lr,or){return reactExports.cloneElement(lr,{viewBox:rr||sr,key:"label-".concat(or)})});if(!nr)return ar;var cr=parseLabel(er.label,rr||sr);return[cr].concat(_toConsumableArray$8(ar))};Label.parseViewBox=parseViewBox;Label.renderCallByParent=renderCallByParent$1;function last(tr){var er=tr==null?0:tr.length;return er?tr[er-1]:void 0}var last_1=last;const last$1=getDefaultExportFromCjs(last_1);function _typeof$y(tr){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$y(tr)}var _excluded$d=["valueAccessor"],_excluded2$6=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$7(tr){return _arrayWithoutHoles$7(tr)||_iterableToArray$8(tr)||_unsupportedIterableToArray$b(tr)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$b(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$b(tr,er)}}function _iterableToArray$8(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$7(tr){if(Array.isArray(tr))return _arrayLikeToArray$b(tr)}function _arrayLikeToArray$b(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$p.apply(this,arguments)}function ownKeys$s(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$s(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$s(Object(rr),!0).forEach(function(nr){_defineProperty$w(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$s(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$w(tr,er,rr){return er=_toPropertyKey$w(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$w(tr){var er=_toPrimitive$w(tr,"string");return _typeof$y(er)=="symbol"?er:er+""}function _toPrimitive$w(tr,er){if(_typeof$y(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$y(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _objectWithoutProperties$d(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$d(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$d(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}var defaultAccessor=function tr(er){return Array.isArray(er.value)?last$1(er.value):er.value};function LabelList(tr){var er=tr.valueAccessor,rr=er===void 0?defaultAccessor:er,nr=_objectWithoutProperties$d(tr,_excluded$d),ir=nr.data,sr=nr.dataKey,ar=nr.clockWise,cr=nr.id,lr=nr.textBreakAll,or=_objectWithoutProperties$d(nr,_excluded2$6);return!ir||!ir.length?null:React.createElement(Layer,{className:"recharts-label-list"},ir.map(function(ur,hr){var dr=isNil$1(sr)?rr(ur,hr):getValueByDataKey(ur&&ur.payload,sr),fr=isNil$1(cr)?{}:{id:"".concat(cr,"-").concat(hr)};return React.createElement(Label,_extends$p({},filterProps(ur,!0),or,fr,{parentViewBox:ur.parentViewBox,value:dr,textBreakAll:lr,viewBox:Label.parseViewBox(isNil$1(ar)?ur:_objectSpread$s(_objectSpread$s({},ur),{},{clockWise:ar})),key:"label-".concat(hr),index:hr}))}))}LabelList.displayName="LabelList";function parseLabelList(tr,er){return tr?tr===!0?React.createElement(LabelList,{key:"labelList-implicit",data:er}):React.isValidElement(tr)||isFunction$3(tr)?React.createElement(LabelList,{key:"labelList-implicit",data:er,content:tr}):isObject$8(tr)?React.createElement(LabelList,_extends$p({data:er},tr,{key:"labelList-implicit"})):null:null}function renderCallByParent(tr,er){var rr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!tr||!tr.children&&rr&&!tr.label)return null;var nr=tr.children,ir=findAllByType(nr,LabelList).map(function(ar,cr){return reactExports.cloneElement(ar,{data:er,key:"labelList-".concat(cr)})});if(!rr)return ir;var sr=parseLabelList(tr.label,er);return[sr].concat(_toConsumableArray$7(ir))}LabelList.renderCallByParent=renderCallByParent;function _typeof$x(tr){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$x(tr)}function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$o.apply(this,arguments)}function ownKeys$r(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$r(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$r(Object(rr),!0).forEach(function(nr){_defineProperty$v(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$r(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$v(tr,er,rr){return er=_toPropertyKey$v(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$v(tr){var er=_toPrimitive$v(tr,"string");return _typeof$x(er)=="symbol"?er:er+""}function _toPrimitive$v(tr,er){if(_typeof$x(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$x(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var getDeltaAngle=function tr(er,rr){var nr=mathSign(rr-er),ir=Math.min(Math.abs(rr-er),359.999);return nr*ir},getTangentCircle=function tr(er){var rr=er.cx,nr=er.cy,ir=er.radius,sr=er.angle,ar=er.sign,cr=er.isExternal,lr=er.cornerRadius,or=er.cornerIsExternal,ur=lr*(cr?1:-1)+ir,hr=Math.asin(lr/ur)/RADIAN$1,dr=or?sr:sr+ar*hr,fr=polarToCartesian(rr,nr,ur,dr),gr=polarToCartesian(rr,nr,ir,dr),br=or?sr-ar*hr:sr,pr=polarToCartesian(rr,nr,ur*Math.cos(hr*RADIAN$1),br);return{center:fr,circleTangency:gr,lineTangency:pr,theta:hr}},getSectorPath=function tr(er){var rr=er.cx,nr=er.cy,ir=er.innerRadius,sr=er.outerRadius,ar=er.startAngle,cr=er.endAngle,lr=getDeltaAngle(ar,cr),or=ar+lr,ur=polarToCartesian(rr,nr,sr,ar),hr=polarToCartesian(rr,nr,sr,or),dr="M ".concat(ur.x,",").concat(ur.y,`
    A `).concat(sr,",").concat(sr,`,0,
    `).concat(+(Math.abs(lr)>180),",").concat(+(ar>or),`,
    `).concat(hr.x,",").concat(hr.y,`
  `);if(ir>0){var fr=polarToCartesian(rr,nr,ir,ar),gr=polarToCartesian(rr,nr,ir,or);dr+="L ".concat(gr.x,",").concat(gr.y,`
            A `).concat(ir,",").concat(ir,`,0,
            `).concat(+(Math.abs(lr)>180),",").concat(+(ar<=or),`,
            `).concat(fr.x,",").concat(fr.y," Z")}else dr+="L ".concat(rr,",").concat(nr," Z");return dr},getSectorWithCorner=function tr(er){var rr=er.cx,nr=er.cy,ir=er.innerRadius,sr=er.outerRadius,ar=er.cornerRadius,cr=er.forceCornerRadius,lr=er.cornerIsExternal,or=er.startAngle,ur=er.endAngle,hr=mathSign(ur-or),dr=getTangentCircle({cx:rr,cy:nr,radius:sr,angle:or,sign:hr,cornerRadius:ar,cornerIsExternal:lr}),fr=dr.circleTangency,gr=dr.lineTangency,br=dr.theta,pr=getTangentCircle({cx:rr,cy:nr,radius:sr,angle:ur,sign:-hr,cornerRadius:ar,cornerIsExternal:lr}),mr=pr.circleTangency,yr=pr.lineTangency,xr=pr.theta,vr=lr?Math.abs(or-ur):Math.abs(or-ur)-br-xr;if(vr<0)return cr?"M ".concat(gr.x,",").concat(gr.y,`
        a`).concat(ar,",").concat(ar,",0,0,1,").concat(ar*2,`,0
        a`).concat(ar,",").concat(ar,",0,0,1,").concat(-ar*2,`,0
      `):getSectorPath({cx:rr,cy:nr,innerRadius:ir,outerRadius:sr,startAngle:or,endAngle:ur});var _r="M ".concat(gr.x,",").concat(gr.y,`
    A`).concat(ar,",").concat(ar,",0,0,").concat(+(hr<0),",").concat(fr.x,",").concat(fr.y,`
    A`).concat(sr,",").concat(sr,",0,").concat(+(vr>180),",").concat(+(hr<0),",").concat(mr.x,",").concat(mr.y,`
    A`).concat(ar,",").concat(ar,",0,0,").concat(+(hr<0),",").concat(yr.x,",").concat(yr.y,`
  `);if(ir>0){var Er=getTangentCircle({cx:rr,cy:nr,radius:ir,angle:or,sign:hr,isExternal:!0,cornerRadius:ar,cornerIsExternal:lr}),Tr=Er.circleTangency,Rr=Er.lineTangency,Nr=Er.theta,Dr=getTangentCircle({cx:rr,cy:nr,radius:ir,angle:ur,sign:-hr,isExternal:!0,cornerRadius:ar,cornerIsExternal:lr}),Ir=Dr.circleTangency,Or=Dr.lineTangency,jr=Dr.theta,Lr=lr?Math.abs(or-ur):Math.abs(or-ur)-Nr-jr;if(Lr<0&&ar===0)return"".concat(_r,"L").concat(rr,",").concat(nr,"Z");_r+="L".concat(Or.x,",").concat(Or.y,`
      A`).concat(ar,",").concat(ar,",0,0,").concat(+(hr<0),",").concat(Ir.x,",").concat(Ir.y,`
      A`).concat(ir,",").concat(ir,",0,").concat(+(Lr>180),",").concat(+(hr>0),",").concat(Tr.x,",").concat(Tr.y,`
      A`).concat(ar,",").concat(ar,",0,0,").concat(+(hr<0),",").concat(Rr.x,",").concat(Rr.y,"Z")}else _r+="L".concat(rr,",").concat(nr,"Z");return _r},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function tr(er){var rr=_objectSpread$r(_objectSpread$r({},defaultProps$3),er),nr=rr.cx,ir=rr.cy,sr=rr.innerRadius,ar=rr.outerRadius,cr=rr.cornerRadius,lr=rr.forceCornerRadius,or=rr.cornerIsExternal,ur=rr.startAngle,hr=rr.endAngle,dr=rr.className;if(ar<sr||ur===hr)return null;var fr=clsx("recharts-sector",dr),gr=ar-sr,br=getPercentValue(cr,gr,0,!0),pr;return br>0&&Math.abs(ur-hr)<360?pr=getSectorWithCorner({cx:nr,cy:ir,innerRadius:sr,outerRadius:ar,cornerRadius:Math.min(br,gr/2),forceCornerRadius:lr,cornerIsExternal:or,startAngle:ur,endAngle:hr}):pr=getSectorPath({cx:nr,cy:ir,innerRadius:sr,outerRadius:ar,startAngle:ur,endAngle:hr}),React.createElement("path",_extends$o({},filterProps(rr,!0),{className:fr,d:pr,role:"img"}))};function _typeof$w(tr){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$w(tr)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$n.apply(this,arguments)}function ownKeys$q(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$q(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$q(Object(rr),!0).forEach(function(nr){_defineProperty$u(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$q(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$u(tr,er,rr){return er=_toPropertyKey$u(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$u(tr){var er=_toPrimitive$u(tr,"string");return _typeof$w(er)=="symbol"?er:er+""}function _toPrimitive$u(tr,er){if(_typeof$w(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$w(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function tr(er){return er.x===+er.x&&er.y===+er.y},getX=function tr(er){return er.x},getY=function tr(er){return er.y},getCurveFactory=function tr(er,rr){if(isFunction$3(er))return er;var nr="curve".concat(upperFirst$1(er));return(nr==="curveMonotone"||nr==="curveBump")&&rr?CURVE_FACTORIES["".concat(nr).concat(rr==="vertical"?"Y":"X")]:CURVE_FACTORIES[nr]||curveLinear},getPath$1=function tr(er){var rr=er.type,nr=rr===void 0?"linear":rr,ir=er.points,sr=ir===void 0?[]:ir,ar=er.baseLine,cr=er.layout,lr=er.connectNulls,or=lr===void 0?!1:lr,ur=getCurveFactory(nr,cr),hr=or?sr.filter(function(br){return defined(br)}):sr,dr;if(Array.isArray(ar)){var fr=or?ar.filter(function(br){return defined(br)}):ar,gr=hr.map(function(br,pr){return _objectSpread$q(_objectSpread$q({},br),{},{base:fr[pr]})});return cr==="vertical"?dr=shapeArea().y(getY).x1(getX).x0(function(br){return br.base.x}):dr=shapeArea().x(getX).y1(getY).y0(function(br){return br.base.y}),dr.defined(defined).curve(ur),dr(gr)}return cr==="vertical"&&isNumber(ar)?dr=shapeArea().y(getY).x1(getX).x0(ar):isNumber(ar)?dr=shapeArea().x(getX).y1(getY).y0(ar):dr=shapeLine().x(getX).y(getY),dr.defined(defined).curve(ur),dr(hr)},Curve=function tr(er){var rr=er.className,nr=er.points,ir=er.path,sr=er.pathRef;if((!nr||!nr.length)&&!ir)return null;var ar=nr&&nr.length?getPath$1(er):ir;return reactExports.createElement("path",_extends$n({},filterProps(er,!1),adaptEventHandlers(er),{className:clsx("recharts-curve",rr),d:ar,ref:sr}))},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function tr(nr,ir,sr,ar,cr,lr){if(lr!==ReactPropTypesSecret){var or=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw or.name="Invariant Violation",or}}tr.isRequired=tr;function er(){return tr}var rr={array:tr,bigint:tr,bool:tr,func:tr,number:tr,object:tr,string:tr,symbol:tr,any:tr,arrayOf:er,element:tr,elementType:tr,instanceOf:er,node:tr,objectOf:er,oneOf:er,oneOfType:er,shape:er,exact:er,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return rr.PropTypes=rr,rr};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports),{getOwnPropertyNames,getOwnPropertySymbols}=Object,{hasOwnProperty:hasOwnProperty$1}=Object.prototype;function combineComparators(tr,er){return function(nr,ir,sr){return tr(nr,ir,sr)&&er(nr,ir,sr)}}function createIsCircular(tr){return function(rr,nr,ir){if(!rr||!nr||typeof rr!="object"||typeof nr!="object")return tr(rr,nr,ir);const{cache:sr}=ir,ar=sr.get(rr),cr=sr.get(nr);if(ar&&cr)return ar===nr&&cr===rr;sr.set(rr,nr),sr.set(nr,rr);const lr=tr(rr,nr,ir);return sr.delete(rr),sr.delete(nr),lr}}function getShortTag(tr){return tr!=null?tr[Symbol.toStringTag]:void 0}function getStrictProperties(tr){return getOwnPropertyNames(tr).concat(getOwnPropertySymbols(tr))}const hasOwn=Object.hasOwn||((tr,er)=>hasOwnProperty$1.call(tr,er));function sameValueZeroEqual(tr,er){return tr===er||!tr&&!er&&tr!==tr&&er!==er}const PREACT_VNODE="__v",PREACT_OWNER="__o",REACT_OWNER="_owner",{getOwnPropertyDescriptor,keys:keys$1}=Object;function areArrayBuffersEqual(tr,er){return tr.byteLength===er.byteLength&&areTypedArraysEqual(new Uint8Array(tr),new Uint8Array(er))}function areArraysEqual(tr,er,rr){let nr=tr.length;if(er.length!==nr)return!1;for(;nr-- >0;)if(!rr.equals(tr[nr],er[nr],nr,nr,tr,er,rr))return!1;return!0}function areDataViewsEqual(tr,er){return tr.byteLength===er.byteLength&&areTypedArraysEqual(new Uint8Array(tr.buffer,tr.byteOffset,tr.byteLength),new Uint8Array(er.buffer,er.byteOffset,er.byteLength))}function areDatesEqual(tr,er){return sameValueZeroEqual(tr.getTime(),er.getTime())}function areErrorsEqual(tr,er){return tr.name===er.name&&tr.message===er.message&&tr.cause===er.cause&&tr.stack===er.stack}function areFunctionsEqual(tr,er){return tr===er}function areMapsEqual(tr,er,rr){const nr=tr.size;if(nr!==er.size)return!1;if(!nr)return!0;const ir=new Array(nr),sr=tr.entries();let ar,cr,lr=0;for(;(ar=sr.next())&&!ar.done;){const or=er.entries();let ur=!1,hr=0;for(;(cr=or.next())&&!cr.done;){if(ir[hr]){hr++;continue}const dr=ar.value,fr=cr.value;if(rr.equals(dr[0],fr[0],lr,hr,tr,er,rr)&&rr.equals(dr[1],fr[1],dr[0],fr[0],tr,er,rr)){ur=ir[hr]=!0;break}hr++}if(!ur)return!1;lr++}return!0}const areNumbersEqual=sameValueZeroEqual;function areObjectsEqual(tr,er,rr){const nr=keys$1(tr);let ir=nr.length;if(keys$1(er).length!==ir)return!1;for(;ir-- >0;)if(!isPropertyEqual(tr,er,rr,nr[ir]))return!1;return!0}function areObjectsEqualStrict(tr,er,rr){const nr=getStrictProperties(tr);let ir=nr.length;if(getStrictProperties(er).length!==ir)return!1;let sr,ar,cr;for(;ir-- >0;)if(sr=nr[ir],!isPropertyEqual(tr,er,rr,sr)||(ar=getOwnPropertyDescriptor(tr,sr),cr=getOwnPropertyDescriptor(er,sr),(ar||cr)&&(!ar||!cr||ar.configurable!==cr.configurable||ar.enumerable!==cr.enumerable||ar.writable!==cr.writable)))return!1;return!0}function arePrimitiveWrappersEqual(tr,er){return sameValueZeroEqual(tr.valueOf(),er.valueOf())}function areRegExpsEqual(tr,er){return tr.source===er.source&&tr.flags===er.flags}function areSetsEqual(tr,er,rr){const nr=tr.size;if(nr!==er.size)return!1;if(!nr)return!0;const ir=new Array(nr),sr=tr.values();let ar,cr;for(;(ar=sr.next())&&!ar.done;){const lr=er.values();let or=!1,ur=0;for(;(cr=lr.next())&&!cr.done;){if(!ir[ur]&&rr.equals(ar.value,cr.value,ar.value,cr.value,tr,er,rr)){or=ir[ur]=!0;break}ur++}if(!or)return!1}return!0}function areTypedArraysEqual(tr,er){let rr=tr.byteLength;if(er.byteLength!==rr||tr.byteOffset!==er.byteOffset)return!1;for(;rr-- >0;)if(tr[rr]!==er[rr])return!1;return!0}function areUrlsEqual(tr,er){return tr.hostname===er.hostname&&tr.pathname===er.pathname&&tr.protocol===er.protocol&&tr.port===er.port&&tr.hash===er.hash&&tr.username===er.username&&tr.password===er.password}function isPropertyEqual(tr,er,rr,nr){return(nr===REACT_OWNER||nr===PREACT_OWNER||nr===PREACT_VNODE)&&(tr.$$typeof||er.$$typeof)?!0:hasOwn(er,nr)&&rr.equals(tr[nr],er[nr],nr,nr,tr,er,rr)}const ARRAY_BUFFER_TAG="[object ArrayBuffer]",ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATA_VIEW_TAG="[object DataView]",DATE_TAG="[object Date]",ERROR_TAG="[object Error]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",TYPED_ARRAY_TAGS={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},URL_TAG="[object URL]",toString=Object.prototype.toString;function createEqualityComparator({areArrayBuffersEqual:tr,areArraysEqual:er,areDataViewsEqual:rr,areDatesEqual:nr,areErrorsEqual:ir,areFunctionsEqual:sr,areMapsEqual:ar,areNumbersEqual:cr,areObjectsEqual:lr,arePrimitiveWrappersEqual:or,areRegExpsEqual:ur,areSetsEqual:hr,areTypedArraysEqual:dr,areUrlsEqual:fr,unknownTagComparators:gr}){return function(pr,mr,yr){if(pr===mr)return!0;if(pr==null||mr==null)return!1;const xr=typeof pr;if(xr!==typeof mr)return!1;if(xr!=="object")return xr==="number"?cr(pr,mr,yr):xr==="function"?sr(pr,mr,yr):!1;const vr=pr.constructor;if(vr!==mr.constructor)return!1;if(vr===Object)return lr(pr,mr,yr);if(Array.isArray(pr))return er(pr,mr,yr);if(vr===Date)return nr(pr,mr,yr);if(vr===RegExp)return ur(pr,mr,yr);if(vr===Map)return ar(pr,mr,yr);if(vr===Set)return hr(pr,mr,yr);const _r=toString.call(pr);if(_r===DATE_TAG)return nr(pr,mr,yr);if(_r===REG_EXP_TAG)return ur(pr,mr,yr);if(_r===MAP_TAG)return ar(pr,mr,yr);if(_r===SET_TAG)return hr(pr,mr,yr);if(_r===OBJECT_TAG)return typeof pr.then!="function"&&typeof mr.then!="function"&&lr(pr,mr,yr);if(_r===URL_TAG)return fr(pr,mr,yr);if(_r===ERROR_TAG)return ir(pr,mr,yr);if(_r===ARGUMENTS_TAG)return lr(pr,mr,yr);if(TYPED_ARRAY_TAGS[_r])return dr(pr,mr,yr);if(_r===ARRAY_BUFFER_TAG)return tr(pr,mr,yr);if(_r===DATA_VIEW_TAG)return rr(pr,mr,yr);if(_r===BOOLEAN_TAG||_r===NUMBER_TAG||_r===STRING_TAG)return or(pr,mr,yr);if(gr){let Er=gr[_r];if(!Er){const Tr=getShortTag(pr);Tr&&(Er=gr[Tr])}if(Er)return Er(pr,mr,yr)}return!1}}function createEqualityComparatorConfig({circular:tr,createCustomConfig:er,strict:rr}){let nr={areArrayBuffersEqual,areArraysEqual:rr?areObjectsEqualStrict:areArraysEqual,areDataViewsEqual,areDatesEqual,areErrorsEqual,areFunctionsEqual,areMapsEqual:rr?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areNumbersEqual,areObjectsEqual:rr?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:rr?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:rr?combineComparators(areTypedArraysEqual,areObjectsEqualStrict):areTypedArraysEqual,areUrlsEqual,unknownTagComparators:void 0};if(er&&(nr=Object.assign({},nr,er(nr))),tr){const ir=createIsCircular(nr.areArraysEqual),sr=createIsCircular(nr.areMapsEqual),ar=createIsCircular(nr.areObjectsEqual),cr=createIsCircular(nr.areSetsEqual);nr=Object.assign({},nr,{areArraysEqual:ir,areMapsEqual:sr,areObjectsEqual:ar,areSetsEqual:cr})}return nr}function createInternalEqualityComparator(tr){return function(er,rr,nr,ir,sr,ar,cr){return tr(er,rr,cr)}}function createIsEqual({circular:tr,comparator:er,createState:rr,equals:nr,strict:ir}){if(rr)return function(cr,lr){const{cache:or=tr?new WeakMap:void 0,meta:ur}=rr();return er(cr,lr,{cache:or,equals:nr,meta:ur,strict:ir})};if(tr)return function(cr,lr){return er(cr,lr,{cache:new WeakMap,equals:nr,meta:void 0,strict:ir})};const sr={cache:void 0,equals:nr,meta:void 0,strict:ir};return function(cr,lr){return er(cr,lr,sr)}}const deepEqual=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({strict:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual});createCustomEqual({circular:!0,createInternalComparator:()=>sameValueZeroEqual,strict:!0});function createCustomEqual(tr={}){const{circular:er=!1,createInternalComparator:rr,createState:nr,strict:ir=!1}=tr,sr=createEqualityComparatorConfig(tr),ar=createEqualityComparator(sr),cr=rr?rr(ar):createInternalEqualityComparator(ar);return createIsEqual({circular:er,comparator:ar,createState:nr,equals:cr,strict:ir})}function safeRequestAnimationFrame(tr){typeof requestAnimationFrame<"u"&&requestAnimationFrame(tr)}function setRafTimeout(tr){var er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,rr=-1,nr=function ir(sr){rr<0&&(rr=sr),sr-rr>er?(tr(sr),rr=-1):safeRequestAnimationFrame(ir)};requestAnimationFrame(nr)}function _typeof$v(tr){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$v(tr)}function _toArray(tr){return _arrayWithHoles$6(tr)||_iterableToArray$7(tr)||_unsupportedIterableToArray$a(tr)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$a(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$a(tr,er)}}function _arrayLikeToArray$a(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArray$7(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithHoles$6(tr){if(Array.isArray(tr))return tr}function createAnimateManager(){var tr={},er=function(){return null},rr=!1,nr=function ir(sr){if(!rr){if(Array.isArray(sr)){if(!sr.length)return;var ar=sr,cr=_toArray(ar),lr=cr[0],or=cr.slice(1);if(typeof lr=="number"){setRafTimeout(ir.bind(null,or),lr);return}ir(lr),setRafTimeout(ir.bind(null,or));return}_typeof$v(sr)==="object"&&(tr=sr,er(tr)),typeof sr=="function"&&sr()}};return{stop:function(){rr=!0},start:function(sr){rr=!1,nr(sr)},subscribe:function(sr){return er=sr,function(){er=function(){return null}}}}}function _typeof$u(tr){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$u(tr)}function ownKeys$p(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$p(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$p(Object(rr),!0).forEach(function(nr){_defineProperty$t(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$p(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$t(tr,er,rr){return er=_toPropertyKey$t(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$t(tr){var er=_toPrimitive$t(tr,"string");return _typeof$u(er)==="symbol"?er:String(er)}function _toPrimitive$t(tr,er){if(_typeof$u(tr)!=="object"||tr===null)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$u(nr)!=="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var getIntersectionKeys=function tr(er,rr){return[Object.keys(er),Object.keys(rr)].reduce(function(nr,ir){return nr.filter(function(sr){return ir.includes(sr)})})},identity=function tr(er){return er},getDashCase=function tr(er){return er.replace(/([A-Z])/g,function(rr){return"-".concat(rr.toLowerCase())})},mapObject=function tr(er,rr){return Object.keys(rr).reduce(function(nr,ir){return _objectSpread$p(_objectSpread$p({},nr),{},_defineProperty$t({},ir,er(ir,rr[ir])))},{})},getTransitionVal=function tr(er,rr,nr){return er.map(function(ir){return"".concat(getDashCase(ir)," ").concat(rr,"ms ").concat(nr)}).join(",")};function _slicedToArray$5(tr,er){return _arrayWithHoles$5(tr)||_iterableToArrayLimit$5(tr,er)||_unsupportedIterableToArray$9(tr,er)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$5(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$5(tr){if(Array.isArray(tr))return tr}function _toConsumableArray$6(tr){return _arrayWithoutHoles$6(tr)||_iterableToArray$6(tr)||_unsupportedIterableToArray$9(tr)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$9(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$9(tr,er)}}function _iterableToArray$6(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$6(tr){if(Array.isArray(tr))return _arrayLikeToArray$9(tr)}function _arrayLikeToArray$9(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}var ACCURACY=1e-4,cubicBezierFactor=function tr(er,rr){return[0,3*er,3*rr-6*er,3*er-3*rr+1]},multyTime=function tr(er,rr){return er.map(function(nr,ir){return nr*Math.pow(rr,ir)}).reduce(function(nr,ir){return nr+ir})},cubicBezier=function tr(er,rr){return function(nr){var ir=cubicBezierFactor(er,rr);return multyTime(ir,nr)}},derivativeCubicBezier=function tr(er,rr){return function(nr){var ir=cubicBezierFactor(er,rr),sr=[].concat(_toConsumableArray$6(ir.map(function(ar,cr){return ar*cr}).slice(1)),[0]);return multyTime(sr,nr)}},configBezier=function tr(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];var ir=rr[0],sr=rr[1],ar=rr[2],cr=rr[3];if(rr.length===1)switch(rr[0]){case"linear":ir=0,sr=0,ar=1,cr=1;break;case"ease":ir=.25,sr=.1,ar=.25,cr=1;break;case"ease-in":ir=.42,sr=0,ar=1,cr=1;break;case"ease-out":ir=.42,sr=0,ar=.58,cr=1;break;case"ease-in-out":ir=0,sr=0,ar=.58,cr=1;break;default:{var lr=rr[0].split("(");if(lr[0]==="cubic-bezier"&&lr[1].split(")")[0].split(",").length===4){var or=lr[1].split(")")[0].split(",").map(function(pr){return parseFloat(pr)}),ur=_slicedToArray$5(or,4);ir=ur[0],sr=ur[1],ar=ur[2],cr=ur[3]}}}var hr=cubicBezier(ir,ar),dr=cubicBezier(sr,cr),fr=derivativeCubicBezier(ir,ar),gr=function(mr){return mr>1?1:mr<0?0:mr},br=function(mr){for(var yr=mr>1?1:mr,xr=yr,vr=0;vr<8;++vr){var _r=hr(xr)-yr,Er=fr(xr);if(Math.abs(_r-yr)<ACCURACY||Er<ACCURACY)return dr(xr);xr=gr(xr-_r/Er)}return dr(xr)};return br.isStepper=!1,br},configSpring=function tr(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rr=er.stiff,nr=rr===void 0?100:rr,ir=er.damping,sr=ir===void 0?8:ir,ar=er.dt,cr=ar===void 0?17:ar,lr=function(ur,hr,dr){var fr=-(ur-hr)*nr,gr=dr*sr,br=dr+(fr-gr)*cr/1e3,pr=dr*cr/1e3+ur;return Math.abs(pr-hr)<ACCURACY&&Math.abs(br)<ACCURACY?[hr,0]:[pr,br]};return lr.isStepper=!0,lr.dt=cr,lr},configEasing=function tr(){for(var er=arguments.length,rr=new Array(er),nr=0;nr<er;nr++)rr[nr]=arguments[nr];var ir=rr[0];if(typeof ir=="string")switch(ir){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(ir);case"spring":return configSpring();default:if(ir.split("(")[0]==="cubic-bezier")return configBezier(ir)}return typeof ir=="function"?ir:null};function _typeof$t(tr){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$t(tr)}function _toConsumableArray$5(tr){return _arrayWithoutHoles$5(tr)||_iterableToArray$5(tr)||_unsupportedIterableToArray$8(tr)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$5(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$5(tr){if(Array.isArray(tr))return _arrayLikeToArray$8(tr)}function ownKeys$o(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$o(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$o(Object(rr),!0).forEach(function(nr){_defineProperty$s(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$o(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$s(tr,er,rr){return er=_toPropertyKey$s(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$s(tr){var er=_toPrimitive$s(tr,"string");return _typeof$t(er)==="symbol"?er:String(er)}function _toPrimitive$s(tr,er){if(_typeof$t(tr)!=="object"||tr===null)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$t(nr)!=="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _slicedToArray$4(tr,er){return _arrayWithHoles$4(tr)||_iterableToArrayLimit$4(tr,er)||_unsupportedIterableToArray$8(tr,er)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$8(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$8(tr,er)}}function _arrayLikeToArray$8(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$4(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$4(tr){if(Array.isArray(tr))return tr}var alpha=function tr(er,rr,nr){return er+(rr-er)*nr},needContinue=function tr(er){var rr=er.from,nr=er.to;return rr!==nr},calStepperVals=function tr(er,rr,nr){var ir=mapObject(function(sr,ar){if(needContinue(ar)){var cr=er(ar.from,ar.to,ar.velocity),lr=_slicedToArray$4(cr,2),or=lr[0],ur=lr[1];return _objectSpread$o(_objectSpread$o({},ar),{},{from:or,velocity:ur})}return ar},rr);return nr<1?mapObject(function(sr,ar){return needContinue(ar)?_objectSpread$o(_objectSpread$o({},ar),{},{velocity:alpha(ar.velocity,ir[sr].velocity,nr),from:alpha(ar.from,ir[sr].from,nr)}):ar},rr):tr(er,ir,nr-1)};const configUpdate=function(tr,er,rr,nr,ir){var sr=getIntersectionKeys(tr,er),ar=sr.reduce(function(pr,mr){return _objectSpread$o(_objectSpread$o({},pr),{},_defineProperty$s({},mr,[tr[mr],er[mr]]))},{}),cr=sr.reduce(function(pr,mr){return _objectSpread$o(_objectSpread$o({},pr),{},_defineProperty$s({},mr,{from:tr[mr],velocity:0,to:er[mr]}))},{}),lr=-1,or,ur,hr=function(){return null},dr=function(){return mapObject(function(mr,yr){return yr.from},cr)},fr=function(){return!Object.values(cr).filter(needContinue).length},gr=function(mr){or||(or=mr);var yr=mr-or,xr=yr/rr.dt;cr=calStepperVals(rr,cr,xr),ir(_objectSpread$o(_objectSpread$o(_objectSpread$o({},tr),er),dr())),or=mr,fr()||(lr=requestAnimationFrame(hr))},br=function(mr){ur||(ur=mr);var yr=(mr-ur)/nr,xr=mapObject(function(_r,Er){return alpha.apply(void 0,_toConsumableArray$5(Er).concat([rr(yr)]))},ar);if(ir(_objectSpread$o(_objectSpread$o(_objectSpread$o({},tr),er),xr)),yr<1)lr=requestAnimationFrame(hr);else{var vr=mapObject(function(_r,Er){return alpha.apply(void 0,_toConsumableArray$5(Er).concat([rr(1)]))},ar);ir(_objectSpread$o(_objectSpread$o(_objectSpread$o({},tr),er),vr))}};return hr=rr.isStepper?gr:br,function(){return requestAnimationFrame(hr),function(){cancelAnimationFrame(lr)}}};function _typeof$s(tr){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$s(tr)}var _excluded$c=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$c(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$c(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$c(tr,er){if(tr==null)return{};var rr={},nr=Object.keys(tr),ir,sr;for(sr=0;sr<nr.length;sr++)ir=nr[sr],!(er.indexOf(ir)>=0)&&(rr[ir]=tr[ir]);return rr}function _toConsumableArray$4(tr){return _arrayWithoutHoles$4(tr)||_iterableToArray$4(tr)||_unsupportedIterableToArray$7(tr)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$7(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$7(tr,er)}}function _iterableToArray$4(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$4(tr){if(Array.isArray(tr))return _arrayLikeToArray$7(tr)}function _arrayLikeToArray$7(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function ownKeys$n(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$n(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$n(Object(rr),!0).forEach(function(nr){_defineProperty$r(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$n(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$r(tr,er,rr){return er=_toPropertyKey$r(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _classCallCheck$i(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$i(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$r(nr.key),nr)}}function _createClass$i(tr,er,rr){return er&&_defineProperties$i(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _toPropertyKey$r(tr){var er=_toPrimitive$r(tr,"string");return _typeof$s(er)==="symbol"?er:String(er)}function _toPrimitive$r(tr,er){if(_typeof$s(tr)!=="object"||tr===null)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$s(nr)!=="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _inherits$g(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$g(tr,er)}function _setPrototypeOf$g(tr,er){return _setPrototypeOf$g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$g(tr,er)}function _createSuper(tr){var er=_isNativeReflectConstruct$g();return function(){var nr=_getPrototypeOf$g(tr),ir;if(er){var sr=_getPrototypeOf$g(this).constructor;ir=Reflect.construct(nr,arguments,sr)}else ir=nr.apply(this,arguments);return _possibleConstructorReturn$g(this,ir)}}function _possibleConstructorReturn$g(tr,er){if(er&&(_typeof$s(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$g(tr)}function _assertThisInitialized$g(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$g(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$g(tr){return _getPrototypeOf$g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$g(tr)}var Animate=function(tr){_inherits$g(rr,tr);var er=_createSuper(rr);function rr(nr,ir){var sr;_classCallCheck$i(this,rr),sr=er.call(this,nr,ir);var ar=sr.props,cr=ar.isActive,lr=ar.attributeName,or=ar.from,ur=ar.to,hr=ar.steps,dr=ar.children,fr=ar.duration;if(sr.handleStyleChange=sr.handleStyleChange.bind(_assertThisInitialized$g(sr)),sr.changeStyle=sr.changeStyle.bind(_assertThisInitialized$g(sr)),!cr||fr<=0)return sr.state={style:{}},typeof dr=="function"&&(sr.state={style:ur}),_possibleConstructorReturn$g(sr);if(hr&&hr.length)sr.state={style:hr[0].style};else if(or){if(typeof dr=="function")return sr.state={style:or},_possibleConstructorReturn$g(sr);sr.state={style:lr?_defineProperty$r({},lr,or):or}}else sr.state={style:{}};return sr}return _createClass$i(rr,[{key:"componentDidMount",value:function(){var ir=this.props,sr=ir.isActive,ar=ir.canBegin;this.mounted=!0,!(!sr||!ar)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(ir){var sr=this.props,ar=sr.isActive,cr=sr.canBegin,lr=sr.attributeName,or=sr.shouldReAnimate,ur=sr.to,hr=sr.from,dr=this.state.style;if(cr){if(!ar){var fr={style:lr?_defineProperty$r({},lr,ur):ur};this.state&&dr&&(lr&&dr[lr]!==ur||!lr&&dr!==ur)&&this.setState(fr);return}if(!(deepEqual(ir.to,ur)&&ir.canBegin&&ir.isActive)){var gr=!ir.canBegin||!ir.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var br=gr||or?hr:ir.to;if(this.state&&dr){var pr={style:lr?_defineProperty$r({},lr,br):br};(lr&&dr[lr]!==br||!lr&&dr!==br)&&this.setState(pr)}this.runAnimation(_objectSpread$n(_objectSpread$n({},this.props),{},{from:br,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var ir=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),ir&&ir()}},{key:"handleStyleChange",value:function(ir){this.changeStyle(ir)}},{key:"changeStyle",value:function(ir){this.mounted&&this.setState({style:ir})}},{key:"runJSAnimation",value:function(ir){var sr=this,ar=ir.from,cr=ir.to,lr=ir.duration,or=ir.easing,ur=ir.begin,hr=ir.onAnimationEnd,dr=ir.onAnimationStart,fr=configUpdate(ar,cr,configEasing(or),lr,this.changeStyle),gr=function(){sr.stopJSAnimation=fr()};this.manager.start([dr,ur,gr,lr,hr])}},{key:"runStepAnimation",value:function(ir){var sr=this,ar=ir.steps,cr=ir.begin,lr=ir.onAnimationStart,or=ar[0],ur=or.style,hr=or.duration,dr=hr===void 0?0:hr,fr=function(br,pr,mr){if(mr===0)return br;var yr=pr.duration,xr=pr.easing,vr=xr===void 0?"ease":xr,_r=pr.style,Er=pr.properties,Tr=pr.onAnimationEnd,Rr=mr>0?ar[mr-1]:pr,Nr=Er||Object.keys(_r);if(typeof vr=="function"||vr==="spring")return[].concat(_toConsumableArray$4(br),[sr.runJSAnimation.bind(sr,{from:Rr.style,to:_r,duration:yr,easing:vr}),yr]);var Dr=getTransitionVal(Nr,yr,vr),Ir=_objectSpread$n(_objectSpread$n(_objectSpread$n({},Rr.style),_r),{},{transition:Dr});return[].concat(_toConsumableArray$4(br),[Ir,yr,Tr]).filter(identity)};return this.manager.start([lr].concat(_toConsumableArray$4(ar.reduce(fr,[ur,Math.max(dr,cr)])),[ir.onAnimationEnd]))}},{key:"runAnimation",value:function(ir){this.manager||(this.manager=createAnimateManager());var sr=ir.begin,ar=ir.duration,cr=ir.attributeName,lr=ir.to,or=ir.easing,ur=ir.onAnimationStart,hr=ir.onAnimationEnd,dr=ir.steps,fr=ir.children,gr=this.manager;if(this.unSubscribe=gr.subscribe(this.handleStyleChange),typeof or=="function"||typeof fr=="function"||or==="spring"){this.runJSAnimation(ir);return}if(dr.length>1){this.runStepAnimation(ir);return}var br=cr?_defineProperty$r({},cr,lr):lr,pr=getTransitionVal(Object.keys(br),ar,or);gr.start([ur,sr,_objectSpread$n(_objectSpread$n({},br),{},{transition:pr}),ar,hr])}},{key:"render",value:function(){var ir=this.props,sr=ir.children;ir.begin;var ar=ir.duration;ir.attributeName,ir.easing;var cr=ir.isActive;ir.steps,ir.from,ir.to,ir.canBegin,ir.onAnimationEnd,ir.shouldReAnimate,ir.onAnimationReStart;var lr=_objectWithoutProperties$c(ir,_excluded$c),or=reactExports.Children.count(sr),ur=this.state.style;if(typeof sr=="function")return sr(ur);if(!cr||or===0||ar<=0)return sr;var hr=function(fr){var gr=fr.props,br=gr.style,pr=br===void 0?{}:br,mr=gr.className,yr=reactExports.cloneElement(fr,_objectSpread$n(_objectSpread$n({},lr),{},{style:_objectSpread$n(_objectSpread$n({},pr),ur),className:mr}));return yr};return or===1?hr(reactExports.Children.only(sr)):React.createElement("div",null,reactExports.Children.map(sr,function(dr){return hr(dr)}))}}]),rr}(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function tr(){},onAnimationStart:function tr(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};function _typeof$r(tr){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$r(tr)}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$m.apply(this,arguments)}function _slicedToArray$3(tr,er){return _arrayWithHoles$3(tr)||_iterableToArrayLimit$3(tr,er)||_unsupportedIterableToArray$6(tr,er)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$6(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$6(tr,er)}}function _arrayLikeToArray$6(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$3(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$3(tr){if(Array.isArray(tr))return tr}function ownKeys$m(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$m(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$m(Object(rr),!0).forEach(function(nr){_defineProperty$q(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$m(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$q(tr,er,rr){return er=_toPropertyKey$q(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$q(tr){var er=_toPrimitive$q(tr,"string");return _typeof$r(er)=="symbol"?er:er+""}function _toPrimitive$q(tr,er){if(_typeof$r(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$r(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var getRectanglePath=function tr(er,rr,nr,ir,sr){var ar=Math.min(Math.abs(nr)/2,Math.abs(ir)/2),cr=ir>=0?1:-1,lr=nr>=0?1:-1,or=ir>=0&&nr>=0||ir<0&&nr<0?1:0,ur;if(ar>0&&sr instanceof Array){for(var hr=[0,0,0,0],dr=0,fr=4;dr<fr;dr++)hr[dr]=sr[dr]>ar?ar:sr[dr];ur="M".concat(er,",").concat(rr+cr*hr[0]),hr[0]>0&&(ur+="A ".concat(hr[0],",").concat(hr[0],",0,0,").concat(or,",").concat(er+lr*hr[0],",").concat(rr)),ur+="L ".concat(er+nr-lr*hr[1],",").concat(rr),hr[1]>0&&(ur+="A ".concat(hr[1],",").concat(hr[1],",0,0,").concat(or,`,
        `).concat(er+nr,",").concat(rr+cr*hr[1])),ur+="L ".concat(er+nr,",").concat(rr+ir-cr*hr[2]),hr[2]>0&&(ur+="A ".concat(hr[2],",").concat(hr[2],",0,0,").concat(or,`,
        `).concat(er+nr-lr*hr[2],",").concat(rr+ir)),ur+="L ".concat(er+lr*hr[3],",").concat(rr+ir),hr[3]>0&&(ur+="A ".concat(hr[3],",").concat(hr[3],",0,0,").concat(or,`,
        `).concat(er,",").concat(rr+ir-cr*hr[3])),ur+="Z"}else if(ar>0&&sr===+sr&&sr>0){var gr=Math.min(ar,sr);ur="M ".concat(er,",").concat(rr+cr*gr,`
            A `).concat(gr,",").concat(gr,",0,0,").concat(or,",").concat(er+lr*gr,",").concat(rr,`
            L `).concat(er+nr-lr*gr,",").concat(rr,`
            A `).concat(gr,",").concat(gr,",0,0,").concat(or,",").concat(er+nr,",").concat(rr+cr*gr,`
            L `).concat(er+nr,",").concat(rr+ir-cr*gr,`
            A `).concat(gr,",").concat(gr,",0,0,").concat(or,",").concat(er+nr-lr*gr,",").concat(rr+ir,`
            L `).concat(er+lr*gr,",").concat(rr+ir,`
            A `).concat(gr,",").concat(gr,",0,0,").concat(or,",").concat(er,",").concat(rr+ir-cr*gr," Z")}else ur="M ".concat(er,",").concat(rr," h ").concat(nr," v ").concat(ir," h ").concat(-nr," Z");return ur},isInRectangle=function tr(er,rr){if(!er||!rr)return!1;var nr=er.x,ir=er.y,sr=rr.x,ar=rr.y,cr=rr.width,lr=rr.height;if(Math.abs(cr)>0&&Math.abs(lr)>0){var or=Math.min(sr,sr+cr),ur=Math.max(sr,sr+cr),hr=Math.min(ar,ar+lr),dr=Math.max(ar,ar+lr);return nr>=or&&nr<=ur&&ir>=hr&&ir<=dr}return!1},defaultProps$2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function tr(er){var rr=_objectSpread$m(_objectSpread$m({},defaultProps$2),er),nr=reactExports.useRef(),ir=reactExports.useState(-1),sr=_slicedToArray$3(ir,2),ar=sr[0],cr=sr[1];reactExports.useEffect(function(){if(nr.current&&nr.current.getTotalLength)try{var vr=nr.current.getTotalLength();vr&&cr(vr)}catch{}},[]);var lr=rr.x,or=rr.y,ur=rr.width,hr=rr.height,dr=rr.radius,fr=rr.className,gr=rr.animationEasing,br=rr.animationDuration,pr=rr.animationBegin,mr=rr.isAnimationActive,yr=rr.isUpdateAnimationActive;if(lr!==+lr||or!==+or||ur!==+ur||hr!==+hr||ur===0||hr===0)return null;var xr=clsx("recharts-rectangle",fr);return yr?React.createElement(Animate,{canBegin:ar>0,from:{width:ur,height:hr,x:lr,y:or},to:{width:ur,height:hr,x:lr,y:or},duration:br,animationEasing:gr,isActive:yr},function(vr){var _r=vr.width,Er=vr.height,Tr=vr.x,Rr=vr.y;return React.createElement(Animate,{canBegin:ar>0,from:"0px ".concat(ar===-1?1:ar,"px"),to:"".concat(ar,"px 0px"),attributeName:"strokeDasharray",begin:pr,duration:br,isActive:mr,easing:gr},React.createElement("path",_extends$m({},filterProps(rr,!0),{className:xr,d:getRectanglePath(Tr,Rr,_r,Er,dr),ref:nr})))}):React.createElement("path",_extends$m({},filterProps(rr,!0),{className:xr,d:getRectanglePath(lr,or,ur,hr,dr)}))},_excluded$b=["points","className","baseLinePoints","connectNulls"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$l.apply(this,arguments)}function _objectWithoutProperties$b(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$b(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$b(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _toConsumableArray$3(tr){return _arrayWithoutHoles$3(tr)||_iterableToArray$3(tr)||_unsupportedIterableToArray$5(tr)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$5(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$5(tr,er)}}function _iterableToArray$3(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$3(tr){if(Array.isArray(tr))return _arrayLikeToArray$5(tr)}function _arrayLikeToArray$5(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}var isValidatePoint=function tr(er){return er&&er.x===+er.x&&er.y===+er.y},getParsedPoints=function tr(){var er=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],rr=[[]];return er.forEach(function(nr){isValidatePoint(nr)?rr[rr.length-1].push(nr):rr[rr.length-1].length>0&&rr.push([])}),isValidatePoint(er[0])&&rr[rr.length-1].push(er[0]),rr[rr.length-1].length<=0&&(rr=rr.slice(0,-1)),rr},getSinglePolygonPath=function tr(er,rr){var nr=getParsedPoints(er);rr&&(nr=[nr.reduce(function(sr,ar){return[].concat(_toConsumableArray$3(sr),_toConsumableArray$3(ar))},[])]);var ir=nr.map(function(sr){return sr.reduce(function(ar,cr,lr){return"".concat(ar).concat(lr===0?"M":"L").concat(cr.x,",").concat(cr.y)},"")}).join("");return nr.length===1?"".concat(ir,"Z"):ir},getRanglePath=function tr(er,rr,nr){var ir=getSinglePolygonPath(er,nr);return"".concat(ir.slice(-1)==="Z"?ir.slice(0,-1):ir,"L").concat(getSinglePolygonPath(rr.reverse(),nr).slice(1))},Polygon=function tr(er){var rr=er.points,nr=er.className,ir=er.baseLinePoints,sr=er.connectNulls,ar=_objectWithoutProperties$b(er,_excluded$b);if(!rr||!rr.length)return null;var cr=clsx("recharts-polygon",nr);if(ir&&ir.length){var lr=ar.stroke&&ar.stroke!=="none",or=getRanglePath(rr,ir,sr);return React.createElement("g",{className:cr},React.createElement("path",_extends$l({},filterProps(ar,!0),{fill:or.slice(-1)==="Z"?ar.fill:"none",stroke:"none",d:or})),lr?React.createElement("path",_extends$l({},filterProps(ar,!0),{fill:"none",d:getSinglePolygonPath(rr,sr)})):null,lr?React.createElement("path",_extends$l({},filterProps(ar,!0),{fill:"none",d:getSinglePolygonPath(ir,sr)})):null)}var ur=getSinglePolygonPath(rr,sr);return React.createElement("path",_extends$l({},filterProps(ar,!0),{fill:ur.slice(-1)==="Z"?ar.fill:"none",className:cr,d:ur}))};function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$k.apply(this,arguments)}var Dot=function tr(er){var rr=er.cx,nr=er.cy,ir=er.r,sr=er.className,ar=clsx("recharts-dot",sr);return rr===+rr&&nr===+nr&&ir===+ir?reactExports.createElement("circle",_extends$k({},filterProps(er,!1),adaptEventHandlers(er),{className:ar,cx:rr,cy:nr,r:ir})):null};function _typeof$q(tr){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$q(tr)}var _excluded$a=["x","y","top","left","width","height","className"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$j.apply(this,arguments)}function ownKeys$l(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$l(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$l(Object(rr),!0).forEach(function(nr){_defineProperty$p(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$l(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$p(tr,er,rr){return er=_toPropertyKey$p(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$p(tr){var er=_toPrimitive$p(tr,"string");return _typeof$q(er)=="symbol"?er:er+""}function _toPrimitive$p(tr,er){if(_typeof$q(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$q(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _objectWithoutProperties$a(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$a(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$a(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}var getPath=function tr(er,rr,nr,ir,sr,ar){return"M".concat(er,",").concat(sr,"v").concat(ir,"M").concat(ar,",").concat(rr,"h").concat(nr)},Cross=function tr(er){var rr=er.x,nr=rr===void 0?0:rr,ir=er.y,sr=ir===void 0?0:ir,ar=er.top,cr=ar===void 0?0:ar,lr=er.left,or=lr===void 0?0:lr,ur=er.width,hr=ur===void 0?0:ur,dr=er.height,fr=dr===void 0?0:dr,gr=er.className,br=_objectWithoutProperties$a(er,_excluded$a),pr=_objectSpread$l({x:nr,y:sr,top:cr,left:or,width:hr,height:fr},br);return!isNumber(nr)||!isNumber(sr)||!isNumber(hr)||!isNumber(fr)||!isNumber(cr)||!isNumber(or)?null:React.createElement("path",_extends$j({},filterProps(pr,!0),{className:clsx("recharts-cross",gr),d:getPath(nr,sr,hr,fr,cr,or)}))},baseExtremum$1=_baseExtremum,baseGt=_baseGt,baseIteratee$6=_baseIteratee;function maxBy(tr,er){return tr&&tr.length?baseExtremum$1(tr,baseIteratee$6(er),baseGt):void 0}var maxBy_1=maxBy;const maxBy$1=getDefaultExportFromCjs(maxBy_1);var baseExtremum=_baseExtremum,baseIteratee$5=_baseIteratee,baseLt=_baseLt;function minBy(tr,er){return tr&&tr.length?baseExtremum(tr,baseIteratee$5(er),baseLt):void 0}var minBy_1=minBy;const minBy$1=getDefaultExportFromCjs(minBy_1);var _excluded$9=["cx","cy","angle","ticks","axisLine"],_excluded2$5=["ticks","tick","angle","tickFormatter","stroke"];function _typeof$p(tr){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$p(tr)}function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$i.apply(this,arguments)}function ownKeys$k(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$k(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$k(Object(rr),!0).forEach(function(nr){_defineProperty$o(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$k(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _objectWithoutProperties$9(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$9(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$9(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _classCallCheck$h(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$o(nr.key),nr)}}function _createClass$h(tr,er,rr){return er&&_defineProperties$h(tr.prototype,er),rr&&_defineProperties$h(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$f(tr,er,rr){return er=_getPrototypeOf$f(er),_possibleConstructorReturn$f(tr,_isNativeReflectConstruct$f()?Reflect.construct(er,rr||[],_getPrototypeOf$f(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$f(tr,er){if(er&&(_typeof$p(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$f(tr)}function _assertThisInitialized$f(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$f(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$f=function(){return!!tr})()}function _getPrototypeOf$f(tr){return _getPrototypeOf$f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$f(tr)}function _inherits$f(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$f(tr,er)}function _setPrototypeOf$f(tr,er){return _setPrototypeOf$f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$f(tr,er)}function _defineProperty$o(tr,er,rr){return er=_toPropertyKey$o(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$o(tr){var er=_toPrimitive$o(tr,"string");return _typeof$p(er)=="symbol"?er:er+""}function _toPrimitive$o(tr,er){if(_typeof$p(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$p(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var PolarRadiusAxis=function(tr){function er(){return _classCallCheck$h(this,er),_callSuper$f(this,er,arguments)}return _inherits$f(er,tr),_createClass$h(er,[{key:"getTickValueCoord",value:function(nr){var ir=nr.coordinate,sr=this.props,ar=sr.angle,cr=sr.cx,lr=sr.cy;return polarToCartesian(cr,lr,ir,ar)}},{key:"getTickTextAnchor",value:function(){var nr=this.props.orientation,ir;switch(nr){case"left":ir="end";break;case"right":ir="start";break;default:ir="middle";break}return ir}},{key:"getViewBox",value:function(){var nr=this.props,ir=nr.cx,sr=nr.cy,ar=nr.angle,cr=nr.ticks,lr=maxBy$1(cr,function(ur){return ur.coordinate||0}),or=minBy$1(cr,function(ur){return ur.coordinate||0});return{cx:ir,cy:sr,startAngle:ar,endAngle:ar,innerRadius:or.coordinate||0,outerRadius:lr.coordinate||0}}},{key:"renderAxisLine",value:function(){var nr=this.props,ir=nr.cx,sr=nr.cy,ar=nr.angle,cr=nr.ticks,lr=nr.axisLine,or=_objectWithoutProperties$9(nr,_excluded$9),ur=cr.reduce(function(gr,br){return[Math.min(gr[0],br.coordinate),Math.max(gr[1],br.coordinate)]},[1/0,-1/0]),hr=polarToCartesian(ir,sr,ur[0],ar),dr=polarToCartesian(ir,sr,ur[1],ar),fr=_objectSpread$k(_objectSpread$k(_objectSpread$k({},filterProps(or,!1)),{},{fill:"none"},filterProps(lr,!1)),{},{x1:hr.x,y1:hr.y,x2:dr.x,y2:dr.y});return React.createElement("line",_extends$i({className:"recharts-polar-radius-axis-line"},fr))}},{key:"renderTicks",value:function(){var nr=this,ir=this.props,sr=ir.ticks,ar=ir.tick,cr=ir.angle,lr=ir.tickFormatter,or=ir.stroke,ur=_objectWithoutProperties$9(ir,_excluded2$5),hr=this.getTickTextAnchor(),dr=filterProps(ur,!1),fr=filterProps(ar,!1),gr=sr.map(function(br,pr){var mr=nr.getTickValueCoord(br),yr=_objectSpread$k(_objectSpread$k(_objectSpread$k(_objectSpread$k({textAnchor:hr,transform:"rotate(".concat(90-cr,", ").concat(mr.x,", ").concat(mr.y,")")},dr),{},{stroke:"none",fill:or},fr),{},{index:pr},mr),{},{payload:br});return React.createElement(Layer,_extends$i({className:clsx("recharts-polar-radius-axis-tick",getTickClassName(ar)),key:"tick-".concat(br.coordinate)},adaptEventsOfChild(nr.props,br,pr)),er.renderTickItem(ar,yr,lr?lr(br.value,pr):br.value))});return React.createElement(Layer,{className:"recharts-polar-radius-axis-ticks"},gr)}},{key:"render",value:function(){var nr=this.props,ir=nr.ticks,sr=nr.axisLine,ar=nr.tick;return!ir||!ir.length?null:React.createElement(Layer,{className:clsx("recharts-polar-radius-axis",this.props.className)},sr&&this.renderAxisLine(),ar&&this.renderTicks(),Label.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(nr,ir,sr){var ar;return React.isValidElement(nr)?ar=React.cloneElement(nr,ir):isFunction$3(nr)?ar=nr(ir):ar=React.createElement(Text,_extends$i({},ir,{className:"recharts-polar-radius-axis-tick-value"}),sr),ar}}])}(reactExports.PureComponent);_defineProperty$o(PolarRadiusAxis,"displayName","PolarRadiusAxis");_defineProperty$o(PolarRadiusAxis,"axisType","radiusAxis");_defineProperty$o(PolarRadiusAxis,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _typeof$o(tr){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$o(tr)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$h.apply(this,arguments)}function ownKeys$j(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$j(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$j(Object(rr),!0).forEach(function(nr){_defineProperty$n(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$j(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$g(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$n(nr.key),nr)}}function _createClass$g(tr,er,rr){return er&&_defineProperties$g(tr.prototype,er),rr&&_defineProperties$g(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$e(tr,er,rr){return er=_getPrototypeOf$e(er),_possibleConstructorReturn$e(tr,_isNativeReflectConstruct$e()?Reflect.construct(er,rr||[],_getPrototypeOf$e(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$e(tr,er){if(er&&(_typeof$o(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(tr)}function _assertThisInitialized$e(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$e(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$e=function(){return!!tr})()}function _getPrototypeOf$e(tr){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$e(tr)}function _inherits$e(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$e(tr,er)}function _setPrototypeOf$e(tr,er){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$e(tr,er)}function _defineProperty$n(tr,er,rr){return er=_toPropertyKey$n(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$n(tr){var er=_toPrimitive$n(tr,"string");return _typeof$o(er)=="symbol"?er:er+""}function _toPrimitive$n(tr,er){if(_typeof$o(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$o(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var RADIAN=Math.PI/180,eps=1e-5,PolarAngleAxis=function(tr){function er(){return _classCallCheck$g(this,er),_callSuper$e(this,er,arguments)}return _inherits$e(er,tr),_createClass$g(er,[{key:"getTickLineCoord",value:function(nr){var ir=this.props,sr=ir.cx,ar=ir.cy,cr=ir.radius,lr=ir.orientation,or=ir.tickSize,ur=or||8,hr=polarToCartesian(sr,ar,cr,nr.coordinate),dr=polarToCartesian(sr,ar,cr+(lr==="inner"?-1:1)*ur,nr.coordinate);return{x1:hr.x,y1:hr.y,x2:dr.x,y2:dr.y}}},{key:"getTickTextAnchor",value:function(nr){var ir=this.props.orientation,sr=Math.cos(-nr.coordinate*RADIAN),ar;return sr>eps?ar=ir==="outer"?"start":"end":sr<-eps?ar=ir==="outer"?"end":"start":ar="middle",ar}},{key:"renderAxisLine",value:function(){var nr=this.props,ir=nr.cx,sr=nr.cy,ar=nr.radius,cr=nr.axisLine,lr=nr.axisLineType,or=_objectSpread$j(_objectSpread$j({},filterProps(this.props,!1)),{},{fill:"none"},filterProps(cr,!1));if(lr==="circle")return React.createElement(Dot,_extends$h({className:"recharts-polar-angle-axis-line"},or,{cx:ir,cy:sr,r:ar}));var ur=this.props.ticks,hr=ur.map(function(dr){return polarToCartesian(ir,sr,ar,dr.coordinate)});return React.createElement(Polygon,_extends$h({className:"recharts-polar-angle-axis-line"},or,{points:hr}))}},{key:"renderTicks",value:function(){var nr=this,ir=this.props,sr=ir.ticks,ar=ir.tick,cr=ir.tickLine,lr=ir.tickFormatter,or=ir.stroke,ur=filterProps(this.props,!1),hr=filterProps(ar,!1),dr=_objectSpread$j(_objectSpread$j({},ur),{},{fill:"none"},filterProps(cr,!1)),fr=sr.map(function(gr,br){var pr=nr.getTickLineCoord(gr),mr=nr.getTickTextAnchor(gr),yr=_objectSpread$j(_objectSpread$j(_objectSpread$j({textAnchor:mr},ur),{},{stroke:"none",fill:or},hr),{},{index:br,payload:gr,x:pr.x2,y:pr.y2});return React.createElement(Layer,_extends$h({className:clsx("recharts-polar-angle-axis-tick",getTickClassName(ar)),key:"tick-".concat(gr.coordinate)},adaptEventsOfChild(nr.props,gr,br)),cr&&React.createElement("line",_extends$h({className:"recharts-polar-angle-axis-tick-line"},dr,pr)),ar&&er.renderTickItem(ar,yr,lr?lr(gr.value,br):gr.value))});return React.createElement(Layer,{className:"recharts-polar-angle-axis-ticks"},fr)}},{key:"render",value:function(){var nr=this.props,ir=nr.ticks,sr=nr.radius,ar=nr.axisLine;return sr<=0||!ir||!ir.length?null:React.createElement(Layer,{className:clsx("recharts-polar-angle-axis",this.props.className)},ar&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(nr,ir,sr){var ar;return React.isValidElement(nr)?ar=React.cloneElement(nr,ir):isFunction$3(nr)?ar=nr(ir):ar=React.createElement(Text,_extends$h({},ir,{className:"recharts-polar-angle-axis-tick-value"}),sr),ar}}])}(reactExports.PureComponent);_defineProperty$n(PolarAngleAxis,"displayName","PolarAngleAxis");_defineProperty$n(PolarAngleAxis,"axisType","angleAxis");_defineProperty$n(PolarAngleAxis,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag$1=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(tr){if(!isObjectLike$1(tr)||baseGetTag$1(tr)!=objectTag)return!1;var er=getPrototype(tr);if(er===null)return!0;var rr=hasOwnProperty.call(er,"constructor")&&er.constructor;return typeof rr=="function"&&rr instanceof rr&&funcToString.call(rr)==objectCtorString}var isPlainObject_1=isPlainObject;const isPlainObject$1=getDefaultExportFromCjs(isPlainObject_1);var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,boolTag="[object Boolean]";function isBoolean(tr){return tr===!0||tr===!1||isObjectLike(tr)&&baseGetTag(tr)==boolTag}var isBoolean_1=isBoolean;const isBoolean$1=getDefaultExportFromCjs(isBoolean_1);function _typeof$n(tr){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$n(tr)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$g.apply(this,arguments)}function _slicedToArray$2(tr,er){return _arrayWithHoles$2(tr)||_iterableToArrayLimit$2(tr,er)||_unsupportedIterableToArray$4(tr,er)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$4(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$4(tr,er)}}function _arrayLikeToArray$4(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$2(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$2(tr){if(Array.isArray(tr))return tr}function ownKeys$i(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$i(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$i(Object(rr),!0).forEach(function(nr){_defineProperty$m(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$i(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$m(tr,er,rr){return er=_toPropertyKey$m(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$m(tr){var er=_toPrimitive$m(tr,"string");return _typeof$n(er)=="symbol"?er:er+""}function _toPrimitive$m(tr,er){if(_typeof$n(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$n(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var getTrapezoidPath=function tr(er,rr,nr,ir,sr){var ar=nr-ir,cr;return cr="M ".concat(er,",").concat(rr),cr+="L ".concat(er+nr,",").concat(rr),cr+="L ".concat(er+nr-ar/2,",").concat(rr+sr),cr+="L ".concat(er+nr-ar/2-ir,",").concat(rr+sr),cr+="L ".concat(er,",").concat(rr," Z"),cr},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function tr(er){var rr=_objectSpread$i(_objectSpread$i({},defaultProps$1),er),nr=reactExports.useRef(),ir=reactExports.useState(-1),sr=_slicedToArray$2(ir,2),ar=sr[0],cr=sr[1];reactExports.useEffect(function(){if(nr.current&&nr.current.getTotalLength)try{var xr=nr.current.getTotalLength();xr&&cr(xr)}catch{}},[]);var lr=rr.x,or=rr.y,ur=rr.upperWidth,hr=rr.lowerWidth,dr=rr.height,fr=rr.className,gr=rr.animationEasing,br=rr.animationDuration,pr=rr.animationBegin,mr=rr.isUpdateAnimationActive;if(lr!==+lr||or!==+or||ur!==+ur||hr!==+hr||dr!==+dr||ur===0&&hr===0||dr===0)return null;var yr=clsx("recharts-trapezoid",fr);return mr?React.createElement(Animate,{canBegin:ar>0,from:{upperWidth:0,lowerWidth:0,height:dr,x:lr,y:or},to:{upperWidth:ur,lowerWidth:hr,height:dr,x:lr,y:or},duration:br,animationEasing:gr,isActive:mr},function(xr){var vr=xr.upperWidth,_r=xr.lowerWidth,Er=xr.height,Tr=xr.x,Rr=xr.y;return React.createElement(Animate,{canBegin:ar>0,from:"0px ".concat(ar===-1?1:ar,"px"),to:"".concat(ar,"px 0px"),attributeName:"strokeDasharray",begin:pr,duration:br,easing:gr},React.createElement("path",_extends$g({},filterProps(rr,!0),{className:yr,d:getTrapezoidPath(Tr,Rr,vr,_r,Er),ref:nr})))}):React.createElement("g",null,React.createElement("path",_extends$g({},filterProps(rr,!0),{className:yr,d:getTrapezoidPath(lr,or,ur,hr,dr)})))},_excluded$8=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$m(tr){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$m(tr)}function _objectWithoutProperties$8(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$8(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$8(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function ownKeys$h(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$h(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$h(Object(rr),!0).forEach(function(nr){_defineProperty$l(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$h(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$l(tr,er,rr){return er=_toPropertyKey$l(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$l(tr){var er=_toPrimitive$l(tr,"string");return _typeof$m(er)=="symbol"?er:er+""}function _toPrimitive$l(tr,er){if(_typeof$m(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$m(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function defaultPropTransformer(tr,er){return _objectSpread$h(_objectSpread$h({},er),tr)}function isSymbolsProps(tr,er){return tr==="symbols"}function ShapeSelector(tr){var er=tr.shapeType,rr=tr.elementProps;switch(er){case"rectangle":return React.createElement(Rectangle,rr);case"trapezoid":return React.createElement(Trapezoid,rr);case"sector":return React.createElement(Sector,rr);case"symbols":if(isSymbolsProps(er))return React.createElement(Symbols,rr);break;default:return null}}function getPropsFromShapeOption(tr){return reactExports.isValidElement(tr)?tr.props:tr}function Shape(tr){var er=tr.option,rr=tr.shapeType,nr=tr.propTransformer,ir=nr===void 0?defaultPropTransformer:nr,sr=tr.activeClassName,ar=sr===void 0?"recharts-active-shape":sr,cr=tr.isActive,lr=_objectWithoutProperties$8(tr,_excluded$8),or;if(reactExports.isValidElement(er))or=reactExports.cloneElement(er,_objectSpread$h(_objectSpread$h({},lr),getPropsFromShapeOption(er)));else if(isFunction$3(er))or=er(lr);else if(isPlainObject$1(er)&&!isBoolean$1(er)){var ur=ir(er,lr);or=React.createElement(ShapeSelector,{shapeType:rr,elementProps:ur})}else{var hr=lr;or=React.createElement(ShapeSelector,{shapeType:rr,elementProps:hr})}return cr?React.createElement(Layer,{className:ar},or):or}function isFunnel(tr,er){return er!=null&&"trapezoids"in tr.props}function isPie(tr,er){return er!=null&&"sectors"in tr.props}function isScatter(tr,er){return er!=null&&"points"in tr.props}function compareFunnel(tr,er){var rr,nr,ir=tr.x===(er==null||(rr=er.labelViewBox)===null||rr===void 0?void 0:rr.x)||tr.x===er.x,sr=tr.y===(er==null||(nr=er.labelViewBox)===null||nr===void 0?void 0:nr.y)||tr.y===er.y;return ir&&sr}function comparePie(tr,er){var rr=tr.endAngle===er.endAngle,nr=tr.startAngle===er.startAngle;return rr&&nr}function compareScatter(tr,er){var rr=tr.x===er.x,nr=tr.y===er.y,ir=tr.z===er.z;return rr&&nr&&ir}function getComparisonFn(tr,er){var rr;return isFunnel(tr,er)?rr=compareFunnel:isPie(tr,er)?rr=comparePie:isScatter(tr,er)&&(rr=compareScatter),rr}function getShapeDataKey(tr,er){var rr;return isFunnel(tr,er)?rr="trapezoids":isPie(tr,er)?rr="sectors":isScatter(tr,er)&&(rr="points"),rr}function getActiveShapeTooltipPayload(tr,er){if(isFunnel(tr,er)){var rr;return(rr=er.tooltipPayload)===null||rr===void 0||(rr=rr[0])===null||rr===void 0||(rr=rr.payload)===null||rr===void 0?void 0:rr.payload}if(isPie(tr,er)){var nr;return(nr=er.tooltipPayload)===null||nr===void 0||(nr=nr[0])===null||nr===void 0||(nr=nr.payload)===null||nr===void 0?void 0:nr.payload}return isScatter(tr,er)?er.payload:{}}function getActiveShapeIndexForTooltip(tr){var er=tr.activeTooltipItem,rr=tr.graphicalItem,nr=tr.itemData,ir=getShapeDataKey(rr,er),sr=getActiveShapeTooltipPayload(rr,er),ar=nr.filter(function(lr,or){var ur=isEqual$1(sr,lr),hr=rr.props[ir].filter(function(gr){var br=getComparisonFn(rr,er);return br(gr,er)}),dr=rr.props[ir].indexOf(hr[hr.length-1]),fr=or===dr;return ur&&fr}),cr=nr.indexOf(ar[ar.length-1]);return cr}var _Pie;function _typeof$l(tr){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$l(tr)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$f.apply(this,arguments)}function ownKeys$g(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$g(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$g(Object(rr),!0).forEach(function(nr){_defineProperty$k(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$g(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$f(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$k(nr.key),nr)}}function _createClass$f(tr,er,rr){return er&&_defineProperties$f(tr.prototype,er),rr&&_defineProperties$f(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$d(tr,er,rr){return er=_getPrototypeOf$d(er),_possibleConstructorReturn$d(tr,_isNativeReflectConstruct$d()?Reflect.construct(er,rr||[],_getPrototypeOf$d(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$d(tr,er){if(er&&(_typeof$l(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(tr)}function _assertThisInitialized$d(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$d(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$d=function(){return!!tr})()}function _getPrototypeOf$d(tr){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$d(tr)}function _inherits$d(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$d(tr,er)}function _setPrototypeOf$d(tr,er){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$d(tr,er)}function _defineProperty$k(tr,er,rr){return er=_toPropertyKey$k(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$k(tr){var er=_toPrimitive$k(tr,"string");return _typeof$l(er)=="symbol"?er:er+""}function _toPrimitive$k(tr,er){if(_typeof$l(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$l(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var Pie=function(tr){function er(rr){var nr;return _classCallCheck$f(this,er),nr=_callSuper$d(this,er,[rr]),_defineProperty$k(nr,"pieRef",null),_defineProperty$k(nr,"sectorRefs",[]),_defineProperty$k(nr,"id",uniqueId("recharts-pie-")),_defineProperty$k(nr,"handleAnimationEnd",function(){var ir=nr.props.onAnimationEnd;nr.setState({isAnimationFinished:!0}),isFunction$3(ir)&&ir()}),_defineProperty$k(nr,"handleAnimationStart",function(){var ir=nr.props.onAnimationStart;nr.setState({isAnimationFinished:!1}),isFunction$3(ir)&&ir()}),nr.state={isAnimationFinished:!rr.isAnimationActive,prevIsAnimationActive:rr.isAnimationActive,prevAnimationId:rr.animationId,sectorToFocus:0},nr}return _inherits$d(er,tr),_createClass$f(er,[{key:"isActiveIndex",value:function(nr){var ir=this.props.activeIndex;return Array.isArray(ir)?ir.indexOf(nr)!==-1:nr===ir}},{key:"hasActiveIndex",value:function(){var nr=this.props.activeIndex;return Array.isArray(nr)?nr.length!==0:nr||nr===0}},{key:"renderLabels",value:function(nr){var ir=this.props.isAnimationActive;if(ir&&!this.state.isAnimationFinished)return null;var sr=this.props,ar=sr.label,cr=sr.labelLine,lr=sr.dataKey,or=sr.valueKey,ur=filterProps(this.props,!1),hr=filterProps(ar,!1),dr=filterProps(cr,!1),fr=ar&&ar.offsetRadius||20,gr=nr.map(function(br,pr){var mr=(br.startAngle+br.endAngle)/2,yr=polarToCartesian(br.cx,br.cy,br.outerRadius+fr,mr),xr=_objectSpread$g(_objectSpread$g(_objectSpread$g(_objectSpread$g({},ur),br),{},{stroke:"none"},hr),{},{index:pr,textAnchor:er.getTextAnchor(yr.x,br.cx)},yr),vr=_objectSpread$g(_objectSpread$g(_objectSpread$g(_objectSpread$g({},ur),br),{},{fill:"none",stroke:br.fill},dr),{},{index:pr,points:[polarToCartesian(br.cx,br.cy,br.outerRadius,mr),yr]}),_r=lr;return isNil$1(lr)&&isNil$1(or)?_r="value":isNil$1(lr)&&(_r=or),React.createElement(Layer,{key:"label-".concat(br.startAngle,"-").concat(br.endAngle,"-").concat(br.midAngle,"-").concat(pr)},cr&&er.renderLabelLineItem(cr,vr,"line"),er.renderLabelItem(ar,xr,getValueByDataKey(br,_r)))});return React.createElement(Layer,{className:"recharts-pie-labels"},gr)}},{key:"renderSectorsStatically",value:function(nr){var ir=this,sr=this.props,ar=sr.activeShape,cr=sr.blendStroke,lr=sr.inactiveShape;return nr.map(function(or,ur){if((or==null?void 0:or.startAngle)===0&&(or==null?void 0:or.endAngle)===0&&nr.length!==1)return null;var hr=ir.isActiveIndex(ur),dr=lr&&ir.hasActiveIndex()?lr:null,fr=hr?ar:dr,gr=_objectSpread$g(_objectSpread$g({},or),{},{stroke:cr?or.fill:or.stroke,tabIndex:-1});return React.createElement(Layer,_extends$f({ref:function(pr){pr&&!ir.sectorRefs.includes(pr)&&ir.sectorRefs.push(pr)},tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(ir.props,or,ur),{key:"sector-".concat(or==null?void 0:or.startAngle,"-").concat(or==null?void 0:or.endAngle,"-").concat(or.midAngle,"-").concat(ur)}),React.createElement(Shape,_extends$f({option:fr,isActive:hr,shapeType:"sector"},gr)))})}},{key:"renderSectorsWithAnimation",value:function(){var nr=this,ir=this.props,sr=ir.sectors,ar=ir.isAnimationActive,cr=ir.animationBegin,lr=ir.animationDuration,or=ir.animationEasing,ur=ir.animationId,hr=this.state,dr=hr.prevSectors,fr=hr.prevIsAnimationActive;return React.createElement(Animate,{begin:cr,duration:lr,isActive:ar,easing:or,from:{t:0},to:{t:1},key:"pie-".concat(ur,"-").concat(fr),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(gr){var br=gr.t,pr=[],mr=sr&&sr[0],yr=mr.startAngle;return sr.forEach(function(xr,vr){var _r=dr&&dr[vr],Er=vr>0?get$2(xr,"paddingAngle",0):0;if(_r){var Tr=interpolateNumber$2(_r.endAngle-_r.startAngle,xr.endAngle-xr.startAngle),Rr=_objectSpread$g(_objectSpread$g({},xr),{},{startAngle:yr+Er,endAngle:yr+Tr(br)+Er});pr.push(Rr),yr=Rr.endAngle}else{var Nr=xr.endAngle,Dr=xr.startAngle,Ir=interpolateNumber$2(0,Nr-Dr),Or=Ir(br),jr=_objectSpread$g(_objectSpread$g({},xr),{},{startAngle:yr+Er,endAngle:yr+Or+Er});pr.push(jr),yr=jr.endAngle}}),React.createElement(Layer,null,nr.renderSectorsStatically(pr))})}},{key:"attachKeyboardHandlers",value:function(nr){var ir=this;nr.onkeydown=function(sr){if(!sr.altKey)switch(sr.key){case"ArrowLeft":{var ar=++ir.state.sectorToFocus%ir.sectorRefs.length;ir.sectorRefs[ar].focus(),ir.setState({sectorToFocus:ar});break}case"ArrowRight":{var cr=--ir.state.sectorToFocus<0?ir.sectorRefs.length-1:ir.state.sectorToFocus%ir.sectorRefs.length;ir.sectorRefs[cr].focus(),ir.setState({sectorToFocus:cr});break}case"Escape":{ir.sectorRefs[ir.state.sectorToFocus].blur(),ir.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var nr=this.props,ir=nr.sectors,sr=nr.isAnimationActive,ar=this.state.prevSectors;return sr&&ir&&ir.length&&(!ar||!isEqual$1(ar,ir))?this.renderSectorsWithAnimation():this.renderSectorsStatically(ir)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var nr=this,ir=this.props,sr=ir.hide,ar=ir.sectors,cr=ir.className,lr=ir.label,or=ir.cx,ur=ir.cy,hr=ir.innerRadius,dr=ir.outerRadius,fr=ir.isAnimationActive,gr=this.state.isAnimationFinished;if(sr||!ar||!ar.length||!isNumber(or)||!isNumber(ur)||!isNumber(hr)||!isNumber(dr))return null;var br=clsx("recharts-pie",cr);return React.createElement(Layer,{tabIndex:this.props.rootTabIndex,className:br,ref:function(mr){nr.pieRef=mr}},this.renderSectors(),lr&&this.renderLabels(ar),Label.renderCallByParent(this.props,null,!1),(!fr||gr)&&LabelList.renderCallByParent(this.props,ar,!1))}}],[{key:"getDerivedStateFromProps",value:function(nr,ir){return ir.prevIsAnimationActive!==nr.isAnimationActive?{prevIsAnimationActive:nr.isAnimationActive,prevAnimationId:nr.animationId,curSectors:nr.sectors,prevSectors:[],isAnimationFinished:!0}:nr.isAnimationActive&&nr.animationId!==ir.prevAnimationId?{prevAnimationId:nr.animationId,curSectors:nr.sectors,prevSectors:ir.curSectors,isAnimationFinished:!0}:nr.sectors!==ir.curSectors?{curSectors:nr.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(nr,ir){return nr>ir?"start":nr<ir?"end":"middle"}},{key:"renderLabelLineItem",value:function(nr,ir,sr){if(React.isValidElement(nr))return React.cloneElement(nr,ir);if(isFunction$3(nr))return nr(ir);var ar=clsx("recharts-pie-label-line",typeof nr!="boolean"?nr.className:"");return React.createElement(Curve,_extends$f({},ir,{key:sr,type:"linear",className:ar}))}},{key:"renderLabelItem",value:function(nr,ir,sr){if(React.isValidElement(nr))return React.cloneElement(nr,ir);var ar=sr;if(isFunction$3(nr)&&(ar=nr(ir),React.isValidElement(ar)))return ar;var cr=clsx("recharts-pie-label-text",typeof nr!="boolean"&&!isFunction$3(nr)?nr.className:"");return React.createElement(Text,_extends$f({},ir,{alignmentBaseline:"middle",className:cr}),ar)}}])}(reactExports.PureComponent);_Pie=Pie;_defineProperty$k(Pie,"displayName","Pie");_defineProperty$k(Pie,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Global.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_defineProperty$k(Pie,"parseDeltaAngle",function(tr,er){var rr=mathSign(er-tr),nr=Math.min(Math.abs(er-tr),360);return rr*nr});_defineProperty$k(Pie,"getRealPieData",function(tr){var er=tr.data,rr=tr.children,nr=filterProps(tr,!1),ir=findAllByType(rr,Cell);return er&&er.length?er.map(function(sr,ar){return _objectSpread$g(_objectSpread$g(_objectSpread$g({payload:sr},nr),sr),ir&&ir[ar]&&ir[ar].props)}):ir&&ir.length?ir.map(function(sr){return _objectSpread$g(_objectSpread$g({},nr),sr.props)}):[]});_defineProperty$k(Pie,"parseCoordinateOfPie",function(tr,er){var rr=er.top,nr=er.left,ir=er.width,sr=er.height,ar=getMaxRadius(ir,sr),cr=nr+getPercentValue(tr.cx,ir,ir/2),lr=rr+getPercentValue(tr.cy,sr,sr/2),or=getPercentValue(tr.innerRadius,ar,0),ur=getPercentValue(tr.outerRadius,ar,ar*.8),hr=tr.maxRadius||Math.sqrt(ir*ir+sr*sr)/2;return{cx:cr,cy:lr,innerRadius:or,outerRadius:ur,maxRadius:hr}});_defineProperty$k(Pie,"getComposedData",function(tr){var er=tr.item,rr=tr.offset,nr=er.type.defaultProps!==void 0?_objectSpread$g(_objectSpread$g({},er.type.defaultProps),er.props):er.props,ir=_Pie.getRealPieData(nr);if(!ir||!ir.length)return null;var sr=nr.cornerRadius,ar=nr.startAngle,cr=nr.endAngle,lr=nr.paddingAngle,or=nr.dataKey,ur=nr.nameKey,hr=nr.valueKey,dr=nr.tooltipType,fr=Math.abs(nr.minAngle),gr=_Pie.parseCoordinateOfPie(nr,rr),br=_Pie.parseDeltaAngle(ar,cr),pr=Math.abs(br),mr=or;isNil$1(or)&&isNil$1(hr)?(warn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),mr="value"):isNil$1(or)&&(warn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),mr=hr);var yr=ir.filter(function(Rr){return getValueByDataKey(Rr,mr,0)!==0}).length,xr=(pr>=360?yr:yr-1)*lr,vr=pr-yr*fr-xr,_r=ir.reduce(function(Rr,Nr){var Dr=getValueByDataKey(Nr,mr,0);return Rr+(isNumber(Dr)?Dr:0)},0),Er;if(_r>0){var Tr;Er=ir.map(function(Rr,Nr){var Dr=getValueByDataKey(Rr,mr,0),Ir=getValueByDataKey(Rr,ur,Nr),Or=(isNumber(Dr)?Dr:0)/_r,jr;Nr?jr=Tr.endAngle+mathSign(br)*lr*(Dr!==0?1:0):jr=ar;var Lr=jr+mathSign(br)*((Dr!==0?fr:0)+Or*vr),Cr=(jr+Lr)/2,wr=(gr.innerRadius+gr.outerRadius)/2,Pr=[{name:Ir,value:Dr,payload:Rr,dataKey:mr,type:dr}],Ar=polarToCartesian(gr.cx,gr.cy,wr,Cr);return Tr=_objectSpread$g(_objectSpread$g(_objectSpread$g({percent:Or,cornerRadius:sr,name:Ir,tooltipPayload:Pr,midAngle:Cr,middleRadius:wr,tooltipPosition:Ar},Rr),gr),{},{value:getValueByDataKey(Rr,mr),startAngle:jr,endAngle:Lr,payload:Rr,paddingAngle:mathSign(br)*lr}),Tr})}return _objectSpread$g(_objectSpread$g({},gr),{},{sectors:Er,data:ir})});var nativeCeil=Math.ceil,nativeMax$1=Math.max;function baseRange$1(tr,er,rr,nr){for(var ir=-1,sr=nativeMax$1(nativeCeil((er-tr)/(rr||1)),0),ar=Array(sr);sr--;)ar[nr?sr:++ir]=tr,tr+=rr;return ar}var _baseRange=baseRange$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$2(tr){if(!tr)return tr===0?tr:0;if(tr=toNumber(tr),tr===INFINITY||tr===-INFINITY){var er=tr<0?-1:1;return er*MAX_INTEGER}return tr===tr?tr:0}var toFinite_1=toFinite$2,baseRange=_baseRange,isIterateeCall$2=_isIterateeCall,toFinite$1=toFinite_1;function createRange$1(tr){return function(er,rr,nr){return nr&&typeof nr!="number"&&isIterateeCall$2(er,rr,nr)&&(rr=nr=void 0),er=toFinite$1(er),rr===void 0?(rr=er,er=0):rr=toFinite$1(rr),nr=nr===void 0?er<rr?1:-1:toFinite$1(nr),baseRange(er,rr,nr,tr)}}var _createRange=createRange$1,createRange=_createRange,range=createRange(),range_1=range;const range$1=getDefaultExportFromCjs(range_1);function _typeof$k(tr){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$k(tr)}function ownKeys$f(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$f(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$f(Object(rr),!0).forEach(function(nr){_defineProperty$j(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$f(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$j(tr,er,rr){return er=_toPropertyKey$j(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$j(tr){var er=_toPrimitive$j(tr,"string");return _typeof$k(er)=="symbol"?er:er+""}function _toPrimitive$j(tr,er){if(_typeof$k(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$k(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function tr(er,rr){var nr=er.replace(/(\w)/,function(sr){return sr.toUpperCase()}),ir=PREFIX_LIST.reduce(function(sr,ar){return _objectSpread$f(_objectSpread$f({},sr),{},_defineProperty$j({},ar+nr,rr))},{});return ir[er]=rr,ir};function _typeof$j(tr){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$j(tr)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$e.apply(this,arguments)}function ownKeys$e(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$e(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$e(Object(rr),!0).forEach(function(nr){_defineProperty$i(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$e(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$e(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$i(nr.key),nr)}}function _createClass$e(tr,er,rr){return er&&_defineProperties$e(tr.prototype,er),rr&&_defineProperties$e(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$c(tr,er,rr){return er=_getPrototypeOf$c(er),_possibleConstructorReturn$c(tr,_isNativeReflectConstruct$c()?Reflect.construct(er,rr||[],_getPrototypeOf$c(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$c(tr,er){if(er&&(_typeof$j(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(tr)}function _assertThisInitialized$c(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$c(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!tr})()}function _getPrototypeOf$c(tr){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$c(tr)}function _inherits$c(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$c(tr,er)}function _setPrototypeOf$c(tr,er){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$c(tr,er)}function _defineProperty$i(tr,er,rr){return er=_toPropertyKey$i(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$i(tr){var er=_toPrimitive$i(tr,"string");return _typeof$j(er)=="symbol"?er:er+""}function _toPrimitive$i(tr,er){if(_typeof$j(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$j(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var createScale=function tr(er){var rr=er.data,nr=er.startIndex,ir=er.endIndex,sr=er.x,ar=er.width,cr=er.travellerWidth;if(!rr||!rr.length)return{};var lr=rr.length,or=point().domain(range$1(0,lr)).range([sr,sr+ar-cr]),ur=or.domain().map(function(hr){return or(hr)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:or(nr),endX:or(ir),scale:or,scaleValues:ur}},isTouch=function tr(er){return er.changedTouches&&!!er.changedTouches.length},Brush=function(tr){function er(rr){var nr;return _classCallCheck$e(this,er),nr=_callSuper$c(this,er,[rr]),_defineProperty$i(nr,"handleDrag",function(ir){nr.leaveTimer&&(clearTimeout(nr.leaveTimer),nr.leaveTimer=null),nr.state.isTravellerMoving?nr.handleTravellerMove(ir):nr.state.isSlideMoving&&nr.handleSlideDrag(ir)}),_defineProperty$i(nr,"handleTouchMove",function(ir){ir.changedTouches!=null&&ir.changedTouches.length>0&&nr.handleDrag(ir.changedTouches[0])}),_defineProperty$i(nr,"handleDragEnd",function(){nr.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var ir=nr.props,sr=ir.endIndex,ar=ir.onDragEnd,cr=ir.startIndex;ar==null||ar({endIndex:sr,startIndex:cr})}),nr.detachDragEndListener()}),_defineProperty$i(nr,"handleLeaveWrapper",function(){(nr.state.isTravellerMoving||nr.state.isSlideMoving)&&(nr.leaveTimer=window.setTimeout(nr.handleDragEnd,nr.props.leaveTimeOut))}),_defineProperty$i(nr,"handleEnterSlideOrTraveller",function(){nr.setState({isTextActive:!0})}),_defineProperty$i(nr,"handleLeaveSlideOrTraveller",function(){nr.setState({isTextActive:!1})}),_defineProperty$i(nr,"handleSlideDragStart",function(ir){var sr=isTouch(ir)?ir.changedTouches[0]:ir;nr.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:sr.pageX}),nr.attachDragEndListener()}),nr.travellerDragStartHandlers={startX:nr.handleTravellerDragStart.bind(nr,"startX"),endX:nr.handleTravellerDragStart.bind(nr,"endX")},nr.state={},nr}return _inherits$c(er,tr),_createClass$e(er,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(nr){var ir=nr.startX,sr=nr.endX,ar=this.state.scaleValues,cr=this.props,lr=cr.gap,or=cr.data,ur=or.length-1,hr=Math.min(ir,sr),dr=Math.max(ir,sr),fr=er.getIndexInRange(ar,hr),gr=er.getIndexInRange(ar,dr);return{startIndex:fr-fr%lr,endIndex:gr===ur?ur:gr-gr%lr}}},{key:"getTextOfTick",value:function(nr){var ir=this.props,sr=ir.data,ar=ir.tickFormatter,cr=ir.dataKey,lr=getValueByDataKey(sr[nr],cr,nr);return isFunction$3(ar)?ar(lr,nr):lr}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(nr){var ir=this.state,sr=ir.slideMoveStartX,ar=ir.startX,cr=ir.endX,lr=this.props,or=lr.x,ur=lr.width,hr=lr.travellerWidth,dr=lr.startIndex,fr=lr.endIndex,gr=lr.onChange,br=nr.pageX-sr;br>0?br=Math.min(br,or+ur-hr-cr,or+ur-hr-ar):br<0&&(br=Math.max(br,or-ar,or-cr));var pr=this.getIndex({startX:ar+br,endX:cr+br});(pr.startIndex!==dr||pr.endIndex!==fr)&&gr&&gr(pr),this.setState({startX:ar+br,endX:cr+br,slideMoveStartX:nr.pageX})}},{key:"handleTravellerDragStart",value:function(nr,ir){var sr=isTouch(ir)?ir.changedTouches[0]:ir;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:nr,brushMoveStartX:sr.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(nr){var ir=this.state,sr=ir.brushMoveStartX,ar=ir.movingTravellerId,cr=ir.endX,lr=ir.startX,or=this.state[ar],ur=this.props,hr=ur.x,dr=ur.width,fr=ur.travellerWidth,gr=ur.onChange,br=ur.gap,pr=ur.data,mr={startX:this.state.startX,endX:this.state.endX},yr=nr.pageX-sr;yr>0?yr=Math.min(yr,hr+dr-fr-or):yr<0&&(yr=Math.max(yr,hr-or)),mr[ar]=or+yr;var xr=this.getIndex(mr),vr=xr.startIndex,_r=xr.endIndex,Er=function(){var Rr=pr.length-1;return ar==="startX"&&(cr>lr?vr%br===0:_r%br===0)||cr<lr&&_r===Rr||ar==="endX"&&(cr>lr?_r%br===0:vr%br===0)||cr>lr&&_r===Rr};this.setState(_defineProperty$i(_defineProperty$i({},ar,or+yr),"brushMoveStartX",nr.pageX),function(){gr&&Er()&&gr(xr)})}},{key:"handleTravellerMoveKeyboard",value:function(nr,ir){var sr=this,ar=this.state,cr=ar.scaleValues,lr=ar.startX,or=ar.endX,ur=this.state[ir],hr=cr.indexOf(ur);if(hr!==-1){var dr=hr+nr;if(!(dr===-1||dr>=cr.length)){var fr=cr[dr];ir==="startX"&&fr>=or||ir==="endX"&&fr<=lr||this.setState(_defineProperty$i({},ir,fr),function(){sr.props.onChange(sr.getIndex({startX:sr.state.startX,endX:sr.state.endX}))})}}}},{key:"renderBackground",value:function(){var nr=this.props,ir=nr.x,sr=nr.y,ar=nr.width,cr=nr.height,lr=nr.fill,or=nr.stroke;return React.createElement("rect",{stroke:or,fill:lr,x:ir,y:sr,width:ar,height:cr})}},{key:"renderPanorama",value:function(){var nr=this.props,ir=nr.x,sr=nr.y,ar=nr.width,cr=nr.height,lr=nr.data,or=nr.children,ur=nr.padding,hr=reactExports.Children.only(or);return hr?React.cloneElement(hr,{x:ir,y:sr,width:ar,height:cr,margin:ur,compact:!0,data:lr}):null}},{key:"renderTravellerLayer",value:function(nr,ir){var sr,ar,cr=this,lr=this.props,or=lr.y,ur=lr.travellerWidth,hr=lr.height,dr=lr.traveller,fr=lr.ariaLabel,gr=lr.data,br=lr.startIndex,pr=lr.endIndex,mr=Math.max(nr,this.props.x),yr=_objectSpread$e(_objectSpread$e({},filterProps(this.props,!1)),{},{x:mr,y:or,width:ur,height:hr}),xr=fr||"Min value: ".concat((sr=gr[br])===null||sr===void 0?void 0:sr.name,", Max value: ").concat((ar=gr[pr])===null||ar===void 0?void 0:ar.name);return React.createElement(Layer,{tabIndex:0,role:"slider","aria-label":xr,"aria-valuenow":nr,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[ir],onTouchStart:this.travellerDragStartHandlers[ir],onKeyDown:function(_r){["ArrowLeft","ArrowRight"].includes(_r.key)&&(_r.preventDefault(),_r.stopPropagation(),cr.handleTravellerMoveKeyboard(_r.key==="ArrowRight"?1:-1,ir))},onFocus:function(){cr.setState({isTravellerFocused:!0})},onBlur:function(){cr.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},er.renderTraveller(dr,yr))}},{key:"renderSlide",value:function(nr,ir){var sr=this.props,ar=sr.y,cr=sr.height,lr=sr.stroke,or=sr.travellerWidth,ur=Math.min(nr,ir)+or,hr=Math.max(Math.abs(ir-nr)-or,0);return React.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:lr,fillOpacity:.2,x:ur,y:ar,width:hr,height:cr})}},{key:"renderText",value:function(){var nr=this.props,ir=nr.startIndex,sr=nr.endIndex,ar=nr.y,cr=nr.height,lr=nr.travellerWidth,or=nr.stroke,ur=this.state,hr=ur.startX,dr=ur.endX,fr=5,gr={pointerEvents:"none",fill:or};return React.createElement(Layer,{className:"recharts-brush-texts"},React.createElement(Text,_extends$e({textAnchor:"end",verticalAnchor:"middle",x:Math.min(hr,dr)-fr,y:ar+cr/2},gr),this.getTextOfTick(ir)),React.createElement(Text,_extends$e({textAnchor:"start",verticalAnchor:"middle",x:Math.max(hr,dr)+lr+fr,y:ar+cr/2},gr),this.getTextOfTick(sr)))}},{key:"render",value:function(){var nr=this.props,ir=nr.data,sr=nr.className,ar=nr.children,cr=nr.x,lr=nr.y,or=nr.width,ur=nr.height,hr=nr.alwaysShowText,dr=this.state,fr=dr.startX,gr=dr.endX,br=dr.isTextActive,pr=dr.isSlideMoving,mr=dr.isTravellerMoving,yr=dr.isTravellerFocused;if(!ir||!ir.length||!isNumber(cr)||!isNumber(lr)||!isNumber(or)||!isNumber(ur)||or<=0||ur<=0)return null;var xr=clsx("recharts-brush",sr),vr=React.Children.count(ar)===1,_r=generatePrefixStyle("userSelect","none");return React.createElement(Layer,{className:xr,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_r},this.renderBackground(),vr&&this.renderPanorama(),this.renderSlide(fr,gr),this.renderTravellerLayer(fr,"startX"),this.renderTravellerLayer(gr,"endX"),(br||pr||mr||yr||hr)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(nr){var ir=nr.x,sr=nr.y,ar=nr.width,cr=nr.height,lr=nr.stroke,or=Math.floor(sr+cr/2)-1;return React.createElement(React.Fragment,null,React.createElement("rect",{x:ir,y:sr,width:ar,height:cr,fill:lr,stroke:"none"}),React.createElement("line",{x1:ir+1,y1:or,x2:ir+ar-1,y2:or,fill:"none",stroke:"#fff"}),React.createElement("line",{x1:ir+1,y1:or+2,x2:ir+ar-1,y2:or+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(nr,ir){var sr;return React.isValidElement(nr)?sr=React.cloneElement(nr,ir):isFunction$3(nr)?sr=nr(ir):sr=er.renderDefaultTraveller(ir),sr}},{key:"getDerivedStateFromProps",value:function(nr,ir){var sr=nr.data,ar=nr.width,cr=nr.x,lr=nr.travellerWidth,or=nr.updateId,ur=nr.startIndex,hr=nr.endIndex;if(sr!==ir.prevData||or!==ir.prevUpdateId)return _objectSpread$e({prevData:sr,prevTravellerWidth:lr,prevUpdateId:or,prevX:cr,prevWidth:ar},sr&&sr.length?createScale({data:sr,width:ar,x:cr,travellerWidth:lr,startIndex:ur,endIndex:hr}):{scale:null,scaleValues:null});if(ir.scale&&(ar!==ir.prevWidth||cr!==ir.prevX||lr!==ir.prevTravellerWidth)){ir.scale.range([cr,cr+ar-lr]);var dr=ir.scale.domain().map(function(fr){return ir.scale(fr)});return{prevData:sr,prevTravellerWidth:lr,prevUpdateId:or,prevX:cr,prevWidth:ar,startX:ir.scale(nr.startIndex),endX:ir.scale(nr.endIndex),scaleValues:dr}}return null}},{key:"getIndexInRange",value:function(nr,ir){for(var sr=nr.length,ar=0,cr=sr-1;cr-ar>1;){var lr=Math.floor((ar+cr)/2);nr[lr]>ir?cr=lr:ar=lr}return ir>=nr[cr]?cr:ar}}])}(reactExports.PureComponent);_defineProperty$i(Brush,"displayName","Brush");_defineProperty$i(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var baseEach$1=_baseEach;function baseSome$1(tr,er){var rr;return baseEach$1(tr,function(nr,ir,sr){return rr=er(nr,ir,sr),!rr}),!!rr}var _baseSome=baseSome$1,arraySome=_arraySome,baseIteratee$4=_baseIteratee,baseSome=_baseSome,isArray$1=isArray_1,isIterateeCall$1=_isIterateeCall;function some(tr,er,rr){var nr=isArray$1(tr)?arraySome:baseSome;return rr&&isIterateeCall$1(tr,er,rr)&&(er=void 0),nr(tr,baseIteratee$4(er))}var some_1=some;const some$1=getDefaultExportFromCjs(some_1);var ifOverflowMatches=function tr(er,rr){var nr=er.alwaysShow,ir=er.ifOverflow;return nr&&(ir="extendDomain"),ir===rr},defineProperty=_defineProperty$I;function baseAssignValue$1(tr,er,rr){er=="__proto__"&&defineProperty?defineProperty(tr,er,{configurable:!0,enumerable:!0,value:rr,writable:!0}):tr[er]=rr}var _baseAssignValue=baseAssignValue$1,baseAssignValue=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee$3=_baseIteratee;function mapValues(tr,er){var rr={};return er=baseIteratee$3(er),baseForOwn(tr,function(nr,ir,sr){baseAssignValue(rr,ir,er(nr,ir,sr))}),rr}var mapValues_1=mapValues;const mapValues$1=getDefaultExportFromCjs(mapValues_1);function arrayEvery$1(tr,er){for(var rr=-1,nr=tr==null?0:tr.length;++rr<nr;)if(!er(tr[rr],rr,tr))return!1;return!0}var _arrayEvery=arrayEvery$1,baseEach=_baseEach;function baseEvery$1(tr,er){var rr=!0;return baseEach(tr,function(nr,ir,sr){return rr=!!er(nr,ir,sr),rr}),rr}var _baseEvery=baseEvery$1,arrayEvery=_arrayEvery,baseEvery=_baseEvery,baseIteratee$2=_baseIteratee,isArray=isArray_1,isIterateeCall=_isIterateeCall;function every(tr,er,rr){var nr=isArray(tr)?arrayEvery:baseEvery;return rr&&isIterateeCall(tr,er,rr)&&(er=void 0),nr(tr,baseIteratee$2(er))}var every_1=every;const every$1=getDefaultExportFromCjs(every_1);var _excluded$7=["x","y"];function _typeof$i(tr){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$i(tr)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$d.apply(this,arguments)}function ownKeys$d(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$d(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$d(Object(rr),!0).forEach(function(nr){_defineProperty$h(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$d(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$h(tr,er,rr){return er=_toPropertyKey$h(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$h(tr){var er=_toPrimitive$h(tr,"string");return _typeof$i(er)=="symbol"?er:er+""}function _toPrimitive$h(tr,er){if(_typeof$i(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$i(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _objectWithoutProperties$7(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$7(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$7(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function typeguardBarRectangleProps(tr,er){var rr=tr.x,nr=tr.y,ir=_objectWithoutProperties$7(tr,_excluded$7),sr="".concat(rr),ar=parseInt(sr,10),cr="".concat(nr),lr=parseInt(cr,10),or="".concat(er.height||ir.height),ur=parseInt(or,10),hr="".concat(er.width||ir.width),dr=parseInt(hr,10);return _objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d(_objectSpread$d({},er),ir),ar?{x:ar}:{}),lr?{y:lr}:{}),{},{height:ur,width:dr,name:er.name,radius:er.radius})}function BarRectangle(tr){return React.createElement(Shape,_extends$d({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},tr))}var minPointSizeCallback=function tr(er){var rr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(nr,ir){if(typeof er=="number")return er;var sr=isNumber(nr)||isNullish(nr);return sr?er(nr,ir):(sr||invariant(),rr)}},_excluded$6=["value","background"],_Bar;function _typeof$h(tr){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$h(tr)}function _objectWithoutProperties$6(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$6(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$6(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$c.apply(this,arguments)}function ownKeys$c(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$c(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$c(Object(rr),!0).forEach(function(nr){_defineProperty$g(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$c(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$d(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$g(nr.key),nr)}}function _createClass$d(tr,er,rr){return er&&_defineProperties$d(tr.prototype,er),rr&&_defineProperties$d(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$b(tr,er,rr){return er=_getPrototypeOf$b(er),_possibleConstructorReturn$b(tr,_isNativeReflectConstruct$b()?Reflect.construct(er,rr||[],_getPrototypeOf$b(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$b(tr,er){if(er&&(_typeof$h(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(tr)}function _assertThisInitialized$b(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$b(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!tr})()}function _getPrototypeOf$b(tr){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$b(tr)}function _inherits$b(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$b(tr,er)}function _setPrototypeOf$b(tr,er){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$b(tr,er)}function _defineProperty$g(tr,er,rr){return er=_toPropertyKey$g(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$g(tr){var er=_toPrimitive$g(tr,"string");return _typeof$h(er)=="symbol"?er:er+""}function _toPrimitive$g(tr,er){if(_typeof$h(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$h(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var Bar=function(tr){function er(){var rr;_classCallCheck$d(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$b(this,er,[].concat(ir)),_defineProperty$g(rr,"state",{isAnimationFinished:!1}),_defineProperty$g(rr,"id",uniqueId("recharts-bar-")),_defineProperty$g(rr,"handleAnimationEnd",function(){var ar=rr.props.onAnimationEnd;rr.setState({isAnimationFinished:!0}),ar&&ar()}),_defineProperty$g(rr,"handleAnimationStart",function(){var ar=rr.props.onAnimationStart;rr.setState({isAnimationFinished:!1}),ar&&ar()}),rr}return _inherits$b(er,tr),_createClass$d(er,[{key:"renderRectanglesStatically",value:function(nr){var ir=this,sr=this.props,ar=sr.shape,cr=sr.dataKey,lr=sr.activeIndex,or=sr.activeBar,ur=filterProps(this.props,!1);return nr&&nr.map(function(hr,dr){var fr=dr===lr,gr=fr?or:ar,br=_objectSpread$c(_objectSpread$c(_objectSpread$c({},ur),hr),{},{isActive:fr,option:gr,index:dr,dataKey:cr,onAnimationStart:ir.handleAnimationStart,onAnimationEnd:ir.handleAnimationEnd});return React.createElement(Layer,_extends$c({className:"recharts-bar-rectangle"},adaptEventsOfChild(ir.props,hr,dr),{key:"rectangle-".concat(hr==null?void 0:hr.x,"-").concat(hr==null?void 0:hr.y,"-").concat(hr==null?void 0:hr.value,"-").concat(dr)}),React.createElement(BarRectangle,br))})}},{key:"renderRectanglesWithAnimation",value:function(){var nr=this,ir=this.props,sr=ir.data,ar=ir.layout,cr=ir.isAnimationActive,lr=ir.animationBegin,or=ir.animationDuration,ur=ir.animationEasing,hr=ir.animationId,dr=this.state.prevData;return React.createElement(Animate,{begin:lr,duration:or,isActive:cr,easing:ur,from:{t:0},to:{t:1},key:"bar-".concat(hr),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(fr){var gr=fr.t,br=sr.map(function(pr,mr){var yr=dr&&dr[mr];if(yr){var xr=interpolateNumber$2(yr.x,pr.x),vr=interpolateNumber$2(yr.y,pr.y),_r=interpolateNumber$2(yr.width,pr.width),Er=interpolateNumber$2(yr.height,pr.height);return _objectSpread$c(_objectSpread$c({},pr),{},{x:xr(gr),y:vr(gr),width:_r(gr),height:Er(gr)})}if(ar==="horizontal"){var Tr=interpolateNumber$2(0,pr.height),Rr=Tr(gr);return _objectSpread$c(_objectSpread$c({},pr),{},{y:pr.y+pr.height-Rr,height:Rr})}var Nr=interpolateNumber$2(0,pr.width),Dr=Nr(gr);return _objectSpread$c(_objectSpread$c({},pr),{},{width:Dr})});return React.createElement(Layer,null,nr.renderRectanglesStatically(br))})}},{key:"renderRectangles",value:function(){var nr=this.props,ir=nr.data,sr=nr.isAnimationActive,ar=this.state.prevData;return sr&&ir&&ir.length&&(!ar||!isEqual$1(ar,ir))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(ir)}},{key:"renderBackground",value:function(){var nr=this,ir=this.props,sr=ir.data,ar=ir.dataKey,cr=ir.activeIndex,lr=filterProps(this.props.background,!1);return sr.map(function(or,ur){or.value;var hr=or.background,dr=_objectWithoutProperties$6(or,_excluded$6);if(!hr)return null;var fr=_objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c({},dr),{},{fill:"#eee"},hr),lr),adaptEventsOfChild(nr.props,or,ur)),{},{onAnimationStart:nr.handleAnimationStart,onAnimationEnd:nr.handleAnimationEnd,dataKey:ar,index:ur,className:"recharts-bar-background-rectangle"});return React.createElement(BarRectangle,_extends$c({key:"background-bar-".concat(ur),option:nr.props.background,isActive:ur===cr},fr))})}},{key:"renderErrorBar",value:function(nr,ir){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var sr=this.props,ar=sr.data,cr=sr.xAxis,lr=sr.yAxis,or=sr.layout,ur=sr.children,hr=findAllByType(ur,ErrorBar);if(!hr)return null;var dr=or==="vertical"?ar[0].height/2:ar[0].width/2,fr=function(pr,mr){var yr=Array.isArray(pr.value)?pr.value[1]:pr.value;return{x:pr.x,y:pr.y,value:yr,errorVal:getValueByDataKey(pr,mr)}},gr={clipPath:nr?"url(#clipPath-".concat(ir,")"):null};return React.createElement(Layer,gr,hr.map(function(br){return React.cloneElement(br,{key:"error-bar-".concat(ir,"-").concat(br.props.dataKey),data:ar,xAxis:cr,yAxis:lr,layout:or,offset:dr,dataPointFormatter:fr})}))}},{key:"render",value:function(){var nr=this.props,ir=nr.hide,sr=nr.data,ar=nr.className,cr=nr.xAxis,lr=nr.yAxis,or=nr.left,ur=nr.top,hr=nr.width,dr=nr.height,fr=nr.isAnimationActive,gr=nr.background,br=nr.id;if(ir||!sr||!sr.length)return null;var pr=this.state.isAnimationFinished,mr=clsx("recharts-bar",ar),yr=cr&&cr.allowDataOverflow,xr=lr&&lr.allowDataOverflow,vr=yr||xr,_r=isNil$1(br)?this.id:br;return React.createElement(Layer,{className:mr},yr||xr?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(_r)},React.createElement("rect",{x:yr?or:or-hr/2,y:xr?ur:ur-dr/2,width:yr?hr:hr*2,height:xr?dr:dr*2}))):null,React.createElement(Layer,{className:"recharts-bar-rectangles",clipPath:vr?"url(#clipPath-".concat(_r,")"):null},gr?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(vr,_r),(!fr||pr)&&LabelList.renderCallByParent(this.props,sr))}}],[{key:"getDerivedStateFromProps",value:function(nr,ir){return nr.animationId!==ir.prevAnimationId?{prevAnimationId:nr.animationId,curData:nr.data,prevData:ir.curData}:nr.data!==ir.curData?{curData:nr.data}:null}}])}(reactExports.PureComponent);_Bar=Bar;_defineProperty$g(Bar,"displayName","Bar");_defineProperty$g(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$g(Bar,"getComposedData",function(tr){var er=tr.props,rr=tr.item,nr=tr.barPosition,ir=tr.bandSize,sr=tr.xAxis,ar=tr.yAxis,cr=tr.xAxisTicks,lr=tr.yAxisTicks,or=tr.stackedData,ur=tr.dataStartIndex,hr=tr.displayedData,dr=tr.offset,fr=findPositionOfBar(nr,rr);if(!fr)return null;var gr=er.layout,br=rr.type.defaultProps,pr=br!==void 0?_objectSpread$c(_objectSpread$c({},br),rr.props):rr.props,mr=pr.dataKey,yr=pr.children,xr=pr.minPointSize,vr=gr==="horizontal"?ar:sr,_r=or?vr.scale.domain():null,Er=getBaseValueOfBar({numericAxis:vr}),Tr=findAllByType(yr,Cell),Rr=hr.map(function(Nr,Dr){var Ir,Or,jr,Lr,Cr,wr;or?Ir=truncateByDomain(or[ur+Dr],_r):(Ir=getValueByDataKey(Nr,mr),Array.isArray(Ir)||(Ir=[Er,Ir]));var Pr=minPointSizeCallback(xr,_Bar.defaultProps.minPointSize)(Ir[1],Dr);if(gr==="horizontal"){var Ar,Sr=[ar.scale(Ir[0]),ar.scale(Ir[1])],Mr=Sr[0],qr=Sr[1];Or=getCateCoordinateOfBar({axis:sr,ticks:cr,bandSize:ir,offset:fr.offset,entry:Nr,index:Dr}),jr=(Ar=qr??Mr)!==null&&Ar!==void 0?Ar:void 0,Lr=fr.size;var $r=Mr-qr;if(Cr=Number.isNaN($r)?0:$r,wr={x:Or,y:ar.y,width:Lr,height:ar.height},Math.abs(Pr)>0&&Math.abs(Cr)<Math.abs(Pr)){var Br=mathSign(Cr||Pr)*(Math.abs(Pr)-Math.abs(Cr));jr-=Br,Cr+=Br}}else{var zr=[sr.scale(Ir[0]),sr.scale(Ir[1])],Gr=zr[0],Vr=zr[1];if(Or=Gr,jr=getCateCoordinateOfBar({axis:ar,ticks:lr,bandSize:ir,offset:fr.offset,entry:Nr,index:Dr}),Lr=Vr-Gr,Cr=fr.size,wr={x:sr.x,y:jr,width:sr.width,height:Cr},Math.abs(Pr)>0&&Math.abs(Lr)<Math.abs(Pr)){var Xr=mathSign(Lr||Pr)*(Math.abs(Pr)-Math.abs(Lr));Lr+=Xr}}return _objectSpread$c(_objectSpread$c(_objectSpread$c({},Nr),{},{x:Or,y:jr,width:Lr,height:Cr,value:or?Ir:Ir[1],payload:Nr,background:wr},Tr&&Tr[Dr]&&Tr[Dr].props),{},{tooltipPayload:[getTooltipItem(rr,Nr)],tooltipPosition:{x:Or+Lr/2,y:jr+Cr/2}})});return _objectSpread$c({data:Rr,layout:gr},dr)});function _typeof$g(tr){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$g(tr)}function _classCallCheck$c(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$f(nr.key),nr)}}function _createClass$c(tr,er,rr){return er&&_defineProperties$c(tr.prototype,er),rr&&_defineProperties$c(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function ownKeys$b(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$b(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$b(Object(rr),!0).forEach(function(nr){_defineProperty$f(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$b(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$f(tr,er,rr){return er=_toPropertyKey$f(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$f(tr){var er=_toPrimitive$f(tr,"string");return _typeof$g(er)=="symbol"?er:er+""}function _toPrimitive$f(tr,er){if(_typeof$g(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$g(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var formatAxisMap=function tr(er,rr,nr,ir,sr){var ar=er.width,cr=er.height,lr=er.layout,or=er.children,ur=Object.keys(rr),hr={left:nr.left,leftMirror:nr.left,right:ar-nr.right,rightMirror:ar-nr.right,top:nr.top,topMirror:nr.top,bottom:cr-nr.bottom,bottomMirror:cr-nr.bottom},dr=!!findChildByType(or,Bar);return ur.reduce(function(fr,gr){var br=rr[gr],pr=br.orientation,mr=br.domain,yr=br.padding,xr=yr===void 0?{}:yr,vr=br.mirror,_r=br.reversed,Er="".concat(pr).concat(vr?"Mirror":""),Tr,Rr,Nr,Dr,Ir;if(br.type==="number"&&(br.padding==="gap"||br.padding==="no-gap")){var Or=mr[1]-mr[0],jr=1/0,Lr=br.categoricalDomain.sort(compareValues);if(Lr.forEach(function(zr,Gr){Gr>0&&(jr=Math.min((zr||0)-(Lr[Gr-1]||0),jr))}),Number.isFinite(jr)){var Cr=jr/Or,wr=br.layout==="vertical"?nr.height:nr.width;if(br.padding==="gap"&&(Tr=Cr*wr/2),br.padding==="no-gap"){var Pr=getPercentValue(er.barCategoryGap,Cr*wr),Ar=Cr*wr/2;Tr=Ar-Pr-(Ar-Pr)/wr*Pr}}}ir==="xAxis"?Rr=[nr.left+(xr.left||0)+(Tr||0),nr.left+nr.width-(xr.right||0)-(Tr||0)]:ir==="yAxis"?Rr=lr==="horizontal"?[nr.top+nr.height-(xr.bottom||0),nr.top+(xr.top||0)]:[nr.top+(xr.top||0)+(Tr||0),nr.top+nr.height-(xr.bottom||0)-(Tr||0)]:Rr=br.range,_r&&(Rr=[Rr[1],Rr[0]]);var Sr=parseScale(br,sr,dr),Mr=Sr.scale,qr=Sr.realScaleType;Mr.domain(mr).range(Rr),checkDomainOfScale(Mr);var $r=getTicksOfScale(Mr,_objectSpread$b(_objectSpread$b({},br),{},{realScaleType:qr}));ir==="xAxis"?(Ir=pr==="top"&&!vr||pr==="bottom"&&vr,Nr=nr.left,Dr=hr[Er]-Ir*br.height):ir==="yAxis"&&(Ir=pr==="left"&&!vr||pr==="right"&&vr,Nr=hr[Er]-Ir*br.width,Dr=nr.top);var Br=_objectSpread$b(_objectSpread$b(_objectSpread$b({},br),$r),{},{realScaleType:qr,x:Nr,y:Dr,scale:Mr,width:ir==="xAxis"?nr.width:br.width,height:ir==="yAxis"?nr.height:br.height});return Br.bandSize=getBandSizeOfAxis(Br,$r),!br.hide&&ir==="xAxis"?hr[Er]+=(Ir?-1:1)*Br.height:br.hide||(hr[Er]+=(Ir?-1:1)*Br.width),_objectSpread$b(_objectSpread$b({},fr),{},_defineProperty$f({},gr,Br))},{})},rectWithPoints=function tr(er,rr){var nr=er.x,ir=er.y,sr=rr.x,ar=rr.y;return{x:Math.min(nr,sr),y:Math.min(ir,ar),width:Math.abs(sr-nr),height:Math.abs(ar-ir)}},rectWithCoords=function tr(er){var rr=er.x1,nr=er.y1,ir=er.x2,sr=er.y2;return rectWithPoints({x:rr,y:nr},{x:ir,y:sr})},ScaleHelper=function(){function tr(er){_classCallCheck$c(this,tr),this.scale=er}return _createClass$c(tr,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(rr){var nr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ir=nr.bandAware,sr=nr.position;if(rr!==void 0){if(sr)switch(sr){case"start":return this.scale(rr);case"middle":{var ar=this.bandwidth?this.bandwidth()/2:0;return this.scale(rr)+ar}case"end":{var cr=this.bandwidth?this.bandwidth():0;return this.scale(rr)+cr}default:return this.scale(rr)}if(ir){var lr=this.bandwidth?this.bandwidth()/2:0;return this.scale(rr)+lr}return this.scale(rr)}}},{key:"isInRange",value:function(rr){var nr=this.range(),ir=nr[0],sr=nr[nr.length-1];return ir<=sr?rr>=ir&&rr<=sr:rr>=sr&&rr<=ir}}],[{key:"create",value:function(rr){return new tr(rr)}}])}();_defineProperty$f(ScaleHelper,"EPS",1e-4);var createLabeledScales=function tr(er){var rr=Object.keys(er).reduce(function(nr,ir){return _objectSpread$b(_objectSpread$b({},nr),{},_defineProperty$f({},ir,ScaleHelper.create(er[ir])))},{});return _objectSpread$b(_objectSpread$b({},rr),{},{apply:function(ir){var sr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ar=sr.bandAware,cr=sr.position;return mapValues$1(ir,function(lr,or){return rr[or].apply(lr,{bandAware:ar,position:cr})})},isInRange:function(ir){return every$1(ir,function(sr,ar){return rr[ar].isInRange(sr)})}})};function normalizeAngle(tr){return(tr%180+180)%180}var getAngledRectangleWidth=function tr(er){var rr=er.width,nr=er.height,ir=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,sr=normalizeAngle(ir),ar=sr*Math.PI/180,cr=Math.atan(nr/rr),lr=ar>cr&&ar<Math.PI-cr?nr/Math.sin(ar):rr/Math.cos(ar);return Math.abs(lr)},baseIteratee$1=_baseIteratee,isArrayLike=isArrayLike_1,keys=keys_1;function createFind$1(tr){return function(er,rr,nr){var ir=Object(er);if(!isArrayLike(er)){var sr=baseIteratee$1(rr);er=keys(er),rr=function(cr){return sr(ir[cr],cr,ir)}}var ar=tr(er,rr,nr);return ar>-1?ir[sr?er[ar]:ar]:void 0}}var _createFind=createFind$1,toFinite=toFinite_1;function toInteger$1(tr){var er=toFinite(tr),rr=er%1;return er===er?rr?er-rr:er:0}var toInteger_1=toInteger$1,baseFindIndex=_baseFindIndex,baseIteratee=_baseIteratee,toInteger=toInteger_1,nativeMax=Math.max;function findIndex$1(tr,er,rr){var nr=tr==null?0:tr.length;if(!nr)return-1;var ir=rr==null?0:toInteger(rr);return ir<0&&(ir=nativeMax(nr+ir,0)),baseFindIndex(tr,baseIteratee(er),ir)}var findIndex_1=findIndex$1,createFind=_createFind,findIndex=findIndex_1,find=createFind(findIndex),find_1=find;const find$1=getDefaultExportFromCjs(find_1);var calculateViewBox=memoize$3(function(tr){return{x:tr.left,y:tr.top,width:tr.width,height:tr.height}},function(tr){return["l",tr.left,"t",tr.top,"w",tr.width,"h",tr.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function tr(er){var rr=er.state,nr=rr.xAxisMap,ir=rr.yAxisMap,sr=rr.offset,ar=er.clipPathId,cr=er.children,lr=er.width,or=er.height,ur=calculateViewBox(sr);return React.createElement(XAxisContext.Provider,{value:nr},React.createElement(YAxisContext.Provider,{value:ir},React.createElement(OffsetContext.Provider,{value:sr},React.createElement(ViewBoxContext.Provider,{value:ur},React.createElement(ClipPathIdContext.Provider,{value:ar},React.createElement(ChartHeightContext.Provider,{value:or},React.createElement(ChartWidthContext.Provider,{value:lr},cr)))))))},useClipPathId=function tr(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function tr(er){var rr=reactExports.useContext(XAxisContext);rr==null&&invariant();var nr=rr[er];return nr==null&&invariant(),nr},useArbitraryXAxis=function tr(){var er=reactExports.useContext(XAxisContext);return getAnyElementOfObject(er)},useYAxisWithFiniteDomainOrRandom=function tr(){var er=reactExports.useContext(YAxisContext),rr=find$1(er,function(nr){return every$1(nr.domain,Number.isFinite)});return rr||getAnyElementOfObject(er)},useYAxisOrThrow=function tr(er){var rr=reactExports.useContext(YAxisContext);rr==null&&invariant();var nr=rr[er];return nr==null&&invariant(),nr},useViewBox=function tr(){var er=reactExports.useContext(ViewBoxContext);return er},useOffset=function tr(){return reactExports.useContext(OffsetContext)},useChartWidth=function tr(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function tr(){return reactExports.useContext(ChartHeightContext)};function _typeof$f(tr){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$f(tr)}function _classCallCheck$b(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$e(nr.key),nr)}}function _createClass$b(tr,er,rr){return er&&_defineProperties$b(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$a(tr,er,rr){return er=_getPrototypeOf$a(er),_possibleConstructorReturn$a(tr,_isNativeReflectConstruct$a()?Reflect.construct(er,rr||[],_getPrototypeOf$a(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$a(tr,er){if(er&&(_typeof$f(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(tr)}function _assertThisInitialized$a(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$a(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$a=function(){return!!tr})()}function _getPrototypeOf$a(tr){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$a(tr)}function _inherits$a(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$a(tr,er)}function _setPrototypeOf$a(tr,er){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$a(tr,er)}function ownKeys$a(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$a(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$a(Object(rr),!0).forEach(function(nr){_defineProperty$e(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$a(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$e(tr,er,rr){return er=_toPropertyKey$e(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$e(tr){var er=_toPrimitive$e(tr,"string");return _typeof$f(er)=="symbol"?er:er+""}function _toPrimitive$e(tr,er){if(_typeof$f(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$f(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}function _slicedToArray$1(tr,er){return _arrayWithHoles$1(tr)||_iterableToArrayLimit$1(tr,er)||_unsupportedIterableToArray$3(tr,er)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$3(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$3(tr,er)}}function _arrayLikeToArray$3(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _iterableToArrayLimit$1(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles$1(tr){if(Array.isArray(tr))return tr}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$b.apply(this,arguments)}var renderLine=function tr(er,rr){var nr;return React.isValidElement(er)?nr=React.cloneElement(er,rr):isFunction$3(er)?nr=er(rr):nr=React.createElement("line",_extends$b({},rr,{className:"recharts-reference-line-line"})),nr},getEndPoints=function tr(er,rr,nr,ir,sr,ar,cr,lr,or){var ur=sr.x,hr=sr.y,dr=sr.width,fr=sr.height;if(nr){var gr=or.y,br=er.y.apply(gr,{position:ar});if(ifOverflowMatches(or,"discard")&&!er.y.isInRange(br))return null;var pr=[{x:ur+dr,y:br},{x:ur,y:br}];return lr==="left"?pr.reverse():pr}if(rr){var mr=or.x,yr=er.x.apply(mr,{position:ar});if(ifOverflowMatches(or,"discard")&&!er.x.isInRange(yr))return null;var xr=[{x:yr,y:hr+fr},{x:yr,y:hr}];return cr==="top"?xr.reverse():xr}if(ir){var vr=or.segment,_r=vr.map(function(Er){return er.apply(Er,{position:ar})});return ifOverflowMatches(or,"discard")&&some$1(_r,function(Er){return!er.isInRange(Er)})?null:_r}return null};function ReferenceLineImpl(tr){var er=tr.x,rr=tr.y,nr=tr.segment,ir=tr.xAxisId,sr=tr.yAxisId,ar=tr.shape,cr=tr.className,lr=tr.alwaysShow,or=useClipPathId(),ur=useXAxisOrThrow(ir),hr=useYAxisOrThrow(sr),dr=useViewBox();if(!or||!dr)return null;warn(lr===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var fr=createLabeledScales({x:ur.scale,y:hr.scale}),gr=isNumOrStr(er),br=isNumOrStr(rr),pr=nr&&nr.length===2,mr=getEndPoints(fr,gr,br,pr,dr,tr.position,ur.orientation,hr.orientation,tr);if(!mr)return null;var yr=_slicedToArray$1(mr,2),xr=yr[0],vr=xr.x,_r=xr.y,Er=yr[1],Tr=Er.x,Rr=Er.y,Nr=ifOverflowMatches(tr,"hidden")?"url(#".concat(or,")"):void 0,Dr=_objectSpread$a(_objectSpread$a({clipPath:Nr},filterProps(tr,!0)),{},{x1:vr,y1:_r,x2:Tr,y2:Rr});return React.createElement(Layer,{className:clsx("recharts-reference-line",cr)},renderLine(ar,Dr),Label.renderCallByParent(tr,rectWithCoords({x1:vr,y1:_r,x2:Tr,y2:Rr})))}var ReferenceLine=function(tr){function er(){return _classCallCheck$b(this,er),_callSuper$a(this,er,arguments)}return _inherits$a(er,tr),_createClass$b(er,[{key:"render",value:function(){return React.createElement(ReferenceLineImpl,this.props)}}])}(React.Component);_defineProperty$e(ReferenceLine,"displayName","ReferenceLine");_defineProperty$e(ReferenceLine,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$a.apply(this,arguments)}function _typeof$e(tr){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$e(tr)}function ownKeys$9(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$9(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$9(Object(rr),!0).forEach(function(nr){_defineProperty$d(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$9(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$a(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$d(nr.key),nr)}}function _createClass$a(tr,er,rr){return er&&_defineProperties$a(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$9(tr,er,rr){return er=_getPrototypeOf$9(er),_possibleConstructorReturn$9(tr,_isNativeReflectConstruct$9()?Reflect.construct(er,rr||[],_getPrototypeOf$9(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$9(tr,er){if(er&&(_typeof$e(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(tr)}function _assertThisInitialized$9(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$9(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$9=function(){return!!tr})()}function _getPrototypeOf$9(tr){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$9(tr)}function _inherits$9(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$9(tr,er)}function _setPrototypeOf$9(tr,er){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$9(tr,er)}function _defineProperty$d(tr,er,rr){return er=_toPropertyKey$d(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$d(tr){var er=_toPrimitive$d(tr,"string");return _typeof$e(er)=="symbol"?er:er+""}function _toPrimitive$d(tr,er){if(_typeof$e(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$e(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var getCoordinate=function tr(er){var rr=er.x,nr=er.y,ir=er.xAxis,sr=er.yAxis,ar=createLabeledScales({x:ir.scale,y:sr.scale}),cr=ar.apply({x:rr,y:nr},{bandAware:!0});return ifOverflowMatches(er,"discard")&&!ar.isInRange(cr)?null:cr},ReferenceDot=function(tr){function er(){return _classCallCheck$a(this,er),_callSuper$9(this,er,arguments)}return _inherits$9(er,tr),_createClass$a(er,[{key:"render",value:function(){var nr=this.props,ir=nr.x,sr=nr.y,ar=nr.r,cr=nr.alwaysShow,lr=nr.clipPathId,or=isNumOrStr(ir),ur=isNumOrStr(sr);if(warn(cr===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!or||!ur)return null;var hr=getCoordinate(this.props);if(!hr)return null;var dr=hr.x,fr=hr.y,gr=this.props,br=gr.shape,pr=gr.className,mr=ifOverflowMatches(this.props,"hidden")?"url(#".concat(lr,")"):void 0,yr=_objectSpread$9(_objectSpread$9({clipPath:mr},filterProps(this.props,!0)),{},{cx:dr,cy:fr});return React.createElement(Layer,{className:clsx("recharts-reference-dot",pr)},er.renderDot(br,yr),Label.renderCallByParent(this.props,{x:dr-ar,y:fr-ar,width:2*ar,height:2*ar}))}}])}(React.Component);_defineProperty$d(ReferenceDot,"displayName","ReferenceDot");_defineProperty$d(ReferenceDot,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});_defineProperty$d(ReferenceDot,"renderDot",function(tr,er){var rr;return React.isValidElement(tr)?rr=React.cloneElement(tr,er):isFunction$3(tr)?rr=tr(er):rr=React.createElement(Dot,_extends$a({},er,{cx:er.cx,cy:er.cy,className:"recharts-reference-dot-dot"})),rr});function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$9.apply(this,arguments)}function _typeof$d(tr){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$d(tr)}function ownKeys$8(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$8(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$8(Object(rr),!0).forEach(function(nr){_defineProperty$c(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$8(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$9(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$c(nr.key),nr)}}function _createClass$9(tr,er,rr){return er&&_defineProperties$9(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$8(tr,er,rr){return er=_getPrototypeOf$8(er),_possibleConstructorReturn$8(tr,_isNativeReflectConstruct$8()?Reflect.construct(er,rr||[],_getPrototypeOf$8(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$8(tr,er){if(er&&(_typeof$d(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(tr)}function _assertThisInitialized$8(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$8(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!tr})()}function _getPrototypeOf$8(tr){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$8(tr)}function _inherits$8(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$8(tr,er)}function _setPrototypeOf$8(tr,er){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$8(tr,er)}function _defineProperty$c(tr,er,rr){return er=_toPropertyKey$c(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$c(tr){var er=_toPrimitive$c(tr,"string");return _typeof$d(er)=="symbol"?er:er+""}function _toPrimitive$c(tr,er){if(_typeof$d(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$d(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var getRect=function tr(er,rr,nr,ir,sr){var ar=sr.x1,cr=sr.x2,lr=sr.y1,or=sr.y2,ur=sr.xAxis,hr=sr.yAxis;if(!ur||!hr)return null;var dr=createLabeledScales({x:ur.scale,y:hr.scale}),fr={x:er?dr.x.apply(ar,{position:"start"}):dr.x.rangeMin,y:nr?dr.y.apply(lr,{position:"start"}):dr.y.rangeMin},gr={x:rr?dr.x.apply(cr,{position:"end"}):dr.x.rangeMax,y:ir?dr.y.apply(or,{position:"end"}):dr.y.rangeMax};return ifOverflowMatches(sr,"discard")&&(!dr.isInRange(fr)||!dr.isInRange(gr))?null:rectWithPoints(fr,gr)},ReferenceArea=function(tr){function er(){return _classCallCheck$9(this,er),_callSuper$8(this,er,arguments)}return _inherits$8(er,tr),_createClass$9(er,[{key:"render",value:function(){var nr=this.props,ir=nr.x1,sr=nr.x2,ar=nr.y1,cr=nr.y2,lr=nr.className,or=nr.alwaysShow,ur=nr.clipPathId;warn(or===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var hr=isNumOrStr(ir),dr=isNumOrStr(sr),fr=isNumOrStr(ar),gr=isNumOrStr(cr),br=this.props.shape;if(!hr&&!dr&&!fr&&!gr&&!br)return null;var pr=getRect(hr,dr,fr,gr,this.props);if(!pr&&!br)return null;var mr=ifOverflowMatches(this.props,"hidden")?"url(#".concat(ur,")"):void 0;return React.createElement(Layer,{className:clsx("recharts-reference-area",lr)},er.renderRect(br,_objectSpread$8(_objectSpread$8({clipPath:mr},filterProps(this.props,!0)),pr)),Label.renderCallByParent(this.props,pr))}}])}(React.Component);_defineProperty$c(ReferenceArea,"displayName","ReferenceArea");_defineProperty$c(ReferenceArea,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_defineProperty$c(ReferenceArea,"renderRect",function(tr,er){var rr;return React.isValidElement(tr)?rr=React.cloneElement(tr,er):isFunction$3(tr)?rr=tr(er):rr=React.createElement(Rectangle,_extends$9({},er,{className:"recharts-reference-area-rect"})),rr});function getEveryNthWithCondition(tr,er,rr){if(er<1)return[];if(er===1&&rr===void 0)return tr;for(var nr=[],ir=0;ir<tr.length;ir+=er)nr.push(tr[ir]);return nr}function getAngledTickWidth(tr,er,rr){var nr={width:tr.width+er.width,height:tr.height+er.height};return getAngledRectangleWidth(nr,rr)}function getTickBoundaries(tr,er,rr){var nr=rr==="width",ir=tr.x,sr=tr.y,ar=tr.width,cr=tr.height;return er===1?{start:nr?ir:sr,end:nr?ir+ar:sr+cr}:{start:nr?ir+ar:sr+cr,end:nr?ir:sr}}function isVisible(tr,er,rr,nr,ir){if(tr*er<tr*nr||tr*er>tr*ir)return!1;var sr=rr();return tr*(er-tr*sr/2-nr)>=0&&tr*(er+tr*sr/2-ir)<=0}function getNumberIntervalTicks(tr,er){return getEveryNthWithCondition(tr,er+1)}function getEquidistantTicks(tr,er,rr,nr,ir){for(var sr=(nr||[]).slice(),ar=er.start,cr=er.end,lr=0,or=1,ur=ar,hr=function(){var gr=nr==null?void 0:nr[lr];if(gr===void 0)return{v:getEveryNthWithCondition(nr,or)};var br=lr,pr,mr=function(){return pr===void 0&&(pr=rr(gr,br)),pr},yr=gr.coordinate,xr=lr===0||isVisible(tr,yr,mr,ur,cr);xr||(lr=0,ur=ar,or+=1),xr&&(ur=yr+tr*(mr()/2+ir),lr+=or)},dr;or<=sr.length;)if(dr=hr(),dr)return dr.v;return[]}function _typeof$c(tr){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$c(tr)}function ownKeys$7(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$7(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$7(Object(rr),!0).forEach(function(nr){_defineProperty$b(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$7(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$b(tr,er,rr){return er=_toPropertyKey$b(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$b(tr){var er=_toPrimitive$b(tr,"string");return _typeof$c(er)=="symbol"?er:er+""}function _toPrimitive$b(tr,er){if(_typeof$c(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$c(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function getTicksEnd(tr,er,rr,nr,ir){for(var sr=(nr||[]).slice(),ar=sr.length,cr=er.start,lr=er.end,or=function(dr){var fr=sr[dr],gr,br=function(){return gr===void 0&&(gr=rr(fr,dr)),gr};if(dr===ar-1){var pr=tr*(fr.coordinate+tr*br()/2-lr);sr[dr]=fr=_objectSpread$7(_objectSpread$7({},fr),{},{tickCoord:pr>0?fr.coordinate-pr*tr:fr.coordinate})}else sr[dr]=fr=_objectSpread$7(_objectSpread$7({},fr),{},{tickCoord:fr.coordinate});var mr=isVisible(tr,fr.tickCoord,br,cr,lr);mr&&(lr=fr.tickCoord-tr*(br()/2+ir),sr[dr]=_objectSpread$7(_objectSpread$7({},fr),{},{isShow:!0}))},ur=ar-1;ur>=0;ur--)or(ur);return sr}function getTicksStart(tr,er,rr,nr,ir,sr){var ar=(nr||[]).slice(),cr=ar.length,lr=er.start,or=er.end;if(sr){var ur=nr[cr-1],hr=rr(ur,cr-1),dr=tr*(ur.coordinate+tr*hr/2-or);ar[cr-1]=ur=_objectSpread$7(_objectSpread$7({},ur),{},{tickCoord:dr>0?ur.coordinate-dr*tr:ur.coordinate});var fr=isVisible(tr,ur.tickCoord,function(){return hr},lr,or);fr&&(or=ur.tickCoord-tr*(hr/2+ir),ar[cr-1]=_objectSpread$7(_objectSpread$7({},ur),{},{isShow:!0}))}for(var gr=sr?cr-1:cr,br=function(yr){var xr=ar[yr],vr,_r=function(){return vr===void 0&&(vr=rr(xr,yr)),vr};if(yr===0){var Er=tr*(xr.coordinate-tr*_r()/2-lr);ar[yr]=xr=_objectSpread$7(_objectSpread$7({},xr),{},{tickCoord:Er<0?xr.coordinate-Er*tr:xr.coordinate})}else ar[yr]=xr=_objectSpread$7(_objectSpread$7({},xr),{},{tickCoord:xr.coordinate});var Tr=isVisible(tr,xr.tickCoord,_r,lr,or);Tr&&(lr=xr.tickCoord+tr*(_r()/2+ir),ar[yr]=_objectSpread$7(_objectSpread$7({},xr),{},{isShow:!0}))},pr=0;pr<gr;pr++)br(pr);return ar}function getTicks(tr,er,rr){var nr=tr.tick,ir=tr.ticks,sr=tr.viewBox,ar=tr.minTickGap,cr=tr.orientation,lr=tr.interval,or=tr.tickFormatter,ur=tr.unit,hr=tr.angle;if(!ir||!ir.length||!nr)return[];if(isNumber(lr)||Global.isSsr)return getNumberIntervalTicks(ir,typeof lr=="number"&&isNumber(lr)?lr:0);var dr=[],fr=cr==="top"||cr==="bottom"?"width":"height",gr=ur&&fr==="width"?getStringSize(ur,{fontSize:er,letterSpacing:rr}):{width:0,height:0},br=function(xr,vr){var _r=isFunction$3(or)?or(xr.value,vr):xr.value;return fr==="width"?getAngledTickWidth(getStringSize(_r,{fontSize:er,letterSpacing:rr}),gr,hr):getStringSize(_r,{fontSize:er,letterSpacing:rr})[fr]},pr=ir.length>=2?mathSign(ir[1].coordinate-ir[0].coordinate):1,mr=getTickBoundaries(sr,pr,fr);return lr==="equidistantPreserveStart"?getEquidistantTicks(pr,mr,br,ir,ar):(lr==="preserveStart"||lr==="preserveStartEnd"?dr=getTicksStart(pr,mr,br,ir,ar,lr==="preserveStartEnd"):dr=getTicksEnd(pr,mr,br,ir,ar),dr.filter(function(yr){return yr.isShow}))}var _excluded$5=["viewBox"],_excluded2$4=["viewBox"],_excluded3=["ticks"];function _typeof$b(tr){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$b(tr)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$8.apply(this,arguments)}function ownKeys$6(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$6(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$6(Object(rr),!0).forEach(function(nr){_defineProperty$a(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$6(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _objectWithoutProperties$5(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$5(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$5(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _classCallCheck$8(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$a(nr.key),nr)}}function _createClass$8(tr,er,rr){return er&&_defineProperties$8(tr.prototype,er),rr&&_defineProperties$8(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$7(tr,er,rr){return er=_getPrototypeOf$7(er),_possibleConstructorReturn$7(tr,_isNativeReflectConstruct$7()?Reflect.construct(er,rr||[],_getPrototypeOf$7(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$7(tr,er){if(er&&(_typeof$b(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(tr)}function _assertThisInitialized$7(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$7(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!tr})()}function _getPrototypeOf$7(tr){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$7(tr)}function _inherits$7(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$7(tr,er)}function _setPrototypeOf$7(tr,er){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$7(tr,er)}function _defineProperty$a(tr,er,rr){return er=_toPropertyKey$a(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$a(tr){var er=_toPrimitive$a(tr,"string");return _typeof$b(er)=="symbol"?er:er+""}function _toPrimitive$a(tr,er){if(_typeof$b(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$b(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var CartesianAxis=function(tr){function er(rr){var nr;return _classCallCheck$8(this,er),nr=_callSuper$7(this,er,[rr]),nr.state={fontSize:"",letterSpacing:""},nr}return _inherits$7(er,tr),_createClass$8(er,[{key:"shouldComponentUpdate",value:function(nr,ir){var sr=nr.viewBox,ar=_objectWithoutProperties$5(nr,_excluded$5),cr=this.props,lr=cr.viewBox,or=_objectWithoutProperties$5(cr,_excluded2$4);return!shallowEqual(sr,lr)||!shallowEqual(ar,or)||!shallowEqual(ir,this.state)}},{key:"componentDidMount",value:function(){var nr=this.layerReference;if(nr){var ir=nr.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];ir&&this.setState({fontSize:window.getComputedStyle(ir).fontSize,letterSpacing:window.getComputedStyle(ir).letterSpacing})}}},{key:"getTickLineCoord",value:function(nr){var ir=this.props,sr=ir.x,ar=ir.y,cr=ir.width,lr=ir.height,or=ir.orientation,ur=ir.tickSize,hr=ir.mirror,dr=ir.tickMargin,fr,gr,br,pr,mr,yr,xr=hr?-1:1,vr=nr.tickSize||ur,_r=isNumber(nr.tickCoord)?nr.tickCoord:nr.coordinate;switch(or){case"top":fr=gr=nr.coordinate,pr=ar+ +!hr*lr,br=pr-xr*vr,yr=br-xr*dr,mr=_r;break;case"left":br=pr=nr.coordinate,gr=sr+ +!hr*cr,fr=gr-xr*vr,mr=fr-xr*dr,yr=_r;break;case"right":br=pr=nr.coordinate,gr=sr+ +hr*cr,fr=gr+xr*vr,mr=fr+xr*dr,yr=_r;break;default:fr=gr=nr.coordinate,pr=ar+ +hr*lr,br=pr+xr*vr,yr=br+xr*dr,mr=_r;break}return{line:{x1:fr,y1:br,x2:gr,y2:pr},tick:{x:mr,y:yr}}}},{key:"getTickTextAnchor",value:function(){var nr=this.props,ir=nr.orientation,sr=nr.mirror,ar;switch(ir){case"left":ar=sr?"start":"end";break;case"right":ar=sr?"end":"start";break;default:ar="middle";break}return ar}},{key:"getTickVerticalAnchor",value:function(){var nr=this.props,ir=nr.orientation,sr=nr.mirror,ar="end";switch(ir){case"left":case"right":ar="middle";break;case"top":ar=sr?"start":"end";break;default:ar=sr?"end":"start";break}return ar}},{key:"renderAxisLine",value:function(){var nr=this.props,ir=nr.x,sr=nr.y,ar=nr.width,cr=nr.height,lr=nr.orientation,or=nr.mirror,ur=nr.axisLine,hr=_objectSpread$6(_objectSpread$6(_objectSpread$6({},filterProps(this.props,!1)),filterProps(ur,!1)),{},{fill:"none"});if(lr==="top"||lr==="bottom"){var dr=+(lr==="top"&&!or||lr==="bottom"&&or);hr=_objectSpread$6(_objectSpread$6({},hr),{},{x1:ir,y1:sr+dr*cr,x2:ir+ar,y2:sr+dr*cr})}else{var fr=+(lr==="left"&&!or||lr==="right"&&or);hr=_objectSpread$6(_objectSpread$6({},hr),{},{x1:ir+fr*ar,y1:sr,x2:ir+fr*ar,y2:sr+cr})}return React.createElement("line",_extends$8({},hr,{className:clsx("recharts-cartesian-axis-line",get$2(ur,"className"))}))}},{key:"renderTicks",value:function(nr,ir,sr){var ar=this,cr=this.props,lr=cr.tickLine,or=cr.stroke,ur=cr.tick,hr=cr.tickFormatter,dr=cr.unit,fr=getTicks(_objectSpread$6(_objectSpread$6({},this.props),{},{ticks:nr}),ir,sr),gr=this.getTickTextAnchor(),br=this.getTickVerticalAnchor(),pr=filterProps(this.props,!1),mr=filterProps(ur,!1),yr=_objectSpread$6(_objectSpread$6({},pr),{},{fill:"none"},filterProps(lr,!1)),xr=fr.map(function(vr,_r){var Er=ar.getTickLineCoord(vr),Tr=Er.line,Rr=Er.tick,Nr=_objectSpread$6(_objectSpread$6(_objectSpread$6(_objectSpread$6({textAnchor:gr,verticalAnchor:br},pr),{},{stroke:"none",fill:or},mr),Rr),{},{index:_r,payload:vr,visibleTicksCount:fr.length,tickFormatter:hr});return React.createElement(Layer,_extends$8({className:"recharts-cartesian-axis-tick",key:"tick-".concat(vr.value,"-").concat(vr.coordinate,"-").concat(vr.tickCoord)},adaptEventsOfChild(ar.props,vr,_r)),lr&&React.createElement("line",_extends$8({},yr,Tr,{className:clsx("recharts-cartesian-axis-tick-line",get$2(lr,"className"))})),ur&&er.renderTickItem(ur,Nr,"".concat(isFunction$3(hr)?hr(vr.value,_r):vr.value).concat(dr||"")))});return React.createElement("g",{className:"recharts-cartesian-axis-ticks"},xr)}},{key:"render",value:function(){var nr=this,ir=this.props,sr=ir.axisLine,ar=ir.width,cr=ir.height,lr=ir.ticksGenerator,or=ir.className,ur=ir.hide;if(ur)return null;var hr=this.props,dr=hr.ticks,fr=_objectWithoutProperties$5(hr,_excluded3),gr=dr;return isFunction$3(lr)&&(gr=dr&&dr.length>0?lr(this.props):lr(fr)),ar<=0||cr<=0||!gr||!gr.length?null:React.createElement(Layer,{className:clsx("recharts-cartesian-axis",or),ref:function(pr){nr.layerReference=pr}},sr&&this.renderAxisLine(),this.renderTicks(gr,this.state.fontSize,this.state.letterSpacing),Label.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(nr,ir,sr){var ar,cr=clsx(ir.className,"recharts-cartesian-axis-tick-value");return React.isValidElement(nr)?ar=React.cloneElement(nr,_objectSpread$6(_objectSpread$6({},ir),{},{className:cr})):isFunction$3(nr)?ar=nr(_objectSpread$6(_objectSpread$6({},ir),{},{className:cr})):ar=React.createElement(Text,_extends$8({},ir,{className:"recharts-cartesian-axis-tick-value"}),sr),ar}}])}(reactExports.Component);_defineProperty$a(CartesianAxis,"displayName","CartesianAxis");_defineProperty$a(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$4=["x1","y1","x2","y2","key"],_excluded2$3=["offset"];function _typeof$a(tr){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$a(tr)}function ownKeys$5(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$5(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$5(Object(rr),!0).forEach(function(nr){_defineProperty$9(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$5(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$9(tr,er,rr){return er=_toPropertyKey$9(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$9(tr){var er=_toPrimitive$9(tr,"string");return _typeof$a(er)=="symbol"?er:er+""}function _toPrimitive$9(tr,er){if(_typeof$a(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$a(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$7.apply(this,arguments)}function _objectWithoutProperties$4(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$4(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$4(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}var Background=function tr(er){var rr=er.fill;if(!rr||rr==="none")return null;var nr=er.fillOpacity,ir=er.x,sr=er.y,ar=er.width,cr=er.height,lr=er.ry;return React.createElement("rect",{x:ir,y:sr,ry:lr,width:ar,height:cr,stroke:"none",fill:rr,fillOpacity:nr,className:"recharts-cartesian-grid-bg"})};function renderLineItem(tr,er){var rr;if(React.isValidElement(tr))rr=React.cloneElement(tr,er);else if(isFunction$3(tr))rr=tr(er);else{var nr=er.x1,ir=er.y1,sr=er.x2,ar=er.y2,cr=er.key,lr=_objectWithoutProperties$4(er,_excluded$4),or=filterProps(lr,!1);or.offset;var ur=_objectWithoutProperties$4(or,_excluded2$3);rr=React.createElement("line",_extends$7({},ur,{x1:nr,y1:ir,x2:sr,y2:ar,fill:"none",key:cr}))}return rr}function HorizontalGridLines(tr){var er=tr.x,rr=tr.width,nr=tr.horizontal,ir=nr===void 0?!0:nr,sr=tr.horizontalPoints;if(!ir||!sr||!sr.length)return null;var ar=sr.map(function(cr,lr){var or=_objectSpread$5(_objectSpread$5({},tr),{},{x1:er,y1:cr,x2:er+rr,y2:cr,key:"line-".concat(lr),index:lr});return renderLineItem(ir,or)});return React.createElement("g",{className:"recharts-cartesian-grid-horizontal"},ar)}function VerticalGridLines(tr){var er=tr.y,rr=tr.height,nr=tr.vertical,ir=nr===void 0?!0:nr,sr=tr.verticalPoints;if(!ir||!sr||!sr.length)return null;var ar=sr.map(function(cr,lr){var or=_objectSpread$5(_objectSpread$5({},tr),{},{x1:cr,y1:er,x2:cr,y2:er+rr,key:"line-".concat(lr),index:lr});return renderLineItem(ir,or)});return React.createElement("g",{className:"recharts-cartesian-grid-vertical"},ar)}function HorizontalStripes(tr){var er=tr.horizontalFill,rr=tr.fillOpacity,nr=tr.x,ir=tr.y,sr=tr.width,ar=tr.height,cr=tr.horizontalPoints,lr=tr.horizontal,or=lr===void 0?!0:lr;if(!or||!er||!er.length)return null;var ur=cr.map(function(dr){return Math.round(dr+ir-ir)}).sort(function(dr,fr){return dr-fr});ir!==ur[0]&&ur.unshift(0);var hr=ur.map(function(dr,fr){var gr=!ur[fr+1],br=gr?ir+ar-dr:ur[fr+1]-dr;if(br<=0)return null;var pr=fr%er.length;return React.createElement("rect",{key:"react-".concat(fr),y:dr,x:nr,height:br,width:sr,stroke:"none",fill:er[pr],fillOpacity:rr,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},hr)}function VerticalStripes(tr){var er=tr.vertical,rr=er===void 0?!0:er,nr=tr.verticalFill,ir=tr.fillOpacity,sr=tr.x,ar=tr.y,cr=tr.width,lr=tr.height,or=tr.verticalPoints;if(!rr||!nr||!nr.length)return null;var ur=or.map(function(dr){return Math.round(dr+sr-sr)}).sort(function(dr,fr){return dr-fr});sr!==ur[0]&&ur.unshift(0);var hr=ur.map(function(dr,fr){var gr=!ur[fr+1],br=gr?sr+cr-dr:ur[fr+1]-dr;if(br<=0)return null;var pr=fr%nr.length;return React.createElement("rect",{key:"react-".concat(fr),x:dr,y:ar,width:br,height:lr,stroke:"none",fill:nr[pr],fillOpacity:ir,className:"recharts-cartesian-grid-bg"})});return React.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},hr)}var defaultVerticalCoordinatesGenerator=function tr(er,rr){var nr=er.xAxis,ir=er.width,sr=er.height,ar=er.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$5(_objectSpread$5(_objectSpread$5({},CartesianAxis.defaultProps),nr),{},{ticks:getTicksOfAxis(nr,!0),viewBox:{x:0,y:0,width:ir,height:sr}})),ar.left,ar.left+ar.width,rr)},defaultHorizontalCoordinatesGenerator=function tr(er,rr){var nr=er.yAxis,ir=er.width,sr=er.height,ar=er.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$5(_objectSpread$5(_objectSpread$5({},CartesianAxis.defaultProps),nr),{},{ticks:getTicksOfAxis(nr,!0),viewBox:{x:0,y:0,width:ir,height:sr}})),ar.top,ar.top+ar.height,rr)},defaultProps={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function CartesianGrid(tr){var er,rr,nr,ir,sr,ar,cr=useChartWidth(),lr=useChartHeight(),or=useOffset(),ur=_objectSpread$5(_objectSpread$5({},tr),{},{stroke:(er=tr.stroke)!==null&&er!==void 0?er:defaultProps.stroke,fill:(rr=tr.fill)!==null&&rr!==void 0?rr:defaultProps.fill,horizontal:(nr=tr.horizontal)!==null&&nr!==void 0?nr:defaultProps.horizontal,horizontalFill:(ir=tr.horizontalFill)!==null&&ir!==void 0?ir:defaultProps.horizontalFill,vertical:(sr=tr.vertical)!==null&&sr!==void 0?sr:defaultProps.vertical,verticalFill:(ar=tr.verticalFill)!==null&&ar!==void 0?ar:defaultProps.verticalFill,x:isNumber(tr.x)?tr.x:or.left,y:isNumber(tr.y)?tr.y:or.top,width:isNumber(tr.width)?tr.width:or.width,height:isNumber(tr.height)?tr.height:or.height}),hr=ur.x,dr=ur.y,fr=ur.width,gr=ur.height,br=ur.syncWithTicks,pr=ur.horizontalValues,mr=ur.verticalValues,yr=useArbitraryXAxis(),xr=useYAxisWithFiniteDomainOrRandom();if(!isNumber(fr)||fr<=0||!isNumber(gr)||gr<=0||!isNumber(hr)||hr!==+hr||!isNumber(dr)||dr!==+dr)return null;var vr=ur.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,_r=ur.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,Er=ur.horizontalPoints,Tr=ur.verticalPoints;if((!Er||!Er.length)&&isFunction$3(_r)){var Rr=pr&&pr.length,Nr=_r({yAxis:xr?_objectSpread$5(_objectSpread$5({},xr),{},{ticks:Rr?pr:xr.ticks}):void 0,width:cr,height:lr,offset:or},Rr?!0:br);warn(Array.isArray(Nr),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$a(Nr),"]")),Array.isArray(Nr)&&(Er=Nr)}if((!Tr||!Tr.length)&&isFunction$3(vr)){var Dr=mr&&mr.length,Ir=vr({xAxis:yr?_objectSpread$5(_objectSpread$5({},yr),{},{ticks:Dr?mr:yr.ticks}):void 0,width:cr,height:lr,offset:or},Dr?!0:br);warn(Array.isArray(Ir),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$a(Ir),"]")),Array.isArray(Ir)&&(Tr=Ir)}return React.createElement("g",{className:"recharts-cartesian-grid"},React.createElement(Background,{fill:ur.fill,fillOpacity:ur.fillOpacity,x:ur.x,y:ur.y,width:ur.width,height:ur.height,ry:ur.ry}),React.createElement(HorizontalGridLines,_extends$7({},ur,{offset:or,horizontalPoints:Er,xAxis:yr,yAxis:xr})),React.createElement(VerticalGridLines,_extends$7({},ur,{offset:or,verticalPoints:Tr,xAxis:yr,yAxis:xr})),React.createElement(HorizontalStripes,_extends$7({},ur,{horizontalPoints:Er})),React.createElement(VerticalStripes,_extends$7({},ur,{verticalPoints:Tr})))}CartesianGrid.displayName="CartesianGrid";var _excluded$3=["type","layout","connectNulls","ref"],_excluded2$2=["key"];function _typeof$9(tr){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$9(tr)}function _objectWithoutProperties$3(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$3(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$3(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$6.apply(this,arguments)}function ownKeys$4(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$4(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$4(Object(rr),!0).forEach(function(nr){_defineProperty$8(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$4(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _toConsumableArray$2(tr){return _arrayWithoutHoles$2(tr)||_iterableToArray$2(tr)||_unsupportedIterableToArray$2(tr)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$2(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$2(tr,er)}}function _iterableToArray$2(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$2(tr){if(Array.isArray(tr))return _arrayLikeToArray$2(tr)}function _arrayLikeToArray$2(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function _classCallCheck$7(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$8(nr.key),nr)}}function _createClass$7(tr,er,rr){return er&&_defineProperties$7(tr.prototype,er),rr&&_defineProperties$7(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$6(tr,er,rr){return er=_getPrototypeOf$6(er),_possibleConstructorReturn$6(tr,_isNativeReflectConstruct$6()?Reflect.construct(er,rr||[],_getPrototypeOf$6(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$6(tr,er){if(er&&(_typeof$9(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(tr)}function _assertThisInitialized$6(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$6(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!tr})()}function _getPrototypeOf$6(tr){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$6(tr)}function _inherits$6(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$6(tr,er)}function _setPrototypeOf$6(tr,er){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$6(tr,er)}function _defineProperty$8(tr,er,rr){return er=_toPropertyKey$8(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$8(tr){var er=_toPrimitive$8(tr,"string");return _typeof$9(er)=="symbol"?er:er+""}function _toPrimitive$8(tr,er){if(_typeof$9(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$9(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var Line=function(tr){function er(){var rr;_classCallCheck$7(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$6(this,er,[].concat(ir)),_defineProperty$8(rr,"state",{isAnimationFinished:!0,totalLength:0}),_defineProperty$8(rr,"generateSimpleStrokeDasharray",function(ar,cr){return"".concat(cr,"px ").concat(ar-cr,"px")}),_defineProperty$8(rr,"getStrokeDasharray",function(ar,cr,lr){var or=lr.reduce(function(mr,yr){return mr+yr});if(!or)return rr.generateSimpleStrokeDasharray(cr,ar);for(var ur=Math.floor(ar/or),hr=ar%or,dr=cr-ar,fr=[],gr=0,br=0;gr<lr.length;br+=lr[gr],++gr)if(br+lr[gr]>hr){fr=[].concat(_toConsumableArray$2(lr.slice(0,gr)),[hr-br]);break}var pr=fr.length%2===0?[0,dr]:[dr];return[].concat(_toConsumableArray$2(er.repeat(lr,ur)),_toConsumableArray$2(fr),pr).map(function(mr){return"".concat(mr,"px")}).join(", ")}),_defineProperty$8(rr,"id",uniqueId("recharts-line-")),_defineProperty$8(rr,"pathRef",function(ar){rr.mainCurve=ar}),_defineProperty$8(rr,"handleAnimationEnd",function(){rr.setState({isAnimationFinished:!0}),rr.props.onAnimationEnd&&rr.props.onAnimationEnd()}),_defineProperty$8(rr,"handleAnimationStart",function(){rr.setState({isAnimationFinished:!1}),rr.props.onAnimationStart&&rr.props.onAnimationStart()}),rr}return _inherits$6(er,tr),_createClass$7(er,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var nr=this.getTotalLength();this.setState({totalLength:nr})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var nr=this.getTotalLength();nr!==this.state.totalLength&&this.setState({totalLength:nr})}}},{key:"getTotalLength",value:function(){var nr=this.mainCurve;try{return nr&&nr.getTotalLength&&nr.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(nr,ir){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var sr=this.props,ar=sr.points,cr=sr.xAxis,lr=sr.yAxis,or=sr.layout,ur=sr.children,hr=findAllByType(ur,ErrorBar);if(!hr)return null;var dr=function(br,pr){return{x:br.x,y:br.y,value:br.value,errorVal:getValueByDataKey(br.payload,pr)}},fr={clipPath:nr?"url(#clipPath-".concat(ir,")"):null};return React.createElement(Layer,fr,hr.map(function(gr){return React.cloneElement(gr,{key:"bar-".concat(gr.props.dataKey),data:ar,xAxis:cr,yAxis:lr,layout:or,dataPointFormatter:dr})}))}},{key:"renderDots",value:function(nr,ir,sr){var ar=this.props.isAnimationActive;if(ar&&!this.state.isAnimationFinished)return null;var cr=this.props,lr=cr.dot,or=cr.points,ur=cr.dataKey,hr=filterProps(this.props,!1),dr=filterProps(lr,!0),fr=or.map(function(br,pr){var mr=_objectSpread$4(_objectSpread$4(_objectSpread$4({key:"dot-".concat(pr),r:3},hr),dr),{},{index:pr,cx:br.x,cy:br.y,value:br.value,dataKey:ur,payload:br.payload,points:or});return er.renderDotItem(lr,mr)}),gr={clipPath:nr?"url(#clipPath-".concat(ir?"":"dots-").concat(sr,")"):null};return React.createElement(Layer,_extends$6({className:"recharts-line-dots",key:"dots"},gr),fr)}},{key:"renderCurveStatically",value:function(nr,ir,sr,ar){var cr=this.props,lr=cr.type,or=cr.layout,ur=cr.connectNulls;cr.ref;var hr=_objectWithoutProperties$3(cr,_excluded$3),dr=_objectSpread$4(_objectSpread$4(_objectSpread$4({},filterProps(hr,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:ir?"url(#clipPath-".concat(sr,")"):null,points:nr},ar),{},{type:lr,layout:or,connectNulls:ur});return React.createElement(Curve,_extends$6({},dr,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(nr,ir){var sr=this,ar=this.props,cr=ar.points,lr=ar.strokeDasharray,or=ar.isAnimationActive,ur=ar.animationBegin,hr=ar.animationDuration,dr=ar.animationEasing,fr=ar.animationId,gr=ar.animateNewValues,br=ar.width,pr=ar.height,mr=this.state,yr=mr.prevPoints,xr=mr.totalLength;return React.createElement(Animate,{begin:ur,duration:hr,isActive:or,easing:dr,from:{t:0},to:{t:1},key:"line-".concat(fr),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(vr){var _r=vr.t;if(yr){var Er=yr.length/cr.length,Tr=cr.map(function(Or,jr){var Lr=Math.floor(jr*Er);if(yr[Lr]){var Cr=yr[Lr],wr=interpolateNumber$2(Cr.x,Or.x),Pr=interpolateNumber$2(Cr.y,Or.y);return _objectSpread$4(_objectSpread$4({},Or),{},{x:wr(_r),y:Pr(_r)})}if(gr){var Ar=interpolateNumber$2(br*2,Or.x),Sr=interpolateNumber$2(pr/2,Or.y);return _objectSpread$4(_objectSpread$4({},Or),{},{x:Ar(_r),y:Sr(_r)})}return _objectSpread$4(_objectSpread$4({},Or),{},{x:Or.x,y:Or.y})});return sr.renderCurveStatically(Tr,nr,ir)}var Rr=interpolateNumber$2(0,xr),Nr=Rr(_r),Dr;if(lr){var Ir="".concat(lr).split(/[,\s]+/gim).map(function(Or){return parseFloat(Or)});Dr=sr.getStrokeDasharray(Nr,xr,Ir)}else Dr=sr.generateSimpleStrokeDasharray(xr,Nr);return sr.renderCurveStatically(cr,nr,ir,{strokeDasharray:Dr})})}},{key:"renderCurve",value:function(nr,ir){var sr=this.props,ar=sr.points,cr=sr.isAnimationActive,lr=this.state,or=lr.prevPoints,ur=lr.totalLength;return cr&&ar&&ar.length&&(!or&&ur>0||!isEqual$1(or,ar))?this.renderCurveWithAnimation(nr,ir):this.renderCurveStatically(ar,nr,ir)}},{key:"render",value:function(){var nr,ir=this.props,sr=ir.hide,ar=ir.dot,cr=ir.points,lr=ir.className,or=ir.xAxis,ur=ir.yAxis,hr=ir.top,dr=ir.left,fr=ir.width,gr=ir.height,br=ir.isAnimationActive,pr=ir.id;if(sr||!cr||!cr.length)return null;var mr=this.state.isAnimationFinished,yr=cr.length===1,xr=clsx("recharts-line",lr),vr=or&&or.allowDataOverflow,_r=ur&&ur.allowDataOverflow,Er=vr||_r,Tr=isNil$1(pr)?this.id:pr,Rr=(nr=filterProps(ar,!1))!==null&&nr!==void 0?nr:{r:3,strokeWidth:2},Nr=Rr.r,Dr=Nr===void 0?3:Nr,Ir=Rr.strokeWidth,Or=Ir===void 0?2:Ir,jr=hasClipDot(ar)?ar:{},Lr=jr.clipDot,Cr=Lr===void 0?!0:Lr,wr=Dr*2+Or;return React.createElement(Layer,{className:xr},vr||_r?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(Tr)},React.createElement("rect",{x:vr?dr:dr-fr/2,y:_r?hr:hr-gr/2,width:vr?fr:fr*2,height:_r?gr:gr*2})),!Cr&&React.createElement("clipPath",{id:"clipPath-dots-".concat(Tr)},React.createElement("rect",{x:dr-wr/2,y:hr-wr/2,width:fr+wr,height:gr+wr}))):null,!yr&&this.renderCurve(Er,Tr),this.renderErrorBar(Er,Tr),(yr||ar)&&this.renderDots(Er,Cr,Tr),(!br||mr)&&LabelList.renderCallByParent(this.props,cr))}}],[{key:"getDerivedStateFromProps",value:function(nr,ir){return nr.animationId!==ir.prevAnimationId?{prevAnimationId:nr.animationId,curPoints:nr.points,prevPoints:ir.curPoints}:nr.points!==ir.curPoints?{curPoints:nr.points}:null}},{key:"repeat",value:function(nr,ir){for(var sr=nr.length%2!==0?[].concat(_toConsumableArray$2(nr),[0]):nr,ar=[],cr=0;cr<ir;++cr)ar=[].concat(_toConsumableArray$2(ar),_toConsumableArray$2(sr));return ar}},{key:"renderDotItem",value:function(nr,ir){var sr;if(React.isValidElement(nr))sr=React.cloneElement(nr,ir);else if(isFunction$3(nr))sr=nr(ir);else{var ar=ir.key,cr=_objectWithoutProperties$3(ir,_excluded2$2),lr=clsx("recharts-line-dot",typeof nr!="boolean"?nr.className:"");sr=React.createElement(Dot,_extends$6({key:ar},cr,{className:lr}))}return sr}}])}(reactExports.PureComponent);_defineProperty$8(Line,"displayName","Line");_defineProperty$8(Line,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Global.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_defineProperty$8(Line,"getComposedData",function(tr){var er=tr.props,rr=tr.xAxis,nr=tr.yAxis,ir=tr.xAxisTicks,sr=tr.yAxisTicks,ar=tr.dataKey,cr=tr.bandSize,lr=tr.displayedData,or=tr.offset,ur=er.layout,hr=lr.map(function(dr,fr){var gr=getValueByDataKey(dr,ar);return ur==="horizontal"?{x:getCateCoordinateOfLine({axis:rr,ticks:ir,bandSize:cr,entry:dr,index:fr}),y:isNil$1(gr)?null:nr.scale(gr),value:gr,payload:dr}:{x:isNil$1(gr)?null:rr.scale(gr),y:getCateCoordinateOfLine({axis:nr,ticks:sr,bandSize:cr,entry:dr,index:fr}),value:gr,payload:dr}});return _objectSpread$4({points:hr,layout:ur},or)});var _excluded$2=["layout","type","stroke","connectNulls","isRange","ref"],_excluded2$1=["key"],_Area;function _typeof$8(tr){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$8(tr)}function _objectWithoutProperties$2(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$2(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$2(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$5.apply(this,arguments)}function ownKeys$3(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$3(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$3(Object(rr),!0).forEach(function(nr){_defineProperty$7(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$3(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$6(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$7(nr.key),nr)}}function _createClass$6(tr,er,rr){return er&&_defineProperties$6(tr.prototype,er),rr&&_defineProperties$6(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$5(tr,er,rr){return er=_getPrototypeOf$5(er),_possibleConstructorReturn$5(tr,_isNativeReflectConstruct$5()?Reflect.construct(er,rr||[],_getPrototypeOf$5(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$5(tr,er){if(er&&(_typeof$8(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(tr)}function _assertThisInitialized$5(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$5(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!tr})()}function _getPrototypeOf$5(tr){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$5(tr)}function _inherits$5(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$5(tr,er)}function _setPrototypeOf$5(tr,er){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$5(tr,er)}function _defineProperty$7(tr,er,rr){return er=_toPropertyKey$7(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$7(tr){var er=_toPrimitive$7(tr,"string");return _typeof$8(er)=="symbol"?er:er+""}function _toPrimitive$7(tr,er){if(_typeof$8(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$8(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var Area=function(tr){function er(){var rr;_classCallCheck$6(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$5(this,er,[].concat(ir)),_defineProperty$7(rr,"state",{isAnimationFinished:!0}),_defineProperty$7(rr,"id",uniqueId("recharts-area-")),_defineProperty$7(rr,"handleAnimationEnd",function(){var ar=rr.props.onAnimationEnd;rr.setState({isAnimationFinished:!0}),isFunction$3(ar)&&ar()}),_defineProperty$7(rr,"handleAnimationStart",function(){var ar=rr.props.onAnimationStart;rr.setState({isAnimationFinished:!1}),isFunction$3(ar)&&ar()}),rr}return _inherits$5(er,tr),_createClass$6(er,[{key:"renderDots",value:function(nr,ir,sr){var ar=this.props.isAnimationActive,cr=this.state.isAnimationFinished;if(ar&&!cr)return null;var lr=this.props,or=lr.dot,ur=lr.points,hr=lr.dataKey,dr=filterProps(this.props,!1),fr=filterProps(or,!0),gr=ur.map(function(pr,mr){var yr=_objectSpread$3(_objectSpread$3(_objectSpread$3({key:"dot-".concat(mr),r:3},dr),fr),{},{index:mr,cx:pr.x,cy:pr.y,dataKey:hr,value:pr.value,payload:pr.payload,points:ur});return er.renderDotItem(or,yr)}),br={clipPath:nr?"url(#clipPath-".concat(ir?"":"dots-").concat(sr,")"):null};return React.createElement(Layer,_extends$5({className:"recharts-area-dots"},br),gr)}},{key:"renderHorizontalRect",value:function(nr){var ir=this.props,sr=ir.baseLine,ar=ir.points,cr=ir.strokeWidth,lr=ar[0].x,or=ar[ar.length-1].x,ur=nr*Math.abs(lr-or),hr=max$2(ar.map(function(dr){return dr.y||0}));return isNumber(sr)&&typeof sr=="number"?hr=Math.max(sr,hr):sr&&Array.isArray(sr)&&sr.length&&(hr=Math.max(max$2(sr.map(function(dr){return dr.y||0})),hr)),isNumber(hr)?React.createElement("rect",{x:lr<or?lr:lr-ur,y:0,width:ur,height:Math.floor(hr+(cr?parseInt("".concat(cr),10):1))}):null}},{key:"renderVerticalRect",value:function(nr){var ir=this.props,sr=ir.baseLine,ar=ir.points,cr=ir.strokeWidth,lr=ar[0].y,or=ar[ar.length-1].y,ur=nr*Math.abs(lr-or),hr=max$2(ar.map(function(dr){return dr.x||0}));return isNumber(sr)&&typeof sr=="number"?hr=Math.max(sr,hr):sr&&Array.isArray(sr)&&sr.length&&(hr=Math.max(max$2(sr.map(function(dr){return dr.x||0})),hr)),isNumber(hr)?React.createElement("rect",{x:0,y:lr<or?lr:lr-ur,width:hr+(cr?parseInt("".concat(cr),10):1),height:Math.floor(ur)}):null}},{key:"renderClipRect",value:function(nr){var ir=this.props.layout;return ir==="vertical"?this.renderVerticalRect(nr):this.renderHorizontalRect(nr)}},{key:"renderAreaStatically",value:function(nr,ir,sr,ar){var cr=this.props,lr=cr.layout,or=cr.type,ur=cr.stroke,hr=cr.connectNulls,dr=cr.isRange;cr.ref;var fr=_objectWithoutProperties$2(cr,_excluded$2);return React.createElement(Layer,{clipPath:sr?"url(#clipPath-".concat(ar,")"):null},React.createElement(Curve,_extends$5({},filterProps(fr,!0),{points:nr,connectNulls:hr,type:or,baseLine:ir,layout:lr,stroke:"none",className:"recharts-area-area"})),ur!=="none"&&React.createElement(Curve,_extends$5({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:lr,type:or,connectNulls:hr,fill:"none",points:nr})),ur!=="none"&&dr&&React.createElement(Curve,_extends$5({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:lr,type:or,connectNulls:hr,fill:"none",points:ir})))}},{key:"renderAreaWithAnimation",value:function(nr,ir){var sr=this,ar=this.props,cr=ar.points,lr=ar.baseLine,or=ar.isAnimationActive,ur=ar.animationBegin,hr=ar.animationDuration,dr=ar.animationEasing,fr=ar.animationId,gr=this.state,br=gr.prevPoints,pr=gr.prevBaseLine;return React.createElement(Animate,{begin:ur,duration:hr,isActive:or,easing:dr,from:{t:0},to:{t:1},key:"area-".concat(fr),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(mr){var yr=mr.t;if(br){var xr=br.length/cr.length,vr=cr.map(function(Rr,Nr){var Dr=Math.floor(Nr*xr);if(br[Dr]){var Ir=br[Dr],Or=interpolateNumber$2(Ir.x,Rr.x),jr=interpolateNumber$2(Ir.y,Rr.y);return _objectSpread$3(_objectSpread$3({},Rr),{},{x:Or(yr),y:jr(yr)})}return Rr}),_r;if(isNumber(lr)&&typeof lr=="number"){var Er=interpolateNumber$2(pr,lr);_r=Er(yr)}else if(isNil$1(lr)||isNan(lr)){var Tr=interpolateNumber$2(pr,0);_r=Tr(yr)}else _r=lr.map(function(Rr,Nr){var Dr=Math.floor(Nr*xr);if(pr[Dr]){var Ir=pr[Dr],Or=interpolateNumber$2(Ir.x,Rr.x),jr=interpolateNumber$2(Ir.y,Rr.y);return _objectSpread$3(_objectSpread$3({},Rr),{},{x:Or(yr),y:jr(yr)})}return Rr});return sr.renderAreaStatically(vr,_r,nr,ir)}return React.createElement(Layer,null,React.createElement("defs",null,React.createElement("clipPath",{id:"animationClipPath-".concat(ir)},sr.renderClipRect(yr))),React.createElement(Layer,{clipPath:"url(#animationClipPath-".concat(ir,")")},sr.renderAreaStatically(cr,lr,nr,ir)))})}},{key:"renderArea",value:function(nr,ir){var sr=this.props,ar=sr.points,cr=sr.baseLine,lr=sr.isAnimationActive,or=this.state,ur=or.prevPoints,hr=or.prevBaseLine,dr=or.totalLength;return lr&&ar&&ar.length&&(!ur&&dr>0||!isEqual$1(ur,ar)||!isEqual$1(hr,cr))?this.renderAreaWithAnimation(nr,ir):this.renderAreaStatically(ar,cr,nr,ir)}},{key:"render",value:function(){var nr,ir=this.props,sr=ir.hide,ar=ir.dot,cr=ir.points,lr=ir.className,or=ir.top,ur=ir.left,hr=ir.xAxis,dr=ir.yAxis,fr=ir.width,gr=ir.height,br=ir.isAnimationActive,pr=ir.id;if(sr||!cr||!cr.length)return null;var mr=this.state.isAnimationFinished,yr=cr.length===1,xr=clsx("recharts-area",lr),vr=hr&&hr.allowDataOverflow,_r=dr&&dr.allowDataOverflow,Er=vr||_r,Tr=isNil$1(pr)?this.id:pr,Rr=(nr=filterProps(ar,!1))!==null&&nr!==void 0?nr:{r:3,strokeWidth:2},Nr=Rr.r,Dr=Nr===void 0?3:Nr,Ir=Rr.strokeWidth,Or=Ir===void 0?2:Ir,jr=hasClipDot(ar)?ar:{},Lr=jr.clipDot,Cr=Lr===void 0?!0:Lr,wr=Dr*2+Or;return React.createElement(Layer,{className:xr},vr||_r?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(Tr)},React.createElement("rect",{x:vr?ur:ur-fr/2,y:_r?or:or-gr/2,width:vr?fr:fr*2,height:_r?gr:gr*2})),!Cr&&React.createElement("clipPath",{id:"clipPath-dots-".concat(Tr)},React.createElement("rect",{x:ur-wr/2,y:or-wr/2,width:fr+wr,height:gr+wr}))):null,yr?null:this.renderArea(Er,Tr),(ar||yr)&&this.renderDots(Er,Cr,Tr),(!br||mr)&&LabelList.renderCallByParent(this.props,cr))}}],[{key:"getDerivedStateFromProps",value:function(nr,ir){return nr.animationId!==ir.prevAnimationId?{prevAnimationId:nr.animationId,curPoints:nr.points,curBaseLine:nr.baseLine,prevPoints:ir.curPoints,prevBaseLine:ir.curBaseLine}:nr.points!==ir.curPoints||nr.baseLine!==ir.curBaseLine?{curPoints:nr.points,curBaseLine:nr.baseLine}:null}}])}(reactExports.PureComponent);_Area=Area;_defineProperty$7(Area,"displayName","Area");_defineProperty$7(Area,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_defineProperty$7(Area,"getBaseValue",function(tr,er,rr,nr){var ir=tr.layout,sr=tr.baseValue,ar=er.props.baseValue,cr=ar??sr;if(isNumber(cr)&&typeof cr=="number")return cr;var lr=ir==="horizontal"?nr:rr,or=lr.scale.domain();if(lr.type==="number"){var ur=Math.max(or[0],or[1]),hr=Math.min(or[0],or[1]);return cr==="dataMin"?hr:cr==="dataMax"||ur<0?ur:Math.max(Math.min(or[0],or[1]),0)}return cr==="dataMin"?or[0]:cr==="dataMax"?or[1]:or[0]});_defineProperty$7(Area,"getComposedData",function(tr){var er=tr.props,rr=tr.item,nr=tr.xAxis,ir=tr.yAxis,sr=tr.xAxisTicks,ar=tr.yAxisTicks,cr=tr.bandSize,lr=tr.dataKey,or=tr.stackedData,ur=tr.dataStartIndex,hr=tr.displayedData,dr=tr.offset,fr=er.layout,gr=or&&or.length,br=_Area.getBaseValue(er,rr,nr,ir),pr=fr==="horizontal",mr=!1,yr=hr.map(function(vr,_r){var Er;gr?Er=or[ur+_r]:(Er=getValueByDataKey(vr,lr),Array.isArray(Er)?mr=!0:Er=[br,Er]);var Tr=Er[1]==null||gr&&getValueByDataKey(vr,lr)==null;return pr?{x:getCateCoordinateOfLine({axis:nr,ticks:sr,bandSize:cr,entry:vr,index:_r}),y:Tr?null:ir.scale(Er[1]),value:Er,payload:vr}:{x:Tr?null:nr.scale(Er[1]),y:getCateCoordinateOfLine({axis:ir,ticks:ar,bandSize:cr,entry:vr,index:_r}),value:Er,payload:vr}}),xr;return gr||mr?xr=yr.map(function(vr){var _r=Array.isArray(vr.value)?vr.value[0]:null;return pr?{x:vr.x,y:_r!=null&&vr.y!=null?ir.scale(_r):null}:{x:_r!=null?nr.scale(_r):null,y:vr.y}}):xr=pr?ir.scale(br):nr.scale(br),_objectSpread$3({points:yr,baseLine:xr,layout:fr,isRange:mr},dr)});_defineProperty$7(Area,"renderDotItem",function(tr,er){var rr;if(React.isValidElement(tr))rr=React.cloneElement(tr,er);else if(isFunction$3(tr))rr=tr(er);else{var nr=clsx("recharts-area-dot",typeof tr!="boolean"?tr.className:""),ir=er.key,sr=_objectWithoutProperties$2(er,_excluded2$1);rr=React.createElement(Dot,_extends$5({},sr,{key:ir,className:nr}))}return rr});function _typeof$7(tr){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$7(tr)}function _classCallCheck$5(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$6(nr.key),nr)}}function _createClass$5(tr,er,rr){return er&&_defineProperties$5(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$4(tr,er,rr){return er=_getPrototypeOf$4(er),_possibleConstructorReturn$4(tr,_isNativeReflectConstruct$4()?Reflect.construct(er,rr||[],_getPrototypeOf$4(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$4(tr,er){if(er&&(_typeof$7(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(tr)}function _assertThisInitialized$4(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$4(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!tr})()}function _getPrototypeOf$4(tr){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$4(tr)}function _inherits$4(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$4(tr,er)}function _setPrototypeOf$4(tr,er){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$4(tr,er)}function _defineProperty$6(tr,er,rr){return er=_toPropertyKey$6(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$6(tr){var er=_toPrimitive$6(tr,"string");return _typeof$7(er)=="symbol"?er:er+""}function _toPrimitive$6(tr,er){if(_typeof$7(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$7(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var ZAxis=function(tr){function er(){return _classCallCheck$5(this,er),_callSuper$4(this,er,arguments)}return _inherits$4(er,tr),_createClass$5(er,[{key:"render",value:function(){return null}}])}(reactExports.Component);_defineProperty$6(ZAxis,"displayName","ZAxis");_defineProperty$6(ZAxis,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var _excluded$1=["option","isActive"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$4.apply(this,arguments)}function _objectWithoutProperties$1(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose$1(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose$1(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function ScatterSymbol(tr){var er=tr.option,rr=tr.isActive,nr=_objectWithoutProperties$1(tr,_excluded$1);return typeof er=="string"?reactExports.createElement(Shape,_extends$4({option:reactExports.createElement(Symbols,_extends$4({type:er},nr)),isActive:rr,shapeType:"symbols"},nr)):reactExports.createElement(Shape,_extends$4({option:er,isActive:rr,shapeType:"symbols"},nr))}function _typeof$6(tr){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$6(tr)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$3.apply(this,arguments)}function ownKeys$2(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$2(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$2(Object(rr),!0).forEach(function(nr){_defineProperty$5(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$2(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _classCallCheck$4(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$5(nr.key),nr)}}function _createClass$4(tr,er,rr){return er&&_defineProperties$4(tr.prototype,er),rr&&_defineProperties$4(tr,rr),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$3(tr,er,rr){return er=_getPrototypeOf$3(er),_possibleConstructorReturn$3(tr,_isNativeReflectConstruct$3()?Reflect.construct(er,rr||[],_getPrototypeOf$3(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$3(tr,er){if(er&&(_typeof$6(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(tr)}function _assertThisInitialized$3(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$3(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!tr})()}function _getPrototypeOf$3(tr){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$3(tr)}function _inherits$3(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$3(tr,er)}function _setPrototypeOf$3(tr,er){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$3(tr,er)}function _defineProperty$5(tr,er,rr){return er=_toPropertyKey$5(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$5(tr){var er=_toPrimitive$5(tr,"string");return _typeof$6(er)=="symbol"?er:er+""}function _toPrimitive$5(tr,er){if(_typeof$6(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$6(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var Scatter=function(tr){function er(){var rr;_classCallCheck$4(this,er);for(var nr=arguments.length,ir=new Array(nr),sr=0;sr<nr;sr++)ir[sr]=arguments[sr];return rr=_callSuper$3(this,er,[].concat(ir)),_defineProperty$5(rr,"state",{isAnimationFinished:!1}),_defineProperty$5(rr,"handleAnimationEnd",function(){rr.setState({isAnimationFinished:!0})}),_defineProperty$5(rr,"handleAnimationStart",function(){rr.setState({isAnimationFinished:!1})}),_defineProperty$5(rr,"id",uniqueId("recharts-scatter-")),rr}return _inherits$3(er,tr),_createClass$4(er,[{key:"renderSymbolsStatically",value:function(nr){var ir=this,sr=this.props,ar=sr.shape,cr=sr.activeShape,lr=sr.activeIndex,or=filterProps(this.props,!1);return nr.map(function(ur,hr){var dr=lr===hr,fr=dr?cr:ar,gr=_objectSpread$2(_objectSpread$2({},or),ur);return React.createElement(Layer,_extends$3({className:"recharts-scatter-symbol",key:"symbol-".concat(ur==null?void 0:ur.cx,"-").concat(ur==null?void 0:ur.cy,"-").concat(ur==null?void 0:ur.size,"-").concat(hr)},adaptEventsOfChild(ir.props,ur,hr),{role:"img"}),React.createElement(ScatterSymbol,_extends$3({option:fr,isActive:dr,key:"symbol-".concat(hr)},gr)))})}},{key:"renderSymbolsWithAnimation",value:function(){var nr=this,ir=this.props,sr=ir.points,ar=ir.isAnimationActive,cr=ir.animationBegin,lr=ir.animationDuration,or=ir.animationEasing,ur=ir.animationId,hr=this.state.prevPoints;return React.createElement(Animate,{begin:cr,duration:lr,isActive:ar,easing:or,from:{t:0},to:{t:1},key:"pie-".concat(ur),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(dr){var fr=dr.t,gr=sr.map(function(br,pr){var mr=hr&&hr[pr];if(mr){var yr=interpolateNumber$2(mr.cx,br.cx),xr=interpolateNumber$2(mr.cy,br.cy),vr=interpolateNumber$2(mr.size,br.size);return _objectSpread$2(_objectSpread$2({},br),{},{cx:yr(fr),cy:xr(fr),size:vr(fr)})}var _r=interpolateNumber$2(0,br.size);return _objectSpread$2(_objectSpread$2({},br),{},{size:_r(fr)})});return React.createElement(Layer,null,nr.renderSymbolsStatically(gr))})}},{key:"renderSymbols",value:function(){var nr=this.props,ir=nr.points,sr=nr.isAnimationActive,ar=this.state.prevPoints;return sr&&ir&&ir.length&&(!ar||!isEqual$1(ar,ir))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(ir)}},{key:"renderErrorBar",value:function(){var nr=this.props.isAnimationActive;if(nr&&!this.state.isAnimationFinished)return null;var ir=this.props,sr=ir.points,ar=ir.xAxis,cr=ir.yAxis,lr=ir.children,or=findAllByType(lr,ErrorBar);return or?or.map(function(ur,hr){var dr=ur.props,fr=dr.direction,gr=dr.dataKey;return React.cloneElement(ur,{key:"".concat(fr,"-").concat(gr,"-").concat(sr[hr]),data:sr,xAxis:ar,yAxis:cr,layout:fr==="x"?"vertical":"horizontal",dataPointFormatter:function(pr,mr){return{x:pr.cx,y:pr.cy,value:fr==="x"?+pr.node.x:+pr.node.y,errorVal:getValueByDataKey(pr,mr)}}})}):null}},{key:"renderLine",value:function(){var nr=this.props,ir=nr.points,sr=nr.line,ar=nr.lineType,cr=nr.lineJointType,lr=filterProps(this.props,!1),or=filterProps(sr,!1),ur,hr;if(ar==="joint")ur=ir.map(function(xr){return{x:xr.cx,y:xr.cy}});else if(ar==="fitting"){var dr=getLinearRegression(ir),fr=dr.xmin,gr=dr.xmax,br=dr.a,pr=dr.b,mr=function(vr){return br*vr+pr};ur=[{x:fr,y:mr(fr)},{x:gr,y:mr(gr)}]}var yr=_objectSpread$2(_objectSpread$2(_objectSpread$2({},lr),{},{fill:"none",stroke:lr&&lr.fill},or),{},{points:ur});return React.isValidElement(sr)?hr=React.cloneElement(sr,yr):isFunction$3(sr)?hr=sr(yr):hr=React.createElement(Curve,_extends$3({},yr,{type:cr})),React.createElement(Layer,{className:"recharts-scatter-line",key:"recharts-scatter-line"},hr)}},{key:"render",value:function(){var nr=this.props,ir=nr.hide,sr=nr.points,ar=nr.line,cr=nr.className,lr=nr.xAxis,or=nr.yAxis,ur=nr.left,hr=nr.top,dr=nr.width,fr=nr.height,gr=nr.id,br=nr.isAnimationActive;if(ir||!sr||!sr.length)return null;var pr=this.state.isAnimationFinished,mr=clsx("recharts-scatter",cr),yr=lr&&lr.allowDataOverflow,xr=or&&or.allowDataOverflow,vr=yr||xr,_r=isNil$1(gr)?this.id:gr;return React.createElement(Layer,{className:mr,clipPath:vr?"url(#clipPath-".concat(_r,")"):null},yr||xr?React.createElement("defs",null,React.createElement("clipPath",{id:"clipPath-".concat(_r)},React.createElement("rect",{x:yr?ur:ur-dr/2,y:xr?hr:hr-fr/2,width:yr?dr:dr*2,height:xr?fr:fr*2}))):null,ar&&this.renderLine(),this.renderErrorBar(),React.createElement(Layer,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!br||pr)&&LabelList.renderCallByParent(this.props,sr))}}],[{key:"getDerivedStateFromProps",value:function(nr,ir){return nr.animationId!==ir.prevAnimationId?{prevAnimationId:nr.animationId,curPoints:nr.points,prevPoints:ir.curPoints}:nr.points!==ir.curPoints?{curPoints:nr.points}:null}}])}(reactExports.PureComponent);_defineProperty$5(Scatter,"displayName","Scatter");_defineProperty$5(Scatter,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});_defineProperty$5(Scatter,"getComposedData",function(tr){var er=tr.xAxis,rr=tr.yAxis,nr=tr.zAxis,ir=tr.item,sr=tr.displayedData,ar=tr.xAxisTicks,cr=tr.yAxisTicks,lr=tr.offset,or=ir.props.tooltipType,ur=findAllByType(ir.props.children,Cell),hr=isNil$1(er.dataKey)?ir.props.dataKey:er.dataKey,dr=isNil$1(rr.dataKey)?ir.props.dataKey:rr.dataKey,fr=nr&&nr.dataKey,gr=nr?nr.range:ZAxis.defaultProps.range,br=gr&&gr[0],pr=er.scale.bandwidth?er.scale.bandwidth():0,mr=rr.scale.bandwidth?rr.scale.bandwidth():0,yr=sr.map(function(xr,vr){var _r=getValueByDataKey(xr,hr),Er=getValueByDataKey(xr,dr),Tr=!isNil$1(fr)&&getValueByDataKey(xr,fr)||"-",Rr=[{name:isNil$1(er.dataKey)?ir.props.name:er.name||er.dataKey,unit:er.unit||"",value:_r,payload:xr,dataKey:hr,type:or},{name:isNil$1(rr.dataKey)?ir.props.name:rr.name||rr.dataKey,unit:rr.unit||"",value:Er,payload:xr,dataKey:dr,type:or}];Tr!=="-"&&Rr.push({name:nr.name||nr.dataKey,unit:nr.unit||"",value:Tr,payload:xr,dataKey:fr,type:or});var Nr=getCateCoordinateOfLine({axis:er,ticks:ar,bandSize:pr,entry:xr,index:vr,dataKey:hr}),Dr=getCateCoordinateOfLine({axis:rr,ticks:cr,bandSize:mr,entry:xr,index:vr,dataKey:dr}),Ir=Tr!=="-"?nr.scale(Tr):br,Or=Math.sqrt(Math.max(Ir,0)/Math.PI);return _objectSpread$2(_objectSpread$2({},xr),{},{cx:Nr,cy:Dr,x:Nr-Or,y:Dr-Or,xAxis:er,yAxis:rr,zAxis:nr,width:2*Or,height:2*Or,size:Ir,node:{x:_r,y:Er,z:Tr},tooltipPayload:Rr,tooltipPosition:{x:Nr,y:Dr},payload:xr},ur&&ur[vr]&&ur[vr].props)});return _objectSpread$2({points:yr},lr)});function _typeof$5(tr){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$5(tr)}function _classCallCheck$3(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$4(nr.key),nr)}}function _createClass$3(tr,er,rr){return er&&_defineProperties$3(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$2(tr,er,rr){return er=_getPrototypeOf$2(er),_possibleConstructorReturn$2(tr,_isNativeReflectConstruct$2()?Reflect.construct(er,rr||[],_getPrototypeOf$2(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$2(tr,er){if(er&&(_typeof$5(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(tr)}function _assertThisInitialized$2(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$2(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!tr})()}function _getPrototypeOf$2(tr){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$2(tr)}function _inherits$2(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$2(tr,er)}function _setPrototypeOf$2(tr,er){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$2(tr,er)}function _defineProperty$4(tr,er,rr){return er=_toPropertyKey$4(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$4(tr){var er=_toPrimitive$4(tr,"string");return _typeof$5(er)=="symbol"?er:er+""}function _toPrimitive$4(tr,er){if(_typeof$5(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$5(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$2.apply(this,arguments)}function XAxisImpl(tr){var er=tr.xAxisId,rr=useChartWidth(),nr=useChartHeight(),ir=useXAxisOrThrow(er);return ir==null?null:reactExports.createElement(CartesianAxis,_extends$2({},ir,{className:clsx("recharts-".concat(ir.axisType," ").concat(ir.axisType),ir.className),viewBox:{x:0,y:0,width:rr,height:nr},ticksGenerator:function(ar){return getTicksOfAxis(ar,!0)}}))}var XAxis=function(tr){function er(){return _classCallCheck$3(this,er),_callSuper$2(this,er,arguments)}return _inherits$2(er,tr),_createClass$3(er,[{key:"render",value:function(){return reactExports.createElement(XAxisImpl,this.props)}}])}(reactExports.Component);_defineProperty$4(XAxis,"displayName","XAxis");_defineProperty$4(XAxis,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _typeof$4(tr){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$4(tr)}function _classCallCheck$2(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$3(nr.key),nr)}}function _createClass$2(tr,er,rr){return er&&_defineProperties$2(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper$1(tr,er,rr){return er=_getPrototypeOf$1(er),_possibleConstructorReturn$1(tr,_isNativeReflectConstruct$1()?Reflect.construct(er,rr||[],_getPrototypeOf$1(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn$1(tr,er){if(er&&(_typeof$4(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(tr)}function _assertThisInitialized$1(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct$1(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!tr})()}function _getPrototypeOf$1(tr){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf$1(tr)}function _inherits$1(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf$1(tr,er)}function _setPrototypeOf$1(tr,er){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf$1(tr,er)}function _defineProperty$3(tr,er,rr){return er=_toPropertyKey$3(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$3(tr){var er=_toPrimitive$3(tr,"string");return _typeof$4(er)=="symbol"?er:er+""}function _toPrimitive$3(tr,er){if(_typeof$4(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$4(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends$1.apply(this,arguments)}var YAxisImpl=function tr(er){var rr=er.yAxisId,nr=useChartWidth(),ir=useChartHeight(),sr=useYAxisOrThrow(rr);return sr==null?null:reactExports.createElement(CartesianAxis,_extends$1({},sr,{className:clsx("recharts-".concat(sr.axisType," ").concat(sr.axisType),sr.className),viewBox:{x:0,y:0,width:nr,height:ir},ticksGenerator:function(cr){return getTicksOfAxis(cr,!0)}}))},YAxis=function(tr){function er(){return _classCallCheck$2(this,er),_callSuper$1(this,er,arguments)}return _inherits$1(er,tr),_createClass$2(er,[{key:"render",value:function(){return reactExports.createElement(YAxisImpl,this.props)}}])}(reactExports.Component);_defineProperty$3(YAxis,"displayName","YAxis");_defineProperty$3(YAxis,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function _toConsumableArray$1(tr){return _arrayWithoutHoles$1(tr)||_iterableToArray$1(tr)||_unsupportedIterableToArray$1(tr)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray$1(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray$1(tr,er)}}function _iterableToArray$1(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles$1(tr){if(Array.isArray(tr))return _arrayLikeToArray$1(tr)}function _arrayLikeToArray$1(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}var detectReferenceElementsDomain=function tr(er,rr,nr,ir,sr){var ar=findAllByType(er,ReferenceLine),cr=findAllByType(er,ReferenceDot),lr=[].concat(_toConsumableArray$1(ar),_toConsumableArray$1(cr)),or=findAllByType(er,ReferenceArea),ur="".concat(ir,"Id"),hr=ir[0],dr=rr;if(lr.length&&(dr=lr.reduce(function(br,pr){if(pr.props[ur]===nr&&ifOverflowMatches(pr.props,"extendDomain")&&isNumber(pr.props[hr])){var mr=pr.props[hr];return[Math.min(br[0],mr),Math.max(br[1],mr)]}return br},dr)),or.length){var fr="".concat(hr,"1"),gr="".concat(hr,"2");dr=or.reduce(function(br,pr){if(pr.props[ur]===nr&&ifOverflowMatches(pr.props,"extendDomain")&&isNumber(pr.props[fr])&&isNumber(pr.props[gr])){var mr=pr.props[fr],yr=pr.props[gr];return[Math.min(br[0],mr,yr),Math.max(br[1],mr,yr)]}return br},dr)}return sr&&sr.length&&(dr=sr.reduce(function(br,pr){return isNumber(pr)?[Math.min(br[0],pr),Math.max(br[1],pr)]:br},dr)),dr},eventemitter3={exports:{}};(function(tr){var er=Object.prototype.hasOwnProperty,rr="~";function nr(){}Object.create&&(nr.prototype=Object.create(null),new nr().__proto__||(rr=!1));function ir(lr,or,ur){this.fn=lr,this.context=or,this.once=ur||!1}function sr(lr,or,ur,hr,dr){if(typeof ur!="function")throw new TypeError("The listener must be a function");var fr=new ir(ur,hr||lr,dr),gr=rr?rr+or:or;return lr._events[gr]?lr._events[gr].fn?lr._events[gr]=[lr._events[gr],fr]:lr._events[gr].push(fr):(lr._events[gr]=fr,lr._eventsCount++),lr}function ar(lr,or){--lr._eventsCount===0?lr._events=new nr:delete lr._events[or]}function cr(){this._events=new nr,this._eventsCount=0}cr.prototype.eventNames=function(){var or=[],ur,hr;if(this._eventsCount===0)return or;for(hr in ur=this._events)er.call(ur,hr)&&or.push(rr?hr.slice(1):hr);return Object.getOwnPropertySymbols?or.concat(Object.getOwnPropertySymbols(ur)):or},cr.prototype.listeners=function(or){var ur=rr?rr+or:or,hr=this._events[ur];if(!hr)return[];if(hr.fn)return[hr.fn];for(var dr=0,fr=hr.length,gr=new Array(fr);dr<fr;dr++)gr[dr]=hr[dr].fn;return gr},cr.prototype.listenerCount=function(or){var ur=rr?rr+or:or,hr=this._events[ur];return hr?hr.fn?1:hr.length:0},cr.prototype.emit=function(or,ur,hr,dr,fr,gr){var br=rr?rr+or:or;if(!this._events[br])return!1;var pr=this._events[br],mr=arguments.length,yr,xr;if(pr.fn){switch(pr.once&&this.removeListener(or,pr.fn,void 0,!0),mr){case 1:return pr.fn.call(pr.context),!0;case 2:return pr.fn.call(pr.context,ur),!0;case 3:return pr.fn.call(pr.context,ur,hr),!0;case 4:return pr.fn.call(pr.context,ur,hr,dr),!0;case 5:return pr.fn.call(pr.context,ur,hr,dr,fr),!0;case 6:return pr.fn.call(pr.context,ur,hr,dr,fr,gr),!0}for(xr=1,yr=new Array(mr-1);xr<mr;xr++)yr[xr-1]=arguments[xr];pr.fn.apply(pr.context,yr)}else{var vr=pr.length,_r;for(xr=0;xr<vr;xr++)switch(pr[xr].once&&this.removeListener(or,pr[xr].fn,void 0,!0),mr){case 1:pr[xr].fn.call(pr[xr].context);break;case 2:pr[xr].fn.call(pr[xr].context,ur);break;case 3:pr[xr].fn.call(pr[xr].context,ur,hr);break;case 4:pr[xr].fn.call(pr[xr].context,ur,hr,dr);break;default:if(!yr)for(_r=1,yr=new Array(mr-1);_r<mr;_r++)yr[_r-1]=arguments[_r];pr[xr].fn.apply(pr[xr].context,yr)}}return!0},cr.prototype.on=function(or,ur,hr){return sr(this,or,ur,hr,!1)},cr.prototype.once=function(or,ur,hr){return sr(this,or,ur,hr,!0)},cr.prototype.removeListener=function(or,ur,hr,dr){var fr=rr?rr+or:or;if(!this._events[fr])return this;if(!ur)return ar(this,fr),this;var gr=this._events[fr];if(gr.fn)gr.fn===ur&&(!dr||gr.once)&&(!hr||gr.context===hr)&&ar(this,fr);else{for(var br=0,pr=[],mr=gr.length;br<mr;br++)(gr[br].fn!==ur||dr&&!gr[br].once||hr&&gr[br].context!==hr)&&pr.push(gr[br]);pr.length?this._events[fr]=pr.length===1?pr[0]:pr:ar(this,fr)}return this},cr.prototype.removeAllListeners=function(or){var ur;return or?(ur=rr?rr+or:or,this._events[ur]&&ar(this,ur)):(this._events=new nr,this._eventsCount=0),this},cr.prototype.off=cr.prototype.removeListener,cr.prototype.addListener=cr.prototype.on,cr.prefixed=rr,cr.EventEmitter=cr,tr.exports=cr})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$3(tr){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$3(tr)}function _classCallCheck$1(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey$2(nr.key),nr)}}function _createClass$1(tr,er,rr){return er&&_defineProperties$1(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _defineProperty$2(tr,er,rr){return er=_toPropertyKey$2(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$2(tr){var er=_toPrimitive$2(tr,"string");return _typeof$3(er)=="symbol"?er:er+""}function _toPrimitive$2(tr,er){if(_typeof$3(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$3(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(tr)}var AccessibilityManager=function(){function tr(){_classCallCheck$1(this,tr),_defineProperty$2(this,"activeIndex",0),_defineProperty$2(this,"coordinateList",[]),_defineProperty$2(this,"layout","horizontal")}return _createClass$1(tr,[{key:"setDetails",value:function(rr){var nr,ir=rr.coordinateList,sr=ir===void 0?null:ir,ar=rr.container,cr=ar===void 0?null:ar,lr=rr.layout,or=lr===void 0?null:lr,ur=rr.offset,hr=ur===void 0?null:ur,dr=rr.mouseHandlerCallback,fr=dr===void 0?null:dr;this.coordinateList=(nr=sr??this.coordinateList)!==null&&nr!==void 0?nr:[],this.container=cr??this.container,this.layout=or??this.layout,this.offset=hr??this.offset,this.mouseHandlerCallback=fr??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(rr){if(this.coordinateList.length!==0)switch(rr.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(rr){this.activeIndex=rr}},{key:"spoofMouse",value:function(){var rr,nr;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var ir=this.container.getBoundingClientRect(),sr=ir.x,ar=ir.y,cr=ir.height,lr=this.coordinateList[this.activeIndex].coordinate,or=((rr=window)===null||rr===void 0?void 0:rr.scrollX)||0,ur=((nr=window)===null||nr===void 0?void 0:nr.scrollY)||0,hr=sr+lr+or,dr=ar+this.offset.top+cr/2+ur;this.mouseHandlerCallback({pageX:hr,pageY:dr})}}}])}();function isDomainSpecifiedByUser(tr,er,rr){if(rr==="number"&&er===!0&&Array.isArray(tr)){var nr=tr==null?void 0:tr[0],ir=tr==null?void 0:tr[1];if(nr&&ir&&isNumber(nr)&&isNumber(ir))return!0}return!1}function getCursorRectangle(tr,er,rr,nr){var ir=nr/2;return{stroke:"none",fill:"#ccc",x:tr==="horizontal"?er.x-ir:rr.left+.5,y:tr==="horizontal"?rr.top+.5:er.y-ir,width:tr==="horizontal"?nr:rr.width-1,height:tr==="horizontal"?rr.height-1:nr}}function getRadialCursorPoints(tr){var er=tr.cx,rr=tr.cy,nr=tr.radius,ir=tr.startAngle,sr=tr.endAngle,ar=polarToCartesian(er,rr,nr,ir),cr=polarToCartesian(er,rr,nr,sr);return{points:[ar,cr],cx:er,cy:rr,radius:nr,startAngle:ir,endAngle:sr}}function getCursorPoints(tr,er,rr){var nr,ir,sr,ar;if(tr==="horizontal")nr=er.x,sr=nr,ir=rr.top,ar=rr.top+rr.height;else if(tr==="vertical")ir=er.y,ar=ir,nr=rr.left,sr=rr.left+rr.width;else if(er.cx!=null&&er.cy!=null)if(tr==="centric"){var cr=er.cx,lr=er.cy,or=er.innerRadius,ur=er.outerRadius,hr=er.angle,dr=polarToCartesian(cr,lr,or,hr),fr=polarToCartesian(cr,lr,ur,hr);nr=dr.x,ir=dr.y,sr=fr.x,ar=fr.y}else return getRadialCursorPoints(er);return[{x:nr,y:ir},{x:sr,y:ar}]}function _typeof$2(tr){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$2(tr)}function ownKeys$1(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread$1(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys$1(Object(rr),!0).forEach(function(nr){_defineProperty$1(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys$1(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty$1(tr,er,rr){return er=_toPropertyKey$1(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey$1(tr){var er=_toPrimitive$1(tr,"string");return _typeof$2(er)=="symbol"?er:er+""}function _toPrimitive$1(tr,er){if(_typeof$2(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$2(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}function Cursor(tr){var er,rr,nr=tr.element,ir=tr.tooltipEventType,sr=tr.isActive,ar=tr.activeCoordinate,cr=tr.activePayload,lr=tr.offset,or=tr.activeTooltipIndex,ur=tr.tooltipAxisBandSize,hr=tr.layout,dr=tr.chartName,fr=(er=nr.props.cursor)!==null&&er!==void 0?er:(rr=nr.type.defaultProps)===null||rr===void 0?void 0:rr.cursor;if(!nr||!fr||!sr||!ar||dr!=="ScatterChart"&&ir!=="axis")return null;var gr,br=Curve;if(dr==="ScatterChart")gr=ar,br=Cross;else if(dr==="BarChart")gr=getCursorRectangle(hr,ar,lr,ur),br=Rectangle;else if(hr==="radial"){var pr=getRadialCursorPoints(ar),mr=pr.cx,yr=pr.cy,xr=pr.radius,vr=pr.startAngle,_r=pr.endAngle;gr={cx:mr,cy:yr,startAngle:vr,endAngle:_r,innerRadius:xr,outerRadius:xr},br=Sector}else gr={points:getCursorPoints(hr,ar,lr)},br=Curve;var Er=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},lr),gr),filterProps(fr,!1)),{},{payload:cr,payloadIndex:or,className:clsx("recharts-tooltip-cursor",fr.className)});return reactExports.isValidElement(fr)?reactExports.cloneElement(fr,Er):reactExports.createElement(br,Er)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof$1(tr){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof$1(tr)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er];for(var nr in rr)Object.prototype.hasOwnProperty.call(rr,nr)&&(tr[nr]=rr[nr])}return tr},_extends.apply(this,arguments)}function _slicedToArray(tr,er){return _arrayWithHoles(tr)||_iterableToArrayLimit(tr,er)||_unsupportedIterableToArray(tr,er)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit(tr,er){var rr=tr==null?null:typeof Symbol<"u"&&tr[Symbol.iterator]||tr["@@iterator"];if(rr!=null){var nr,ir,sr,ar,cr=[],lr=!0,or=!1;try{if(sr=(rr=rr.call(tr)).next,er!==0)for(;!(lr=(nr=sr.call(rr)).done)&&(cr.push(nr.value),cr.length!==er);lr=!0);}catch(ur){or=!0,ir=ur}finally{try{if(!lr&&rr.return!=null&&(ar=rr.return(),Object(ar)!==ar))return}finally{if(or)throw ir}}return cr}}function _arrayWithHoles(tr){if(Array.isArray(tr))return tr}function _objectWithoutProperties(tr,er){if(tr==null)return{};var rr=_objectWithoutPropertiesLoose(tr,er),nr,ir;if(Object.getOwnPropertySymbols){var sr=Object.getOwnPropertySymbols(tr);for(ir=0;ir<sr.length;ir++)nr=sr[ir],!(er.indexOf(nr)>=0)&&Object.prototype.propertyIsEnumerable.call(tr,nr)&&(rr[nr]=tr[nr])}return rr}function _objectWithoutPropertiesLoose(tr,er){if(tr==null)return{};var rr={};for(var nr in tr)if(Object.prototype.hasOwnProperty.call(tr,nr)){if(er.indexOf(nr)>=0)continue;rr[nr]=tr[nr]}return rr}function _classCallCheck(tr,er){if(!(tr instanceof er))throw new TypeError("Cannot call a class as a function")}function _defineProperties(tr,er){for(var rr=0;rr<er.length;rr++){var nr=er[rr];nr.enumerable=nr.enumerable||!1,nr.configurable=!0,"value"in nr&&(nr.writable=!0),Object.defineProperty(tr,_toPropertyKey(nr.key),nr)}}function _createClass(tr,er,rr){return er&&_defineProperties(tr.prototype,er),Object.defineProperty(tr,"prototype",{writable:!1}),tr}function _callSuper(tr,er,rr){return er=_getPrototypeOf(er),_possibleConstructorReturn(tr,_isNativeReflectConstruct()?Reflect.construct(er,rr||[],_getPrototypeOf(tr).constructor):er.apply(tr,rr))}function _possibleConstructorReturn(tr,er){if(er&&(_typeof$1(er)==="object"||typeof er=="function"))return er;if(er!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(tr)}function _assertThisInitialized(tr){if(tr===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tr}function _isNativeReflectConstruct(){try{var tr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!tr})()}function _getPrototypeOf(tr){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(rr){return rr.__proto__||Object.getPrototypeOf(rr)},_getPrototypeOf(tr)}function _inherits(tr,er){if(typeof er!="function"&&er!==null)throw new TypeError("Super expression must either be null or a function");tr.prototype=Object.create(er&&er.prototype,{constructor:{value:tr,writable:!0,configurable:!0}}),Object.defineProperty(tr,"prototype",{writable:!1}),er&&_setPrototypeOf(tr,er)}function _setPrototypeOf(tr,er){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(nr,ir){return nr.__proto__=ir,nr},_setPrototypeOf(tr,er)}function _toConsumableArray(tr){return _arrayWithoutHoles(tr)||_iterableToArray(tr)||_unsupportedIterableToArray(tr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(tr,er){if(tr){if(typeof tr=="string")return _arrayLikeToArray(tr,er);var rr=Object.prototype.toString.call(tr).slice(8,-1);if(rr==="Object"&&tr.constructor&&(rr=tr.constructor.name),rr==="Map"||rr==="Set")return Array.from(tr);if(rr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rr))return _arrayLikeToArray(tr,er)}}function _iterableToArray(tr){if(typeof Symbol<"u"&&tr[Symbol.iterator]!=null||tr["@@iterator"]!=null)return Array.from(tr)}function _arrayWithoutHoles(tr){if(Array.isArray(tr))return _arrayLikeToArray(tr)}function _arrayLikeToArray(tr,er){(er==null||er>tr.length)&&(er=tr.length);for(var rr=0,nr=new Array(er);rr<er;rr++)nr[rr]=tr[rr];return nr}function ownKeys(tr,er){var rr=Object.keys(tr);if(Object.getOwnPropertySymbols){var nr=Object.getOwnPropertySymbols(tr);er&&(nr=nr.filter(function(ir){return Object.getOwnPropertyDescriptor(tr,ir).enumerable})),rr.push.apply(rr,nr)}return rr}function _objectSpread(tr){for(var er=1;er<arguments.length;er++){var rr=arguments[er]!=null?arguments[er]:{};er%2?ownKeys(Object(rr),!0).forEach(function(nr){_defineProperty(tr,nr,rr[nr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tr,Object.getOwnPropertyDescriptors(rr)):ownKeys(Object(rr)).forEach(function(nr){Object.defineProperty(tr,nr,Object.getOwnPropertyDescriptor(rr,nr))})}return tr}function _defineProperty(tr,er,rr){return er=_toPropertyKey(er),er in tr?Object.defineProperty(tr,er,{value:rr,enumerable:!0,configurable:!0,writable:!0}):tr[er]=rr,tr}function _toPropertyKey(tr){var er=_toPrimitive(tr,"string");return _typeof$1(er)=="symbol"?er:er+""}function _toPrimitive(tr,er){if(_typeof$1(tr)!="object"||!tr)return tr;var rr=tr[Symbol.toPrimitive];if(rr!==void 0){var nr=rr.call(tr,er);if(_typeof$1(nr)!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(er==="string"?String:Number)(tr)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(tr){return tr}var calculateTooltipPos=function tr(er,rr){return rr==="horizontal"?er.x:rr==="vertical"?er.y:rr==="centric"?er.angle:er.radius},getActiveCoordinate=function tr(er,rr,nr,ir){var sr=rr.find(function(ur){return ur&&ur.index===nr});if(sr){if(er==="horizontal")return{x:sr.coordinate,y:ir.y};if(er==="vertical")return{x:ir.x,y:sr.coordinate};if(er==="centric"){var ar=sr.coordinate,cr=ir.radius;return _objectSpread(_objectSpread(_objectSpread({},ir),polarToCartesian(ir.cx,ir.cy,cr,ar)),{},{angle:ar,radius:cr})}var lr=sr.coordinate,or=ir.angle;return _objectSpread(_objectSpread(_objectSpread({},ir),polarToCartesian(ir.cx,ir.cy,lr,or)),{},{angle:or,radius:lr})}return originCoordinate},getDisplayedData=function tr(er,rr){var nr=rr.graphicalItems,ir=rr.dataStartIndex,sr=rr.dataEndIndex,ar=(nr??[]).reduce(function(cr,lr){var or=lr.props.data;return or&&or.length?[].concat(_toConsumableArray(cr),_toConsumableArray(or)):cr},[]);return ar.length>0?ar:er&&er.length&&isNumber(ir)&&isNumber(sr)?er.slice(ir,sr+1):[]};function getDefaultDomainByAxisType(tr){return tr==="number"?[0,"auto"]:void 0}var getTooltipContent=function tr(er,rr,nr,ir){var sr=er.graphicalItems,ar=er.tooltipAxis,cr=getDisplayedData(rr,er);return nr<0||!sr||!sr.length||nr>=cr.length?null:sr.reduce(function(lr,or){var ur,hr=(ur=or.props.data)!==null&&ur!==void 0?ur:rr;hr&&er.dataStartIndex+er.dataEndIndex!==0&&er.dataEndIndex-er.dataStartIndex>=nr&&(hr=hr.slice(er.dataStartIndex,er.dataEndIndex+1));var dr;if(ar.dataKey&&!ar.allowDuplicatedCategory){var fr=hr===void 0?cr:hr;dr=findEntryInArray(fr,ar.dataKey,ir)}else dr=hr&&hr[nr]||cr[nr];return dr?[].concat(_toConsumableArray(lr),[getTooltipItem(or,dr)]):lr},[])},getTooltipData=function tr(er,rr,nr,ir){var sr=ir||{x:er.chartX,y:er.chartY},ar=calculateTooltipPos(sr,nr),cr=er.orderedTooltipTicks,lr=er.tooltipAxis,or=er.tooltipTicks,ur=calculateActiveTickIndex(ar,cr,or,lr);if(ur>=0&&or){var hr=or[ur]&&or[ur].value,dr=getTooltipContent(er,rr,ur,hr),fr=getActiveCoordinate(nr,cr,ur,sr);return{activeTooltipIndex:ur,activeLabel:hr,activePayload:dr,activeCoordinate:fr}}return null},getAxisMapByAxes=function tr(er,rr){var nr=rr.axes,ir=rr.graphicalItems,sr=rr.axisType,ar=rr.axisIdKey,cr=rr.stackGroups,lr=rr.dataStartIndex,or=rr.dataEndIndex,ur=er.layout,hr=er.children,dr=er.stackOffset,fr=isCategoricalAxis(ur,sr);return nr.reduce(function(gr,br){var pr,mr=br.type.defaultProps!==void 0?_objectSpread(_objectSpread({},br.type.defaultProps),br.props):br.props,yr=mr.type,xr=mr.dataKey,vr=mr.allowDataOverflow,_r=mr.allowDuplicatedCategory,Er=mr.scale,Tr=mr.ticks,Rr=mr.includeHidden,Nr=mr[ar];if(gr[Nr])return gr;var Dr=getDisplayedData(er.data,{graphicalItems:ir.filter(function($r){var Br,zr=ar in $r.props?$r.props[ar]:(Br=$r.type.defaultProps)===null||Br===void 0?void 0:Br[ar];return zr===Nr}),dataStartIndex:lr,dataEndIndex:or}),Ir=Dr.length,Or,jr,Lr;isDomainSpecifiedByUser(mr.domain,vr,yr)&&(Or=parseSpecifiedDomain(mr.domain,null,vr),fr&&(yr==="number"||Er!=="auto")&&(Lr=getDomainOfDataByKey(Dr,xr,"category")));var Cr=getDefaultDomainByAxisType(yr);if(!Or||Or.length===0){var wr,Pr=(wr=mr.domain)!==null&&wr!==void 0?wr:Cr;if(xr){if(Or=getDomainOfDataByKey(Dr,xr,yr),yr==="category"&&fr){var Ar=hasDuplicate(Or);_r&&Ar?(jr=Or,Or=range$1(0,Ir)):_r||(Or=parseDomainOfCategoryAxis(Pr,Or,br).reduce(function($r,Br){return $r.indexOf(Br)>=0?$r:[].concat(_toConsumableArray($r),[Br])},[]))}else if(yr==="category")_r?Or=Or.filter(function($r){return $r!==""&&!isNil$1($r)}):Or=parseDomainOfCategoryAxis(Pr,Or,br).reduce(function($r,Br){return $r.indexOf(Br)>=0||Br===""||isNil$1(Br)?$r:[].concat(_toConsumableArray($r),[Br])},[]);else if(yr==="number"){var Sr=parseErrorBarsOfAxis(Dr,ir.filter(function($r){var Br,zr,Gr=ar in $r.props?$r.props[ar]:(Br=$r.type.defaultProps)===null||Br===void 0?void 0:Br[ar],Vr="hide"in $r.props?$r.props.hide:(zr=$r.type.defaultProps)===null||zr===void 0?void 0:zr.hide;return Gr===Nr&&(Rr||!Vr)}),xr,sr,ur);Sr&&(Or=Sr)}fr&&(yr==="number"||Er!=="auto")&&(Lr=getDomainOfDataByKey(Dr,xr,"category"))}else fr?Or=range$1(0,Ir):cr&&cr[Nr]&&cr[Nr].hasStack&&yr==="number"?Or=dr==="expand"?[0,1]:getDomainOfStackGroups(cr[Nr].stackGroups,lr,or):Or=getDomainOfItemsWithSameAxis(Dr,ir.filter(function($r){var Br=ar in $r.props?$r.props[ar]:$r.type.defaultProps[ar],zr="hide"in $r.props?$r.props.hide:$r.type.defaultProps.hide;return Br===Nr&&(Rr||!zr)}),yr,ur,!0);if(yr==="number")Or=detectReferenceElementsDomain(hr,Or,Nr,sr,Tr),Pr&&(Or=parseSpecifiedDomain(Pr,Or,vr));else if(yr==="category"&&Pr){var Mr=Pr,qr=Or.every(function($r){return Mr.indexOf($r)>=0});qr&&(Or=Mr)}}return _objectSpread(_objectSpread({},gr),{},_defineProperty({},Nr,_objectSpread(_objectSpread({},mr),{},{axisType:sr,domain:Or,categoricalDomain:Lr,duplicateDomain:jr,originalDomain:(pr=mr.domain)!==null&&pr!==void 0?pr:Cr,isCategorical:fr,layout:ur})))},{})},getAxisMapByItems=function tr(er,rr){var nr=rr.graphicalItems,ir=rr.Axis,sr=rr.axisType,ar=rr.axisIdKey,cr=rr.stackGroups,lr=rr.dataStartIndex,or=rr.dataEndIndex,ur=er.layout,hr=er.children,dr=getDisplayedData(er.data,{graphicalItems:nr,dataStartIndex:lr,dataEndIndex:or}),fr=dr.length,gr=isCategoricalAxis(ur,sr),br=-1;return nr.reduce(function(pr,mr){var yr=mr.type.defaultProps!==void 0?_objectSpread(_objectSpread({},mr.type.defaultProps),mr.props):mr.props,xr=yr[ar],vr=getDefaultDomainByAxisType("number");if(!pr[xr]){br++;var _r;return gr?_r=range$1(0,fr):cr&&cr[xr]&&cr[xr].hasStack?(_r=getDomainOfStackGroups(cr[xr].stackGroups,lr,or),_r=detectReferenceElementsDomain(hr,_r,xr,sr)):(_r=parseSpecifiedDomain(vr,getDomainOfItemsWithSameAxis(dr,nr.filter(function(Er){var Tr,Rr,Nr=ar in Er.props?Er.props[ar]:(Tr=Er.type.defaultProps)===null||Tr===void 0?void 0:Tr[ar],Dr="hide"in Er.props?Er.props.hide:(Rr=Er.type.defaultProps)===null||Rr===void 0?void 0:Rr.hide;return Nr===xr&&!Dr}),"number",ur),ir.defaultProps.allowDataOverflow),_r=detectReferenceElementsDomain(hr,_r,xr,sr)),_objectSpread(_objectSpread({},pr),{},_defineProperty({},xr,_objectSpread(_objectSpread({axisType:sr},ir.defaultProps),{},{hide:!0,orientation:get$2(ORIENT_MAP,"".concat(sr,".").concat(br%2),null),domain:_r,originalDomain:vr,isCategorical:gr,layout:ur})))}return pr},{})},getAxisMap=function tr(er,rr){var nr=rr.axisType,ir=nr===void 0?"xAxis":nr,sr=rr.AxisComp,ar=rr.graphicalItems,cr=rr.stackGroups,lr=rr.dataStartIndex,or=rr.dataEndIndex,ur=er.children,hr="".concat(ir,"Id"),dr=findAllByType(ur,sr),fr={};return dr&&dr.length?fr=getAxisMapByAxes(er,{axes:dr,graphicalItems:ar,axisType:ir,axisIdKey:hr,stackGroups:cr,dataStartIndex:lr,dataEndIndex:or}):ar&&ar.length&&(fr=getAxisMapByItems(er,{Axis:sr,graphicalItems:ar,axisType:ir,axisIdKey:hr,stackGroups:cr,dataStartIndex:lr,dataEndIndex:or})),fr},tooltipTicksGenerator=function tr(er){var rr=getAnyElementOfObject(er),nr=getTicksOfAxis(rr,!1,!0);return{tooltipTicks:nr,orderedTooltipTicks:sortBy$1(nr,function(ir){return ir.coordinate}),tooltipAxis:rr,tooltipAxisBandSize:getBandSizeOfAxis(rr,nr)}},createDefaultState=function tr(er){var rr=er.children,nr=er.defaultShowTooltip,ir=findChildByType(rr,Brush),sr=0,ar=0;return er.data&&er.data.length!==0&&(ar=er.data.length-1),ir&&ir.props&&(ir.props.startIndex>=0&&(sr=ir.props.startIndex),ir.props.endIndex>=0&&(ar=ir.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:sr,dataEndIndex:ar,activeTooltipIndex:-1,isTooltipActive:!!nr}},hasGraphicalBarItem=function tr(er){return!er||!er.length?!1:er.some(function(rr){var nr=getDisplayName(rr&&rr.type);return nr&&nr.indexOf("Bar")>=0})},getAxisNameByLayout=function tr(er){return er==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:er==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:er==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function tr(er,rr){var nr=er.props,ir=er.graphicalItems,sr=er.xAxisMap,ar=sr===void 0?{}:sr,cr=er.yAxisMap,lr=cr===void 0?{}:cr,or=nr.width,ur=nr.height,hr=nr.children,dr=nr.margin||{},fr=findChildByType(hr,Brush),gr=findChildByType(hr,Legend),br=Object.keys(lr).reduce(function(_r,Er){var Tr=lr[Er],Rr=Tr.orientation;return!Tr.mirror&&!Tr.hide?_objectSpread(_objectSpread({},_r),{},_defineProperty({},Rr,_r[Rr]+Tr.width)):_r},{left:dr.left||0,right:dr.right||0}),pr=Object.keys(ar).reduce(function(_r,Er){var Tr=ar[Er],Rr=Tr.orientation;return!Tr.mirror&&!Tr.hide?_objectSpread(_objectSpread({},_r),{},_defineProperty({},Rr,get$2(_r,"".concat(Rr))+Tr.height)):_r},{top:dr.top||0,bottom:dr.bottom||0}),mr=_objectSpread(_objectSpread({},pr),br),yr=mr.bottom;fr&&(mr.bottom+=fr.props.height||Brush.defaultProps.height),gr&&rr&&(mr=appendOffsetOfLegend(mr,ir,nr,rr));var xr=or-mr.left-mr.right,vr=ur-mr.top-mr.bottom;return _objectSpread(_objectSpread({brushBottom:yr},mr),{},{width:Math.max(xr,0),height:Math.max(vr,0)})},getCartesianAxisSize=function tr(er,rr){if(rr==="xAxis")return er[rr].width;if(rr==="yAxis")return er[rr].height},generateCategoricalChart=function tr(er){var rr=er.chartName,nr=er.GraphicalChild,ir=er.defaultTooltipEventType,sr=ir===void 0?"axis":ir,ar=er.validateTooltipEventTypes,cr=ar===void 0?["axis"]:ar,lr=er.axisComponents,or=er.legendContent,ur=er.formatAxisMap,hr=er.defaultProps,dr=function(mr,yr){var xr=yr.graphicalItems,vr=yr.stackGroups,_r=yr.offset,Er=yr.updateId,Tr=yr.dataStartIndex,Rr=yr.dataEndIndex,Nr=mr.barSize,Dr=mr.layout,Ir=mr.barGap,Or=mr.barCategoryGap,jr=mr.maxBarSize,Lr=getAxisNameByLayout(Dr),Cr=Lr.numericAxisName,wr=Lr.cateAxisName,Pr=hasGraphicalBarItem(xr),Ar=[];return xr.forEach(function(Sr,Mr){var qr=getDisplayedData(mr.data,{graphicalItems:[Sr],dataStartIndex:Tr,dataEndIndex:Rr}),$r=Sr.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Sr.type.defaultProps),Sr.props):Sr.props,Br=$r.dataKey,zr=$r.maxBarSize,Gr=$r["".concat(Cr,"Id")],Vr=$r["".concat(wr,"Id")],Xr={},Ur=lr.reduce(function(pn,gn){var Pn=yr["".concat(gn.axisType,"Map")],In=$r["".concat(gn.axisType,"Id")];Pn&&Pn[In]||gn.axisType==="zAxis"||invariant();var En=Pn[In];return _objectSpread(_objectSpread({},pn),{},_defineProperty(_defineProperty({},gn.axisType,En),"".concat(gn.axisType,"Ticks"),getTicksOfAxis(En)))},Xr),Fr=Ur[wr],Kr=Ur["".concat(wr,"Ticks")],Zr=vr&&vr[Gr]&&vr[Gr].hasStack&&getStackedDataOfItem(Sr,vr[Gr].stackGroups),Jr=getDisplayName(Sr.type).indexOf("Bar")>=0,tn=getBandSizeOfAxis(Fr,Kr),an=[],dn=Pr&&getBarSizeList({barSize:Nr,stackGroups:vr,totalSize:getCartesianAxisSize(Ur,wr)});if(Jr){var en,rn,sn=isNil$1(zr)?jr:zr,on=(en=(rn=getBandSizeOfAxis(Fr,Kr,!0))!==null&&rn!==void 0?rn:sn)!==null&&en!==void 0?en:0;an=getBarPosition({barGap:Ir,barCategoryGap:Or,bandSize:on!==tn?on:tn,sizeList:dn[Vr],maxBarSize:sn}),on!==tn&&(an=an.map(function(pn){return _objectSpread(_objectSpread({},pn),{},{position:_objectSpread(_objectSpread({},pn.position),{},{offset:pn.position.offset-on/2})})}))}var fn=Sr&&Sr.type&&Sr.type.getComposedData;fn&&Ar.push({props:_objectSpread(_objectSpread({},fn(_objectSpread(_objectSpread({},Ur),{},{displayedData:qr,props:mr,dataKey:Br,item:Sr,bandSize:tn,barPosition:an,offset:_r,stackedData:Zr,layout:Dr,dataStartIndex:Tr,dataEndIndex:Rr}))),{},_defineProperty(_defineProperty(_defineProperty({key:Sr.key||"item-".concat(Mr)},Cr,Ur[Cr]),wr,Ur[wr]),"animationId",Er)),childIndex:parseChildIndex(Sr,mr.children),item:Sr})}),Ar},fr=function(mr,yr){var xr=mr.props,vr=mr.dataStartIndex,_r=mr.dataEndIndex,Er=mr.updateId;if(!validateWidthHeight({props:xr}))return null;var Tr=xr.children,Rr=xr.layout,Nr=xr.stackOffset,Dr=xr.data,Ir=xr.reverseStackOrder,Or=getAxisNameByLayout(Rr),jr=Or.numericAxisName,Lr=Or.cateAxisName,Cr=findAllByType(Tr,nr),wr=getStackGroupsByAxisId(Dr,Cr,"".concat(jr,"Id"),"".concat(Lr,"Id"),Nr,Ir),Pr=lr.reduce(function($r,Br){var zr="".concat(Br.axisType,"Map");return _objectSpread(_objectSpread({},$r),{},_defineProperty({},zr,getAxisMap(xr,_objectSpread(_objectSpread({},Br),{},{graphicalItems:Cr,stackGroups:Br.axisType===jr&&wr,dataStartIndex:vr,dataEndIndex:_r}))))},{}),Ar=calculateOffset(_objectSpread(_objectSpread({},Pr),{},{props:xr,graphicalItems:Cr}),yr==null?void 0:yr.legendBBox);Object.keys(Pr).forEach(function($r){Pr[$r]=ur(xr,Pr[$r],Ar,$r.replace("Map",""),rr)});var Sr=Pr["".concat(Lr,"Map")],Mr=tooltipTicksGenerator(Sr),qr=dr(xr,_objectSpread(_objectSpread({},Pr),{},{dataStartIndex:vr,dataEndIndex:_r,updateId:Er,graphicalItems:Cr,stackGroups:wr,offset:Ar}));return _objectSpread(_objectSpread({formattedGraphicalItems:qr,graphicalItems:Cr,offset:Ar,stackGroups:wr},Mr),Pr)},gr=function(pr){function mr(yr){var xr,vr,_r;return _classCallCheck(this,mr),_r=_callSuper(this,mr,[yr]),_defineProperty(_r,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty(_r,"accessibilityManager",new AccessibilityManager),_defineProperty(_r,"handleLegendBBoxUpdate",function(Er){if(Er){var Tr=_r.state,Rr=Tr.dataStartIndex,Nr=Tr.dataEndIndex,Dr=Tr.updateId;_r.setState(_objectSpread({legendBBox:Er},fr({props:_r.props,dataStartIndex:Rr,dataEndIndex:Nr,updateId:Dr},_objectSpread(_objectSpread({},_r.state),{},{legendBBox:Er}))))}}),_defineProperty(_r,"handleReceiveSyncEvent",function(Er,Tr,Rr){if(_r.props.syncId===Er){if(Rr===_r.eventEmitterSymbol&&typeof _r.props.syncMethod!="function")return;_r.applySyncEvent(Tr)}}),_defineProperty(_r,"handleBrushChange",function(Er){var Tr=Er.startIndex,Rr=Er.endIndex;if(Tr!==_r.state.dataStartIndex||Rr!==_r.state.dataEndIndex){var Nr=_r.state.updateId;_r.setState(function(){return _objectSpread({dataStartIndex:Tr,dataEndIndex:Rr},fr({props:_r.props,dataStartIndex:Tr,dataEndIndex:Rr,updateId:Nr},_r.state))}),_r.triggerSyncEvent({dataStartIndex:Tr,dataEndIndex:Rr})}}),_defineProperty(_r,"handleMouseEnter",function(Er){var Tr=_r.getMouseInfo(Er);if(Tr){var Rr=_objectSpread(_objectSpread({},Tr),{},{isTooltipActive:!0});_r.setState(Rr),_r.triggerSyncEvent(Rr);var Nr=_r.props.onMouseEnter;isFunction$3(Nr)&&Nr(Rr,Er)}}),_defineProperty(_r,"triggeredAfterMouseMove",function(Er){var Tr=_r.getMouseInfo(Er),Rr=Tr?_objectSpread(_objectSpread({},Tr),{},{isTooltipActive:!0}):{isTooltipActive:!1};_r.setState(Rr),_r.triggerSyncEvent(Rr);var Nr=_r.props.onMouseMove;isFunction$3(Nr)&&Nr(Rr,Er)}),_defineProperty(_r,"handleItemMouseEnter",function(Er){_r.setState(function(){return{isTooltipActive:!0,activeItem:Er,activePayload:Er.tooltipPayload,activeCoordinate:Er.tooltipPosition||{x:Er.cx,y:Er.cy}}})}),_defineProperty(_r,"handleItemMouseLeave",function(){_r.setState(function(){return{isTooltipActive:!1}})}),_defineProperty(_r,"handleMouseMove",function(Er){Er.persist(),_r.throttleTriggeredAfterMouseMove(Er)}),_defineProperty(_r,"handleMouseLeave",function(Er){_r.throttleTriggeredAfterMouseMove.cancel();var Tr={isTooltipActive:!1};_r.setState(Tr),_r.triggerSyncEvent(Tr);var Rr=_r.props.onMouseLeave;isFunction$3(Rr)&&Rr(Tr,Er)}),_defineProperty(_r,"handleOuterEvent",function(Er){var Tr=getReactEventByType(Er),Rr=get$2(_r.props,"".concat(Tr));if(Tr&&isFunction$3(Rr)){var Nr,Dr;/.*touch.*/i.test(Tr)?Dr=_r.getMouseInfo(Er.changedTouches[0]):Dr=_r.getMouseInfo(Er),Rr((Nr=Dr)!==null&&Nr!==void 0?Nr:{},Er)}}),_defineProperty(_r,"handleClick",function(Er){var Tr=_r.getMouseInfo(Er);if(Tr){var Rr=_objectSpread(_objectSpread({},Tr),{},{isTooltipActive:!0});_r.setState(Rr),_r.triggerSyncEvent(Rr);var Nr=_r.props.onClick;isFunction$3(Nr)&&Nr(Rr,Er)}}),_defineProperty(_r,"handleMouseDown",function(Er){var Tr=_r.props.onMouseDown;if(isFunction$3(Tr)){var Rr=_r.getMouseInfo(Er);Tr(Rr,Er)}}),_defineProperty(_r,"handleMouseUp",function(Er){var Tr=_r.props.onMouseUp;if(isFunction$3(Tr)){var Rr=_r.getMouseInfo(Er);Tr(Rr,Er)}}),_defineProperty(_r,"handleTouchMove",function(Er){Er.changedTouches!=null&&Er.changedTouches.length>0&&_r.throttleTriggeredAfterMouseMove(Er.changedTouches[0])}),_defineProperty(_r,"handleTouchStart",function(Er){Er.changedTouches!=null&&Er.changedTouches.length>0&&_r.handleMouseDown(Er.changedTouches[0])}),_defineProperty(_r,"handleTouchEnd",function(Er){Er.changedTouches!=null&&Er.changedTouches.length>0&&_r.handleMouseUp(Er.changedTouches[0])}),_defineProperty(_r,"handleDoubleClick",function(Er){var Tr=_r.props.onDoubleClick;if(isFunction$3(Tr)){var Rr=_r.getMouseInfo(Er);Tr(Rr,Er)}}),_defineProperty(_r,"handleContextMenu",function(Er){var Tr=_r.props.onContextMenu;if(isFunction$3(Tr)){var Rr=_r.getMouseInfo(Er);Tr(Rr,Er)}}),_defineProperty(_r,"triggerSyncEvent",function(Er){_r.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,_r.props.syncId,Er,_r.eventEmitterSymbol)}),_defineProperty(_r,"applySyncEvent",function(Er){var Tr=_r.props,Rr=Tr.layout,Nr=Tr.syncMethod,Dr=_r.state.updateId,Ir=Er.dataStartIndex,Or=Er.dataEndIndex;if(Er.dataStartIndex!==void 0||Er.dataEndIndex!==void 0)_r.setState(_objectSpread({dataStartIndex:Ir,dataEndIndex:Or},fr({props:_r.props,dataStartIndex:Ir,dataEndIndex:Or,updateId:Dr},_r.state)));else if(Er.activeTooltipIndex!==void 0){var jr=Er.chartX,Lr=Er.chartY,Cr=Er.activeTooltipIndex,wr=_r.state,Pr=wr.offset,Ar=wr.tooltipTicks;if(!Pr)return;if(typeof Nr=="function")Cr=Nr(Ar,Er);else if(Nr==="value"){Cr=-1;for(var Sr=0;Sr<Ar.length;Sr++)if(Ar[Sr].value===Er.activeLabel){Cr=Sr;break}}var Mr=_objectSpread(_objectSpread({},Pr),{},{x:Pr.left,y:Pr.top}),qr=Math.min(jr,Mr.x+Mr.width),$r=Math.min(Lr,Mr.y+Mr.height),Br=Ar[Cr]&&Ar[Cr].value,zr=getTooltipContent(_r.state,_r.props.data,Cr),Gr=Ar[Cr]?{x:Rr==="horizontal"?Ar[Cr].coordinate:qr,y:Rr==="horizontal"?$r:Ar[Cr].coordinate}:originCoordinate;_r.setState(_objectSpread(_objectSpread({},Er),{},{activeLabel:Br,activeCoordinate:Gr,activePayload:zr,activeTooltipIndex:Cr}))}else _r.setState(Er)}),_defineProperty(_r,"renderCursor",function(Er){var Tr,Rr=_r.state,Nr=Rr.isTooltipActive,Dr=Rr.activeCoordinate,Ir=Rr.activePayload,Or=Rr.offset,jr=Rr.activeTooltipIndex,Lr=Rr.tooltipAxisBandSize,Cr=_r.getTooltipEventType(),wr=(Tr=Er.props.active)!==null&&Tr!==void 0?Tr:Nr,Pr=_r.props.layout,Ar=Er.key||"_recharts-cursor";return React.createElement(Cursor,{key:Ar,activeCoordinate:Dr,activePayload:Ir,activeTooltipIndex:jr,chartName:rr,element:Er,isActive:wr,layout:Pr,offset:Or,tooltipAxisBandSize:Lr,tooltipEventType:Cr})}),_defineProperty(_r,"renderPolarAxis",function(Er,Tr,Rr){var Nr=get$2(Er,"type.axisType"),Dr=get$2(_r.state,"".concat(Nr,"Map")),Ir=Er.type.defaultProps,Or=Ir!==void 0?_objectSpread(_objectSpread({},Ir),Er.props):Er.props,jr=Dr&&Dr[Or["".concat(Nr,"Id")]];return reactExports.cloneElement(Er,_objectSpread(_objectSpread({},jr),{},{className:clsx(Nr,jr.className),key:Er.key||"".concat(Tr,"-").concat(Rr),ticks:getTicksOfAxis(jr,!0)}))}),_defineProperty(_r,"renderPolarGrid",function(Er){var Tr=Er.props,Rr=Tr.radialLines,Nr=Tr.polarAngles,Dr=Tr.polarRadius,Ir=_r.state,Or=Ir.radiusAxisMap,jr=Ir.angleAxisMap,Lr=getAnyElementOfObject(Or),Cr=getAnyElementOfObject(jr),wr=Cr.cx,Pr=Cr.cy,Ar=Cr.innerRadius,Sr=Cr.outerRadius;return reactExports.cloneElement(Er,{polarAngles:Array.isArray(Nr)?Nr:getTicksOfAxis(Cr,!0).map(function(Mr){return Mr.coordinate}),polarRadius:Array.isArray(Dr)?Dr:getTicksOfAxis(Lr,!0).map(function(Mr){return Mr.coordinate}),cx:wr,cy:Pr,innerRadius:Ar,outerRadius:Sr,key:Er.key||"polar-grid",radialLines:Rr})}),_defineProperty(_r,"renderLegend",function(){var Er=_r.state.formattedGraphicalItems,Tr=_r.props,Rr=Tr.children,Nr=Tr.width,Dr=Tr.height,Ir=_r.props.margin||{},Or=Nr-(Ir.left||0)-(Ir.right||0),jr=getLegendProps({children:Rr,formattedGraphicalItems:Er,legendWidth:Or,legendContent:or});if(!jr)return null;var Lr=jr.item,Cr=_objectWithoutProperties(jr,_excluded);return reactExports.cloneElement(Lr,_objectSpread(_objectSpread({},Cr),{},{chartWidth:Nr,chartHeight:Dr,margin:Ir,onBBoxUpdate:_r.handleLegendBBoxUpdate}))}),_defineProperty(_r,"renderTooltip",function(){var Er,Tr=_r.props,Rr=Tr.children,Nr=Tr.accessibilityLayer,Dr=findChildByType(Rr,Tooltip);if(!Dr)return null;var Ir=_r.state,Or=Ir.isTooltipActive,jr=Ir.activeCoordinate,Lr=Ir.activePayload,Cr=Ir.activeLabel,wr=Ir.offset,Pr=(Er=Dr.props.active)!==null&&Er!==void 0?Er:Or;return reactExports.cloneElement(Dr,{viewBox:_objectSpread(_objectSpread({},wr),{},{x:wr.left,y:wr.top}),active:Pr,label:Cr,payload:Pr?Lr:[],coordinate:jr,accessibilityLayer:Nr})}),_defineProperty(_r,"renderBrush",function(Er){var Tr=_r.props,Rr=Tr.margin,Nr=Tr.data,Dr=_r.state,Ir=Dr.offset,Or=Dr.dataStartIndex,jr=Dr.dataEndIndex,Lr=Dr.updateId;return reactExports.cloneElement(Er,{key:Er.key||"_recharts-brush",onChange:combineEventHandlers(_r.handleBrushChange,Er.props.onChange),data:Nr,x:isNumber(Er.props.x)?Er.props.x:Ir.left,y:isNumber(Er.props.y)?Er.props.y:Ir.top+Ir.height+Ir.brushBottom-(Rr.bottom||0),width:isNumber(Er.props.width)?Er.props.width:Ir.width,startIndex:Or,endIndex:jr,updateId:"brush-".concat(Lr)})}),_defineProperty(_r,"renderReferenceElement",function(Er,Tr,Rr){if(!Er)return null;var Nr=_r,Dr=Nr.clipPathId,Ir=_r.state,Or=Ir.xAxisMap,jr=Ir.yAxisMap,Lr=Ir.offset,Cr=Er.type.defaultProps||{},wr=Er.props,Pr=wr.xAxisId,Ar=Pr===void 0?Cr.xAxisId:Pr,Sr=wr.yAxisId,Mr=Sr===void 0?Cr.yAxisId:Sr;return reactExports.cloneElement(Er,{key:Er.key||"".concat(Tr,"-").concat(Rr),xAxis:Or[Ar],yAxis:jr[Mr],viewBox:{x:Lr.left,y:Lr.top,width:Lr.width,height:Lr.height},clipPathId:Dr})}),_defineProperty(_r,"renderActivePoints",function(Er){var Tr=Er.item,Rr=Er.activePoint,Nr=Er.basePoint,Dr=Er.childIndex,Ir=Er.isRange,Or=[],jr=Tr.props.key,Lr=Tr.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Tr.item.type.defaultProps),Tr.item.props):Tr.item.props,Cr=Lr.activeDot,wr=Lr.dataKey,Pr=_objectSpread(_objectSpread({index:Dr,dataKey:wr,cx:Rr.x,cy:Rr.y,r:4,fill:getMainColorOfGraphicItem(Tr.item),strokeWidth:2,stroke:"#fff",payload:Rr.payload,value:Rr.value},filterProps(Cr,!1)),adaptEventHandlers(Cr));return Or.push(mr.renderActiveDot(Cr,Pr,"".concat(jr,"-activePoint-").concat(Dr))),Nr?Or.push(mr.renderActiveDot(Cr,_objectSpread(_objectSpread({},Pr),{},{cx:Nr.x,cy:Nr.y}),"".concat(jr,"-basePoint-").concat(Dr))):Ir&&Or.push(null),Or}),_defineProperty(_r,"renderGraphicChild",function(Er,Tr,Rr){var Nr=_r.filterFormatItem(Er,Tr,Rr);if(!Nr)return null;var Dr=_r.getTooltipEventType(),Ir=_r.state,Or=Ir.isTooltipActive,jr=Ir.tooltipAxis,Lr=Ir.activeTooltipIndex,Cr=Ir.activeLabel,wr=_r.props.children,Pr=findChildByType(wr,Tooltip),Ar=Nr.props,Sr=Ar.points,Mr=Ar.isRange,qr=Ar.baseLine,$r=Nr.item.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Nr.item.type.defaultProps),Nr.item.props):Nr.item.props,Br=$r.activeDot,zr=$r.hide,Gr=$r.activeBar,Vr=$r.activeShape,Xr=!!(!zr&&Or&&Pr&&(Br||Gr||Vr)),Ur={};Dr!=="axis"&&Pr&&Pr.props.trigger==="click"?Ur={onClick:combineEventHandlers(_r.handleItemMouseEnter,Er.props.onClick)}:Dr!=="axis"&&(Ur={onMouseLeave:combineEventHandlers(_r.handleItemMouseLeave,Er.props.onMouseLeave),onMouseEnter:combineEventHandlers(_r.handleItemMouseEnter,Er.props.onMouseEnter)});var Fr=reactExports.cloneElement(Er,_objectSpread(_objectSpread({},Nr.props),Ur));function Kr(gn){return typeof jr.dataKey=="function"?jr.dataKey(gn.payload):null}if(Xr)if(Lr>=0){var Zr,Jr;if(jr.dataKey&&!jr.allowDuplicatedCategory){var tn=typeof jr.dataKey=="function"?Kr:"payload.".concat(jr.dataKey.toString());Zr=findEntryInArray(Sr,tn,Cr),Jr=Mr&&qr&&findEntryInArray(qr,tn,Cr)}else Zr=Sr==null?void 0:Sr[Lr],Jr=Mr&&qr&&qr[Lr];if(Vr||Gr){var an=Er.props.activeIndex!==void 0?Er.props.activeIndex:Lr;return[reactExports.cloneElement(Er,_objectSpread(_objectSpread(_objectSpread({},Nr.props),Ur),{},{activeIndex:an})),null,null]}if(!isNil$1(Zr))return[Fr].concat(_toConsumableArray(_r.renderActivePoints({item:Nr,activePoint:Zr,basePoint:Jr,childIndex:Lr,isRange:Mr})))}else{var dn,en=(dn=_r.getItemByXY(_r.state.activeCoordinate))!==null&&dn!==void 0?dn:{graphicalItem:Fr},rn=en.graphicalItem,sn=rn.item,on=sn===void 0?Er:sn,fn=rn.childIndex,pn=_objectSpread(_objectSpread(_objectSpread({},Nr.props),Ur),{},{activeIndex:fn});return[reactExports.cloneElement(on,pn),null,null]}return Mr?[Fr,null,null]:[Fr,null]}),_defineProperty(_r,"renderCustomized",function(Er,Tr,Rr){return reactExports.cloneElement(Er,_objectSpread(_objectSpread({key:"recharts-customized-".concat(Rr)},_r.props),_r.state))}),_defineProperty(_r,"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:_r.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:_r.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:_r.renderBrush,once:!0},Bar:{handler:_r.renderGraphicChild},Line:{handler:_r.renderGraphicChild},Area:{handler:_r.renderGraphicChild},Radar:{handler:_r.renderGraphicChild},RadialBar:{handler:_r.renderGraphicChild},Scatter:{handler:_r.renderGraphicChild},Pie:{handler:_r.renderGraphicChild},Funnel:{handler:_r.renderGraphicChild},Tooltip:{handler:_r.renderCursor,once:!0},PolarGrid:{handler:_r.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_r.renderPolarAxis},PolarRadiusAxis:{handler:_r.renderPolarAxis},Customized:{handler:_r.renderCustomized}}),_r.clipPathId="".concat((xr=yr.id)!==null&&xr!==void 0?xr:uniqueId("recharts"),"-clip"),_r.throttleTriggeredAfterMouseMove=throttle$1(_r.triggeredAfterMouseMove,(vr=yr.throttleDelay)!==null&&vr!==void 0?vr:1e3/60),_r.state={},_r}return _inherits(mr,pr),_createClass(mr,[{key:"componentDidMount",value:function(){var xr,vr;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(xr=this.props.margin.left)!==null&&xr!==void 0?xr:0,top:(vr=this.props.margin.top)!==null&&vr!==void 0?vr:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var xr=this.props,vr=xr.children,_r=xr.data,Er=xr.height,Tr=xr.layout,Rr=findChildByType(vr,Tooltip);if(Rr){var Nr=Rr.props.defaultIndex;if(!(typeof Nr!="number"||Nr<0||Nr>this.state.tooltipTicks.length-1)){var Dr=this.state.tooltipTicks[Nr]&&this.state.tooltipTicks[Nr].value,Ir=getTooltipContent(this.state,_r,Nr,Dr),Or=this.state.tooltipTicks[Nr].coordinate,jr=(this.state.offset.top+Er)/2,Lr=Tr==="horizontal",Cr=Lr?{x:Or,y:jr}:{y:Or,x:jr},wr=this.state.formattedGraphicalItems.find(function(Ar){var Sr=Ar.item;return Sr.type.name==="Scatter"});wr&&(Cr=_objectSpread(_objectSpread({},Cr),wr.props.points[Nr].tooltipPosition),Ir=wr.props.points[Nr].tooltipPayload);var Pr={activeTooltipIndex:Nr,isTooltipActive:!0,activeLabel:Dr,activePayload:Ir,activeCoordinate:Cr};this.setState(Pr),this.renderCursor(Rr),this.accessibilityManager.setIndex(Nr)}}}},{key:"getSnapshotBeforeUpdate",value:function(xr,vr){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==vr.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==xr.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==xr.margin){var _r,Er;this.accessibilityManager.setDetails({offset:{left:(_r=this.props.margin.left)!==null&&_r!==void 0?_r:0,top:(Er=this.props.margin.top)!==null&&Er!==void 0?Er:0}})}return null}},{key:"componentDidUpdate",value:function(xr){isChildrenEqual([findChildByType(xr.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var xr=findChildByType(this.props.children,Tooltip);if(xr&&typeof xr.props.shared=="boolean"){var vr=xr.props.shared?"axis":"item";return cr.indexOf(vr)>=0?vr:sr}return sr}},{key:"getMouseInfo",value:function(xr){if(!this.container)return null;var vr=this.container,_r=vr.getBoundingClientRect(),Er=getOffset(_r),Tr={chartX:Math.round(xr.pageX-Er.left),chartY:Math.round(xr.pageY-Er.top)},Rr=_r.width/vr.offsetWidth||1,Nr=this.inRange(Tr.chartX,Tr.chartY,Rr);if(!Nr)return null;var Dr=this.state,Ir=Dr.xAxisMap,Or=Dr.yAxisMap,jr=this.getTooltipEventType(),Lr=getTooltipData(this.state,this.props.data,this.props.layout,Nr);if(jr!=="axis"&&Ir&&Or){var Cr=getAnyElementOfObject(Ir).scale,wr=getAnyElementOfObject(Or).scale,Pr=Cr&&Cr.invert?Cr.invert(Tr.chartX):null,Ar=wr&&wr.invert?wr.invert(Tr.chartY):null;return _objectSpread(_objectSpread({},Tr),{},{xValue:Pr,yValue:Ar},Lr)}return Lr?_objectSpread(_objectSpread({},Tr),Lr):null}},{key:"inRange",value:function(xr,vr){var _r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Er=this.props.layout,Tr=xr/_r,Rr=vr/_r;if(Er==="horizontal"||Er==="vertical"){var Nr=this.state.offset,Dr=Tr>=Nr.left&&Tr<=Nr.left+Nr.width&&Rr>=Nr.top&&Rr<=Nr.top+Nr.height;return Dr?{x:Tr,y:Rr}:null}var Ir=this.state,Or=Ir.angleAxisMap,jr=Ir.radiusAxisMap;if(Or&&jr){var Lr=getAnyElementOfObject(Or);return inRangeOfSector({x:Tr,y:Rr},Lr)}return null}},{key:"parseEventsOfWrapper",value:function(){var xr=this.props.children,vr=this.getTooltipEventType(),_r=findChildByType(xr,Tooltip),Er={};_r&&vr==="axis"&&(_r.props.trigger==="click"?Er={onClick:this.handleClick}:Er={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var Tr=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},Tr),Er)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(xr,vr,_r){for(var Er=this.state.formattedGraphicalItems,Tr=0,Rr=Er.length;Tr<Rr;Tr++){var Nr=Er[Tr];if(Nr.item===xr||Nr.props.key===xr.key||vr===getDisplayName(Nr.item.type)&&_r===Nr.childIndex)return Nr}return null}},{key:"renderClipPath",value:function(){var xr=this.clipPathId,vr=this.state.offset,_r=vr.left,Er=vr.top,Tr=vr.height,Rr=vr.width;return React.createElement("defs",null,React.createElement("clipPath",{id:xr},React.createElement("rect",{x:_r,y:Er,height:Tr,width:Rr})))}},{key:"getXScales",value:function(){var xr=this.state.xAxisMap;return xr?Object.entries(xr).reduce(function(vr,_r){var Er=_slicedToArray(_r,2),Tr=Er[0],Rr=Er[1];return _objectSpread(_objectSpread({},vr),{},_defineProperty({},Tr,Rr.scale))},{}):null}},{key:"getYScales",value:function(){var xr=this.state.yAxisMap;return xr?Object.entries(xr).reduce(function(vr,_r){var Er=_slicedToArray(_r,2),Tr=Er[0],Rr=Er[1];return _objectSpread(_objectSpread({},vr),{},_defineProperty({},Tr,Rr.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(xr){var vr;return(vr=this.state.xAxisMap)===null||vr===void 0||(vr=vr[xr])===null||vr===void 0?void 0:vr.scale}},{key:"getYScaleByAxisId",value:function(xr){var vr;return(vr=this.state.yAxisMap)===null||vr===void 0||(vr=vr[xr])===null||vr===void 0?void 0:vr.scale}},{key:"getItemByXY",value:function(xr){var vr=this.state,_r=vr.formattedGraphicalItems,Er=vr.activeItem;if(_r&&_r.length)for(var Tr=0,Rr=_r.length;Tr<Rr;Tr++){var Nr=_r[Tr],Dr=Nr.props,Ir=Nr.item,Or=Ir.type.defaultProps!==void 0?_objectSpread(_objectSpread({},Ir.type.defaultProps),Ir.props):Ir.props,jr=getDisplayName(Ir.type);if(jr==="Bar"){var Lr=(Dr.data||[]).find(function(Ar){return isInRectangle(xr,Ar)});if(Lr)return{graphicalItem:Nr,payload:Lr}}else if(jr==="RadialBar"){var Cr=(Dr.data||[]).find(function(Ar){return inRangeOfSector(xr,Ar)});if(Cr)return{graphicalItem:Nr,payload:Cr}}else if(isFunnel(Nr,Er)||isPie(Nr,Er)||isScatter(Nr,Er)){var wr=getActiveShapeIndexForTooltip({graphicalItem:Nr,activeTooltipItem:Er,itemData:Or.data}),Pr=Or.activeIndex===void 0?wr:Or.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},Nr),{},{childIndex:Pr}),payload:isScatter(Nr,Er)?Or.data[wr]:Nr.props.data[wr]}}}return null}},{key:"render",value:function(){var xr=this;if(!validateWidthHeight(this))return null;var vr=this.props,_r=vr.children,Er=vr.className,Tr=vr.width,Rr=vr.height,Nr=vr.style,Dr=vr.compact,Ir=vr.title,Or=vr.desc,jr=_objectWithoutProperties(vr,_excluded2),Lr=filterProps(jr,!1);if(Dr)return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement(Surface,_extends({},Lr,{width:Tr,height:Rr,title:Ir,desc:Or}),this.renderClipPath(),renderByOrder(_r,this.renderMap)));if(this.props.accessibilityLayer){var Cr,wr;Lr.tabIndex=(Cr=this.props.tabIndex)!==null&&Cr!==void 0?Cr:0,Lr.role=(wr=this.props.role)!==null&&wr!==void 0?wr:"application",Lr.onKeyDown=function(Ar){xr.accessibilityManager.keyboardEvent(Ar)},Lr.onFocus=function(){xr.accessibilityManager.focus()}}var Pr=this.parseEventsOfWrapper();return React.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React.createElement("div",_extends({className:clsx("recharts-wrapper",Er),style:_objectSpread({position:"relative",cursor:"default",width:Tr,height:Rr},Nr)},Pr,{ref:function(Sr){xr.container=Sr}}),React.createElement(Surface,_extends({},Lr,{width:Tr,height:Rr,title:Ir,desc:Or,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(_r,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(reactExports.Component);_defineProperty(gr,"displayName",rr),_defineProperty(gr,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},hr)),_defineProperty(gr,"getDerivedStateFromProps",function(pr,mr){var yr=pr.dataKey,xr=pr.data,vr=pr.children,_r=pr.width,Er=pr.height,Tr=pr.layout,Rr=pr.stackOffset,Nr=pr.margin,Dr=mr.dataStartIndex,Ir=mr.dataEndIndex;if(mr.updateId===void 0){var Or=createDefaultState(pr);return _objectSpread(_objectSpread(_objectSpread({},Or),{},{updateId:0},fr(_objectSpread(_objectSpread({props:pr},Or),{},{updateId:0}),mr)),{},{prevDataKey:yr,prevData:xr,prevWidth:_r,prevHeight:Er,prevLayout:Tr,prevStackOffset:Rr,prevMargin:Nr,prevChildren:vr})}if(yr!==mr.prevDataKey||xr!==mr.prevData||_r!==mr.prevWidth||Er!==mr.prevHeight||Tr!==mr.prevLayout||Rr!==mr.prevStackOffset||!shallowEqual(Nr,mr.prevMargin)){var jr=createDefaultState(pr),Lr={chartX:mr.chartX,chartY:mr.chartY,isTooltipActive:mr.isTooltipActive},Cr=_objectSpread(_objectSpread({},getTooltipData(mr,xr,Tr)),{},{updateId:mr.updateId+1}),wr=_objectSpread(_objectSpread(_objectSpread({},jr),Lr),Cr);return _objectSpread(_objectSpread(_objectSpread({},wr),fr(_objectSpread({props:pr},wr),mr)),{},{prevDataKey:yr,prevData:xr,prevWidth:_r,prevHeight:Er,prevLayout:Tr,prevStackOffset:Rr,prevMargin:Nr,prevChildren:vr})}if(!isChildrenEqual(vr,mr.prevChildren)){var Pr,Ar,Sr,Mr,qr=findChildByType(vr,Brush),$r=qr&&(Pr=(Ar=qr.props)===null||Ar===void 0?void 0:Ar.startIndex)!==null&&Pr!==void 0?Pr:Dr,Br=qr&&(Sr=(Mr=qr.props)===null||Mr===void 0?void 0:Mr.endIndex)!==null&&Sr!==void 0?Sr:Ir,zr=$r!==Dr||Br!==Ir,Gr=!isNil$1(xr),Vr=Gr&&!zr?mr.updateId:mr.updateId+1;return _objectSpread(_objectSpread({updateId:Vr},fr(_objectSpread(_objectSpread({props:pr},mr),{},{updateId:Vr,dataStartIndex:$r,dataEndIndex:Br}),mr)),{},{prevChildren:vr,dataStartIndex:$r,dataEndIndex:Br})}return null}),_defineProperty(gr,"renderActiveDot",function(pr,mr,yr){var xr;return reactExports.isValidElement(pr)?xr=reactExports.cloneElement(pr,mr):isFunction$3(pr)?xr=pr(mr):xr=React.createElement(Dot,mr),React.createElement(Layer,{className:"recharts-active-dot",key:yr},xr)});var br=reactExports.forwardRef(function(mr,yr){return React.createElement(gr,_extends({},mr,{ref:yr}))});return br.displayName=gr.displayName,br},BarChart=generateCategoricalChart({chartName:"BarChart",GraphicalChild:Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap}),PieChart=generateCategoricalChart({chartName:"PieChart",GraphicalChild:Pie,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:PolarAngleAxis},{axisType:"radiusAxis",AxisComp:PolarRadiusAxis}],formatAxisMap:formatAxisMap$1,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),ComposedChart=generateCategoricalChart({chartName:"ComposedChart",GraphicalChild:[Line,Area,Bar,Scatter],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis},{axisType:"zAxis",AxisComp:ZAxis}],formatAxisMap});const COLORS$1=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6366f1"];function useChartData(tr){return reactExports.useMemo(()=>{const er=tr.reduce((hr,dr)=>hr+(dr.total||0),0),rr=tr.filter(hr=>(hr.cantidadStockBodega||0)===0).length,nr=tr.filter(hr=>hr.vinculosManual&&hr.vinculosManual.length>0).length,ir=tr.filter(hr=>hr.cantidadStockBodega===0).length,sr=tr.length>0?er/tr.length:0,cr=[{min:0,max:100,label:"$0-100"},{min:100,max:500,label:"$100-500"},{min:500,max:1e3,label:"$500-1K"},{min:1e3,max:5e3,label:"$1K-5K"},{min:5e3,max:1e4,label:"$5K-10K"},{min:1e4,max:1/0,label:"+$10K"}].map((hr,dr)=>({name:hr.label,value:tr.filter(fr=>(fr.total||0)>=hr.min&&(fr.total||0)<hr.max).length,fill:COLORS$1[dr%COLORS$1.length]})).filter(hr=>hr.value>0),lr=[...tr].sort((hr,dr)=>(dr.total||0)-(hr.total||0)).slice(0,10).map(hr=>({name:hr.codigoSAP.substring(0,10),valor:hr.total||0,stock:hr.cantidadStockBodega||0})),or=[...tr].map(hr=>({name:hr.codigoSAP.substring(0,8),solicitado:hr.cantidadSolicitada,stock:hr.cantidadStockBodega||0,diferencia:hr.cantidadSolicitada-(hr.cantidadStockBodega||0)})).sort((hr,dr)=>dr.diferencia-hr.diferencia).slice(0,15).map(({name:hr,solicitado:dr,stock:fr})=>({name:hr,solicitado:dr,stock:fr})),ur=[{min:0,max:10,label:"$0-10"},{min:10,max:50,label:"$10-50"},{min:50,max:100,label:"$50-100"},{min:100,max:500,label:"$100-500"},{min:500,max:1/0,label:"+$500"}].map((hr,dr)=>({rango:hr.label,cantidad:tr.filter(fr=>fr.valorUnitario>=hr.min&&fr.valorUnitario<hr.max).length,fill:COLORS$1[dr%COLORS$1.length]})).filter(hr=>hr.cantidad>0);return{distribucionValor:cr,topPorValor:lr,stockVsSolicitado:or,rangosPrecios:ur,totales:{totalRepuestos:tr.length,totalUSD:er,sinStock:rr,conMarcador:nr,stockCero:ir,promedioValor:sr}}},[tr])}function ReportsModal({isOpen:tr,onClose:er,repuestos:rr}){const[nr,ir]=reactExports.useState("resumen"),sr=useChartData(rr),ar=reactExports.useMemo(()=>{const or=new Map;return rr.forEach(ur=>{var hr;(hr=ur.tags)==null||hr.forEach(dr=>{if(isTagAsignado(dr)){const fr=dr.nombre,gr=or.get(fr)||{nombre:dr.nombre,tipo:dr.tipo,count:0,totalCantidad:0,totalUSD:0};gr.count++,gr.totalCantidad+=dr.cantidad,gr.totalUSD+=dr.cantidad*ur.valorUnitario,or.set(fr,gr)}})}),Array.from(or.values()).sort((ur,hr)=>hr.totalUSD-ur.totalUSD)},[rr]),cr=reactExports.useMemo(()=>{const or=rr.filter(dr=>dr.vinculosManual&&dr.vinculosManual.length>0),ur=rr.filter(dr=>!dr.vinculosManual||dr.vinculosManual.length===0),hr=new Map;return or.forEach(dr=>{var fr;(fr=dr.vinculosManual)==null||fr.forEach(gr=>{hr.set(gr.pagina,(hr.get(gr.pagina)||0)+1)})}),{total:rr.length,conMarcador:or.length,sinMarcador:ur.length,porcentaje:(or.length/rr.length*100).toFixed(1),porPagina:Array.from(hr.entries()).sort((dr,fr)=>dr[0]-fr[0]).map(([dr,fr])=>({pagina:dr,count:fr}))}},[rr]);if(!tr)return null;const lr=[{id:"resumen",label:"Resumen",icon:jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4"})},{id:"contextos",label:"Contextos",icon:jsxRuntimeExports.jsx(Tag,{className:"w-4 h-4"})},{id:"manual",label:"Manual",icon:jsxRuntimeExports.jsx(BookMarked,{className:"w-4 h-4"})},{id:"valor",label:"Por Valor",icon:jsxRuntimeExports.jsx(DollarSign,{className:"w-4 h-4"})},{id:"stock",label:"Stock",icon:jsxRuntimeExports.jsx(Package,{className:"w-4 h-4"})}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:er,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",onClick:or=>or.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-6 h-6 text-primary-600"}),"Reportes y Anlisis"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[rr.length," repuestos analizados"]})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx("div",{className:"px-6 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:lr.map(or=>jsxRuntimeExports.jsxs("button",{onClick:()=>ir(or.id),className:`
                  flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors
                  ${nr===or.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}
                `,children:[or.icon,or.label]},or.id))})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[nr==="resumen"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(Package,{className:"w-5 h-5"}),label:"Total Repuestos",value:sr.totales.totalRepuestos,color:"blue"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(DollarSign,{className:"w-5 h-5"}),label:"Total USD",value:`$${sr.totales.totalUSD.toLocaleString("es-CL",{maximumFractionDigits:0})}`,color:"green"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5"}),label:"Sin Stock",value:sr.totales.sinStock,subValue:`${(sr.totales.sinStock/sr.totales.totalRepuestos*100).toFixed(1)}%`,color:"red"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(BookMarked,{className:"w-5 h-5"}),label:"Con Marcador",value:sr.totales.conMarcador,subValue:`${(sr.totales.conMarcador/sr.totales.totalRepuestos*100).toFixed(1)}%`,color:"purple"})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Distribucin por Rango de Valor Total"}),jsxRuntimeExports.jsx("div",{className:"h-64",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:sr.distribucionValor,cx:"50%",cy:"50%",outerRadius:80,innerRadius:40,paddingAngle:2,dataKey:"value",label:({name:or,percent:ur})=>`${or} (${((ur||0)*100).toFixed(0)}%)`,labelLine:!1,children:sr.distribucionValor.map((or,ur)=>jsxRuntimeExports.jsx(Cell,{fill:or.fill},`cell-${ur}`))}),jsxRuntimeExports.jsx(Tooltip,{})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Repuestos por Precio Unitario"}),jsxRuntimeExports.jsx("div",{className:"h-64",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:sr.rangosPrecios,children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),jsxRuntimeExports.jsx(XAxis,{dataKey:"rango",tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"cantidad",name:"Cantidad",radius:[4,4,0,0],children:sr.rangosPrecios.map((or,ur)=>jsxRuntimeExports.jsx(Cell,{fill:or.fill},`cell-${ur}`))})]})})})]})]})]}),nr==="valor"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Top 10 Repuestos por Valor Total USD"}),jsxRuntimeExports.jsx("div",{className:"h-80",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(ComposedChart,{data:sr.topPorValor,layout:"vertical",children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),jsxRuntimeExports.jsx(XAxis,{type:"number",tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{dataKey:"name",type:"category",width:80,tick:{fontSize:10}}),jsxRuntimeExports.jsx(Tooltip,{formatter:or=>[`$${(or||0).toLocaleString("es-CL",{maximumFractionDigits:2})}`,"Valor"]}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"valor",name:"Valor USD",fill:"#3b82f6",radius:[0,4,4,0]}),jsxRuntimeExports.jsx(Line,{dataKey:"stock",name:"Stock",stroke:"#10b981",strokeWidth:2})]})})})]}),jsxRuntimeExports.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"pb-2",children:"#"}),jsxRuntimeExports.jsx("th",{className:"pb-2",children:"Cdigo"}),jsxRuntimeExports.jsx("th",{className:"pb-2 text-right",children:"Valor USD"}),jsxRuntimeExports.jsx("th",{className:"pb-2 text-right",children:"Stock"})]})}),jsxRuntimeExports.jsx("tbody",{children:sr.topPorValor.map((or,ur)=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-600",children:[jsxRuntimeExports.jsx("td",{className:"py-2 text-gray-400",children:ur+1}),jsxRuntimeExports.jsx("td",{className:"py-2 font-mono font-medium dark:text-gray-200",children:or.name}),jsxRuntimeExports.jsxs("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:["$",or.valor.toLocaleString("es-CL",{maximumFractionDigits:2})]}),jsxRuntimeExports.jsx("td",{className:"py-2 text-right dark:text-gray-200",children:or.stock})]},ur))})]})})]}),nr==="stock"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Cantidad Solicitada vs Stock Disponible"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4",children:"Top 15 con mayor diferencia entre solicitado y stock"}),jsxRuntimeExports.jsx("div",{className:"h-96",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:sr.stockVsSolicitado,layout:"vertical",children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),jsxRuntimeExports.jsx(XAxis,{type:"number",tick:{fontSize:11}}),jsxRuntimeExports.jsx(YAxis,{dataKey:"name",type:"category",width:70,tick:{fontSize:10}}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"solicitado",name:"Solicitado",fill:"#f59e0b",radius:[0,4,4,0]}),jsxRuntimeExports.jsx(Bar,{dataKey:"stock",name:"Stock",fill:"#10b981",radius:[0,4,4,0]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 rounded-xl p-4 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:sr.totales.stockCero}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"Stock en cero"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 rounded-xl p-4 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:rr.filter(or=>(or.cantidadStockBodega||0)<or.cantidadSolicitada).length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"Stock insuficiente"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 rounded-xl p-4 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:rr.filter(or=>(or.cantidadStockBodega||0)>=or.cantidadSolicitada).length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"Stock suficiente"})]})]})]}),nr==="contextos"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-xl p-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Tag,{className:"w-5 h-5"}),"Tags de Solicitud"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ar.filter(or=>or.tipo==="solicitud").slice(0,5).map(or=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm truncate max-w-[200px]",title:or.nombre,children:or.nombre}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[or.count," repuestos  ",or.totalCantidad," unidades"]})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-blue-600",children:["$",or.totalUSD.toLocaleString("es-CL",{maximumFractionDigits:0})]})]},or.nombre)),ar.filter(or=>or.tipo==="solicitud").length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No hay tags de solicitud"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 rounded-xl p-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-green-800 dark:text-green-200 flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Package,{className:"w-5 h-5"}),"Tags de Stock"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ar.filter(or=>or.tipo==="stock").slice(0,5).map(or=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-sm truncate max-w-[200px]",title:or.nombre,children:or.nombre}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[or.count," repuestos  ",or.totalCantidad," unidades"]})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-green-600",children:["$",or.totalUSD.toLocaleString("es-CL",{maximumFractionDigits:0})]})]},or.nombre)),ar.filter(or=>or.tipo==="stock").length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No hay tags de stock"})]})]})]}),ar.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Valor USD por Contexto/Evento"}),jsxRuntimeExports.jsx("div",{className:"h-64",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:ar.slice(0,8),children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),jsxRuntimeExports.jsx(XAxis,{dataKey:"nombre",tick:{fontSize:9},angle:-20,textAnchor:"end",height:60}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{formatter:or=>[`$${or.toLocaleString("es-CL")}`,"Valor USD"]}),jsxRuntimeExports.jsx(Bar,{dataKey:"totalUSD",name:"Valor USD",radius:[4,4,0,0],children:ar.slice(0,8).map((or,ur)=>jsxRuntimeExports.jsx(Cell,{fill:or.tipo==="solicitud"?"#3b82f6":"#10b981"},`cell-${ur}`))})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 overflow-x-auto",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3",children:"Todos los Contextos"}),jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx("th",{className:"pb-2",children:"Contexto"}),jsxRuntimeExports.jsx("th",{className:"pb-2",children:"Tipo"}),jsxRuntimeExports.jsx("th",{className:"pb-2 text-right",children:"Repuestos"}),jsxRuntimeExports.jsx("th",{className:"pb-2 text-right",children:"Cantidad"}),jsxRuntimeExports.jsx("th",{className:"pb-2 text-right",children:"Valor USD"})]})}),jsxRuntimeExports.jsx("tbody",{children:ar.map((or,ur)=>jsxRuntimeExports.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-600",children:[jsxRuntimeExports.jsx("td",{className:"py-2 font-medium dark:text-gray-200 max-w-[200px] truncate",title:or.nombre,children:or.nombre}),jsxRuntimeExports.jsx("td",{className:"py-2",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${or.tipo==="solicitud"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:or.tipo})}),jsxRuntimeExports.jsx("td",{className:"py-2 text-right",children:or.count}),jsxRuntimeExports.jsx("td",{className:"py-2 text-right",children:or.totalCantidad}),jsxRuntimeExports.jsxs("td",{className:"py-2 text-right font-semibold text-green-600",children:["$",or.totalUSD.toLocaleString("es-CL",{maximumFractionDigits:0})]})]},ur))})]})]})]}),nr==="manual"&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(BookMarked,{className:"w-5 h-5"}),label:"Total Repuestos",value:cr.total,color:"blue"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(CircleCheckBig,{className:"w-5 h-5"}),label:"Con Marcador",value:cr.conMarcador,subValue:`${cr.porcentaje}%`,color:"green"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(CircleX,{className:"w-5 h-5"}),label:"Sin Marcador",value:cr.sinMarcador,subValue:`${(100-parseFloat(cr.porcentaje)).toFixed(1)}%`,color:"red"}),jsxRuntimeExports.jsx(StatCard,{icon:jsxRuntimeExports.jsx(FileText,{className:"w-5 h-5"}),label:"Pginas Usadas",value:cr.porPagina.length,color:"purple"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Progreso de Marcacin"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[cr.porcentaje,"% completado"]})]}),jsxRuntimeExports.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-green-400 transition-all duration-500",style:{width:`${cr.porcentaje}%`}})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Faltan ",cr.sinMarcador," repuestos por marcar en el manual"]})]}),cr.porPagina.length>0&&jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Marcadores por Pgina del Manual"}),jsxRuntimeExports.jsx("div",{className:"h-64",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:cr.porPagina.slice(0,20),children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),jsxRuntimeExports.jsx(XAxis,{dataKey:"pagina",tick:{fontSize:11},label:{value:"Pgina",position:"bottom",fontSize:12}}),jsxRuntimeExports.jsx(YAxis,{tick:{fontSize:11}}),jsxRuntimeExports.jsx(Tooltip,{formatter:or=>[or,"Marcadores"]}),jsxRuntimeExports.jsx(Bar,{dataKey:"count",name:"Marcadores",fill:"#8b5cf6",radius:[4,4,0,0]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-4 text-center",children:"Estado de Marcacin"}),jsxRuntimeExports.jsx("div",{className:"h-48",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:[{name:"Con marcador",value:cr.conMarcador,fill:"#10b981"},{name:"Sin marcador",value:cr.sinMarcador,fill:"#ef4444"}],cx:"50%",cy:"50%",outerRadius:70,innerRadius:40,paddingAngle:2,dataKey:"value",label:({name:or,percent:ur})=>`${or} (${((ur||0)*100).toFixed(0)}%)`,labelLine:!1}),jsxRuntimeExports.jsx(Tooltip,{})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-200 mb-3",children:"Pginas ms utilizadas"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:cr.porPagina.sort((or,ur)=>ur.count-or.count).slice(0,10).map(or=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-gray-800 rounded",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm",children:["Pgina ",or.pagina]}),jsxRuntimeExports.jsxs("span",{className:"font-semibold text-purple-600",children:[or.count," marcadores"]})]},or.pagina))})]})]})]})]})]})})}function StatCard({icon:tr,label:er,value:rr,subValue:nr,color:ir}){const sr={blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-400",green:"bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-400",red:"bg-red-100 text-red-600 dark:bg-red-900/50 dark:text-red-400",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-400"};return jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl p-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-lg ${sr[ir]}`,children:tr}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:er}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-gray-800 dark:text-white",children:rr}),nr&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:nr})]})]})})}function BackupModal({isOpen:tr,onClose:er,backupSystem:rr,repuestos:nr,onRestore:ir,onSuccess:sr,onError:ar}){const[cr,lr]=reactExports.useState("historial"),[or,ur]=reactExports.useState(null),[hr,dr]=reactExports.useState(!1),[fr,gr]=reactExports.useState(!1);if(!tr)return null;const{backups:br,autoBackupEnabled:pr,stats:mr,createFullBackup:yr,deleteBackup:xr,clearAllBackups:vr,getBackupSnapshot:_r,exportBackupToFile:Er,toggleAutoBackup:Tr,formatDate:Rr}=rr,Nr=br.reduce((Ar,Sr)=>{const Mr=Sr.timestamp.split("T")[0];return Ar[Mr]||(Ar[Mr]=[]),Ar[Mr].push(Sr),Ar},{}),Dr=Object.keys(Nr).sort((Ar,Sr)=>Sr.localeCompare(Ar)),Ir=()=>{yr("Backup manual"),sr("Backup creado exitosamente")},Or=Ar=>{Er(Ar)?sr("Backup exportado"):ar("Error al exportar backup")},jr=async Ar=>{const Sr=_r(Ar);if(!Sr){ar("No se pudo leer el backup");return}if(confirm(`Restaurar ${Sr.length} repuestos desde este backup?

Esto reemplazar los datos actuales.`)){dr(!0);try{await ir(Sr),sr(`Restaurados ${Sr.length} repuestos`),er()}catch{ar("Error al restaurar backup")}finally{dr(!1)}}},Lr=async Ar=>{var Mr;const Sr=(Mr=Ar.target.files)==null?void 0:Mr[0];if(Sr){dr(!0);try{const qr=await Sr.text(),$r=JSON.parse(qr);if(!$r.repuestos||!Array.isArray($r.repuestos))throw new Error("Formato de backup invlido");if(!confirm(`Importar ${$r.repuestos.length} repuestos?

Fecha del backup: ${$r.fecha||"No especificada"}`))return;await ir($r.repuestos),sr(`Importados ${$r.repuestos.length} repuestos`),er()}catch{ar("Error al importar: formato invlido")}finally{dr(!1),Ar.target.value=""}}},Cr=()=>{fr?(vr(),gr(!1),sr("Historial de backups eliminado")):(gr(!0),setTimeout(()=>gr(!1),3e3))},wr=Ar=>{switch(Ar){case"completo":return jsxRuntimeExports.jsx(Archive,{className:"w-4 h-4 text-blue-500"});case"incremental":return jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 text-amber-500"});case"restauracion":return jsxRuntimeExports.jsx(RotateCcw,{className:"w-4 h-4 text-green-500"})}},Pr=[{id:"historial",label:"Historial",icon:jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"})},{id:"exportar",label:"Exportar",icon:jsxRuntimeExports.jsx(HardDriveDownload,{className:"w-4 h-4"})},{id:"importar",label:"Importar",icon:jsxRuntimeExports.jsx(HardDriveUpload,{className:"w-4 h-4"})},{id:"config",label:"Config",icon:jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4"})}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:er,children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] overflow-hidden flex flex-col",onClick:Ar=>Ar.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Database,{className:"w-6 h-6 text-primary-600"}),"Sistema de Backup"]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[mr.totalBackups," backups  ",mr.espacioUsado," usado"]})]}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500"})})]}),jsxRuntimeExports.jsx("div",{className:"px-6 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:Pr.map(Ar=>jsxRuntimeExports.jsxs("button",{onClick:()=>lr(Ar.id),className:`
                  flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors
                  ${cr===Ar.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}
                `,children:[Ar.icon,Ar.label]},Ar.id))})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[cr==="historial"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx(Archive,{className:"w-5 h-5 text-blue-600 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-blue-700 dark:text-blue-300",children:mr.backupsCompletos}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Completos"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5 text-amber-600 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-amber-700 dark:text-amber-300",children:mr.backupsIncrementales}),jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:"Incrementales"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-gray-600 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:mr.ultimoBackup}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ltimo"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:Ir,className:"w-full py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center justify-center gap-2 font-medium",children:[jsxRuntimeExports.jsx(HardDrive,{className:"w-5 h-5"}),"Crear Backup Completo Ahora"]}),Dr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Database,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),jsxRuntimeExports.jsx("p",{children:"No hay backups guardados"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Los cambios se guardarn automticamente"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Dr.map(Ar=>jsxRuntimeExports.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:new Date(Ar).toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long"})}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:[Nr[Ar].length," backup",Nr[Ar].length>1?"s":""]})]}),jsxRuntimeExports.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:Nr[Ar].reverse().map(Sr=>jsxRuntimeExports.jsxs("div",{className:"px-4 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>ur(or===Sr.id?null:Sr.id),children:[wr(Sr.tipo),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:Sr.descripcion}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[Rr(Sr.timestamp),"  v",Sr.version,Sr.totalRepuestos&&`  ${Sr.totalRepuestos} items`]})]}),Sr.tipo==="completo"?jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-gray-400 transition-transform ${or===Sr.id?"rotate-180":""}`}):jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 text-gray-400"})]}),or===Sr.id&&Sr.tipo==="completo"&&jsxRuntimeExports.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-gray-700 flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>jr(Sr.id),disabled:hr,className:"flex-1 px-3 py-1.5 text-xs bg-green-100 text-green-700 rounded hover:bg-green-200 flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"w-3 h-3"}),"Restaurar"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Or(Sr.id),className:"flex-1 px-3 py-1.5 text-xs bg-blue-100 text-blue-700 rounded hover:bg-blue-200 flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Download,{className:"w-3 h-3"}),"Exportar"]}),jsxRuntimeExports.jsx("button",{onClick:()=>xr(Sr.id),className:"px-3 py-1.5 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",children:jsxRuntimeExports.jsx(Trash2,{className:"w-3 h-3"})})]}),or===Sr.id&&Sr.tipo==="incremental"&&Sr.cambios&&jsxRuntimeExports.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:jsxRuntimeExports.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[Sr.cambios.slice(0,5).map((Mr,qr)=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono",children:Mr.codigoSAP}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:""}),jsxRuntimeExports.jsxs("span",{children:[Mr.campo,": ",String(Mr.valorAnterior),"  ",String(Mr.valorNuevo)]})]},qr)),Sr.cambios.length>5&&jsxRuntimeExports.jsxs("li",{className:"text-gray-400",children:["...y ",Sr.cambios.length-5," ms"]})]})})]},Sr.id))})]},Ar))}),br.length>0&&jsxRuntimeExports.jsx("button",{onClick:Cr,className:`w-full py-2 text-sm rounded-lg transition-colors ${fr?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400"}`,children:fr?"Confirmar eliminacin?":"Limpiar historial de backups"})]}),cr==="exportar"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/30 rounded-xl border border-blue-200 dark:border-blue-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx(HardDriveDownload,{className:"w-10 h-10 text-blue-600 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200 text-lg",children:"Exportar Backup Completo"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Descarga todos los datos actuales en formato JSON"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-white dark:bg-gray-800 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Total repuestos:"}),jsxRuntimeExports.jsx("span",{className:"font-semibold",children:nr.length})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Tamao estimado:"}),jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:["~",(nr.length*.5).toFixed(0)," KB"]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Or(),disabled:hr,className:"mt-4 w-full py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[hr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-5 h-5 animate-spin"}):jsxRuntimeExports.jsx(Download,{className:"w-5 h-5"}),"Descargar Backup JSON"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:[jsxRuntimeExports.jsx(CircleCheck,{className:"w-5 h-5 mx-auto mb-1 text-green-500"}),"El archivo se puede usar para restaurar datos en cualquier momento"]})]}),cr==="importar"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-6 bg-amber-50 dark:bg-amber-900/30 rounded-xl border border-amber-200 dark:border-amber-800",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-4",children:[jsxRuntimeExports.jsx(HardDriveUpload,{className:"w-10 h-10 text-amber-600 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-amber-800 dark:text-amber-200 text-lg",children:"Restaurar desde Archivo"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:"Importar datos desde un archivo JSON de backup"}),jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-amber-100 dark:bg-amber-900/50 rounded-lg flex items-start gap-2",children:[jsxRuntimeExports.jsx(TriangleAlert,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-amber-700 dark:text-amber-300",children:[jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"Precaucin"}),jsxRuntimeExports.jsx("p",{children:"Esta accin reemplazar todos los datos actuales. Asegrate de tener un backup antes de continuar."})]})]}),jsxRuntimeExports.jsxs("label",{className:"mt-4 w-full py-3 bg-amber-600 text-white font-medium rounded-lg hover:bg-amber-700 transition-colors flex items-center justify-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".json",onChange:Lr,disabled:hr,className:"hidden"}),hr?jsxRuntimeExports.jsx(LoaderCircle,{className:"w-5 h-5 animate-spin"}):jsxRuntimeExports.jsx(Upload,{className:"w-5 h-5"}),"Seleccionar Archivo JSON"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileJson,{className:"w-4 h-4"}),"Formato esperado"]}),jsxRuntimeExports.jsx("pre",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto",children:`{
  "version": "3.x.x",
  "fecha": "2025-01-21T...",
  "repuestos": [...]
}`})]})]}),cr==="config"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Backup Automtico"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Guardar cambios automticamente al editar repuestos"})]}),jsxRuntimeExports.jsx("button",{onClick:Tr,className:`relative w-12 h-6 rounded-full transition-colors ${pr?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"}`,children:jsxRuntimeExports.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${pr?"left-7":"left-1"}`})})]})}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Informacin del Sistema"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Backups almacenados:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[mr.totalBackups," / 50 mx."]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Espacio usado:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:mr.espacioUsado})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"ltimo backup:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:mr.ultimoBackup})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Backup completo cada:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"10 cambios"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/30 rounded-xl text-sm text-blue-700 dark:text-blue-300",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:" Cmo funciona"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-600 dark:text-blue-400",children:[jsxRuntimeExports.jsx("li",{children:"Cada cambio se guarda como backup incremental (solo la diferencia)"}),jsxRuntimeExports.jsx("li",{children:"Cada 10 cambios se crea un backup completo automticamente"}),jsxRuntimeExports.jsx("li",{children:"Los datos se guardan en el navegador (localStorage)"}),jsxRuntimeExports.jsx("li",{children:"Exporta regularmente a archivo para respaldo externo"})]})]})]})]})]})})}const getStorageKey=tr=>tr==="baader-200"?"repuestos_backup":`repuestos_backup_${tr}`,FULL_BACKUP_INTERVAL=10;function compressData(tr){const er=JSON.stringify(tr);return btoa(encodeURIComponent(er))}function decompressData(tr){const er=decodeURIComponent(atob(tr));return JSON.parse(er)}function generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function formatValueForDisplay(tr,er){if(tr==null)return"(vaco)";if(Array.isArray(tr)){if(tr.length===0)return"(vaco)";if(er==="tags"){const nr=tr.map(ir=>typeof ir=="string"?ir:ir&&typeof ir=="object"&&"nombre"in ir?ir.nombre:"?");return`${tr.length} tags: ${nr.slice(0,3).join(", ")}${tr.length>3?"...":""}`}if(er==="vinculosManual"){if(tr.length===0)return"sin marcador";const nr=tr.map(ir=>ir&&typeof ir=="object"&&"pagina"in ir?`pg.${ir.pagina}`:"?");return`${tr.length} marcador(es): ${nr.join(", ")}`}return`${tr.length} items`}if(typeof tr=="object")return"nombre"in tr?String(tr.nombre):"pagina"in tr?`pg.${tr.pagina}`:`{${Object.keys(tr).length} props}`;const rr=String(tr);return rr.length>50?rr.substring(0,47)+"...":rr}function formatDate(tr){return new Date(tr).toLocaleString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function useBackupSystem(tr,er){const[rr,nr]=reactExports.useState(()=>{if(!er)return{backups:[],lastBackupTime:null,autoBackupEnabled:!0};try{const pr=getStorageKey(er),mr=localStorage.getItem(pr);if(mr)return JSON.parse(mr)}catch(pr){console.error("Error cargando estado de backup:",pr)}return{backups:[],lastBackupTime:null,autoBackupEnabled:!0}}),[ir,sr]=reactExports.useState(0);reactExports.useEffect(()=>{if(er)try{const pr=getStorageKey(er);localStorage.setItem(pr,JSON.stringify(rr))}catch(pr){if(console.error("Error guardando estado de backup:",pr),pr instanceof DOMException&&pr.name==="QuotaExceededError"){const mr=rr.backups.slice(-20);nr(yr=>({...yr,backups:mr}))}}},[rr,er]);const ar=reactExports.useCallback((pr="Backup completo manual")=>{const mr=compressData(tr),yr={id:generateId(),timestamp:new Date().toISOString(),tipo:"completo",descripcion:pr,version:APP_VERSION,totalRepuestos:tr.length,snapshot:mr};return nr(xr=>{const vr=[...xr.backups,yr].slice(-50);return{...xr,backups:vr,lastBackupTime:yr.timestamp}}),yr},[tr]),cr=reactExports.useCallback((pr,mr)=>{if(pr.length===0)return null;const yr={id:generateId(),timestamp:new Date().toISOString(),tipo:"incremental",descripcion:mr,version:APP_VERSION,cambios:pr};return nr(xr=>{const vr=[...xr.backups,yr].slice(-50);return{...xr,backups:vr,lastBackupTime:yr.timestamp}}),sr(xr=>{const vr=xr+1;return vr>=FULL_BACKUP_INTERVAL?(setTimeout(()=>{ar("Backup automtico peridico")},100),0):vr}),yr},[ar]),lr=reactExports.useCallback((pr,mr,yr,xr)=>{if(!rr.autoBackupEnabled)return;const vr={repuestoId:pr.id,codigoSAP:pr.codigoSAP,campo:mr,valorAnterior:yr,valorNuevo:xr},_r=formatValueForDisplay(yr,mr),Er=formatValueForDisplay(xr,mr),Tr=`${pr.codigoSAP}: ${mr} ${_r}  ${Er}`;cr([vr],Tr)},[rr.autoBackupEnabled,cr]),or=reactExports.useCallback((pr,mr)=>{!rr.autoBackupEnabled||pr.length===0||cr(pr,mr)},[rr.autoBackupEnabled,cr]),ur=reactExports.useCallback(pr=>{nr(mr=>({...mr,backups:mr.backups.filter(yr=>yr.id!==pr)}))},[]),hr=reactExports.useCallback(()=>{nr(pr=>({...pr,backups:[],lastBackupTime:null}))},[]),dr=reactExports.useCallback(pr=>{const mr=rr.backups.find(yr=>yr.id===pr&&yr.tipo==="completo");if(!(mr!=null&&mr.snapshot))return null;try{return decompressData(mr.snapshot)}catch(yr){return console.error("Error descomprimiendo backup:",yr),null}},[rr.backups]),fr=reactExports.useCallback(pr=>{let mr,yr;if(pr){const Er=rr.backups.find(Tr=>Tr.id===pr);if(!Er)return!1;Er.tipo==="completo"&&Er.snapshot?mr={...Er,snapshot:void 0,repuestos:decompressData(Er.snapshot)}:mr=Er,yr=`baader200_backup_${Er.tipo}_${Er.timestamp.split("T")[0]}.json`}else mr={version:APP_VERSION,fecha:new Date().toISOString(),totalRepuestos:tr.length,repuestos:tr},yr=`baader200_backup_completo_${new Date().toISOString().split("T")[0]}.json`;const xr=new Blob([JSON.stringify(mr,null,2)],{type:"application/json"}),vr=URL.createObjectURL(xr),_r=document.createElement("a");return _r.href=vr,_r.download=yr,document.body.appendChild(_r),_r.click(),document.body.removeChild(_r),URL.revokeObjectURL(vr),!0},[rr.backups,tr]),gr=reactExports.useCallback(()=>{nr(pr=>({...pr,autoBackupEnabled:!pr.autoBackupEnabled}))},[]),br={totalBackups:rr.backups.length,backupsCompletos:rr.backups.filter(pr=>pr.tipo==="completo").length,backupsIncrementales:rr.backups.filter(pr=>pr.tipo==="incremental").length,ultimoBackup:rr.lastBackupTime?formatDate(rr.lastBackupTime):"Nunca",espacioUsado:(()=>{try{const pr=new Blob([JSON.stringify(rr)]).size;return pr<1024?`${pr} B`:`${(pr/1024).toFixed(1)} KB`}catch{return"N/A"}})()};return{backups:rr.backups,autoBackupEnabled:rr.autoBackupEnabled,stats:br,createFullBackup:ar,createIncrementalBackup:cr,recordChange:lr,recordBulkChanges:or,deleteBackup:ur,clearAllBackups:hr,getBackupSnapshot:dr,exportBackupToFile:fr,toggleAutoBackup:gr,formatDate}}const COLORES_PREDEFINIDOS=[{nombre:"Azul",valor:"#3b82f6"},{nombre:"Verde",valor:"#10b981"},{nombre:"Rojo",valor:"#ef4444"},{nombre:"Amarillo",valor:"#f59e0b"},{nombre:"Prpura",valor:"#8b5cf6"},{nombre:"Rosa",valor:"#ec4899"},{nombre:"ndigo",valor:"#6366f1"},{nombre:"Turquesa",valor:"#14b8a6"}];function MachineFormModal({isOpen:tr,onClose:er,machine:rr}){const{createMachine:nr,updateMachine:ir,deleteMachine:sr}=useMachines(),{setCurrentMachine:ar}=useMachineContext(),{uploadManualPDF:cr,uploading:lr,progress:or}=useStorage((rr==null?void 0:rr.id)||null),[ur,hr]=reactExports.useState(!1),[dr,fr]=reactExports.useState(null),[gr,br]=reactExports.useState(""),[pr,mr]=reactExports.useState(""),[yr,xr]=reactExports.useState(""),[vr,_r]=reactExports.useState(""),[Er,Tr]=reactExports.useState("#3b82f6"),[Rr,Nr]=reactExports.useState(!0),[Dr,Ir]=reactExports.useState([]);reactExports.useEffect(()=>{rr?(console.log(" [MachineFormModal] Editing machine:",rr.id,rr.nombre),br(rr.nombre),mr(rr.marca),xr(rr.modelo),_r(rr.descripcion||""),Tr(rr.color),Nr(rr.activa),Ir(rr.manuals||[])):(br(""),mr(""),xr(""),_r(""),Tr("#3b82f6"),Nr(!0),Ir([]))},[rr,tr]);const Or=async Cr=>{Cr.preventDefault(),fr(null),hr(!0);try{if(!gr.trim()){fr("El nombre es obligatorio"),hr(!1);return}if(!pr.trim()){fr("La marca es obligatoria"),hr(!1);return}if(!yr.trim()){fr("El modelo es obligatorio"),hr(!1);return}if(rr)await ir(rr.id,{nombre:gr.trim(),marca:pr.trim(),modelo:yr.trim(),descripcion:vr.trim(),color:Er,activa:Rr,manuals:Dr});else{const wr=await nr({nombre:gr.trim(),marca:pr.trim(),modelo:yr.trim(),descripcion:vr.trim(),color:Er,activa:!0,orden:0,manuals:Dr});ar(wr),console.log(` Mquina "${gr}" creada exitosamente con ID: ${wr}`)}er()}catch(wr){console.error(" Error saving machine:",wr),fr(wr instanceof Error?wr.message:"Error al guardar la mquina")}finally{hr(!1)}},jr=async Cr=>{if(!rr){fr("Debe crear la mquina primero antes de subir manuales");return}console.log(" [MachineFormModal] Uploading manual for machine:",rr.id,rr.nombre);try{const wr=Cr.name.replace(/\.[^/.]+$/,"")||"manual",Pr=await cr(Cr,wr);console.log(" [MachineFormModal] Manual uploaded, URL:",Pr);const Ar=[...Dr,Pr];Ir(Ar),console.log(" [MachineFormModal] Updating Firestore for machine:",rr.id,"with",Ar.length,"manuals"),await ir(rr.id,{manuals:Ar}),console.log(" Manual agregado y guardado en Firestore para",rr.id)}catch(wr){console.error("Error uploading manual:",wr),fr(wr instanceof Error?wr.message:"Error al subir el manual")}},Lr=async Cr=>{if(rr)try{const wr=Dr.filter((Pr,Ar)=>Ar!==Cr);Ir(wr),await ir(rr.id,{manuals:wr}),console.log(" Manual eliminado y guardado en Firestore")}catch(wr){console.error("Error removing manual:",wr),fr(wr instanceof Error?wr.message:"Error al eliminar el manual")}};return jsxRuntimeExports.jsx(Modal,{isOpen:tr,onClose:er,title:rr?"Editar Mquina":"Nueva Mquina",children:jsxRuntimeExports.jsxs("form",{onSubmit:Or,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Nombre ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{type:"text",value:gr,onChange:Cr=>br(Cr.target.value),placeholder:"ej: Baader 200",required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Nombre para mostrar en la aplicacin"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Marca ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{type:"text",value:pr,onChange:Cr=>mr(Cr.target.value),placeholder:"ej: Baader",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Modelo ",jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"*"})]}),jsxRuntimeExports.jsx(Input,{type:"text",value:yr,onChange:Cr=>xr(Cr.target.value),placeholder:"ej: 200",required:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcin"}),jsxRuntimeExports.jsx("textarea",{value:vr,onChange:Cr=>_r(Cr.target.value),placeholder:"Descripcin adicional de la mquina (opcional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Manuales PDF"}),Dr.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-2 mb-3",children:Dr.map((Cr,wr)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300 truncate flex-1",children:["Manual ",wr+1]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Lr(wr),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded text-red-500",title:"Eliminar manual",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]},wr))}),rr?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg border border-gray-300 dark:border-gray-600 cursor-pointer transition-colors",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:lr?`Subiendo... ${or}%`:"Agregar manual PDF"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"application/pdf",onChange:Cr=>{var Pr;const wr=(Pr=Cr.target.files)==null?void 0:Pr[0];wr&&jr(wr),Cr.currentTarget.value=""},className:"hidden",disabled:lr||ur})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Puedes agregar m\\u00faltiples manuales para esta m\\u00e1quina"})]}):jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg text-blue-600 dark:text-blue-400 text-sm",children:"Los manuales se pueden agregar despu\\u00e9s de crear la m\\u00e1quina"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color de la pestaa"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[COLORES_PREDEFINIDOS.map(Cr=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Tr(Cr.valor),className:`
                  w-10 h-10 rounded-lg border-2 transition-all
                  ${Er===Cr.valor?"border-gray-900 dark:border-white scale-110":"border-gray-300 dark:border-gray-600 hover:scale-105"}
                `,style:{backgroundColor:Cr.valor},title:Cr.nombre},Cr.valor)),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"color",value:Er,onChange:Cr=>Tr(Cr.target.value),className:"w-10 h-10 rounded-lg cursor-pointer",title:"Color personalizado"})})]})]}),dr&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm",children:dr}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center gap-2 pt-4",children:[rr&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",onClick:async()=>{if(confirm(`Eliminar mquina "${rr.nombre}"?

Esto NO eliminar los repuestos, solo la mquina.`)){hr(!0);try{await sr(rr.id),er()}catch{fr("Error al eliminar la mquina")}finally{hr(!1)}}},disabled:ur,className:"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Eliminar Mquina"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-auto",children:[jsxRuntimeExports.jsx(Button,{type:"button",variant:"secondary",onClick:er,disabled:ur,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{type:"submit",variant:"primary",disabled:ur,children:ur?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-4 h-4 animate-spin"}),"Guardando..."]}):rr?"Actualizar":"Crear Mquina"})]})]})]})})}function MachineSelector({onEditMachine:tr,displayLabel:er=null,displaySubLabel:rr=null}){const{currentMachine:nr,machines:ir,setCurrentMachine:sr,loading:ar}=useMachineContext(),[cr,lr]=reactExports.useState(!1),[or,ur]=reactExports.useState(!1),[hr,dr]=reactExports.useState(null),fr=reactExports.useRef(null),gr=ir.filter(xr=>xr.activa),br=gr.length>8;reactExports.useEffect(()=>{const xr=vr=>{fr.current&&!fr.current.contains(vr.target)&&lr(!1)};return cr&&document.addEventListener("mousedown",xr),()=>{document.removeEventListener("mousedown",xr)}},[cr]);const pr=xr=>{sr(xr),lr(!1)},mr=(xr,vr)=>{vr.stopPropagation(),lr(!1),tr?tr(xr):dr(xr)},yr=()=>{ur(!0),lr(!1)};return ar?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg animate-pulse",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-300 dark:bg-gray-600"}),jsxRuntimeExports.jsx("div",{className:"w-24 h-4 bg-gray-300 dark:bg-gray-600 rounded"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative",ref:fr,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>lr(!cr),className:"flex items-center gap-3 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors min-w-[200px]",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:(nr==null?void 0:nr.color)||"#3b82f6"}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:er||(nr==null?void 0:nr.nombre)||"Seleccionar mquina"}),rr&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:rr})]}),jsxRuntimeExports.jsx(ChevronDown,{className:`w-4 h-4 text-gray-500 dark:text-gray-300 transition-transform ${cr?"rotate-180":""}`})]}),cr&&jsxRuntimeExports.jsxs("div",{className:"absolute top-full left-0 mt-1 w-full min-w-[280px] bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[jsxRuntimeExports.jsx("div",{className:br?"max-h-[300px] overflow-y-auto":void 0,children:gr.length===0?jsxRuntimeExports.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 dark:text-gray-400 text-center",children:"No hay mquinas disponibles"}):gr.map(xr=>jsxRuntimeExports.jsxs("div",{className:`
                      group flex items-center gap-3 px-4 py-2 cursor-pointer transition-colors
                      ${(nr==null?void 0:nr.id)===xr.id?"bg-primary-50 dark:bg-primary-900/20":"hover:bg-gray-50 dark:hover:bg-gray-700"}
                    `,onClick:()=>pr(xr.id),children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:xr.color}}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:xr.nombre}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:[xr.marca," ",xr.modelo]})]}),(nr==null?void 0:nr.id)===xr.id&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-primary-600 dark:text-primary-400 flex-shrink-0"}),jsxRuntimeExports.jsx("button",{onClick:vr=>mr(xr,vr),className:"p-1.5 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 opacity-0 group-hover:opacity-100 hover:opacity-100",title:"Editar mquina",children:jsxRuntimeExports.jsx(Settings,{className:"w-4 h-4"})})]},xr.id))}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),jsxRuntimeExports.jsxs("button",{onClick:yr,className:"w-full flex items-center gap-3 px-4 py-2 text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Crear nueva mquina"})]})]})]}),or&&jsxRuntimeExports.jsx(MachineFormModal,{isOpen:or,onClose:()=>ur(!1)}),hr&&jsxRuntimeExports.jsx(MachineFormModal,{isOpen:!!hr,onClose:()=>dr(null),machine:hr})]})}const COLLECTION_NAME$1="plantAssets",toDate=tr=>{var er;return((er=tr==null?void 0:tr.toDate)==null?void 0:er.call(tr))||new Date},fromDoc$1=(tr,er)=>({id:tr,tipo:er.tipo||"motor",equipo:String(er.equipo??"pendiente"),area:String(er.area??""),subarea:String(er.subarea??""),componente:String(er.componente??""),codigoSAP:String(er.codigoSAP??"pendiente"),descripcionSAP:String(er.descripcionSAP??""),marca:String(er.marca??""),modeloTipo:String(er.modeloTipo??""),potencia:String(er.potencia??""),voltaje:String(er.voltaje??""),relacionReduccion:String(er.relacionReduccion??""),corriente:String(er.corriente??""),eje:String(er.eje??""),observaciones:String(er.observaciones??""),referencias:Array.isArray(er.referencias)?er.referencias.map(rr=>({id:String(rr.id??""),titulo:String(rr.titulo??""),url:String(rr.url??""),createdAt:toDate(rr.createdAt)})):[],imagenes:Array.isArray(er.imagenes)?er.imagenes.map(rr=>({id:String(rr.id??""),url:String(rr.url??""),descripcion:String(rr.descripcion??""),orden:Number.isFinite(rr.orden)?Number(rr.orden):0,esPrincipal:!!rr.esPrincipal,createdAt:toDate(rr.createdAt)})):[],marcadores:Array.isArray(er.marcadores)?er.marcadores.map(rr=>({id:String(rr.id??""),mapId:String(rr.mapId??""),x:typeof rr.x=="number"?rr.x:0,y:typeof rr.y=="number"?rr.y:0,label:rr.label!=null?String(rr.label):void 0,createdAt:toDate(rr.createdAt)})):[],createdAt:toDate(er.createdAt),updatedAt:toDate(er.updatedAt)}),normalizeKey=tr=>tr.toLowerCase().replace(/\s+/g,"").trim(),normalizeText=tr=>tr.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),hashDjb2=tr=>{let er=5381;for(let rr=0;rr<tr.length;rr++)er=er*33^tr.charCodeAt(rr);return(er>>>0).toString(16)},makePlantAssetKey=tr=>{const er=(tr.codigoSAP||"").trim();if(er&&er.toLowerCase()!=="pendiente")return`${tr.tipo}:${normalizeKey(er)}`;const rr=normalizeText(`${tr.tipo}|${tr.equipo||""}|${tr.area}|${tr.subarea}|${tr.descripcionSAP}|${tr.marca}|${tr.modeloTipo}|${tr.potencia}|${tr.voltaje}`);return`${tr.tipo}:hash:${hashDjb2(rr)}`},newId$1=()=>{const tr=globalThis.crypto;return tr!=null&&tr.randomUUID?tr.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`};function usePlantAssets(){const[tr,er]=reactExports.useState([]),[rr,nr]=reactExports.useState(!0),[ir,sr]=reactExports.useState(null);reactExports.useEffect(()=>{const mr=query(collection(db,COLLECTION_NAME$1),orderBy("area","asc")),yr=onSnapshot(mr,xr=>{const vr=xr.docs.map(_r=>fromDoc$1(_r.id,_r.data()));er(vr),nr(!1),sr(null)},xr=>{sr(xr instanceof Error?xr.message:"Error cargando motores/bombas"),nr(!1)});return()=>yr()},[]);const ar=reactExports.useMemo(()=>{const mr=new Map;for(const yr of tr)mr.set(makePlantAssetKey(yr),yr);return mr},[tr]),cr=reactExports.useCallback(async mr=>{const yr=new Date;return(await addDoc(collection(db,COLLECTION_NAME$1),{...mr,createdAt:Timestamp.fromDate(yr),updatedAt:Timestamp.fromDate(yr)})).id},[]),lr=reactExports.useCallback(async(mr,yr)=>{await updateDoc(doc(db,COLLECTION_NAME$1,mr),{...yr,updatedAt:Timestamp.fromDate(new Date)})},[]),or=reactExports.useCallback(async mr=>{await deleteDoc(doc(db,COLLECTION_NAME$1,mr))},[]),ur=reactExports.useCallback(async(mr,yr)=>{const xr={id:newId$1(),createdAt:new Date,...yr};return await lr(mr.id,{marcadores:[...mr.marcadores||[],xr]}),xr},[lr]),hr=reactExports.useCallback(async(mr,yr)=>{await lr(mr.id,{marcadores:(mr.marcadores||[]).filter(xr=>xr.id!==yr)})},[lr]),dr=reactExports.useCallback(async(mr,yr)=>{const xr={id:newId$1(),createdAt:new Date,...yr};return await lr(mr.id,{referencias:[...mr.referencias||[],xr]}),xr},[lr]),fr=reactExports.useCallback(async(mr,yr)=>{await lr(mr.id,{referencias:(mr.referencias||[]).filter(xr=>xr.id!==yr)})},[lr]),gr=reactExports.useCallback(async(mr,yr)=>{const xr={id:newId$1(),createdAt:new Date,...yr};return await lr(mr.id,{imagenes:[...mr.imagenes||[],xr]}),xr},[lr]),br=reactExports.useCallback(async(mr,yr)=>{await lr(mr.id,{imagenes:(mr.imagenes||[]).filter(xr=>xr.id!==yr)})},[lr]),pr=reactExports.useCallback(async mr=>{let yr=0,xr=0;for(const vr of mr){const _r=makePlantAssetKey(vr),Er=ar.get(_r);Er?(await lr(Er.id,vr),xr++):(await cr(vr),yr++)}return{created:yr,updated:xr}},[ar,cr,lr]);return{assets:tr,loading:rr,error:ir,createAsset:cr,updateAsset:lr,deleteAsset:or,addMarker:ur,deleteMarker:hr,addReferencia:dr,deleteReferencia:fr,addImagen:gr,deleteImagen:br,upsertMany:pr}}const COLLECTION_NAME="plantMaps",fromDoc=(tr,er)=>{var rr,nr,ir,sr;return{id:tr,nombre:String(er.nombre??""),imageUrl:String(er.imageUrl??""),createdAt:((nr=(rr=er.createdAt)==null?void 0:rr.toDate)==null?void 0:nr.call(rr))||new Date,updatedAt:((sr=(ir=er.updatedAt)==null?void 0:ir.toDate)==null?void 0:sr.call(ir))||void 0}};function usePlantMaps(){const[tr,er]=reactExports.useState([]),[rr,nr]=reactExports.useState(!0),[ir,sr]=reactExports.useState(null);reactExports.useEffect(()=>{const or=query(collection(db,COLLECTION_NAME),orderBy("nombre","asc")),ur=onSnapshot(or,hr=>{const dr=hr.docs.map(fr=>fromDoc(fr.id,fr.data()));er(dr),nr(!1),sr(null)},hr=>{sr(hr instanceof Error?hr.message:"Error cargando planos"),nr(!1)});return()=>ur()},[]);const ar=reactExports.useCallback(async or=>{const ur=new Date;return(await addDoc(collection(db,COLLECTION_NAME),{nombre:or.nombre,imageUrl:or.imageUrl,createdAt:Timestamp.fromDate(ur),updatedAt:Timestamp.fromDate(ur)})).id},[]),cr=reactExports.useCallback(async(or,ur)=>{await updateDoc(doc(db,COLLECTION_NAME,or),{...ur,updatedAt:Timestamp.fromDate(new Date)})},[]),lr=reactExports.useCallback(async or=>{await deleteDoc(doc(db,COLLECTION_NAME,or))},[]);return{maps:tr,loading:rr,error:ir,createMap:ar,updateMap:cr,deleteMap:lr}}const safeFileName=tr=>tr.replace(/[^a-zA-Z0-9._-]+/g,"_"),newId=()=>{const tr=globalThis.crypto;return tr!=null&&tr.randomUUID?tr.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`};function usePlantStorage(tr){const er=()=>{if(!tr)throw new Error("Machine ID is required");return tr};return{uploadPlantMapImage:async(ar,cr)=>{const lr=er(),or=newId(),ur=`machines/${lr}/plantMaps/${cr}/${or}-${safeFileName(ar.name)}`,hr=ref(storage,ur);return await uploadBytes(hr,ar),{url:await getDownloadURL(hr),path:ur}},uploadPlantAssetImage:async(ar,cr)=>{const lr=er(),or=newId(),ur=`machines/${lr}/plantAssets/${cr}/imagenes/${or}-${safeFileName(ar.name)}`,hr=ref(storage,ur);return await uploadBytes(hr,ar),{url:await getDownloadURL(hr),path:ur}},deleteByPath:async ar=>{const cr=ref(storage,ar);await deleteObject(cr)},deleteByUrl:async ar=>{const cr=ref(storage,ar);await deleteObject(cr)}}}const clamp=(tr,er,rr)=>Math.max(er,Math.min(rr,tr));function PlantMapViewer(tr){const{map:er,selectedAsset:rr,allAssets:nr,showAllMarkers:ir,addingMarker:sr,onAddMarker:ar,onSelectAsset:cr,mode:lr="embedded",clickTitle:or}=tr,ur=reactExports.useRef(null),[hr,dr]=reactExports.useState(!1),[fr,gr]=reactExports.useState({w:0,h:0}),[br,pr]=reactExports.useState(null);reactExports.useEffect(()=>{if(!ur.current)return;const Mr=ur.current,qr=()=>{const Br=Mr.getBoundingClientRect();gr({w:Br.width,h:Br.height})};qr();const $r=new ResizeObserver(()=>qr());return $r.observe(Mr),window.addEventListener("resize",qr),()=>{$r.disconnect(),window.removeEventListener("resize",qr)}},[]);const[mr,yr]=reactExports.useState(1),[xr,vr]=reactExports.useState(0),[_r,Er]=reactExports.useState(0),Tr=reactExports.useRef({active:!1,startX:0,startY:0,baseTx:0,baseTy:0}),Rr=reactExports.useRef(new Map),Nr=reactExports.useRef({active:!1,startDist:0,startScale:1,startTx:0,startTy:0,centerX:0,centerY:0}),Dr=()=>{yr(1),vr(0),Er(0)},Ir=reactExports.useMemo(()=>{const Mr=$r=>{var zr;const Br=($r.imagenes||[]).slice();return Br.length===0?"":(Br.sort((Gr,Vr)=>!!Gr.esPrincipal!=!!Vr.esPrincipal?Gr.esPrincipal?-1:1:(Gr.orden??0)-(Vr.orden??0)),((zr=Br[0])==null?void 0:zr.url)||"")},qr=$r=>{const Br=Mr($r);return($r.marcadores||[]).filter(zr=>zr.mapId===er.id).map(zr=>({...zr,assetId:$r.id,assetLabel:`${$r.tipo.toUpperCase()}  ${$r.codigoSAP}`,codigoSAP:$r.codigoSAP,tipo:$r.tipo.toUpperCase(),equipo:$r.equipo,area:$r.area,subarea:$r.subarea,componente:$r.componente,descripcionSAP:$r.descripcionSAP,marca:$r.marca,modeloTipo:$r.modeloTipo,potencia:$r.potencia,voltaje:$r.voltaje,imageUrl:Br||void 0}))};return ir?nr.flatMap(qr):rr?qr(rr):[]},[nr,er.id,rr,ir]),Or=reactExports.useMemo(()=>br&&Ir.find(Mr=>Mr.id===br)||null,[br,Ir]),jr=reactExports.useMemo(()=>{if(!Or||!fr.w||!fr.h)return null;const Mr=Or.x*fr.w*mr+xr,qr=Or.y*fr.h*mr+_r;return{left:Mr,top:qr}},[fr.h,fr.w,Or,mr,xr,_r]),Lr=Mr=>{if(!sr||!ur.current)return;const qr=ur.current.getBoundingClientRect(),$r=Mr.clientX-qr.left,Br=Mr.clientY-qr.top,zr=($r-xr)/mr,Gr=(Br-_r)/mr,Vr=zr/qr.width,Xr=Gr/qr.height;ar({mapId:er.id,x:clamp(Vr,0,1),y:clamp(Xr,0,1)})},Cr=(Mr,qr,$r)=>{if(!ur.current)return;const Br=ur.current.getBoundingClientRect(),zr=qr-Br.left,Gr=$r-Br.top,Vr=mr,Xr=clamp(Mr,1,8);if(Xr===Vr)return;const Ur=(zr-xr)/Vr,Fr=(Gr-_r)/Vr,Kr=zr-Ur*Xr,Zr=Gr-Fr*Xr;yr(Xr),vr(Kr),Er(Zr)},wr=Mr=>{if(!ur.current)return;Mr.preventDefault();const $r=Mr.deltaY>0?.9:1.1;Cr(mr*$r,Mr.clientX,Mr.clientY)},Pr=Mr=>{if(!ur.current)return;Mr.currentTarget.setPointerCapture(Mr.pointerId),Rr.current.set(Mr.pointerId,{x:Mr.clientX,y:Mr.clientY});const qr=Array.from(Rr.current.values());if(qr.length===2){const[$r,Br]=qr,zr=Br.x-$r.x,Gr=Br.y-$r.y,Vr=Math.hypot(zr,Gr);Nr.current={active:!0,startDist:Vr,startScale:mr,startTx:xr,startTy:_r,centerX:($r.x+Br.x)/2,centerY:($r.y+Br.y)/2},Tr.current.active=!1;return}sr||(Tr.current={active:!0,startX:Mr.clientX,startY:Mr.clientY,baseTx:xr,baseTy:_r})},Ar=Mr=>{if(!ur.current||!Rr.current.has(Mr.pointerId))return;Rr.current.set(Mr.pointerId,{x:Mr.clientX,y:Mr.clientY});const qr=Array.from(Rr.current.values());if(qr.length===2){const[zr,Gr]=qr,Vr=Gr.x-zr.x,Xr=Gr.y-zr.y,Ur=Math.hypot(Vr,Xr),Fr=Nr.current;if(!Fr.active||Fr.startDist<=0)return;const Kr=clamp(Fr.startScale*(Ur/Fr.startDist),1,8),Zr=ur.current.getBoundingClientRect(),Jr=Fr.centerX-Zr.left,tn=Fr.centerY-Zr.top,an=(Jr-Fr.startTx)/Fr.startScale,dn=(tn-Fr.startTy)/Fr.startScale,en=Jr-an*Kr,rn=tn-dn*Kr;yr(Kr),vr(en),Er(rn);return}if(!Tr.current.active)return;const $r=Mr.clientX-Tr.current.startX,Br=Mr.clientY-Tr.current.startY;vr(Tr.current.baseTx+$r),Er(Tr.current.baseTy+Br)},Sr=Mr=>{Rr.current.delete(Mr.pointerId);const qr=Rr.current.size;qr<2&&(Nr.current.active=!1),qr===0&&(Tr.current.active=!1)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{ref:ur,onClick:Lr,onWheel:wr,onPointerDown:Pr,onPointerMove:Ar,onPointerUp:Sr,onPointerCancel:Sr,onDoubleClick:()=>Dr(),className:"relative w-full overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-900 "+(sr?"cursor-crosshair":"cursor-grab active:cursor-grabbing"),style:lr==="embedded"?{aspectRatio:"16 / 9",touchAction:"none"}:{height:"80vh",touchAction:"none"},title:sr?or||"Click para colocar marcador":"Plano",children:[!sr&&Or&&jr&&jsxRuntimeExports.jsx("div",{className:"absolute z-20 pointer-events-none",style:{left:jr.left,top:jr.top},children:jsxRuntimeExports.jsxs("div",{className:"relative -translate-x-1/2 -translate-y-[calc(100%+10px)]",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-900/95 dark:bg-gray-800 text-white rounded-lg border border-gray-700 shadow-lg px-3 py-2 text-xs w-[260px]",children:[jsxRuntimeExports.jsxs("div",{className:"font-semibold text-primary-200",children:[Or.tipo,"  ",Or.codigoSAP]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 text-gray-200",children:[Or.area,"  ",Or.subarea]}),String(Or.equipo||"").trim()&&String(Or.equipo||"").toLowerCase()!=="pendiente"&&jsxRuntimeExports.jsxs("div",{className:"mt-1 text-gray-200",children:["Mquina/Cinta: ",Or.equipo]}),jsxRuntimeExports.jsx("div",{className:"mt-1 text-gray-200",children:[Or.marca,Or.modeloTipo,Or.potencia,Or.voltaje].map(Mr=>(Mr||"").trim()).filter(Mr=>Mr&&Mr.toLowerCase()!=="pendiente").join("  ")}),String(Or.componente||"").trim()&&String(Or.componente||"").toLowerCase()!=="pendiente"&&jsxRuntimeExports.jsx("div",{className:"mt-1 text-gray-300",children:Or.componente}),String(Or.descripcionSAP||"").trim()&&String(Or.descripcionSAP||"").toLowerCase()!=="pendiente"&&jsxRuntimeExports.jsx("div",{className:"mt-1 text-gray-300 line-clamp-2",children:Or.descripcionSAP}),Or.imageUrl&&jsxRuntimeExports.jsx("div",{className:"mt-2 rounded border border-gray-700 overflow-hidden bg-black/20",children:jsxRuntimeExports.jsx("img",{src:Or.imageUrl,alt:"",className:"w-full h-24 object-cover",draggable:!1})})]}),jsxRuntimeExports.jsx("div",{className:"absolute left-1/2 top-full -translate-x-1/2",children:jsxRuntimeExports.jsx("div",{className:"w-0 h-0 border-x-[7px] border-x-transparent border-t-[8px] border-t-gray-900/95 dark:border-t-gray-800"})})]})}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0",style:{transform:`translate(${xr}px, ${_r}px) scale(${mr})`,transformOrigin:"0 0"},children:[jsxRuntimeExports.jsx("img",{src:er.imageUrl,alt:er.nombre,className:"absolute inset-0 w-full h-full object-contain transition-opacity "+(hr?"opacity-100":"opacity-0"),onLoad:()=>dr(!0),draggable:!1}),Ir.map(Mr=>{const qr=(rr==null?void 0:rr.id)===Mr.assetId,$r=ir&&!!cr;return jsxRuntimeExports.jsx("button",{type:"button",onClick:Br=>{$r&&(Br.preventDefault(),Br.stopPropagation(),cr==null||cr(Mr.assetId))},onMouseEnter:()=>{sr||pr(Mr.id)},onMouseLeave:()=>pr(null),onFocus:()=>{sr||pr(Mr.id)},onBlur:()=>pr(null),className:"absolute -translate-x-1/2 -translate-y-1/2 rounded-full bg-primary-600 ring-2 ring-white dark:ring-gray-900 "+(qr?"w-4 h-4":"w-3 h-3")+($r?" cursor-pointer hover:scale-110 transition-transform":" cursor-default"),style:{left:`${Mr.x*100}%`,top:`${Mr.y*100}%`},title:Mr.assetLabel},Mr.id)})]}),!hr&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-sm text-gray-500 dark:text-gray-300",children:"Cargando plano..."})]}),Ir.length===0&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-300",children:ir?"No hay marcadores en este plano.":rr?"Este activo no tiene marcadores en este plano.":"Selecciona un motor/bomba para ver sus marcadores."})]})}function _typeof(tr){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(er){return typeof er}:function(er){return er&&typeof Symbol=="function"&&er.constructor===Symbol&&er!==Symbol.prototype?"symbol":typeof er},_typeof(tr)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(tr,er){for(var rr=new u16(31),nr=0;nr<31;++nr)rr[nr]=er+=1<<tr[nr-1];for(var ir=new i32(rr[30]),nr=1;nr<30;++nr)for(var sr=rr[nr];sr<rr[nr+1];++sr)ir[sr]=sr-rr[nr]<<5|nr;return{b:rr,r:ir}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(tr,er,rr){for(var nr=tr.length,ir=0,sr=new u16(er);ir<nr;++ir)tr[ir]&&++sr[tr[ir]-1];var ar=new u16(er);for(ir=1;ir<er;++ir)ar[ir]=ar[ir-1]+sr[ir-1]<<1;var cr;if(rr){cr=new u16(1<<er);var lr=15-er;for(ir=0;ir<nr;++ir)if(tr[ir])for(var or=ir<<4|tr[ir],ur=er-tr[ir],hr=ar[tr[ir]-1]++<<ur,dr=hr|(1<<ur)-1;hr<=dr;++hr)cr[rev[hr]>>lr]=or}else for(cr=new u16(nr),ir=0;ir<nr;++ir)tr[ir]&&(cr[ir]=rev[ar[tr[ir]-1]++]>>15-tr[ir]);return cr},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(tr){for(var er=tr[0],rr=1;rr<tr.length;++rr)tr[rr]>er&&(er=tr[rr]);return er},bits=function(tr,er,rr){var nr=er/8|0;return(tr[nr]|tr[nr+1]<<8)>>(er&7)&rr},bits16=function(tr,er){var rr=er/8|0;return(tr[rr]|tr[rr+1]<<8|tr[rr+2]<<16)>>(er&7)},shft=function(tr){return(tr+7)/8|0},slc=function(tr,er,rr){return(rr==null||rr>tr.length)&&(rr=tr.length),new u8(tr.subarray(er,rr))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(tr,er,rr){var nr=new Error(er||ec[tr]);if(nr.code=tr,Error.captureStackTrace&&Error.captureStackTrace(nr,err),!rr)throw nr;return nr},inflt=function(tr,er,rr,nr){var ir=tr.length,sr=0;if(!ir||er.f&&!er.l)return rr||new u8(0);var ar=!rr,cr=ar||er.i!=2,lr=er.i;ar&&(rr=new u8(ir*3));var or=function(Zr){var Jr=rr.length;if(Zr>Jr){var tn=new u8(Math.max(Jr*2,Zr));tn.set(rr),rr=tn}},ur=er.f||0,hr=er.p||0,dr=er.b||0,fr=er.l,gr=er.d,br=er.m,pr=er.n,mr=ir*8;do{if(!fr){ur=bits(tr,hr,1);var yr=bits(tr,hr+1,3);if(hr+=3,yr)if(yr==1)fr=flrm,gr=fdrm,br=9,pr=5;else if(yr==2){var Er=bits(tr,hr,31)+257,Tr=bits(tr,hr+10,15)+4,Rr=Er+bits(tr,hr+5,31)+1;hr+=14;for(var Nr=new u8(Rr),Dr=new u8(19),Ir=0;Ir<Tr;++Ir)Dr[clim[Ir]]=bits(tr,hr+Ir*3,7);hr+=Tr*3;for(var Or=max(Dr),jr=(1<<Or)-1,Lr=hMap(Dr,Or,1),Ir=0;Ir<Rr;){var Cr=Lr[bits(tr,hr,jr)];hr+=Cr&15;var xr=Cr>>4;if(xr<16)Nr[Ir++]=xr;else{var wr=0,Pr=0;for(xr==16?(Pr=3+bits(tr,hr,3),hr+=2,wr=Nr[Ir-1]):xr==17?(Pr=3+bits(tr,hr,7),hr+=3):xr==18&&(Pr=11+bits(tr,hr,127),hr+=7);Pr--;)Nr[Ir++]=wr}}var Ar=Nr.subarray(0,Er),Sr=Nr.subarray(Er);br=max(Ar),pr=max(Sr),fr=hMap(Ar,br,1),gr=hMap(Sr,pr,1)}else err(1);else{var xr=shft(hr)+4,vr=tr[xr-4]|tr[xr-3]<<8,_r=xr+vr;if(_r>ir){lr&&err(0);break}cr&&or(dr+vr),rr.set(tr.subarray(xr,_r),dr),er.b=dr+=vr,er.p=hr=_r*8,er.f=ur;continue}if(hr>mr){lr&&err(0);break}}cr&&or(dr+131072);for(var Mr=(1<<br)-1,qr=(1<<pr)-1,$r=hr;;$r=hr){var wr=fr[bits16(tr,hr)&Mr],Br=wr>>4;if(hr+=wr&15,hr>mr){lr&&err(0);break}if(wr||err(2),Br<256)rr[dr++]=Br;else if(Br==256){$r=hr,fr=null;break}else{var zr=Br-254;if(Br>264){var Ir=Br-257,Gr=fleb[Ir];zr=bits(tr,hr,(1<<Gr)-1)+fl[Ir],hr+=Gr}var Vr=gr[bits16(tr,hr)&qr],Xr=Vr>>4;Vr||err(3),hr+=Vr&15;var Sr=fd[Xr];if(Xr>3){var Gr=fdeb[Xr];Sr+=bits16(tr,hr)&(1<<Gr)-1,hr+=Gr}if(hr>mr){lr&&err(0);break}cr&&or(dr+131072);var Ur=dr+zr;if(dr<Sr){var Fr=sr-Sr,Kr=Math.min(Sr,Ur);for(Fr+dr<0&&err(3);dr<Kr;++dr)rr[dr]=nr[Fr+dr]}for(;dr<Ur;++dr)rr[dr]=rr[dr-Sr]}}er.l=fr,er.p=$r,er.b=dr,er.f=ur,fr&&(ur=1,er.m=br,er.d=gr,er.n=pr)}while(!ur);return dr!=rr.length&&ar?slc(rr,0,dr):rr.subarray(0,dr)},wbits=function(tr,er,rr){rr<<=er&7;var nr=er/8|0;tr[nr]|=rr,tr[nr+1]|=rr>>8},wbits16=function(tr,er,rr){rr<<=er&7;var nr=er/8|0;tr[nr]|=rr,tr[nr+1]|=rr>>8,tr[nr+2]|=rr>>16},hTree=function(tr,er){for(var rr=[],nr=0;nr<tr.length;++nr)tr[nr]&&rr.push({s:nr,f:tr[nr]});var ir=rr.length,sr=rr.slice();if(!ir)return{t:et$1,l:0};if(ir==1){var ar=new u8(rr[0].s+1);return ar[rr[0].s]=1,{t:ar,l:1}}rr.sort(function(_r,Er){return _r.f-Er.f}),rr.push({s:-1,f:25001});var cr=rr[0],lr=rr[1],or=0,ur=1,hr=2;for(rr[0]={s:-1,f:cr.f+lr.f,l:cr,r:lr};ur!=ir-1;)cr=rr[rr[or].f<rr[hr].f?or++:hr++],lr=rr[or!=ur&&rr[or].f<rr[hr].f?or++:hr++],rr[ur++]={s:-1,f:cr.f+lr.f,l:cr,r:lr};for(var dr=sr[0].s,nr=1;nr<ir;++nr)sr[nr].s>dr&&(dr=sr[nr].s);var fr=new u16(dr+1),gr=ln(rr[ur-1],fr,0);if(gr>er){var nr=0,br=0,pr=gr-er,mr=1<<pr;for(sr.sort(function(Er,Tr){return fr[Tr.s]-fr[Er.s]||Er.f-Tr.f});nr<ir;++nr){var yr=sr[nr].s;if(fr[yr]>er)br+=mr-(1<<gr-fr[yr]),fr[yr]=er;else break}for(br>>=pr;br>0;){var xr=sr[nr].s;fr[xr]<er?br-=1<<er-fr[xr]++-1:++nr}for(;nr>=0&&br;--nr){var vr=sr[nr].s;fr[vr]==er&&(--fr[vr],++br)}gr=er}return{t:new u8(fr),l:gr}},ln=function(tr,er,rr){return tr.s==-1?Math.max(ln(tr.l,er,rr+1),ln(tr.r,er,rr+1)):er[tr.s]=rr},lc=function(tr){for(var er=tr.length;er&&!tr[--er];);for(var rr=new u16(++er),nr=0,ir=tr[0],sr=1,ar=function(lr){rr[nr++]=lr},cr=1;cr<=er;++cr)if(tr[cr]==ir&&cr!=er)++sr;else{if(!ir&&sr>2){for(;sr>138;sr-=138)ar(32754);sr>2&&(ar(sr>10?sr-11<<5|28690:sr-3<<5|12305),sr=0)}else if(sr>3){for(ar(ir),--sr;sr>6;sr-=6)ar(8304);sr>2&&(ar(sr-3<<5|8208),sr=0)}for(;sr--;)ar(ir);sr=1,ir=tr[cr]}return{c:rr.subarray(0,nr),n:er}},clen=function(tr,er){for(var rr=0,nr=0;nr<er.length;++nr)rr+=tr[nr]*er[nr];return rr},wfblk=function(tr,er,rr){var nr=rr.length,ir=shft(er+2);tr[ir]=nr&255,tr[ir+1]=nr>>8,tr[ir+2]=tr[ir]^255,tr[ir+3]=tr[ir+1]^255;for(var sr=0;sr<nr;++sr)tr[ir+sr+4]=rr[sr];return(ir+4+nr)*8},wblk=function(tr,er,rr,nr,ir,sr,ar,cr,lr,or,ur){wbits(er,ur++,rr),++ir[256];for(var hr=hTree(ir,15),dr=hr.t,fr=hr.l,gr=hTree(sr,15),br=gr.t,pr=gr.l,mr=lc(dr),yr=mr.c,xr=mr.n,vr=lc(br),_r=vr.c,Er=vr.n,Tr=new u16(19),Rr=0;Rr<yr.length;++Rr)++Tr[yr[Rr]&31];for(var Rr=0;Rr<_r.length;++Rr)++Tr[_r[Rr]&31];for(var Nr=hTree(Tr,7),Dr=Nr.t,Ir=Nr.l,Or=19;Or>4&&!Dr[clim[Or-1]];--Or);var jr=or+5<<3,Lr=clen(ir,flt)+clen(sr,fdt)+ar,Cr=clen(ir,dr)+clen(sr,br)+ar+14+3*Or+clen(Tr,Dr)+2*Tr[16]+3*Tr[17]+7*Tr[18];if(lr>=0&&jr<=Lr&&jr<=Cr)return wfblk(er,ur,tr.subarray(lr,lr+or));var wr,Pr,Ar,Sr;if(wbits(er,ur,1+(Cr<Lr)),ur+=2,Cr<Lr){wr=hMap(dr,fr,0),Pr=dr,Ar=hMap(br,pr,0),Sr=br;var Mr=hMap(Dr,Ir,0);wbits(er,ur,xr-257),wbits(er,ur+5,Er-1),wbits(er,ur+10,Or-4),ur+=14;for(var Rr=0;Rr<Or;++Rr)wbits(er,ur+3*Rr,Dr[clim[Rr]]);ur+=3*Or;for(var qr=[yr,_r],$r=0;$r<2;++$r)for(var Br=qr[$r],Rr=0;Rr<Br.length;++Rr){var zr=Br[Rr]&31;wbits(er,ur,Mr[zr]),ur+=Dr[zr],zr>15&&(wbits(er,ur,Br[Rr]>>5&127),ur+=Br[Rr]>>12)}}else wr=flm,Pr=flt,Ar=fdm,Sr=fdt;for(var Rr=0;Rr<cr;++Rr){var Gr=nr[Rr];if(Gr>255){var zr=Gr>>18&31;wbits16(er,ur,wr[zr+257]),ur+=Pr[zr+257],zr>7&&(wbits(er,ur,Gr>>23&31),ur+=fleb[zr]);var Vr=Gr&31;wbits16(er,ur,Ar[Vr]),ur+=Sr[Vr],Vr>3&&(wbits16(er,ur,Gr>>5&8191),ur+=fdeb[Vr])}else wbits16(er,ur,wr[Gr]),ur+=Pr[Gr]}return wbits16(er,ur,wr[256]),ur+Pr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(tr,er,rr,nr,ir,sr){var ar=sr.z||tr.length,cr=new u8(nr+ar+5*(1+Math.ceil(ar/7e3))+ir),lr=cr.subarray(nr,cr.length-ir),or=sr.l,ur=(sr.r||0)&7;if(er){ur&&(lr[0]=sr.r>>3);for(var hr=deo[er-1],dr=hr>>13,fr=hr&8191,gr=(1<<rr)-1,br=sr.p||new u16(32768),pr=sr.h||new u16(gr+1),mr=Math.ceil(rr/3),yr=2*mr,xr=function(an){return(tr[an]^tr[an+1]<<mr^tr[an+2]<<yr)&gr},vr=new i32(25e3),_r=new u16(288),Er=new u16(32),Tr=0,Rr=0,Nr=sr.i||0,Dr=0,Ir=sr.w||0,Or=0;Nr+2<ar;++Nr){var jr=xr(Nr),Lr=Nr&32767,Cr=pr[jr];if(br[Lr]=Cr,pr[jr]=Lr,Ir<=Nr){var wr=ar-Nr;if((Tr>7e3||Dr>24576)&&(wr>423||!or)){ur=wblk(tr,lr,0,vr,_r,Er,Rr,Dr,Or,Nr-Or,ur),Dr=Tr=Rr=0,Or=Nr;for(var Pr=0;Pr<286;++Pr)_r[Pr]=0;for(var Pr=0;Pr<30;++Pr)Er[Pr]=0}var Ar=2,Sr=0,Mr=fr,qr=Lr-Cr&32767;if(wr>2&&jr==xr(Nr-qr))for(var $r=Math.min(dr,wr)-1,Br=Math.min(32767,Nr),zr=Math.min(258,wr);qr<=Br&&--Mr&&Lr!=Cr;){if(tr[Nr+Ar]==tr[Nr+Ar-qr]){for(var Gr=0;Gr<zr&&tr[Nr+Gr]==tr[Nr+Gr-qr];++Gr);if(Gr>Ar){if(Ar=Gr,Sr=qr,Gr>$r)break;for(var Vr=Math.min(qr,Gr-2),Xr=0,Pr=0;Pr<Vr;++Pr){var Ur=Nr-qr+Pr&32767,Fr=br[Ur],Kr=Ur-Fr&32767;Kr>Xr&&(Xr=Kr,Cr=Ur)}}}Lr=Cr,Cr=br[Lr],qr+=Lr-Cr&32767}if(Sr){vr[Dr++]=268435456|revfl[Ar]<<18|revfd[Sr];var Zr=revfl[Ar]&31,Jr=revfd[Sr]&31;Rr+=fleb[Zr]+fdeb[Jr],++_r[257+Zr],++Er[Jr],Ir=Nr+Ar,++Tr}else vr[Dr++]=tr[Nr],++_r[tr[Nr]]}}for(Nr=Math.max(Nr,Ir);Nr<ar;++Nr)vr[Dr++]=tr[Nr],++_r[tr[Nr]];ur=wblk(tr,lr,or,vr,_r,Er,Rr,Dr,Or,Nr-Or,ur),or||(sr.r=ur&7|lr[ur/8|0]<<3,ur-=7,sr.h=pr,sr.p=br,sr.i=Nr,sr.w=Ir)}else{for(var Nr=sr.w||0;Nr<ar+or;Nr+=65535){var tn=Nr+65535;tn>=ar&&(lr[ur/8|0]=or,tn=ar),ur=wfblk(lr,ur+1,tr.subarray(Nr,tn))}sr.i=ar}return slc(cr,0,nr+shft(ur)+ir)},adler=function(){var tr=1,er=0;return{p:function(rr){for(var nr=tr,ir=er,sr=rr.length|0,ar=0;ar!=sr;){for(var cr=Math.min(ar+2655,sr);ar<cr;++ar)ir+=nr+=rr[ar];nr=(nr&65535)+15*(nr>>16),ir=(ir&65535)+15*(ir>>16)}tr=nr,er=ir},d:function(){return tr%=65521,er%=65521,(tr&255)<<24|(tr&65280)<<8|(er&255)<<8|er>>8}}},dopt=function(tr,er,rr,nr,ir){if(!ir&&(ir={l:1},er.dictionary)){var sr=er.dictionary.subarray(-32768),ar=new u8(sr.length+tr.length);ar.set(sr),ar.set(tr,sr.length),tr=ar,ir.w=sr.length}return dflt(tr,er.level==null?6:er.level,er.mem==null?ir.l?Math.ceil(Math.max(8,Math.min(13,Math.log(tr.length)))*1.5):20:12+er.mem,rr,nr,ir)},wbytes=function(tr,er,rr){for(;rr;++er)tr[er]=rr,rr>>>=8},zlh=function(tr,er){var rr=er.level,nr=rr==0?0:rr<6?1:rr==9?3:2;if(tr[0]=120,tr[1]=nr<<6|(er.dictionary&&32),tr[1]|=31-(tr[0]<<8|tr[1])%31,er.dictionary){var ir=adler();ir.p(er.dictionary),wbytes(tr,2,ir.d())}},zls=function(tr,er){return((tr[0]&15)!=8||tr[0]>>4>7||(tr[0]<<8|tr[1])%31)&&err(6,"invalid zlib data"),(tr[1]>>5&1)==1&&err(6,"invalid zlib data: "+(tr[1]&32?"need":"unexpected")+" dictionary"),(tr[1]>>3&4)+2};function zlibSync(tr,er){er||(er={});var rr=adler();rr.p(tr);var nr=dopt(tr,er,er.dictionary?6:2,4);return zlh(nr,er),wbytes(nr,nr.length-4,rr.d()),nr}function unzlibSync(tr,er){return inflt(tr.subarray(zls(tr),-4),{i:2},er,er)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(tr){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(tr){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(tr){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(tr))}};function o(tr,er,rr){var nr=new XMLHttpRequest;nr.open("GET",tr),nr.responseType="blob",nr.onload=function(){l(nr.response,er,rr)},nr.onerror=function(){a.error("could not download file")},nr.send()}function s(tr){var er=new XMLHttpRequest;er.open("HEAD",tr,!1);try{er.send()}catch{}return er.status>=200&&er.status<=299}function c(tr){try{tr.dispatchEvent(new MouseEvent("click"))}catch{var er=document.createEvent("MouseEvents");er.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),tr.dispatchEvent(er)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(tr,er,rr){var nr=n.URL||n.webkitURL,ir=document.createElement("a");er=er||tr.name||"download",ir.download=er,ir.rel="noopener",typeof tr=="string"?(ir.href=tr,ir.origin!==location.origin?s(ir.href)?o(tr,er,rr):c(ir,ir.target="_blank"):c(ir)):(ir.href=nr.createObjectURL(tr),setTimeout(function(){nr.revokeObjectURL(ir.href)},4e4),setTimeout(function(){c(ir)},0))}:"msSaveOrOpenBlob"in navigator?function(tr,er,rr){if(er=er||tr.name||"download",typeof tr=="string")if(s(tr))o(tr,er,rr);else{var nr=document.createElement("a");nr.href=tr,nr.target="_blank",setTimeout(function(){c(nr)})}else navigator.msSaveOrOpenBlob(function(ir,sr){return sr===void 0?sr={autoBom:!1}:_typeof(sr)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),sr={autoBom:!sr}),sr.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ir.type)?new Blob(["\uFEFF",ir],{type:ir.type}):ir}(tr,rr),er)}:function(tr,er,rr,nr){if((nr=nr||open("","_blank"))&&(nr.document.title=nr.document.body.innerText="downloading..."),typeof tr=="string")return o(tr,er,rr);var ir=tr.type==="application/octet-stream",sr=/constructor/i.test(n.HTMLElement)||n.safari,ar=/CriOS\/[\d]+/.test(navigator.userAgent);if((ar||ir&&sr)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var cr=new FileReader;cr.onloadend=function(){var ur=cr.result;ur=ar?ur:ur.replace(/^data:[^;]*;/,"data:attachment/file;"),nr?nr.location.href=ur:location=ur,nr=null},cr.readAsDataURL(tr)}else{var lr=n.URL||n.webkitURL,or=lr.createObjectURL(tr);nr?nr.location=or:location.href=or,nr=null,setTimeout(function(){lr.revokeObjectURL(or)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(tr){var er;tr=tr||"",this.ok=!1,tr.charAt(0)=="#"&&(tr=tr.substr(1,6)),tr={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[tr=(tr=tr.replace(/ /g,"")).toLowerCase()]||tr;for(var rr=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(cr){return[parseInt(cr[1]),parseInt(cr[2]),parseInt(cr[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(cr){return[parseInt(cr[1],16),parseInt(cr[2],16),parseInt(cr[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(cr){return[parseInt(cr[1]+cr[1],16),parseInt(cr[2]+cr[2],16),parseInt(cr[3]+cr[3],16)]}}],nr=0;nr<rr.length;nr++){var ir=rr[nr].re,sr=rr[nr].process,ar=ir.exec(tr);ar&&(er=sr(ar),this.r=er[0],this.g=er[1],this.b=er[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var cr=this.r.toString(16),lr=this.g.toString(16),or=this.b.toString(16);return cr.length==1&&(cr="0"+cr),lr.length==1&&(lr="0"+lr),or.length==1&&(or="0"+or),"#"+cr+lr+or}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(tr,er){var rr=tr[0],nr=tr[1],ir=tr[2],sr=tr[3];rr=g(rr,nr,ir,sr,er[0],7,-680876936),sr=g(sr,rr,nr,ir,er[1],12,-389564586),ir=g(ir,sr,rr,nr,er[2],17,606105819),nr=g(nr,ir,sr,rr,er[3],22,-1044525330),rr=g(rr,nr,ir,sr,er[4],7,-176418897),sr=g(sr,rr,nr,ir,er[5],12,1200080426),ir=g(ir,sr,rr,nr,er[6],17,-1473231341),nr=g(nr,ir,sr,rr,er[7],22,-45705983),rr=g(rr,nr,ir,sr,er[8],7,1770035416),sr=g(sr,rr,nr,ir,er[9],12,-1958414417),ir=g(ir,sr,rr,nr,er[10],17,-42063),nr=g(nr,ir,sr,rr,er[11],22,-1990404162),rr=g(rr,nr,ir,sr,er[12],7,1804603682),sr=g(sr,rr,nr,ir,er[13],12,-40341101),ir=g(ir,sr,rr,nr,er[14],17,-1502002290),rr=m(rr,nr=g(nr,ir,sr,rr,er[15],22,1236535329),ir,sr,er[1],5,-165796510),sr=m(sr,rr,nr,ir,er[6],9,-1069501632),ir=m(ir,sr,rr,nr,er[11],14,643717713),nr=m(nr,ir,sr,rr,er[0],20,-373897302),rr=m(rr,nr,ir,sr,er[5],5,-701558691),sr=m(sr,rr,nr,ir,er[10],9,38016083),ir=m(ir,sr,rr,nr,er[15],14,-660478335),nr=m(nr,ir,sr,rr,er[4],20,-405537848),rr=m(rr,nr,ir,sr,er[9],5,568446438),sr=m(sr,rr,nr,ir,er[14],9,-1019803690),ir=m(ir,sr,rr,nr,er[3],14,-187363961),nr=m(nr,ir,sr,rr,er[8],20,1163531501),rr=m(rr,nr,ir,sr,er[13],5,-1444681467),sr=m(sr,rr,nr,ir,er[2],9,-51403784),ir=m(ir,sr,rr,nr,er[7],14,1735328473),rr=v(rr,nr=m(nr,ir,sr,rr,er[12],20,-1926607734),ir,sr,er[5],4,-378558),sr=v(sr,rr,nr,ir,er[8],11,-2022574463),ir=v(ir,sr,rr,nr,er[11],16,1839030562),nr=v(nr,ir,sr,rr,er[14],23,-35309556),rr=v(rr,nr,ir,sr,er[1],4,-1530992060),sr=v(sr,rr,nr,ir,er[4],11,1272893353),ir=v(ir,sr,rr,nr,er[7],16,-155497632),nr=v(nr,ir,sr,rr,er[10],23,-1094730640),rr=v(rr,nr,ir,sr,er[13],4,681279174),sr=v(sr,rr,nr,ir,er[0],11,-358537222),ir=v(ir,sr,rr,nr,er[3],16,-722521979),nr=v(nr,ir,sr,rr,er[6],23,76029189),rr=v(rr,nr,ir,sr,er[9],4,-640364487),sr=v(sr,rr,nr,ir,er[12],11,-421815835),ir=v(ir,sr,rr,nr,er[15],16,530742520),rr=b(rr,nr=v(nr,ir,sr,rr,er[2],23,-995338651),ir,sr,er[0],6,-198630844),sr=b(sr,rr,nr,ir,er[7],10,1126891415),ir=b(ir,sr,rr,nr,er[14],15,-1416354905),nr=b(nr,ir,sr,rr,er[5],21,-57434055),rr=b(rr,nr,ir,sr,er[12],6,1700485571),sr=b(sr,rr,nr,ir,er[3],10,-1894986606),ir=b(ir,sr,rr,nr,er[10],15,-1051523),nr=b(nr,ir,sr,rr,er[1],21,-2054922799),rr=b(rr,nr,ir,sr,er[8],6,1873313359),sr=b(sr,rr,nr,ir,er[15],10,-30611744),ir=b(ir,sr,rr,nr,er[6],15,-1560198380),nr=b(nr,ir,sr,rr,er[13],21,1309151649),rr=b(rr,nr,ir,sr,er[4],6,-145523070),sr=b(sr,rr,nr,ir,er[11],10,-1120210379),ir=b(ir,sr,rr,nr,er[2],15,718787259),nr=b(nr,ir,sr,rr,er[9],21,-343485551),tr[0]=_(rr,tr[0]),tr[1]=_(nr,tr[1]),tr[2]=_(ir,tr[2]),tr[3]=_(sr,tr[3])}function p(tr,er,rr,nr,ir,sr){return er=_(_(er,tr),_(nr,sr)),_(er<<ir|er>>>32-ir,rr)}function g(tr,er,rr,nr,ir,sr,ar){return p(er&rr|~er&nr,tr,er,ir,sr,ar)}function m(tr,er,rr,nr,ir,sr,ar){return p(er&nr|rr&~nr,tr,er,ir,sr,ar)}function v(tr,er,rr,nr,ir,sr,ar){return p(er^rr^nr,tr,er,ir,sr,ar)}function b(tr,er,rr,nr,ir,sr,ar){return p(rr^(er|~nr),tr,er,ir,sr,ar)}function y(tr){var er,rr=tr.length,nr=[1732584193,-271733879,-1732584194,271733878];for(er=64;er<=tr.length;er+=64)d(nr,w(tr.substring(er-64,er)));tr=tr.substring(er-64);var ir=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(er=0;er<tr.length;er++)ir[er>>2]|=tr.charCodeAt(er)<<(er%4<<3);if(ir[er>>2]|=128<<(er%4<<3),er>55)for(d(nr,ir),er=0;er<16;er++)ir[er]=0;return ir[14]=8*rr,d(nr,ir),nr}function w(tr){var er,rr=[];for(er=0;er<64;er+=4)rr[er>>2]=tr.charCodeAt(er)+(tr.charCodeAt(er+1)<<8)+(tr.charCodeAt(er+2)<<16)+(tr.charCodeAt(er+3)<<24);return rr}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(tr){for(var er="",rr=0;rr<4;rr++)er+=N[tr>>8*rr+4&15]+N[tr>>8*rr&15];return er}function A(tr){return String.fromCharCode((255&tr)>>0,(65280&tr)>>8,(16711680&tr)>>16,(4278190080&tr)>>24)}function x(tr){return y(tr).map(A).join("")}var S=function(tr){for(var er=0;er<tr.length;er++)tr[er]=L(tr[er]);return tr.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(tr,er){if(S){var rr=(65535&tr)+(65535&er);return(tr>>16)+(er>>16)+(rr>>16)<<16|65535&rr}return tr+er&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(tr,er){var rr,nr,ir,sr;if(tr!==rr){for(var ar=(ir=tr,sr=1+(256/tr.length>>0),new Array(sr+1).join(ir)),cr=[],lr=0;lr<256;lr++)cr[lr]=lr;var or=0;for(lr=0;lr<256;lr++){var ur=cr[lr];or=(or+ur+ar.charCodeAt(lr))%256,cr[lr]=cr[or],cr[or]=ur}rr=tr,nr=cr}else cr=nr;var hr=er.length,dr=0,fr=0,gr="";for(lr=0;lr<hr;lr++)fr=(fr+(ur=cr[dr=(dr+1)%256]))%256,cr[dr]=cr[fr],cr[fr]=ur,ar=cr[(cr[dr]+cr[fr])%256],gr+=String.fromCharCode(er.charCodeAt(lr)^ar);return gr}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(tr,er,rr,nr){this.v=1,this.r=2;var ir=192;tr.forEach(function(cr){if(k.perm!==void 0)throw new Error("Invalid permission: "+cr);ir+=k[cr]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var sr=(er+this.padding).substr(0,32),ar=(rr+this.padding).substr(0,32);this.O=this.processOwnerPassword(sr,ar),this.P=-(1+(255^ir)),this.encryptionKey=x(sr+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(nr)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(tr){if(/[^\u0000-\u00ff]/.test(tr))throw new Error("Invalid PDF Name Object: "+tr+", Only accept ASCII characters.");for(var er="",rr=tr.length,nr=0;nr<rr;nr++){var ir=tr.charCodeAt(nr);ir<33||ir===35||ir===37||ir===40||ir===41||ir===47||ir===60||ir===62||ir===91||ir===93||ir===123||ir===125||ir>126?er+="#"+("0"+ir.toString(16)).slice(-2):er+=tr[nr]}return er}function C(tr){if(_typeof(tr)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var er={};this.subscribe=function(rr,nr,ir){if(ir=ir||!1,typeof rr!="string"||typeof nr!="function"||typeof ir!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");er.hasOwnProperty(rr)||(er[rr]={});var sr=Math.random().toString(35);return er[rr][sr]=[nr,!!ir],sr},this.unsubscribe=function(rr){for(var nr in er)if(er[nr][rr])return delete er[nr][rr],Object.keys(er[nr]).length===0&&delete er[nr],!0;return!1},this.publish=function(rr){if(er.hasOwnProperty(rr)){var nr=Array.prototype.slice.call(arguments,1),ir=[];for(var sr in er[rr]){var ar=er[rr][sr];try{ar[0].apply(tr,nr)}catch(cr){n.console&&a.error("jsPDF PubSub Error",cr.message,cr)}ar[1]&&ir.push(sr)}ir.length&&ir.forEach(this.unsubscribe)}},this.getTopics=function(){return er}}function j(tr){if(!(this instanceof j))return new j(tr);var er="opacity,stroke-opacity".split(",");for(var rr in tr)tr.hasOwnProperty(rr)&&er.indexOf(rr)>=0&&(this[rr]=tr[rr]);this.id="",this.objectNumber=-1}function O(tr,er){this.gState=tr,this.matrix=er,this.id="",this.objectNumber=-1}function B(tr,er,rr,nr,ir){if(!(this instanceof B))return new B(tr,er,rr,nr,ir);this.type=tr==="axial"?2:3,this.coords=er,this.colors=rr,O.call(this,nr,ir)}function M(tr,er,rr,nr,ir){if(!(this instanceof M))return new M(tr,er,rr,nr,ir);this.boundingBox=tr,this.xStep=er,this.yStep=rr,this.stream="",this.cloneIndex=0,O.call(this,nr,ir)}function E(tr){var er,rr=typeof arguments[0]=="string"?arguments[0]:"p",nr=arguments[1],ir=arguments[2],sr=arguments[3],ar=[],cr=1,lr=16,or="S",ur=null;_typeof(tr=tr||{})==="object"&&(rr=tr.orientation,nr=tr.unit||nr,ir=tr.format||ir,sr=tr.compress||tr.compressPdf||sr,(ur=tr.encryption||null)!==null&&(ur.userPassword=ur.userPassword||"",ur.ownerPassword=ur.ownerPassword||"",ur.userPermissions=ur.userPermissions||[]),cr=typeof tr.userUnit=="number"?Math.abs(tr.userUnit):1,tr.precision!==void 0&&(er=tr.precision),tr.floatPrecision!==void 0&&(lr=tr.floatPrecision),or=tr.defaultPathOperation||"S"),ar=tr.filters||(sr===!0?["FlateEncode"]:ar),nr=nr||"mm",rr=(""+(rr||"P")).toLowerCase();var hr=tr.putOnlyUsedFonts||!1,dr={},fr={internal:{},__private__:{}};fr.__private__.PubSub=C;var gr="1.3",br=fr.__private__.getPdfVersion=function(){return gr};fr.__private__.setPdfVersion=function(Qr){gr=Qr};var pr={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};fr.__private__.getPageFormats=function(){return pr};var mr=fr.__private__.getPageFormat=function(Qr){return pr[Qr]};ir=ir||"a4";var yr={COMPAT:"compat",ADVANCED:"advanced"},xr=yr.COMPAT;function vr(){this.saveGraphicsState(),en(new Cn(Xn,0,0,-Xn,0,Sl()*Xn).toString()+" cm"),this.setFontSize(this.getFontSize()/Xn),or="n",xr=yr.ADVANCED}function _r(){this.restoreGraphicsState(),or="S",xr=yr.COMPAT}var Er=fr.__private__.combineFontStyleAndFontWeight=function(Qr,bn){if(Qr=="bold"&&bn=="normal"||Qr=="bold"&&bn==400||Qr=="normal"&&bn=="italic"||Qr=="bold"&&bn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return bn&&(Qr=bn==400||bn==="normal"?Qr==="italic"?"italic":"normal":bn!=700&&bn!=="bold"||Qr!=="normal"?(bn==700?"bold":bn)+""+Qr:"bold"),Qr};fr.advancedAPI=function(Qr){var bn=xr===yr.COMPAT;return bn&&vr.call(this),typeof Qr!="function"||(Qr(this),bn&&_r.call(this)),this},fr.compatAPI=function(Qr){var bn=xr===yr.ADVANCED;return bn&&_r.call(this),typeof Qr!="function"||(Qr(this),bn&&vr.call(this)),this},fr.isAdvancedAPI=function(){return xr===yr.ADVANCED};var Tr,Rr=function(Qr){if(xr!==yr.ADVANCED)throw new Error(Qr+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Nr=fr.roundToPrecision=fr.__private__.roundToPrecision=function(Qr,bn){var Wn=er||bn;if(isNaN(Qr)||isNaN(Wn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Qr.toFixed(Wn).replace(/0+$/,"")};Tr=fr.hpf=fr.__private__.hpf=typeof lr=="number"?function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.hpf");return Nr(Qr,lr)}:lr==="smart"?function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.hpf");return Nr(Qr,Qr>-1&&Qr<1?16:5)}:function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.hpf");return Nr(Qr,16)};var Dr=fr.f2=fr.__private__.f2=function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.f2");return Nr(Qr,2)},Ir=fr.__private__.f3=function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.f3");return Nr(Qr,3)},Or=fr.scale=fr.__private__.scale=function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.scale");return xr===yr.COMPAT?Qr*Xn:xr===yr.ADVANCED?Qr:void 0},jr=function(Qr){return xr===yr.COMPAT?Sl()-Qr:xr===yr.ADVANCED?Qr:void 0},Lr=function(Qr){return Or(jr(Qr))};fr.__private__.setPrecision=fr.setPrecision=function(Qr){typeof parseInt(Qr,10)=="number"&&(er=parseInt(Qr,10))};var Cr,wr="00000000000000000000000000000000",Pr=fr.__private__.getFileId=function(){return wr},Ar=fr.__private__.setFileId=function(Qr){return wr=Qr!==void 0&&/^[a-fA-F0-9]{32}$/.test(Qr)?Qr.toUpperCase():wr.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),ur!==null&&(_o=new I(ur.userPermissions,ur.userPassword,ur.ownerPassword,wr)),wr};fr.setFileId=function(Qr){return Ar(Qr),this},fr.getFileId=function(){return Pr()};var Sr=fr.__private__.convertDateToPDFDate=function(Qr){var bn=Qr.getTimezoneOffset(),Wn=bn<0?"+":"-",ts=Math.floor(Math.abs(bn/60)),ms=Math.abs(bn%60),Ls=[Wn,zr(ts),"'",zr(ms),"'"].join("");return["D:",Qr.getFullYear(),zr(Qr.getMonth()+1),zr(Qr.getDate()),zr(Qr.getHours()),zr(Qr.getMinutes()),zr(Qr.getSeconds()),Ls].join("")},Mr=fr.__private__.convertPDFDateToDate=function(Qr){var bn=parseInt(Qr.substr(2,4),10),Wn=parseInt(Qr.substr(6,2),10)-1,ts=parseInt(Qr.substr(8,2),10),ms=parseInt(Qr.substr(10,2),10),Ls=parseInt(Qr.substr(12,2),10),Ws=parseInt(Qr.substr(14,2),10);return new Date(bn,Wn,ts,ms,Ls,Ws,0)},qr=fr.__private__.setCreationDate=function(Qr){var bn;if(Qr===void 0&&(Qr=new Date),Qr instanceof Date)bn=Sr(Qr);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Qr))throw new Error("Invalid argument passed to jsPDF.setCreationDate");bn=Qr}return Cr=bn},$r=fr.__private__.getCreationDate=function(Qr){var bn=Cr;return Qr==="jsDate"&&(bn=Mr(Cr)),bn};fr.setCreationDate=function(Qr){return qr(Qr),this},fr.getCreationDate=function(Qr){return $r(Qr)};var Br,zr=fr.__private__.padd2=function(Qr){return("0"+parseInt(Qr)).slice(-2)},Gr=fr.__private__.padd2Hex=function(Qr){return("00"+(Qr=Qr.toString())).substr(Qr.length)},Vr=0,Xr=[],Ur=[],Fr=0,Kr=[],Zr=[],Jr=!1,tn=Ur,an=function(){Vr=0,Fr=0,Ur=[],Xr=[],Kr=[],us=Gn(),ws=Gn()};fr.__private__.setCustomOutputDestination=function(Qr){Jr=!0,tn=Qr};var dn=function(Qr){Jr||(tn=Qr)};fr.__private__.resetCustomOutputDestination=function(){Jr=!1,tn=Ur};var en=fr.__private__.out=function(Qr){return Qr=Qr.toString(),Fr+=Qr.length+1,tn.push(Qr),tn},rn=fr.__private__.write=function(Qr){return en(arguments.length===1?Qr.toString():Array.prototype.join.call(arguments," "))},sn=fr.__private__.getArrayBuffer=function(Qr){for(var bn=Qr.length,Wn=new ArrayBuffer(bn),ts=new Uint8Array(Wn);bn--;)ts[bn]=Qr.charCodeAt(bn);return Wn},on=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];fr.__private__.getStandardFonts=function(){return on};var fn=tr.fontSize||16;fr.__private__.setFontSize=fr.setFontSize=function(Qr){return fn=xr===yr.ADVANCED?Qr/Xn:Qr,this};var pn,gn=fr.__private__.getFontSize=fr.getFontSize=function(){return xr===yr.COMPAT?fn:fn*Xn},Pn=tr.R2L||!1;fr.__private__.setR2L=fr.setR2L=function(Qr){return Pn=Qr,this},fr.__private__.getR2L=fr.getR2L=function(){return Pn};var In,En=fr.__private__.setZoomMode=function(Qr){var bn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Qr))pn=Qr;else if(isNaN(Qr)){if(bn.indexOf(Qr)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Qr+'" is not recognized.');pn=Qr}else pn=parseInt(Qr,10)};fr.__private__.getZoomMode=function(){return pn};var zn,yn=fr.__private__.setPageMode=function(Qr){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Qr)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Qr+'" is not recognized.');In=Qr};fr.__private__.getPageMode=function(){return In};var Vn=fr.__private__.setLayoutMode=function(Qr){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Qr)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Qr+'" is not recognized.');zn=Qr};fr.__private__.getLayoutMode=function(){return zn},fr.__private__.setDisplayMode=fr.setDisplayMode=function(Qr,bn,Wn){return En(Qr),Vn(bn),yn(Wn),this};var Kn={title:"",subject:"",author:"",keywords:"",creator:""};fr.__private__.getDocumentProperty=function(Qr){if(Object.keys(Kn).indexOf(Qr)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Kn[Qr]},fr.__private__.getDocumentProperties=function(){return Kn},fr.__private__.setDocumentProperties=fr.setProperties=fr.setDocumentProperties=function(Qr){for(var bn in Kn)Kn.hasOwnProperty(bn)&&Qr[bn]&&(Kn[bn]=Qr[bn]);return this},fr.__private__.setDocumentProperty=function(Qr,bn){if(Object.keys(Kn).indexOf(Qr)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Kn[Qr]=bn};var es,Xn,ds,fs,os,Hn={},Ln={},Dn=[],ls={},Ds={},xs={},kn={},Jn=null,is=0,bs=[],Bn=new C(fr),Yn=tr.hotfixes||[],vn={},_n={},Mn=[],Cn=function Qr(bn,Wn,ts,ms,Ls,Ws){if(!(this instanceof Qr))return new Qr(bn,Wn,ts,ms,Ls,Ws);isNaN(bn)&&(bn=1),isNaN(Wn)&&(Wn=0),isNaN(ts)&&(ts=0),isNaN(ms)&&(ms=1),isNaN(Ls)&&(Ls=0),isNaN(Ws)&&(Ws=0),this._matrix=[bn,Wn,ts,ms,Ls,Ws]};Object.defineProperty(Cn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Qr){this._matrix[0]=Qr}}),Object.defineProperty(Cn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Qr){this._matrix[1]=Qr}}),Object.defineProperty(Cn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Qr){this._matrix[2]=Qr}}),Object.defineProperty(Cn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Qr){this._matrix[3]=Qr}}),Object.defineProperty(Cn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Qr){this._matrix[4]=Qr}}),Object.defineProperty(Cn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Qr){this._matrix[5]=Qr}}),Object.defineProperty(Cn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Qr){this._matrix[0]=Qr}}),Object.defineProperty(Cn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Qr){this._matrix[1]=Qr}}),Object.defineProperty(Cn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Qr){this._matrix[2]=Qr}}),Object.defineProperty(Cn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Qr){this._matrix[3]=Qr}}),Object.defineProperty(Cn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Qr){this._matrix[4]=Qr}}),Object.defineProperty(Cn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Qr){this._matrix[5]=Qr}}),Object.defineProperty(Cn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Cn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Cn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Cn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Cn.prototype.join=function(Qr){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Tr).join(Qr)},Cn.prototype.multiply=function(Qr){var bn=Qr.sx*this.sx+Qr.shy*this.shx,Wn=Qr.sx*this.shy+Qr.shy*this.sy,ts=Qr.shx*this.sx+Qr.sy*this.shx,ms=Qr.shx*this.shy+Qr.sy*this.sy,Ls=Qr.tx*this.sx+Qr.ty*this.shx+this.tx,Ws=Qr.tx*this.shy+Qr.ty*this.sy+this.ty;return new Cn(bn,Wn,ts,ms,Ls,Ws)},Cn.prototype.decompose=function(){var Qr=this.sx,bn=this.shy,Wn=this.shx,ts=this.sy,ms=this.tx,Ls=this.ty,Ws=Math.sqrt(Qr*Qr+bn*bn),ga=(Qr/=Ws)*Wn+(bn/=Ws)*ts;Wn-=Qr*ga,ts-=bn*ga;var Wr=Math.sqrt(Wn*Wn+ts*ts);return ga/=Wr,Qr*(ts/=Wr)<bn*(Wn/=Wr)&&(Qr=-Qr,bn=-bn,ga=-ga,Ws=-Ws),{scale:new Cn(Ws,0,0,Wr,0,0),translate:new Cn(1,0,0,1,ms,Ls),rotate:new Cn(Qr,bn,-bn,Qr,0,0),skew:new Cn(1,0,ga,1,0,0)}},Cn.prototype.toString=function(Qr){return this.join(" ")},Cn.prototype.inversed=function(){var Qr=this.sx,bn=this.shy,Wn=this.shx,ts=this.sy,ms=this.tx,Ls=this.ty,Ws=1/(Qr*ts-bn*Wn),ga=ts*Ws,Wr=-bn*Ws,cn=-Wn*Ws,mn=Qr*Ws;return new Cn(ga,Wr,cn,mn,-ga*ms-cn*Ls,-Wr*ms-mn*Ls)},Cn.prototype.applyToPoint=function(Qr){var bn=Qr.x*this.sx+Qr.y*this.shx+this.tx,Wn=Qr.x*this.shy+Qr.y*this.sy+this.ty;return new Zl(bn,Wn)},Cn.prototype.applyToRectangle=function(Qr){var bn=this.applyToPoint(Qr),Wn=this.applyToPoint(new Zl(Qr.x+Qr.w,Qr.y+Qr.h));return new wu(bn.x,bn.y,Wn.x-bn.x,Wn.y-bn.y)},Cn.prototype.clone=function(){var Qr=this.sx,bn=this.shy,Wn=this.shx,ts=this.sy,ms=this.tx,Ls=this.ty;return new Cn(Qr,bn,Wn,ts,ms,Ls)},fr.Matrix=Cn;var Zn=fr.matrixMult=function(Qr,bn){return bn.multiply(Qr)},qn=new Cn(1,0,0,1,0,0);fr.unitMatrix=fr.identityMatrix=qn;var wn=function(Qr,bn){if(!Ds[Qr]){var Wn=(bn instanceof B?"Sh":"P")+(Object.keys(ls).length+1).toString(10);bn.id=Wn,Ds[Qr]=Wn,ls[Wn]=bn,Bn.publish("addPattern",bn)}};fr.ShadingPattern=B,fr.TilingPattern=M,fr.addShadingPattern=function(Qr,bn){return Rr("addShadingPattern()"),wn(Qr,bn),this},fr.beginTilingPattern=function(Qr){Rr("beginTilingPattern()"),Lu(Qr.boundingBox[0],Qr.boundingBox[1],Qr.boundingBox[2]-Qr.boundingBox[0],Qr.boundingBox[3]-Qr.boundingBox[1],Qr.matrix)},fr.endTilingPattern=function(Qr,bn){Rr("endTilingPattern()"),bn.stream=Zr[Br].join(`
`),wn(Qr,bn),Bn.publish("endTilingPattern",bn),Mn.pop().restore()};var On=fr.__private__.newObject=function(){var Qr=Gn();return Qn(Qr,!0),Qr},Gn=fr.__private__.newObjectDeferred=function(){return Vr++,Xr[Vr]=function(){return Fr},Vr},Qn=function(Qr,bn){return bn=typeof bn=="boolean"&&bn,Xr[Qr]=Fr,bn&&en(Qr+" 0 obj"),Qr},$s=fr.__private__.newAdditionalObject=function(){var Qr={objId:Gn(),content:""};return Kr.push(Qr),Qr},us=Gn(),ws=Gn(),As=fr.__private__.decodeColorString=function(Qr){var bn=Qr.split(" ");if(bn.length!==2||bn[1]!=="g"&&bn[1]!=="G")bn.length===5&&(bn[4]==="k"||bn[4]==="K")&&(bn=[(1-bn[0])*(1-bn[3]),(1-bn[1])*(1-bn[3]),(1-bn[2])*(1-bn[3]),"r"]);else{var Wn=parseFloat(bn[0]);bn=[Wn,Wn,Wn,"r"]}for(var ts="#",ms=0;ms<3;ms++)ts+=("0"+Math.floor(255*parseFloat(bn[ms])).toString(16)).slice(-2);return ts},Rs=fr.__private__.encodeColorString=function(Qr){var bn;typeof Qr=="string"&&(Qr={ch1:Qr});var Wn=Qr.ch1,ts=Qr.ch2,ms=Qr.ch3,Ls=Qr.ch4,Ws=Qr.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Wn=="string"&&Wn.charAt(0)!=="#"){var ga=new f(Wn);if(ga.ok)Wn=ga.toHex();else if(!/^\d*\.?\d*$/.test(Wn))throw new Error('Invalid color "'+Wn+'" passed to jsPDF.encodeColorString.')}if(typeof Wn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Wn)&&(Wn="#"+Wn[1]+Wn[1]+Wn[2]+Wn[2]+Wn[3]+Wn[3]),typeof Wn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Wn)){var Wr=parseInt(Wn.substr(1),16);Wn=Wr>>16&255,ts=Wr>>8&255,ms=255&Wr}if(ts===void 0||Ls===void 0&&Wn===ts&&ts===ms)if(typeof Wn=="string")bn=Wn+" "+Ws[0];else switch(Qr.precision){case 2:bn=Dr(Wn/255)+" "+Ws[0];break;case 3:default:bn=Ir(Wn/255)+" "+Ws[0]}else if(Ls===void 0||_typeof(Ls)==="object"){if(Ls&&!isNaN(Ls.a)&&Ls.a===0)return bn=["1.","1.","1.",Ws[1]].join(" ");if(typeof Wn=="string")bn=[Wn,ts,ms,Ws[1]].join(" ");else switch(Qr.precision){case 2:bn=[Dr(Wn/255),Dr(ts/255),Dr(ms/255),Ws[1]].join(" ");break;default:case 3:bn=[Ir(Wn/255),Ir(ts/255),Ir(ms/255),Ws[1]].join(" ")}}else if(typeof Wn=="string")bn=[Wn,ts,ms,Ls,Ws[2]].join(" ");else switch(Qr.precision){case 2:bn=[Dr(Wn),Dr(ts),Dr(ms),Dr(Ls),Ws[2]].join(" ");break;case 3:default:bn=[Ir(Wn),Ir(ts),Ir(ms),Ir(Ls),Ws[2]].join(" ")}return bn},Ms=fr.__private__.getFilters=function(){return ar},Bs=fr.__private__.putStream=function(Qr){var bn=(Qr=Qr||{}).data||"",Wn=Qr.filters||Ms(),ts=Qr.alreadyAppliedFilters||[],ms=Qr.addLength1||!1,Ls=bn.length,Ws=Qr.objectId,ga=function(lo){return lo};if(ur!==null&&Ws===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");ur!==null&&(ga=_o.encryptor(Ws,0));var Wr={};Wn===!0&&(Wn=["FlateEncode"]);var cn=Qr.additionalKeyValues||[],mn=(Wr=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(bn,Wn):{data:bn,reverseChain:[]}).reverseChain+(Array.isArray(ts)?ts.join(" "):ts.toString());if(Wr.data.length!==0&&(cn.push({key:"Length",value:Wr.data.length}),ms===!0&&cn.push({key:"Length1",value:Ls})),mn.length!=0)if(mn.split("/").length-1==1)cn.push({key:"Filter",value:mn});else{cn.push({key:"Filter",value:"["+mn+"]"});for(var Tn=0;Tn<cn.length;Tn+=1)if(cn[Tn].key==="DecodeParms"){for(var hs=[],Es=0;Es<Wr.reverseChain.split("/").length-1;Es+=1)hs.push("null");hs.push(cn[Tn].value),cn[Tn].value="["+hs.join(" ")+"]"}}en("<<");for(var Gs=0;Gs<cn.length;Gs++)en("/"+cn[Gs].key+" "+cn[Gs].value);en(">>"),Wr.data.length!==0&&(en("stream"),en(ga(Wr.data)),en("endstream"))},Zs=fr.__private__.putPage=function(Qr){var bn=Qr.number,Wn=Qr.data,ts=Qr.objId,ms=Qr.contentsObjId;Qn(ts,!0),en("<</Type /Page"),en("/Parent "+Qr.rootDictionaryObjId+" 0 R"),en("/Resources "+Qr.resourceDictionaryObjId+" 0 R"),en("/MediaBox ["+parseFloat(Tr(Qr.mediaBox.bottomLeftX))+" "+parseFloat(Tr(Qr.mediaBox.bottomLeftY))+" "+Tr(Qr.mediaBox.topRightX)+" "+Tr(Qr.mediaBox.topRightY)+"]"),Qr.cropBox!==null&&en("/CropBox ["+Tr(Qr.cropBox.bottomLeftX)+" "+Tr(Qr.cropBox.bottomLeftY)+" "+Tr(Qr.cropBox.topRightX)+" "+Tr(Qr.cropBox.topRightY)+"]"),Qr.bleedBox!==null&&en("/BleedBox ["+Tr(Qr.bleedBox.bottomLeftX)+" "+Tr(Qr.bleedBox.bottomLeftY)+" "+Tr(Qr.bleedBox.topRightX)+" "+Tr(Qr.bleedBox.topRightY)+"]"),Qr.trimBox!==null&&en("/TrimBox ["+Tr(Qr.trimBox.bottomLeftX)+" "+Tr(Qr.trimBox.bottomLeftY)+" "+Tr(Qr.trimBox.topRightX)+" "+Tr(Qr.trimBox.topRightY)+"]"),Qr.artBox!==null&&en("/ArtBox ["+Tr(Qr.artBox.bottomLeftX)+" "+Tr(Qr.artBox.bottomLeftY)+" "+Tr(Qr.artBox.topRightX)+" "+Tr(Qr.artBox.topRightY)+"]"),typeof Qr.userUnit=="number"&&Qr.userUnit!==1&&en("/UserUnit "+Qr.userUnit),Bn.publish("putPage",{objId:ts,pageContext:bs[bn],pageNumber:bn,page:Wn}),en("/Contents "+ms+" 0 R"),en(">>"),en("endobj");var Ls=Wn.join(`
`);return xr===yr.ADVANCED&&(Ls+=`
Q`),Qn(ms,!0),Bs({data:Ls,filters:Ms(),objectId:ms}),en("endobj"),ts},Qs=fr.__private__.putPages=function(){var Qr,bn,Wn=[];for(Qr=1;Qr<=is;Qr++)bs[Qr].objId=Gn(),bs[Qr].contentsObjId=Gn();for(Qr=1;Qr<=is;Qr++)Wn.push(Zs({number:Qr,data:Zr[Qr],objId:bs[Qr].objId,contentsObjId:bs[Qr].contentsObjId,mediaBox:bs[Qr].mediaBox,cropBox:bs[Qr].cropBox,bleedBox:bs[Qr].bleedBox,trimBox:bs[Qr].trimBox,artBox:bs[Qr].artBox,userUnit:bs[Qr].userUnit,rootDictionaryObjId:us,resourceDictionaryObjId:ws}));Qn(us,!0),en("<</Type /Pages");var ts="/Kids [";for(bn=0;bn<is;bn++)ts+=Wn[bn]+" 0 R ";en(ts+"]"),en("/Count "+is),en(">>"),en("endobj"),Bn.publish("postPutPages")},eo=function(Qr){Bn.publish("putFont",{font:Qr,out:en,newObject:On,putStream:Bs}),Qr.isAlreadyPutted!==!0&&(Qr.objectNumber=On(),en("<<"),en("/Type /Font"),en("/BaseFont /"+F(Qr.postScriptName)),en("/Subtype /Type1"),typeof Qr.encoding=="string"&&en("/Encoding /"+Qr.encoding),en("/FirstChar 32"),en("/LastChar 255"),en(">>"),en("endobj"))},ao=function(){for(var Qr in Hn)Hn.hasOwnProperty(Qr)&&(hr===!1||hr===!0&&dr.hasOwnProperty(Qr))&&eo(Hn[Qr])},Un=function(Qr){Qr.objectNumber=On();var bn=[];bn.push({key:"Type",value:"/XObject"}),bn.push({key:"Subtype",value:"/Form"}),bn.push({key:"BBox",value:"["+[Tr(Qr.x),Tr(Qr.y),Tr(Qr.x+Qr.width),Tr(Qr.y+Qr.height)].join(" ")+"]"}),bn.push({key:"Matrix",value:"["+Qr.matrix.toString()+"]"});var Wn=Qr.pages[1].join(`
`);Bs({data:Wn,additionalKeyValues:bn,objectId:Qr.objectNumber}),en("endobj")},Ts=function(){for(var Qr in vn)vn.hasOwnProperty(Qr)&&Un(vn[Qr])},Nn=function(Qr,bn){var Wn,ts=[],ms=1/(bn-1);for(Wn=0;Wn<1;Wn+=ms)ts.push(Wn);if(ts.push(1),Qr[0].offset!=0){var Ls={offset:0,color:Qr[0].color};Qr.unshift(Ls)}if(Qr[Qr.length-1].offset!=1){var Ws={offset:1,color:Qr[Qr.length-1].color};Qr.push(Ws)}for(var ga="",Wr=0,cn=0;cn<ts.length;cn++){for(Wn=ts[cn];Wn>Qr[Wr+1].offset;)Wr++;var mn=Qr[Wr].offset,Tn=(Wn-mn)/(Qr[Wr+1].offset-mn),hs=Qr[Wr].color,Es=Qr[Wr+1].color;ga+=Gr(Math.round((1-Tn)*hs[0]+Tn*Es[0]).toString(16))+Gr(Math.round((1-Tn)*hs[1]+Tn*Es[1]).toString(16))+Gr(Math.round((1-Tn)*hs[2]+Tn*Es[2]).toString(16))}return ga.trim()},ns=function(Qr,bn){bn||(bn=21);var Wn=On(),ts=Nn(Qr.colors,bn),ms=[];ms.push({key:"FunctionType",value:"0"}),ms.push({key:"Domain",value:"[0.0 1.0]"}),ms.push({key:"Size",value:"["+bn+"]"}),ms.push({key:"BitsPerSample",value:"8"}),ms.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ms.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Bs({data:ts,additionalKeyValues:ms,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Wn}),en("endobj"),Qr.objectNumber=On(),en("<< /ShadingType "+Qr.type),en("/ColorSpace /DeviceRGB");var Ls="/Coords ["+Tr(parseFloat(Qr.coords[0]))+" "+Tr(parseFloat(Qr.coords[1]))+" ";Qr.type===2?Ls+=Tr(parseFloat(Qr.coords[2]))+" "+Tr(parseFloat(Qr.coords[3])):Ls+=Tr(parseFloat(Qr.coords[2]))+" "+Tr(parseFloat(Qr.coords[3]))+" "+Tr(parseFloat(Qr.coords[4]))+" "+Tr(parseFloat(Qr.coords[5])),en(Ls+="]"),Qr.matrix&&en("/Matrix ["+Qr.matrix.toString()+"]"),en("/Function "+Wn+" 0 R"),en("/Extend [true true]"),en(">>"),en("endobj")},Ps=function(Qr,bn){var Wn=Gn(),ts=On();bn.push({resourcesOid:Wn,objectOid:ts}),Qr.objectNumber=ts;var ms=[];ms.push({key:"Type",value:"/Pattern"}),ms.push({key:"PatternType",value:"1"}),ms.push({key:"PaintType",value:"1"}),ms.push({key:"TilingType",value:"1"}),ms.push({key:"BBox",value:"["+Qr.boundingBox.map(Tr).join(" ")+"]"}),ms.push({key:"XStep",value:Tr(Qr.xStep)}),ms.push({key:"YStep",value:Tr(Qr.yStep)}),ms.push({key:"Resources",value:Wn+" 0 R"}),Qr.matrix&&ms.push({key:"Matrix",value:"["+Qr.matrix.toString()+"]"}),Bs({data:Qr.stream,additionalKeyValues:ms,objectId:Qr.objectNumber}),en("endobj")},Ss=function(Qr){var bn;for(bn in ls)ls.hasOwnProperty(bn)&&(ls[bn]instanceof B?ns(ls[bn]):ls[bn]instanceof M&&Ps(ls[bn],Qr))},Ks=function(Qr){for(var bn in Qr.objectNumber=On(),en("<<"),Qr)switch(bn){case"opacity":en("/ca "+Dr(Qr[bn]));break;case"stroke-opacity":en("/CA "+Dr(Qr[bn]))}en(">>"),en("endobj")},Is=function(){var Qr;for(Qr in xs)xs.hasOwnProperty(Qr)&&Ks(xs[Qr])},An=function(){for(var Qr in en("/XObject <<"),vn)vn.hasOwnProperty(Qr)&&vn[Qr].objectNumber>=0&&en("/"+Qr+" "+vn[Qr].objectNumber+" 0 R");Bn.publish("putXobjectDict"),en(">>")},Vs=function(){_o.oid=On(),en("<<"),en("/Filter /Standard"),en("/V "+_o.v),en("/R "+_o.r),en("/U <"+_o.toHexString(_o.U)+">"),en("/O <"+_o.toHexString(_o.O)+">"),en("/P "+_o.P),en(">>"),en("endobj")},Fs=function(){for(var Qr in en("/Font <<"),Hn)Hn.hasOwnProperty(Qr)&&(hr===!1||hr===!0&&dr.hasOwnProperty(Qr))&&en("/"+Qr+" "+Hn[Qr].objectNumber+" 0 R");en(">>")},Cs=function(){if(Object.keys(ls).length>0){for(var Qr in en("/Shading <<"),ls)ls.hasOwnProperty(Qr)&&ls[Qr]instanceof B&&ls[Qr].objectNumber>=0&&en("/"+Qr+" "+ls[Qr].objectNumber+" 0 R");Bn.publish("putShadingPatternDict"),en(">>")}},Ns=function(Qr){if(Object.keys(ls).length>0){for(var bn in en("/Pattern <<"),ls)ls.hasOwnProperty(bn)&&ls[bn]instanceof fr.TilingPattern&&ls[bn].objectNumber>=0&&ls[bn].objectNumber<Qr&&en("/"+bn+" "+ls[bn].objectNumber+" 0 R");Bn.publish("putTilingPatternDict"),en(">>")}},Ys=function(){if(Object.keys(xs).length>0){var Qr;for(Qr in en("/ExtGState <<"),xs)xs.hasOwnProperty(Qr)&&xs[Qr].objectNumber>=0&&en("/"+Qr+" "+xs[Qr].objectNumber+" 0 R");Bn.publish("putGStateDict"),en(">>")}},js=function(Qr){Qn(Qr.resourcesOid,!0),en("<<"),en("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Fs(),Cs(),Ns(Qr.objectOid),Ys(),An(),en(">>"),en("endobj")},Js=function(){var Qr=[];ao(),Is(),Ts(),Ss(Qr),Bn.publish("putResources"),Qr.forEach(js),js({resourcesOid:ws,objectOid:Number.MAX_SAFE_INTEGER}),Bn.publish("postPutResources")},to=function(){Bn.publish("putAdditionalObjects");for(var Qr=0;Qr<Kr.length;Qr++){var bn=Kr[Qr];Qn(bn.objId,!0),en(bn.content),en("endobj")}Bn.publish("postPutAdditionalObjects")},mo=function(Qr){Ln[Qr.fontName]=Ln[Qr.fontName]||{},Ln[Qr.fontName][Qr.fontStyle]=Qr.id},Eo=function(Qr,bn,Wn,ts,ms){var Ls={id:"F"+(Object.keys(Hn).length+1).toString(10),postScriptName:Qr,fontName:bn,fontStyle:Wn,encoding:ts,isStandardFont:ms||!1,metadata:{}};return Bn.publish("addFont",{font:Ls,instance:this}),Hn[Ls.id]=Ls,mo(Ls),Ls.id},fo=function(Qr){for(var bn=0,Wn=on.length;bn<Wn;bn++){var ts=Eo.call(this,Qr[bn][0],Qr[bn][1],Qr[bn][2],on[bn][3],!0);hr===!1&&(dr[ts]=!0);var ms=Qr[bn][0].split("-");mo({id:ts,fontName:ms[0],fontStyle:ms[1]||""})}Bn.publish("addFonts",{fonts:Hn,dictionary:Ln})},No=function(Qr){return Qr.foo=function(){try{return Qr.apply(this,arguments)}catch(ts){var bn=ts.stack||"";~bn.indexOf(" at ")&&(bn=bn.split(" at ")[1]);var Wn="Error in function "+bn.split(`
`)[0].split("<")[0]+": "+ts.message;if(!n.console)throw new Error(Wn);n.console.error(Wn,ts),n.alert&&alert(Wn)}},Qr.foo.bar=Qr,Qr.foo},Bo=function(Qr,bn){var Wn,ts,ms,Ls,Ws,ga,Wr,cn,mn;if(ms=(bn=bn||{}).sourceEncoding||"Unicode",Ws=bn.outputEncoding,(bn.autoencode||Ws)&&Hn[es].metadata&&Hn[es].metadata[ms]&&Hn[es].metadata[ms].encoding&&(Ls=Hn[es].metadata[ms].encoding,!Ws&&Hn[es].encoding&&(Ws=Hn[es].encoding),!Ws&&Ls.codePages&&(Ws=Ls.codePages[0]),typeof Ws=="string"&&(Ws=Ls[Ws]),Ws)){for(Wr=!1,ga=[],Wn=0,ts=Qr.length;Wn<ts;Wn++)(cn=Ws[Qr.charCodeAt(Wn)])?ga.push(String.fromCharCode(cn)):ga.push(Qr[Wn]),ga[Wn].charCodeAt(0)>>8&&(Wr=!0);Qr=ga.join("")}for(Wn=Qr.length;Wr===void 0&&Wn!==0;)Qr.charCodeAt(Wn-1)>>8&&(Wr=!0),Wn--;if(!Wr)return Qr;for(ga=bn.noBOM?[]:[254,255],Wn=0,ts=Qr.length;Wn<ts;Wn++){if((mn=(cn=Qr.charCodeAt(Wn))>>8)>>8)throw new Error("Character at position "+Wn+" of string '"+Qr+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ga.push(mn),ga.push(cn-(mn<<8))}return String.fromCharCode.apply(void 0,ga)},go=fr.__private__.pdfEscape=fr.pdfEscape=function(Qr,bn){return Bo(Qr,bn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jo=fr.__private__.beginPage=function(Qr){Zr[++is]=[],bs[is]={objId:0,contentsObjId:0,userUnit:Number(cr),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Qr[0]),topRightY:Number(Qr[1])}},Do(is),dn(Zr[Br])},ro=function(Qr,bn){var Wn,ts,ms;switch(rr=bn||rr,typeof Qr=="string"&&(Wn=mr(Qr.toLowerCase()),Array.isArray(Wn)&&(ts=Wn[0],ms=Wn[1])),Array.isArray(Qr)&&(ts=Qr[0]*Xn,ms=Qr[1]*Xn),isNaN(ts)&&(ts=ir[0],ms=ir[1]),(ts>14400||ms>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ts=Math.min(14400,ts),ms=Math.min(14400,ms)),ir=[ts,ms],rr.substr(0,1)){case"l":ms>ts&&(ir=[ms,ts]);break;case"p":ts>ms&&(ir=[ms,ts])}jo(ir),yu(gu),en(po),_u!==0&&en(_u+" J"),Yl!==0&&en(Yl+" j"),Bn.publish("addPage",{pageNumber:is})},no=function(Qr){Qr>0&&Qr<=is&&(Zr.splice(Qr,1),bs.splice(Qr,1),is--,Br>is&&(Br=is),this.setPage(Br))},Do=function(Qr){Qr>0&&Qr<=is&&(Br=Qr)},ho=fr.__private__.getNumberOfPages=fr.getNumberOfPages=function(){return Zr.length-1},Ko=function(Qr,bn,Wn){var ts,ms=void 0;return Wn=Wn||{},Qr=Qr!==void 0?Qr:Hn[es].fontName,bn=bn!==void 0?bn:Hn[es].fontStyle,ts=Qr.toLowerCase(),Ln[ts]!==void 0&&Ln[ts][bn]!==void 0?ms=Ln[ts][bn]:Ln[Qr]!==void 0&&Ln[Qr][bn]!==void 0?ms=Ln[Qr][bn]:Wn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Qr+"', '"+bn+"'. Refer to getFontList() for available fonts."),ms||Wn.noFallback||(ms=Ln.times[bn])==null&&(ms=Ln.times.normal),ms},Io=fr.__private__.putInfo=function(){var Qr=On(),bn=function(ts){return ts};for(var Wn in ur!==null&&(bn=_o.encryptor(Qr,0)),en("<<"),en("/Producer ("+go(bn("jsPDF "+E.version))+")"),Kn)Kn.hasOwnProperty(Wn)&&Kn[Wn]&&en("/"+Wn.substr(0,1).toUpperCase()+Wn.substr(1)+" ("+go(bn(Kn[Wn]))+")");en("/CreationDate ("+go(bn(Cr))+")"),en(">>"),en("endobj")},Oo=fr.__private__.putCatalog=function(Qr){var bn=(Qr=Qr||{}).rootDictionaryObjId||us;switch(On(),en("<<"),en("/Type /Catalog"),en("/Pages "+bn+" 0 R"),pn||(pn="fullwidth"),pn){case"fullwidth":en("/OpenAction [3 0 R /FitH null]");break;case"fullheight":en("/OpenAction [3 0 R /FitV null]");break;case"fullpage":en("/OpenAction [3 0 R /Fit]");break;case"original":en("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Wn=""+pn;Wn.substr(Wn.length-1)==="%"&&(pn=parseInt(pn)/100),typeof pn=="number"&&en("/OpenAction [3 0 R /XYZ null null "+Dr(pn)+"]")}switch(zn||(zn="continuous"),zn){case"continuous":en("/PageLayout /OneColumn");break;case"single":en("/PageLayout /SinglePage");break;case"two":case"twoleft":en("/PageLayout /TwoColumnLeft");break;case"tworight":en("/PageLayout /TwoColumnRight")}In&&en("/PageMode /"+In),Bn.publish("putCatalog"),en(">>"),en("endobj")},Zo=fr.__private__.putTrailer=function(){en("trailer"),en("<<"),en("/Size "+(Vr+1)),en("/Root "+Vr+" 0 R"),en("/Info "+(Vr-1)+" 0 R"),ur!==null&&en("/Encrypt "+_o.oid+" 0 R"),en("/ID [ <"+wr+"> <"+wr+"> ]"),en(">>")},Al=fr.__private__.putHeader=function(){en("%PDF-"+gr),en("%")},Ul=fr.__private__.putXRef=function(){var Qr="0000000000";en("xref"),en("0 "+(Vr+1)),en("0000000000 65535 f ");for(var bn=1;bn<=Vr;bn++)typeof Xr[bn]=="function"?en((Qr+Xr[bn]()).slice(-10)+" 00000 n "):Xr[bn]!==void 0?en((Qr+Xr[bn]).slice(-10)+" 00000 n "):en("0000000000 00000 n ")},Lo=fr.__private__.buildDocument=function(){an(),dn(Ur),Bn.publish("buildDocument"),Al(),Qs(),to(),Js(),ur!==null&&Vs(),Io(),Oo();var Qr=Fr;return Ul(),Zo(),en("startxref"),en(""+Qr),en("%%EOF"),dn(Zr[Br]),Ur.join(`
`)},zo=fr.__private__.getBlob=function(Qr){return new Blob([sn(Qr)],{type:"application/pdf"})},Rl=fr.output=fr.__private__.output=No(function(Qr,bn){switch(typeof(bn=bn||{})=="string"?bn={filename:bn}:bn.filename=bn.filename||"generated.pdf",Qr){case void 0:return Lo();case"save":fr.save(bn.filename);break;case"arraybuffer":return sn(Lo());case"blob":return zo(Lo());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(zo(Lo()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Wn="",ts=Lo();try{Wn=h(ts)}catch{Wn=h(unescape(encodeURIComponent(ts)))}return"data:application/pdf;filename="+bn.filename+";base64,"+Wn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ms="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ls=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';bn.pdfObjectUrl&&(ms=bn.pdfObjectUrl,Ls="");var Ws='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ms+'"'+Ls+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(bn)+");<\/script></body></html>",ga=n.open();return ga!==null&&ga.document.write(Ws),ga}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(bn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+bn.filename+'" width="500px" height="400px" /></body></html>',cn=n.open();if(cn!==null){cn.document.write(Wr);var mn=this;cn.document.documentElement.querySelector("#pdfViewer").onload=function(){cn.document.title=bn.filename,cn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mn.output("bloburl"))}}return cn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",bn)+'"></iframe></body></html>',hs=n.open();if(hs!==null&&(hs.document.write(Tn),hs.document.title=bn.filename),hs||typeof safari>"u")return hs;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",bn);default:return null}}),Wo=function(Qr){return Array.isArray(Yn)===!0&&Yn.indexOf(Qr)>-1};switch(nr){case"pt":Xn=1;break;case"mm":Xn=72/25.4;break;case"cm":Xn=72/2.54;break;case"in":Xn=72;break;case"px":Xn=Wo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xn=12;break;case"ex":Xn=6;break;default:if(typeof nr!="number")throw new Error("Invalid unit: "+nr);Xn=nr}var _o=null;qr(),Ar();var zl=function(Qr){return ur!==null?_o.encryptor(Qr,0):function(bn){return bn}},_l=fr.__private__.getPageInfo=fr.getPageInfo=function(Qr){if(isNaN(Qr)||Qr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:bs[Qr].objId,pageNumber:Qr,pageContext:bs[Qr]}},io=fr.__private__.getPageInfoByObjId=function(Qr){if(isNaN(Qr)||Qr%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var bn in bs)if(bs[bn].objId===Qr)break;return _l(bn)},Qo=fr.__private__.getCurrentPageInfo=fr.getCurrentPageInfo=function(){return{objId:bs[Br].objId,pageNumber:Br,pageContext:bs[Br]}};fr.addPage=function(){return ro.apply(this,arguments),this},fr.setPage=function(){return Do.apply(this,arguments),dn.call(this,Zr[Br]),this},fr.insertPage=function(Qr){return this.addPage(),this.movePage(Br,Qr),this},fr.movePage=function(Qr,bn){var Wn,ts;if(Qr>bn){Wn=Zr[Qr],ts=bs[Qr];for(var ms=Qr;ms>bn;ms--)Zr[ms]=Zr[ms-1],bs[ms]=bs[ms-1];Zr[bn]=Wn,bs[bn]=ts,this.setPage(bn)}else if(Qr<bn){Wn=Zr[Qr],ts=bs[Qr];for(var Ls=Qr;Ls<bn;Ls++)Zr[Ls]=Zr[Ls+1],bs[Ls]=bs[Ls+1];Zr[bn]=Wn,bs[bn]=ts,this.setPage(bn)}return this},fr.deletePage=function(){return no.apply(this,arguments),this},fr.__private__.text=fr.text=function(Qr,bn,Wn,ts,ms){var Ls,Ws,ga,Wr,cn,mn,Tn,hs,Es,Gs=(ts=ts||{}).scope||this;if(typeof Qr=="number"&&typeof bn=="number"&&(typeof Wn=="string"||Array.isArray(Wn))){var lo=Wn;Wn=bn,bn=Qr,Qr=lo}if(arguments[3]instanceof Cn?(Rr("The transform parameter of text() with a Matrix value"),Es=ms):(ga=arguments[4],Wr=arguments[5],_typeof(Tn=arguments[3])==="object"&&Tn!==null||(typeof ga=="string"&&(Wr=ga,ga=null),typeof Tn=="string"&&(Wr=Tn,Tn=null),typeof Tn=="number"&&(ga=Tn,Tn=null),ts={flags:Tn,angle:ga,align:Wr})),isNaN(bn)||isNaN(Wn)||Qr==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Qr.length===0)return Gs;var yo="",co=!1,So=typeof ts.lineHeightFactor=="number"?ts.lineHeightFactor:xo,ko=Gs.internal.scaleFactor;function hu($o){return $o=$o.split("	").join(Array(ts.TabLen||9).join(" ")),go($o,Tn)}function Jo($o){for(var Mo,Uo=$o.concat(),Go=[],Nu=Uo.length;Nu--;)typeof(Mo=Uo.shift())=="string"?Go.push(Mo):Array.isArray($o)&&(Mo.length===1||Mo[1]===void 0&&Mo[2]===void 0)?Go.push(Mo[0]):Go.push([Mo[0],Mo[1],Mo[2]]);return Go}function Su($o,Mo){var Uo;if(typeof $o=="string")Uo=Mo($o)[0];else if(Array.isArray($o)){for(var Go,Nu,Tp=$o.concat(),dp=[],Gp=Tp.length;Gp--;)typeof(Go=Tp.shift())=="string"?dp.push(Mo(Go)[0]):Array.isArray(Go)&&typeof Go[0]=="string"&&(Nu=Mo(Go[0],Go[1],Go[2]),dp.push([Nu[0],Nu[1],Nu[2]]));Uo=dp}return Uo}var Au=!1,_p=!0;if(typeof Qr=="string")Au=!0;else if(Array.isArray(Qr)){var wp=Qr.concat();Ws=[];for(var np,yl=wp.length;yl--;)(typeof(np=wp.shift())!="string"||Array.isArray(np)&&typeof np[0]!="string")&&(_p=!1);Au=_p}if(Au===!1)throw new Error('Type of text must be string or Array. "'+Qr+'" is not recognized.');typeof Qr=="string"&&(Qr=Qr.match(/[\r?\n]/)?Qr.split(/\r\n|\r|\n/g):[Qr]);var ip=fn/Gs.internal.scaleFactor,sp=ip*(So-1);switch(ts.baseline){case"bottom":Wn-=sp;break;case"top":Wn+=ip-sp;break;case"hanging":Wn+=ip-2*sp;break;case"middle":Wn+=ip/2-sp}if((mn=ts.maxWidth||0)>0&&(typeof Qr=="string"?Qr=Gs.splitTextToSize(Qr,mn):Object.prototype.toString.call(Qr)==="[object Array]"&&(Qr=Qr.reduce(function($o,Mo){return $o.concat(Gs.splitTextToSize(Mo,mn))},[]))),Ls={text:Qr,x:bn,y:Wn,options:ts,mutex:{pdfEscape:go,activeFontKey:es,fonts:Hn,activeFontSize:fn}},Bn.publish("preProcessText",Ls),Qr=Ls.text,ga=(ts=Ls.options).angle,!(Es instanceof Cn)&&ga&&typeof ga=="number"){ga*=Math.PI/180,ts.rotationDirection===0&&(ga=-ga),xr===yr.ADVANCED&&(ga=-ga);var ap=Math.cos(ga),Ep=Math.sin(ga);Es=new Cn(ap,Ep,-Ep,ap,0,0)}else ga&&ga instanceof Cn&&(Es=ga);xr!==yr.ADVANCED||Es||(Es=qn),(cn=ts.charSpace||Dl)!==void 0&&(yo+=Tr(Or(cn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hs=ts.horizontalScale)!==void 0&&(yo+=Tr(100*hs)+` Tz
`),ts.lang;var Ll=-1,Pm=ts.renderingMode!==void 0?ts.renderingMode:ts.stroke,Sp=Gs.internal.getCurrentPageInfo().pageContext;switch(Pm){case 0:case!1:case"fill":Ll=0;break;case 1:case!0:case"stroke":Ll=1;break;case 2:case"fillThenStroke":Ll=2;break;case 3:case"invisible":Ll=3;break;case 4:case"fillAndAddForClipping":Ll=4;break;case 5:case"strokeAndAddPathForClipping":Ll=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ll=6;break;case 7:case"addToPathForClipping":Ll=7}var zp=Sp.usedRenderingMode!==void 0?Sp.usedRenderingMode:-1;Ll!==-1?yo+=Ll+` Tr
`:zp!==-1&&(yo+=`0 Tr
`),Ll!==-1&&(Sp.usedRenderingMode=Ll),Wr=ts.align||"left";var Ql,op=fn*So,qp=Gs.internal.pageSize.getWidth(),Hp=Hn[es];cn=ts.charSpace||Dl,mn=ts.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},ts.flags);var Vu=[],Qu=function($o){return Gs.getStringUnitWidth($o,{font:Hp,charSpace:cn,fontSize:fn,doKerning:!1})*fn/ko};if(Object.prototype.toString.call(Qr)==="[object Array]"){var Fl;Ws=Jo(Qr),Wr!=="left"&&(Ql=Ws.map(Qu));var Tl,Uu=0;if(Wr==="right"){bn-=Ql[0],Qr=[],yl=Ws.length;for(var ju=0;ju<yl;ju++)ju===0?(Tl=ks(bn),Fl=Xs(Wn)):(Tl=Or(Uu-Ql[ju]),Fl=-op),Qr.push([Ws[ju],Tl,Fl]),Uu=Ql[ju]}else if(Wr==="center"){bn-=Ql[0]/2,Qr=[],yl=Ws.length;for(var ku=0;ku<yl;ku++)ku===0?(Tl=ks(bn),Fl=Xs(Wn)):(Tl=Or((Uu-Ql[ku])/2),Fl=-op),Qr.push([Ws[ku],Tl,Fl]),Uu=Ql[ku]}else if(Wr==="left"){Qr=[],yl=Ws.length;for(var lp=0;lp<yl;lp++)Qr.push(Ws[lp])}else if(Wr==="justify"&&Hp.encoding==="Identity-H"){Qr=[],yl=Ws.length,mn=mn!==0?mn:qp;for(var Cu=0,Vo=0;Vo<yl;Vo++)if(Fl=Vo===0?Xs(Wn):-op,Tl=Vo===0?ks(bn):Cu,Vo<yl-1){var Ap=Or((mn-Ql[Vo])/(Ws[Vo].split(" ").length-1)),Cl=Ws[Vo].split(" ");Qr.push([Cl[0]+" ",Tl,Fl]),Cu=0;for(var Jl=1;Jl<Cl.length;Jl++){var cp=(Qu(Cl[Jl-1]+" "+Cl[Jl])-Qu(Cl[Jl]))*ko+Ap;Jl==Cl.length-1?Qr.push([Cl[Jl],cp,0]):Qr.push([Cl[Jl]+" ",cp,0]),Cu-=cp}}else Qr.push([Ws[Vo],Tl,Fl]);Qr.push(["",Cu,0])}else{if(Wr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Qr=[],yl=Ws.length,mn=mn!==0?mn:qp,Vo=0;Vo<yl;Vo++)Fl=Vo===0?Xs(Wn):-op,Tl=Vo===0?ks(bn):0,Vo<yl-1?Vu.push(Tr(Or((mn-Ql[Vo])/(Ws[Vo].split(" ").length-1)))):Vu.push(0),Qr.push([Ws[Vo],Tl,Fl])}}var Wp=typeof ts.R2L=="boolean"?ts.R2L:Pn;Wp===!0&&(Qr=Su(Qr,function($o,Mo,Uo){return[$o.split("").reverse().join(""),Mo,Uo]})),Ls={text:Qr,x:bn,y:Wn,options:ts,mutex:{pdfEscape:go,activeFontKey:es,fonts:Hn,activeFontSize:fn}},Bn.publish("postProcessText",Ls),Qr=Ls.text,co=Ls.mutex.isHex||!1;var Rp=Hn[es].encoding;Rp!=="WinAnsiEncoding"&&Rp!=="StandardEncoding"||(Qr=Su(Qr,function($o,Mo,Uo){return[hu($o),Mo,Uo]})),Ws=Jo(Qr),Qr=[];for(var Ju,_d,zu,_h=0,up=1,_f=Array.isArray(Ws[0])?up:_h,qu="",Pp=function($o,Mo,Uo){var Go="";return Uo instanceof Cn?(Uo=typeof ts.angle=="number"?Zn(Uo,new Cn(1,0,0,1,$o,Mo)):Zn(new Cn(1,0,0,1,$o,Mo),Uo),xr===yr.ADVANCED&&(Uo=Zn(new Cn(1,0,0,-1,0,0),Uo)),Go=Uo.join(" ")+` Tm
`):Go=Tr($o)+" "+Tr(Mo)+` Td
`,Go},_c=0;_c<Ws.length;_c++){switch(qu="",_f){case up:zu=(co?"<":"(")+Ws[_c][0]+(co?">":")"),Ju=parseFloat(Ws[_c][1]),_d=parseFloat(Ws[_c][2]);break;case _h:zu=(co?"<":"(")+Ws[_c]+(co?">":")"),Ju=ks(bn),_d=Xs(Wn)}Vu!==void 0&&Vu[_c]!==void 0&&(qu=Vu[_c]+` Tw
`),_c===0?Qr.push(qu+Pp(Ju,_d,Es)+zu):_f===_h?Qr.push(qu+zu):_f===up&&Qr.push(qu+Pp(Ju,_d,Es)+zu)}Qr=_f===_h?Qr.join(` Tj
T* `):Qr.join(` Tj
`),Qr+=` Tj
`;var eu=`BT
/`;return eu+=es+" "+fn+` Tf
`,eu+=Tr(fn*So)+` TL
`,eu+=Ml+`
`,eu+=yo,eu+=Qr,en(eu+="ET"),dr[es]=!0,Gs};var Kl=fr.__private__.clip=fr.clip=function(Qr){return en(Qr==="evenodd"?"W*":"W"),this};fr.clipEvenOdd=function(){return Kl("evenodd")},fr.__private__.discardPath=fr.discardPath=function(){return en("n"),this};var Il=fr.__private__.isValidStyle=function(Qr){var bn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Qr)!==-1&&(bn=!0),bn};fr.__private__.setDefaultPathOperation=fr.setDefaultPathOperation=function(Qr){return Il(Qr)&&(or=Qr),this};var Du=fr.__private__.getStyle=fr.getStyle=function(Qr){var bn=or;switch(Qr){case"D":case"S":bn="S";break;case"F":bn="f";break;case"FD":case"DF":bn="B";break;case"f":case"f*":case"B":case"B*":bn=Qr}return bn},wl=fr.close=function(){return en("h"),this};fr.stroke=function(){return en("S"),this},fr.fill=function(Qr){return su("f",Qr),this},fr.fillEvenOdd=function(Qr){return su("f*",Qr),this},fr.fillStroke=function(Qr){return su("B",Qr),this},fr.fillStrokeEvenOdd=function(Qr){return su("B*",Qr),this};var su=function(Qr,bn){_typeof(bn)==="object"?lu(bn,Qr):en(Qr)},au=function(Qr){Qr===null||xr===yr.ADVANCED&&Qr===void 0||(Qr=Du(Qr),en(Qr))};function ou(Qr,bn,Wn,ts,ms){var Ls=new M(bn||this.boundingBox,Wn||this.xStep,ts||this.yStep,this.gState,ms||this.matrix);Ls.stream=this.stream;var Ws=Qr+"$$"+this.cloneIndex+++"$$";return wn(Ws,Ls),Ls}var lu=function(Qr,bn){var Wn=Ds[Qr.key],ts=ls[Wn];if(ts instanceof B)en("q"),en(Pu(bn)),ts.gState&&fr.setGState(ts.gState),en(Qr.matrix.toString()+" cm"),en("/"+Wn+" sh"),en("Q");else if(ts instanceof M){var ms=new Cn(1,0,0,-1,0,Sl());Qr.matrix&&(ms=ms.multiply(Qr.matrix||qn),Wn=ou.call(ts,Qr.key,Qr.boundingBox,Qr.xStep,Qr.yStep,ms).id),en("q"),en("/Pattern cs"),en("/"+Wn+" scn"),ts.gState&&fr.setGState(ts.gState),en(bn),en("Q")}},Pu=function(Qr){switch(Qr){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ol=fr.moveTo=function(Qr,bn){return en(Tr(Or(Qr))+" "+Tr(Lr(bn))+" m"),this},El=fr.lineTo=function(Qr,bn){return en(Tr(Or(Qr))+" "+Tr(Lr(bn))+" l"),this},$l=fr.curveTo=function(Qr,bn,Wn,ts,ms,Ls){return en([Tr(Or(Qr)),Tr(Lr(bn)),Tr(Or(Wn)),Tr(Lr(ts)),Tr(Or(ms)),Tr(Lr(Ls)),"c"].join(" ")),this};fr.__private__.line=fr.line=function(Qr,bn,Wn,ts,ms){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||isNaN(ts)||!Il(ms))throw new Error("Invalid arguments passed to jsPDF.line");return xr===yr.COMPAT?this.lines([[Wn-Qr,ts-bn]],Qr,bn,[1,1],ms||"S"):this.lines([[Wn-Qr,ts-bn]],Qr,bn,[1,1]).stroke()},fr.__private__.lines=fr.lines=function(Qr,bn,Wn,ts,ms,Ls){var Ws,ga,Wr,cn,mn,Tn,hs,Es,Gs,lo,yo,co;if(typeof Qr=="number"&&(co=Wn,Wn=bn,bn=Qr,Qr=co),ts=ts||[1,1],Ls=Ls||!1,isNaN(bn)||isNaN(Wn)||!Array.isArray(Qr)||!Array.isArray(ts)||!Il(ms)||typeof Ls!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ol(bn,Wn),Ws=ts[0],ga=ts[1],cn=Qr.length,lo=bn,yo=Wn,Wr=0;Wr<cn;Wr++)(mn=Qr[Wr]).length===2?(lo=mn[0]*Ws+lo,yo=mn[1]*ga+yo,El(lo,yo)):(Tn=mn[0]*Ws+lo,hs=mn[1]*ga+yo,Es=mn[2]*Ws+lo,Gs=mn[3]*ga+yo,lo=mn[4]*Ws+lo,yo=mn[5]*ga+yo,$l(Tn,hs,Es,Gs,lo,yo));return Ls&&wl(),au(ms),this},fr.path=function(Qr){for(var bn=0;bn<Qr.length;bn++){var Wn=Qr[bn],ts=Wn.c;switch(Wn.op){case"m":Ol(ts[0],ts[1]);break;case"l":El(ts[0],ts[1]);break;case"c":$l.apply(this,ts);break;case"h":wl()}}return this},fr.__private__.rect=fr.rect=function(Qr,bn,Wn,ts,ms){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||isNaN(ts)||!Il(ms))throw new Error("Invalid arguments passed to jsPDF.rect");return xr===yr.COMPAT&&(ts=-ts),en([Tr(Or(Qr)),Tr(Lr(bn)),Tr(Or(Wn)),Tr(Or(ts)),"re"].join(" ")),au(ms),this},fr.__private__.triangle=fr.triangle=function(Qr,bn,Wn,ts,ms,Ls,Ws){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||isNaN(ts)||isNaN(ms)||isNaN(Ls)||!Il(Ws))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Wn-Qr,ts-bn],[ms-Wn,Ls-ts],[Qr-ms,bn-Ls]],Qr,bn,[1,1],Ws,!0),this},fr.__private__.roundedRect=fr.roundedRect=function(Qr,bn,Wn,ts,ms,Ls,Ws){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||isNaN(ts)||isNaN(ms)||isNaN(Ls)||!Il(Ws))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ga=4/3*(Math.SQRT2-1);return ms=Math.min(ms,.5*Wn),Ls=Math.min(Ls,.5*ts),this.lines([[Wn-2*ms,0],[ms*ga,0,ms,Ls-Ls*ga,ms,Ls],[0,ts-2*Ls],[0,Ls*ga,-ms*ga,Ls,-ms,Ls],[2*ms-Wn,0],[-ms*ga,0,-ms,-Ls*ga,-ms,-Ls],[0,2*Ls-ts],[0,-Ls*ga,ms*ga,-Ls,ms,-Ls]],Qr+ms,bn,[1,1],Ws,!0),this},fr.__private__.ellipse=fr.ellipse=function(Qr,bn,Wn,ts,ms){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||isNaN(ts)||!Il(ms))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ls=4/3*(Math.SQRT2-1)*Wn,Ws=4/3*(Math.SQRT2-1)*ts;return Ol(Qr+Wn,bn),$l(Qr+Wn,bn-Ws,Qr+Ls,bn-ts,Qr,bn-ts),$l(Qr-Ls,bn-ts,Qr-Wn,bn-Ws,Qr-Wn,bn),$l(Qr-Wn,bn+Ws,Qr-Ls,bn+ts,Qr,bn+ts),$l(Qr+Ls,bn+ts,Qr+Wn,bn+Ws,Qr+Wn,bn),au(ms),this},fr.__private__.circle=fr.circle=function(Qr,bn,Wn,ts){if(isNaN(Qr)||isNaN(bn)||isNaN(Wn)||!Il(ts))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Qr,bn,Wn,Wn,ts)},fr.setFont=function(Qr,bn,Wn){return Wn&&(bn=Er(bn,Wn)),es=Ko(Qr,bn,{disableWarning:!1}),this};var mu=fr.__private__.getFont=fr.getFont=function(){return Hn[Ko.apply(fr,arguments)]};fr.__private__.getFontList=fr.getFontList=function(){var Qr,bn,Wn={};for(Qr in Ln)if(Ln.hasOwnProperty(Qr))for(bn in Wn[Qr]=[],Ln[Qr])Ln[Qr].hasOwnProperty(bn)&&Wn[Qr].push(bn);return Wn},fr.addFont=function(Qr,bn,Wn,ts,ms){var Ls=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ls.indexOf(arguments[3])!==-1?ms=arguments[3]:arguments[3]&&Ls.indexOf(arguments[3])==-1&&(Wn=Er(Wn,ts)),ms=ms||"Identity-H",Eo.call(this,Qr,bn,Wn,ms)};var xo,gu=tr.lineWidth||.200025,cu=fr.__private__.getLineWidth=fr.getLineWidth=function(){return gu},yu=fr.__private__.setLineWidth=fr.setLineWidth=function(Qr){return gu=Qr,en(Tr(Or(Qr))+" w"),this};fr.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Qr,bn){if(Qr=Qr||[],bn=bn||0,isNaN(bn)||!Array.isArray(Qr))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Qr=Qr.map(function(Wn){return Tr(Or(Wn))}).join(" "),bn=Tr(Or(bn)),en("["+Qr+"] "+bn+" d"),this};var bu=fr.__private__.getLineHeight=fr.getLineHeight=function(){return fn*xo};fr.__private__.getLineHeight=fr.getLineHeight=function(){return fn*xo};var xu=fr.__private__.setLineHeightFactor=fr.setLineHeightFactor=function(Qr){return typeof(Qr=Qr||1.15)=="number"&&(xo=Qr),this},_i=fr.__private__.getLineHeightFactor=fr.getLineHeightFactor=function(){return xo};xu(tr.lineHeight);var ks=fr.__private__.getHorizontalCoordinate=function(Qr){return Or(Qr)},Xs=fr.__private__.getVerticalCoordinate=function(Qr){return xr===yr.ADVANCED?Qr:bs[Br].mediaBox.topRightY-bs[Br].mediaBox.bottomLeftY-Or(Qr)},xa=fr.__private__.getHorizontalCoordinateString=fr.getHorizontalCoordinateString=function(Qr){return Tr(ks(Qr))},oo=fr.__private__.getVerticalCoordinateString=fr.getVerticalCoordinateString=function(Qr){return Tr(Xs(Qr))},po=tr.strokeColor||"0 G";fr.__private__.getStrokeColor=fr.getDrawColor=function(){return As(po)},fr.__private__.setStrokeColor=fr.setDrawColor=function(Qr,bn,Wn,ts){return po=Rs({ch1:Qr,ch2:bn,ch3:Wn,ch4:ts,pdfColorType:"draw",precision:2}),en(po),this};var Xl=tr.fillColor||"0 g";fr.__private__.getFillColor=fr.getFillColor=function(){return As(Xl)},fr.__private__.setFillColor=fr.setFillColor=function(Qr,bn,Wn,ts){return Xl=Rs({ch1:Qr,ch2:bn,ch3:Wn,ch4:ts,pdfColorType:"fill",precision:2}),en(Xl),this};var Ml=tr.textColor||"0 g",uu=fr.__private__.getTextColor=fr.getTextColor=function(){return As(Ml)};fr.__private__.setTextColor=fr.setTextColor=function(Qr,bn,Wn,ts){return Ml=Rs({ch1:Qr,ch2:bn,ch3:Wn,ch4:ts,pdfColorType:"text",precision:3}),this};var Dl=tr.charSpace,vu=fr.__private__.getCharSpace=fr.getCharSpace=function(){return parseFloat(Dl||0)};fr.__private__.setCharSpace=fr.setCharSpace=function(Qr){if(isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Dl=Qr,this};var _u=0;fr.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},fr.__private__.setLineCap=fr.setLineCap=function(Qr){var bn=fr.CapJoinStyles[Qr];if(bn===void 0)throw new Error("Line cap style of '"+Qr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _u=bn,en(bn+" J"),this};var Yl=0;fr.__private__.setLineJoin=fr.setLineJoin=function(Qr){var bn=fr.CapJoinStyles[Qr];if(bn===void 0)throw new Error("Line join style of '"+Qr+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=bn,en(bn+" j"),this},fr.__private__.setLineMiterLimit=fr.__private__.setMiterLimit=fr.setLineMiterLimit=fr.setMiterLimit=function(Qr){if(Qr=Qr||0,isNaN(Qr))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return en(Tr(Or(Qr))+" M"),this},fr.GState=j,fr.setGState=function(Qr){(Qr=typeof Qr=="string"?xs[kn[Qr]]:Pl(null,Qr)).equals(Jn)||(en("/"+Qr.id+" gs"),Jn=Qr)};var Pl=function(Qr,bn){if(!Qr||!kn[Qr]){var Wn=!1;for(var ts in xs)if(xs.hasOwnProperty(ts)&&xs[ts].equals(bn)){Wn=!0;break}if(Wn)bn=xs[ts];else{var ms="GS"+(Object.keys(xs).length+1).toString(10);xs[ms]=bn,bn.id=ms}return Qr&&(kn[Qr]=bn.id),Bn.publish("addGState",bn),bn}};fr.addGState=function(Qr,bn){return Pl(Qr,bn),this},fr.saveGraphicsState=function(){return en("q"),Dn.push({key:es,size:fn,color:Ml}),this},fr.restoreGraphicsState=function(){en("Q");var Qr=Dn.pop();return es=Qr.key,fn=Qr.size,Ml=Qr.color,Jn=null,this},fr.setCurrentTransformationMatrix=function(Qr){return en(Qr.toString()+" cm"),this},fr.comment=function(Qr){return en("#"+Qr),this};var Zl=function(Qr,bn){var Wn=Qr||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Wn},set:function(Ls){isNaN(Ls)||(Wn=parseFloat(Ls))}});var ts=bn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ts},set:function(Ls){isNaN(Ls)||(ts=parseFloat(Ls))}});var ms="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ms},set:function(Ls){ms=Ls.toString()}}),this},wu=function(Qr,bn,Wn,ts){Zl.call(this,Qr,bn),this.type="rect";var ms=Wn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ms},set:function(Ws){isNaN(Ws)||(ms=parseFloat(Ws))}});var Ls=ts||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ls},set:function(Ws){isNaN(Ws)||(Ls=parseFloat(Ws))}}),this},Tu=function(){this.page=is,this.currentPage=Br,this.pages=Zr.slice(0),this.pagesContext=bs.slice(0),this.x=ds,this.y=fs,this.matrix=os,this.width=Eu(Br),this.height=Sl(Br),this.outputDestination=tn,this.id="",this.objectNumber=-1};Tu.prototype.restore=function(){is=this.page,Br=this.currentPage,bs=this.pagesContext,Zr=this.pages,ds=this.x,fs=this.y,os=this.matrix,Fu(Br,this.width),Bu(Br,this.height),tn=this.outputDestination};var Lu=function(Qr,bn,Wn,ts,ms){Mn.push(new Tu),is=Br=0,Zr=[],ds=Qr,fs=bn,os=ms,jo([Wn,ts])},rp=function(Qr){if(_n[Qr])Mn.pop().restore();else{var bn=new Tu,Wn="Xo"+(Object.keys(vn).length+1).toString(10);bn.id=Wn,_n[Qr]=Wn,vn[Wn]=bn,Bn.publish("addFormObject",bn),Mn.pop().restore()}};for(var du in fr.beginFormObject=function(Qr,bn,Wn,ts,ms){return Lu(Qr,bn,Wn,ts,ms),this},fr.endFormObject=function(Qr){return rp(Qr),this},fr.doFormObject=function(Qr,bn){var Wn=vn[_n[Qr]];return en("q"),en(bn.toString()+" cm"),en("/"+Wn.id+" Do"),en("Q"),this},fr.getFormObject=function(Qr){var bn=vn[_n[Qr]];return{x:bn.x,y:bn.y,width:bn.width,height:bn.height,matrix:bn.matrix}},fr.save=function(Qr,bn){return Qr=Qr||"generated.pdf",(bn=bn||{}).returnPromise=bn.returnPromise||!1,bn.returnPromise===!1?(l(zo(Lo()),Qr),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Wn,ts){try{var ms=l(zo(Lo()),Qr);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Wn(ms)}catch(Ls){ts(Ls.message)}})},E.API)E.API.hasOwnProperty(du)&&(du==="events"&&E.API.events.length?function(Qr,bn){var Wn,ts,ms;for(ms=bn.length-1;ms!==-1;ms--)Wn=bn[ms][0],ts=bn[ms][1],Qr.subscribe.apply(Qr,[Wn].concat(typeof ts=="function"?[ts]:ts))}(Bn,E.API.events):fr[du]=E.API[du]);var Eu=fr.getPageWidth=function(Qr){return(bs[Qr=Qr||Br].mediaBox.topRightX-bs[Qr].mediaBox.bottomLeftX)/Xn},Fu=fr.setPageWidth=function(Qr,bn){bs[Qr].mediaBox.topRightX=bn*Xn+bs[Qr].mediaBox.bottomLeftX},Sl=fr.getPageHeight=function(Qr){return(bs[Qr=Qr||Br].mediaBox.topRightY-bs[Qr].mediaBox.bottomLeftY)/Xn},Bu=fr.setPageHeight=function(Qr,bn){bs[Qr].mediaBox.topRightY=bn*Xn+bs[Qr].mediaBox.bottomLeftY};return fr.internal={pdfEscape:go,getStyle:Du,getFont:mu,getFontSize:gn,getCharSpace:vu,getTextColor:uu,getLineHeight:bu,getLineHeightFactor:_i,getLineWidth:cu,write:rn,getHorizontalCoordinate:ks,getVerticalCoordinate:Xs,getCoordinateString:xa,getVerticalCoordinateString:oo,collections:{},newObject:On,newAdditionalObject:$s,newObjectDeferred:Gn,newObjectDeferredBegin:Qn,getFilters:Ms,putStream:Bs,events:Bn,scaleFactor:Xn,pageSize:{getWidth:function(){return Eu(Br)},setWidth:function(Qr){Fu(Br,Qr)},getHeight:function(){return Sl(Br)},setHeight:function(Qr){Bu(Br,Qr)}},encryptionOptions:ur,encryption:_o,getEncryptor:zl,output:Rl,getNumberOfPages:ho,pages:Zr,out:en,f2:Dr,f3:Ir,getPageInfo:_l,getPageInfoByObjId:io,getCurrentPageInfo:Qo,getPDFVersion:br,Point:Zl,Rectangle:wu,Matrix:Cn,hasHotfix:Wo},Object.defineProperty(fr.internal.pageSize,"width",{get:function(){return Eu(Br)},set:function(Qr){Fu(Br,Qr)},enumerable:!0,configurable:!0}),Object.defineProperty(fr.internal.pageSize,"height",{get:function(){return Sl(Br)},set:function(Qr){Bu(Br,Qr)},enumerable:!0,configurable:!0}),fo.call(fr,on),es="F1",ro(ir,rr),Bn.publish("initialized"),fr}I.prototype.lsbFirstWord=function(tr){return String.fromCharCode(tr>>0&255,tr>>8&255,tr>>16&255,tr>>24&255)},I.prototype.toHexString=function(tr){return tr.split("").map(function(er){return("0"+(255&er.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(tr){for(var er=[],rr=0;rr<tr.length;rr+=2)er.push(String.fromCharCode(parseInt(tr.substr(rr,2),16)));return er.join("")},I.prototype.processOwnerPassword=function(tr,er){return P(x(er).substr(0,5),tr)},I.prototype.encryptor=function(tr,er){var rr=x(this.encryptionKey+String.fromCharCode(255&tr,tr>>8&255,tr>>16&255,255&er,er>>8&255)).substr(0,10);return function(nr){return P(rr,nr)}},j.prototype.equals=function(tr){var er,rr="id,objectNumber,equals";if(!tr||_typeof(tr)!==_typeof(this))return!1;var nr=0;for(er in this)if(!(rr.indexOf(er)>=0)){if(this.hasOwnProperty(er)&&!tr.hasOwnProperty(er)||this[er]!==tr[er])return!1;nr++}for(er in tr)tr.hasOwnProperty(er)&&rr.indexOf(er)<0&&nr--;return nr===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(tr){return tr.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(tr){return tr.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(tr){return tr.toFixed(2)},z=function(tr){return tr.toFixed(5)};q.__acroform__={};var H=function(tr,er){tr.prototype=Object.create(er.prototype),tr.prototype.constructor=tr},W=function(tr){return tr*D},V=function(tr){var er=new ut,rr=At.internal.getHeight(tr)||0,nr=At.internal.getWidth(tr)||0;return er.BBox=[0,0,Number(U(nr)),Number(U(rr))],er},G=q.__acroform__.setBit=function(tr,er){if(tr=tr||0,er=er||0,isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return tr|=1<<er},Y=q.__acroform__.clearBit=function(tr,er){if(tr=tr||0,er=er||0,isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return tr&=~(1<<er)},J=q.__acroform__.getBit=function(tr,er){if(isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return tr&1<<er?1:0},X=q.__acroform__.getBitForPdf=function(tr,er){if(isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(tr,er-1)},K=q.__acroform__.setBitForPdf=function(tr,er){if(isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(tr,er-1)},Z=q.__acroform__.clearBitForPdf=function(tr,er){if(isNaN(tr)||isNaN(er))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(tr,er-1)},$=q.__acroform__.calculateCoordinates=function(tr,er){var rr=er.internal.getHorizontalCoordinate,nr=er.internal.getVerticalCoordinate,ir=tr[0],sr=tr[1],ar=tr[2],cr=tr[3],lr={};return lr.lowerLeft_X=rr(ir)||0,lr.lowerLeft_Y=nr(sr+cr)||0,lr.upperRight_X=rr(ir+ar)||0,lr.upperRight_Y=nr(sr)||0,[Number(U(lr.lowerLeft_X)),Number(U(lr.lowerLeft_Y)),Number(U(lr.upperRight_X)),Number(U(lr.upperRight_Y))]},Q=function(tr){if(tr.appearanceStreamContent)return tr.appearanceStreamContent;if(tr.V||tr.DV){var er=[],rr=tr._V||tr.DV,nr=tt(tr,rr),ir=tr.scope.internal.getFont(tr.fontName,tr.fontStyle).id;er.push("/Tx BMC"),er.push("q"),er.push("BT"),er.push(tr.scope.__private__.encodeColorString(tr.color)),er.push("/"+ir+" "+U(nr.fontSize)+" Tf"),er.push("1 0 0 1 0 0 Tm"),er.push(nr.text),er.push("ET"),er.push("Q"),er.push("EMC");var sr=V(tr);return sr.scope=tr.scope,sr.stream=er.join(`
`),sr}},tt=function(tr,er){var rr=tr.fontSize===0?tr.maxFontSize:tr.fontSize,nr={text:"",fontSize:""},ir=(er=(er=er.substr(0,1)=="("?er.substr(1):er).substr(er.length-1)==")"?er.substr(0,er.length-1):er).split(" ");ir=tr.multiline?ir.map(function(Ir){return Ir.split(`
`)}):ir.map(function(Ir){return[Ir]});var sr=rr,ar=At.internal.getHeight(tr)||0;ar=ar<0?-ar:ar;var cr=At.internal.getWidth(tr)||0;cr=cr<0?-cr:cr;var lr=function(Ir,Or,jr){if(Ir+1<ir.length){var Lr=Or+" "+ir[Ir+1][0];return et(Lr,tr,jr).width<=cr-4}return!1};sr++;e:for(;sr>0;){er="",sr--;var or,ur,hr=et("3",tr,sr).height,dr=tr.multiline?ar-sr:(ar-hr)/2,fr=dr+=2,gr=0,br=0,pr=0;if(sr<=0){er=`(...) Tj
`,er+="% Width of Text: "+et(er,tr,sr=12).width+", FieldWidth:"+cr+`
`;break}for(var mr="",yr=0,xr=0;xr<ir.length;xr++)if(ir.hasOwnProperty(xr)){var vr=!1;if(ir[xr].length!==1&&pr!==ir[xr].length-1){if((hr+2)*(yr+2)+2>ar)continue e;mr+=ir[xr][pr],vr=!0,br=xr,xr--}else{mr=(mr+=ir[xr][pr]+" ").substr(mr.length-1)==" "?mr.substr(0,mr.length-1):mr;var _r=parseInt(xr),Er=lr(_r,mr,sr),Tr=xr>=ir.length-1;if(Er&&!Tr){mr+=" ",pr=0;continue}if(Er||Tr){if(Tr)br=_r;else if(tr.multiline&&(hr+2)*(yr+2)+2>ar)continue e}else{if(!tr.multiline||(hr+2)*(yr+2)+2>ar)continue e;br=_r}}for(var Rr="",Nr=gr;Nr<=br;Nr++){var Dr=ir[Nr];if(tr.multiline){if(Nr===br){Rr+=Dr[pr]+" ",pr=(pr+1)%Dr.length;continue}if(Nr===gr){Rr+=Dr[Dr.length-1]+" ";continue}}Rr+=Dr[0]+" "}switch(Rr=Rr.substr(Rr.length-1)==" "?Rr.substr(0,Rr.length-1):Rr,ur=et(Rr,tr,sr).width,tr.textAlign){case"right":or=cr-ur-2;break;case"center":or=(cr-ur)/2;break;case"left":default:or=2}er+=U(or)+" "+U(fr)+` Td
`,er+="("+R(Rr)+`) Tj
`,er+=-U(or)+` 0 Td
`,fr=-(sr+2),ur=0,gr=vr?br:br+1,yr++,mr=""}break}return nr.text=er,nr.fontSize=sr,nr},et=function(tr,er,rr){var nr=er.scope.internal.getFont(er.fontName,er.fontStyle),ir=er.scope.getStringUnitWidth(tr,{font:nr,fontSize:parseFloat(rr),charSpace:0})*parseFloat(rr);return{height:er.scope.getStringUnitWidth("3",{font:nr,fontSize:parseFloat(rr),charSpace:0})*parseFloat(rr)*1.5,width:ir}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(tr,er){var rr={type:"reference",object:tr};er.internal.getPageInfo(tr.page).pageContext.annotations.find(function(nr){return nr.type===rr.type&&nr.object===rr.object})===void 0&&er.internal.getPageInfo(tr.page).pageContext.annotations.push(rr)},it=function(tr,er){for(var rr in tr)if(tr.hasOwnProperty(rr)){var nr=rr,ir=tr[rr];er.internal.newObjectDeferredBegin(ir.objId,!0),_typeof(ir)==="object"&&typeof ir.putStream=="function"&&ir.putStream(),delete tr[nr]}},at=function(tr,er){if(er.scope=tr,tr.internal!==void 0&&(tr.internal.acroformPlugin===void 0||tr.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,tr.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),tr.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=tr.internal.scaleFactor,tr.internal.acroformPlugin.acroFormDictionaryRoot=new ht,tr.internal.acroformPlugin.acroFormDictionaryRoot.scope=tr,tr.internal.acroformPlugin.acroFormDictionaryRoot._eventID=tr.internal.events.subscribe("postPutResources",function(){(function(rr){rr.internal.events.unsubscribe(rr.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete rr.internal.acroformPlugin.acroFormDictionaryRoot._eventID,rr.internal.acroformPlugin.printedOut=!0})(tr)}),tr.internal.events.subscribe("buildDocument",function(){(function(rr){rr.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var nr=rr.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var ir in nr)if(nr.hasOwnProperty(ir)){var sr=nr[ir];sr.objId=void 0,sr.hasAnnotation&&nt(sr,rr)}})(tr)}),tr.internal.events.subscribe("putCatalog",function(){(function(rr){if(rr.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");rr.internal.write("/AcroForm "+rr.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(tr)}),tr.internal.events.subscribe("postPutPages",function(rr){(function(nr,ir){var sr=!nr;for(var ar in nr||(ir.internal.newObjectDeferredBegin(ir.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),ir.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),nr=nr||ir.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(nr.hasOwnProperty(ar)){var cr=nr[ar],lr=[],or=cr.Rect;if(cr.Rect&&(cr.Rect=$(cr.Rect,ir)),ir.internal.newObjectDeferredBegin(cr.objId,!0),cr.DA=At.createDefaultAppearanceStream(cr),_typeof(cr)==="object"&&typeof cr.getKeyValueListForStream=="function"&&(lr=cr.getKeyValueListForStream()),cr.Rect=or,cr.hasAppearanceStream&&!cr.appearanceStreamContent){var ur=Q(cr);lr.push({key:"AP",value:"<</N "+ur+">>"}),ir.internal.acroformPlugin.xForms.push(ur)}if(cr.appearanceStreamContent){var hr="";for(var dr in cr.appearanceStreamContent)if(cr.appearanceStreamContent.hasOwnProperty(dr)){var fr=cr.appearanceStreamContent[dr];if(hr+="/"+dr+" ",hr+="<<",Object.keys(fr).length>=1||Array.isArray(fr)){for(var ar in fr)if(fr.hasOwnProperty(ar)){var gr=fr[ar];typeof gr=="function"&&(gr=gr.call(ir,cr)),hr+="/"+ar+" "+gr+" ",ir.internal.acroformPlugin.xForms.indexOf(gr)>=0||ir.internal.acroformPlugin.xForms.push(gr)}}else typeof(gr=fr)=="function"&&(gr=gr.call(ir,cr)),hr+="/"+ar+" "+gr,ir.internal.acroformPlugin.xForms.indexOf(gr)>=0||ir.internal.acroformPlugin.xForms.push(gr);hr+=">>"}lr.push({key:"AP",value:`<<
`+hr+">>"})}ir.internal.putStream({additionalKeyValues:lr,objectId:cr.objId}),ir.internal.out("endobj")}sr&&it(ir.internal.acroformPlugin.xForms,ir)})(rr,tr)}),tr.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(tr,er,rr){var nr=function(ar){return ar};if(Array.isArray(tr)){for(var ir="[",sr=0;sr<tr.length;sr++)switch(sr!==0&&(ir+=" "),_typeof(tr[sr])){case"boolean":case"number":case"object":ir+=tr[sr].toString();break;case"string":tr[sr].substr(0,1)!=="/"?(er!==void 0&&rr&&(nr=rr.internal.getEncryptor(er)),ir+="("+R(nr(tr[sr].toString()))+")"):ir+=tr[sr].toString()}return ir+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(tr,er,rr){var nr=function(ir){return ir};return er!==void 0&&rr&&(nr=rr.internal.getEncryptor(er)),(tr=tr||"").toString(),tr="("+R(nr(tr))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(tr){this._objId=tr}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var tr=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:tr,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var tr=[],er=Object.getOwnPropertyNames(this).filter(function(sr){return sr!="content"&&sr!="appearanceStreamContent"&&sr!="scope"&&sr!="objId"&&sr.substring(0,1)!="_"});for(var rr in er)if(Object.getOwnPropertyDescriptor(this,er[rr]).configurable===!1){var nr=er[rr],ir=this[nr];ir&&(Array.isArray(ir)?tr.push({key:nr,value:ot(ir,this.objId,this.scope)}):ir instanceof ct?(ir.scope=this.scope,tr.push({key:nr,value:ir.objId+" 0 R"})):typeof ir!="function"&&tr.push({key:nr,value:ir}))}return tr};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var tr,er=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return er},set:function(rr){er=rr}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(rr){tr=rr.trim()},get:function(){return tr||null}})};H(ut,ct);var ht=function(){ct.call(this);var tr,er=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return er.length>0?er:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return er}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(tr){var rr=function(nr){return nr};return this.scope&&(rr=this.scope.internal.getEncryptor(this.objId)),"("+R(rr(tr))+")"}},set:function(rr){tr=rr}})};H(ht,ct);var lt=function tr(){ct.call(this);var er=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return er},set:function(mr){if(isNaN(mr))throw new Error('Invalid value "'+mr+'" for attribute F supplied.');er=mr}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(er,3)},set:function(mr){mr?this.F=K(er,3):this.F=Z(er,3)}});var rr=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return rr},set:function(mr){if(isNaN(mr))throw new Error('Invalid value "'+mr+'" for attribute Ff supplied.');rr=mr}});var nr=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(nr.length!==0)return nr},set:function(mr){nr=mr!==void 0?mr:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!nr||isNaN(nr[0])?0:nr[0]},set:function(mr){nr[0]=mr}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!nr||isNaN(nr[1])?0:nr[1]},set:function(mr){nr[1]=mr}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!nr||isNaN(nr[2])?0:nr[2]},set:function(mr){nr[2]=mr}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!nr||isNaN(nr[3])?0:nr[3]},set:function(mr){nr[3]=mr}});var ir="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return ir},set:function(mr){switch(mr){case"/Btn":case"/Tx":case"/Ch":case"/Sig":ir=mr;break;default:throw new Error('Invalid value "'+mr+'" for attribute FT supplied.')}}});var sr=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!sr||sr.length<1){if(this instanceof yt)return;sr="FieldObject"+tr.FieldNum++}var mr=function(yr){return yr};return this.scope&&(mr=this.scope.internal.getEncryptor(this.objId)),"("+R(mr(sr))+")"},set:function(mr){sr=mr.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return sr},set:function(mr){sr=mr}});var ar="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return ar},set:function(mr){ar=mr}});var cr="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return cr},set:function(mr){cr=mr}});var lr=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return lr},set:function(mr){lr=mr}});var or=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return or===void 0?50/D:or},set:function(mr){or=mr}});var ur="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return ur},set:function(mr){ur=mr}});var hr="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!hr||this instanceof yt||this instanceof Nt))return st(hr,this.objId,this.scope)},set:function(mr){mr=mr.toString(),hr=mr}});var dr=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(dr)return this instanceof mt?dr:st(dr,this.objId,this.scope)},set:function(mr){mr=mr.toString(),dr=this instanceof mt?mr:mr.substr(0,1)==="("?T(mr.substr(1,mr.length-2)):T(mr)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(dr.substr(1,dr.length-1)):dr},set:function(mr){mr=mr.toString(),dr=this instanceof mt?"/"+mr:mr}});var fr=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(fr)return fr},set:function(mr){this.V=mr}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(fr)return this instanceof mt?fr:st(fr,this.objId,this.scope)},set:function(mr){mr=mr.toString(),fr=this instanceof mt?mr:mr.substr(0,1)==="("?T(mr.substr(1,mr.length-2)):T(mr)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(fr.substr(1,fr.length-1)):fr},set:function(mr){mr=mr.toString(),fr=this instanceof mt?"/"+mr:mr}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var gr,br=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return br},set:function(mr){mr=!!mr,br=mr}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(gr)return gr},set:function(mr){gr=mr}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(mr){mr?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(mr){mr?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(mr){mr?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var pr=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(pr!==null)return pr},set:function(mr){if([0,1,2].indexOf(mr)===-1)throw new Error('Invalid value "'+mr+'" for attribute Q supplied.');pr=mr}}),Object.defineProperty(this,"textAlign",{get:function(){var mr;switch(pr){case 0:default:mr="left";break;case 1:mr="center";break;case 2:mr="right"}return mr},configurable:!0,enumerable:!0,set:function(mr){switch(mr){case"right":case 2:pr=2;break;case"center":case 1:pr=1;break;case"left":case 0:default:pr=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var tr=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return tr},set:function(rr){tr=rr}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return tr},set:function(rr){tr=rr}});var er=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(er,this.objId,this.scope)},set:function(rr){var nr,ir;ir=[],typeof(nr=rr)=="string"&&(ir=function(sr,ar,cr){cr||(cr=1);for(var lr,or=[];lr=ar.exec(sr);)or.push(lr[cr]);return or}(nr,/\((.*?)\)/g)),er=ir}}),this.getOptions=function(){return er},this.setOptions=function(rr){er=rr,this.sort&&er.sort()},this.addOption=function(rr){rr=(rr=rr||"").toString(),er.push(rr),this.sort&&er.sort()},this.removeOption=function(rr,nr){for(nr=nr||!1,rr=(rr=rr||"").toString();er.indexOf(rr)!==-1&&(er.splice(er.indexOf(rr),1),nr!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(rr){rr?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(rr){this.combo===!0&&(rr?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(rr){rr?(this.Ff=K(this.Ff,20),er.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(rr){rr?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(rr){rr?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(rr){rr?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(rr){rr?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(rr){rr?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(rr){rr?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(rr){rr?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var tr,er={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var rr=function(sr){return sr};if(this.scope&&(rr=this.scope.internal.getEncryptor(this.objId)),Object.keys(er).length!==0){var nr,ir=[];for(nr in ir.push("<<"),er)ir.push("/"+nr+" ("+R(rr(er[nr]))+")");return ir.push(">>"),ir.join(`
`)}},set:function(rr){_typeof(rr)==="object"&&(er=rr)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return er.CA||""},set:function(rr){typeof rr=="string"&&(er.CA=rr)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return tr},set:function(rr){tr=rr}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return tr.substr(1,tr.length-1)},set:function(rr){tr="/"+rr}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var tr=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return tr},set:function(er){tr=er!==void 0?er:[]}})};H(bt,mt);var yt=function(){var tr,er;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return tr},set:function(ir){tr=ir}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return er},set:function(ir){er=ir}});var rr,nr={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var ir=function(cr){return cr};this.scope&&(ir=this.scope.internal.getEncryptor(this.objId));var sr,ar=[];for(sr in ar.push("<<"),nr)ar.push("/"+sr+" ("+R(ir(nr[sr]))+")");return ar.push(">>"),ar.join(`
`)},set:function(ir){_typeof(ir)==="object"&&(nr=ir)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return nr.CA||""},set:function(ir){typeof ir=="string"&&(nr.CA=ir)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return rr},set:function(ir){rr=ir}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return rr.substr(1,rr.length-1)},set:function(ir){rr="/"+ir}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(tr){if(!("createAppearanceStream"in tr)||!("getCA"in tr))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var er in this.Kids)if(this.Kids.hasOwnProperty(er)){var rr=this.Kids[er];rr.appearanceStreamContent=tr.createAppearanceStream(rr.optionName),rr.caption=tr.getCA()}},bt.prototype.createOption=function(tr){var er=new yt;return er.Parent=this,er.optionName=tr,this.Kids.push(er),xt.call(this.scope,er),er};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(er){er?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(er){er?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(er){er?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(er){er?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(er){er?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(er){er?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var tr=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return tr},set:function(er){tr=er}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return tr},set:function(er){Number.isInteger(er)&&(tr=er)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(tr){tr?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[],nr=tr.scope.internal.getFont(tr.fontName,tr.fontStyle).id,ir=tr.scope.__private__.encodeColorString(tr.color),sr=tt(tr,tr.caption);return rr.push("0.749023 g"),rr.push("0 0 "+U(At.internal.getWidth(tr))+" "+U(At.internal.getHeight(tr))+" re"),rr.push("f"),rr.push("BMC"),rr.push("q"),rr.push("0 0 1 rg"),rr.push("/"+nr+" "+U(sr.fontSize)+" Tf "+ir),rr.push("BT"),rr.push(sr.text),rr.push("ET"),rr.push("Q"),rr.push("EMC"),er.stream=rr.join(`
`),er},YesNormal:function(tr){var er=V(tr);er.scope=tr.scope;var rr=tr.scope.internal.getFont(tr.fontName,tr.fontStyle).id,nr=tr.scope.__private__.encodeColorString(tr.color),ir=[],sr=At.internal.getHeight(tr),ar=At.internal.getWidth(tr),cr=tt(tr,tr.caption);return ir.push("1 g"),ir.push("0 0 "+U(ar)+" "+U(sr)+" re"),ir.push("f"),ir.push("q"),ir.push("0 0 1 rg"),ir.push("0 0 "+U(ar-1)+" "+U(sr-1)+" re"),ir.push("W"),ir.push("n"),ir.push("0 g"),ir.push("BT"),ir.push("/"+rr+" "+U(cr.fontSize)+" Tf "+nr),ir.push(cr.text),ir.push("ET"),ir.push("Q"),er.stream=ir.join(`
`),er},OffPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[];return rr.push("0.749023 g"),rr.push("0 0 "+U(At.internal.getWidth(tr))+" "+U(At.internal.getHeight(tr))+" re"),rr.push("f"),er.stream=rr.join(`
`),er}},RadioButton:{Circle:{createAppearanceStream:function(tr){var er={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return er.N[tr]=At.RadioButton.Circle.YesNormal,er.D[tr]=At.RadioButton.Circle.YesPushDown,er},getCA:function(){return"l"},YesNormal:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[],nr=At.internal.getWidth(tr)<=At.internal.getHeight(tr)?At.internal.getWidth(tr)/4:At.internal.getHeight(tr)/4;nr=Number((.9*nr).toFixed(5));var ir=At.internal.Bezier_C,sr=Number((nr*ir).toFixed(5));return rr.push("q"),rr.push("1 0 0 1 "+z(At.internal.getWidth(tr)/2)+" "+z(At.internal.getHeight(tr)/2)+" cm"),rr.push(nr+" 0 m"),rr.push(nr+" "+sr+" "+sr+" "+nr+" 0 "+nr+" c"),rr.push("-"+sr+" "+nr+" -"+nr+" "+sr+" -"+nr+" 0 c"),rr.push("-"+nr+" -"+sr+" -"+sr+" -"+nr+" 0 -"+nr+" c"),rr.push(sr+" -"+nr+" "+nr+" -"+sr+" "+nr+" 0 c"),rr.push("f"),rr.push("Q"),er.stream=rr.join(`
`),er},YesPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[],nr=At.internal.getWidth(tr)<=At.internal.getHeight(tr)?At.internal.getWidth(tr)/4:At.internal.getHeight(tr)/4;nr=Number((.9*nr).toFixed(5));var ir=Number((2*nr).toFixed(5)),sr=Number((ir*At.internal.Bezier_C).toFixed(5)),ar=Number((nr*At.internal.Bezier_C).toFixed(5));return rr.push("0.749023 g"),rr.push("q"),rr.push("1 0 0 1 "+z(At.internal.getWidth(tr)/2)+" "+z(At.internal.getHeight(tr)/2)+" cm"),rr.push(ir+" 0 m"),rr.push(ir+" "+sr+" "+sr+" "+ir+" 0 "+ir+" c"),rr.push("-"+sr+" "+ir+" -"+ir+" "+sr+" -"+ir+" 0 c"),rr.push("-"+ir+" -"+sr+" -"+sr+" -"+ir+" 0 -"+ir+" c"),rr.push(sr+" -"+ir+" "+ir+" -"+sr+" "+ir+" 0 c"),rr.push("f"),rr.push("Q"),rr.push("0 g"),rr.push("q"),rr.push("1 0 0 1 "+z(At.internal.getWidth(tr)/2)+" "+z(At.internal.getHeight(tr)/2)+" cm"),rr.push(nr+" 0 m"),rr.push(nr+" "+ar+" "+ar+" "+nr+" 0 "+nr+" c"),rr.push("-"+ar+" "+nr+" -"+nr+" "+ar+" -"+nr+" 0 c"),rr.push("-"+nr+" -"+ar+" -"+ar+" -"+nr+" 0 -"+nr+" c"),rr.push(ar+" -"+nr+" "+nr+" -"+ar+" "+nr+" 0 c"),rr.push("f"),rr.push("Q"),er.stream=rr.join(`
`),er},OffPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[],nr=At.internal.getWidth(tr)<=At.internal.getHeight(tr)?At.internal.getWidth(tr)/4:At.internal.getHeight(tr)/4;nr=Number((.9*nr).toFixed(5));var ir=Number((2*nr).toFixed(5)),sr=Number((ir*At.internal.Bezier_C).toFixed(5));return rr.push("0.749023 g"),rr.push("q"),rr.push("1 0 0 1 "+z(At.internal.getWidth(tr)/2)+" "+z(At.internal.getHeight(tr)/2)+" cm"),rr.push(ir+" 0 m"),rr.push(ir+" "+sr+" "+sr+" "+ir+" 0 "+ir+" c"),rr.push("-"+sr+" "+ir+" -"+ir+" "+sr+" -"+ir+" 0 c"),rr.push("-"+ir+" -"+sr+" -"+sr+" -"+ir+" 0 -"+ir+" c"),rr.push(sr+" -"+ir+" "+ir+" -"+sr+" "+ir+" 0 c"),rr.push("f"),rr.push("Q"),er.stream=rr.join(`
`),er}},Cross:{createAppearanceStream:function(tr){var er={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return er.N[tr]=At.RadioButton.Cross.YesNormal,er.D[tr]=At.RadioButton.Cross.YesPushDown,er},getCA:function(){return"8"},YesNormal:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[],nr=At.internal.calculateCross(tr);return rr.push("q"),rr.push("1 1 "+U(At.internal.getWidth(tr)-2)+" "+U(At.internal.getHeight(tr)-2)+" re"),rr.push("W"),rr.push("n"),rr.push(U(nr.x1.x)+" "+U(nr.x1.y)+" m"),rr.push(U(nr.x2.x)+" "+U(nr.x2.y)+" l"),rr.push(U(nr.x4.x)+" "+U(nr.x4.y)+" m"),rr.push(U(nr.x3.x)+" "+U(nr.x3.y)+" l"),rr.push("s"),rr.push("Q"),er.stream=rr.join(`
`),er},YesPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=At.internal.calculateCross(tr),nr=[];return nr.push("0.749023 g"),nr.push("0 0 "+U(At.internal.getWidth(tr))+" "+U(At.internal.getHeight(tr))+" re"),nr.push("f"),nr.push("q"),nr.push("1 1 "+U(At.internal.getWidth(tr)-2)+" "+U(At.internal.getHeight(tr)-2)+" re"),nr.push("W"),nr.push("n"),nr.push(U(rr.x1.x)+" "+U(rr.x1.y)+" m"),nr.push(U(rr.x2.x)+" "+U(rr.x2.y)+" l"),nr.push(U(rr.x4.x)+" "+U(rr.x4.y)+" m"),nr.push(U(rr.x3.x)+" "+U(rr.x3.y)+" l"),nr.push("s"),nr.push("Q"),er.stream=nr.join(`
`),er},OffPushDown:function(tr){var er=V(tr);er.scope=tr.scope;var rr=[];return rr.push("0.749023 g"),rr.push("0 0 "+U(At.internal.getWidth(tr))+" "+U(At.internal.getHeight(tr))+" re"),rr.push("f"),er.stream=rr.join(`
`),er}}},createDefaultAppearanceStream:function(tr){var er=tr.scope.internal.getFont(tr.fontName,tr.fontStyle).id,rr=tr.scope.__private__.encodeColorString(tr.color);return"/"+er+" "+tr.fontSize+" Tf "+rr}};At.internal={Bezier_C:.551915024494,calculateCross:function(tr){var er=At.internal.getWidth(tr),rr=At.internal.getHeight(tr),nr=Math.min(er,rr);return{x1:{x:(er-nr)/2,y:(rr-nr)/2+nr},x2:{x:(er-nr)/2+nr,y:(rr-nr)/2},x3:{x:(er-nr)/2,y:(rr-nr)/2},x4:{x:(er-nr)/2+nr,y:(rr-nr)/2+nr}}}},At.internal.getWidth=function(tr){var er=0;return _typeof(tr)==="object"&&(er=W(tr.Rect[2])),er},At.internal.getHeight=function(tr){var er=0;return _typeof(tr)==="object"&&(er=W(tr.Rect[3])),er};var xt=q.addField=function(tr){if(at(this,tr),!(tr instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var er;return(er=tr).scope.internal.acroformPlugin.printedOut&&(er.scope.internal.acroformPlugin.printedOut=!1,er.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),er.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(er),tr.page=tr.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};var St=E.AcroForm;function _t(tr){return tr.reduce(function(er,rr,nr){return er[rr]=nr,er},{})}(function(tr){tr.__addimage__={};var er="UNKNOWN",rr={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},nr=tr.__addimage__.getImageFileTypeByImageData=function(Ir,Or){var jr,Lr,Cr,wr,Pr,Ar=er;if((Or=Or||er)==="RGBA"||Ir.data!==void 0&&Ir.data instanceof Uint8ClampedArray&&"height"in Ir&&"width"in Ir)return"RGBA";if(Er(Ir))for(Pr in rr)for(Cr=rr[Pr],jr=0;jr<Cr.length;jr+=1){for(wr=!0,Lr=0;Lr<Cr[jr].length;Lr+=1)if(Cr[jr][Lr]!==void 0&&Cr[jr][Lr]!==Ir[Lr]){wr=!1;break}if(wr===!0){Ar=Pr;break}}else for(Pr in rr)for(Cr=rr[Pr],jr=0;jr<Cr.length;jr+=1){for(wr=!0,Lr=0;Lr<Cr[jr].length;Lr+=1)if(Cr[jr][Lr]!==void 0&&Cr[jr][Lr]!==Ir.charCodeAt(Lr)){wr=!1;break}if(wr===!0){Ar=Pr;break}}return Ar===er&&Or!==er&&(Ar=Or),Ar},ir=function Ir(Or){for(var jr=this.internal.write,Lr=this.internal.putStream,Cr=(0,this.internal.getFilters)();Cr.indexOf("FlateEncode")!==-1;)Cr.splice(Cr.indexOf("FlateEncode"),1);Or.objectId=this.internal.newObject();var wr=[];if(wr.push({key:"Type",value:"/XObject"}),wr.push({key:"Subtype",value:"/Image"}),wr.push({key:"Width",value:Or.width}),wr.push({key:"Height",value:Or.height}),Or.colorSpace===pr.INDEXED?wr.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Or.palette.length/3-1)+" "+("sMask"in Or&&Or.sMask!==void 0?Or.objectId+2:Or.objectId+1)+" 0 R]"}):(wr.push({key:"ColorSpace",value:"/"+Or.colorSpace}),Or.colorSpace===pr.DEVICE_CMYK&&wr.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),wr.push({key:"BitsPerComponent",value:Or.bitsPerComponent}),"decodeParameters"in Or&&Or.decodeParameters!==void 0&&wr.push({key:"DecodeParms",value:"<<"+Or.decodeParameters+">>"}),"transparency"in Or&&Array.isArray(Or.transparency)){for(var Pr="",Ar=0,Sr=Or.transparency.length;Ar<Sr;Ar++)Pr+=Or.transparency[Ar]+" "+Or.transparency[Ar]+" ";wr.push({key:"Mask",value:"["+Pr+"]"})}Or.sMask!==void 0&&wr.push({key:"SMask",value:Or.objectId+1+" 0 R"});var Mr=Or.filter!==void 0?["/"+Or.filter]:void 0;if(Lr({data:Or.data,additionalKeyValues:wr,alreadyAppliedFilters:Mr,objectId:Or.objectId}),jr("endobj"),"sMask"in Or&&Or.sMask!==void 0){var qr="/Predictor "+Or.predictor+" /Colors 1 /BitsPerComponent "+Or.bitsPerComponent+" /Columns "+Or.width,$r={width:Or.width,height:Or.height,colorSpace:"DeviceGray",bitsPerComponent:Or.bitsPerComponent,decodeParameters:qr,data:Or.sMask};"filter"in Or&&($r.filter=Or.filter),Ir.call(this,$r)}if(Or.colorSpace===pr.INDEXED){var Br=this.internal.newObject();Lr({data:Rr(new Uint8Array(Or.palette)),objectId:Br}),jr("endobj")}},sr=function(){var Ir=this.internal.collections.addImage_images;for(var Or in Ir)ir.call(this,Ir[Or])},ar=function(){var Ir,Or=this.internal.collections.addImage_images,jr=this.internal.write;for(var Lr in Or)jr("/I"+(Ir=Or[Lr]).index,Ir.objectId,"0","R")},cr=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",sr),this.internal.events.subscribe("putXobjectDict",ar))},lr=function(){var Ir=this.internal.collections.addImage_images;return cr.call(this),Ir},or=function(){return Object.keys(this.internal.collections.addImage_images).length},ur=function(Ir){return typeof tr["process"+Ir.toUpperCase()]=="function"},hr=function(Ir){return _typeof(Ir)==="object"&&Ir.nodeType===1},dr=function(Ir,Or){if(Ir.nodeName==="IMG"&&Ir.hasAttribute("src")){var jr=""+Ir.getAttribute("src");if(jr.indexOf("data:image/")===0)return u(unescape(jr).split("base64,").pop());var Lr=tr.loadFile(jr,!0);if(Lr!==void 0)return Lr}if(Ir.nodeName==="CANVAS"){if(Ir.width===0||Ir.height===0)throw new Error("Given canvas must have data. Canvas width: "+Ir.width+", height: "+Ir.height);var Cr;switch(Or){case"PNG":Cr="image/png";break;case"WEBP":Cr="image/webp";break;case"JPEG":case"JPG":default:Cr="image/jpeg"}return u(Ir.toDataURL(Cr,1).split("base64,").pop())}},fr=function(Ir){var Or=this.internal.collections.addImage_images;if(Or){for(var jr in Or)if(Ir===Or[jr].alias)return Or[jr]}},gr=function(Ir,Or,jr){return Ir||Or||(Ir=-96,Or=-96),Ir<0&&(Ir=-1*jr.width*72/Ir/this.internal.scaleFactor),Or<0&&(Or=-1*jr.height*72/Or/this.internal.scaleFactor),Ir===0&&(Ir=Or*jr.width/jr.height),Or===0&&(Or=Ir*jr.height/jr.width),[Ir,Or]},br=function(Ir,Or,jr,Lr,Cr,wr){var Pr=gr.call(this,jr,Lr,Cr),Ar=this.internal.getCoordinateString,Sr=this.internal.getVerticalCoordinateString,Mr=lr.call(this);if(jr=Pr[0],Lr=Pr[1],Mr[Cr.index]=Cr,wr){wr*=Math.PI/180;var qr=Math.cos(wr),$r=Math.sin(wr),Br=function(Gr){return Gr.toFixed(4)},zr=[Br(qr),Br($r),Br(-1*$r),Br(qr),0,0,"cm"]}this.internal.write("q"),wr?(this.internal.write([1,"0","0",1,Ar(Ir),Sr(Or+Lr),"cm"].join(" ")),this.internal.write(zr.join(" ")),this.internal.write([Ar(jr),"0","0",Ar(Lr),"0","0","cm"].join(" "))):this.internal.write([Ar(jr),"0","0",Ar(Lr),Ar(Ir),Sr(Or+Lr),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Cr.index+" Do"),this.internal.write("Q")},pr=tr.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};tr.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var mr=tr.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},yr=tr.__addimage__.sHashCode=function(Ir){var Or,jr,Lr=0;if(typeof Ir=="string")for(jr=Ir.length,Or=0;Or<jr;Or++)Lr=(Lr<<5)-Lr+Ir.charCodeAt(Or),Lr|=0;else if(Er(Ir))for(jr=Ir.byteLength/2,Or=0;Or<jr;Or++)Lr=(Lr<<5)-Lr+Ir[Or],Lr|=0;return Lr},xr=tr.__addimage__.validateStringAsBase64=function(Ir){(Ir=Ir||"").toString().trim();var Or=!0;return Ir.length===0&&(Or=!1),Ir.length%4!=0&&(Or=!1),/^[A-Za-z0-9+/]+$/.test(Ir.substr(0,Ir.length-2))===!1&&(Or=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Ir.substr(-2))===!1&&(Or=!1),Or},vr=tr.__addimage__.extractImageFromDataUrl=function(Ir){var Or=(Ir=Ir||"").split("base64,"),jr=null;if(Or.length===2){var Lr=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Or[0]);Array.isArray(Lr)&&(jr={mimeType:Lr[1],charset:Lr[2],data:Or[1]})}return jr},_r=tr.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};tr.__addimage__.isArrayBuffer=function(Ir){return _r()&&Ir instanceof ArrayBuffer};var Er=tr.__addimage__.isArrayBufferView=function(Ir){return _r()&&typeof Uint32Array<"u"&&(Ir instanceof Int8Array||Ir instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Ir instanceof Uint8ClampedArray||Ir instanceof Int16Array||Ir instanceof Uint16Array||Ir instanceof Int32Array||Ir instanceof Uint32Array||Ir instanceof Float32Array||Ir instanceof Float64Array)},Tr=tr.__addimage__.binaryStringToUint8Array=function(Ir){for(var Or=Ir.length,jr=new Uint8Array(Or),Lr=0;Lr<Or;Lr++)jr[Lr]=Ir.charCodeAt(Lr);return jr},Rr=tr.__addimage__.arrayBufferToBinaryString=function(Ir){for(var Or="",jr=Er(Ir)?Ir:new Uint8Array(Ir),Lr=0;Lr<jr.length;Lr+=8192)Or+=String.fromCharCode.apply(null,jr.subarray(Lr,Lr+8192));return Or};tr.addImage=function(){var Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr;if(typeof arguments[1]=="number"?(Or=er,jr=arguments[1],Lr=arguments[2],Cr=arguments[3],wr=arguments[4],Pr=arguments[5],Ar=arguments[6],Sr=arguments[7]):(Or=arguments[1],jr=arguments[2],Lr=arguments[3],Cr=arguments[4],wr=arguments[5],Pr=arguments[6],Ar=arguments[7],Sr=arguments[8]),_typeof(Ir=arguments[0])==="object"&&!hr(Ir)&&"imageData"in Ir){var Mr=Ir;Ir=Mr.imageData,Or=Mr.format||Or||er,jr=Mr.x||jr||0,Lr=Mr.y||Lr||0,Cr=Mr.w||Mr.width||Cr,wr=Mr.h||Mr.height||wr,Pr=Mr.alias||Pr,Ar=Mr.compression||Ar,Sr=Mr.rotation||Mr.angle||Sr}var qr=this.internal.getFilters();if(Ar===void 0&&qr.indexOf("FlateEncode")!==-1&&(Ar="SLOW"),isNaN(jr)||isNaN(Lr))throw new Error("Invalid coordinates passed to jsPDF.addImage");cr.call(this);var $r=Nr.call(this,Ir,Or,Pr,Ar);return br.call(this,jr,Lr,Cr,wr,$r,Sr),this};var Nr=function(Ir,Or,jr,Lr){var Cr,wr,Pr;if(typeof Ir=="string"&&nr(Ir)===er){Ir=unescape(Ir);var Ar=Dr(Ir,!1);(Ar!==""||(Ar=tr.loadFile(Ir,!0))!==void 0)&&(Ir=Ar)}if(hr(Ir)&&(Ir=dr(Ir,Or)),Or=nr(Ir,Or),!ur(Or))throw new Error("addImage does not support files of type '"+Or+"', please ensure that a plugin for '"+Or+"' support is added.");if(((Pr=jr)==null||Pr.length===0)&&(jr=function(Sr){return typeof Sr=="string"||Er(Sr)?yr(Sr):Er(Sr.data)?yr(Sr.data):null}(Ir)),(Cr=fr.call(this,jr))||(_r()&&(Ir instanceof Uint8Array||Or==="RGBA"||(wr=Ir,Ir=Tr(Ir))),Cr=this["process"+Or.toUpperCase()](Ir,or.call(this),jr,function(Sr){return Sr&&typeof Sr=="string"&&(Sr=Sr.toUpperCase()),Sr in tr.image_compression?Sr:mr.NONE}(Lr),wr)),!Cr)throw new Error("An unknown error occurred whilst processing the image.");return Cr},Dr=tr.__addimage__.convertBase64ToBinaryString=function(Ir,Or){var jr;Or=typeof Or!="boolean"||Or;var Lr,Cr="";if(typeof Ir=="string"){Lr=(jr=vr(Ir))!==null?jr.data:Ir;try{Cr=u(Lr)}catch(wr){if(Or)throw xr(Lr)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+wr.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Cr};tr.getImageProperties=function(Ir){var Or,jr,Lr="";if(hr(Ir)&&(Ir=dr(Ir)),typeof Ir=="string"&&nr(Ir)===er&&((Lr=Dr(Ir,!1))===""&&(Lr=tr.loadFile(Ir)||""),Ir=Lr),jr=nr(Ir),!ur(jr))throw new Error("addImage does not support files of type '"+jr+"', please ensure that a plugin for '"+jr+"' support is added.");if(!_r()||Ir instanceof Uint8Array||(Ir=Tr(Ir)),!(Or=this["process"+jr.toUpperCase()](Ir)))throw new Error("An unknown error occurred whilst processing the image");return Or.fileType=jr,Or}})(E.API),function(tr){var er=function(rr){if(rr!==void 0&&rr!="")return!0};E.API.events.push(["addPage",function(rr){this.internal.getPageInfo(rr.pageNumber).pageContext.annotations=[]}]),tr.events.push(["putPage",function(rr){for(var nr,ir,sr,ar=this.internal.getCoordinateString,cr=this.internal.getVerticalCoordinateString,lr=this.internal.getPageInfoByObjId(rr.objId),or=rr.pageContext.annotations,ur=!1,hr=0;hr<or.length&&!ur;hr++)switch((nr=or[hr]).type){case"link":(er(nr.options.url)||er(nr.options.pageNumber))&&(ur=!0);break;case"reference":case"text":case"freetext":ur=!0}if(ur!=0){this.internal.write("/Annots [");for(var dr=0;dr<or.length;dr++){nr=or[dr];var fr=this.internal.pdfEscape,gr=this.internal.getEncryptor(rr.objId);switch(nr.type){case"reference":this.internal.write(" "+nr.object.objId+" 0 R ");break;case"text":var br=this.internal.newAdditionalObject(),pr=this.internal.newAdditionalObject(),mr=this.internal.getEncryptor(br.objId),yr=nr.title||"Note";sr="<</Type /Annot /Subtype /Text "+(ir="/Rect ["+ar(nr.bounds.x)+" "+cr(nr.bounds.y+nr.bounds.h)+" "+ar(nr.bounds.x+nr.bounds.w)+" "+cr(nr.bounds.y)+"] ")+"/Contents ("+fr(mr(nr.contents))+")",sr+=" /Popup "+pr.objId+" 0 R",sr+=" /P "+lr.objId+" 0 R",sr+=" /T ("+fr(mr(yr))+") >>",br.content=sr;var xr=br.objId+" 0 R";sr="<</Type /Annot /Subtype /Popup "+(ir="/Rect ["+ar(nr.bounds.x+30)+" "+cr(nr.bounds.y+nr.bounds.h)+" "+ar(nr.bounds.x+nr.bounds.w+30)+" "+cr(nr.bounds.y)+"] ")+" /Parent "+xr,nr.open&&(sr+=" /Open true"),sr+=" >>",pr.content=sr,this.internal.write(br.objId,"0 R",pr.objId,"0 R");break;case"freetext":ir="/Rect ["+ar(nr.bounds.x)+" "+cr(nr.bounds.y)+" "+ar(nr.bounds.x+nr.bounds.w)+" "+cr(nr.bounds.y+nr.bounds.h)+"] ";var vr=nr.color||"#000000";sr="<</Type /Annot /Subtype /FreeText "+ir+"/Contents ("+fr(gr(nr.contents))+")",sr+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+vr+")",sr+=" /Border [0 0 0]",sr+=" >>",this.internal.write(sr);break;case"link":if(nr.options.name){var _r=this.annotations._nameMap[nr.options.name];nr.options.pageNumber=_r.page,nr.options.top=_r.y}else nr.options.top||(nr.options.top=0);if(ir="/Rect ["+nr.finalBounds.x+" "+nr.finalBounds.y+" "+nr.finalBounds.w+" "+nr.finalBounds.h+"] ",sr="",nr.options.url)sr="<</Type /Annot /Subtype /Link "+ir+"/Border [0 0 0] /A <</S /URI /URI ("+fr(gr(nr.options.url))+") >>";else if(nr.options.pageNumber)switch(sr="<</Type /Annot /Subtype /Link "+ir+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(nr.options.pageNumber).objId+" 0 R",nr.options.magFactor=nr.options.magFactor||"XYZ",nr.options.magFactor){case"Fit":sr+=" /Fit]";break;case"FitH":sr+=" /FitH "+nr.options.top+"]";break;case"FitV":nr.options.left=nr.options.left||0,sr+=" /FitV "+nr.options.left+"]";break;case"XYZ":default:var Er=cr(nr.options.top);nr.options.left=nr.options.left||0,nr.options.zoom===void 0&&(nr.options.zoom=0),sr+=" /XYZ "+nr.options.left+" "+Er+" "+nr.options.zoom+"]"}sr!=""&&(sr+=" >>",this.internal.write(sr))}}this.internal.write("]")}}]),tr.createAnnotation=function(rr){var nr=this.internal.getCurrentPageInfo();switch(rr.type){case"link":this.link(rr.bounds.x,rr.bounds.y,rr.bounds.w,rr.bounds.h,rr);break;case"text":case"freetext":nr.pageContext.annotations.push(rr)}},tr.link=function(rr,nr,ir,sr,ar){var cr=this.internal.getCurrentPageInfo(),lr=this.internal.getCoordinateString,or=this.internal.getVerticalCoordinateString;cr.pageContext.annotations.push({finalBounds:{x:lr(rr),y:or(nr),w:lr(rr+ir),h:or(nr+sr)},options:ar,type:"link"})},tr.textWithLink=function(rr,nr,ir,sr){var ar,cr,lr=this.getTextWidth(rr),or=this.internal.getLineHeight()/this.internal.scaleFactor;if(sr.maxWidth!==void 0){cr=sr.maxWidth;var ur=this.splitTextToSize(rr,cr).length;ar=Math.ceil(or*ur)}else cr=lr,ar=or;return this.text(rr,nr,ir,sr),ir+=.2*or,sr.align==="center"&&(nr-=lr/2),sr.align==="right"&&(nr-=lr),this.link(nr,ir-or,cr,ar,sr),lr},tr.getTextWidth=function(rr){var nr=this.internal.getFontSize();return this.getStringUnitWidth(rr)*nr/this.internal.scaleFactor}}(E.API),function(tr){var er={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},rr={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},nr={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},ir=[1570,1571,1573,1575];tr.__arabicParser__={};var sr=tr.__arabicParser__.isInArabicSubstitutionA=function(br){return er[br.charCodeAt(0)]!==void 0},ar=tr.__arabicParser__.isArabicLetter=function(br){return typeof br=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(br)},cr=tr.__arabicParser__.isArabicEndLetter=function(br){return ar(br)&&sr(br)&&er[br.charCodeAt(0)].length<=2},lr=tr.__arabicParser__.isArabicAlfLetter=function(br){return ar(br)&&ir.indexOf(br.charCodeAt(0))>=0};tr.__arabicParser__.arabicLetterHasIsolatedForm=function(br){return ar(br)&&sr(br)&&er[br.charCodeAt(0)].length>=1};var or=tr.__arabicParser__.arabicLetterHasFinalForm=function(br){return ar(br)&&sr(br)&&er[br.charCodeAt(0)].length>=2};tr.__arabicParser__.arabicLetterHasInitialForm=function(br){return ar(br)&&sr(br)&&er[br.charCodeAt(0)].length>=3};var ur=tr.__arabicParser__.arabicLetterHasMedialForm=function(br){return ar(br)&&sr(br)&&er[br.charCodeAt(0)].length==4},hr=tr.__arabicParser__.resolveLigatures=function(br){var pr=0,mr=rr,yr="",xr=0;for(pr=0;pr<br.length;pr+=1)mr[br.charCodeAt(pr)]!==void 0?(xr++,typeof(mr=mr[br.charCodeAt(pr)])=="number"&&(yr+=String.fromCharCode(mr),mr=rr,xr=0),pr===br.length-1&&(mr=rr,yr+=br.charAt(pr-(xr-1)),pr-=xr-1,xr=0)):(mr=rr,yr+=br.charAt(pr-xr),pr-=xr,xr=0);return yr};tr.__arabicParser__.isArabicDiacritic=function(br){return br!==void 0&&nr[br.charCodeAt(0)]!==void 0};var dr=tr.__arabicParser__.getCorrectForm=function(br,pr,mr){return ar(br)?sr(br)===!1?-1:!or(br)||!ar(pr)&&!ar(mr)||!ar(mr)&&cr(pr)||cr(br)&&!ar(pr)||cr(br)&&lr(pr)||cr(br)&&cr(pr)?0:ur(br)&&ar(pr)&&!cr(pr)&&ar(mr)&&or(mr)?3:cr(br)||!ar(mr)?1:2:-1},fr=function(br){var pr=0,mr=0,yr=0,xr="",vr="",_r="",Er=(br=br||"").split("\\s+"),Tr=[];for(pr=0;pr<Er.length;pr+=1){for(Tr.push(""),mr=0;mr<Er[pr].length;mr+=1)xr=Er[pr][mr],vr=Er[pr][mr-1],_r=Er[pr][mr+1],ar(xr)?(yr=dr(xr,vr,_r),Tr[pr]+=yr!==-1?String.fromCharCode(er[xr.charCodeAt(0)][yr]):xr):Tr[pr]+=xr;Tr[pr]=hr(Tr[pr])}return Tr.join(" ")},gr=tr.__arabicParser__.processArabic=tr.processArabic=function(){var br,pr=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,mr=[];if(Array.isArray(pr)){var yr=0;for(mr=[],yr=0;yr<pr.length;yr+=1)Array.isArray(pr[yr])?mr.push([fr(pr[yr][0]),pr[yr][1],pr[yr][2]]):mr.push([fr(pr[yr])]);br=mr}else br=fr(pr);return typeof arguments[0]=="string"?br:(arguments[0].text=br,arguments[0])};tr.events.push(["preProcessText",gr])}(E.API),E.API.autoPrint=function(tr){var er;switch((tr=tr||{}).variant=tr.variant||"non-conform",tr.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){er=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+er+" 0 R")})}return this},function(tr){var er=function(){var rr=void 0;Object.defineProperty(this,"pdf",{get:function(){return rr},set:function(cr){rr=cr}});var nr=150;Object.defineProperty(this,"width",{get:function(){return nr},set:function(cr){nr=isNaN(cr)||Number.isInteger(cr)===!1||cr<0?150:cr,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=nr+1)}});var ir=300;Object.defineProperty(this,"height",{get:function(){return ir},set:function(cr){ir=isNaN(cr)||Number.isInteger(cr)===!1||cr<0?300:cr,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=ir+1)}});var sr=[];Object.defineProperty(this,"childNodes",{get:function(){return sr},set:function(cr){sr=cr}});var ar={};Object.defineProperty(this,"style",{get:function(){return ar},set:function(cr){ar=cr}}),Object.defineProperty(this,"parentNode",{})};er.prototype.getContext=function(rr,nr){var ir;if((rr=rr||"2d")!=="2d")return null;for(ir in nr)this.pdf.context2d.hasOwnProperty(ir)&&(this.pdf.context2d[ir]=nr[ir]);return this.pdf.context2d._canvas=this,this.pdf.context2d},er.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},tr.events.push(["initialized",function(){this.canvas=new er,this.canvas.pdf=this}])}(E.API),function(tr){var er={left:0,top:0,bottom:0,right:0},rr=!1,nr=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},er),this.internal.__cell__.margins.width=this.getPageWidth(),ir.call(this))},ir=function(){this.internal.__cell__.lastCell=new sr,this.internal.__cell__.pages=1},sr=function(){var lr=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return lr},set:function(br){lr=br}});var or=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return or},set:function(br){or=br}});var ur=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return ur},set:function(br){ur=br}});var hr=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return hr},set:function(br){hr=br}});var dr=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return dr},set:function(br){dr=br}});var fr=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return fr},set:function(br){fr=br}});var gr=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return gr},set:function(br){gr=br}}),this};sr.prototype.clone=function(){return new sr(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},sr.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},tr.setHeaderFunction=function(lr){return nr.call(this),this.internal.__cell__.headerFunction=typeof lr=="function"?lr:void 0,this},tr.getTextDimensions=function(lr,or){nr.call(this);var ur=(or=or||{}).fontSize||this.getFontSize(),hr=or.font||this.getFont(),dr=or.scaleFactor||this.internal.scaleFactor,fr=0,gr=0,br=0,pr=this;if(!Array.isArray(lr)&&typeof lr!="string"){if(typeof lr!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");lr=String(lr)}var mr=or.maxWidth;mr>0?typeof lr=="string"?lr=this.splitTextToSize(lr,mr):Object.prototype.toString.call(lr)==="[object Array]"&&(lr=lr.reduce(function(xr,vr){return xr.concat(pr.splitTextToSize(vr,mr))},[])):lr=Array.isArray(lr)?lr:[lr];for(var yr=0;yr<lr.length;yr++)fr<(br=this.getStringUnitWidth(lr[yr],{font:hr})*ur)&&(fr=br);return fr!==0&&(gr=lr.length),{w:fr/=dr,h:Math.max((gr*ur*this.getLineHeightFactor()-ur*(this.getLineHeightFactor()-1))/dr,0)}},tr.cellAddPage=function(){nr.call(this),this.addPage();var lr=this.internal.__cell__.margins||er;return this.internal.__cell__.lastCell=new sr(lr.left,lr.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var ar=tr.cell=function(){var lr;lr=arguments[0]instanceof sr?arguments[0]:new sr(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),nr.call(this);var or=this.internal.__cell__.lastCell,ur=this.internal.__cell__.padding,hr=this.internal.__cell__.margins||er,dr=this.internal.__cell__.tableHeaderRow,fr=this.internal.__cell__.printHeaders;return or.lineNumber!==void 0&&(or.lineNumber===lr.lineNumber?(lr.x=(or.x||0)+(or.width||0),lr.y=or.y||0):or.y+or.height+lr.height+hr.bottom>this.getPageHeight()?(this.cellAddPage(),lr.y=hr.top,fr&&dr&&(this.printHeaderRow(lr.lineNumber,!0),lr.y+=dr[0].height)):lr.y=or.y+or.height||lr.y),lr.text[0]!==void 0&&(this.rect(lr.x,lr.y,lr.width,lr.height,rr===!0?"FD":void 0),lr.align==="right"?this.text(lr.text,lr.x+lr.width-ur,lr.y+ur,{align:"right",baseline:"top"}):lr.align==="center"?this.text(lr.text,lr.x+lr.width/2,lr.y+ur,{align:"center",baseline:"top",maxWidth:lr.width-ur-ur}):this.text(lr.text,lr.x+ur,lr.y+ur,{align:"left",baseline:"top",maxWidth:lr.width-ur-ur})),this.internal.__cell__.lastCell=lr,this};tr.table=function(lr,or,ur,hr,dr){if(nr.call(this),!ur)throw new Error("No data for PDF table.");var fr,gr,br,pr,mr=[],yr=[],xr=[],vr={},_r={},Er=[],Tr=[],Rr=(dr=dr||{}).autoSize||!1,Nr=dr.printHeaders!==!1,Dr=dr.css&&dr.css["font-size"]!==void 0?16*dr.css["font-size"]:dr.fontSize||12,Ir=dr.margins||Object.assign({width:this.getPageWidth()},er),Or=typeof dr.padding=="number"?dr.padding:3,jr=dr.headerBackgroundColor||"#c8c8c8",Lr=dr.headerTextColor||"#000";if(ir.call(this),this.internal.__cell__.printHeaders=Nr,this.internal.__cell__.margins=Ir,this.internal.__cell__.table_font_size=Dr,this.internal.__cell__.padding=Or,this.internal.__cell__.headerBackgroundColor=jr,this.internal.__cell__.headerTextColor=Lr,this.setFontSize(Dr),hr==null)yr=mr=Object.keys(ur[0]),xr=mr.map(function(){return"left"});else if(Array.isArray(hr)&&_typeof(hr[0])==="object")for(mr=hr.map(function(Mr){return Mr.name}),yr=hr.map(function(Mr){return Mr.prompt||Mr.name||""}),xr=hr.map(function(Mr){return Mr.align||"left"}),fr=0;fr<hr.length;fr+=1)_r[hr[fr].name]=hr[fr].width*(19.049976/25.4);else Array.isArray(hr)&&typeof hr[0]=="string"&&(yr=mr=hr,xr=mr.map(function(){return"left"}));if(Rr||Array.isArray(hr)&&typeof hr[0]=="string")for(fr=0;fr<mr.length;fr+=1){for(vr[pr=mr[fr]]=ur.map(function(Mr){return Mr[pr]}),this.setFont(void 0,"bold"),Er.push(this.getTextDimensions(yr[fr],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),gr=vr[pr],this.setFont(void 0,"normal"),br=0;br<gr.length;br+=1)Er.push(this.getTextDimensions(gr[br],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);_r[pr]=Math.max.apply(null,Er)+Or+Or,Er=[]}if(Nr){var Cr={};for(fr=0;fr<mr.length;fr+=1)Cr[mr[fr]]={},Cr[mr[fr]].text=yr[fr],Cr[mr[fr]].align=xr[fr];var wr=cr.call(this,Cr,_r);Tr=mr.map(function(Mr){return new sr(lr,or,_r[Mr],wr,Cr[Mr].text,void 0,Cr[Mr].align)}),this.setTableHeaderRow(Tr),this.printHeaderRow(1,!1)}var Pr=hr.reduce(function(Mr,qr){return Mr[qr.name]=qr.align,Mr},{});for(fr=0;fr<ur.length;fr+=1){"rowStart"in dr&&dr.rowStart instanceof Function&&dr.rowStart({row:fr,data:ur[fr]},this);var Ar=cr.call(this,ur[fr],_r);for(br=0;br<mr.length;br+=1){var Sr=ur[fr][mr[br]];"cellStart"in dr&&dr.cellStart instanceof Function&&dr.cellStart({row:fr,col:br,data:Sr},this),ar.call(this,new sr(lr,or,_r[mr[br]],Ar,Sr,fr+2,Pr[mr[br]]))}}return this.internal.__cell__.table_x=lr,this.internal.__cell__.table_y=or,this};var cr=function(lr,or){var ur=this.internal.__cell__.padding,hr=this.internal.__cell__.table_font_size,dr=this.internal.scaleFactor;return Object.keys(lr).map(function(fr){var gr=lr[fr];return this.splitTextToSize(gr.hasOwnProperty("text")?gr.text:gr,or[fr]-ur-ur)},this).map(function(fr){return this.getLineHeightFactor()*fr.length*hr/dr+ur+ur},this).reduce(function(fr,gr){return Math.max(fr,gr)},0)};tr.setTableHeaderRow=function(lr){nr.call(this),this.internal.__cell__.tableHeaderRow=lr},tr.printHeaderRow=function(lr,or){if(nr.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var ur;if(rr=!0,typeof this.internal.__cell__.headerFunction=="function"){var hr=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new sr(hr[0],hr[1],hr[2],hr[3],void 0,-1)}this.setFont(void 0,"bold");for(var dr=[],fr=0;fr<this.internal.__cell__.tableHeaderRow.length;fr+=1){ur=this.internal.__cell__.tableHeaderRow[fr].clone(),or&&(ur.y=this.internal.__cell__.margins.top||0,dr.push(ur)),ur.lineNumber=lr;var gr=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),ar.call(this,ur),this.setTextColor(gr)}dr.length>0&&this.setTableHeaderRow(dr),this.setFont(void 0,"normal"),rr=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(tr){var er=tr.family.replace(/"|'/g,"").toLowerCase(),rr=function(sr){return Pt[sr=sr||"normal"]?sr:"normal"}(tr.style),nr=function(sr){if(!sr)return 400;if(typeof sr=="number")return sr>=100&&sr<=900&&sr%100==0?sr:400;if(/^\d00$/.test(sr))return parseInt(sr);switch(sr){case"bold":return 700;case"normal":default:return 400}}(tr.weight),ir=function(sr){return typeof It[sr=sr||"normal"]=="number"?sr:"normal"}(tr.stretch);return{family:er,style:rr,weight:nr,stretch:ir,src:tr.src||[],ref:tr.ref||{name:er,style:[ir,rr,nr].join(" ")}}}function Ot(tr,er,rr,nr){var ir;for(ir=rr;ir>=0&&ir<er.length;ir+=nr)if(tr[er[ir]])return tr[er[ir]];for(ir=rr;ir>=0&&ir<er.length;ir-=nr)if(tr[er[ir]])return tr[er[ir]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(tr){return[tr.stretch,tr.style,tr.weight,tr.family].join(" ")}function qt(tr,er,rr){for(var nr=(rr=rr||{}).defaultFontFamily||"times",ir=Object.assign({},Bt,rr.genericFontFamilies||{}),sr=null,ar=null,cr=0;cr<er.length;++cr)if(ir[(sr=jt(er[cr])).family]&&(sr.family=ir[sr.family]),tr.hasOwnProperty(sr.family)){ar=tr[sr.family];break}if(!(ar=ar||tr[nr]))throw new Error("Could not find a font-family for the rule '"+Et(sr)+"' and default family '"+nr+"'.");if(ar=function(lr,or){if(or[lr])return or[lr];var ur=It[lr],hr=ur<=It.normal?-1:1,dr=Ot(or,kt,ur,hr);if(!dr)throw new Error("Could not find a matching font-stretch value for "+lr);return dr}(sr.stretch,ar),ar=function(lr,or){if(or[lr])return or[lr];for(var ur=Pt[lr],hr=0;hr<ur.length;++hr)if(or[ur[hr]])return or[ur[hr]];throw new Error("Could not find a matching font-style for "+lr)}(sr.style,ar),!(ar=function(lr,or){if(or[lr])return or[lr];if(lr===400&&or[500])return or[500];if(lr===500&&or[400])return or[400];var ur=Ct[lr],hr=Ot(or,Ft,ur,lr<400?-1:1);if(!hr)throw new Error("Could not find a matching font-weight for value "+lr);return hr}(sr.weight,ar)))throw new Error("Failed to resolve a font for the rule '"+Et(sr)+"'.");return ar}function Dt(tr){return tr.trimLeft()}function Rt(tr,er){for(var rr=0;rr<tr.length;){if(tr.charAt(rr)===er)return[tr.substring(0,rr),tr.substring(rr+1)];rr+=1}return null}function Tt(tr){var er=tr.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return er===null?null:[er[0],tr.substring(er[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(tr){var er,rr,nr,ir,sr,ar,cr,lr,or,ur=function($r){return $r=$r||{},this.isStrokeTransparent=$r.isStrokeTransparent||!1,this.strokeOpacity=$r.strokeOpacity||1,this.strokeStyle=$r.strokeStyle||"#000000",this.fillStyle=$r.fillStyle||"#000000",this.isFillTransparent=$r.isFillTransparent||!1,this.fillOpacity=$r.fillOpacity||1,this.font=$r.font||"10px sans-serif",this.textBaseline=$r.textBaseline||"alphabetic",this.textAlign=$r.textAlign||"left",this.lineWidth=$r.lineWidth||1,this.lineJoin=$r.lineJoin||"miter",this.lineCap=$r.lineCap||"butt",this.path=$r.path||[],this.transform=$r.transform!==void 0?$r.transform.clone():new lr,this.globalCompositeOperation=$r.globalCompositeOperation||"normal",this.globalAlpha=$r.globalAlpha||1,this.clip_path=$r.clip_path||[],this.currentPoint=$r.currentPoint||new ar,this.miterLimit=$r.miterLimit||10,this.lastPoint=$r.lastPoint||new ar,this.lineDashOffset=$r.lineDashOffset||0,this.lineDash=$r.lineDash||[],this.margin=$r.margin||[0,0,0,0],this.prevPageLastElemOffset=$r.prevPageLastElemOffset||0,this.ignoreClearRect=typeof $r.ignoreClearRect!="boolean"||$r.ignoreClearRect,this};tr.events.push(["initialized",function(){this.context2d=new hr(this),er=this.internal.f2,rr=this.internal.getCoordinateString,nr=this.internal.getVerticalCoordinateString,ir=this.internal.getHorizontalCoordinate,sr=this.internal.getVerticalCoordinate,ar=this.internal.Point,cr=this.internal.Rectangle,lr=this.internal.Matrix,or=new ur}]);var hr=function($r){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Br=$r;Object.defineProperty(this,"pdf",{get:function(){return Br}});var zr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return zr},set:function(dn){zr=!!dn}});var Gr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Gr},set:function(dn){Gr=!!dn}});var Vr=0;Object.defineProperty(this,"posX",{get:function(){return Vr},set:function(dn){isNaN(dn)||(Vr=dn)}});var Xr=0;Object.defineProperty(this,"posY",{get:function(){return Xr},set:function(dn){isNaN(dn)||(Xr=dn)}}),Object.defineProperty(this,"margin",{get:function(){return or.margin},set:function(dn){var en;typeof dn=="number"?en=[dn,dn,dn,dn]:((en=new Array(4))[0]=dn[0],en[1]=dn.length>=2?dn[1]:en[0],en[2]=dn.length>=3?dn[2]:en[0],en[3]=dn.length>=4?dn[3]:en[1]),or.margin=en}});var Ur=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ur},set:function(dn){Ur=dn}});var Fr=0;Object.defineProperty(this,"lastBreak",{get:function(){return Fr},set:function(dn){Fr=dn}});var Kr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Kr},set:function(dn){Kr=dn}}),Object.defineProperty(this,"ctx",{get:function(){return or},set:function(dn){dn instanceof ur&&(or=dn)}}),Object.defineProperty(this,"path",{get:function(){return or.path},set:function(dn){or.path=dn}});var Zr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Zr},set:function(dn){Zr=dn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(dn){var en;en=dr(dn),this.ctx.fillStyle=en.style,this.ctx.isFillTransparent=en.a===0,this.ctx.fillOpacity=en.a,this.pdf.setFillColor(en.r,en.g,en.b,{a:en.a}),this.pdf.setTextColor(en.r,en.g,en.b,{a:en.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(dn){var en=dr(dn);this.ctx.strokeStyle=en.style,this.ctx.isStrokeTransparent=en.a===0,this.ctx.strokeOpacity=en.a,en.a===0?this.pdf.setDrawColor(255,255,255):(en.a,this.pdf.setDrawColor(en.r,en.g,en.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(dn){["butt","round","square"].indexOf(dn)!==-1&&(this.ctx.lineCap=dn,this.pdf.setLineCap(dn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(dn){isNaN(dn)||(this.ctx.lineWidth=dn,this.pdf.setLineWidth(dn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(dn){["bevel","round","miter"].indexOf(dn)!==-1&&(this.ctx.lineJoin=dn,this.pdf.setLineJoin(dn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(dn){isNaN(dn)||(this.ctx.miterLimit=dn,this.pdf.setMiterLimit(dn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(dn){this.ctx.textBaseline=dn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(dn){["right","end","center","left","start"].indexOf(dn)!==-1&&(this.ctx.textAlign=dn)}});var Jr=null;function tn(dn,en){if(Jr===null){var rn=function(sn){var on=[];return Object.keys(sn).forEach(function(fn){sn[fn].forEach(function(pn){var gn=null;switch(pn){case"bold":gn={family:fn,weight:"bold"};break;case"italic":gn={family:fn,style:"italic"};break;case"bolditalic":gn={family:fn,weight:"bold",style:"italic"};break;case"":case"normal":gn={family:fn}}gn!==null&&(gn.ref={name:fn,style:pn},on.push(gn))})}),on}(dn.getFontList());Jr=function(sn){for(var on={},fn=0;fn<sn.length;++fn){var pn=jt(sn[fn]),gn=pn.family,Pn=pn.stretch,In=pn.style,En=pn.weight;on[gn]=on[gn]||{},on[gn][Pn]=on[gn][Pn]||{},on[gn][Pn][In]=on[gn][Pn][In]||{},on[gn][Pn][In][En]=pn}return on}(rn.concat(en))}return Jr}var an=null;Object.defineProperty(this,"fontFaces",{get:function(){return an},set:function(dn){Jr=null,an=dn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(dn){var en;if(this.ctx.font=dn,(en=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(dn))!==null){var rn=en[1],sn=(en[2],en[3]),on=en[4],fn=(en[5],en[6]),pn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(on)[2];on=Math.floor(pn==="px"?parseFloat(on)*this.pdf.internal.scaleFactor:pn==="em"?parseFloat(on)*this.pdf.getFontSize():parseFloat(on)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(on);var gn=function(Kn){var es,Xn,ds=[],fs=Kn.trim();if(fs==="")return Wt;if(fs in Mt)return[Mt[fs]];for(;fs!=="";){switch(Xn=null,es=(fs=Dt(fs)).charAt(0)){case'"':case"'":Xn=Rt(fs.substring(1),es);break;default:Xn=Tt(fs)}if(Xn===null||(ds.push(Xn[0]),(fs=Dt(Xn[1]))!==""&&fs.charAt(0)!==","))return Wt;fs=fs.replace(/^,/,"")}return ds}(fn);if(this.fontFaces){var Pn=qt(tn(this.pdf,this.fontFaces),gn.map(function(Kn){return{family:Kn,stretch:"normal",weight:sn,style:rn}}));this.pdf.setFont(Pn.ref.name,Pn.ref.style)}else{var In="";(sn==="bold"||parseInt(sn,10)>=700||rn==="bold")&&(In="bold"),rn==="italic"&&(In+="italic"),In.length===0&&(In="normal");for(var En="",zn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yn=0;yn<gn.length;yn++){if(this.pdf.internal.getFont(gn[yn],In,{noFallback:!0,disableWarning:!0})!==void 0){En=gn[yn];break}if(In==="bolditalic"&&this.pdf.internal.getFont(gn[yn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)En=gn[yn],In="bold";else if(this.pdf.internal.getFont(gn[yn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){En=gn[yn],In="normal";break}}if(En===""){for(var Vn=0;Vn<gn.length;Vn++)if(zn[gn[Vn]]){En=zn[gn[Vn]];break}}En=En===""?"Times":En,this.pdf.setFont(En,In)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(dn){this.ctx.globalCompositeOperation=dn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(dn){this.ctx.globalAlpha=dn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(dn){this.ctx.lineDashOffset=dn,qr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(dn){this.ctx.lineDash=dn,qr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(dn){this.ctx.ignoreClearRect=!!dn}})};hr.prototype.setLineDash=function($r){this.lineDash=$r},hr.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},hr.prototype.fill=function(){vr.call(this,"fill",!1)},hr.prototype.stroke=function(){vr.call(this,"stroke",!1)},hr.prototype.beginPath=function(){this.path=[{type:"begin"}]},hr.prototype.moveTo=function($r,Br){if(isNaN($r)||isNaN(Br))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var zr=this.ctx.transform.applyToPoint(new ar($r,Br));this.path.push({type:"mt",x:zr.x,y:zr.y}),this.ctx.lastPoint=new ar($r,Br)},hr.prototype.closePath=function(){var $r=new ar(0,0),Br=0;for(Br=this.path.length-1;Br!==-1;Br--)if(this.path[Br].type==="begin"&&_typeof(this.path[Br+1])==="object"&&typeof this.path[Br+1].x=="number"){$r=new ar(this.path[Br+1].x,this.path[Br+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new ar($r.x,$r.y)},hr.prototype.lineTo=function($r,Br){if(isNaN($r)||isNaN(Br))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var zr=this.ctx.transform.applyToPoint(new ar($r,Br));this.path.push({type:"lt",x:zr.x,y:zr.y}),this.ctx.lastPoint=new ar(zr.x,zr.y)},hr.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),vr.call(this,null,!0)},hr.prototype.quadraticCurveTo=function($r,Br,zr,Gr){if(isNaN(zr)||isNaN(Gr)||isNaN($r)||isNaN(Br))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Vr=this.ctx.transform.applyToPoint(new ar(zr,Gr)),Xr=this.ctx.transform.applyToPoint(new ar($r,Br));this.path.push({type:"qct",x1:Xr.x,y1:Xr.y,x:Vr.x,y:Vr.y}),this.ctx.lastPoint=new ar(Vr.x,Vr.y)},hr.prototype.bezierCurveTo=function($r,Br,zr,Gr,Vr,Xr){if(isNaN(Vr)||isNaN(Xr)||isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ur=this.ctx.transform.applyToPoint(new ar(Vr,Xr)),Fr=this.ctx.transform.applyToPoint(new ar($r,Br)),Kr=this.ctx.transform.applyToPoint(new ar(zr,Gr));this.path.push({type:"bct",x1:Fr.x,y1:Fr.y,x2:Kr.x,y2:Kr.y,x:Ur.x,y:Ur.y}),this.ctx.lastPoint=new ar(Ur.x,Ur.y)},hr.prototype.arc=function($r,Br,zr,Gr,Vr,Xr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr)||isNaN(Vr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Xr=!!Xr,!this.ctx.transform.isIdentity){var Ur=this.ctx.transform.applyToPoint(new ar($r,Br));$r=Ur.x,Br=Ur.y;var Fr=this.ctx.transform.applyToPoint(new ar(0,zr)),Kr=this.ctx.transform.applyToPoint(new ar(0,0));zr=Math.sqrt(Math.pow(Fr.x-Kr.x,2)+Math.pow(Fr.y-Kr.y,2))}Math.abs(Vr-Gr)>=2*Math.PI&&(Gr=0,Vr=2*Math.PI),this.path.push({type:"arc",x:$r,y:Br,radius:zr,startAngle:Gr,endAngle:Vr,counterclockwise:Xr})},hr.prototype.arcTo=function($r,Br,zr,Gr,Vr){throw new Error("arcTo not implemented.")},hr.prototype.rect=function($r,Br,zr,Gr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo($r,Br),this.lineTo($r+zr,Br),this.lineTo($r+zr,Br+Gr),this.lineTo($r,Br+Gr),this.lineTo($r,Br),this.lineTo($r+zr,Br),this.lineTo($r,Br)},hr.prototype.fillRect=function($r,Br,zr,Gr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!fr.call(this)){var Vr={};this.lineCap!=="butt"&&(Vr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Vr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect($r,Br,zr,Gr),this.fill(),Vr.hasOwnProperty("lineCap")&&(this.lineCap=Vr.lineCap),Vr.hasOwnProperty("lineJoin")&&(this.lineJoin=Vr.lineJoin)}},hr.prototype.strokeRect=function($r,Br,zr,Gr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");gr.call(this)||(this.beginPath(),this.rect($r,Br,zr,Gr),this.stroke())},hr.prototype.clearRect=function($r,Br,zr,Gr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect($r,Br,zr,Gr))},hr.prototype.save=function($r){$r=typeof $r!="boolean"||$r;for(var Br=this.pdf.internal.getCurrentPageInfo().pageNumber,zr=0;zr<this.pdf.internal.getNumberOfPages();zr++)this.pdf.setPage(zr+1),this.pdf.internal.out("q");if(this.pdf.setPage(Br),$r){this.ctx.fontSize=this.pdf.internal.getFontSize();var Gr=new ur(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Gr}},hr.prototype.restore=function($r){$r=typeof $r!="boolean"||$r;for(var Br=this.pdf.internal.getCurrentPageInfo().pageNumber,zr=0;zr<this.pdf.internal.getNumberOfPages();zr++)this.pdf.setPage(zr+1),this.pdf.internal.out("Q");this.pdf.setPage(Br),$r&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},hr.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var dr=function($r){var Br,zr,Gr,Vr;if($r.isCanvasGradient===!0&&($r=$r.getColor()),!$r)return{r:0,g:0,b:0,a:0,style:$r};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test($r))Br=0,zr=0,Gr=0,Vr=0;else{var Xr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec($r);if(Xr!==null)Br=parseInt(Xr[1]),zr=parseInt(Xr[2]),Gr=parseInt(Xr[3]),Vr=1;else if((Xr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec($r))!==null)Br=parseInt(Xr[1]),zr=parseInt(Xr[2]),Gr=parseInt(Xr[3]),Vr=parseFloat(Xr[4]);else{if(Vr=1,typeof $r=="string"&&$r.charAt(0)!=="#"){var Ur=new f($r);$r=Ur.ok?Ur.toHex():"#000000"}$r.length===4?(Br=$r.substring(1,2),Br+=Br,zr=$r.substring(2,3),zr+=zr,Gr=$r.substring(3,4),Gr+=Gr):(Br=$r.substring(1,3),zr=$r.substring(3,5),Gr=$r.substring(5,7)),Br=parseInt(Br,16),zr=parseInt(zr,16),Gr=parseInt(Gr,16)}}return{r:Br,g:zr,b:Gr,a:Vr,style:$r}},fr=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},gr=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};hr.prototype.fillText=function($r,Br,zr,Gr){if(isNaN(Br)||isNaN(zr)||typeof $r!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Gr=isNaN(Gr)?void 0:Gr,!fr.call(this)){var Vr=Ar(this.ctx.transform.rotation),Xr=this.ctx.transform.scaleX;Or.call(this,{text:$r,x:Br,y:zr,scale:Xr,angle:Vr,align:this.textAlign,maxWidth:Gr})}},hr.prototype.strokeText=function($r,Br,zr,Gr){if(isNaN(Br)||isNaN(zr)||typeof $r!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!gr.call(this)){Gr=isNaN(Gr)?void 0:Gr;var Vr=Ar(this.ctx.transform.rotation),Xr=this.ctx.transform.scaleX;Or.call(this,{text:$r,x:Br,y:zr,scale:Xr,renderingMode:"stroke",angle:Vr,align:this.textAlign,maxWidth:Gr})}},hr.prototype.measureText=function($r){if(typeof $r!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Br=this.pdf,zr=this.pdf.internal.scaleFactor,Gr=Br.internal.getFontSize(),Vr=Br.getStringUnitWidth($r)*Gr/Br.internal.scaleFactor,Xr=function(Ur){var Fr=(Ur=Ur||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Fr}}),this};return new Xr({width:Vr*=Math.round(96*zr/72*1e4)/1e4})},hr.prototype.scale=function($r,Br){if(isNaN($r)||isNaN(Br))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var zr=new lr($r,0,0,Br,0,0);this.ctx.transform=this.ctx.transform.multiply(zr)},hr.prototype.rotate=function($r){if(isNaN($r))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Br=new lr(Math.cos($r),Math.sin($r),-Math.sin($r),Math.cos($r),0,0);this.ctx.transform=this.ctx.transform.multiply(Br)},hr.prototype.translate=function($r,Br){if(isNaN($r)||isNaN(Br))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var zr=new lr(1,0,0,1,$r,Br);this.ctx.transform=this.ctx.transform.multiply(zr)},hr.prototype.transform=function($r,Br,zr,Gr,Vr,Xr){if(isNaN($r)||isNaN(Br)||isNaN(zr)||isNaN(Gr)||isNaN(Vr)||isNaN(Xr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ur=new lr($r,Br,zr,Gr,Vr,Xr);this.ctx.transform=this.ctx.transform.multiply(Ur)},hr.prototype.setTransform=function($r,Br,zr,Gr,Vr,Xr){$r=isNaN($r)?1:$r,Br=isNaN(Br)?0:Br,zr=isNaN(zr)?0:zr,Gr=isNaN(Gr)?1:Gr,Vr=isNaN(Vr)?0:Vr,Xr=isNaN(Xr)?0:Xr,this.ctx.transform=new lr($r,Br,zr,Gr,Vr,Xr)};var br=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};hr.prototype.drawImage=function($r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr){var Zr=this.pdf.getImageProperties($r),Jr=1,tn=1,an=1,dn=1;Gr!==void 0&&Fr!==void 0&&(an=Fr/Gr,dn=Kr/Vr,Jr=Zr.width/Gr*Fr/Gr,tn=Zr.height/Vr*Kr/Vr),Xr===void 0&&(Xr=Br,Ur=zr,Br=0,zr=0),Gr!==void 0&&Fr===void 0&&(Fr=Gr,Kr=Vr),Gr===void 0&&Fr===void 0&&(Fr=Zr.width,Kr=Zr.height);for(var en,rn=this.ctx.transform.decompose(),sn=Ar(rn.rotate.shx),on=new lr,fn=(on=(on=(on=on.multiply(rn.translate)).multiply(rn.skew)).multiply(rn.scale)).applyToRectangle(new cr(Xr-Br*an,Ur-zr*dn,Gr*Jr,Vr*tn)),pn=pr.call(this,fn),gn=[],Pn=0;Pn<pn.length;Pn+=1)gn.indexOf(pn[Pn])===-1&&gn.push(pn[Pn]);if(xr(gn),this.autoPaging)for(var In=gn[0],En=gn[gn.length-1],zn=In;zn<En+1;zn++){this.pdf.setPage(zn);var yn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vn=zn===1?this.posY+this.margin[0]:this.margin[0],Kn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],es=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xn=zn===1?0:Kn+(zn-2)*es;if(this.ctx.clip_path.length!==0){var ds=this.path;en=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yr(en,this.posX+this.margin[3],-Xn+Vn+this.ctx.prevPageLastElemOffset),_r.call(this,"fill",!0),this.path=ds}var fs=JSON.parse(JSON.stringify(fn));fs=yr([fs],this.posX+this.margin[3],-Xn+Vn+this.ctx.prevPageLastElemOffset)[0];var os=(zn>In||zn<En)&&br.call(this);os&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yn,es,null).clip().discardPath()),this.pdf.addImage($r,"JPEG",fs.x,fs.y,fs.w,fs.h,null,null,sn),os&&this.pdf.restoreGraphicsState()}else this.pdf.addImage($r,"JPEG",fn.x,fn.y,fn.w,fn.h,null,null,sn)};var pr=function($r,Br,zr){var Gr=[];Br=Br||this.pdf.internal.pageSize.width,zr=zr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Vr=this.posY+this.ctx.prevPageLastElemOffset;switch($r.type){default:case"mt":case"lt":Gr.push(Math.floor(($r.y+Vr)/zr)+1);break;case"arc":Gr.push(Math.floor(($r.y+Vr-$r.radius)/zr)+1),Gr.push(Math.floor(($r.y+Vr+$r.radius)/zr)+1);break;case"qct":var Xr=Sr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$r.x1,$r.y1,$r.x,$r.y);Gr.push(Math.floor((Xr.y+Vr)/zr)+1),Gr.push(Math.floor((Xr.y+Xr.h+Vr)/zr)+1);break;case"bct":var Ur=Mr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,$r.x1,$r.y1,$r.x2,$r.y2,$r.x,$r.y);Gr.push(Math.floor((Ur.y+Vr)/zr)+1),Gr.push(Math.floor((Ur.y+Ur.h+Vr)/zr)+1);break;case"rect":Gr.push(Math.floor(($r.y+Vr)/zr)+1),Gr.push(Math.floor(($r.y+$r.h+Vr)/zr)+1)}for(var Fr=0;Fr<Gr.length;Fr+=1)for(;this.pdf.internal.getNumberOfPages()<Gr[Fr];)mr.call(this);return Gr},mr=function(){var $r=this.fillStyle,Br=this.strokeStyle,zr=this.font,Gr=this.lineCap,Vr=this.lineWidth,Xr=this.lineJoin;this.pdf.addPage(),this.fillStyle=$r,this.strokeStyle=Br,this.font=zr,this.lineCap=Gr,this.lineWidth=Vr,this.lineJoin=Xr},yr=function($r,Br,zr){for(var Gr=0;Gr<$r.length;Gr++)switch($r[Gr].type){case"bct":$r[Gr].x2+=Br,$r[Gr].y2+=zr;case"qct":$r[Gr].x1+=Br,$r[Gr].y1+=zr;case"mt":case"lt":case"arc":default:$r[Gr].x+=Br,$r[Gr].y+=zr}return $r},xr=function($r){return $r.sort(function(Br,zr){return Br-zr})},vr=function($r,Br){for(var zr,Gr,Vr=this.fillStyle,Xr=this.strokeStyle,Ur=this.lineCap,Fr=this.lineWidth,Kr=Math.abs(Fr*this.ctx.transform.scaleX),Zr=this.lineJoin,Jr=JSON.parse(JSON.stringify(this.path)),tn=JSON.parse(JSON.stringify(this.path)),an=[],dn=0;dn<tn.length;dn++)if(tn[dn].x!==void 0)for(var en=pr.call(this,tn[dn]),rn=0;rn<en.length;rn+=1)an.indexOf(en[rn])===-1&&an.push(en[rn]);for(var sn=0;sn<an.length;sn++)for(;this.pdf.internal.getNumberOfPages()<an[sn];)mr.call(this);if(xr(an),this.autoPaging)for(var on=an[0],fn=an[an.length-1],pn=on;pn<fn+1;pn++){this.pdf.setPage(pn),this.fillStyle=Vr,this.strokeStyle=Xr,this.lineCap=Ur,this.lineWidth=Kr,this.lineJoin=Zr;var gn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pn=pn===1?this.posY+this.margin[0]:this.margin[0],In=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],En=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],zn=pn===1?0:In+(pn-2)*En;if(this.ctx.clip_path.length!==0){var yn=this.path;zr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yr(zr,this.posX+this.margin[3],-zn+Pn+this.ctx.prevPageLastElemOffset),_r.call(this,$r,!0),this.path=yn}if(Gr=JSON.parse(JSON.stringify(Jr)),this.path=yr(Gr,this.posX+this.margin[3],-zn+Pn+this.ctx.prevPageLastElemOffset),Br===!1||pn===0){var Vn=(pn>on||pn<fn)&&br.call(this);Vn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gn,En,null).clip().discardPath()),_r.call(this,$r,Br),Vn&&this.pdf.restoreGraphicsState()}this.lineWidth=Fr}else this.lineWidth=Kr,_r.call(this,$r,Br),this.lineWidth=Fr;this.path=Jr},_r=function($r,Br){if(($r!=="stroke"||Br||!gr.call(this))&&($r==="stroke"||Br||!fr.call(this))){for(var zr,Gr,Vr=[],Xr=this.path,Ur=0;Ur<Xr.length;Ur++){var Fr=Xr[Ur];switch(Fr.type){case"begin":Vr.push({begin:!0});break;case"close":Vr.push({close:!0});break;case"mt":Vr.push({start:Fr,deltas:[],abs:[]});break;case"lt":var Kr=Vr.length;if(Xr[Ur-1]&&!isNaN(Xr[Ur-1].x)&&(zr=[Fr.x-Xr[Ur-1].x,Fr.y-Xr[Ur-1].y],Kr>0)){for(;Kr>=0;Kr--)if(Vr[Kr-1].close!==!0&&Vr[Kr-1].begin!==!0){Vr[Kr-1].deltas.push(zr),Vr[Kr-1].abs.push(Fr);break}}break;case"bct":zr=[Fr.x1-Xr[Ur-1].x,Fr.y1-Xr[Ur-1].y,Fr.x2-Xr[Ur-1].x,Fr.y2-Xr[Ur-1].y,Fr.x-Xr[Ur-1].x,Fr.y-Xr[Ur-1].y],Vr[Vr.length-1].deltas.push(zr);break;case"qct":var Zr=Xr[Ur-1].x+2/3*(Fr.x1-Xr[Ur-1].x),Jr=Xr[Ur-1].y+2/3*(Fr.y1-Xr[Ur-1].y),tn=Fr.x+2/3*(Fr.x1-Fr.x),an=Fr.y+2/3*(Fr.y1-Fr.y),dn=Fr.x,en=Fr.y;zr=[Zr-Xr[Ur-1].x,Jr-Xr[Ur-1].y,tn-Xr[Ur-1].x,an-Xr[Ur-1].y,dn-Xr[Ur-1].x,en-Xr[Ur-1].y],Vr[Vr.length-1].deltas.push(zr);break;case"arc":Vr.push({deltas:[],abs:[],arc:!0}),Array.isArray(Vr[Vr.length-1].abs)&&Vr[Vr.length-1].abs.push(Fr)}}Gr=Br?null:$r==="stroke"?"stroke":"fill";for(var rn=!1,sn=0;sn<Vr.length;sn++)if(Vr[sn].arc)for(var on=Vr[sn].abs,fn=0;fn<on.length;fn++){var pn=on[fn];pn.type==="arc"?Rr.call(this,pn.x,pn.y,pn.radius,pn.startAngle,pn.endAngle,pn.counterclockwise,void 0,Br,!rn):jr.call(this,pn.x,pn.y),rn=!0}else if(Vr[sn].close===!0)this.pdf.internal.out("h"),rn=!1;else if(Vr[sn].begin!==!0){var gn=Vr[sn].start.x,Pn=Vr[sn].start.y;Lr.call(this,Vr[sn].deltas,gn,Pn),rn=!0}Gr&&Nr.call(this,Gr),Br&&Dr.call(this)}},Er=function($r){var Br=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,zr=Br*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return $r-zr;case"top":return $r+Br-zr;case"hanging":return $r+Br-2*zr;case"middle":return $r+Br/2-zr;case"ideographic":return $r;case"alphabetic":default:return $r}},Tr=function($r){return $r+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};hr.prototype.createLinearGradient=function(){var $r=function(){};return $r.colorStops=[],$r.addColorStop=function(Br,zr){this.colorStops.push([Br,zr])},$r.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},$r.isCanvasGradient=!0,$r},hr.prototype.createPattern=function(){return this.createLinearGradient()},hr.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Rr=function($r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr){for(var Zr=wr.call(this,zr,Gr,Vr,Xr),Jr=0;Jr<Zr.length;Jr++){var tn=Zr[Jr];Jr===0&&(Kr?Ir.call(this,tn.x1+$r,tn.y1+Br):jr.call(this,tn.x1+$r,tn.y1+Br)),Cr.call(this,$r,Br,tn.x2,tn.y2,tn.x3,tn.y3,tn.x4,tn.y4)}Fr?Dr.call(this):Nr.call(this,Ur)},Nr=function($r){switch($r){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Dr=function(){this.pdf.clip(),this.pdf.discardPath()},Ir=function($r,Br){this.pdf.internal.out(rr($r)+" "+nr(Br)+" m")},Or=function($r){var Br;switch($r.align){case"right":case"end":Br="right";break;case"center":Br="center";break;case"left":case"start":default:Br="left"}var zr=this.pdf.getTextDimensions($r.text),Gr=Er.call(this,$r.y),Vr=Tr.call(this,Gr)-zr.h,Xr=this.ctx.transform.applyToPoint(new ar($r.x,Gr)),Ur=this.ctx.transform.decompose(),Fr=new lr;Fr=(Fr=(Fr=Fr.multiply(Ur.translate)).multiply(Ur.skew)).multiply(Ur.scale);for(var Kr,Zr,Jr,tn=this.ctx.transform.applyToRectangle(new cr($r.x,Gr,zr.w,zr.h)),an=Fr.applyToRectangle(new cr($r.x,Vr,zr.w,zr.h)),dn=pr.call(this,an),en=[],rn=0;rn<dn.length;rn+=1)en.indexOf(dn[rn])===-1&&en.push(dn[rn]);if(xr(en),this.autoPaging)for(var sn=en[0],on=en[en.length-1],fn=sn;fn<on+1;fn++){this.pdf.setPage(fn);var pn=fn===1?this.posY+this.margin[0]:this.margin[0],gn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pn=this.pdf.internal.pageSize.height-this.margin[2],In=Pn-this.margin[0],En=this.pdf.internal.pageSize.width-this.margin[1],zn=En-this.margin[3],yn=fn===1?0:gn+(fn-2)*In;if(this.ctx.clip_path.length!==0){var Vn=this.path;Kr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=yr(Kr,this.posX+this.margin[3],-1*yn+pn),_r.call(this,"fill",!0),this.path=Vn}var Kn=yr([JSON.parse(JSON.stringify(an))],this.posX+this.margin[3],-yn+pn+this.ctx.prevPageLastElemOffset)[0];$r.scale>=.01&&(Zr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Zr*$r.scale),Jr=this.lineWidth,this.lineWidth=Jr*$r.scale);var es=this.autoPaging!=="text";if(es||Kn.y+Kn.h<=Pn){if(es||Kn.y>=pn&&Kn.x<=En){var Xn=es?$r.text:this.pdf.splitTextToSize($r.text,$r.maxWidth||En-Kn.x)[0],ds=yr([JSON.parse(JSON.stringify(tn))],this.posX+this.margin[3],-yn+pn+this.ctx.prevPageLastElemOffset)[0],fs=es&&(fn>sn||fn<on)&&br.call(this);fs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zn,In,null).clip().discardPath()),this.pdf.text(Xn,ds.x,ds.y,{angle:$r.angle,align:Br,renderingMode:$r.renderingMode}),fs&&this.pdf.restoreGraphicsState()}}else Kn.y<Pn&&(this.ctx.prevPageLastElemOffset+=Pn-Kn.y);$r.scale>=.01&&(this.pdf.setFontSize(Zr),this.lineWidth=Jr)}else $r.scale>=.01&&(Zr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Zr*$r.scale),Jr=this.lineWidth,this.lineWidth=Jr*$r.scale),this.pdf.text($r.text,Xr.x+this.posX,Xr.y+this.posY,{angle:$r.angle,align:Br,renderingMode:$r.renderingMode,maxWidth:$r.maxWidth}),$r.scale>=.01&&(this.pdf.setFontSize(Zr),this.lineWidth=Jr)},jr=function($r,Br,zr,Gr){zr=zr||0,Gr=Gr||0,this.pdf.internal.out(rr($r+zr)+" "+nr(Br+Gr)+" l")},Lr=function($r,Br,zr){return this.pdf.lines($r,Br,zr,null,null)},Cr=function($r,Br,zr,Gr,Vr,Xr,Ur,Fr){this.pdf.internal.out([er(ir(zr+$r)),er(sr(Gr+Br)),er(ir(Vr+$r)),er(sr(Xr+Br)),er(ir(Ur+$r)),er(sr(Fr+Br)),"c"].join(" "))},wr=function($r,Br,zr,Gr){for(var Vr=2*Math.PI,Xr=Math.PI/2;Br>zr;)Br-=Vr;var Ur=Math.abs(zr-Br);Ur<Vr&&Gr&&(Ur=Vr-Ur);for(var Fr=[],Kr=Gr?-1:1,Zr=Br;Ur>1e-5;){var Jr=Zr+Kr*Math.min(Ur,Xr);Fr.push(Pr.call(this,$r,Zr,Jr)),Ur-=Math.abs(Jr-Zr),Zr=Jr}return Fr},Pr=function($r,Br,zr){var Gr=(zr-Br)/2,Vr=$r*Math.cos(Gr),Xr=$r*Math.sin(Gr),Ur=Vr,Fr=-Xr,Kr=Ur*Ur+Fr*Fr,Zr=Kr+Ur*Vr+Fr*Xr,Jr=4/3*(Math.sqrt(2*Kr*Zr)-Zr)/(Ur*Xr-Fr*Vr),tn=Ur-Jr*Fr,an=Fr+Jr*Ur,dn=tn,en=-an,rn=Gr+Br,sn=Math.cos(rn),on=Math.sin(rn);return{x1:$r*Math.cos(Br),y1:$r*Math.sin(Br),x2:tn*sn-an*on,y2:tn*on+an*sn,x3:dn*sn-en*on,y3:dn*on+en*sn,x4:$r*Math.cos(zr),y4:$r*Math.sin(zr)}},Ar=function($r){return 180*$r/Math.PI},Sr=function($r,Br,zr,Gr,Vr,Xr){var Ur=$r+.5*(zr-$r),Fr=Br+.5*(Gr-Br),Kr=Vr+.5*(zr-Vr),Zr=Xr+.5*(Gr-Xr),Jr=Math.min($r,Vr,Ur,Kr),tn=Math.max($r,Vr,Ur,Kr),an=Math.min(Br,Xr,Fr,Zr),dn=Math.max(Br,Xr,Fr,Zr);return new cr(Jr,an,tn-Jr,dn-an)},Mr=function($r,Br,zr,Gr,Vr,Xr,Ur,Fr){var Kr,Zr,Jr,tn,an,dn,en,rn,sn,on,fn,pn,gn,Pn,In=zr-$r,En=Gr-Br,zn=Vr-zr,yn=Xr-Gr,Vn=Ur-Vr,Kn=Fr-Xr;for(Zr=0;Zr<41;Zr++)sn=(en=(Jr=$r+(Kr=Zr/40)*In)+Kr*((an=zr+Kr*zn)-Jr))+Kr*(an+Kr*(Vr+Kr*Vn-an)-en),on=(rn=(tn=Br+Kr*En)+Kr*((dn=Gr+Kr*yn)-tn))+Kr*(dn+Kr*(Xr+Kr*Kn-dn)-rn),Zr==0?(fn=sn,pn=on,gn=sn,Pn=on):(fn=Math.min(fn,sn),pn=Math.min(pn,on),gn=Math.max(gn,sn),Pn=Math.max(Pn,on));return new cr(Math.round(fn),Math.round(pn),Math.round(gn-fn),Math.round(Pn-pn))},qr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var $r,Br,zr=($r=this.ctx.lineDash,Br=this.ctx.lineDashOffset,JSON.stringify({lineDash:$r,lineDashOffset:Br}));this.prevLineDash!==zr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=zr)}}})(E.API),function(tr){var er=function(sr){var ar,cr,lr,or,ur,hr,dr,fr,gr,br;for(cr=[],lr=0,or=(sr+=ar="\0\0\0\0".slice(sr.length%4||4)).length;or>lr;lr+=4)(ur=(sr.charCodeAt(lr)<<24)+(sr.charCodeAt(lr+1)<<16)+(sr.charCodeAt(lr+2)<<8)+sr.charCodeAt(lr+3))!==0?(hr=(ur=((ur=((ur=((ur=(ur-(br=ur%85))/85)-(gr=ur%85))/85)-(fr=ur%85))/85)-(dr=ur%85))/85)%85,cr.push(hr+33,dr+33,fr+33,gr+33,br+33)):cr.push(122);return function(pr,mr){for(var yr=mr;yr>0;yr--)pr.pop()}(cr,ar.length),String.fromCharCode.apply(String,cr)+"~>"},rr=function(sr){var ar,cr,lr,or,ur,hr=String,dr="length",fr=255,gr="charCodeAt",br="slice",pr="replace";for(sr[br](-2),sr=sr[br](0,-2)[pr](/\s/g,"")[pr]("z","!!!!!"),lr=[],or=0,ur=(sr+=ar="uuuuu"[br](sr[dr]%5||5))[dr];ur>or;or+=5)cr=52200625*(sr[gr](or)-33)+614125*(sr[gr](or+1)-33)+7225*(sr[gr](or+2)-33)+85*(sr[gr](or+3)-33)+(sr[gr](or+4)-33),lr.push(fr&cr>>24,fr&cr>>16,fr&cr>>8,fr&cr);return function(mr,yr){for(var xr=yr;xr>0;xr--)mr.pop()}(lr,ar[dr]),hr.fromCharCode.apply(hr,lr)},nr=function(sr){var ar=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((sr=sr.replace(/\s/g,"")).indexOf(">")!==-1&&(sr=sr.substr(0,sr.indexOf(">"))),sr.length%2&&(sr+="0"),ar.test(sr)===!1)return"";for(var cr="",lr=0;lr<sr.length;lr+=2)cr+=String.fromCharCode("0x"+(sr[lr]+sr[lr+1]));return cr},ir=function(sr){for(var ar=new Uint8Array(sr.length),cr=sr.length;cr--;)ar[cr]=sr.charCodeAt(cr);return sr=(ar=zlibSync(ar)).reduce(function(lr,or){return lr+String.fromCharCode(or)},"")};tr.processDataByFilters=function(sr,ar){var cr=0,lr=sr||"",or=[];for(typeof(ar=ar||[])=="string"&&(ar=[ar]),cr=0;cr<ar.length;cr+=1)switch(ar[cr]){case"ASCII85Decode":case"/ASCII85Decode":lr=rr(lr),or.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":lr=er(lr),or.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":lr=nr(lr),or.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":lr=lr.split("").map(function(ur){return("0"+ur.charCodeAt().toString(16)).slice(-2)}).join("")+">",or.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":lr=ir(lr),or.push("/FlateDecode");break;default:throw new Error('The filter: "'+ar[cr]+'" is not implemented')}return{data:lr,reverseChain:or.reverse().join(" ")}}}(E.API),function(tr){tr.loadFile=function(er,rr,nr){return function(ir,sr,ar){sr=sr!==!1,ar=typeof ar=="function"?ar:function(){};var cr=void 0;try{cr=function(lr,or,ur){var hr=new XMLHttpRequest,dr=0,fr=function(gr){var br=gr.length,pr=[],mr=String.fromCharCode;for(dr=0;dr<br;dr+=1)pr.push(mr(255&gr.charCodeAt(dr)));return pr.join("")};if(hr.open("GET",lr,!or),hr.overrideMimeType("text/plain; charset=x-user-defined"),or===!1&&(hr.onload=function(){hr.status===200?ur(fr(this.responseText)):ur(void 0)}),hr.send(null),or&&hr.status===200)return fr(hr.responseText)}(ir,sr,ar)}catch{}return cr}(er,rr,nr)},tr.loadImageFile=tr.loadFile}(E.API),function(tr){function er(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(ar){return Promise.reject(new Error("Could not load html2canvas: "+ar))}).then(function(ar){return ar.default?ar.default:ar})}function rr(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(ar){return Promise.reject(new Error("Could not load dompurify: "+ar))}).then(function(ar){return ar.default?ar.default:ar})}var nr=function(ar){var cr=_typeof(ar);return cr==="undefined"?"undefined":cr==="string"||ar instanceof String?"string":cr==="number"||ar instanceof Number?"number":cr==="function"||ar instanceof Function?"function":ar&&ar.constructor===Array?"array":ar&&ar.nodeType===1?"element":cr==="object"?"object":"unknown"},ir=function(ar,cr){var lr=document.createElement(ar);for(var or in cr.className&&(lr.className=cr.className),cr.innerHTML&&cr.dompurify&&(lr.innerHTML=cr.dompurify.sanitize(cr.innerHTML)),cr.style)lr.style[or]=cr.style[or];return lr},sr=function ar(cr){var lr=Object.assign(ar.convert(Promise.resolve()),JSON.parse(JSON.stringify(ar.template))),or=ar.convert(Promise.resolve(),lr);return or=(or=or.setProgress(1,ar,1,[ar])).set(cr)};(sr.prototype=Object.create(Promise.prototype)).constructor=sr,sr.convert=function(ar,cr){return ar.__proto__=cr||sr.prototype,ar},sr.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},sr.prototype.from=function(ar,cr){return this.then(function(){switch(cr=cr||function(lr){switch(nr(lr)){case"string":return"string";case"element":return lr.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(ar)){case"string":return this.then(rr).then(function(lr){return this.set({src:ir("div",{innerHTML:ar,dompurify:lr})})});case"element":return this.set({src:ar});case"canvas":return this.set({canvas:ar});case"img":return this.set({img:ar});default:return this.error("Unknown source type.")}})},sr.prototype.to=function(ar){switch(ar){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},sr.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var ar={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},cr=function lr(or,ur){for(var hr=or.nodeType===3?document.createTextNode(or.nodeValue):or.cloneNode(!1),dr=or.firstChild;dr;dr=dr.nextSibling)ur!==!0&&dr.nodeType===1&&dr.nodeName==="SCRIPT"||hr.appendChild(lr(dr,ur));return or.nodeType===1&&(or.nodeName==="CANVAS"?(hr.width=or.width,hr.height=or.height,hr.getContext("2d").drawImage(or,0,0)):or.nodeName!=="TEXTAREA"&&or.nodeName!=="SELECT"||(hr.value=or.value),hr.addEventListener("load",function(){hr.scrollTop=or.scrollTop,hr.scrollLeft=or.scrollLeft},!0)),hr}(this.prop.src,this.opt.html2canvas.javascriptEnabled);cr.tagName==="BODY"&&(ar.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=ir("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=ir("div",{className:"html2pdf__container",style:ar}),this.prop.container.appendChild(cr),this.prop.container.firstChild.appendChild(ir("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},sr.prototype.toCanvas=function(){var ar=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(ar).then(er).then(function(cr){var lr=Object.assign({},this.opt.html2canvas);return delete lr.onrendered,cr(this.prop.container,lr)}).then(function(cr){(this.opt.html2canvas.onrendered||function(){})(cr),this.prop.canvas=cr,document.body.removeChild(this.prop.overlay)})},sr.prototype.toContext2d=function(){var ar=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(ar).then(er).then(function(cr){var lr=this.opt.jsPDF,or=this.opt.fontFaces,ur=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,hr=Object.assign({async:!0,allowTaint:!0,scale:ur,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete hr.onrendered,lr.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,lr.context2d.posX=this.opt.x,lr.context2d.posY=this.opt.y,lr.context2d.margin=this.opt.margin,lr.context2d.fontFaces=or,or)for(var dr=0;dr<or.length;++dr){var fr=or[dr],gr=fr.src.find(function(br){return br.format==="truetype"});gr&&lr.addFont(gr.url,fr.ref.name,fr.ref.style)}return hr.windowHeight=hr.windowHeight||0,hr.windowHeight=hr.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):hr.windowHeight,lr.context2d.save(!0),cr(this.prop.container,hr)}).then(function(cr){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(cr),this.prop.canvas=cr,document.body.removeChild(this.prop.overlay)})},sr.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var ar=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=ar})},sr.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},sr.prototype.output=function(ar,cr,lr){return(lr=lr||"pdf").toLowerCase()==="img"||lr.toLowerCase()==="image"?this.outputImg(ar,cr):this.outputPdf(ar,cr)},sr.prototype.outputPdf=function(ar,cr){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(ar,cr)})},sr.prototype.outputImg=function(ar){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(ar){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+ar+'" is not supported.'}})},sr.prototype.save=function(ar){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(ar?{filename:ar}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},sr.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},sr.prototype.set=function(ar){if(nr(ar)!=="object")return this;var cr=Object.keys(ar||{}).map(function(lr){if(lr in sr.template.prop)return function(){this.prop[lr]=ar[lr]};switch(lr){case"margin":return this.setMargin.bind(this,ar.margin);case"jsPDF":return function(){return this.opt.jsPDF=ar.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,ar.pageSize);default:return function(){this.opt[lr]=ar[lr]}}},this);return this.then(function(){return this.thenList(cr)})},sr.prototype.get=function(ar,cr){return this.then(function(){var lr=ar in sr.template.prop?this.prop[ar]:this.opt[ar];return cr?cr(lr):lr})},sr.prototype.setMargin=function(ar){return this.then(function(){switch(nr(ar)){case"number":ar=[ar,ar,ar,ar];case"array":if(ar.length===2&&(ar=[ar[0],ar[1],ar[0],ar[1]]),ar.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=ar}).then(this.setPageSize)},sr.prototype.setPageSize=function(ar){function cr(lr,or){return Math.floor(lr*or/72*96)}return this.then(function(){(ar=ar||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(ar.inner={width:ar.width-this.opt.margin[1]-this.opt.margin[3],height:ar.height-this.opt.margin[0]-this.opt.margin[2]},ar.inner.px={width:cr(ar.inner.width,ar.k),height:cr(ar.inner.height,ar.k)},ar.inner.ratio=ar.inner.height/ar.inner.width),this.prop.pageSize=ar})},sr.prototype.setProgress=function(ar,cr,lr,or){return ar!=null&&(this.progress.val=ar),cr!=null&&(this.progress.state=cr),lr!=null&&(this.progress.n=lr),or!=null&&(this.progress.stack=or),this.progress.ratio=this.progress.val/this.progress.state,this},sr.prototype.updateProgress=function(ar,cr,lr,or){return this.setProgress(ar?this.progress.val+ar:null,cr||null,lr?this.progress.n+lr:null,or?this.progress.stack.concat(or):null)},sr.prototype.then=function(ar,cr){var lr=this;return this.thenCore(ar,cr,function(or,ur){return lr.updateProgress(null,null,1,[or]),Promise.prototype.then.call(this,function(hr){return lr.updateProgress(null,or),hr}).then(or,ur).then(function(hr){return lr.updateProgress(1),hr})})},sr.prototype.thenCore=function(ar,cr,lr){lr=lr||Promise.prototype.then,ar&&(ar=ar.bind(this)),cr&&(cr=cr.bind(this));var or=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:sr.convert(Object.assign({},this),Promise.prototype),ur=lr.call(or,ar,cr);return sr.convert(ur,this.__proto__)},sr.prototype.thenExternal=function(ar,cr){return Promise.prototype.then.call(this,ar,cr)},sr.prototype.thenList=function(ar){var cr=this;return ar.forEach(function(lr){cr=cr.thenCore(lr)}),cr},sr.prototype.catch=function(ar){ar&&(ar=ar.bind(this));var cr=Promise.prototype.catch.call(this,ar);return sr.convert(cr,this)},sr.prototype.catchExternal=function(ar){return Promise.prototype.catch.call(this,ar)},sr.prototype.error=function(ar){return this.then(function(){throw new Error(ar)})},sr.prototype.using=sr.prototype.set,sr.prototype.saveAs=sr.prototype.save,sr.prototype.export=sr.prototype.output,sr.prototype.run=sr.prototype.then,E.getPageSize=function(ar,cr,lr){if(_typeof(ar)==="object"){var or=ar;ar=or.orientation,cr=or.unit||cr,lr=or.format||lr}cr=cr||"mm",lr=lr||"a4",ar=(""+(ar||"P")).toLowerCase();var ur,hr=(""+lr).toLowerCase(),dr={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(cr){case"pt":ur=1;break;case"mm":ur=72/25.4;break;case"cm":ur=72/2.54;break;case"in":ur=72;break;case"px":ur=.75;break;case"pc":case"em":ur=12;break;case"ex":ur=6;break;default:throw"Invalid unit: "+cr}var fr,gr=0,br=0;if(dr.hasOwnProperty(hr))gr=dr[hr][1]/ur,br=dr[hr][0]/ur;else try{gr=lr[1],br=lr[0]}catch{throw new Error("Invalid format: "+lr)}if(ar==="p"||ar==="portrait")ar="p",br>gr&&(fr=br,br=gr,gr=fr);else{if(ar!=="l"&&ar!=="landscape")throw"Invalid orientation: "+ar;ar="l",gr>br&&(fr=br,br=gr,gr=fr)}return{width:br,height:gr,unit:cr,k:ur,orientation:ar}},tr.html=function(ar,cr){(cr=cr||{}).callback=cr.callback||function(){},cr.html2canvas=cr.html2canvas||{},cr.html2canvas.canvas=cr.html2canvas.canvas||this.canvas,cr.jsPDF=cr.jsPDF||this,cr.fontFaces=cr.fontFaces?cr.fontFaces.map(jt):null;var lr=new sr(cr);return cr.worker?lr:lr.from(ar).doCallback()}}(E.API),E.API.addJS=function(tr){return Ht=tr,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(tr){var er;tr.events.push(["postPutResources",function(){var rr=this,nr=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var ir=rr.outline.render().split(/\r\n/),sr=0;sr<ir.length;sr++){var ar=ir[sr],cr=nr.exec(ar);if(cr!=null){var lr=cr[1];rr.internal.newObjectDeferredBegin(lr,!1)}rr.internal.write(ar)}if(this.outline.createNamedDestinations){var or=this.internal.pages.length,ur=[];for(sr=0;sr<or;sr++){var hr=rr.internal.newObject();ur.push(hr);var dr=rr.internal.getPageInfo(sr+1);rr.internal.write("<< /D["+dr.objId+" 0 R /XYZ null null null]>> endobj")}var fr=rr.internal.newObject();for(rr.internal.write("<< /Names [ "),sr=0;sr<ur.length;sr++)rr.internal.write("(page_"+(sr+1)+")"+ur[sr]+" 0 R");rr.internal.write(" ] >>","endobj"),er=rr.internal.newObject(),rr.internal.write("<< /Dests "+fr+" 0 R"),rr.internal.write(">>","endobj")}}]),tr.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+er+" 0 R"))}]),tr.events.push(["initialized",function(){var rr=this;rr.outline={createNamedDestinations:!1,root:{children:[]}},rr.outline.add=function(nr,ir,sr){var ar={title:ir,options:sr,children:[]};return nr==null&&(nr=this.root),nr.children.push(ar),ar},rr.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=rr,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},rr.outline.genIds_r=function(nr){nr.id=rr.internal.newObjectDeferred();for(var ir=0;ir<nr.children.length;ir++)this.genIds_r(nr.children[ir])},rr.outline.renderRoot=function(nr){this.objStart(nr),this.line("/Type /Outlines"),nr.children.length>0&&(this.line("/First "+this.makeRef(nr.children[0])),this.line("/Last "+this.makeRef(nr.children[nr.children.length-1]))),this.line("/Count "+this.count_r({count:0},nr)),this.objEnd()},rr.outline.renderItems=function(nr){for(var ir=this.ctx.pdf.internal.getVerticalCoordinateString,sr=0;sr<nr.children.length;sr++){var ar=nr.children[sr];this.objStart(ar),this.line("/Title "+this.makeString(ar.title)),this.line("/Parent "+this.makeRef(nr)),sr>0&&this.line("/Prev "+this.makeRef(nr.children[sr-1])),sr<nr.children.length-1&&this.line("/Next "+this.makeRef(nr.children[sr+1])),ar.children.length>0&&(this.line("/First "+this.makeRef(ar.children[0])),this.line("/Last "+this.makeRef(ar.children[ar.children.length-1])));var cr=this.count=this.count_r({count:0},ar);if(cr>0&&this.line("/Count "+cr),ar.options&&ar.options.pageNumber){var lr=rr.internal.getPageInfo(ar.options.pageNumber);this.line("/Dest ["+lr.objId+" 0 R /XYZ 0 "+ir(0)+" 0]")}this.objEnd()}for(var or=0;or<nr.children.length;or++)this.renderItems(nr.children[or])},rr.outline.line=function(nr){this.ctx.val+=nr+`\r
`},rr.outline.makeRef=function(nr){return nr.id+" 0 R"},rr.outline.makeString=function(nr){return"("+rr.internal.pdfEscape(nr)+")"},rr.outline.objStart=function(nr){this.ctx.val+=`\r
`+nr.id+` 0 obj\r
<<\r
`},rr.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},rr.outline.count_r=function(nr,ir){for(var sr=0;sr<ir.children.length;sr++)nr.count++,this.count_r(nr,ir.children[sr]);return nr.count}}])}(E.API),function(tr){var er=[192,193,194,195,196,197,198,199];tr.processJPEG=function(rr,nr,ir,sr,ar,cr){var lr,or=this.decode.DCT_DECODE,ur=null;if(typeof rr=="string"||this.__addimage__.isArrayBuffer(rr)||this.__addimage__.isArrayBufferView(rr)){switch(rr=ar||rr,rr=this.__addimage__.isArrayBuffer(rr)?new Uint8Array(rr):rr,(lr=function(hr){for(var dr,fr=256*hr.charCodeAt(4)+hr.charCodeAt(5),gr=hr.length,br={width:0,height:0,numcomponents:1},pr=4;pr<gr;pr+=2){if(pr+=fr,er.indexOf(hr.charCodeAt(pr+1))!==-1){dr=256*hr.charCodeAt(pr+5)+hr.charCodeAt(pr+6),br={width:256*hr.charCodeAt(pr+7)+hr.charCodeAt(pr+8),height:dr,numcomponents:hr.charCodeAt(pr+9)};break}fr=256*hr.charCodeAt(pr+2)+hr.charCodeAt(pr+3)}return br}(rr=this.__addimage__.isArrayBufferView(rr)?this.__addimage__.arrayBufferToBinaryString(rr):rr)).numcomponents){case 1:cr=this.color_spaces.DEVICE_GRAY;break;case 4:cr=this.color_spaces.DEVICE_CMYK;break;case 3:cr=this.color_spaces.DEVICE_RGB}ur={data:rr,width:lr.width,height:lr.height,colorSpace:cr,bitsPerComponent:8,filter:or,index:nr,alias:ir}}return ur}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var tr,er,rr;function nr(sr){var ar,cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr;for(this.data=sr,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},hr=null;;){switch(ar=this.readUInt32(),gr=(function(){var vr,_r;for(_r=[],vr=0;vr<4;++vr)_r.push(String.fromCharCode(this.data[this.pos++]));return _r}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(ar);break;case"fcTL":hr&&this.animation.frames.push(hr),this.pos+=4,hr={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},ur=this.readUInt16(),or=this.readUInt16()||100,hr.delay=1e3*ur/or,hr.disposeOp=this.data[this.pos++],hr.blendOp=this.data[this.pos++],hr.data=[];break;case"IDAT":case"fdAT":for(gr==="fdAT"&&(this.pos+=4,ar-=4),sr=(hr!=null?hr.data:void 0)||this.imgData,mr=0;0<=ar?mr<ar:mr>ar;0<=ar?++mr:--mr)sr.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(lr=this.palette.length/3,this.transparency.indexed=this.read(ar),this.transparency.indexed.length>lr)throw new Error("More transparent colors than palette size");if((br=lr-this.transparency.indexed.length)>0)for(yr=0;0<=br?yr<br:yr>br;0<=br?++yr:--yr)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(ar)[0];break;case 2:this.transparency.rgb=this.read(ar)}break;case"tEXt":dr=(pr=this.read(ar)).indexOf(0),fr=String.fromCharCode.apply(String,pr.slice(0,dr)),this.text[fr]=String.fromCharCode.apply(String,pr.slice(dr+1));break;case"IEND":return hr&&this.animation.frames.push(hr),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(xr=this.colorType)===4||xr===6,cr=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*cr,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=ar}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}nr.prototype.read=function(sr){var ar,cr;for(cr=[],ar=0;0<=sr?ar<sr:ar>sr;0<=sr?++ar:--ar)cr.push(this.data[this.pos++]);return cr},nr.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},nr.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},nr.prototype.decodePixels=function(sr){var ar=this.pixelBitlength/8,cr=new Uint8Array(this.width*this.height*ar),lr=0,or=this;if(sr==null&&(sr=this.imgData),sr.length===0)return new Uint8Array(0);function ur(hr,dr,fr,gr){var br,pr,mr,yr,xr,vr,_r,Er,Tr,Rr,Nr,Dr,Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr,Mr=Math.ceil((or.width-hr)/fr),qr=Math.ceil((or.height-dr)/gr),$r=or.width==Mr&&or.height==qr;for(Or=ar*Mr,Dr=$r?cr:new Uint8Array(Or*qr),vr=sr.length,Ir=0,pr=0;Ir<qr&&lr<vr;){switch(sr[lr++]){case 0:for(yr=Cr=0;Cr<Or;yr=Cr+=1)Dr[pr++]=sr[lr++];break;case 1:for(yr=wr=0;wr<Or;yr=wr+=1)br=sr[lr++],xr=yr<ar?0:Dr[pr-ar],Dr[pr++]=(br+xr)%256;break;case 2:for(yr=Pr=0;Pr<Or;yr=Pr+=1)br=sr[lr++],mr=(yr-yr%ar)/ar,jr=Ir&&Dr[(Ir-1)*Or+mr*ar+yr%ar],Dr[pr++]=(jr+br)%256;break;case 3:for(yr=Ar=0;Ar<Or;yr=Ar+=1)br=sr[lr++],mr=(yr-yr%ar)/ar,xr=yr<ar?0:Dr[pr-ar],jr=Ir&&Dr[(Ir-1)*Or+mr*ar+yr%ar],Dr[pr++]=(br+Math.floor((xr+jr)/2))%256;break;case 4:for(yr=Sr=0;Sr<Or;yr=Sr+=1)br=sr[lr++],mr=(yr-yr%ar)/ar,xr=yr<ar?0:Dr[pr-ar],Ir===0?jr=Lr=0:(jr=Dr[(Ir-1)*Or+mr*ar+yr%ar],Lr=mr&&Dr[(Ir-1)*Or+(mr-1)*ar+yr%ar]),_r=xr+jr-Lr,Er=Math.abs(_r-xr),Rr=Math.abs(_r-jr),Nr=Math.abs(_r-Lr),Tr=Er<=Rr&&Er<=Nr?xr:Rr<=Nr?jr:Lr,Dr[pr++]=(br+Tr)%256;break;default:throw new Error("Invalid filter algorithm: "+sr[lr-1])}if(!$r){var Br=((dr+Ir*gr)*or.width+hr)*ar,zr=Ir*Or;for(yr=0;yr<Mr;yr+=1){for(var Gr=0;Gr<ar;Gr+=1)cr[Br++]=Dr[zr++];Br+=(fr-1)*ar}}Ir++}}return sr=unzlibSync(sr),or.interlaceMethod==1?(ur(0,0,8,8),ur(4,0,8,8),ur(0,4,4,8),ur(2,0,4,4),ur(0,2,2,4),ur(1,0,2,2),ur(0,1,1,2)):ur(0,0,1,1),cr},nr.prototype.decodePalette=function(){var sr,ar,cr,lr,or,ur,hr,dr,fr;for(cr=this.palette,ur=this.transparency.indexed||[],or=new Uint8Array((ur.length||0)+cr.length),lr=0,sr=0,ar=hr=0,dr=cr.length;hr<dr;ar=hr+=3)or[lr++]=cr[ar],or[lr++]=cr[ar+1],or[lr++]=cr[ar+2],or[lr++]=(fr=ur[sr++])!=null?fr:255;return or},nr.prototype.copyToImageData=function(sr,ar){var cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr;if(lr=this.colors,br=null,cr=this.hasAlphaChannel,this.palette.length&&(br=(mr=this._decodedPalette)!=null?mr:this._decodedPalette=this.decodePalette(),lr=4,cr=!0),gr=(or=sr.data||sr).length,hr=br||ar,ur=dr=0,lr===1)for(;ur<gr;)fr=br?4*ar[ur/4]:dr,pr=hr[fr++],or[ur++]=pr,or[ur++]=pr,or[ur++]=pr,or[ur++]=cr?hr[fr++]:255,dr=fr;else for(;ur<gr;)fr=br?4*ar[ur/4]:dr,or[ur++]=hr[fr++],or[ur++]=hr[fr++],or[ur++]=hr[fr++],or[ur++]=cr?hr[fr++]:255,dr=fr},nr.prototype.decode=function(){var sr;return sr=new Uint8Array(this.width*this.height*4),this.copyToImageData(sr,this.decodePixels()),sr};var ir=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{er=n.document.createElement("canvas"),rr=er.getContext("2d")}catch{return!1}return!0}return!1};return ir(),tr=function(sr){var ar;if(ir()===!0)return rr.width=sr.width,rr.height=sr.height,rr.clearRect(0,0,sr.width,sr.height),rr.putImageData(sr,0,0),(ar=new Image).src=er.toDataURL(),ar;throw new Error("This method requires a Browser with Canvas-capability.")},nr.prototype.decodeFrames=function(sr){var ar,cr,lr,or,ur,hr,dr,fr;if(this.animation){for(fr=[],cr=ur=0,hr=(dr=this.animation.frames).length;ur<hr;cr=++ur)ar=dr[cr],lr=sr.createImageData(ar.width,ar.height),or=this.decodePixels(new Uint8Array(ar.data)),this.copyToImageData(lr,or),ar.imageData=lr,fr.push(ar.image=tr(lr));return fr}},nr.prototype.renderFrame=function(sr,ar){var cr,lr,or;return cr=(lr=this.animation.frames)[ar],or=lr[ar-1],ar===0&&sr.clearRect(0,0,this.width,this.height),(or!=null?or.disposeOp:void 0)===1?sr.clearRect(or.xOffset,or.yOffset,or.width,or.height):(or!=null?or.disposeOp:void 0)===2&&sr.putImageData(or.imageData,or.xOffset,or.yOffset),cr.blendOp===0&&sr.clearRect(cr.xOffset,cr.yOffset,cr.width,cr.height),sr.drawImage(cr.image,cr.xOffset,cr.yOffset)},nr.prototype.animate=function(sr){var ar,cr,lr,or,ur,hr,dr=this;return cr=0,hr=this.animation,or=hr.numFrames,lr=hr.frames,ur=hr.numPlays,(ar=function(){var fr,gr;if(fr=cr++%or,gr=lr[fr],dr.renderFrame(sr,fr),or>1&&cr/or<ur)return dr.animation._timeout=setTimeout(ar,gr.delay)})()},nr.prototype.stopAnimation=function(){var sr;return clearTimeout((sr=this.animation)!=null?sr._timeout:void 0)},nr.prototype.render=function(sr){var ar,cr;return sr._png&&sr._png.stopAnimation(),sr._png=this,sr.width=this.width,sr.height=this.height,ar=sr.getContext("2d"),this.animation?(this.decodeFrames(ar),this.animate(ar)):(cr=ar.createImageData(this.width,this.height),this.copyToImageData(cr,this.decodePixels()),ar.putImageData(cr,0,0))},nr}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(tr){var er=0;if(tr[er++]!==71||tr[er++]!==73||tr[er++]!==70||tr[er++]!==56||(tr[er++]+1&253)!=56||tr[er++]!==97)throw new Error("Invalid GIF 87a/89a header.");var rr=tr[er++]|tr[er++]<<8,nr=tr[er++]|tr[er++]<<8,ir=tr[er++],sr=ir>>7,ar=1<<(7&ir)+1;tr[er++],tr[er++];var cr=null,lr=null;sr&&(cr=er,lr=ar,er+=3*ar);var or=!0,ur=[],hr=0,dr=null,fr=0,gr=null;for(this.width=rr,this.height=nr;or&&er<tr.length;)switch(tr[er++]){case 33:switch(tr[er++]){case 255:if(tr[er]!==11||tr[er+1]==78&&tr[er+2]==69&&tr[er+3]==84&&tr[er+4]==83&&tr[er+5]==67&&tr[er+6]==65&&tr[er+7]==80&&tr[er+8]==69&&tr[er+9]==50&&tr[er+10]==46&&tr[er+11]==48&&tr[er+12]==3&&tr[er+13]==1&&tr[er+16]==0)er+=14,gr=tr[er++]|tr[er++]<<8,er++;else for(er+=12;;){if(!((Ir=tr[er++])>=0))throw Error("Invalid block size");if(Ir===0)break;er+=Ir}break;case 249:if(tr[er++]!==4||tr[er+4]!==0)throw new Error("Invalid graphics extension block.");var br=tr[er++];hr=tr[er++]|tr[er++]<<8,dr=tr[er++],!(1&br)&&(dr=null),fr=br>>2&7,er++;break;case 254:for(;;){if(!((Ir=tr[er++])>=0))throw Error("Invalid block size");if(Ir===0)break;er+=Ir}break;default:throw new Error("Unknown graphic control label: 0x"+tr[er-1].toString(16))}break;case 44:var pr=tr[er++]|tr[er++]<<8,mr=tr[er++]|tr[er++]<<8,yr=tr[er++]|tr[er++]<<8,xr=tr[er++]|tr[er++]<<8,vr=tr[er++],_r=vr>>6&1,Er=1<<(7&vr)+1,Tr=cr,Rr=lr,Nr=!1;vr>>7&&(Nr=!0,Tr=er,Rr=Er,er+=3*Er);var Dr=er;for(er++;;){var Ir;if(!((Ir=tr[er++])>=0))throw Error("Invalid block size");if(Ir===0)break;er+=Ir}ur.push({x:pr,y:mr,width:yr,height:xr,has_local_palette:Nr,palette_offset:Tr,palette_size:Rr,data_offset:Dr,data_length:er-Dr,transparent_index:dr,interlaced:!!_r,delay:hr,disposal:fr});break;case 59:or=!1;break;default:throw new Error("Unknown gif block: 0x"+tr[er-1].toString(16))}this.numFrames=function(){return ur.length},this.loopCount=function(){return gr},this.frameInfo=function(Or){if(Or<0||Or>=ur.length)throw new Error("Frame index out of range.");return ur[Or]},this.decodeAndBlitFrameBGRA=function(Or,jr){var Lr=this.frameInfo(Or),Cr=Lr.width*Lr.height,wr=new Uint8Array(Cr);$t(tr,Lr.data_offset,wr,Cr);var Pr=Lr.palette_offset,Ar=Lr.transparent_index;Ar===null&&(Ar=256);var Sr=Lr.width,Mr=rr-Sr,qr=Sr,$r=4*(Lr.y*rr+Lr.x),Br=4*((Lr.y+Lr.height)*rr+Lr.x),zr=$r,Gr=4*Mr;Lr.interlaced===!0&&(Gr+=4*rr*7);for(var Vr=8,Xr=0,Ur=wr.length;Xr<Ur;++Xr){var Fr=wr[Xr];if(qr===0&&(qr=Sr,(zr+=Gr)>=Br&&(Gr=4*Mr+4*rr*(Vr-1),zr=$r+(Sr+Mr)*(Vr<<1),Vr>>=1)),Fr===Ar)zr+=4;else{var Kr=tr[Pr+3*Fr],Zr=tr[Pr+3*Fr+1],Jr=tr[Pr+3*Fr+2];jr[zr++]=Jr,jr[zr++]=Zr,jr[zr++]=Kr,jr[zr++]=255}--qr}},this.decodeAndBlitFrameRGBA=function(Or,jr){var Lr=this.frameInfo(Or),Cr=Lr.width*Lr.height,wr=new Uint8Array(Cr);$t(tr,Lr.data_offset,wr,Cr);var Pr=Lr.palette_offset,Ar=Lr.transparent_index;Ar===null&&(Ar=256);var Sr=Lr.width,Mr=rr-Sr,qr=Sr,$r=4*(Lr.y*rr+Lr.x),Br=4*((Lr.y+Lr.height)*rr+Lr.x),zr=$r,Gr=4*Mr;Lr.interlaced===!0&&(Gr+=4*rr*7);for(var Vr=8,Xr=0,Ur=wr.length;Xr<Ur;++Xr){var Fr=wr[Xr];if(qr===0&&(qr=Sr,(zr+=Gr)>=Br&&(Gr=4*Mr+4*rr*(Vr-1),zr=$r+(Sr+Mr)*(Vr<<1),Vr>>=1)),Fr===Ar)zr+=4;else{var Kr=tr[Pr+3*Fr],Zr=tr[Pr+3*Fr+1],Jr=tr[Pr+3*Fr+2];jr[zr++]=Kr,jr[zr++]=Zr,jr[zr++]=Jr,jr[zr++]=255}--qr}}}function $t(tr,er,rr,nr){for(var ir=tr[er++],sr=1<<ir,ar=sr+1,cr=ar+1,lr=ir+1,or=(1<<lr)-1,ur=0,hr=0,dr=0,fr=tr[er++],gr=new Int32Array(4096),br=null;;){for(;ur<16&&fr!==0;)hr|=tr[er++]<<ur,ur+=8,fr===1?fr=tr[er++]:--fr;if(ur<lr)break;var pr=hr&or;if(hr>>=lr,ur-=lr,pr!==sr){if(pr===ar)break;for(var mr=pr<cr?pr:br,yr=0,xr=mr;xr>sr;)xr=gr[xr]>>8,++yr;var vr=xr;if(dr+yr+(mr!==pr?1:0)>nr)return void a.log("Warning, gif stream longer than expected.");rr[dr++]=vr;var _r=dr+=yr;for(mr!==pr&&(rr[dr++]=vr),xr=mr;yr--;)xr=gr[xr],rr[--_r]=255&xr,xr>>=8;br!==null&&cr<4096&&(gr[cr++]=br<<8|vr,cr>=or+1&&lr<12&&(++lr,or=or<<1|1)),br=pr}else cr=ar+1,or=(1<<(lr=ir+1))-1,br=null}return dr!==nr&&a.log("Warning, gif stream shorter than expected."),rr}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(tr){var er,rr,nr,ir,sr,ar=Math.floor,cr=new Array(64),lr=new Array(64),or=new Array(64),ur=new Array(64),hr=new Array(65535),dr=new Array(65535),fr=new Array(64),gr=new Array(64),br=[],pr=0,mr=7,yr=new Array(64),xr=new Array(64),vr=new Array(64),_r=new Array(256),Er=new Array(2048),Tr=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Rr=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Nr=[0,1,2,3,4,5,6,7,8,9,10,11],Dr=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ir=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Or=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],jr=[0,1,2,3,4,5,6,7,8,9,10,11],Lr=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Cr=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function wr($r,Br){for(var zr=0,Gr=0,Vr=new Array,Xr=1;Xr<=16;Xr++){for(var Ur=1;Ur<=$r[Xr];Ur++)Vr[Br[Gr]]=[],Vr[Br[Gr]][0]=zr,Vr[Br[Gr]][1]=Xr,Gr++,zr++;zr*=2}return Vr}function Pr($r){for(var Br=$r[0],zr=$r[1]-1;zr>=0;)Br&1<<zr&&(pr|=1<<mr),zr--,--mr<0&&(pr==255?(Ar(255),Ar(0)):Ar(pr),mr=7,pr=0)}function Ar($r){br.push($r)}function Sr($r){Ar($r>>8&255),Ar(255&$r)}function Mr($r,Br,zr,Gr,Vr){for(var Xr,Ur=Vr[0],Fr=Vr[240],Kr=function(on,fn){var pn,gn,Pn,In,En,zn,yn,Vn,Kn,es,Xn=0;for(Kn=0;Kn<8;++Kn){pn=on[Xn],gn=on[Xn+1],Pn=on[Xn+2],In=on[Xn+3],En=on[Xn+4],zn=on[Xn+5],yn=on[Xn+6];var ds=pn+(Vn=on[Xn+7]),fs=pn-Vn,os=gn+yn,Hn=gn-yn,Ln=Pn+zn,Dn=Pn-zn,ls=In+En,Ds=In-En,xs=ds+ls,kn=ds-ls,Jn=os+Ln,is=os-Ln;on[Xn]=xs+Jn,on[Xn+4]=xs-Jn;var bs=.707106781*(is+kn);on[Xn+2]=kn+bs,on[Xn+6]=kn-bs;var Bn=.382683433*((xs=Ds+Dn)-(is=Hn+fs)),Yn=.5411961*xs+Bn,vn=1.306562965*is+Bn,_n=.707106781*(Jn=Dn+Hn),Mn=fs+_n,Cn=fs-_n;on[Xn+5]=Cn+Yn,on[Xn+3]=Cn-Yn,on[Xn+1]=Mn+vn,on[Xn+7]=Mn-vn,Xn+=8}for(Xn=0,Kn=0;Kn<8;++Kn){pn=on[Xn],gn=on[Xn+8],Pn=on[Xn+16],In=on[Xn+24],En=on[Xn+32],zn=on[Xn+40],yn=on[Xn+48];var Zn=pn+(Vn=on[Xn+56]),qn=pn-Vn,wn=gn+yn,On=gn-yn,Gn=Pn+zn,Qn=Pn-zn,$s=In+En,us=In-En,ws=Zn+$s,As=Zn-$s,Rs=wn+Gn,Ms=wn-Gn;on[Xn]=ws+Rs,on[Xn+32]=ws-Rs;var Bs=.707106781*(Ms+As);on[Xn+16]=As+Bs,on[Xn+48]=As-Bs;var Zs=.382683433*((ws=us+Qn)-(Ms=On+qn)),Qs=.5411961*ws+Zs,eo=1.306562965*Ms+Zs,ao=.707106781*(Rs=Qn+On),Un=qn+ao,Ts=qn-ao;on[Xn+40]=Ts+Qs,on[Xn+24]=Ts-Qs,on[Xn+8]=Un+eo,on[Xn+56]=Un-eo,Xn++}for(Kn=0;Kn<64;++Kn)es=on[Kn]*fn[Kn],fr[Kn]=es>0?es+.5|0:es-.5|0;return fr}($r,Br),Zr=0;Zr<64;++Zr)gr[Tr[Zr]]=Kr[Zr];var Jr=gr[0]-zr;zr=gr[0],Jr==0?Pr(Gr[0]):(Pr(Gr[dr[Xr=32767+Jr]]),Pr(hr[Xr]));for(var tn=63;tn>0&&gr[tn]==0;)tn--;if(tn==0)return Pr(Ur),zr;for(var an,dn=1;dn<=tn;){for(var en=dn;gr[dn]==0&&dn<=tn;)++dn;var rn=dn-en;if(rn>=16){an=rn>>4;for(var sn=1;sn<=an;++sn)Pr(Fr);rn&=15}Xr=32767+gr[dn],Pr(Vr[(rn<<4)+dr[Xr]]),Pr(hr[Xr]),dn++}return tn!=63&&Pr(Ur),zr}function qr($r){$r=Math.min(Math.max($r,1),100),sr!=$r&&(function(Br){for(var zr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Gr=0;Gr<64;Gr++){var Vr=ar((zr[Gr]*Br+50)/100);Vr=Math.min(Math.max(Vr,1),255),cr[Tr[Gr]]=Vr}for(var Xr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ur=0;Ur<64;Ur++){var Fr=ar((Xr[Ur]*Br+50)/100);Fr=Math.min(Math.max(Fr,1),255),lr[Tr[Ur]]=Fr}for(var Kr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Zr=0,Jr=0;Jr<8;Jr++)for(var tn=0;tn<8;tn++)or[Zr]=1/(cr[Tr[Zr]]*Kr[Jr]*Kr[tn]*8),ur[Zr]=1/(lr[Tr[Zr]]*Kr[Jr]*Kr[tn]*8),Zr++}($r<50?Math.floor(5e3/$r):Math.floor(200-2*$r)),sr=$r)}this.encode=function($r,Br){Br&&qr(Br),br=new Array,pr=0,mr=7,Sr(65496),Sr(65504),Sr(16),Ar(74),Ar(70),Ar(73),Ar(70),Ar(0),Ar(1),Ar(1),Ar(0),Sr(1),Sr(1),Ar(0),Ar(0),function(){Sr(65499),Sr(132),Ar(0);for(var gn=0;gn<64;gn++)Ar(cr[gn]);Ar(1);for(var Pn=0;Pn<64;Pn++)Ar(lr[Pn])}(),function(gn,Pn){Sr(65472),Sr(17),Ar(8),Sr(Pn),Sr(gn),Ar(3),Ar(1),Ar(17),Ar(0),Ar(2),Ar(17),Ar(1),Ar(3),Ar(17),Ar(1)}($r.width,$r.height),function(){Sr(65476),Sr(418),Ar(0);for(var gn=0;gn<16;gn++)Ar(Rr[gn+1]);for(var Pn=0;Pn<=11;Pn++)Ar(Nr[Pn]);Ar(16);for(var In=0;In<16;In++)Ar(Dr[In+1]);for(var En=0;En<=161;En++)Ar(Ir[En]);Ar(1);for(var zn=0;zn<16;zn++)Ar(Or[zn+1]);for(var yn=0;yn<=11;yn++)Ar(jr[yn]);Ar(17);for(var Vn=0;Vn<16;Vn++)Ar(Lr[Vn+1]);for(var Kn=0;Kn<=161;Kn++)Ar(Cr[Kn])}(),Sr(65498),Sr(12),Ar(3),Ar(1),Ar(0),Ar(2),Ar(17),Ar(3),Ar(17),Ar(0),Ar(63),Ar(0);var zr=0,Gr=0,Vr=0;pr=0,mr=7,this.encode.displayName="_encode_";for(var Xr,Ur,Fr,Kr,Zr,Jr,tn,an,dn,en=$r.data,rn=$r.width,sn=$r.height,on=4*rn,fn=0;fn<sn;){for(Xr=0;Xr<on;){for(Zr=on*fn+Xr,tn=-1,an=0,dn=0;dn<64;dn++)Jr=Zr+(an=dn>>3)*on+(tn=4*(7&dn)),fn+an>=sn&&(Jr-=on*(fn+1+an-sn)),Xr+tn>=on&&(Jr-=Xr+tn-on+4),Ur=en[Jr++],Fr=en[Jr++],Kr=en[Jr++],yr[dn]=(Er[Ur]+Er[Fr+256>>0]+Er[Kr+512>>0]>>16)-128,xr[dn]=(Er[Ur+768>>0]+Er[Fr+1024>>0]+Er[Kr+1280>>0]>>16)-128,vr[dn]=(Er[Ur+1280>>0]+Er[Fr+1536>>0]+Er[Kr+1792>>0]>>16)-128;zr=Mr(yr,or,zr,er,nr),Gr=Mr(xr,ur,Gr,rr,ir),Vr=Mr(vr,ur,Vr,rr,ir),Xr+=32}fn+=8}if(mr>=0){var pn=[];pn[1]=mr+1,pn[0]=(1<<mr+1)-1,Pr(pn)}return Sr(65497),new Uint8Array(br)},tr=tr||50,function(){for(var $r=String.fromCharCode,Br=0;Br<256;Br++)_r[Br]=$r(Br)}(),er=wr(Rr,Nr),rr=wr(Or,jr),nr=wr(Dr,Ir),ir=wr(Lr,Cr),function(){for(var $r=1,Br=2,zr=1;zr<=15;zr++){for(var Gr=$r;Gr<Br;Gr++)dr[32767+Gr]=zr,hr[32767+Gr]=[],hr[32767+Gr][1]=zr,hr[32767+Gr][0]=Gr;for(var Vr=-(Br-1);Vr<=-$r;Vr++)dr[32767+Vr]=zr,hr[32767+Vr]=[],hr[32767+Vr][1]=zr,hr[32767+Vr][0]=Br-1+Vr;$r<<=1,Br<<=1}}(),function(){for(var $r=0;$r<256;$r++)Er[$r]=19595*$r,Er[$r+256>>0]=38470*$r,Er[$r+512>>0]=7471*$r+32768,Er[$r+768>>0]=-11059*$r,Er[$r+1024>>0]=-21709*$r,Er[$r+1280>>0]=32768*$r+8421375,Er[$r+1536>>0]=-27439*$r,Er[$r+1792>>0]=-5329*$r}(),qr(tr)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(tr,er){if(this.pos=0,this.buffer=tr,this.datav=new DataView(tr.buffer),this.is_with_alpha=!!er,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(tr){function er(Rr){if(!Rr)throw Error("assert :P")}function rr(Rr,Nr,Dr){for(var Ir=0;4>Ir;Ir++)if(Rr[Nr+Ir]!=Dr.charCodeAt(Ir))return!0;return!1}function nr(Rr,Nr,Dr,Ir,Or){for(var jr=0;jr<Or;jr++)Rr[Nr+jr]=Dr[Ir+jr]}function ir(Rr,Nr,Dr,Ir){for(var Or=0;Or<Ir;Or++)Rr[Nr+Or]=Dr}function sr(Rr){return new Int32Array(Rr)}function ar(Rr,Nr){for(var Dr=[],Ir=0;Ir<Rr;Ir++)Dr.push(new Nr);return Dr}function cr(Rr,Nr){var Dr=[];return function Ir(Or,jr,Lr){for(var Cr=Lr[jr],wr=0;wr<Cr&&(Or.push(Lr.length>jr+1?[]:new Nr),!(Lr.length<jr+1));wr++)Ir(Or[wr],jr+1,Lr)}(Dr,0,Rr),Dr}var lr=function(){var Rr=this;function Nr(Hr,Yr){for(var nn=1<<Yr-1>>>0;Hr&nn;)nn>>>=1;return nn?(Hr&nn-1)+nn:Hr}function Dr(Hr,Yr,nn,hn,xn){er(!(hn%nn));do Hr[Yr+(hn-=nn)]=xn;while(0<hn)}function Ir(Hr,Yr,nn,hn,xn){if(er(2328>=xn),512>=xn)var Sn=sr(512);else if((Sn=sr(xn))==null)return 0;return function(Rn,jn,$n,Fn,ss,vs){var _s,gs,qs=jn,Os=1<<$n,as=sr(16),cs=sr(16);for(er(ss!=0),er(Fn!=null),er(Rn!=null),er(0<$n),gs=0;gs<ss;++gs){if(15<Fn[gs])return 0;++as[Fn[gs]]}if(as[0]==ss)return 0;for(cs[1]=0,_s=1;15>_s;++_s){if(as[_s]>1<<_s)return 0;cs[_s+1]=cs[_s]+as[_s]}for(gs=0;gs<ss;++gs)_s=Fn[gs],0<Fn[gs]&&(vs[cs[_s]++]=gs);if(cs[15]==1)return(Fn=new Or).g=0,Fn.value=vs[0],Dr(Rn,qs,1,Os,Fn),Os;var Us,Hs=-1,zs=Os-1,$a=0,na=1,so=1,ba=1<<$n;for(gs=0,_s=1,ss=2;_s<=$n;++_s,ss<<=1){if(na+=so<<=1,0>(so-=as[_s]))return 0;for(;0<as[_s];--as[_s])(Fn=new Or).g=_s,Fn.value=vs[gs++],Dr(Rn,qs+$a,ss,ba,Fn),$a=Nr($a,_s)}for(_s=$n+1,ss=2;15>=_s;++_s,ss<<=1){if(na+=so<<=1,0>(so-=as[_s]))return 0;for(;0<as[_s];--as[_s]){if(Fn=new Or,($a&zs)!=Hs){for(qs+=ba,Us=1<<(Hs=_s)-$n;15>Hs&&!(0>=(Us-=as[Hs]));)++Hs,Us<<=1;Os+=ba=1<<(Us=Hs-$n),Rn[jn+(Hs=$a&zs)].g=Us+$n,Rn[jn+Hs].value=qs-jn-Hs}Fn.g=_s-$n,Fn.value=vs[gs++],Dr(Rn,qs+($a>>$n),ss,ba,Fn),$a=Nr($a,_s)}}return na!=2*cs[15]-1?0:Os}(Hr,Yr,nn,hn,xn,Sn)}function Or(){this.value=this.g=0}function jr(){this.value=this.g=0}function Lr(){this.G=ar(5,Or),this.H=sr(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=ar(yl,jr)}function Cr(Hr,Yr,nn,hn){er(Hr!=null),er(Yr!=null),er(2147483648>hn),Hr.Ca=254,Hr.I=0,Hr.b=-8,Hr.Ka=0,Hr.oa=Yr,Hr.pa=nn,Hr.Jd=Yr,Hr.Yc=nn+hn,Hr.Zc=4<=hn?nn+hn-4+1:nn,Xr(Hr)}function wr(Hr,Yr){for(var nn=0;0<Yr--;)nn|=Fr(Hr,128)<<Yr;return nn}function Pr(Hr,Yr){var nn=wr(Hr,Yr);return Ur(Hr)?-nn:nn}function Ar(Hr,Yr,nn,hn){var xn,Sn=0;for(er(Hr!=null),er(Yr!=null),er(4294967288>hn),Hr.Sb=hn,Hr.Ra=0,Hr.u=0,Hr.h=0,4<hn&&(hn=4),xn=0;xn<hn;++xn)Sn+=Yr[nn+xn]<<8*xn;Hr.Ra=Sn,Hr.bb=hn,Hr.oa=Yr,Hr.pa=nn}function Sr(Hr){for(;8<=Hr.u&&Hr.bb<Hr.Sb;)Hr.Ra>>>=8,Hr.Ra+=Hr.oa[Hr.pa+Hr.bb]<<ap-8>>>0,++Hr.bb,Hr.u-=8;zr(Hr)&&(Hr.h=1,Hr.u=0)}function Mr(Hr,Yr){if(er(0<=Yr),!Hr.h&&Yr<=sp){var nn=Br(Hr)&ip[Yr];return Hr.u+=Yr,Sr(Hr),nn}return Hr.h=1,Hr.u=0}function qr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function $r(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Br(Hr){return Hr.Ra>>>(Hr.u&ap-1)>>>0}function zr(Hr){return er(Hr.bb<=Hr.Sb),Hr.h||Hr.bb==Hr.Sb&&Hr.u>ap}function Gr(Hr,Yr){Hr.u=Yr,Hr.h=zr(Hr)}function Vr(Hr){Hr.u>=Ep&&(er(Hr.u>=Ep),Sr(Hr))}function Xr(Hr){er(Hr!=null&&Hr.oa!=null),Hr.pa<Hr.Zc?(Hr.I=(Hr.oa[Hr.pa++]|Hr.I<<8)>>>0,Hr.b+=8):(er(Hr!=null&&Hr.oa!=null),Hr.pa<Hr.Yc?(Hr.b+=8,Hr.I=Hr.oa[Hr.pa++]|Hr.I<<8):Hr.Ka?Hr.b=0:(Hr.I<<=8,Hr.b+=8,Hr.Ka=1))}function Ur(Hr){return wr(Hr,1)}function Fr(Hr,Yr){var nn=Hr.Ca;0>Hr.b&&Xr(Hr);var hn=Hr.b,xn=nn*Yr>>>8,Sn=(Hr.I>>>hn>xn)+0;for(Sn?(nn-=xn,Hr.I-=xn+1<<hn>>>0):nn=xn+1,hn=nn,xn=0;256<=hn;)xn+=8,hn>>=8;return hn=7^xn+Ll[hn],Hr.b-=hn,Hr.Ca=(nn<<hn)-1,Sn}function Kr(Hr,Yr,nn){Hr[Yr+0]=nn>>24&255,Hr[Yr+1]=nn>>16&255,Hr[Yr+2]=nn>>8&255,Hr[Yr+3]=nn>>0&255}function Zr(Hr,Yr){return Hr[Yr+0]<<0|Hr[Yr+1]<<8}function Jr(Hr,Yr){return Zr(Hr,Yr)|Hr[Yr+2]<<16}function tn(Hr,Yr){return Zr(Hr,Yr)|Zr(Hr,Yr+2)<<16}function an(Hr,Yr){var nn=1<<Yr;return er(Hr!=null),er(0<Yr),Hr.X=sr(nn),Hr.X==null?0:(Hr.Mb=32-Yr,Hr.Xa=Yr,1)}function dn(Hr,Yr){er(Hr!=null),er(Yr!=null),er(Hr.Xa==Yr.Xa),nr(Yr.X,0,Hr.X,0,1<<Yr.Xa)}function en(){this.X=[],this.Xa=this.Mb=0}function rn(Hr,Yr,nn,hn){er(nn!=null),er(hn!=null);var xn=nn[0],Sn=hn[0];return xn==0&&(xn=(Hr*Sn+Yr/2)/Yr),Sn==0&&(Sn=(Yr*xn+Hr/2)/Hr),0>=xn||0>=Sn?0:(nn[0]=xn,hn[0]=Sn,1)}function sn(Hr,Yr){return Hr+(1<<Yr)-1>>>Yr}function on(Hr,Yr){return((4278255360&Hr)+(4278255360&Yr)>>>0&4278255360)+((16711935&Hr)+(16711935&Yr)>>>0&16711935)>>>0}function fn(Hr,Yr){Rr[Yr]=function(nn,hn,xn,Sn,Rn,jn,$n){var Fn;for(Fn=0;Fn<Rn;++Fn){var ss=Rr[Hr](jn[$n+Fn-1],xn,Sn+Fn);jn[$n+Fn]=on(nn[hn+Fn],ss)}}}function pn(){this.ud=this.hd=this.jd=0}function gn(Hr,Yr){return((4278124286&(Hr^Yr))>>>1)+(Hr&Yr)>>>0}function Pn(Hr){return 0<=Hr&&256>Hr?Hr:0>Hr?0:255<Hr?255:void 0}function In(Hr,Yr){return Pn(Hr+(Hr-Yr+.5>>1))}function En(Hr,Yr,nn){return Math.abs(Yr-nn)-Math.abs(Hr-nn)}function zn(Hr,Yr,nn,hn,xn,Sn,Rn){for(hn=Sn[Rn-1],nn=0;nn<xn;++nn)Sn[Rn+nn]=hn=on(Hr[Yr+nn],hn)}function yn(Hr,Yr,nn,hn,xn){var Sn;for(Sn=0;Sn<nn;++Sn){var Rn=Hr[Yr+Sn],jn=Rn>>8&255,$n=16711935&($n=($n=16711935&Rn)+((jn<<16)+jn));hn[xn+Sn]=(4278255360&Rn)+$n>>>0}}function Vn(Hr,Yr){Yr.jd=Hr>>0&255,Yr.hd=Hr>>8&255,Yr.ud=Hr>>16&255}function Kn(Hr,Yr,nn,hn,xn,Sn){var Rn;for(Rn=0;Rn<hn;++Rn){var jn=Yr[nn+Rn],$n=jn>>>8,Fn=jn,ss=255&(ss=(ss=jn>>>16)+((Hr.jd<<24>>24)*($n<<24>>24)>>>5));Fn=255&(Fn=(Fn=Fn+((Hr.hd<<24>>24)*($n<<24>>24)>>>5))+((Hr.ud<<24>>24)*(ss<<24>>24)>>>5)),xn[Sn+Rn]=(4278255360&jn)+(ss<<16)+Fn}}function es(Hr,Yr,nn,hn,xn){Rr[Yr]=function(Sn,Rn,jn,$n,Fn,ss,vs,_s,gs){for($n=vs;$n<_s;++$n)for(vs=0;vs<gs;++vs)Fn[ss++]=xn(jn[hn(Sn[Rn++])])},Rr[Hr]=function(Sn,Rn,jn,$n,Fn,ss,vs){var _s=8>>Sn.b,gs=Sn.Ea,qs=Sn.K[0],Os=Sn.w;if(8>_s)for(Sn=(1<<Sn.b)-1,Os=(1<<_s)-1;Rn<jn;++Rn){var as,cs=0;for(as=0;as<gs;++as)as&Sn||(cs=hn($n[Fn++])),ss[vs++]=xn(qs[cs&Os]),cs>>=_s}else Rr["VP8LMapColor"+nn]($n,Fn,qs,Os,ss,vs,Rn,jn,gs)}}function Xn(Hr,Yr,nn,hn,xn){for(nn=Yr+nn;Yr<nn;){var Sn=Hr[Yr++];hn[xn++]=Sn>>16&255,hn[xn++]=Sn>>8&255,hn[xn++]=Sn>>0&255}}function ds(Hr,Yr,nn,hn,xn){for(nn=Yr+nn;Yr<nn;){var Sn=Hr[Yr++];hn[xn++]=Sn>>16&255,hn[xn++]=Sn>>8&255,hn[xn++]=Sn>>0&255,hn[xn++]=Sn>>24&255}}function fs(Hr,Yr,nn,hn,xn){for(nn=Yr+nn;Yr<nn;){var Sn=(Rn=Hr[Yr++])>>16&240|Rn>>12&15,Rn=Rn>>0&240|Rn>>28&15;hn[xn++]=Sn,hn[xn++]=Rn}}function os(Hr,Yr,nn,hn,xn){for(nn=Yr+nn;Yr<nn;){var Sn=(Rn=Hr[Yr++])>>16&248|Rn>>13&7,Rn=Rn>>5&224|Rn>>3&31;hn[xn++]=Sn,hn[xn++]=Rn}}function Hn(Hr,Yr,nn,hn,xn){for(nn=Yr+nn;Yr<nn;){var Sn=Hr[Yr++];hn[xn++]=Sn>>0&255,hn[xn++]=Sn>>8&255,hn[xn++]=Sn>>16&255}}function Ln(Hr,Yr,nn,hn,xn,Sn){if(Sn==0)for(nn=Yr+nn;Yr<nn;)Kr(hn,((Sn=Hr[Yr++])[0]>>24|Sn[1]>>8&65280|Sn[2]<<8&16711680|Sn[3]<<24)>>>0),xn+=32;else nr(hn,xn,Hr,Yr,nn)}function Dn(Hr,Yr){Rr[Yr][0]=Rr[Hr+"0"],Rr[Yr][1]=Rr[Hr+"1"],Rr[Yr][2]=Rr[Hr+"2"],Rr[Yr][3]=Rr[Hr+"3"],Rr[Yr][4]=Rr[Hr+"4"],Rr[Yr][5]=Rr[Hr+"5"],Rr[Yr][6]=Rr[Hr+"6"],Rr[Yr][7]=Rr[Hr+"7"],Rr[Yr][8]=Rr[Hr+"8"],Rr[Yr][9]=Rr[Hr+"9"],Rr[Yr][10]=Rr[Hr+"10"],Rr[Yr][11]=Rr[Hr+"11"],Rr[Yr][12]=Rr[Hr+"12"],Rr[Yr][13]=Rr[Hr+"13"],Rr[Yr][14]=Rr[Hr+"0"],Rr[Yr][15]=Rr[Hr+"0"]}function ls(Hr){return Hr==km||Hr==Cm||Hr==Jp||Hr==Nm}function Ds(){this.eb=[],this.size=this.A=this.fb=0}function xs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ds,this.f.kb=new xs,this.sd=null}function Jn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function is(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function bs(Hr){return alert("todo:WebPSamplerProcessPlane"),Hr.T}function Bn(Hr,Yr){var nn=Hr.T,hn=Yr.ba.f.RGBA,xn=hn.eb,Sn=hn.fb+Hr.ka*hn.A,Rn=ru[Yr.ba.S],jn=Hr.y,$n=Hr.O,Fn=Hr.f,ss=Hr.N,vs=Hr.ea,_s=Hr.W,gs=Yr.cc,qs=Yr.dc,Os=Yr.Mc,as=Yr.Nc,cs=Hr.ka,Us=Hr.ka+Hr.T,Hs=Hr.U,zs=Hs+1>>1;for(cs==0?Rn(jn,$n,null,null,Fn,ss,vs,_s,Fn,ss,vs,_s,xn,Sn,null,null,Hs):(Rn(Yr.ec,Yr.fc,jn,$n,gs,qs,Os,as,Fn,ss,vs,_s,xn,Sn-hn.A,xn,Sn,Hs),++nn);cs+2<Us;cs+=2)gs=Fn,qs=ss,Os=vs,as=_s,ss+=Hr.Rc,_s+=Hr.Rc,Sn+=2*hn.A,Rn(jn,($n+=2*Hr.fa)-Hr.fa,jn,$n,gs,qs,Os,as,Fn,ss,vs,_s,xn,Sn-hn.A,xn,Sn,Hs);return $n+=Hr.fa,Hr.j+Us<Hr.o?(nr(Yr.ec,Yr.fc,jn,$n,Hs),nr(Yr.cc,Yr.dc,Fn,ss,zs),nr(Yr.Mc,Yr.Nc,vs,_s,zs),nn--):1&Us||Rn(jn,$n,null,null,Fn,ss,vs,_s,Fn,ss,vs,_s,xn,Sn+hn.A,null,null,Hs),nn}function Yn(Hr,Yr,nn){var hn=Hr.F,xn=[Hr.J];if(hn!=null){var Sn=Hr.U,Rn=Yr.ba.S,jn=Rn==Qp||Rn==Jp;Yr=Yr.ba.f.RGBA;var $n=[0],Fn=Hr.ka;$n[0]=Hr.T,Hr.Kb&&(Fn==0?--$n[0]:(--Fn,xn[0]-=Hr.width),Hr.j+Hr.ka+Hr.T==Hr.o&&($n[0]=Hr.o-Hr.j-Fn));var ss=Yr.eb;Fn=Yr.fb+Fn*Yr.A,Hr=Mo(hn,xn[0],Hr.width,Sn,$n,ss,Fn+(jn?0:3),Yr.A),er(nn==$n),Hr&&ls(Rn)&&eu(ss,Fn,jn,Sn,$n,Yr.A)}return 0}function vn(Hr){var Yr=Hr.ma,nn=Yr.ba.S,hn=11>nn,xn=nn==Yp||nn==Zp||nn==Qp||nn==jm||nn==12||ls(nn);if(Yr.memory=null,Yr.Ib=null,Yr.Jb=null,Yr.Nd=null,!_p(Yr.Oa,Hr,xn?11:12))return 0;if(xn&&ls(nn)&&Ws(),Hr.da)alert("todo:use_scaling");else{if(hn){if(Yr.Ib=bs,Hr.Kb){if(nn=Hr.U+1>>1,Yr.memory=sr(Hr.U+2*nn),Yr.memory==null)return 0;Yr.ec=Yr.memory,Yr.fc=0,Yr.cc=Yr.ec,Yr.dc=Yr.fc+Hr.U,Yr.Mc=Yr.cc,Yr.Nc=Yr.dc+nn,Yr.Ib=Bn,Ws()}}else alert("todo:EmitYUV");xn&&(Yr.Jb=Yn,hn&&ms())}if(hn&&!$0){for(Hr=0;256>Hr;++Hr)Jy[Hr]=89858*(Hr-128)+tm>>em,rx[Hr]=-22014*(Hr-128)+tm,tx[Hr]=-45773*(Hr-128),ex[Hr]=113618*(Hr-128)+tm>>em;for(Hr=kp;Hr<$m;++Hr)Yr=76283*(Hr-16)+tm>>em,nx[Hr-kp]=So(Yr,255),ix[Hr-kp]=So(Yr+8>>4,15);$0=1}return 1}function _n(Hr){var Yr=Hr.ma,nn=Hr.U,hn=Hr.T;return er(!(1&Hr.ka)),0>=nn||0>=hn?0:(nn=Yr.Ib(Hr,Yr),Yr.Jb!=null&&Yr.Jb(Hr,Yr,nn),Yr.Dc+=nn,1)}function Mn(Hr){Hr.ma.memory=null}function Cn(Hr,Yr,nn,hn){return Mr(Hr,8)!=47?0:(Yr[0]=Mr(Hr,14)+1,nn[0]=Mr(Hr,14)+1,hn[0]=Mr(Hr,1),Mr(Hr,3)!=0?0:!Hr.h)}function Zn(Hr,Yr){if(4>Hr)return Hr+1;var nn=Hr-2>>1;return(2+(1&Hr)<<nn)+Mr(Yr,nn)+1}function qn(Hr,Yr){return 120<Yr?Yr-120:1<=(nn=((nn=Fy[Yr-1])>>4)*Hr+(8-(15&nn)))?nn:1;var nn}function wn(Hr,Yr,nn){var hn=Br(nn),xn=Hr[Yr+=255&hn].g-8;return 0<xn&&(Gr(nn,nn.u+8),hn=Br(nn),Yr+=Hr[Yr].value,Yr+=hn&(1<<xn)-1),Gr(nn,nn.u+Hr[Yr].g),Hr[Yr].value}function On(Hr,Yr,nn){return nn.g+=Hr.g,nn.value+=Hr.value<<Yr>>>0,er(8>=nn.g),Hr.g}function Gn(Hr,Yr,nn){var hn=Hr.xc;return er((Yr=hn==0?0:Hr.vc[Hr.md*(nn>>hn)+(Yr>>hn)])<Hr.Wb),Hr.Ya[Yr]}function Qn(Hr,Yr,nn,hn){var xn=Hr.ab,Sn=Hr.c*Yr,Rn=Hr.C;Yr=Rn+Yr;var jn=nn,$n=hn;for(hn=Hr.Ta,nn=Hr.Ua;0<xn--;){var Fn=Hr.gc[xn],ss=Rn,vs=Yr,_s=jn,gs=$n,qs=($n=hn,jn=nn,Fn.Ea);switch(er(ss<vs),er(vs<=Fn.nc),Fn.hc){case 2:zp(_s,gs,(vs-ss)*qs,$n,jn);break;case 0:var Os=ss,as=vs,cs=$n,Us=jn,Hs=(ba=Fn).Ea;Os==0&&(Pm(_s,gs,null,null,1,cs,Us),zn(_s,gs+1,0,0,Hs-1,cs,Us+1),gs+=Hs,Us+=Hs,++Os);for(var zs=1<<ba.b,$a=zs-1,na=sn(Hs,ba.b),so=ba.K,ba=ba.w+(Os>>ba.b)*na;Os<as;){var wo=so,Ao=ba,vo=1;for(Sp(_s,gs,cs,Us-Hs,1,cs,Us);vo<Hs;){var bo=(vo&~$a)+zs;bo>Hs&&(bo=Hs),(0,Vu[wo[Ao++]>>8&15])(_s,gs+ +vo,cs,Us+vo-Hs,bo-vo,cs,Us+vo),vo=bo}gs+=Hs,Us+=Hs,++Os&$a||(ba+=na)}vs!=Fn.nc&&nr($n,jn-qs,$n,jn+(vs-ss-1)*qs,qs);break;case 1:for(qs=_s,as=gs,Hs=(_s=Fn.Ea)-(Us=_s&~(cs=(gs=1<<Fn.b)-1)),Os=sn(_s,Fn.b),zs=Fn.K,Fn=Fn.w+(ss>>Fn.b)*Os;ss<vs;){for($a=zs,na=Fn,so=new pn,ba=as+Us,wo=as+_s;as<ba;)Vn($a[na++],so),Qu(so,qs,as,gs,$n,jn),as+=gs,jn+=gs;as<wo&&(Vn($a[na++],so),Qu(so,qs,as,Hs,$n,jn),as+=Hs,jn+=Hs),++ss&cs||(Fn+=Os)}break;case 3:if(_s==$n&&gs==jn&&0<Fn.b){for(as=$n,_s=qs=jn+(vs-ss)*qs-(Us=(vs-ss)*sn(Fn.Ea,Fn.b)),gs=$n,cs=jn,Os=[],Us=(Hs=Us)-1;0<=Us;--Us)Os[Us]=gs[cs+Us];for(Us=Hs-1;0<=Us;--Us)as[_s+Us]=Os[Us];Ql(Fn,ss,vs,$n,qs,$n,jn)}else Ql(Fn,ss,vs,_s,gs,$n,jn)}jn=hn,$n=nn}$n!=nn&&nr(hn,nn,jn,$n,Sn)}function $s(Hr,Yr){var nn=Hr.V,hn=Hr.Ba+Hr.c*Hr.C,xn=Yr-Hr.C;if(er(Yr<=Hr.l.o),er(16>=xn),0<xn){var Sn=Hr.l,Rn=Hr.Ta,jn=Hr.Ua,$n=Sn.width;if(Qn(Hr,xn,nn,hn),xn=jn=[jn],er((nn=Hr.C)<(hn=Yr)),er(Sn.v<Sn.va),hn>Sn.o&&(hn=Sn.o),nn<Sn.j){var Fn=Sn.j-nn;nn=Sn.j,xn[0]+=Fn*$n}if(nn>=hn?nn=0:(xn[0]+=4*Sn.v,Sn.ka=nn-Sn.j,Sn.U=Sn.va-Sn.v,Sn.T=hn-nn,nn=1),nn){if(jn=jn[0],11>(nn=Hr.ca).S){var ss=nn.f.RGBA,vs=(hn=nn.S,xn=Sn.U,Sn=Sn.T,Fn=ss.eb,ss.A),_s=Sn;for(ss=ss.fb+Hr.Ma*ss.A;0<_s--;){var gs=Rn,qs=jn,Os=xn,as=Fn,cs=ss;switch(hn){case Xp:Fl(gs,qs,Os,as,cs);break;case Yp:Tl(gs,qs,Os,as,cs);break;case km:Tl(gs,qs,Os,as,cs),eu(as,cs,0,Os,1,0);break;case R0:ku(gs,qs,Os,as,cs);break;case Zp:Ln(gs,qs,Os,as,cs,1);break;case Cm:Ln(gs,qs,Os,as,cs,1),eu(as,cs,0,Os,1,0);break;case Qp:Ln(gs,qs,Os,as,cs,0);break;case Jp:Ln(gs,qs,Os,as,cs,0),eu(as,cs,1,Os,1,0);break;case jm:Uu(gs,qs,Os,as,cs);break;case Nm:Uu(gs,qs,Os,as,cs),$o(as,cs,Os,1,0);break;case P0:ju(gs,qs,Os,as,cs);break;default:er(0)}jn+=$n,ss+=vs}Hr.Ma+=Sn}else alert("todo:EmitRescaledRowsYUVA");er(Hr.Ma<=nn.height)}}Hr.C=Yr,er(Hr.C<=Hr.i)}function us(Hr){var Yr;if(0<Hr.ua)return 0;for(Yr=0;Yr<Hr.Wb;++Yr){var nn=Hr.Ya[Yr].G,hn=Hr.Ya[Yr].H;if(0<nn[1][hn[1]+0].g||0<nn[2][hn[2]+0].g||0<nn[3][hn[3]+0].g)return 0}return 1}function ws(Hr,Yr,nn,hn,xn,Sn){if(Hr.Z!=0){var Rn=Hr.qd,jn=Hr.rd;for(er(Wu[Hr.Z]!=null);Yr<nn;++Yr)Wu[Hr.Z](Rn,jn,hn,xn,hn,xn,Sn),Rn=hn,jn=xn,xn+=Sn;Hr.qd=Rn,Hr.rd=jn}}function As(Hr,Yr){var nn=Hr.l.ma,hn=nn.Z==0||nn.Z==1?Hr.l.j:Hr.C;if(hn=Hr.C<hn?hn:Hr.C,er(Yr<=Hr.l.o),Yr>hn){var xn=Hr.l.width,Sn=nn.ca,Rn=nn.tb+xn*hn,jn=Hr.V,$n=Hr.Ba+Hr.c*hn,Fn=Hr.gc;er(Hr.ab==1),er(Fn[0].hc==3),qp(Fn[0],hn,Yr,jn,$n,Sn,Rn),ws(nn,hn,Yr,Sn,Rn,xn)}Hr.C=Hr.Ma=Yr}function Rs(Hr,Yr,nn,hn,xn,Sn,Rn){var jn=Hr.$/hn,$n=Hr.$%hn,Fn=Hr.m,ss=Hr.s,vs=nn+Hr.$,_s=vs;xn=nn+hn*xn;var gs=nn+hn*Sn,qs=280+ss.ua,Os=Hr.Pb?jn:16777216,as=0<ss.ua?ss.Wa:null,cs=ss.wc,Us=vs<gs?Gn(ss,$n,jn):null;er(Hr.C<Sn),er(gs<=xn);var Hs=!1;e:for(;;){for(;Hs||vs<gs;){var zs=0;if(jn>=Os){var $a=vs-nn;er((Os=Hr).Pb),Os.wd=Os.m,Os.xd=$a,0<Os.s.ua&&dn(Os.s.Wa,Os.s.vb),Os=jn+Vy}if($n&cs||(Us=Gn(ss,$n,jn)),er(Us!=null),Us.Qb&&(Yr[vs]=Us.qb,Hs=!0),!Hs)if(Vr(Fn),Us.jc){zs=Fn,$a=Yr;var na=vs,so=Us.pd[Br(zs)&yl-1];er(Us.jc),256>so.g?(Gr(zs,zs.u+so.g),$a[na]=so.value,zs=0):(Gr(zs,zs.u+so.g-256),er(256<=so.value),zs=so.value),zs==0&&(Hs=!0)}else zs=wn(Us.G[0],Us.H[0],Fn);if(Fn.h)break;if(Hs||256>zs){if(!Hs)if(Us.nd)Yr[vs]=(Us.qb|zs<<8)>>>0;else{if(Vr(Fn),Hs=wn(Us.G[1],Us.H[1],Fn),Vr(Fn),$a=wn(Us.G[2],Us.H[2],Fn),na=wn(Us.G[3],Us.H[3],Fn),Fn.h)break;Yr[vs]=(na<<24|Hs<<16|zs<<8|$a)>>>0}if(Hs=!1,++vs,++$n>=hn&&($n=0,++jn,Rn!=null&&jn<=Sn&&!(jn%16)&&Rn(Hr,jn),as!=null))for(;_s<vs;)zs=Yr[_s++],as.X[(506832829*zs&4294967295)>>>as.Mb]=zs}else if(280>zs){if(zs=Zn(zs-256,Fn),$a=wn(Us.G[4],Us.H[4],Fn),Vr(Fn),$a=qn(hn,$a=Zn($a,Fn)),Fn.h)break;if(vs-nn<$a||xn-vs<zs)break e;for(na=0;na<zs;++na)Yr[vs+na]=Yr[vs+na-$a];for(vs+=zs,$n+=zs;$n>=hn;)$n-=hn,++jn,Rn!=null&&jn<=Sn&&!(jn%16)&&Rn(Hr,jn);if(er(vs<=xn),$n&cs&&(Us=Gn(ss,$n,jn)),as!=null)for(;_s<vs;)zs=Yr[_s++],as.X[(506832829*zs&4294967295)>>>as.Mb]=zs}else{if(!(zs<qs))break e;for(Hs=zs-280,er(as!=null);_s<vs;)zs=Yr[_s++],as.X[(506832829*zs&4294967295)>>>as.Mb]=zs;zs=vs,er(!(Hs>>>($a=as).Xa)),Yr[zs]=$a.X[Hs],Hs=!0}Hs||er(Fn.h==zr(Fn))}if(Hr.Pb&&Fn.h&&vs<xn)er(Hr.m.h),Hr.a=5,Hr.m=Hr.wd,Hr.$=Hr.xd,0<Hr.s.ua&&dn(Hr.s.vb,Hr.s.Wa);else{if(Fn.h)break e;Rn!=null&&Rn(Hr,jn>Sn?Sn:jn),Hr.a=0,Hr.$=vs-nn}return 1}return Hr.a=3,0}function Ms(Hr){er(Hr!=null),Hr.vc=null,Hr.yc=null,Hr.Ya=null;var Yr=Hr.Wa;Yr!=null&&(Yr.X=null),Hr.vb=null,er(Hr!=null)}function Bs(){var Hr=new rp;return Hr==null?null:(Hr.a=0,Hr.xb=k0,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),zp=yn,Qu=Kn,Fl=Xn,Tl=ds,Uu=fs,ju=os,ku=Hn,Rr.VP8LMapColor32b=op,Rr.VP8LMapColor8b=Hp,Hr)}function Zs(Hr,Yr,nn,hn,xn){var Sn=1,Rn=[Hr],jn=[Yr],$n=hn.m,Fn=hn.s,ss=null,vs=0;e:for(;;){if(nn)for(;Sn&&Mr($n,1);){var _s=Rn,gs=jn,qs=hn,Os=1,as=qs.m,cs=qs.gc[qs.ab],Us=Mr(as,2);if(qs.Oc&1<<Us)Sn=0;else{switch(qs.Oc|=1<<Us,cs.hc=Us,cs.Ea=_s[0],cs.nc=gs[0],cs.K=[null],++qs.ab,er(4>=qs.ab),Us){case 0:case 1:cs.b=Mr(as,3)+2,Os=Zs(sn(cs.Ea,cs.b),sn(cs.nc,cs.b),0,qs,cs.K),cs.K=cs.K[0];break;case 3:var Hs,zs=Mr(as,8)+1,$a=16<zs?0:4<zs?1:2<zs?2:3;if(_s[0]=sn(cs.Ea,$a),cs.b=$a,Hs=Os=Zs(zs,1,0,qs,cs.K)){var na,so=zs,ba=cs,wo=1<<(8>>ba.b),Ao=sr(wo);if(Ao==null)Hs=0;else{var vo=ba.K[0],bo=ba.w;for(Ao[0]=ba.K[0][0],na=1;na<1*so;++na)Ao[na]=on(vo[bo+na],Ao[na-1]);for(;na<4*wo;++na)Ao[na]=0;ba.K[0]=null,ba.K[0]=Ao,Hs=1}}Os=Hs;break;case 2:break;default:er(0)}Sn=Os}}if(Rn=Rn[0],jn=jn[0],Sn&&Mr($n,1)&&!(Sn=1<=(vs=Mr($n,4))&&11>=vs)){hn.a=3;break e}var Co;if(Co=Sn)t:{var To,uo,qo,Bl=hn,Ho=Rn,Vl=jn,Ro=vs,Wl=nn,Gl=Bl.m,Xo=Bl.s,xl=[null],Nl=1,nu=0,Ru=By[Ro];r:for(;;){if(Wl&&Mr(Gl,1)){var Yo=Mr(Gl,3)+2,Ou=sn(Ho,Yo),ep=sn(Vl,Yo),hp=Ou*ep;if(!Zs(Ou,ep,0,Bl,xl))break r;for(xl=xl[0],Xo.xc=Yo,To=0;To<hp;++To){var Gu=xl[To]>>8&65535;xl[To]=Gu,Gu>=Nl&&(Nl=Gu+1)}}if(Gl.h)break r;for(uo=0;5>uo;++uo){var Fo=T0[uo];!uo&&0<Ro&&(Fo+=1<<Ro),nu<Fo&&(nu=Fo)}var Mm=ar(Nl*Ru,Or),L0=Nl,F0=ar(L0,Lr);if(F0==null)var nm=null;else er(65536>=L0),nm=F0;var Cp=sr(nu);if(nm==null||Cp==null||Mm==null){Bl.a=1;break r}var im=Mm;for(To=qo=0;To<Nl;++To){var pu=nm[To],fp=pu.G,pp=pu.H,B0=0,sm=1,V0=0;for(uo=0;5>uo;++uo){Fo=T0[uo],fp[uo]=im,pp[uo]=qo,!uo&&0<Ro&&(Fo+=1<<Ro);i:{var am,Dm=Fo,om=Bl,Np=Cp,ox=im,lx=qo,Lm=0,Ku=om.m,cx=Mr(Ku,1);if(ir(Np,0,0,Dm),cx){var ux=Mr(Ku,1)+1,dx=Mr(Ku,1),U0=Mr(Ku,dx==0?1:8);Np[U0]=1,ux==2&&(Np[U0=Mr(Ku,8)]=1);var lm=1}else{var z0=sr(19),q0=Mr(Ku,4)+4;if(19<q0){om.a=3;var cm=0;break i}for(am=0;am<q0;++am)z0[Ly[am]]=Mr(Ku,3);var Fm=void 0,Ip=void 0,H0=om,hx=z0,um=Dm,W0=Np,Bm=0,Xu=H0.m,G0=8,K0=ar(128,Or);n:for(;Ir(K0,0,7,hx,19);){if(Mr(Xu,1)){var fx=2+2*Mr(Xu,3);if((Fm=2+Mr(Xu,fx))>um)break n}else Fm=um;for(Ip=0;Ip<um&&Fm--;){Vr(Xu);var X0=K0[0+(127&Br(Xu))];Gr(Xu,Xu.u+X0.g);var mp=X0.value;if(16>mp)W0[Ip++]=mp,mp!=0&&(G0=mp);else{var px=mp==16,Y0=mp-16,mx=My[Y0],Z0=Mr(Xu,$y[Y0])+mx;if(Ip+Z0>um)break n;for(var gx=px?G0:0;0<Z0--;)W0[Ip++]=gx}}Bm=1;break n}Bm||(H0.a=3),lm=Bm}(lm=lm&&!Ku.h)&&(Lm=Ir(ox,lx,8,Np,Dm)),lm&&Lm!=0?cm=Lm:(om.a=3,cm=0)}if(cm==0)break r;if(sm&&Dy[uo]==1&&(sm=im[qo].g==0),B0+=im[qo].g,qo+=cm,3>=uo){var Op,Vm=Cp[0];for(Op=1;Op<Fo;++Op)Cp[Op]>Vm&&(Vm=Cp[Op]);V0+=Vm}}if(pu.nd=sm,pu.Qb=0,sm&&(pu.qb=(fp[3][pp[3]+0].value<<24|fp[1][pp[1]+0].value<<16|fp[2][pp[2]+0].value)>>>0,B0==0&&256>fp[0][pp[0]+0].value&&(pu.Qb=1,pu.qb+=fp[0][pp[0]+0].value<<8)),pu.jc=!pu.Qb&&6>V0,pu.jc){var dm,$u=pu;for(dm=0;dm<yl;++dm){var Yu=dm,Zu=$u.pd[Yu],hm=$u.G[0][$u.H[0]+Yu];256<=hm.value?(Zu.g=hm.g+256,Zu.value=hm.value):(Zu.g=0,Zu.value=0,Yu>>=On(hm,8,Zu),Yu>>=On($u.G[1][$u.H[1]+Yu],16,Zu),Yu>>=On($u.G[2][$u.H[2]+Yu],0,Zu),On($u.G[3][$u.H[3]+Yu],24,Zu))}}}Xo.vc=xl,Xo.Wb=Nl,Xo.Ya=nm,Xo.yc=Mm,Co=1;break t}Co=0}if(!(Sn=Co)){hn.a=3;break e}if(0<vs){if(Fn.ua=1<<vs,!an(Fn.Wa,vs)){hn.a=1,Sn=0;break e}}else Fn.ua=0;var Um=hn,Q0=Rn,yx=jn,zm=Um.s,qm=zm.xc;if(Um.c=Q0,Um.i=yx,zm.md=sn(Q0,qm),zm.wc=qm==0?-1:(1<<qm)-1,nn){hn.xb=Ky;break e}if((ss=sr(Rn*jn))==null){hn.a=1,Sn=0;break e}Sn=(Sn=Rs(hn,ss,0,Rn,jn,jn,null))&&!$n.h;break e}return Sn?(xn!=null?xn[0]=ss:(er(ss==null),er(nn)),hn.$=0,nn||Ms(Fn)):Ms(Fn),Sn}function Qs(Hr,Yr){var nn=Hr.c*Hr.i,hn=nn+Yr+16*Yr;return er(Hr.c<=Yr),Hr.V=sr(hn),Hr.V==null?(Hr.Ta=null,Hr.Ua=0,Hr.a=1,0):(Hr.Ta=Hr.V,Hr.Ua=Hr.Ba+nn+Yr,1)}function eo(Hr,Yr){var nn=Hr.C,hn=Yr-nn,xn=Hr.V,Sn=Hr.Ba+Hr.c*nn;for(er(Yr<=Hr.l.o);0<hn;){var Rn=16<hn?16:hn,jn=Hr.l.ma,$n=Hr.l.width,Fn=$n*Rn,ss=jn.ca,vs=jn.tb+$n*nn,_s=Hr.Ta,gs=Hr.Ua;Qn(Hr,Rn,xn,Sn),Uo(_s,gs,ss,vs,Fn),ws(jn,nn,nn+Rn,ss,vs,$n),hn-=Rn,xn+=Rn*Hr.c,nn+=Rn}er(nn==Yr),Hr.C=Hr.Ma=Yr}function ao(){this.ub=this.yd=this.td=this.Rb=0}function Un(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ts(){this.Fb=this.Bb=this.Cb=0,this.Zb=sr(4),this.Lb=sr(4)}function Nn(){this.Yb=function(){var Hr=[];return function Yr(nn,hn,xn){for(var Sn=xn[hn],Rn=0;Rn<Sn&&(nn.push(xn.length>hn+1?[]:0),!(xn.length<hn+1));Rn++)Yr(nn[Rn],hn+1,xn)}(Hr,0,[3,11]),Hr}()}function ns(){this.jb=sr(3),this.Wc=cr([4,8],Nn),this.Xc=cr([4,17],Nn)}function Ps(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new sr(4),this.od=new sr(4)}function Ss(){this.ld=this.La=this.dd=this.tc=0}function Ks(){this.Na=this.la=0}function Is(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function An(){this.ad=sr(384),this.Za=0,this.Ob=sr(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vs(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ss),this.Y=0,this.ya=Array(new An),this.aa=0,this.l=new Ns}function Fs(){this.y=sr(16),this.f=sr(8),this.ea=sr(8)}function Cs(){this.cb=this.a=0,this.sc="",this.m=new qr,this.Od=new ao,this.Kc=new Un,this.ed=new Ps,this.Qa=new Ts,this.Ic=this.$c=this.Aa=0,this.D=new Vs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=ar(8,qr),this.ia=0,this.pb=ar(4,Is),this.Pa=new ns,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fs),this.Hd=0,this.rb=Array(new Ks),this.sb=0,this.wa=Array(new Ss),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new An),this.L=this.aa=0,this.gd=cr([4,2],Ss),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ns(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ys(){var Hr=new Cs;return Hr!=null&&(Hr.a=0,Hr.sc="OK",Hr.cb=0,Hr.Xb=0,jp||(jp=mo)),Hr}function js(Hr,Yr,nn){return Hr.a==0&&(Hr.a=Yr,Hr.sc=nn,Hr.cb=0),0}function Js(Hr,Yr,nn){return 3<=nn&&Hr[Yr+0]==157&&Hr[Yr+1]==1&&Hr[Yr+2]==42}function to(Hr,Yr){if(Hr==null)return 0;if(Hr.a=0,Hr.sc="OK",Yr==null)return js(Hr,2,"null VP8Io passed to VP8GetHeaders()");var nn=Yr.data,hn=Yr.w,xn=Yr.ha;if(4>xn)return js(Hr,7,"Truncated header.");var Sn=nn[hn+0]|nn[hn+1]<<8|nn[hn+2]<<16,Rn=Hr.Od;if(Rn.Rb=!(1&Sn),Rn.td=Sn>>1&7,Rn.yd=Sn>>4&1,Rn.ub=Sn>>5,3<Rn.td)return js(Hr,3,"Incorrect keyframe parameters.");if(!Rn.yd)return js(Hr,4,"Frame not displayable.");hn+=3,xn-=3;var jn=Hr.Kc;if(Rn.Rb){if(7>xn)return js(Hr,7,"cannot parse picture header");if(!Js(nn,hn,xn))return js(Hr,3,"Bad code word");jn.c=16383&(nn[hn+4]<<8|nn[hn+3]),jn.Td=nn[hn+4]>>6,jn.i=16383&(nn[hn+6]<<8|nn[hn+5]),jn.Ud=nn[hn+6]>>6,hn+=7,xn-=7,Hr.za=jn.c+15>>4,Hr.Ub=jn.i+15>>4,Yr.width=jn.c,Yr.height=jn.i,Yr.Da=0,Yr.j=0,Yr.v=0,Yr.va=Yr.width,Yr.o=Yr.height,Yr.da=0,Yr.ib=Yr.width,Yr.hb=Yr.height,Yr.U=Yr.width,Yr.T=Yr.height,ir((Sn=Hr.Pa).jb,0,255,Sn.jb.length),er((Sn=Hr.Qa)!=null),Sn.Cb=0,Sn.Bb=0,Sn.Fb=1,ir(Sn.Zb,0,0,Sn.Zb.length),ir(Sn.Lb,0,0,Sn.Lb)}if(Rn.ub>xn)return js(Hr,7,"bad partition length");Cr(Sn=Hr.m,nn,hn,Rn.ub),hn+=Rn.ub,xn-=Rn.ub,Rn.Rb&&(jn.Ld=Ur(Sn),jn.Kd=Ur(Sn)),jn=Hr.Qa;var $n,Fn=Hr.Pa;if(er(Sn!=null),er(jn!=null),jn.Cb=Ur(Sn),jn.Cb){if(jn.Bb=Ur(Sn),Ur(Sn)){for(jn.Fb=Ur(Sn),$n=0;4>$n;++$n)jn.Zb[$n]=Ur(Sn)?Pr(Sn,7):0;for($n=0;4>$n;++$n)jn.Lb[$n]=Ur(Sn)?Pr(Sn,6):0}if(jn.Bb)for($n=0;3>$n;++$n)Fn.jb[$n]=Ur(Sn)?wr(Sn,8):255}else jn.Bb=0;if(Sn.Ka)return js(Hr,3,"cannot parse segment header");if((jn=Hr.ed).zd=Ur(Sn),jn.Tb=wr(Sn,6),jn.wb=wr(Sn,3),jn.Pc=Ur(Sn),jn.Pc&&Ur(Sn)){for(Fn=0;4>Fn;++Fn)Ur(Sn)&&(jn.vd[Fn]=Pr(Sn,6));for(Fn=0;4>Fn;++Fn)Ur(Sn)&&(jn.od[Fn]=Pr(Sn,6))}if(Hr.L=jn.Tb==0?0:jn.zd?1:2,Sn.Ka)return js(Hr,3,"cannot parse filter header");var ss=xn;if(xn=$n=hn,hn=$n+ss,jn=ss,Hr.Xb=(1<<wr(Hr.m,2))-1,ss<3*(Fn=Hr.Xb))nn=7;else{for($n+=3*Fn,jn-=3*Fn,ss=0;ss<Fn;++ss){var vs=nn[xn+0]|nn[xn+1]<<8|nn[xn+2]<<16;vs>jn&&(vs=jn),Cr(Hr.Jc[+ss],nn,$n,vs),$n+=vs,jn-=vs,xn+=3}Cr(Hr.Jc[+Fn],nn,$n,jn),nn=$n<hn?0:5}if(nn!=0)return js(Hr,nn,"cannot parse partitions");for(nn=wr($n=Hr.m,7),xn=Ur($n)?Pr($n,4):0,hn=Ur($n)?Pr($n,4):0,jn=Ur($n)?Pr($n,4):0,Fn=Ur($n)?Pr($n,4):0,$n=Ur($n)?Pr($n,4):0,ss=Hr.Qa,vs=0;4>vs;++vs){if(ss.Cb){var _s=ss.Zb[vs];ss.Fb||(_s+=nn)}else{if(0<vs){Hr.pb[vs]=Hr.pb[0];continue}_s=nn}var gs=Hr.pb[vs];gs.Sc[0]=Im[So(_s+xn,127)],gs.Sc[1]=Om[So(_s+0,127)],gs.Eb[0]=2*Im[So(_s+hn,127)],gs.Eb[1]=101581*Om[So(_s+jn,127)]>>16,8>gs.Eb[1]&&(gs.Eb[1]=8),gs.Qc[0]=Im[So(_s+Fn,117)],gs.Qc[1]=Om[So(_s+$n,127)],gs.lc=_s+$n}if(!Rn.Rb)return js(Hr,4,"Not a key frame.");for(Ur(Sn),Rn=Hr.Pa,nn=0;4>nn;++nn){for(xn=0;8>xn;++xn)for(hn=0;3>hn;++hn)for(jn=0;11>jn;++jn)Fn=Fr(Sn,Wy[nn][xn][hn][jn])?wr(Sn,8):qy[nn][xn][hn][jn],Rn.Wc[nn][xn].Yb[hn][jn]=Fn;for(xn=0;17>xn;++xn)Rn.Xc[nn][xn]=Rn.Wc[nn][Gy[xn]]}return Hr.kc=Ur(Sn),Hr.kc&&(Hr.Bd=wr(Sn,8)),Hr.cb=1}function mo(Hr,Yr,nn,hn,xn,Sn,Rn){var jn=Yr[xn].Yb[nn];for(nn=0;16>xn;++xn){if(!Fr(Hr,jn[nn+0]))return xn;for(;!Fr(Hr,jn[nn+1]);)if(jn=Yr[++xn].Yb[0],nn=0,xn==16)return 16;var $n=Yr[xn+1].Yb;if(Fr(Hr,jn[nn+2])){var Fn=Hr,ss=0;if(Fr(Fn,(_s=jn)[(vs=nn)+3]))if(Fr(Fn,_s[vs+6])){for(jn=0,vs=2*(ss=Fr(Fn,_s[vs+8]))+(_s=Fr(Fn,_s[vs+9+ss])),ss=0,_s=Uy[vs];_s[jn];++jn)ss+=ss+Fr(Fn,_s[jn]);ss+=3+(8<<vs)}else Fr(Fn,_s[vs+7])?(ss=7+2*Fr(Fn,165),ss+=Fr(Fn,145)):ss=5+Fr(Fn,159);else ss=Fr(Fn,_s[vs+4])?3+Fr(Fn,_s[vs+5]):2;jn=$n[2]}else ss=1,jn=$n[1];$n=Rn+zy[xn],0>(Fn=Hr).b&&Xr(Fn);var vs,_s=Fn.b,gs=(vs=Fn.Ca>>1)-(Fn.I>>_s)>>31;--Fn.b,Fn.Ca+=gs,Fn.Ca|=1,Fn.I-=(vs+1&gs)<<_s,Sn[$n]=((ss^gs)-gs)*hn[(0<xn)+0]}return 16}function Eo(Hr){var Yr=Hr.rb[Hr.sb-1];Yr.la=0,Yr.Na=0,ir(Hr.zc,0,0,Hr.zc.length),Hr.ja=0}function fo(Hr,Yr){if(Hr==null)return 0;if(Yr==null)return js(Hr,2,"NULL VP8Io parameter in VP8Decode().");if(!Hr.cb&&!to(Hr,Yr))return 0;if(er(Hr.cb),Yr.ac==null||Yr.ac(Yr)){Yr.ob&&(Hr.L=0);var nn=rm[Hr.L];if(Hr.L==2?(Hr.yb=0,Hr.zb=0):(Hr.yb=Yr.v-nn>>4,Hr.zb=Yr.j-nn>>4,0>Hr.yb&&(Hr.yb=0),0>Hr.zb&&(Hr.zb=0)),Hr.Va=Yr.o+15+nn>>4,Hr.Hb=Yr.va+15+nn>>4,Hr.Hb>Hr.za&&(Hr.Hb=Hr.za),Hr.Va>Hr.Ub&&(Hr.Va=Hr.Ub),0<Hr.L){var hn=Hr.ed;for(nn=0;4>nn;++nn){var xn;if(Hr.Qa.Cb){var Sn=Hr.Qa.Lb[nn];Hr.Qa.Fb||(Sn+=hn.Tb)}else Sn=hn.Tb;for(xn=0;1>=xn;++xn){var Rn=Hr.gd[nn][xn],jn=Sn;if(hn.Pc&&(jn+=hn.vd[0],xn&&(jn+=hn.od[0])),0<(jn=0>jn?0:63<jn?63:jn)){var $n=jn;0<hn.wb&&($n=4<hn.wb?$n>>2:$n>>1)>9-hn.wb&&($n=9-hn.wb),1>$n&&($n=1),Rn.dd=$n,Rn.tc=2*jn+$n,Rn.ld=40<=jn?2:15<=jn?1:0}else Rn.tc=0;Rn.La=xn}}}nn=0}else js(Hr,6,"Frame setup failed"),nn=Hr.a;if(nn=nn==0){if(nn){Hr.$c=0,0<Hr.Aa||(Hr.Ic=ax);e:{nn=Hr.Ic,hn=4*($n=Hr.za);var Fn=32*$n,ss=$n+1,vs=0<Hr.L?$n*(0<Hr.Aa?2:1):0,_s=(Hr.Aa==2?2:1)*$n;if((Rn=hn+832+(xn=3*(16*nn+rm[Hr.L])/2*Fn)+(Sn=Hr.Fa!=null&&0<Hr.Fa.length?Hr.Kc.c*Hr.Kc.i:0))!=Rn)nn=0;else{if(Rn>Hr.Vb){if(Hr.Vb=0,Hr.Ec=sr(Rn),Hr.Fc=0,Hr.Ec==null){nn=js(Hr,1,"no memory during frame initialization.");break e}Hr.Vb=Rn}Rn=Hr.Ec,jn=Hr.Fc,Hr.Ac=Rn,Hr.Bc=jn,jn+=hn,Hr.Gd=ar(Fn,Fs),Hr.Hd=0,Hr.rb=ar(ss+1,Ks),Hr.sb=1,Hr.wa=vs?ar(vs,Ss):null,Hr.Y=0,Hr.D.Nb=0,Hr.D.wa=Hr.wa,Hr.D.Y=Hr.Y,0<Hr.Aa&&(Hr.D.Y+=$n),er(!0),Hr.oc=Rn,Hr.pc=jn,jn+=832,Hr.ya=ar(_s,An),Hr.aa=0,Hr.D.ya=Hr.ya,Hr.D.aa=Hr.aa,Hr.Aa==2&&(Hr.D.aa+=$n),Hr.R=16*$n,Hr.B=8*$n,$n=(Fn=rm[Hr.L])*Hr.R,Fn=Fn/2*Hr.B,Hr.sa=Rn,Hr.ta=jn+$n,Hr.qa=Hr.sa,Hr.ra=Hr.ta+16*nn*Hr.R+Fn,Hr.Ha=Hr.qa,Hr.Ia=Hr.ra+8*nn*Hr.B+Fn,Hr.$c=0,jn+=xn,Hr.mb=Sn?Rn:null,Hr.nb=Sn?jn:null,er(jn+Sn<=Hr.Fc+Hr.Vb),Eo(Hr),ir(Hr.Ac,Hr.Bc,0,hn),nn=1}}if(nn){if(Yr.ka=0,Yr.y=Hr.sa,Yr.O=Hr.ta,Yr.f=Hr.qa,Yr.N=Hr.ra,Yr.ea=Hr.Ha,Yr.Vd=Hr.Ia,Yr.fa=Hr.R,Yr.Rc=Hr.B,Yr.F=null,Yr.J=0,!Gp){for(nn=-255;255>=nn;++nn)Go[255+nn]=0>nn?-nn:nn;for(nn=-1020;1020>=nn;++nn)Nu[1020+nn]=-128>nn?-128:127<nn?127:nn;for(nn=-112;112>=nn;++nn)Tp[112+nn]=-16>nn?-16:15<nn?15:nn;for(nn=-255;510>=nn;++nn)dp[255+nn]=0>nn?0:255<nn?255:nn;Gp=1}lp=Io,Cu=no,Ap=Do,Cl=ho,Jl=Ko,Vo=ro,cp=Xl,Wp=Ml,Rp=vu,Ju=_u,_d=uu,zu=Dl,_h=Yl,up=Pl,_f=_i,qu=ks,Pp=Xs,_c=xa,fu[0]=Il,fu[1]=Zo,fu[2]=Qo,fu[3]=Kl,fu[4]=Du,fu[5]=su,fu[6]=wl,fu[7]=au,fu[8]=lu,fu[9]=ou,Hu[0]=Wo,Hu[1]=Ul,Hu[2]=Lo,Hu[3]=zo,Hu[4]=_o,Hu[5]=zl,Hu[6]=_l,Iu[0]=$l,Iu[1]=Al,Iu[2]=Pu,Iu[3]=Ol,Iu[4]=xo,Iu[5]=mu,Iu[6]=gu,nn=1}else nn=0}nn&&(nn=function(gs,qs){for(gs.M=0;gs.M<gs.Va;++gs.M){var Os,as=gs.Jc[gs.M&gs.Xb],cs=gs.m,Us=gs;for(Os=0;Os<Us.za;++Os){var Hs=cs,zs=Us,$a=zs.Ac,na=zs.Bc+4*Os,so=zs.zc,ba=zs.ya[zs.aa+Os];if(zs.Qa.Bb?ba.$b=Fr(Hs,zs.Pa.jb[0])?2+Fr(Hs,zs.Pa.jb[2]):Fr(Hs,zs.Pa.jb[1]):ba.$b=0,zs.kc&&(ba.Ad=Fr(Hs,zs.Bd)),ba.Za=!Fr(Hs,145)+0,ba.Za){var wo=ba.Ob,Ao=0;for(zs=0;4>zs;++zs){var vo,bo=so[0+zs];for(vo=0;4>vo;++vo){bo=Hy[$a[na+vo]][bo];for(var Co=j0[Fr(Hs,bo[0])];0<Co;)Co=j0[2*Co+Fr(Hs,bo[Co])];bo=-Co,$a[na+vo]=bo}nr(wo,Ao,$a,na,4),Ao+=4,so[0+zs]=bo}}else bo=Fr(Hs,156)?Fr(Hs,128)?1:3:Fr(Hs,163)?2:0,ba.Ob[0]=bo,ir($a,na,bo,4),ir(so,0,bo,4);ba.Dd=Fr(Hs,142)?Fr(Hs,114)?Fr(Hs,183)?1:3:2:0}if(Us.m.Ka)return js(gs,7,"Premature end-of-partition0 encountered.");for(;gs.ja<gs.za;++gs.ja){if(Us=as,Hs=(cs=gs).rb[cs.sb-1],$a=cs.rb[cs.sb+cs.ja],Os=cs.ya[cs.aa+cs.ja],na=cs.kc?Os.Ad:0)Hs.la=$a.la=0,Os.Za||(Hs.Na=$a.Na=0),Os.Hc=0,Os.Gc=0,Os.ia=0;else{var To,uo;if(Hs=$a,$a=Us,na=cs.Pa.Xc,so=cs.ya[cs.aa+cs.ja],ba=cs.pb[so.$b],zs=so.ad,wo=0,Ao=cs.rb[cs.sb-1],bo=vo=0,ir(zs,wo,0,384),so.Za)var qo=0,Bl=na[3];else{Co=sr(16);var Ho=Hs.Na+Ao.Na;if(Ho=jp($a,na[1],Ho,ba.Eb,0,Co,0),Hs.Na=Ao.Na=(0<Ho)+0,1<Ho)lp(Co,0,zs,wo);else{var Vl=Co[0]+3>>3;for(Co=0;256>Co;Co+=16)zs[wo+Co]=Vl}qo=1,Bl=na[0]}var Ro=15&Hs.la,Wl=15&Ao.la;for(Co=0;4>Co;++Co){var Gl=1&Wl;for(Vl=uo=0;4>Vl;++Vl)Ro=Ro>>1|(Gl=(Ho=jp($a,Bl,Ho=Gl+(1&Ro),ba.Sc,qo,zs,wo))>qo)<<7,uo=uo<<2|(3<Ho?3:1<Ho?2:zs[wo+0]!=0),wo+=16;Ro>>=4,Wl=Wl>>1|Gl<<7,vo=(vo<<8|uo)>>>0}for(Bl=Ro,qo=Wl>>4,To=0;4>To;To+=2){for(uo=0,Ro=Hs.la>>4+To,Wl=Ao.la>>4+To,Co=0;2>Co;++Co){for(Gl=1&Wl,Vl=0;2>Vl;++Vl)Ho=Gl+(1&Ro),Ro=Ro>>1|(Gl=0<(Ho=jp($a,na[2],Ho,ba.Qc,0,zs,wo)))<<3,uo=uo<<2|(3<Ho?3:1<Ho?2:zs[wo+0]!=0),wo+=16;Ro>>=2,Wl=Wl>>1|Gl<<5}bo|=uo<<4*To,Bl|=Ro<<4<<To,qo|=(240&Wl)<<To}Hs.la=Bl,Ao.la=qo,so.Hc=vo,so.Gc=bo,so.ia=43690&bo?0:ba.ia,na=!(vo|bo)}if(0<cs.L&&(cs.wa[cs.Y+cs.ja]=cs.gd[Os.$b][Os.Za],cs.wa[cs.Y+cs.ja].La|=!na),Us.Ka)return js(gs,7,"Premature end-of-file encountered.")}if(Eo(gs),cs=qs,Us=1,Os=(as=gs).D,Hs=0<as.L&&as.M>=as.zb&&as.M<=as.Va,as.Aa==0)e:{if(Os.M=as.M,Os.uc=Hs,Su(as,Os),Us=1,Os=(uo=as.D).Nb,Hs=(bo=rm[as.L])*as.R,$a=bo/2*as.B,Co=16*Os*as.R,Vl=8*Os*as.B,na=as.sa,so=as.ta-Hs+Co,ba=as.qa,zs=as.ra-$a+Vl,wo=as.Ha,Ao=as.Ia-$a+Vl,Wl=(Ro=uo.M)==0,vo=Ro>=as.Va-1,as.Aa==2&&Su(as,uo),uo.uc)for(Gl=(Ho=as).D.M,er(Ho.D.uc),uo=Ho.yb;uo<Ho.Hb;++uo){qo=uo,Bl=Gl;var Xo=(xl=(Fo=Ho).D).Nb;To=Fo.R;var xl=xl.wa[xl.Y+qo],Nl=Fo.sa,nu=Fo.ta+16*Xo*To+16*qo,Ru=xl.dd,Yo=xl.tc;if(Yo!=0)if(er(3<=Yo),Fo.L==1)0<qo&&qu(Nl,nu,To,Yo+4),xl.La&&_c(Nl,nu,To,Yo),0<Bl&&_f(Nl,nu,To,Yo+4),xl.La&&Pp(Nl,nu,To,Yo);else{var Ou=Fo.B,ep=Fo.qa,hp=Fo.ra+8*Xo*Ou+8*qo,Gu=Fo.Ha,Fo=Fo.Ia+8*Xo*Ou+8*qo;Xo=xl.ld,0<qo&&(Wp(Nl,nu,To,Yo+4,Ru,Xo),Ju(ep,hp,Gu,Fo,Ou,Yo+4,Ru,Xo)),xl.La&&(zu(Nl,nu,To,Yo,Ru,Xo),up(ep,hp,Gu,Fo,Ou,Yo,Ru,Xo)),0<Bl&&(cp(Nl,nu,To,Yo+4,Ru,Xo),Rp(ep,hp,Gu,Fo,Ou,Yo+4,Ru,Xo)),xl.La&&(_d(Nl,nu,To,Yo,Ru,Xo),_h(ep,hp,Gu,Fo,Ou,Yo,Ru,Xo))}}if(as.ia&&alert("todo:DitherRow"),cs.put!=null){if(uo=16*Ro,Ro=16*(Ro+1),Wl?(cs.y=as.sa,cs.O=as.ta+Co,cs.f=as.qa,cs.N=as.ra+Vl,cs.ea=as.Ha,cs.W=as.Ia+Vl):(uo-=bo,cs.y=na,cs.O=so,cs.f=ba,cs.N=zs,cs.ea=wo,cs.W=Ao),vo||(Ro-=bo),Ro>cs.o&&(Ro=cs.o),cs.F=null,cs.J=null,as.Fa!=null&&0<as.Fa.length&&uo<Ro&&(cs.J=Bu(as,cs,uo,Ro-uo),cs.F=as.mb,cs.F==null&&cs.F.length==0)){Us=js(as,3,"Could not decode alpha data.");break e}uo<cs.j&&(bo=cs.j-uo,uo=cs.j,er(!(1&bo)),cs.O+=as.R*bo,cs.N+=as.B*(bo>>1),cs.W+=as.B*(bo>>1),cs.F!=null&&(cs.J+=cs.width*bo)),uo<Ro&&(cs.O+=cs.v,cs.N+=cs.v>>1,cs.W+=cs.v>>1,cs.F!=null&&(cs.J+=cs.v),cs.ka=uo-cs.j,cs.U=cs.va-cs.v,cs.T=Ro-uo,Us=cs.put(cs))}Os+1!=as.Ic||vo||(nr(as.sa,as.ta-Hs,na,so+16*as.R,Hs),nr(as.qa,as.ra-$a,ba,zs+8*as.B,$a),nr(as.Ha,as.Ia-$a,wo,Ao+8*as.B,$a))}if(!Us)return js(gs,6,"Output aborted.")}return 1}(Hr,Yr)),Yr.bc!=null&&Yr.bc(Yr),nn&=1}return nn?(Hr.cb=0,nn):0}function No(Hr,Yr,nn,hn,xn){xn=Hr[Yr+nn+32*hn]+(xn>>3),Hr[Yr+nn+32*hn]=-256&xn?0>xn?0:255:xn}function Bo(Hr,Yr,nn,hn,xn,Sn){No(Hr,Yr,0,nn,hn+xn),No(Hr,Yr,1,nn,hn+Sn),No(Hr,Yr,2,nn,hn-Sn),No(Hr,Yr,3,nn,hn-xn)}function go(Hr){return(20091*Hr>>16)+Hr}function jo(Hr,Yr,nn,hn){var xn,Sn=0,Rn=sr(16);for(xn=0;4>xn;++xn){var jn=Hr[Yr+0]+Hr[Yr+8],$n=Hr[Yr+0]-Hr[Yr+8],Fn=(35468*Hr[Yr+4]>>16)-go(Hr[Yr+12]),ss=go(Hr[Yr+4])+(35468*Hr[Yr+12]>>16);Rn[Sn+0]=jn+ss,Rn[Sn+1]=$n+Fn,Rn[Sn+2]=$n-Fn,Rn[Sn+3]=jn-ss,Sn+=4,Yr++}for(xn=Sn=0;4>xn;++xn)jn=(Hr=Rn[Sn+0]+4)+Rn[Sn+8],$n=Hr-Rn[Sn+8],Fn=(35468*Rn[Sn+4]>>16)-go(Rn[Sn+12]),No(nn,hn,0,0,jn+(ss=go(Rn[Sn+4])+(35468*Rn[Sn+12]>>16))),No(nn,hn,1,0,$n+Fn),No(nn,hn,2,0,$n-Fn),No(nn,hn,3,0,jn-ss),Sn++,hn+=32}function ro(Hr,Yr,nn,hn){var xn=Hr[Yr+0]+4,Sn=35468*Hr[Yr+4]>>16,Rn=go(Hr[Yr+4]),jn=35468*Hr[Yr+1]>>16;Bo(nn,hn,0,xn+Rn,Hr=go(Hr[Yr+1]),jn),Bo(nn,hn,1,xn+Sn,Hr,jn),Bo(nn,hn,2,xn-Sn,Hr,jn),Bo(nn,hn,3,xn-Rn,Hr,jn)}function no(Hr,Yr,nn,hn,xn){jo(Hr,Yr,nn,hn),xn&&jo(Hr,Yr+16,nn,hn+4)}function Do(Hr,Yr,nn,hn){Cu(Hr,Yr+0,nn,hn,1),Cu(Hr,Yr+32,nn,hn+128,1)}function ho(Hr,Yr,nn,hn){var xn;for(Hr=Hr[Yr+0]+4,xn=0;4>xn;++xn)for(Yr=0;4>Yr;++Yr)No(nn,hn,Yr,xn,Hr)}function Ko(Hr,Yr,nn,hn){Hr[Yr+0]&&Cl(Hr,Yr+0,nn,hn),Hr[Yr+16]&&Cl(Hr,Yr+16,nn,hn+4),Hr[Yr+32]&&Cl(Hr,Yr+32,nn,hn+128),Hr[Yr+48]&&Cl(Hr,Yr+48,nn,hn+128+4)}function Io(Hr,Yr,nn,hn){var xn,Sn=sr(16);for(xn=0;4>xn;++xn){var Rn=Hr[Yr+0+xn]+Hr[Yr+12+xn],jn=Hr[Yr+4+xn]+Hr[Yr+8+xn],$n=Hr[Yr+4+xn]-Hr[Yr+8+xn],Fn=Hr[Yr+0+xn]-Hr[Yr+12+xn];Sn[0+xn]=Rn+jn,Sn[8+xn]=Rn-jn,Sn[4+xn]=Fn+$n,Sn[12+xn]=Fn-$n}for(xn=0;4>xn;++xn)Rn=(Hr=Sn[0+4*xn]+3)+Sn[3+4*xn],jn=Sn[1+4*xn]+Sn[2+4*xn],$n=Sn[1+4*xn]-Sn[2+4*xn],Fn=Hr-Sn[3+4*xn],nn[hn+0]=Rn+jn>>3,nn[hn+16]=Fn+$n>>3,nn[hn+32]=Rn-jn>>3,nn[hn+48]=Fn-$n>>3,hn+=64}function Oo(Hr,Yr,nn){var hn,xn=Yr-32,Sn=Hl,Rn=255-Hr[xn-1];for(hn=0;hn<nn;++hn){var jn,$n=Sn,Fn=Rn+Hr[Yr-1];for(jn=0;jn<nn;++jn)Hr[Yr+jn]=$n[Fn+Hr[xn+jn]];Yr+=32}}function Zo(Hr,Yr){Oo(Hr,Yr,4)}function Al(Hr,Yr){Oo(Hr,Yr,8)}function Ul(Hr,Yr){Oo(Hr,Yr,16)}function Lo(Hr,Yr){var nn;for(nn=0;16>nn;++nn)nr(Hr,Yr+32*nn,Hr,Yr-32,16)}function zo(Hr,Yr){var nn;for(nn=16;0<nn;--nn)ir(Hr,Yr,Hr[Yr-1],16),Yr+=32}function Rl(Hr,Yr,nn){var hn;for(hn=0;16>hn;++hn)ir(Yr,nn+32*hn,Hr,16)}function Wo(Hr,Yr){var nn,hn=16;for(nn=0;16>nn;++nn)hn+=Hr[Yr-1+32*nn]+Hr[Yr+nn-32];Rl(hn>>5,Hr,Yr)}function _o(Hr,Yr){var nn,hn=8;for(nn=0;16>nn;++nn)hn+=Hr[Yr-1+32*nn];Rl(hn>>4,Hr,Yr)}function zl(Hr,Yr){var nn,hn=8;for(nn=0;16>nn;++nn)hn+=Hr[Yr+nn-32];Rl(hn>>4,Hr,Yr)}function _l(Hr,Yr){Rl(128,Hr,Yr)}function io(Hr,Yr,nn){return Hr+2*Yr+nn+2>>2}function Qo(Hr,Yr){var nn,hn=Yr-32;for(hn=new Uint8Array([io(Hr[hn-1],Hr[hn+0],Hr[hn+1]),io(Hr[hn+0],Hr[hn+1],Hr[hn+2]),io(Hr[hn+1],Hr[hn+2],Hr[hn+3]),io(Hr[hn+2],Hr[hn+3],Hr[hn+4])]),nn=0;4>nn;++nn)nr(Hr,Yr+32*nn,hn,0,hn.length)}function Kl(Hr,Yr){var nn=Hr[Yr-1],hn=Hr[Yr-1+32],xn=Hr[Yr-1+64],Sn=Hr[Yr-1+96];Kr(Hr,Yr+0,16843009*io(Hr[Yr-1-32],nn,hn)),Kr(Hr,Yr+32,16843009*io(nn,hn,xn)),Kr(Hr,Yr+64,16843009*io(hn,xn,Sn)),Kr(Hr,Yr+96,16843009*io(xn,Sn,Sn))}function Il(Hr,Yr){var nn,hn=4;for(nn=0;4>nn;++nn)hn+=Hr[Yr+nn-32]+Hr[Yr-1+32*nn];for(hn>>=3,nn=0;4>nn;++nn)ir(Hr,Yr+32*nn,hn,4)}function Du(Hr,Yr){var nn=Hr[Yr-1+0],hn=Hr[Yr-1+32],xn=Hr[Yr-1+64],Sn=Hr[Yr-1-32],Rn=Hr[Yr+0-32],jn=Hr[Yr+1-32],$n=Hr[Yr+2-32],Fn=Hr[Yr+3-32];Hr[Yr+0+96]=io(hn,xn,Hr[Yr-1+96]),Hr[Yr+1+96]=Hr[Yr+0+64]=io(nn,hn,xn),Hr[Yr+2+96]=Hr[Yr+1+64]=Hr[Yr+0+32]=io(Sn,nn,hn),Hr[Yr+3+96]=Hr[Yr+2+64]=Hr[Yr+1+32]=Hr[Yr+0+0]=io(Rn,Sn,nn),Hr[Yr+3+64]=Hr[Yr+2+32]=Hr[Yr+1+0]=io(jn,Rn,Sn),Hr[Yr+3+32]=Hr[Yr+2+0]=io($n,jn,Rn),Hr[Yr+3+0]=io(Fn,$n,jn)}function wl(Hr,Yr){var nn=Hr[Yr+1-32],hn=Hr[Yr+2-32],xn=Hr[Yr+3-32],Sn=Hr[Yr+4-32],Rn=Hr[Yr+5-32],jn=Hr[Yr+6-32],$n=Hr[Yr+7-32];Hr[Yr+0+0]=io(Hr[Yr+0-32],nn,hn),Hr[Yr+1+0]=Hr[Yr+0+32]=io(nn,hn,xn),Hr[Yr+2+0]=Hr[Yr+1+32]=Hr[Yr+0+64]=io(hn,xn,Sn),Hr[Yr+3+0]=Hr[Yr+2+32]=Hr[Yr+1+64]=Hr[Yr+0+96]=io(xn,Sn,Rn),Hr[Yr+3+32]=Hr[Yr+2+64]=Hr[Yr+1+96]=io(Sn,Rn,jn),Hr[Yr+3+64]=Hr[Yr+2+96]=io(Rn,jn,$n),Hr[Yr+3+96]=io(jn,$n,$n)}function su(Hr,Yr){var nn=Hr[Yr-1+0],hn=Hr[Yr-1+32],xn=Hr[Yr-1+64],Sn=Hr[Yr-1-32],Rn=Hr[Yr+0-32],jn=Hr[Yr+1-32],$n=Hr[Yr+2-32],Fn=Hr[Yr+3-32];Hr[Yr+0+0]=Hr[Yr+1+64]=Sn+Rn+1>>1,Hr[Yr+1+0]=Hr[Yr+2+64]=Rn+jn+1>>1,Hr[Yr+2+0]=Hr[Yr+3+64]=jn+$n+1>>1,Hr[Yr+3+0]=$n+Fn+1>>1,Hr[Yr+0+96]=io(xn,hn,nn),Hr[Yr+0+64]=io(hn,nn,Sn),Hr[Yr+0+32]=Hr[Yr+1+96]=io(nn,Sn,Rn),Hr[Yr+1+32]=Hr[Yr+2+96]=io(Sn,Rn,jn),Hr[Yr+2+32]=Hr[Yr+3+96]=io(Rn,jn,$n),Hr[Yr+3+32]=io(jn,$n,Fn)}function au(Hr,Yr){var nn=Hr[Yr+0-32],hn=Hr[Yr+1-32],xn=Hr[Yr+2-32],Sn=Hr[Yr+3-32],Rn=Hr[Yr+4-32],jn=Hr[Yr+5-32],$n=Hr[Yr+6-32],Fn=Hr[Yr+7-32];Hr[Yr+0+0]=nn+hn+1>>1,Hr[Yr+1+0]=Hr[Yr+0+64]=hn+xn+1>>1,Hr[Yr+2+0]=Hr[Yr+1+64]=xn+Sn+1>>1,Hr[Yr+3+0]=Hr[Yr+2+64]=Sn+Rn+1>>1,Hr[Yr+0+32]=io(nn,hn,xn),Hr[Yr+1+32]=Hr[Yr+0+96]=io(hn,xn,Sn),Hr[Yr+2+32]=Hr[Yr+1+96]=io(xn,Sn,Rn),Hr[Yr+3+32]=Hr[Yr+2+96]=io(Sn,Rn,jn),Hr[Yr+3+64]=io(Rn,jn,$n),Hr[Yr+3+96]=io(jn,$n,Fn)}function ou(Hr,Yr){var nn=Hr[Yr-1+0],hn=Hr[Yr-1+32],xn=Hr[Yr-1+64],Sn=Hr[Yr-1+96];Hr[Yr+0+0]=nn+hn+1>>1,Hr[Yr+2+0]=Hr[Yr+0+32]=hn+xn+1>>1,Hr[Yr+2+32]=Hr[Yr+0+64]=xn+Sn+1>>1,Hr[Yr+1+0]=io(nn,hn,xn),Hr[Yr+3+0]=Hr[Yr+1+32]=io(hn,xn,Sn),Hr[Yr+3+32]=Hr[Yr+1+64]=io(xn,Sn,Sn),Hr[Yr+3+64]=Hr[Yr+2+64]=Hr[Yr+0+96]=Hr[Yr+1+96]=Hr[Yr+2+96]=Hr[Yr+3+96]=Sn}function lu(Hr,Yr){var nn=Hr[Yr-1+0],hn=Hr[Yr-1+32],xn=Hr[Yr-1+64],Sn=Hr[Yr-1+96],Rn=Hr[Yr-1-32],jn=Hr[Yr+0-32],$n=Hr[Yr+1-32],Fn=Hr[Yr+2-32];Hr[Yr+0+0]=Hr[Yr+2+32]=nn+Rn+1>>1,Hr[Yr+0+32]=Hr[Yr+2+64]=hn+nn+1>>1,Hr[Yr+0+64]=Hr[Yr+2+96]=xn+hn+1>>1,Hr[Yr+0+96]=Sn+xn+1>>1,Hr[Yr+3+0]=io(jn,$n,Fn),Hr[Yr+2+0]=io(Rn,jn,$n),Hr[Yr+1+0]=Hr[Yr+3+32]=io(nn,Rn,jn),Hr[Yr+1+32]=Hr[Yr+3+64]=io(hn,nn,Rn),Hr[Yr+1+64]=Hr[Yr+3+96]=io(xn,hn,nn),Hr[Yr+1+96]=io(Sn,xn,hn)}function Pu(Hr,Yr){var nn;for(nn=0;8>nn;++nn)nr(Hr,Yr+32*nn,Hr,Yr-32,8)}function Ol(Hr,Yr){var nn;for(nn=0;8>nn;++nn)ir(Hr,Yr,Hr[Yr-1],8),Yr+=32}function El(Hr,Yr,nn){var hn;for(hn=0;8>hn;++hn)ir(Yr,nn+32*hn,Hr,8)}function $l(Hr,Yr){var nn,hn=8;for(nn=0;8>nn;++nn)hn+=Hr[Yr+nn-32]+Hr[Yr-1+32*nn];El(hn>>4,Hr,Yr)}function mu(Hr,Yr){var nn,hn=4;for(nn=0;8>nn;++nn)hn+=Hr[Yr+nn-32];El(hn>>3,Hr,Yr)}function xo(Hr,Yr){var nn,hn=4;for(nn=0;8>nn;++nn)hn+=Hr[Yr-1+32*nn];El(hn>>3,Hr,Yr)}function gu(Hr,Yr){El(128,Hr,Yr)}function cu(Hr,Yr,nn){var hn=Hr[Yr-nn],xn=Hr[Yr+0],Sn=3*(xn-hn)+Tm[1020+Hr[Yr-2*nn]-Hr[Yr+nn]],Rn=Kp[112+(Sn+4>>3)];Hr[Yr-nn]=Hl[255+hn+Kp[112+(Sn+3>>3)]],Hr[Yr+0]=Hl[255+xn-Rn]}function yu(Hr,Yr,nn,hn){var xn=Hr[Yr+0],Sn=Hr[Yr+nn];return tu[255+Hr[Yr-2*nn]-Hr[Yr-nn]]>hn||tu[255+Sn-xn]>hn}function bu(Hr,Yr,nn,hn){return 4*tu[255+Hr[Yr-nn]-Hr[Yr+0]]+tu[255+Hr[Yr-2*nn]-Hr[Yr+nn]]<=hn}function xu(Hr,Yr,nn,hn,xn){var Sn=Hr[Yr-3*nn],Rn=Hr[Yr-2*nn],jn=Hr[Yr-nn],$n=Hr[Yr+0],Fn=Hr[Yr+nn],ss=Hr[Yr+2*nn],vs=Hr[Yr+3*nn];return 4*tu[255+jn-$n]+tu[255+Rn-Fn]>hn?0:tu[255+Hr[Yr-4*nn]-Sn]<=xn&&tu[255+Sn-Rn]<=xn&&tu[255+Rn-jn]<=xn&&tu[255+vs-ss]<=xn&&tu[255+ss-Fn]<=xn&&tu[255+Fn-$n]<=xn}function _i(Hr,Yr,nn,hn){var xn=2*hn+1;for(hn=0;16>hn;++hn)bu(Hr,Yr+hn,nn,xn)&&cu(Hr,Yr+hn,nn)}function ks(Hr,Yr,nn,hn){var xn=2*hn+1;for(hn=0;16>hn;++hn)bu(Hr,Yr+hn*nn,1,xn)&&cu(Hr,Yr+hn*nn,1)}function Xs(Hr,Yr,nn,hn){var xn;for(xn=3;0<xn;--xn)_i(Hr,Yr+=4*nn,nn,hn)}function xa(Hr,Yr,nn,hn){var xn;for(xn=3;0<xn;--xn)ks(Hr,Yr+=4,nn,hn)}function oo(Hr,Yr,nn,hn,xn,Sn,Rn,jn){for(Sn=2*Sn+1;0<xn--;){if(xu(Hr,Yr,nn,Sn,Rn))if(yu(Hr,Yr,nn,jn))cu(Hr,Yr,nn);else{var $n=Hr,Fn=Yr,ss=nn,vs=$n[Fn-2*ss],_s=$n[Fn-ss],gs=$n[Fn+0],qs=$n[Fn+ss],Os=$n[Fn+2*ss],as=27*(Us=Tm[1020+3*(gs-_s)+Tm[1020+vs-qs]])+63>>7,cs=18*Us+63>>7,Us=9*Us+63>>7;$n[Fn-3*ss]=Hl[255+$n[Fn-3*ss]+Us],$n[Fn-2*ss]=Hl[255+vs+cs],$n[Fn-ss]=Hl[255+_s+as],$n[Fn+0]=Hl[255+gs-as],$n[Fn+ss]=Hl[255+qs-cs],$n[Fn+2*ss]=Hl[255+Os-Us]}Yr+=hn}}function po(Hr,Yr,nn,hn,xn,Sn,Rn,jn){for(Sn=2*Sn+1;0<xn--;){if(xu(Hr,Yr,nn,Sn,Rn))if(yu(Hr,Yr,nn,jn))cu(Hr,Yr,nn);else{var $n=Hr,Fn=Yr,ss=nn,vs=$n[Fn-ss],_s=$n[Fn+0],gs=$n[Fn+ss],qs=Kp[112+((Os=3*(_s-vs))+4>>3)],Os=Kp[112+(Os+3>>3)],as=qs+1>>1;$n[Fn-2*ss]=Hl[255+$n[Fn-2*ss]+as],$n[Fn-ss]=Hl[255+vs+Os],$n[Fn+0]=Hl[255+_s-qs],$n[Fn+ss]=Hl[255+gs-as]}Yr+=hn}}function Xl(Hr,Yr,nn,hn,xn,Sn){oo(Hr,Yr,nn,1,16,hn,xn,Sn)}function Ml(Hr,Yr,nn,hn,xn,Sn){oo(Hr,Yr,1,nn,16,hn,xn,Sn)}function uu(Hr,Yr,nn,hn,xn,Sn){var Rn;for(Rn=3;0<Rn;--Rn)po(Hr,Yr+=4*nn,nn,1,16,hn,xn,Sn)}function Dl(Hr,Yr,nn,hn,xn,Sn){var Rn;for(Rn=3;0<Rn;--Rn)po(Hr,Yr+=4,1,nn,16,hn,xn,Sn)}function vu(Hr,Yr,nn,hn,xn,Sn,Rn,jn){oo(Hr,Yr,xn,1,8,Sn,Rn,jn),oo(nn,hn,xn,1,8,Sn,Rn,jn)}function _u(Hr,Yr,nn,hn,xn,Sn,Rn,jn){oo(Hr,Yr,1,xn,8,Sn,Rn,jn),oo(nn,hn,1,xn,8,Sn,Rn,jn)}function Yl(Hr,Yr,nn,hn,xn,Sn,Rn,jn){po(Hr,Yr+4*xn,xn,1,8,Sn,Rn,jn),po(nn,hn+4*xn,xn,1,8,Sn,Rn,jn)}function Pl(Hr,Yr,nn,hn,xn,Sn,Rn,jn){po(Hr,Yr+4,1,xn,8,Sn,Rn,jn),po(nn,hn+4,1,xn,8,Sn,Rn,jn)}function Zl(){this.ba=new kn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new is,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Tu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Lu(){this.ua=0,this.Wa=new en,this.vb=new en,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Lr,this.yc=new Or}function rp(){this.xb=this.a=0,this.l=new Ns,this.ca=new kn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new $r,this.Pb=0,this.wd=new $r,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Lu,this.ab=0,this.gc=ar(4,Tu),this.Oc=0}function du(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ns,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Eu(Hr,Yr,nn,hn,xn,Sn,Rn){for(Hr=Hr==null?0:Hr[Yr+0],Yr=0;Yr<Rn;++Yr)xn[Sn+Yr]=Hr+nn[hn+Yr]&255,Hr=xn[Sn+Yr]}function Fu(Hr,Yr,nn,hn,xn,Sn,Rn){var jn;if(Hr==null)Eu(null,null,nn,hn,xn,Sn,Rn);else for(jn=0;jn<Rn;++jn)xn[Sn+jn]=Hr[Yr+jn]+nn[hn+jn]&255}function Sl(Hr,Yr,nn,hn,xn,Sn,Rn){if(Hr==null)Eu(null,null,nn,hn,xn,Sn,Rn);else{var jn,$n=Hr[Yr+0],Fn=$n,ss=$n;for(jn=0;jn<Rn;++jn)Fn=ss+($n=Hr[Yr+jn])-Fn,ss=nn[hn+jn]+(-256&Fn?0>Fn?0:255:Fn)&255,Fn=$n,xn[Sn+jn]=ss}}function Bu(Hr,Yr,nn,hn){var xn=Yr.width,Sn=Yr.o;if(er(Hr!=null&&Yr!=null),0>nn||0>=hn||nn+hn>Sn)return null;if(!Hr.Cc){if(Hr.ga==null){var Rn;if(Hr.ga=new du,(Rn=Hr.ga==null)||(Rn=Yr.width*Yr.o,er(Hr.Gb.length==0),Hr.Gb=sr(Rn),Hr.Uc=0,Hr.Gb==null?Rn=0:(Hr.mb=Hr.Gb,Hr.nb=Hr.Uc,Hr.rc=null,Rn=1),Rn=!Rn),!Rn){Rn=Hr.ga;var jn=Hr.Fa,$n=Hr.P,Fn=Hr.qc,ss=Hr.mb,vs=Hr.nb,_s=$n+1,gs=Fn-1,qs=Rn.l;if(er(jn!=null&&ss!=null&&Yr!=null),Wu[0]=null,Wu[1]=Eu,Wu[2]=Fu,Wu[3]=Sl,Rn.ca=ss,Rn.tb=vs,Rn.c=Yr.width,Rn.i=Yr.height,er(0<Rn.c&&0<Rn.i),1>=Fn)Yr=0;else if(Rn.$a=jn[$n+0]>>0&3,Rn.Z=jn[$n+0]>>2&3,Rn.Lc=jn[$n+0]>>4&3,$n=jn[$n+0]>>6&3,0>Rn.$a||1<Rn.$a||4<=Rn.Z||1<Rn.Lc||$n)Yr=0;else if(qs.put=_n,qs.ac=vn,qs.bc=Mn,qs.ma=Rn,qs.width=Yr.width,qs.height=Yr.height,qs.Da=Yr.Da,qs.v=Yr.v,qs.va=Yr.va,qs.j=Yr.j,qs.o=Yr.o,Rn.$a)e:{er(Rn.$a==1),Yr=Bs();t:for(;;){if(Yr==null){Yr=0;break e}if(er(Rn!=null),Rn.mc=Yr,Yr.c=Rn.c,Yr.i=Rn.i,Yr.l=Rn.l,Yr.l.ma=Rn,Yr.l.width=Rn.c,Yr.l.height=Rn.i,Yr.a=0,Ar(Yr.m,jn,_s,gs),!Zs(Rn.c,Rn.i,1,Yr,null)||(Yr.ab==1&&Yr.gc[0].hc==3&&us(Yr.s)?(Rn.ic=1,jn=Yr.c*Yr.i,Yr.Ta=null,Yr.Ua=0,Yr.V=sr(jn),Yr.Ba=0,Yr.V==null?(Yr.a=1,Yr=0):Yr=1):(Rn.ic=0,Yr=Qs(Yr,Rn.c)),!Yr))break t;Yr=1;break e}Rn.mc=null,Yr=0}else Yr=gs>=Rn.c*Rn.i;Rn=!Yr}if(Rn)return null;Hr.ga.Lc!=1?Hr.Ga=0:hn=Sn-nn}er(Hr.ga!=null),er(nn+hn<=Sn);e:{if(Yr=(jn=Hr.ga).c,Sn=jn.l.o,jn.$a==0){if(_s=Hr.rc,gs=Hr.Vc,qs=Hr.Fa,$n=Hr.P+1+nn*Yr,Fn=Hr.mb,ss=Hr.nb+nn*Yr,er($n<=Hr.P+Hr.qc),jn.Z!=0)for(er(Wu[jn.Z]!=null),Rn=0;Rn<hn;++Rn)Wu[jn.Z](_s,gs,qs,$n,Fn,ss,Yr),_s=Fn,gs=ss,ss+=Yr,$n+=Yr;else for(Rn=0;Rn<hn;++Rn)nr(Fn,ss,qs,$n,Yr),_s=Fn,gs=ss,ss+=Yr,$n+=Yr;Hr.rc=_s,Hr.Vc=gs}else{if(er(jn.mc!=null),Yr=nn+hn,er((Rn=jn.mc)!=null),er(Yr<=Rn.i),Rn.C>=Yr)Yr=1;else if(jn.ic||ms(),jn.ic){jn=Rn.V,_s=Rn.Ba,gs=Rn.c;var Os=Rn.i,as=(qs=1,$n=Rn.$/gs,Fn=Rn.$%gs,ss=Rn.m,vs=Rn.s,Rn.$),cs=gs*Os,Us=gs*Yr,Hs=vs.wc,zs=as<Us?Gn(vs,Fn,$n):null;er(as<=cs),er(Yr<=Os),er(us(vs));t:for(;;){for(;!ss.h&&as<Us;){if(Fn&Hs||(zs=Gn(vs,Fn,$n)),er(zs!=null),Vr(ss),256>(Os=wn(zs.G[0],zs.H[0],ss)))jn[_s+as]=Os,++as,++Fn>=gs&&(Fn=0,++$n<=Yr&&!($n%16)&&As(Rn,$n));else{if(!(280>Os)){qs=0;break t}Os=Zn(Os-256,ss);var $a,na=wn(zs.G[4],zs.H[4],ss);if(Vr(ss),!(as>=(na=qn(gs,na=Zn(na,ss)))&&cs-as>=Os)){qs=0;break t}for($a=0;$a<Os;++$a)jn[_s+as+$a]=jn[_s+as+$a-na];for(as+=Os,Fn+=Os;Fn>=gs;)Fn-=gs,++$n<=Yr&&!($n%16)&&As(Rn,$n);as<Us&&Fn&Hs&&(zs=Gn(vs,Fn,$n))}er(ss.h==zr(ss))}As(Rn,$n>Yr?Yr:$n);break t}!qs||ss.h&&as<cs?(qs=0,Rn.a=ss.h?5:3):Rn.$=as,Yr=qs}else Yr=Rs(Rn,Rn.V,Rn.Ba,Rn.c,Rn.i,Yr,eo);if(!Yr){hn=0;break e}}nn+hn>=Sn&&(Hr.Cc=1),hn=1}if(!hn)return null;if(Hr.Cc&&((hn=Hr.ga)!=null&&(hn.mc=null),Hr.ga=null,0<Hr.Ga))return alert("todo:WebPDequantizeLevels"),null}return Hr.nb+nn*xn}function Qr(Hr,Yr,nn,hn,xn,Sn){for(;0<xn--;){var Rn,jn=Hr,$n=Yr+(nn?1:0),Fn=Hr,ss=Yr+(nn?0:3);for(Rn=0;Rn<hn;++Rn){var vs=Fn[ss+4*Rn];vs!=255&&(vs*=32897,jn[$n+4*Rn+0]=jn[$n+4*Rn+0]*vs>>23,jn[$n+4*Rn+1]=jn[$n+4*Rn+1]*vs>>23,jn[$n+4*Rn+2]=jn[$n+4*Rn+2]*vs>>23)}Yr+=Sn}}function bn(Hr,Yr,nn,hn,xn){for(;0<hn--;){var Sn;for(Sn=0;Sn<nn;++Sn){var Rn=Hr[Yr+2*Sn+0],jn=15&(Fn=Hr[Yr+2*Sn+1]),$n=4369*jn,Fn=(240&Fn|Fn>>4)*$n>>16;Hr[Yr+2*Sn+0]=(240&Rn|Rn>>4)*$n>>16&240|(15&Rn|Rn<<4)*$n>>16>>4&15,Hr[Yr+2*Sn+1]=240&Fn|jn}Yr+=xn}}function Wn(Hr,Yr,nn,hn,xn,Sn,Rn,jn){var $n,Fn,ss=255;for(Fn=0;Fn<xn;++Fn){for($n=0;$n<hn;++$n){var vs=Hr[Yr+$n];Sn[Rn+4*$n]=vs,ss&=vs}Yr+=nn,Rn+=jn}return ss!=255}function ts(Hr,Yr,nn,hn,xn){var Sn;for(Sn=0;Sn<xn;++Sn)nn[hn+Sn]=Hr[Yr+Sn]>>8}function ms(){eu=Qr,$o=bn,Mo=Wn,Uo=ts}function Ls(Hr,Yr,nn){Rr[Hr]=function(hn,xn,Sn,Rn,jn,$n,Fn,ss,vs,_s,gs,qs,Os,as,cs,Us,Hs){var zs,$a=Hs-1>>1,na=jn[$n+0]|Fn[ss+0]<<16,so=vs[_s+0]|gs[qs+0]<<16;er(hn!=null);var ba=3*na+so+131074>>2;for(Yr(hn[xn+0],255&ba,ba>>16,Os,as),Sn!=null&&(ba=3*so+na+131074>>2,Yr(Sn[Rn+0],255&ba,ba>>16,cs,Us)),zs=1;zs<=$a;++zs){var wo=jn[$n+zs]|Fn[ss+zs]<<16,Ao=vs[_s+zs]|gs[qs+zs]<<16,vo=na+wo+so+Ao+524296,bo=vo+2*(wo+so)>>3;ba=bo+na>>1,na=(vo=vo+2*(na+Ao)>>3)+wo>>1,Yr(hn[xn+2*zs-1],255&ba,ba>>16,Os,as+(2*zs-1)*nn),Yr(hn[xn+2*zs-0],255&na,na>>16,Os,as+(2*zs-0)*nn),Sn!=null&&(ba=vo+so>>1,na=bo+Ao>>1,Yr(Sn[Rn+2*zs-1],255&ba,ba>>16,cs,Us+(2*zs-1)*nn),Yr(Sn[Rn+2*zs+0],255&na,na>>16,cs,Us+(2*zs+0)*nn)),na=wo,so=Ao}1&Hs||(ba=3*na+so+131074>>2,Yr(hn[xn+Hs-1],255&ba,ba>>16,Os,as+(Hs-1)*nn),Sn!=null&&(ba=3*so+na+131074>>2,Yr(Sn[Rn+Hs-1],255&ba,ba>>16,cs,Us+(Hs-1)*nn)))}}function Ws(){ru[Xp]=Xy,ru[Yp]=C0,ru[R0]=Yy,ru[Zp]=N0,ru[Qp]=I0,ru[jm]=O0,ru[P0]=Zy,ru[km]=C0,ru[Cm]=N0,ru[Jp]=I0,ru[Nm]=O0}function ga(Hr){return Hr&-16384?0>Hr?0:255:Hr>>Qy}function Wr(Hr,Yr){return ga((19077*Hr>>8)+(26149*Yr>>8)-14234)}function cn(Hr,Yr,nn){return ga((19077*Hr>>8)-(6419*Yr>>8)-(13320*nn>>8)+8708)}function mn(Hr,Yr){return ga((19077*Hr>>8)+(33050*Yr>>8)-17685)}function Tn(Hr,Yr,nn,hn,xn){hn[xn+0]=Wr(Hr,nn),hn[xn+1]=cn(Hr,Yr,nn),hn[xn+2]=mn(Hr,Yr)}function hs(Hr,Yr,nn,hn,xn){hn[xn+0]=mn(Hr,Yr),hn[xn+1]=cn(Hr,Yr,nn),hn[xn+2]=Wr(Hr,nn)}function Es(Hr,Yr,nn,hn,xn){var Sn=cn(Hr,Yr,nn);Yr=Sn<<3&224|mn(Hr,Yr)>>3,hn[xn+0]=248&Wr(Hr,nn)|Sn>>5,hn[xn+1]=Yr}function Gs(Hr,Yr,nn,hn,xn){var Sn=240&mn(Hr,Yr)|15;hn[xn+0]=240&Wr(Hr,nn)|cn(Hr,Yr,nn)>>4,hn[xn+1]=Sn}function lo(Hr,Yr,nn,hn,xn){hn[xn+0]=255,Tn(Hr,Yr,nn,hn,xn+1)}function yo(Hr,Yr,nn,hn,xn){hs(Hr,Yr,nn,hn,xn),hn[xn+3]=255}function co(Hr,Yr,nn,hn,xn){Tn(Hr,Yr,nn,hn,xn),hn[xn+3]=255}function So(Hr,Yr){return 0>Hr?0:Hr>Yr?Yr:Hr}function ko(Hr,Yr,nn){Rr[Hr]=function(hn,xn,Sn,Rn,jn,$n,Fn,ss,vs){for(var _s=ss+(-2&vs)*nn;ss!=_s;)Yr(hn[xn+0],Sn[Rn+0],jn[$n+0],Fn,ss),Yr(hn[xn+1],Sn[Rn+0],jn[$n+0],Fn,ss+nn),xn+=2,++Rn,++$n,ss+=2*nn;1&vs&&Yr(hn[xn+0],Sn[Rn+0],jn[$n+0],Fn,ss)}}function hu(Hr,Yr,nn){return nn==0?Hr==0?Yr==0?6:5:Yr==0?4:0:nn}function Jo(Hr,Yr,nn,hn,xn){switch(Hr>>>30){case 3:Cu(Yr,nn,hn,xn,0);break;case 2:Vo(Yr,nn,hn,xn);break;case 1:Cl(Yr,nn,hn,xn)}}function Su(Hr,Yr){var nn,hn,xn=Yr.M,Sn=Yr.Nb,Rn=Hr.oc,jn=Hr.pc+40,$n=Hr.oc,Fn=Hr.pc+584,ss=Hr.oc,vs=Hr.pc+600;for(nn=0;16>nn;++nn)Rn[jn+32*nn-1]=129;for(nn=0;8>nn;++nn)$n[Fn+32*nn-1]=129,ss[vs+32*nn-1]=129;for(0<xn?Rn[jn-1-32]=$n[Fn-1-32]=ss[vs-1-32]=129:(ir(Rn,jn-32-1,127,21),ir($n,Fn-32-1,127,9),ir(ss,vs-32-1,127,9)),hn=0;hn<Hr.za;++hn){var _s=Yr.ya[Yr.aa+hn];if(0<hn){for(nn=-1;16>nn;++nn)nr(Rn,jn+32*nn-4,Rn,jn+32*nn+12,4);for(nn=-1;8>nn;++nn)nr($n,Fn+32*nn-4,$n,Fn+32*nn+4,4),nr(ss,vs+32*nn-4,ss,vs+32*nn+4,4)}var gs=Hr.Gd,qs=Hr.Hd+hn,Os=_s.ad,as=_s.Hc;if(0<xn&&(nr(Rn,jn-32,gs[qs].y,0,16),nr($n,Fn-32,gs[qs].f,0,8),nr(ss,vs-32,gs[qs].ea,0,8)),_s.Za){var cs=Rn,Us=jn-32+16;for(0<xn&&(hn>=Hr.za-1?ir(cs,Us,gs[qs].y[15],4):nr(cs,Us,gs[qs+1].y,0,4)),nn=0;4>nn;nn++)cs[Us+128+nn]=cs[Us+256+nn]=cs[Us+384+nn]=cs[Us+0+nn];for(nn=0;16>nn;++nn,as<<=2)cs=Rn,Us=jn+M0[nn],fu[_s.Ob[nn]](cs,Us),Jo(as,Os,16*+nn,cs,Us)}else if(cs=hu(hn,xn,_s.Ob[0]),Hu[cs](Rn,jn),as!=0)for(nn=0;16>nn;++nn,as<<=2)Jo(as,Os,16*+nn,Rn,jn+M0[nn]);for(nn=_s.Gc,cs=hu(hn,xn,_s.Dd),Iu[cs]($n,Fn),Iu[cs](ss,vs),as=Os,cs=$n,Us=Fn,255&(_s=nn>>0)&&(170&_s?Ap(as,256,cs,Us):Jl(as,256,cs,Us)),_s=ss,as=vs,255&(nn>>=8)&&(170&nn?Ap(Os,320,_s,as):Jl(Os,320,_s,as)),xn<Hr.Ub-1&&(nr(gs[qs].y,0,Rn,jn+480,16),nr(gs[qs].f,0,$n,Fn+224,8),nr(gs[qs].ea,0,ss,vs+224,8)),nn=8*Sn*Hr.B,gs=Hr.sa,qs=Hr.ta+16*hn+16*Sn*Hr.R,Os=Hr.qa,_s=Hr.ra+8*hn+nn,as=Hr.Ha,cs=Hr.Ia+8*hn+nn,nn=0;16>nn;++nn)nr(gs,qs+nn*Hr.R,Rn,jn+32*nn,16);for(nn=0;8>nn;++nn)nr(Os,_s+nn*Hr.B,$n,Fn+32*nn,8),nr(as,cs+nn*Hr.B,ss,vs+32*nn,8)}}function Au(Hr,Yr,nn,hn,xn,Sn,Rn,jn,$n){var Fn=[0],ss=[0],vs=0,_s=$n!=null?$n.kd:0,gs=$n??new wu;if(Hr==null||12>nn)return 7;gs.data=Hr,gs.w=Yr,gs.ha=nn,Yr=[Yr],nn=[nn],gs.gb=[gs.gb];e:{var qs=Yr,Os=nn,as=gs.gb;if(er(Hr!=null),er(Os!=null),er(as!=null),as[0]=0,12<=Os[0]&&!rr(Hr,qs[0],"RIFF")){if(rr(Hr,qs[0]+8,"WEBP")){as=3;break e}var cs=tn(Hr,qs[0]+4);if(12>cs||4294967286<cs){as=3;break e}if(_s&&cs>Os[0]-8){as=7;break e}as[0]=cs,qs[0]+=12,Os[0]-=12}as=0}if(as!=0)return as;for(cs=0<gs.gb[0],nn=nn[0];;){e:{var Us=Hr;Os=Yr,as=nn;var Hs=Fn,zs=ss,$a=qs=[0];if((ba=vs=[vs])[0]=0,8>as[0])as=7;else{if(!rr(Us,Os[0],"VP8X")){if(tn(Us,Os[0]+4)!=10){as=3;break e}if(18>as[0]){as=7;break e}var na=tn(Us,Os[0]+8),so=1+Jr(Us,Os[0]+12);if(2147483648<=so*(Us=1+Jr(Us,Os[0]+15))){as=3;break e}$a!=null&&($a[0]=na),Hs!=null&&(Hs[0]=so),zs!=null&&(zs[0]=Us),Os[0]+=18,as[0]-=18,ba[0]=1}as=0}}if(vs=vs[0],qs=qs[0],as!=0)return as;if(Os=!!(2&qs),!cs&&vs)return 3;if(Sn!=null&&(Sn[0]=!!(16&qs)),Rn!=null&&(Rn[0]=Os),jn!=null&&(jn[0]=0),Rn=Fn[0],qs=ss[0],vs&&Os&&$n==null){as=0;break}if(4>nn){as=7;break}if(cs&&vs||!cs&&!vs&&!rr(Hr,Yr[0],"ALPH")){nn=[nn],gs.na=[gs.na],gs.P=[gs.P],gs.Sa=[gs.Sa];e:{na=Hr,as=Yr,cs=nn;var ba=gs.gb;Hs=gs.na,zs=gs.P,$a=gs.Sa,so=22,er(na!=null),er(cs!=null),Us=as[0];var wo=cs[0];for(er(Hs!=null),er($a!=null),Hs[0]=null,zs[0]=null,$a[0]=0;;){if(as[0]=Us,cs[0]=wo,8>wo){as=7;break e}var Ao=tn(na,Us+4);if(4294967286<Ao){as=3;break e}var vo=8+Ao+1&-2;if(so+=vo,0<ba&&so>ba){as=3;break e}if(!rr(na,Us,"VP8 ")||!rr(na,Us,"VP8L")){as=0;break e}if(wo[0]<vo){as=7;break e}rr(na,Us,"ALPH")||(Hs[0]=na,zs[0]=Us+8,$a[0]=Ao),Us+=vo,wo-=vo}}if(nn=nn[0],gs.na=gs.na[0],gs.P=gs.P[0],gs.Sa=gs.Sa[0],as!=0)break}nn=[nn],gs.Ja=[gs.Ja],gs.xa=[gs.xa];e:if(ba=Hr,as=Yr,cs=nn,Hs=gs.gb[0],zs=gs.Ja,$a=gs.xa,na=as[0],Us=!rr(ba,na,"VP8 "),so=!rr(ba,na,"VP8L"),er(ba!=null),er(cs!=null),er(zs!=null),er($a!=null),8>cs[0])as=7;else{if(Us||so){if(ba=tn(ba,na+4),12<=Hs&&ba>Hs-12){as=3;break e}if(_s&&ba>cs[0]-8){as=7;break e}zs[0]=ba,as[0]+=8,cs[0]-=8,$a[0]=so}else $a[0]=5<=cs[0]&&ba[na+0]==47&&!(ba[na+4]>>5),zs[0]=cs[0];as=0}if(nn=nn[0],gs.Ja=gs.Ja[0],gs.xa=gs.xa[0],Yr=Yr[0],as!=0)break;if(4294967286<gs.Ja)return 3;if(jn==null||Os||(jn[0]=gs.xa?2:1),Rn=[Rn],qs=[qs],gs.xa){if(5>nn){as=7;break}jn=Rn,_s=qs,Os=Sn,Hr==null||5>nn?Hr=0:5<=nn&&Hr[Yr+0]==47&&!(Hr[Yr+4]>>5)?(cs=[0],ba=[0],Hs=[0],Ar(zs=new $r,Hr,Yr,nn),Cn(zs,cs,ba,Hs)?(jn!=null&&(jn[0]=cs[0]),_s!=null&&(_s[0]=ba[0]),Os!=null&&(Os[0]=Hs[0]),Hr=1):Hr=0):Hr=0}else{if(10>nn){as=7;break}jn=qs,Hr==null||10>nn||!Js(Hr,Yr+3,nn-3)?Hr=0:(_s=Hr[Yr+0]|Hr[Yr+1]<<8|Hr[Yr+2]<<16,Os=16383&(Hr[Yr+7]<<8|Hr[Yr+6]),Hr=16383&(Hr[Yr+9]<<8|Hr[Yr+8]),1&_s||3<(_s>>1&7)||!(_s>>4&1)||_s>>5>=gs.Ja||!Os||!Hr?Hr=0:(Rn&&(Rn[0]=Os),jn&&(jn[0]=Hr),Hr=1))}if(!Hr||(Rn=Rn[0],qs=qs[0],vs&&(Fn[0]!=Rn||ss[0]!=qs)))return 3;$n!=null&&($n[0]=gs,$n.offset=Yr-$n.w,er(4294967286>Yr-$n.w),er($n.offset==$n.ha-nn));break}return as==0||as==7&&vs&&$n==null?(Sn!=null&&(Sn[0]|=gs.na!=null&&0<gs.na.length),hn!=null&&(hn[0]=Rn),xn!=null&&(xn[0]=qs),0):as}function _p(Hr,Yr,nn){var hn=Yr.width,xn=Yr.height,Sn=0,Rn=0,jn=hn,$n=xn;if(Yr.Da=Hr!=null&&0<Hr.Da,Yr.Da&&(jn=Hr.cd,$n=Hr.bd,Sn=Hr.v,Rn=Hr.j,11>nn||(Sn&=-2,Rn&=-2),0>Sn||0>Rn||0>=jn||0>=$n||Sn+jn>hn||Rn+$n>xn))return 0;if(Yr.v=Sn,Yr.j=Rn,Yr.va=Sn+jn,Yr.o=Rn+$n,Yr.U=jn,Yr.T=$n,Yr.da=Hr!=null&&0<Hr.da,Yr.da){if(!rn(jn,$n,nn=[Hr.ib],Sn=[Hr.hb]))return 0;Yr.ib=nn[0],Yr.hb=Sn[0]}return Yr.ob=Hr!=null&&Hr.ob,Yr.Kb=Hr==null||!Hr.Sd,Yr.da&&(Yr.ob=Yr.ib<3*hn/4&&Yr.hb<3*xn/4,Yr.Kb=0),1}function wp(Hr){if(Hr==null)return 2;if(11>Hr.S){var Yr=Hr.f.RGBA;Yr.fb+=(Hr.height-1)*Yr.A,Yr.A=-Yr.A}else Yr=Hr.f.kb,Hr=Hr.height,Yr.O+=(Hr-1)*Yr.fa,Yr.fa=-Yr.fa,Yr.N+=(Hr-1>>1)*Yr.Ab,Yr.Ab=-Yr.Ab,Yr.W+=(Hr-1>>1)*Yr.Db,Yr.Db=-Yr.Db,Yr.F!=null&&(Yr.J+=(Hr-1)*Yr.lb,Yr.lb=-Yr.lb);return 0}function np(Hr,Yr,nn,hn){if(hn==null||0>=Hr||0>=Yr)return 2;if(nn!=null){if(nn.Da){var xn=nn.cd,Sn=nn.bd,Rn=-2&nn.v,jn=-2&nn.j;if(0>Rn||0>jn||0>=xn||0>=Sn||Rn+xn>Hr||jn+Sn>Yr)return 2;Hr=xn,Yr=Sn}if(nn.da){if(!rn(Hr,Yr,xn=[nn.ib],Sn=[nn.hb]))return 2;Hr=xn[0],Yr=Sn[0]}}hn.width=Hr,hn.height=Yr;e:{var $n=hn.width,Fn=hn.height;if(Hr=hn.S,0>=$n||0>=Fn||!(Hr>=Xp&&13>Hr))Hr=2;else{if(0>=hn.Rd&&hn.sd==null){Rn=Sn=xn=Yr=0;var ss=(jn=$n*D0[Hr])*Fn;if(11>Hr||(Sn=(Fn+1)/2*(Yr=($n+1)/2),Hr==12&&(Rn=(xn=$n)*Fn)),(Fn=sr(ss+2*Sn+Rn))==null){Hr=1;break e}hn.sd=Fn,11>Hr?(($n=hn.f.RGBA).eb=Fn,$n.fb=0,$n.A=jn,$n.size=ss):(($n=hn.f.kb).y=Fn,$n.O=0,$n.fa=jn,$n.Fd=ss,$n.f=Fn,$n.N=0+ss,$n.Ab=Yr,$n.Cd=Sn,$n.ea=Fn,$n.W=0+ss+Sn,$n.Db=Yr,$n.Ed=Sn,Hr==12&&($n.F=Fn,$n.J=0+ss+2*Sn),$n.Tc=Rn,$n.lb=xn)}if(Yr=1,xn=hn.S,Sn=hn.width,Rn=hn.height,xn>=Xp&&13>xn)if(11>xn)Hr=hn.f.RGBA,Yr&=(jn=Math.abs(Hr.A))*(Rn-1)+Sn<=Hr.size,Yr&=jn>=Sn*D0[xn],Yr&=Hr.eb!=null;else{Hr=hn.f.kb,jn=(Sn+1)/2,ss=(Rn+1)/2,$n=Math.abs(Hr.fa),Fn=Math.abs(Hr.Ab);var vs=Math.abs(Hr.Db),_s=Math.abs(Hr.lb),gs=_s*(Rn-1)+Sn;Yr&=$n*(Rn-1)+Sn<=Hr.Fd,Yr&=Fn*(ss-1)+jn<=Hr.Cd,Yr=(Yr&=vs*(ss-1)+jn<=Hr.Ed)&$n>=Sn&Fn>=jn&vs>=jn,Yr&=Hr.y!=null,Yr&=Hr.f!=null,Yr&=Hr.ea!=null,xn==12&&(Yr&=_s>=Sn,Yr&=gs<=Hr.Tc,Yr&=Hr.F!=null)}else Yr=0;Hr=Yr?0:2}}return Hr!=0||nn!=null&&nn.fd&&(Hr=wp(hn)),Hr}var yl=64,ip=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sp=24,ap=32,Ep=8,Ll=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fn("Predictor0","PredictorAdd0"),Rr.Predictor0=function(){return 4278190080},Rr.Predictor1=function(Hr){return Hr},Rr.Predictor2=function(Hr,Yr,nn){return Yr[nn+0]},Rr.Predictor3=function(Hr,Yr,nn){return Yr[nn+1]},Rr.Predictor4=function(Hr,Yr,nn){return Yr[nn-1]},Rr.Predictor5=function(Hr,Yr,nn){return gn(gn(Hr,Yr[nn+1]),Yr[nn+0])},Rr.Predictor6=function(Hr,Yr,nn){return gn(Hr,Yr[nn-1])},Rr.Predictor7=function(Hr,Yr,nn){return gn(Hr,Yr[nn+0])},Rr.Predictor8=function(Hr,Yr,nn){return gn(Yr[nn-1],Yr[nn+0])},Rr.Predictor9=function(Hr,Yr,nn){return gn(Yr[nn+0],Yr[nn+1])},Rr.Predictor10=function(Hr,Yr,nn){return gn(gn(Hr,Yr[nn-1]),gn(Yr[nn+0],Yr[nn+1]))},Rr.Predictor11=function(Hr,Yr,nn){var hn=Yr[nn+0];return 0>=En(hn>>24&255,Hr>>24&255,(Yr=Yr[nn-1])>>24&255)+En(hn>>16&255,Hr>>16&255,Yr>>16&255)+En(hn>>8&255,Hr>>8&255,Yr>>8&255)+En(255&hn,255&Hr,255&Yr)?hn:Hr},Rr.Predictor12=function(Hr,Yr,nn){var hn=Yr[nn+0];return(Pn((Hr>>24&255)+(hn>>24&255)-((Yr=Yr[nn-1])>>24&255))<<24|Pn((Hr>>16&255)+(hn>>16&255)-(Yr>>16&255))<<16|Pn((Hr>>8&255)+(hn>>8&255)-(Yr>>8&255))<<8|Pn((255&Hr)+(255&hn)-(255&Yr)))>>>0},Rr.Predictor13=function(Hr,Yr,nn){var hn=Yr[nn-1];return(In((Hr=gn(Hr,Yr[nn+0]))>>24&255,hn>>24&255)<<24|In(Hr>>16&255,hn>>16&255)<<16|In(Hr>>8&255,hn>>8&255)<<8|In(Hr>>0&255,hn>>0&255))>>>0};var Pm=Rr.PredictorAdd0;Rr.PredictorAdd1=zn,fn("Predictor2","PredictorAdd2"),fn("Predictor3","PredictorAdd3"),fn("Predictor4","PredictorAdd4"),fn("Predictor5","PredictorAdd5"),fn("Predictor6","PredictorAdd6"),fn("Predictor7","PredictorAdd7"),fn("Predictor8","PredictorAdd8"),fn("Predictor9","PredictorAdd9"),fn("Predictor10","PredictorAdd10"),fn("Predictor11","PredictorAdd11"),fn("Predictor12","PredictorAdd12"),fn("Predictor13","PredictorAdd13");var Sp=Rr.PredictorAdd2;es("ColorIndexInverseTransform","MapARGB","32b",function(Hr){return Hr>>8&255},function(Hr){return Hr}),es("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Hr){return Hr},function(Hr){return Hr>>8&255});var zp,Ql=Rr.ColorIndexInverseTransform,op=Rr.MapARGB,qp=Rr.VP8LColorIndexInverseTransformAlpha,Hp=Rr.MapAlpha,Vu=Rr.VP8LPredictorsAdd=[];Vu.length=16,(Rr.VP8LPredictors=[]).length=16,(Rr.VP8LPredictorsAdd_C=[]).length=16,(Rr.VP8LPredictors_C=[]).length=16;var Qu,Fl,Tl,Uu,ju,ku,lp,Cu,Vo,Ap,Cl,Jl,cp,Wp,Rp,Ju,_d,zu,_h,up,_f,qu,Pp,_c,eu,$o,Mo,Uo,Go=sr(511),Nu=sr(2041),Tp=sr(225),dp=sr(767),Gp=0,Tm=Nu,Kp=Tp,Hl=dp,tu=Go,Xp=0,Yp=1,R0=2,Zp=3,Qp=4,jm=5,P0=6,km=7,Cm=8,Jp=9,Nm=10,$y=[2,3,7],My=[3,3,11],T0=[280,256,256,256,40],Dy=[0,1,1,1,0],Ly=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],By=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Vy=8,Im=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Om=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],jp=null,Uy=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zy=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],j0=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],qy=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Hy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Wy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Gy=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hu=[],fu=[],Iu=[],Ky=1,k0=2,Wu=[],ru=[];Ls("UpsampleRgbLinePair",Tn,3),Ls("UpsampleBgrLinePair",hs,3),Ls("UpsampleRgbaLinePair",co,4),Ls("UpsampleBgraLinePair",yo,4),Ls("UpsampleArgbLinePair",lo,4),Ls("UpsampleRgba4444LinePair",Gs,2),Ls("UpsampleRgb565LinePair",Es,2);var Xy=Rr.UpsampleRgbLinePair,Yy=Rr.UpsampleBgrLinePair,C0=Rr.UpsampleRgbaLinePair,N0=Rr.UpsampleBgraLinePair,I0=Rr.UpsampleArgbLinePair,O0=Rr.UpsampleRgba4444LinePair,Zy=Rr.UpsampleRgb565LinePair,em=16,tm=1<<em-1,kp=-227,$m=482,Qy=6,$0=0,Jy=sr(256),ex=sr(256),tx=sr(256),rx=sr(256),nx=sr($m-kp),ix=sr($m-kp);ko("YuvToRgbRow",Tn,3),ko("YuvToBgrRow",hs,3),ko("YuvToRgbaRow",co,4),ko("YuvToBgraRow",yo,4),ko("YuvToArgbRow",lo,4),ko("YuvToRgba4444Row",Gs,2),ko("YuvToRgb565Row",Es,2);var M0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rm=[0,2,8],sx=[8,7,6,4,4,2,2,2,1,1,1,1],ax=1;this.WebPDecodeRGBA=function(Hr,Yr,nn,hn,xn){var Sn=Yp,Rn=new Zl,jn=new kn;Rn.ba=jn,jn.S=Sn,jn.width=[jn.width],jn.height=[jn.height];var $n=jn.width,Fn=jn.height,ss=new Jn;if(ss==null||Hr==null)var vs=2;else er(ss!=null),vs=Au(Hr,Yr,nn,ss.width,ss.height,ss.Pd,ss.Qd,ss.format,null);if(vs!=0?$n=0:($n!=null&&($n[0]=ss.width[0]),Fn!=null&&(Fn[0]=ss.height[0]),$n=1),$n){jn.width=jn.width[0],jn.height=jn.height[0],hn!=null&&(hn[0]=jn.width),xn!=null&&(xn[0]=jn.height);e:{if(hn=new Ns,(xn=new wu).data=Hr,xn.w=Yr,xn.ha=nn,xn.kd=1,Yr=[0],er(xn!=null),((Hr=Au(xn.data,xn.w,xn.ha,null,null,null,Yr,null,xn))==0||Hr==7)&&Yr[0]&&(Hr=4),(Yr=Hr)==0){if(er(Rn!=null),hn.data=xn.data,hn.w=xn.w+xn.offset,hn.ha=xn.ha-xn.offset,hn.put=_n,hn.ac=vn,hn.bc=Mn,hn.ma=Rn,xn.xa){if((Hr=Bs())==null){Rn=1;break e}if(function(_s,gs){var qs=[0],Os=[0],as=[0];t:for(;;){if(_s==null)return 0;if(gs==null)return _s.a=2,0;if(_s.l=gs,_s.a=0,Ar(_s.m,gs.data,gs.w,gs.ha),!Cn(_s.m,qs,Os,as)){_s.a=3;break t}if(_s.xb=k0,gs.width=qs[0],gs.height=Os[0],!Zs(qs[0],Os[0],1,_s,null))break t;return 1}return er(_s.a!=0),0}(Hr,hn)){if(hn=(Yr=np(hn.width,hn.height,Rn.Oa,Rn.ba))==0){t:{hn=Hr;r:for(;;){if(hn==null){hn=0;break t}if(er(hn.s.yc!=null),er(hn.s.Ya!=null),er(0<hn.s.Wb),er((nn=hn.l)!=null),er((xn=nn.ma)!=null),hn.xb!=0){if(hn.ca=xn.ba,hn.tb=xn.tb,er(hn.ca!=null),!_p(xn.Oa,nn,Zp)){hn.a=2;break r}if(!Qs(hn,nn.width)||nn.da)break r;if((nn.da||ls(hn.ca.S))&&ms(),11>hn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),hn.ca.f.kb.F!=null&&ms()),hn.Pb&&0<hn.s.ua&&hn.s.vb.X==null&&!an(hn.s.vb,hn.s.Wa.Xa)){hn.a=1;break r}hn.xb=0}if(!Rs(hn,hn.V,hn.Ba,hn.c,hn.i,nn.o,$s))break r;xn.Dc=hn.Ma,hn=1;break t}er(hn.a!=0),hn=0}hn=!hn}hn&&(Yr=Hr.a)}else Yr=Hr.a}else{if((Hr=new Ys)==null){Rn=1;break e}if(Hr.Fa=xn.na,Hr.P=xn.P,Hr.qc=xn.Sa,to(Hr,hn)){if((Yr=np(hn.width,hn.height,Rn.Oa,Rn.ba))==0){if(Hr.Aa=0,nn=Rn.Oa,er((xn=Hr)!=null),nn!=null){if(0<($n=0>($n=nn.Md)?0:100<$n?255:255*$n/100)){for(Fn=ss=0;4>Fn;++Fn)12>(vs=xn.pb[Fn]).lc&&(vs.ia=$n*sx[0>vs.lc?0:vs.lc]>>3),ss|=vs.ia;ss&&(alert("todo:VP8InitRandom"),xn.ia=1)}xn.Ga=nn.Id,100<xn.Ga?xn.Ga=100:0>xn.Ga&&(xn.Ga=0)}fo(Hr,hn)||(Yr=Hr.a)}}else Yr=Hr.a}Yr==0&&Rn.Oa!=null&&Rn.Oa.fd&&(Yr=wp(Rn.ba))}Rn=Yr}Sn=Rn!=0?null:11>Sn?jn.f.RGBA.eb:jn.f.kb.y}else Sn=null;return Sn};var D0=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function or(Rr,Nr){for(var Dr="",Ir=0;Ir<4;Ir++)Dr+=String.fromCharCode(Rr[Nr++]);return Dr}function ur(Rr,Nr){return(Rr[Nr+0]<<0|Rr[Nr+1]<<8|Rr[Nr+2]<<16)>>>0}function hr(Rr,Nr){return(Rr[Nr+0]<<0|Rr[Nr+1]<<8|Rr[Nr+2]<<16|Rr[Nr+3]<<24)>>>0}new lr;var dr=[0],fr=[0],gr=[],br=new lr,pr=tr,mr=function(Rr,Nr){var Dr={},Ir=0,Or=!1,jr=0,Lr=0;if(Dr.frames=[],!function(Br,zr,Gr,Vr){for(var Xr=0;Xr<Vr;Xr++)if(Br[zr+Xr]!=Gr.charCodeAt(Xr))return!0;return!1}(Rr,Nr,"RIFF",4)){var Cr,wr;for(hr(Rr,Nr+=4),Nr+=8;Nr<Rr.length;){var Pr=or(Rr,Nr),Ar=hr(Rr,Nr+=4);Nr+=4;var Sr=Ar+(1&Ar);switch(Pr){case"VP8 ":case"VP8L":Dr.frames[Ir]===void 0&&(Dr.frames[Ir]={}),($r=Dr.frames[Ir]).src_off=Or?Lr:Nr-8,$r.src_size=jr+Ar+8,Ir++,Or&&(Or=!1,jr=0,Lr=0);break;case"VP8X":($r=Dr.header={}).feature_flags=Rr[Nr];var Mr=Nr+4;$r.canvas_width=1+ur(Rr,Mr),Mr+=3,$r.canvas_height=1+ur(Rr,Mr),Mr+=3;break;case"ALPH":Or=!0,jr=Sr+8,Lr=Nr-8;break;case"ANIM":($r=Dr.header).bgcolor=hr(Rr,Nr),Mr=Nr+4,$r.loop_count=(Cr=Rr)[(wr=Mr)+0]<<0|Cr[wr+1]<<8,Mr+=2;break;case"ANMF":var qr,$r;($r=Dr.frames[Ir]={}).offset_x=2*ur(Rr,Nr),Nr+=3,$r.offset_y=2*ur(Rr,Nr),Nr+=3,$r.width=1+ur(Rr,Nr),Nr+=3,$r.height=1+ur(Rr,Nr),Nr+=3,$r.duration=ur(Rr,Nr),Nr+=3,qr=Rr[Nr++],$r.dispose=1&qr,$r.blend=qr>>1&1}Pr!="ANMF"&&(Nr+=Sr)}return Dr}}(pr,0);mr.response=pr,mr.rgbaoutput=!0,mr.dataurl=!1;var yr=mr.header?mr.header:null,xr=mr.frames?mr.frames:null;if(yr){yr.loop_counter=yr.loop_count,dr=[yr.canvas_height],fr=[yr.canvas_width];for(var vr=0;vr<xr.length&&xr[vr].blend!=0;vr++);}var _r=xr[0],Er=br.WebPDecodeRGBA(pr,_r.src_off,_r.src_size,fr,dr);_r.rgba=Er,_r.imgwidth=fr[0],_r.imgheight=dr[0];for(var Tr=0;Tr<fr[0]*dr[0]*4;Tr++)gr[Tr]=Er[Tr];return this.width=fr,this.height=dr,this.data=gr,this}(function(tr){var er=function(){return typeof zlibSync=="function"},rr=function(dr,fr,gr,br){var pr=4,mr=ar;switch(br){case tr.image_compression.FAST:pr=1,mr=sr;break;case tr.image_compression.MEDIUM:pr=6,mr=cr;break;case tr.image_compression.SLOW:pr=9,mr=lr}dr=nr(dr,fr,gr,mr);var yr=zlibSync(dr,{level:pr});return tr.__addimage__.arrayBufferToBinaryString(yr)},nr=function(dr,fr,gr,br){for(var pr,mr,yr,xr=dr.length/fr,vr=new Uint8Array(dr.length+xr),_r=ur(),Er=0;Er<xr;Er+=1){if(yr=Er*fr,pr=dr.subarray(yr,yr+fr),br)vr.set(br(pr,gr,mr),yr+Er);else{for(var Tr,Rr=_r.length,Nr=[];Tr<Rr;Tr+=1)Nr[Tr]=_r[Tr](pr,gr,mr);var Dr=hr(Nr.concat());vr.set(Nr[Dr],yr+Er)}mr=pr}return vr},ir=function(dr){var fr=Array.apply([],dr);return fr.unshift(0),fr},sr=function(dr,fr){var gr,br=[],pr=dr.length;br[0]=1;for(var mr=0;mr<pr;mr+=1)gr=dr[mr-fr]||0,br[mr+1]=dr[mr]-gr+256&255;return br},ar=function(dr,fr,gr){var br,pr=[],mr=dr.length;pr[0]=2;for(var yr=0;yr<mr;yr+=1)br=gr&&gr[yr]||0,pr[yr+1]=dr[yr]-br+256&255;return pr},cr=function(dr,fr,gr){var br,pr,mr=[],yr=dr.length;mr[0]=3;for(var xr=0;xr<yr;xr+=1)br=dr[xr-fr]||0,pr=gr&&gr[xr]||0,mr[xr+1]=dr[xr]+256-(br+pr>>>1)&255;return mr},lr=function(dr,fr,gr){var br,pr,mr,yr,xr=[],vr=dr.length;xr[0]=4;for(var _r=0;_r<vr;_r+=1)br=dr[_r-fr]||0,pr=gr&&gr[_r]||0,mr=gr&&gr[_r-fr]||0,yr=or(br,pr,mr),xr[_r+1]=dr[_r]-yr+256&255;return xr},or=function(dr,fr,gr){if(dr===fr&&fr===gr)return dr;var br=Math.abs(fr-gr),pr=Math.abs(dr-gr),mr=Math.abs(dr+fr-gr-gr);return br<=pr&&br<=mr?dr:pr<=mr?fr:gr},ur=function(){return[ir,sr,ar,cr,lr]},hr=function(dr){var fr=dr.map(function(gr){return gr.reduce(function(br,pr){return br+Math.abs(pr)},0)});return fr.indexOf(Math.min.apply(null,fr))};tr.processPNG=function(dr,fr,gr,br){var pr,mr,yr,xr,vr,_r,Er,Tr,Rr,Nr,Dr,Ir,Or,jr,Lr,Cr=this.decode.FLATE_DECODE,wr="";if(this.__addimage__.isArrayBuffer(dr)&&(dr=new Uint8Array(dr)),this.__addimage__.isArrayBufferView(dr)){if(dr=(yr=new Kt(dr)).imgData,mr=yr.bits,pr=yr.colorSpace,vr=yr.colors,[4,6].indexOf(yr.colorType)!==-1){if(yr.bits===8){Rr=(Tr=yr.pixelBitlength==32?new Uint32Array(yr.decodePixels().buffer):yr.pixelBitlength==16?new Uint16Array(yr.decodePixels().buffer):new Uint8Array(yr.decodePixels().buffer)).length,Dr=new Uint8Array(Rr*yr.colors),Nr=new Uint8Array(Rr);var Pr,Ar=yr.pixelBitlength-yr.bits;for(jr=0,Lr=0;jr<Rr;jr++){for(Or=Tr[jr],Pr=0;Pr<Ar;)Dr[Lr++]=Or>>>Pr&255,Pr+=yr.bits;Nr[jr]=Or>>>Pr&255}}if(yr.bits===16){Rr=(Tr=new Uint32Array(yr.decodePixels().buffer)).length,Dr=new Uint8Array(Rr*(32/yr.pixelBitlength)*yr.colors),Nr=new Uint8Array(Rr*(32/yr.pixelBitlength)),Ir=yr.colors>1,jr=0,Lr=0;for(var Sr=0;jr<Rr;)Or=Tr[jr++],Dr[Lr++]=Or>>>0&255,Ir&&(Dr[Lr++]=Or>>>16&255,Or=Tr[jr++],Dr[Lr++]=Or>>>0&255),Nr[Sr++]=Or>>>16&255;mr=8}br!==tr.image_compression.NONE&&er()?(dr=rr(Dr,yr.width*yr.colors,yr.colors,br),Er=rr(Nr,yr.width,1,br)):(dr=Dr,Er=Nr,Cr=void 0)}if(yr.colorType===3&&(pr=this.color_spaces.INDEXED,_r=yr.palette,yr.transparency.indexed)){var Mr=yr.transparency.indexed,qr=0;for(jr=0,Rr=Mr.length;jr<Rr;++jr)qr+=Mr[jr];if((qr/=255)===Rr-1&&Mr.indexOf(0)!==-1)xr=[Mr.indexOf(0)];else if(qr!==Rr){for(Tr=yr.decodePixels(),Nr=new Uint8Array(Tr.length),jr=0,Rr=Tr.length;jr<Rr;jr++)Nr[jr]=Mr[Tr[jr]];Er=rr(Nr,yr.width,1)}}var $r=function(Br){var zr;switch(Br){case tr.image_compression.FAST:zr=11;break;case tr.image_compression.MEDIUM:zr=13;break;case tr.image_compression.SLOW:zr=14;break;default:zr=12}return zr}(br);return Cr===this.decode.FLATE_DECODE&&(wr="/Predictor "+$r+" "),wr+="/Colors "+vr+" /BitsPerComponent "+mr+" /Columns "+yr.width,(this.__addimage__.isArrayBuffer(dr)||this.__addimage__.isArrayBufferView(dr))&&(dr=this.__addimage__.arrayBufferToBinaryString(dr)),(Er&&this.__addimage__.isArrayBuffer(Er)||this.__addimage__.isArrayBufferView(Er))&&(Er=this.__addimage__.arrayBufferToBinaryString(Er)),{alias:gr,data:dr,index:fr,filter:Cr,decodeParameters:wr,transparency:xr,palette:_r,sMask:Er,predictor:$r,width:yr.width,height:yr.height,bitsPerComponent:mr,colorSpace:pr}}}})(E.API),function(tr){tr.processGIF89A=function(er,rr,nr,ir){var sr=new Zt(er),ar=sr.width,cr=sr.height,lr=[];sr.decodeAndBlitFrameRGBA(0,lr);var or={data:lr,width:ar,height:cr},ur=new Qt(100).encode(or,100);return tr.processJPEG.call(this,ur,rr,nr,ir)},tr.processGIF87A=tr.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var tr=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(tr);for(var er=0;er<tr;er++){var rr=this.datav.getUint8(this.pos++,!0),nr=this.datav.getUint8(this.pos++,!0),ir=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0);this.palette[er]={red:ir,green:nr,blue:rr,quad:sr}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var tr="bit"+this.bitPP,er=this.width*this.height*4;this.data=new Uint8Array(er),this[tr]()}catch(rr){a.log("bit decode error:"+rr)}},te.prototype.bit1=function(){var tr,er=Math.ceil(this.width/8),rr=er%4;for(tr=this.height-1;tr>=0;tr--){for(var nr=this.bottom_up?tr:this.height-1-tr,ir=0;ir<er;ir++)for(var sr=this.datav.getUint8(this.pos++,!0),ar=nr*this.width*4+8*ir*4,cr=0;cr<8&&8*ir+cr<this.width;cr++){var lr=this.palette[sr>>7-cr&1];this.data[ar+4*cr]=lr.blue,this.data[ar+4*cr+1]=lr.green,this.data[ar+4*cr+2]=lr.red,this.data[ar+4*cr+3]=255}rr!==0&&(this.pos+=4-rr)}},te.prototype.bit4=function(){for(var tr=Math.ceil(this.width/2),er=tr%4,rr=this.height-1;rr>=0;rr--){for(var nr=this.bottom_up?rr:this.height-1-rr,ir=0;ir<tr;ir++){var sr=this.datav.getUint8(this.pos++,!0),ar=nr*this.width*4+2*ir*4,cr=sr>>4,lr=15&sr,or=this.palette[cr];if(this.data[ar]=or.blue,this.data[ar+1]=or.green,this.data[ar+2]=or.red,this.data[ar+3]=255,2*ir+1>=this.width)break;or=this.palette[lr],this.data[ar+4]=or.blue,this.data[ar+4+1]=or.green,this.data[ar+4+2]=or.red,this.data[ar+4+3]=255}er!==0&&(this.pos+=4-er)}},te.prototype.bit8=function(){for(var tr=this.width%4,er=this.height-1;er>=0;er--){for(var rr=this.bottom_up?er:this.height-1-er,nr=0;nr<this.width;nr++){var ir=this.datav.getUint8(this.pos++,!0),sr=rr*this.width*4+4*nr;if(ir<this.palette.length){var ar=this.palette[ir];this.data[sr]=ar.red,this.data[sr+1]=ar.green,this.data[sr+2]=ar.blue,this.data[sr+3]=255}else this.data[sr]=255,this.data[sr+1]=255,this.data[sr+2]=255,this.data[sr+3]=255}tr!==0&&(this.pos+=4-tr)}},te.prototype.bit15=function(){for(var tr=this.width%3,er=parseInt("11111",2),rr=this.height-1;rr>=0;rr--){for(var nr=this.bottom_up?rr:this.height-1-rr,ir=0;ir<this.width;ir++){var sr=this.datav.getUint16(this.pos,!0);this.pos+=2;var ar=(sr&er)/er*255|0,cr=(sr>>5&er)/er*255|0,lr=(sr>>10&er)/er*255|0,or=sr>>15?255:0,ur=nr*this.width*4+4*ir;this.data[ur]=lr,this.data[ur+1]=cr,this.data[ur+2]=ar,this.data[ur+3]=or}this.pos+=tr}},te.prototype.bit16=function(){for(var tr=this.width%3,er=parseInt("11111",2),rr=parseInt("111111",2),nr=this.height-1;nr>=0;nr--){for(var ir=this.bottom_up?nr:this.height-1-nr,sr=0;sr<this.width;sr++){var ar=this.datav.getUint16(this.pos,!0);this.pos+=2;var cr=(ar&er)/er*255|0,lr=(ar>>5&rr)/rr*255|0,or=(ar>>11)/er*255|0,ur=ir*this.width*4+4*sr;this.data[ur]=or,this.data[ur+1]=lr,this.data[ur+2]=cr,this.data[ur+3]=255}this.pos+=tr}},te.prototype.bit24=function(){for(var tr=this.height-1;tr>=0;tr--){for(var er=this.bottom_up?tr:this.height-1-tr,rr=0;rr<this.width;rr++){var nr=this.datav.getUint8(this.pos++,!0),ir=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0),ar=er*this.width*4+4*rr;this.data[ar]=sr,this.data[ar+1]=ir,this.data[ar+2]=nr,this.data[ar+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var tr=this.height-1;tr>=0;tr--)for(var er=this.bottom_up?tr:this.height-1-tr,rr=0;rr<this.width;rr++){var nr=this.datav.getUint8(this.pos++,!0),ir=this.datav.getUint8(this.pos++,!0),sr=this.datav.getUint8(this.pos++,!0),ar=this.datav.getUint8(this.pos++,!0),cr=er*this.width*4+4*rr;this.data[cr]=sr,this.data[cr+1]=ir,this.data[cr+2]=nr,this.data[cr+3]=ar}},te.prototype.getData=function(){return this.data},function(tr){tr.processBMP=function(er,rr,nr,ir){var sr=new te(er,!1),ar=sr.width,cr=sr.height,lr={data:sr.getData(),width:ar,height:cr},or=new Qt(100).encode(lr,100);return tr.processJPEG.call(this,or,rr,nr,ir)}}(E.API),ee.prototype.getData=function(){return this.data},function(tr){tr.processWEBP=function(er,rr,nr,ir){var sr=new ee(er),ar=sr.width,cr=sr.height,lr={data:sr.getData(),width:ar,height:cr},or=new Qt(100).encode(lr,100);return tr.processJPEG.call(this,or,rr,nr,ir)}}(E.API),E.API.processRGBA=function(tr,er,rr){for(var nr=tr.data,ir=nr.length,sr=new Uint8Array(ir/4*3),ar=new Uint8Array(ir/4),cr=0,lr=0,or=0;or<ir;or+=4){var ur=nr[or],hr=nr[or+1],dr=nr[or+2],fr=nr[or+3];sr[cr++]=ur,sr[cr++]=hr,sr[cr++]=dr,ar[lr++]=fr}var gr=this.__addimage__.arrayBufferToBinaryString(sr);return{alpha:this.__addimage__.arrayBufferToBinaryString(ar),data:gr,index:er,alias:rr,colorSpace:"DeviceRGB",bitsPerComponent:8,width:tr.width,height:tr.height}},E.API.setLanguage=function(tr){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[tr]!==void 0&&(this.internal.languageSettings.languageCode=tr,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(tr,er){var rr,nr,ir=(er=er||{}).font||this.internal.getFont(),sr=er.fontSize||this.internal.getFontSize(),ar=er.charSpace||this.internal.getCharSpace(),cr=er.widths?er.widths:ir.metadata.Unicode.widths,lr=cr.fof?cr.fof:1,or=er.kerning?er.kerning:ir.metadata.Unicode.kerning,ur=or.fof?or.fof:1,hr=er.doKerning!==!1,dr=0,fr=tr.length,gr=0,br=cr[0]||lr,pr=[];for(rr=0;rr<fr;rr++)nr=tr.charCodeAt(rr),typeof ir.metadata.widthOfString=="function"?pr.push((ir.metadata.widthOfGlyph(ir.metadata.characterToGlyph(nr))+ar*(1e3/sr)||0)/1e3):(dr=hr&&_typeof(or[nr])==="object"&&!isNaN(parseInt(or[nr][gr],10))?or[nr][gr]/ur:0,pr.push((cr[nr]||br)/lr+dr)),gr=nr;return pr},Yt=Vt.getStringUnitWidth=function(tr,er){var rr=(er=er||{}).fontSize||this.internal.getFontSize(),nr=er.font||this.internal.getFont(),ir=er.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(tr=Vt.processArabic(tr)),typeof nr.metadata.widthOfString=="function"?nr.metadata.widthOfString(tr,rr,ir)/rr:Gt.apply(this,arguments).reduce(function(sr,ar){return sr+ar},0)},Jt=function(tr,er,rr,nr){for(var ir=[],sr=0,ar=tr.length,cr=0;sr!==ar&&cr+er[sr]<rr;)cr+=er[sr],sr++;ir.push(tr.slice(0,sr));var lr=sr;for(cr=0;sr!==ar;)cr+er[sr]>nr&&(ir.push(tr.slice(lr,sr)),cr=0,lr=sr),cr+=er[sr],sr++;return lr!==sr&&ir.push(tr.slice(lr,sr)),ir},Xt=function(tr,er,rr){rr||(rr={});var nr,ir,sr,ar,cr,lr,or,ur=[],hr=[ur],dr=rr.textIndent||0,fr=0,gr=0,br=tr.split(" "),pr=Gt.apply(this,[" ",rr])[0];if(lr=rr.lineIndent===-1?br[0].length+2:rr.lineIndent||0){var mr=Array(lr).join(" "),yr=[];br.map(function(vr){(vr=vr.split(/\s*\n/)).length>1?yr=yr.concat(vr.map(function(_r,Er){return(Er&&_r.length?`
`:"")+_r})):yr.push(vr[0])}),br=yr,lr=Yt.apply(this,[mr,rr])}for(sr=0,ar=br.length;sr<ar;sr++){var xr=0;if(nr=br[sr],lr&&nr[0]==`
`&&(nr=nr.substr(1),xr=1),dr+fr+(gr=(ir=Gt.apply(this,[nr,rr])).reduce(function(vr,_r){return vr+_r},0))>er||xr){if(gr>er){for(cr=Jt.apply(this,[nr,ir,er-(dr+fr),er]),ur.push(cr.shift()),ur=[cr.pop()];cr.length;)hr.push([cr.shift()]);gr=ir.slice(nr.length-(ur[0]?ur[0].length:0)).reduce(function(vr,_r){return vr+_r},0)}else ur=[nr];hr.push(ur),dr=gr+lr,fr=pr}else ur.push(nr),dr+=fr+gr,fr=pr}return or=lr?function(vr,_r){return(_r?mr:"")+vr.join(" ")}:function(vr){return vr.join(" ")},hr.map(or)},Vt.splitTextToSize=function(tr,er,rr){var nr,ir=(rr=rr||{}).fontSize||this.internal.getFontSize(),sr=(function(ur){if(ur.widths&&ur.kerning)return{widths:ur.widths,kerning:ur.kerning};var hr=this.internal.getFont(ur.fontName,ur.fontStyle);return hr.metadata.Unicode?{widths:hr.metadata.Unicode.widths||{0:1},kerning:hr.metadata.Unicode.kerning||{}}:{font:hr.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,rr);nr=Array.isArray(tr)?tr:String(tr).split(/\r?\n/);var ar=1*this.internal.scaleFactor*er/ir;sr.textIndent=rr.textIndent?1*rr.textIndent*this.internal.scaleFactor/ir:0,sr.lineIndent=rr.lineIndent;var cr,lr,or=[];for(cr=0,lr=nr.length;cr<lr;cr++)or=or.concat(Xt.apply(this,[nr[cr],ar,sr]));return or},function(tr){tr.__fontmetrics__=tr.__fontmetrics__||{};for(var er="klmnopqrstuvwxyz",rr={},nr={},ir=0;ir<er.length;ir++)rr[er[ir]]="0123456789abcdef"[ir],nr["0123456789abcdef"[ir]]=er[ir];var sr=function(hr){return"0x"+parseInt(hr,10).toString(16)},ar=tr.__fontmetrics__.compress=function(hr){var dr,fr,gr,br,pr=["{"];for(var mr in hr){if(dr=hr[mr],isNaN(parseInt(mr,10))?fr="'"+mr+"'":(mr=parseInt(mr,10),fr=(fr=sr(mr).slice(2)).slice(0,-1)+nr[fr.slice(-1)]),typeof dr=="number")dr<0?(gr=sr(dr).slice(3),br="-"):(gr=sr(dr).slice(2),br=""),gr=br+gr.slice(0,-1)+nr[gr.slice(-1)];else{if(_typeof(dr)!=="object")throw new Error("Don't know what to do with value type "+_typeof(dr)+".");gr=ar(dr)}pr.push(fr+gr)}return pr.push("}"),pr.join("")},cr=tr.__fontmetrics__.uncompress=function(hr){if(typeof hr!="string")throw new Error("Invalid argument passed to uncompress.");for(var dr,fr,gr,br,pr={},mr=1,yr=pr,xr=[],vr="",_r="",Er=hr.length-1,Tr=1;Tr<Er;Tr+=1)(br=hr[Tr])=="'"?dr?(gr=dr.join(""),dr=void 0):dr=[]:dr?dr.push(br):br=="{"?(xr.push([yr,gr]),yr={},gr=void 0):br=="}"?((fr=xr.pop())[0][fr[1]]=yr,gr=void 0,yr=fr[0]):br=="-"?mr=-1:gr===void 0?rr.hasOwnProperty(br)?(vr+=rr[br],gr=parseInt(vr,16)*mr,mr=1,vr=""):vr+=br:rr.hasOwnProperty(br)?(_r+=rr[br],yr[gr]=parseInt(_r,16)*mr,mr=1,gr=void 0,_r=""):_r+=br;return pr},lr={codePages:["WinAnsiEncoding"],WinAnsiEncoding:cr("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},or={Unicode:{Courier:lr,"Courier-Bold":lr,"Courier-BoldOblique":lr,"Courier-Oblique":lr,Helvetica:lr,"Helvetica-Bold":lr,"Helvetica-BoldOblique":lr,"Helvetica-Oblique":lr,"Times-Roman":lr,"Times-Bold":lr,"Times-BoldItalic":lr,"Times-Italic":lr}},ur={Unicode:{"Courier-Oblique":cr("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":cr("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":cr("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:cr("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":cr("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":cr("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:cr("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:cr("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":cr("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:cr("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":cr("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":cr("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":cr("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":cr("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};tr.events.push(["addFont",function(hr){var dr=hr.font,fr=ur.Unicode[dr.postScriptName];fr&&(dr.metadata.Unicode={},dr.metadata.Unicode.widths=fr.widths,dr.metadata.Unicode.kerning=fr.kerning);var gr=or.Unicode[dr.postScriptName];gr&&(dr.metadata.Unicode.encoding=gr,dr.encoding=gr.codePages[0])}])}(E.API),function(tr){var er=function(rr){for(var nr=rr.length,ir=new Uint8Array(nr),sr=0;sr<nr;sr++)ir[sr]=rr.charCodeAt(sr);return ir};tr.API.events.push(["addFont",function(rr){var nr=void 0,ir=rr.font,sr=rr.instance;if(!ir.isStandardFont){if(sr===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+ir.postScriptName+"').");if(typeof(nr=sr.existsFileInVFS(ir.postScriptName)===!1?sr.loadFile(ir.postScriptName):sr.getFileFromVFS(ir.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+ir.postScriptName+"').");(function(ar,cr){cr=/^\x00\x01\x00\x00/.test(cr)?er(cr):er(u(cr)),ar.metadata=tr.API.TTFFont.open(cr),ar.metadata.Unicode=ar.metadata.Unicode||{encoding:{},kerning:{},widths:[]},ar.metadata.glyIdsUsed=[0]})(ir,nr)}}])}(E),function(tr){function er(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-DDfLDAhq.js"),[])).catch(function(rr){return Promise.reject(new Error("Could not load canvg: "+rr))}).then(function(rr){return rr.default?rr.default:rr})}E.API.addSvgAsImage=function(rr,nr,ir,sr,ar,cr,lr,or){if(isNaN(nr)||isNaN(ir))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(sr)||isNaN(ar))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var ur=document.createElement("canvas");ur.width=sr,ur.height=ar;var hr=ur.getContext("2d");hr.fillStyle="#fff",hr.fillRect(0,0,ur.width,ur.height);var dr={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},fr=this;return er().then(function(gr){return gr.fromString(hr,rr,dr)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(gr){return gr.render(dr)}).then(function(){fr.addImage(ur.toDataURL("image/jpeg",1),nr,ir,sr,ar,lr,or)})}}(),E.API.putTotalPages=function(tr){var er,rr=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(er=new RegExp(tr,"g"),rr=this.internal.getNumberOfPages()):(er=new RegExp(this.pdfEscape16(tr,this.internal.getFont()),"g"),rr=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var nr=1;nr<=this.internal.getNumberOfPages();nr++)for(var ir=0;ir<this.internal.pages[nr].length;ir++)this.internal.pages[nr][ir]=this.internal.pages[nr][ir].replace(er,rr);return this},E.API.viewerPreferences=function(tr,er){var rr;tr=tr||{},er=er||!1;var nr,ir,sr,ar={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},cr=Object.keys(ar),lr=[],or=0,ur=0,hr=0;function dr(gr,br){var pr,mr=!1;for(pr=0;pr<gr.length;pr+=1)gr[pr]===br&&(mr=!0);return mr}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(ar)),this.internal.viewerpreferences.isSubscribed=!1),rr=this.internal.viewerpreferences.configuration,tr==="reset"||er===!0){var fr=cr.length;for(hr=0;hr<fr;hr+=1)rr[cr[hr]].value=rr[cr[hr]].defaultValue,rr[cr[hr]].explicitSet=!1}if(_typeof(tr)==="object"){for(ir in tr)if(sr=tr[ir],dr(cr,ir)&&sr!==void 0){if(rr[ir].type==="boolean"&&typeof sr=="boolean")rr[ir].value=sr;else if(rr[ir].type==="name"&&dr(rr[ir].valueSet,sr))rr[ir].value=sr;else if(rr[ir].type==="integer"&&Number.isInteger(sr))rr[ir].value=sr;else if(rr[ir].type==="array"){for(or=0;or<sr.length;or+=1)if(nr=!0,sr[or].length===1&&typeof sr[or][0]=="number")lr.push(String(sr[or]-1));else if(sr[or].length>1){for(ur=0;ur<sr[or].length;ur+=1)typeof sr[or][ur]!="number"&&(nr=!1);nr===!0&&lr.push([sr[or][0]-1,sr[or][1]-1].join(" "))}rr[ir].value="["+lr.join(" ")+"]"}else rr[ir].value=rr[ir].defaultValue;rr[ir].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var gr,br=[];for(gr in rr)rr[gr].explicitSet===!0&&(rr[gr].type==="name"?br.push("/"+gr+" /"+rr[gr].value):br.push("/"+gr+" "+rr[gr].value));br.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+br.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=rr,this},function(tr){var er=function(){var nr='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',ir=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),sr=unescape(encodeURIComponent(nr)),ar=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),cr=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),lr=unescape(encodeURIComponent("</x:xmpmeta>")),or=sr.length+ar.length+cr.length+ir.length+lr.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+or+" >>"),this.internal.write("stream"),this.internal.write(ir+sr+ar+cr+lr),this.internal.write("endstream"),this.internal.write("endobj")},rr=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};tr.addMetadata=function(nr,ir){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:nr,namespaceuri:ir||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",rr),this.internal.events.subscribe("postPutResources",er)),this}}(E.API),function(tr){var er=tr.API,rr=er.pdfEscape16=function(sr,ar){for(var cr,lr=ar.metadata.Unicode.widths,or=["","0","00","000","0000"],ur=[""],hr=0,dr=sr.length;hr<dr;++hr){if(cr=ar.metadata.characterToGlyph(sr.charCodeAt(hr)),ar.metadata.glyIdsUsed.push(cr),ar.metadata.toUnicode[cr]=sr.charCodeAt(hr),lr.indexOf(cr)==-1&&(lr.push(cr),lr.push([parseInt(ar.metadata.widthOfGlyph(cr),10)])),cr=="0")return ur.join("");cr=cr.toString(16),ur.push(or[4-cr.length],cr)}return ur.join("")},nr=function(sr){var ar,cr,lr,or,ur,hr,dr;for(ur=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,lr=[],hr=0,dr=(cr=Object.keys(sr).sort(function(fr,gr){return fr-gr})).length;hr<dr;hr++)ar=cr[hr],lr.length>=100&&(ur+=`
`+lr.length+` beginbfchar
`+lr.join(`
`)+`
endbfchar`,lr=[]),sr[ar]!==void 0&&sr[ar]!==null&&typeof sr[ar].toString=="function"&&(or=("0000"+sr[ar].toString(16)).slice(-4),ar=("0000"+(+ar).toString(16)).slice(-4),lr.push("<"+ar+"><"+or+">"));return lr.length&&(ur+=`
`+lr.length+` beginbfchar
`+lr.join(`
`)+`
endbfchar
`),ur+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};er.events.push(["putFont",function(sr){(function(ar){var cr=ar.font,lr=ar.out,or=ar.newObject,ur=ar.putStream;if(cr.metadata instanceof tr.API.TTFFont&&cr.encoding==="Identity-H"){for(var hr=cr.metadata.Unicode.widths,dr=cr.metadata.subset.encode(cr.metadata.glyIdsUsed,1),fr="",gr=0;gr<dr.length;gr++)fr+=String.fromCharCode(dr[gr]);var br=or();ur({data:fr,addLength1:!0,objectId:br}),lr("endobj");var pr=or();ur({data:nr(cr.metadata.toUnicode),addLength1:!0,objectId:pr}),lr("endobj");var mr=or();lr("<<"),lr("/Type /FontDescriptor"),lr("/FontName /"+F(cr.fontName)),lr("/FontFile2 "+br+" 0 R"),lr("/FontBBox "+tr.API.PDFObject.convert(cr.metadata.bbox)),lr("/Flags "+cr.metadata.flags),lr("/StemV "+cr.metadata.stemV),lr("/ItalicAngle "+cr.metadata.italicAngle),lr("/Ascent "+cr.metadata.ascender),lr("/Descent "+cr.metadata.decender),lr("/CapHeight "+cr.metadata.capHeight),lr(">>"),lr("endobj");var yr=or();lr("<<"),lr("/Type /Font"),lr("/BaseFont /"+F(cr.fontName)),lr("/FontDescriptor "+mr+" 0 R"),lr("/W "+tr.API.PDFObject.convert(hr)),lr("/CIDToGIDMap /Identity"),lr("/DW 1000"),lr("/Subtype /CIDFontType2"),lr("/CIDSystemInfo"),lr("<<"),lr("/Supplement 0"),lr("/Registry (Adobe)"),lr("/Ordering ("+cr.encoding+")"),lr(">>"),lr(">>"),lr("endobj"),cr.objectNumber=or(),lr("<<"),lr("/Type /Font"),lr("/Subtype /Type0"),lr("/ToUnicode "+pr+" 0 R"),lr("/BaseFont /"+F(cr.fontName)),lr("/Encoding /"+cr.encoding),lr("/DescendantFonts ["+yr+" 0 R]"),lr(">>"),lr("endobj"),cr.isAlreadyPutted=!0}})(sr)}]),er.events.push(["putFont",function(sr){(function(ar){var cr=ar.font,lr=ar.out,or=ar.newObject,ur=ar.putStream;if(cr.metadata instanceof tr.API.TTFFont&&cr.encoding==="WinAnsiEncoding"){for(var hr=cr.metadata.rawData,dr="",fr=0;fr<hr.length;fr++)dr+=String.fromCharCode(hr[fr]);var gr=or();ur({data:dr,addLength1:!0,objectId:gr}),lr("endobj");var br=or();ur({data:nr(cr.metadata.toUnicode),addLength1:!0,objectId:br}),lr("endobj");var pr=or();lr("<<"),lr("/Descent "+cr.metadata.decender),lr("/CapHeight "+cr.metadata.capHeight),lr("/StemV "+cr.metadata.stemV),lr("/Type /FontDescriptor"),lr("/FontFile2 "+gr+" 0 R"),lr("/Flags 96"),lr("/FontBBox "+tr.API.PDFObject.convert(cr.metadata.bbox)),lr("/FontName /"+F(cr.fontName)),lr("/ItalicAngle "+cr.metadata.italicAngle),lr("/Ascent "+cr.metadata.ascender),lr(">>"),lr("endobj"),cr.objectNumber=or();for(var mr=0;mr<cr.metadata.hmtx.widths.length;mr++)cr.metadata.hmtx.widths[mr]=parseInt(cr.metadata.hmtx.widths[mr]*(1e3/cr.metadata.head.unitsPerEm));lr("<</Subtype/TrueType/Type/Font/ToUnicode "+br+" 0 R/BaseFont/"+F(cr.fontName)+"/FontDescriptor "+pr+" 0 R/Encoding/"+cr.encoding+" /FirstChar 29 /LastChar 255 /Widths "+tr.API.PDFObject.convert(cr.metadata.hmtx.widths)+">>"),lr("endobj"),cr.isAlreadyPutted=!0}})(sr)}]);var ir=function(sr){var ar,cr=sr.text||"",lr=sr.x,or=sr.y,ur=sr.options||{},hr=sr.mutex||{},dr=hr.pdfEscape,fr=hr.activeFontKey,gr=hr.fonts,br=fr,pr="",mr=0,yr="",xr=gr[br].encoding;if(gr[br].encoding!=="Identity-H")return{text:cr,x:lr,y:or,options:ur,mutex:hr};for(yr=cr,br=fr,Array.isArray(cr)&&(yr=cr[0]),mr=0;mr<yr.length;mr+=1)gr[br].metadata.hasOwnProperty("cmap")&&(ar=gr[br].metadata.cmap.unicode.codeMap[yr[mr].charCodeAt(0)]),ar||yr[mr].charCodeAt(0)<256&&gr[br].metadata.hasOwnProperty("Unicode")?pr+=yr[mr]:pr+="";var vr="";return parseInt(br.slice(1))<14||xr==="WinAnsiEncoding"?vr=dr(pr,br).split("").map(function(_r){return _r.charCodeAt(0).toString(16)}).join(""):xr==="Identity-H"&&(vr=rr(pr,gr[br])),hr.isHex=!0,{text:vr,x:lr,y:or,options:ur,mutex:hr}};er.events.push(["postProcessText",function(sr){var ar=sr.text||"",cr=[],lr={text:ar,x:sr.x,y:sr.y,options:sr.options,mutex:sr.mutex};if(Array.isArray(ar)){var or=0;for(or=0;or<ar.length;or+=1)Array.isArray(ar[or])&&ar[or].length===3?cr.push([ir(Object.assign({},lr,{text:ar[or][0]})).text,ar[or][1],ar[or][2]]):cr.push(ir(Object.assign({},lr,{text:ar[or]})).text);sr.text=cr}else sr.text=ir(Object.assign({},lr,{text:ar})).text}])}(E),function(tr){var er=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};tr.existsFileInVFS=function(rr){return er.call(this),this.internal.vFS[rr]!==void 0},tr.addFileToVFS=function(rr,nr){return er.call(this),this.internal.vFS[rr]=nr,this},tr.getFileFromVFS=function(rr){return er.call(this),this.internal.vFS[rr]!==void 0?this.internal.vFS[rr]:null}}(E.API),function(tr){tr.__bidiEngine__=tr.prototype.__bidiEngine__=function(nr){var ir,sr,ar,cr,lr,or,ur,hr=er,dr=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fr=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],gr={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},br={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},pr=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],mr=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),yr=!1,xr=0;this.__bidiEngine__={};var vr=function(Ir){var Or=Ir.charCodeAt(),jr=Or>>8,Lr=br[jr];return Lr!==void 0?hr[256*Lr+(255&Or)]:jr===252||jr===253?"AL":mr.test(jr)?"L":jr===8?"R":"N"},_r=function(Ir){for(var Or,jr=0;jr<Ir.length;jr++){if((Or=vr(Ir.charAt(jr)))==="L")return!1;if(Or==="R")return!0}return!1},Er=function(Ir,Or,jr,Lr){var Cr,wr,Pr,Ar,Sr=Or[Lr];switch(Sr){case"L":case"R":yr=!1;break;case"N":case"AN":break;case"EN":yr&&(Sr="AN");break;case"AL":yr=!0,Sr="R";break;case"WS":Sr="N";break;case"CS":Lr<1||Lr+1>=Or.length||(Cr=jr[Lr-1])!=="EN"&&Cr!=="AN"||(wr=Or[Lr+1])!=="EN"&&wr!=="AN"?Sr="N":yr&&(wr="AN"),Sr=wr===Cr?wr:"N";break;case"ES":Sr=(Cr=Lr>0?jr[Lr-1]:"B")==="EN"&&Lr+1<Or.length&&Or[Lr+1]==="EN"?"EN":"N";break;case"ET":if(Lr>0&&jr[Lr-1]==="EN"){Sr="EN";break}if(yr){Sr="N";break}for(Pr=Lr+1,Ar=Or.length;Pr<Ar&&Or[Pr]==="ET";)Pr++;Sr=Pr<Ar&&Or[Pr]==="EN"?"EN":"N";break;case"NSM":if(ar&&!cr){for(Ar=Or.length,Pr=Lr+1;Pr<Ar&&Or[Pr]==="NSM";)Pr++;if(Pr<Ar){var Mr=Ir[Lr],qr=Mr>=1425&&Mr<=2303||Mr===64286;if(Cr=Or[Pr],qr&&(Cr==="R"||Cr==="AL")){Sr="R";break}}}Sr=Lr<1||(Cr=Or[Lr-1])==="B"?"N":jr[Lr-1];break;case"B":yr=!1,ir=!0,Sr=xr;break;case"S":sr=!0,Sr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":yr=!1;break;case"BN":Sr="N"}return Sr},Tr=function(Ir,Or,jr){var Lr=Ir.split("");return jr&&Rr(Lr,jr,{hiLevel:xr}),Lr.reverse(),Or&&Or.reverse(),Lr.join("")},Rr=function(Ir,Or,jr){var Lr,Cr,wr,Pr,Ar,Sr=-1,Mr=Ir.length,qr=0,$r=[],Br=xr?fr:dr,zr=[];for(yr=!1,ir=!1,sr=!1,Cr=0;Cr<Mr;Cr++)zr[Cr]=vr(Ir[Cr]);for(wr=0;wr<Mr;wr++){if(Ar=qr,$r[wr]=Er(Ir,zr,$r,wr),Lr=240&(qr=Br[Ar][gr[$r[wr]]]),qr&=15,Or[wr]=Pr=Br[qr][5],Lr>0)if(Lr===16){for(Cr=Sr;Cr<wr;Cr++)Or[Cr]=1;Sr=-1}else Sr=-1;if(Br[qr][6])Sr===-1&&(Sr=wr);else if(Sr>-1){for(Cr=Sr;Cr<wr;Cr++)Or[Cr]=Pr;Sr=-1}zr[wr]==="B"&&(Or[wr]=0),jr.hiLevel|=Pr}sr&&function(Gr,Vr,Xr){for(var Ur=0;Ur<Xr;Ur++)if(Gr[Ur]==="S"){Vr[Ur]=xr;for(var Fr=Ur-1;Fr>=0&&Gr[Fr]==="WS";Fr--)Vr[Fr]=xr}}(zr,Or,Mr)},Nr=function(Ir,Or,jr,Lr,Cr){if(!(Cr.hiLevel<Ir)){if(Ir===1&&xr===1&&!ir)return Or.reverse(),void(jr&&jr.reverse());for(var wr,Pr,Ar,Sr,Mr=Or.length,qr=0;qr<Mr;){if(Lr[qr]>=Ir){for(Ar=qr+1;Ar<Mr&&Lr[Ar]>=Ir;)Ar++;for(Sr=qr,Pr=Ar-1;Sr<Pr;Sr++,Pr--)wr=Or[Sr],Or[Sr]=Or[Pr],Or[Pr]=wr,jr&&(wr=jr[Sr],jr[Sr]=jr[Pr],jr[Pr]=wr);qr=Ar}qr++}}},Dr=function(Ir,Or,jr){var Lr=Ir.split(""),Cr={hiLevel:xr};return jr||(jr=[]),Rr(Lr,jr,Cr),function(wr,Pr,Ar){if(Ar.hiLevel!==0&&ur)for(var Sr,Mr=0;Mr<wr.length;Mr++)Pr[Mr]===1&&(Sr=pr.indexOf(wr[Mr]))>=0&&(wr[Mr]=pr[Sr+1])}(Lr,jr,Cr),Nr(2,Lr,Or,jr,Cr),Nr(1,Lr,Or,jr,Cr),Lr.join("")};return this.__bidiEngine__.doBidiReorder=function(Ir,Or,jr){if(function(Cr,wr){if(wr)for(var Pr=0;Pr<Cr.length;Pr++)wr[Pr]=Pr;cr===void 0&&(cr=_r(Cr)),or===void 0&&(or=_r(Cr))}(Ir,Or),ar||!lr||or)if(ar&&lr&&cr^or)xr=cr?1:0,Ir=Tr(Ir,Or,jr);else if(!ar&&lr&&or)xr=cr?1:0,Ir=Dr(Ir,Or,jr),Ir=Tr(Ir,Or);else if(!ar||cr||lr||or){if(ar&&!lr&&cr^or)Ir=Tr(Ir,Or),cr?(xr=0,Ir=Dr(Ir,Or,jr)):(xr=1,Ir=Dr(Ir,Or,jr),Ir=Tr(Ir,Or));else if(ar&&cr&&!lr&&or)xr=1,Ir=Dr(Ir,Or,jr),Ir=Tr(Ir,Or);else if(!ar&&!lr&&cr^or){var Lr=ur;cr?(xr=1,Ir=Dr(Ir,Or,jr),xr=0,ur=!1,Ir=Dr(Ir,Or,jr),ur=Lr):(xr=0,Ir=Dr(Ir,Or,jr),Ir=Tr(Ir,Or),xr=1,ur=!1,Ir=Dr(Ir,Or,jr),ur=Lr,Ir=Tr(Ir,Or))}}else xr=0,Ir=Dr(Ir,Or,jr);else xr=cr?1:0,Ir=Dr(Ir,Or,jr);return Ir},this.__bidiEngine__.setOptions=function(Ir){Ir&&(ar=Ir.isInputVisual,lr=Ir.isOutputVisual,cr=Ir.isInputRtl,or=Ir.isOutputRtl,ur=Ir.isSymmetricSwapping)},this.__bidiEngine__.setOptions(nr),this.__bidiEngine__};var er=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],rr=new tr.__bidiEngine__({isInputVisual:!0});tr.API.events.push(["postProcessText",function(nr){var ir=nr.text,sr=(nr.x,nr.y,nr.options||{}),ar=(nr.mutex,sr.lang,[]);if(sr.isInputVisual=typeof sr.isInputVisual!="boolean"||sr.isInputVisual,rr.setOptions(sr),Object.prototype.toString.call(ir)==="[object Array]"){var cr=0;for(ar=[],cr=0;cr<ir.length;cr+=1)Object.prototype.toString.call(ir[cr])==="[object Array]"?ar.push([rr.doBidiReorder(ir[cr][0]),ir[cr][1],ir[cr][2]]):ar.push([rr.doBidiReorder(ir[cr])]);nr.text=ar}else nr.text=rr.doBidiReorder(ir);rr.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function tr(er){var rr;if(this.rawData=er,rr=this.contents=new ne(er),this.contents.pos=4,rr.readString(4)==="ttcf")throw new Error("TTCF not supported.");rr.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return tr.open=function(er){return new tr(er)},tr.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},tr.prototype.registerTTF=function(){var er,rr,nr,ir,sr;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var ar,cr,lr,or;for(or=[],ar=0,cr=(lr=this.bbox).length;ar<cr;ar++)er=lr[ar],or.push(Math.round(er*this.scaleFactor));return or}).call(this),this.stemV=0,this.post.exists?(nr=255&(ir=this.post.italic_angle),32768&(rr=ir>>16)&&(rr=-(1+(65535^rr))),this.italicAngle=+(rr+"."+nr)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(sr=this.familyClass)===1||sr===2||sr===3||sr===4||sr===5||sr===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},tr.prototype.characterToGlyph=function(er){var rr;return((rr=this.cmap.unicode)!=null?rr.codeMap[er]:void 0)||0},tr.prototype.widthOfGlyph=function(er){var rr;return rr=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(er).advance*rr},tr.prototype.widthOfString=function(er,rr,nr){var ir,sr,ar,cr;for(ar=0,sr=0,cr=(er=""+er).length;0<=cr?sr<cr:sr>cr;sr=0<=cr?++sr:--sr)ir=er.charCodeAt(sr),ar+=this.widthOfGlyph(this.characterToGlyph(ir))+nr*(1e3/rr)||0;return ar*(rr/1e3)},tr.prototype.lineHeight=function(er,rr){var nr;return rr==null&&(rr=!1),nr=rr?this.lineGap:0,(this.ascender+nr-this.decender)/1e3*er},tr}();var re,ne=function(){function tr(er){this.data=er??[],this.pos=0,this.length=this.data.length}return tr.prototype.readByte=function(){return this.data[this.pos++]},tr.prototype.writeByte=function(er){return this.data[this.pos++]=er},tr.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},tr.prototype.writeUInt32=function(er){return this.writeByte(er>>>24&255),this.writeByte(er>>16&255),this.writeByte(er>>8&255),this.writeByte(255&er)},tr.prototype.readInt32=function(){var er;return(er=this.readUInt32())>=2147483648?er-4294967296:er},tr.prototype.writeInt32=function(er){return er<0&&(er+=4294967296),this.writeUInt32(er)},tr.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},tr.prototype.writeUInt16=function(er){return this.writeByte(er>>8&255),this.writeByte(255&er)},tr.prototype.readInt16=function(){var er;return(er=this.readUInt16())>=32768?er-65536:er},tr.prototype.writeInt16=function(er){return er<0&&(er+=65536),this.writeUInt16(er)},tr.prototype.readString=function(er){var rr,nr;for(nr=[],rr=0;0<=er?rr<er:rr>er;rr=0<=er?++rr:--rr)nr[rr]=String.fromCharCode(this.readByte());return nr.join("")},tr.prototype.writeString=function(er){var rr,nr,ir;for(ir=[],rr=0,nr=er.length;0<=nr?rr<nr:rr>nr;rr=0<=nr?++rr:--rr)ir.push(this.writeByte(er.charCodeAt(rr)));return ir},tr.prototype.readShort=function(){return this.readInt16()},tr.prototype.writeShort=function(er){return this.writeInt16(er)},tr.prototype.readLongLong=function(){var er,rr,nr,ir,sr,ar,cr,lr;return er=this.readByte(),rr=this.readByte(),nr=this.readByte(),ir=this.readByte(),sr=this.readByte(),ar=this.readByte(),cr=this.readByte(),lr=this.readByte(),128&er?-1*(72057594037927940*(255^er)+281474976710656*(255^rr)+1099511627776*(255^nr)+4294967296*(255^ir)+16777216*(255^sr)+65536*(255^ar)+256*(255^cr)+(255^lr)+1):72057594037927940*er+281474976710656*rr+1099511627776*nr+4294967296*ir+16777216*sr+65536*ar+256*cr+lr},tr.prototype.writeLongLong=function(er){var rr,nr;return rr=Math.floor(er/4294967296),nr=4294967295&er,this.writeByte(rr>>24&255),this.writeByte(rr>>16&255),this.writeByte(rr>>8&255),this.writeByte(255&rr),this.writeByte(nr>>24&255),this.writeByte(nr>>16&255),this.writeByte(nr>>8&255),this.writeByte(255&nr)},tr.prototype.readInt=function(){return this.readInt32()},tr.prototype.writeInt=function(er){return this.writeInt32(er)},tr.prototype.read=function(er){var rr,nr;for(rr=[],nr=0;0<=er?nr<er:nr>er;nr=0<=er?++nr:--nr)rr.push(this.readByte());return rr},tr.prototype.write=function(er){var rr,nr,ir,sr;for(sr=[],nr=0,ir=er.length;nr<ir;nr++)rr=er[nr],sr.push(this.writeByte(rr));return sr},tr}(),ie=function(){var tr;function er(rr){var nr,ir,sr;for(this.scalarType=rr.readInt(),this.tableCount=rr.readShort(),this.searchRange=rr.readShort(),this.entrySelector=rr.readShort(),this.rangeShift=rr.readShort(),this.tables={},ir=0,sr=this.tableCount;0<=sr?ir<sr:ir>sr;ir=0<=sr?++ir:--ir)nr={tag:rr.readString(4),checksum:rr.readInt(),offset:rr.readInt(),length:rr.readInt()},this.tables[nr.tag]=nr}return er.prototype.encode=function(rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr,fr,gr,br;for(br in fr=Object.keys(rr).length,lr=Math.log(2),hr=16*Math.floor(Math.log(fr)/lr),ar=Math.floor(hr/lr),ur=16*fr-hr,(ir=new ne).writeInt(this.scalarType),ir.writeShort(fr),ir.writeShort(hr),ir.writeShort(ar),ir.writeShort(ur),sr=16*fr,or=ir.pos+sr,cr=null,gr=[],rr)for(dr=rr[br],ir.writeString(br),ir.writeInt(tr(dr)),ir.writeInt(or),ir.writeInt(dr.length),gr=gr.concat(dr),br==="head"&&(cr=or),or+=dr.length;or%4;)gr.push(0),or++;return ir.write(gr),nr=2981146554-tr(ir.data),ir.pos=cr+8,ir.writeUInt32(nr),ir.data},tr=function(rr){var nr,ir,sr,ar;for(rr=ve.call(rr);rr.length%4;)rr.push(0);for(sr=new ne(rr),ir=0,nr=0,ar=rr.length;nr<ar;nr=nr+=4)ir+=sr.readUInt32();return 4294967295&ir},er}(),ae={}.hasOwnProperty,oe=function(tr,er){for(var rr in er)ae.call(er,rr)&&(tr[rr]=er[rr]);function nr(){this.constructor=tr}return nr.prototype=er.prototype,tr.prototype=new nr,tr.__super__=er.prototype,tr};re=function(){function tr(er){var rr;this.file=er,rr=this.file.directory.tables[this.tag],this.exists=!!rr,rr&&(this.offset=rr.offset,this.length=rr.length,this.parse(this.file.contents))}return tr.prototype.parse=function(){},tr.prototype.encode=function(){},tr.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},tr}();var se=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="head",er.prototype.parse=function(rr){return rr.pos=this.offset,this.version=rr.readInt(),this.revision=rr.readInt(),this.checkSumAdjustment=rr.readInt(),this.magicNumber=rr.readInt(),this.flags=rr.readShort(),this.unitsPerEm=rr.readShort(),this.created=rr.readLongLong(),this.modified=rr.readLongLong(),this.xMin=rr.readShort(),this.yMin=rr.readShort(),this.xMax=rr.readShort(),this.yMax=rr.readShort(),this.macStyle=rr.readShort(),this.lowestRecPPEM=rr.readShort(),this.fontDirectionHint=rr.readShort(),this.indexToLocFormat=rr.readShort(),this.glyphDataFormat=rr.readShort()},er.prototype.encode=function(rr){var nr;return(nr=new ne).writeInt(this.version),nr.writeInt(this.revision),nr.writeInt(this.checkSumAdjustment),nr.writeInt(this.magicNumber),nr.writeShort(this.flags),nr.writeShort(this.unitsPerEm),nr.writeLongLong(this.created),nr.writeLongLong(this.modified),nr.writeShort(this.xMin),nr.writeShort(this.yMin),nr.writeShort(this.xMax),nr.writeShort(this.yMax),nr.writeShort(this.macStyle),nr.writeShort(this.lowestRecPPEM),nr.writeShort(this.fontDirectionHint),nr.writeShort(rr),nr.writeShort(this.glyphDataFormat),nr.data},er}(),ce=function(){function tr(er,rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr;switch(this.platformID=er.readUInt16(),this.encodingID=er.readShort(),this.offset=rr+er.readInt(),hr=er.pos,er.pos=this.offset,this.format=er.readUInt16(),this.length=er.readUInt16(),this.language=er.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(lr=0;lr<256;++lr)this.codeMap[lr]=er.readByte();break;case 4:for(fr=er.readUInt16(),dr=fr/2,er.pos+=6,sr=function(){var vr,_r;for(_r=[],lr=vr=0;0<=dr?vr<dr:vr>dr;lr=0<=dr?++vr:--vr)_r.push(er.readUInt16());return _r}(),er.pos+=2,br=function(){var vr,_r;for(_r=[],lr=vr=0;0<=dr?vr<dr:vr>dr;lr=0<=dr?++vr:--vr)_r.push(er.readUInt16());return _r}(),or=function(){var vr,_r;for(_r=[],lr=vr=0;0<=dr?vr<dr:vr>dr;lr=0<=dr?++vr:--vr)_r.push(er.readUInt16());return _r}(),ur=function(){var vr,_r;for(_r=[],lr=vr=0;0<=dr?vr<dr:vr>dr;lr=0<=dr?++vr:--vr)_r.push(er.readUInt16());return _r}(),ir=(this.length-er.pos+this.offset)/2,cr=function(){var vr,_r;for(_r=[],lr=vr=0;0<=ir?vr<ir:vr>ir;lr=0<=ir?++vr:--vr)_r.push(er.readUInt16());return _r}(),lr=mr=0,xr=sr.length;mr<xr;lr=++mr)for(pr=sr[lr],nr=yr=gr=br[lr];gr<=pr?yr<=pr:yr>=pr;nr=gr<=pr?++yr:--yr)ur[lr]===0?ar=nr+or[lr]:(ar=cr[ur[lr]/2+(nr-gr)-(dr-lr)]||0)!==0&&(ar+=or[lr]),this.codeMap[nr]=65535&ar}er.pos=hr}return tr.encode=function(er,rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr,yr,xr,vr,_r,Er,Tr,Rr,Nr,Dr,Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr,Mr,qr,$r,Br,zr,Gr,Vr,Xr,Ur,Fr,Kr,Zr,Jr;switch(Lr=new ne,ar=Object.keys(er).sort(function(tn,an){return tn-an}),rr){case"macroman":for(br=0,pr=function(){var tn=[];for(gr=0;gr<256;++gr)tn.push(0);return tn}(),yr={0:0},sr={},Cr=0,Sr=ar.length;Cr<Sr;Cr++)yr[Fr=er[ir=ar[Cr]]]==null&&(yr[Fr]=++br),sr[ir]={old:er[ir],new:yr[er[ir]]},pr[ir]=yr[er[ir]];return Lr.writeUInt16(1),Lr.writeUInt16(0),Lr.writeUInt32(12),Lr.writeUInt16(0),Lr.writeUInt16(262),Lr.writeUInt16(0),Lr.write(pr),{charMap:sr,subtable:Lr.data,maxGlyphID:br+1};case"unicode":for(Or=[],hr=[],xr=0,yr={},nr={},mr=or=null,wr=0,Mr=ar.length;wr<Mr;wr++)yr[_r=er[ir=ar[wr]]]==null&&(yr[_r]=++xr),nr[ir]={old:_r,new:yr[_r]},cr=yr[_r]-ir,mr!=null&&cr===or||(mr&&hr.push(mr),Or.push(ir),or=cr),mr=ir;for(mr&&hr.push(mr),hr.push(65535),Or.push(65535),Dr=2*(Nr=Or.length),Rr=2*Math.pow(Math.log(Nr)/Math.LN2,2),dr=Math.log(Rr/2)/Math.LN2,Tr=2*Nr-Rr,lr=[],Er=[],fr=[],gr=Pr=0,qr=Or.length;Pr<qr;gr=++Pr){if(Ir=Or[gr],ur=hr[gr],Ir===65535){lr.push(0),Er.push(0);break}if(Ir-(jr=nr[Ir].new)>=32768)for(lr.push(0),Er.push(2*(fr.length+Nr-gr)),ir=Ar=Ir;Ir<=ur?Ar<=ur:Ar>=ur;ir=Ir<=ur?++Ar:--Ar)fr.push(nr[ir].new);else lr.push(jr-Ir),Er.push(0)}for(Lr.writeUInt16(3),Lr.writeUInt16(1),Lr.writeUInt32(12),Lr.writeUInt16(4),Lr.writeUInt16(16+8*Nr+2*fr.length),Lr.writeUInt16(0),Lr.writeUInt16(Dr),Lr.writeUInt16(Rr),Lr.writeUInt16(dr),Lr.writeUInt16(Tr),Xr=0,$r=hr.length;Xr<$r;Xr++)ir=hr[Xr],Lr.writeUInt16(ir);for(Lr.writeUInt16(0),Ur=0,Br=Or.length;Ur<Br;Ur++)ir=Or[Ur],Lr.writeUInt16(ir);for(Kr=0,zr=lr.length;Kr<zr;Kr++)cr=lr[Kr],Lr.writeUInt16(cr);for(Zr=0,Gr=Er.length;Zr<Gr;Zr++)vr=Er[Zr],Lr.writeUInt16(vr);for(Jr=0,Vr=fr.length;Jr<Vr;Jr++)br=fr[Jr],Lr.writeUInt16(br);return{charMap:nr,subtable:Lr.data,maxGlyphID:xr+1}}},tr}(),ue=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="cmap",er.prototype.parse=function(rr){var nr,ir,sr;for(rr.pos=this.offset,this.version=rr.readUInt16(),sr=rr.readUInt16(),this.tables=[],this.unicode=null,ir=0;0<=sr?ir<sr:ir>sr;ir=0<=sr?++ir:--ir)nr=new ce(rr,this.offset),this.tables.push(nr),nr.isUnicode&&this.unicode==null&&(this.unicode=nr);return!0},er.encode=function(rr,nr){var ir,sr;return nr==null&&(nr="macroman"),ir=ce.encode(rr,nr),(sr=new ne).writeUInt16(0),sr.writeUInt16(1),ir.table=sr.data.concat(ir.subtable),ir},er}(),he=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="hhea",er.prototype.parse=function(rr){return rr.pos=this.offset,this.version=rr.readInt(),this.ascender=rr.readShort(),this.decender=rr.readShort(),this.lineGap=rr.readShort(),this.advanceWidthMax=rr.readShort(),this.minLeftSideBearing=rr.readShort(),this.minRightSideBearing=rr.readShort(),this.xMaxExtent=rr.readShort(),this.caretSlopeRise=rr.readShort(),this.caretSlopeRun=rr.readShort(),this.caretOffset=rr.readShort(),rr.pos+=8,this.metricDataFormat=rr.readShort(),this.numberOfMetrics=rr.readUInt16()},er}(),le=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="OS/2",er.prototype.parse=function(rr){if(rr.pos=this.offset,this.version=rr.readUInt16(),this.averageCharWidth=rr.readShort(),this.weightClass=rr.readUInt16(),this.widthClass=rr.readUInt16(),this.type=rr.readShort(),this.ySubscriptXSize=rr.readShort(),this.ySubscriptYSize=rr.readShort(),this.ySubscriptXOffset=rr.readShort(),this.ySubscriptYOffset=rr.readShort(),this.ySuperscriptXSize=rr.readShort(),this.ySuperscriptYSize=rr.readShort(),this.ySuperscriptXOffset=rr.readShort(),this.ySuperscriptYOffset=rr.readShort(),this.yStrikeoutSize=rr.readShort(),this.yStrikeoutPosition=rr.readShort(),this.familyClass=rr.readShort(),this.panose=function(){var nr,ir;for(ir=[],nr=0;nr<10;++nr)ir.push(rr.readByte());return ir}(),this.charRange=function(){var nr,ir;for(ir=[],nr=0;nr<4;++nr)ir.push(rr.readInt());return ir}(),this.vendorID=rr.readString(4),this.selection=rr.readShort(),this.firstCharIndex=rr.readShort(),this.lastCharIndex=rr.readShort(),this.version>0&&(this.ascent=rr.readShort(),this.descent=rr.readShort(),this.lineGap=rr.readShort(),this.winAscent=rr.readShort(),this.winDescent=rr.readShort(),this.codePageRange=function(){var nr,ir;for(ir=[],nr=0;nr<2;nr=++nr)ir.push(rr.readInt());return ir}(),this.version>1))return this.xHeight=rr.readShort(),this.capHeight=rr.readShort(),this.defaultChar=rr.readShort(),this.breakChar=rr.readShort(),this.maxContext=rr.readShort()},er}(),fe=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="post",er.prototype.parse=function(rr){var nr,ir,sr;switch(rr.pos=this.offset,this.format=rr.readInt(),this.italicAngle=rr.readInt(),this.underlinePosition=rr.readShort(),this.underlineThickness=rr.readShort(),this.isFixedPitch=rr.readInt(),this.minMemType42=rr.readInt(),this.maxMemType42=rr.readInt(),this.minMemType1=rr.readInt(),this.maxMemType1=rr.readInt(),this.format){case 65536:break;case 131072:var ar;for(ir=rr.readUInt16(),this.glyphNameIndex=[],ar=0;0<=ir?ar<ir:ar>ir;ar=0<=ir?++ar:--ar)this.glyphNameIndex.push(rr.readUInt16());for(this.names=[],sr=[];rr.pos<this.offset+this.length;)nr=rr.readByte(),sr.push(this.names.push(rr.readString(nr)));return sr;case 151552:return ir=rr.readUInt16(),this.offsets=rr.read(ir);case 196608:break;case 262144:return this.map=(function(){var cr,lr,or;for(or=[],ar=cr=0,lr=this.file.maxp.numGlyphs;0<=lr?cr<lr:cr>lr;ar=0<=lr?++cr:--cr)or.push(rr.readUInt32());return or}).call(this)}},er}(),de=function(tr,er){this.raw=tr,this.length=tr.length,this.platformID=er.platformID,this.encodingID=er.encodingID,this.languageID=er.languageID},pe=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="name",er.prototype.parse=function(rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr,fr;for(rr.pos=this.offset,rr.readShort(),nr=rr.readShort(),lr=rr.readShort(),ir=[],ar=0;0<=nr?ar<nr:ar>nr;ar=0<=nr?++ar:--ar)ir.push({platformID:rr.readShort(),encodingID:rr.readShort(),languageID:rr.readShort(),nameID:rr.readShort(),length:rr.readShort(),offset:this.offset+lr+rr.readShort()});for(or={},ar=hr=0,dr=ir.length;hr<dr;ar=++hr)sr=ir[ar],rr.pos=sr.offset,ur=rr.readString(sr.length),cr=new de(ur,sr),or[fr=sr.nameID]==null&&(or[fr]=[]),or[sr.nameID].push(cr);this.strings=or,this.copyright=or[0],this.fontFamily=or[1],this.fontSubfamily=or[2],this.uniqueSubfamily=or[3],this.fontName=or[4],this.version=or[5];try{this.postscriptName=or[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=or[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=or[7],this.manufacturer=or[8],this.designer=or[9],this.description=or[10],this.vendorUrl=or[11],this.designerUrl=or[12],this.license=or[13],this.licenseUrl=or[14],this.preferredFamily=or[15],this.preferredSubfamily=or[17],this.compatibleFull=or[18],this.sampleText=or[19]},er}(),ge=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="maxp",er.prototype.parse=function(rr){return rr.pos=this.offset,this.version=rr.readInt(),this.numGlyphs=rr.readUInt16(),this.maxPoints=rr.readUInt16(),this.maxContours=rr.readUInt16(),this.maxCompositePoints=rr.readUInt16(),this.maxComponentContours=rr.readUInt16(),this.maxZones=rr.readUInt16(),this.maxTwilightPoints=rr.readUInt16(),this.maxStorage=rr.readUInt16(),this.maxFunctionDefs=rr.readUInt16(),this.maxInstructionDefs=rr.readUInt16(),this.maxStackElements=rr.readUInt16(),this.maxSizeOfInstructions=rr.readUInt16(),this.maxComponentElements=rr.readUInt16(),this.maxComponentDepth=rr.readUInt16()},er}(),me=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="hmtx",er.prototype.parse=function(rr){var nr,ir,sr,ar,cr,lr,or;for(rr.pos=this.offset,this.metrics=[],nr=0,lr=this.file.hhea.numberOfMetrics;0<=lr?nr<lr:nr>lr;nr=0<=lr?++nr:--nr)this.metrics.push({advance:rr.readUInt16(),lsb:rr.readInt16()});for(sr=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var ur,hr;for(hr=[],nr=ur=0;0<=sr?ur<sr:ur>sr;nr=0<=sr?++ur:--ur)hr.push(rr.readInt16());return hr}(),this.widths=(function(){var ur,hr,dr,fr;for(fr=[],ur=0,hr=(dr=this.metrics).length;ur<hr;ur++)ar=dr[ur],fr.push(ar.advance);return fr}).call(this),ir=this.widths[this.widths.length-1],or=[],nr=cr=0;0<=sr?cr<sr:cr>sr;nr=0<=sr?++cr:--cr)or.push(this.widths.push(ir));return or},er.prototype.forGlyph=function(rr){return rr in this.metrics?this.metrics[rr]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[rr-this.metrics.length]}},er}(),ve=[].slice,be=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="glyf",er.prototype.parse=function(){return this.cache={}},er.prototype.glyphFor=function(rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr;return rr in this.cache?this.cache[rr]:(ar=this.file.loca,nr=this.file.contents,ir=ar.indexOf(rr),(sr=ar.lengthOf(rr))===0?this.cache[rr]=null:(nr.pos=this.offset+ir,cr=(lr=new ne(nr.read(sr))).readShort(),ur=lr.readShort(),dr=lr.readShort(),or=lr.readShort(),hr=lr.readShort(),this.cache[rr]=cr===-1?new we(lr,ur,dr,or,hr):new ye(lr,cr,ur,dr,or,hr),this.cache[rr]))},er.prototype.encode=function(rr,nr,ir){var sr,ar,cr,lr,or;for(cr=[],ar=[],lr=0,or=nr.length;lr<or;lr++)sr=rr[nr[lr]],ar.push(cr.length),sr&&(cr=cr.concat(sr.encode(ir)));return ar.push(cr.length),{table:cr,offsets:ar}},er}(),ye=function(){function tr(er,rr,nr,ir,sr,ar){this.raw=er,this.numberOfContours=rr,this.xMin=nr,this.yMin=ir,this.xMax=sr,this.yMax=ar,this.compound=!1}return tr.prototype.encode=function(){return this.raw.data},tr}(),we=function(){function tr(er,rr,nr,ir,sr){var ar,cr;for(this.raw=er,this.xMin=rr,this.yMin=nr,this.xMax=ir,this.yMax=sr,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],ar=this.raw;cr=ar.readShort(),this.glyphOffsets.push(ar.pos),this.glyphIDs.push(ar.readUInt16()),32&cr;)ar.pos+=1&cr?4:2,128&cr?ar.pos+=8:64&cr?ar.pos+=4:8&cr&&(ar.pos+=2)}return tr.prototype.encode=function(){var er,rr,nr;for(rr=new ne(ve.call(this.raw.data)),er=0,nr=this.glyphIDs.length;er<nr;++er)rr.pos=this.glyphOffsets[er];return rr.data},tr}(),Ne=function(tr){function er(){return er.__super__.constructor.apply(this,arguments)}return oe(er,re),er.prototype.tag="loca",er.prototype.parse=function(rr){var nr,ir;return rr.pos=this.offset,nr=this.file.head.indexToLocFormat,this.offsets=nr===0?(function(){var sr,ar;for(ar=[],ir=0,sr=this.length;ir<sr;ir+=2)ar.push(2*rr.readUInt16());return ar}).call(this):(function(){var sr,ar;for(ar=[],ir=0,sr=this.length;ir<sr;ir+=4)ar.push(rr.readUInt32());return ar}).call(this)},er.prototype.indexOf=function(rr){return this.offsets[rr]},er.prototype.lengthOf=function(rr){return this.offsets[rr+1]-this.offsets[rr]},er.prototype.encode=function(rr,nr){for(var ir=new Uint32Array(this.offsets.length),sr=0,ar=0,cr=0;cr<ir.length;++cr)if(ir[cr]=sr,ar<nr.length&&nr[ar]==cr){++ar,ir[cr]=sr;var lr=this.offsets[cr],or=this.offsets[cr+1]-lr;or>0&&(sr+=or)}for(var ur=new Array(4*ir.length),hr=0;hr<ir.length;++hr)ur[4*hr+3]=255&ir[hr],ur[4*hr+2]=(65280&ir[hr])>>8,ur[4*hr+1]=(16711680&ir[hr])>>16,ur[4*hr]=(4278190080&ir[hr])>>24;return ur},er}(),Le=function(){function tr(er){this.font=er,this.subset={},this.unicodes={},this.next=33}return tr.prototype.generateCmap=function(){var er,rr,nr,ir,sr;for(rr in ir=this.font.cmap.tables[0].codeMap,er={},sr=this.subset)nr=sr[rr],er[rr]=ir[nr];return er},tr.prototype.glyphsFor=function(er){var rr,nr,ir,sr,ar,cr,lr;for(ir={},ar=0,cr=er.length;ar<cr;ar++)ir[sr=er[ar]]=this.font.glyf.glyphFor(sr);for(sr in rr=[],ir)(nr=ir[sr])!=null&&nr.compound&&rr.push.apply(rr,nr.glyphIDs);if(rr.length>0)for(sr in lr=this.glyphsFor(rr))nr=lr[sr],ir[sr]=nr;return ir},tr.prototype.encode=function(er,rr){var nr,ir,sr,ar,cr,lr,or,ur,hr,dr,fr,gr,br,pr,mr;for(ir in nr=ue.encode(this.generateCmap(),"unicode"),ar=this.glyphsFor(er),fr={0:0},mr=nr.charMap)fr[(lr=mr[ir]).old]=lr.new;for(gr in dr=nr.maxGlyphID,ar)gr in fr||(fr[gr]=dr++);return ur=function(yr){var xr,vr;for(xr in vr={},yr)vr[yr[xr]]=xr;return vr}(fr),hr=Object.keys(ur).sort(function(yr,xr){return yr-xr}),br=function(){var yr,xr,vr;for(vr=[],yr=0,xr=hr.length;yr<xr;yr++)cr=hr[yr],vr.push(ur[cr]);return vr}(),sr=this.font.glyf.encode(ar,br,fr),or=this.font.loca.encode(sr.offsets,br),pr={cmap:this.font.cmap.raw(),glyf:sr.table,loca:or,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(rr)},this.font.os2.exists&&(pr["OS/2"]=this.font.os2.raw()),this.font.directory.encode(pr)},tr}();E.API.PDFObject=function(){var tr;function er(){}return tr=function(rr,nr){return(Array(nr+1).join("0")+rr).slice(-nr)},er.convert=function(rr){var nr,ir,sr,ar;if(Array.isArray(rr))return"["+function(){var cr,lr,or;for(or=[],cr=0,lr=rr.length;cr<lr;cr++)nr=rr[cr],or.push(er.convert(nr));return or}().join(" ")+"]";if(typeof rr=="string")return"/"+rr;if(rr!=null&&rr.isString)return"("+rr+")";if(rr instanceof Date)return"(D:"+tr(rr.getUTCFullYear(),4)+tr(rr.getUTCMonth(),2)+tr(rr.getUTCDate(),2)+tr(rr.getUTCHours(),2)+tr(rr.getUTCMinutes(),2)+tr(rr.getUTCSeconds(),2)+"Z)";if({}.toString.call(rr)==="[object Object]"){for(ir in sr=["<<"],rr)ar=rr[ir],sr.push("/"+ir+" "+er.convert(ar));return sr.push(">>"),sr.join(`
`)}return""+rr},er}();const jspdf_es_min=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:St,AcroFormAppearance:At,AcroFormButton:mt,AcroFormCheckBox:wt,AcroFormChoiceField:ft,AcroFormComboBox:pt,AcroFormEditBox:gt,AcroFormListBox:dt,AcroFormPasswordField:Lt,AcroFormPushButton:vt,AcroFormRadioButton:bt,AcroFormTextField:Nt,GState:j,ShadingPattern:B,TilingPattern:M,default:E,jsPDF:E},Symbol.toStringTag,{value:"Module"}));var jspdf_plugin_autotable={exports:{}};const require$$0=getAugmentedNamespace(jspdf_es_min);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(tr,er){(function(nr,ir){tr.exports=ir(function(){try{return require$$0}catch{}}())})(typeof globalThis<"u"?globalThis:typeof commonjsGlobal$2<"u"?commonjsGlobal$2:typeof window<"u"?window:typeof self<"u"?self:commonjsGlobal$2,function(rr){return function(){var nr={172:function(cr,lr){var or=this&&this.__extends||function(){var dr=function(fr,gr){return dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(br,pr){br.__proto__=pr}||function(br,pr){for(var mr in pr)Object.prototype.hasOwnProperty.call(pr,mr)&&(br[mr]=pr[mr])},dr(fr,gr)};return function(fr,gr){if(typeof gr!="function"&&gr!==null)throw new TypeError("Class extends value "+String(gr)+" is not a constructor or null");dr(fr,gr);function br(){this.constructor=fr}fr.prototype=gr===null?Object.create(gr):(br.prototype=gr.prototype,new br)}}();Object.defineProperty(lr,"__esModule",{value:!0}),lr.CellHookData=lr.HookData=void 0;var ur=function(){function dr(fr,gr,br){this.table=gr,this.pageNumber=gr.pageNumber,this.pageCount=this.pageNumber,this.settings=gr.settings,this.cursor=br,this.doc=fr.getDocument()}return dr}();lr.HookData=ur;var hr=function(dr){or(fr,dr);function fr(gr,br,pr,mr,yr,xr){var vr=dr.call(this,gr,br,xr)||this;return vr.cell=pr,vr.row=mr,vr.column=yr,vr.section=mr.section,vr}return fr}(ur);lr.CellHookData=hr},340:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0});var ur=or(4),hr=or(136),dr=or(744),fr=or(776),gr=or(664),br=or(972);function pr(mr){mr.API.autoTable=function(){for(var yr=[],xr=0;xr<arguments.length;xr++)yr[xr]=arguments[xr];var vr;yr.length===1?vr=yr[0]:(console.error("Use of deprecated autoTable initiation"),vr=yr[2]||{},vr.columns=yr[0],vr.body=yr[1]);var _r=(0,fr.parseInput)(this,vr),Er=(0,br.createTable)(this,_r);return(0,gr.drawTable)(this,Er),this},mr.API.lastAutoTable=!1,mr.API.previousAutoTable=!1,mr.API.autoTable.previous=!1,mr.API.autoTableText=function(yr,xr,vr,_r){(0,hr.default)(yr,xr,vr,_r,this)},mr.API.autoTableSetDefaults=function(yr){return dr.DocHandler.setDefaults(yr,this),this},mr.autoTableSetDefaults=function(yr,xr){dr.DocHandler.setDefaults(yr,xr)},mr.API.autoTableHtmlToJson=function(yr,xr){var vr;if(xr===void 0&&(xr=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var _r=new dr.DocHandler(this),Er=(0,ur.parseHtml)(_r,yr,window,xr,!1),Tr=Er.head,Rr=Er.body,Nr=((vr=Tr[0])===null||vr===void 0?void 0:vr.map(function(Dr){return Dr.content}))||[];return{columns:Nr,rows:Rr,data:Rr}},mr.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var yr=this.lastAutoTable;return yr&&yr.finalY?yr.finalY:0},mr.API.autoTableAddPageContent=function(yr){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),mr.API.autoTable.globalDefaults||(mr.API.autoTable.globalDefaults={}),mr.API.autoTable.globalDefaults.addPageContent=yr,this},mr.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}lr.default=pr},136:function(cr,lr){Object.defineProperty(lr,"__esModule",{value:!0});function or(ur,hr,dr,fr,gr){fr=fr||{};var br=1.15,pr=gr.internal.scaleFactor,mr=gr.internal.getFontSize()/pr,yr=gr.getLineHeightFactor?gr.getLineHeightFactor():br,xr=mr*yr,vr=/\r\n|\r|\n/g,_r="",Er=1;if((fr.valign==="middle"||fr.valign==="bottom"||fr.halign==="center"||fr.halign==="right")&&(_r=typeof ur=="string"?ur.split(vr):ur,Er=_r.length||1),dr+=mr*(2-br),fr.valign==="middle"?dr-=Er/2*xr:fr.valign==="bottom"&&(dr-=Er*xr),fr.halign==="center"||fr.halign==="right"){var Tr=mr;if(fr.halign==="center"&&(Tr*=.5),_r&&Er>=1){for(var Rr=0;Rr<_r.length;Rr++)gr.text(_r[Rr],hr-gr.getStringUnitWidth(_r[Rr])*Tr,dr),dr+=xr;return gr}hr-=gr.getStringUnitWidth(ur)*Tr}return fr.halign==="justify"?gr.text(ur,hr,dr,{maxWidth:fr.maxWidth||100,align:"justify"}):gr.text(ur,hr,dr),gr}lr.default=or},420:function(cr,lr){Object.defineProperty(lr,"__esModule",{value:!0}),lr.getPageAvailableWidth=lr.parseSpacing=lr.getFillStyle=lr.addTableBorder=lr.getStringWidth=void 0;function or(gr,br,pr){pr.applyStyles(br,!0);var mr=Array.isArray(gr)?gr:[gr],yr=mr.map(function(xr){return pr.getTextWidth(xr)}).reduce(function(xr,vr){return Math.max(xr,vr)},0);return yr}lr.getStringWidth=or;function ur(gr,br,pr,mr){var yr=br.settings.tableLineWidth,xr=br.settings.tableLineColor;gr.applyStyles({lineWidth:yr,lineColor:xr});var vr=hr(yr,!1);vr&&gr.rect(pr.x,pr.y,br.getWidth(gr.pageSize().width),mr.y-pr.y,vr)}lr.addTableBorder=ur;function hr(gr,br){var pr=gr>0,mr=br||br===0;return pr&&mr?"DF":pr?"S":mr?"F":null}lr.getFillStyle=hr;function dr(gr,br){var pr,mr,yr,xr;if(gr=gr||br,Array.isArray(gr)){if(gr.length>=4)return{top:gr[0],right:gr[1],bottom:gr[2],left:gr[3]};if(gr.length===3)return{top:gr[0],right:gr[1],bottom:gr[2],left:gr[1]};if(gr.length===2)return{top:gr[0],right:gr[1],bottom:gr[0],left:gr[1]};gr.length===1?gr=gr[0]:gr=br}return typeof gr=="object"?(typeof gr.vertical=="number"&&(gr.top=gr.vertical,gr.bottom=gr.vertical),typeof gr.horizontal=="number"&&(gr.right=gr.horizontal,gr.left=gr.horizontal),{left:(pr=gr.left)!==null&&pr!==void 0?pr:br,top:(mr=gr.top)!==null&&mr!==void 0?mr:br,right:(yr=gr.right)!==null&&yr!==void 0?yr:br,bottom:(xr=gr.bottom)!==null&&xr!==void 0?xr:br}):(typeof gr!="number"&&(gr=br),{top:gr,right:gr,bottom:gr,left:gr})}lr.parseSpacing=dr;function fr(gr,br){var pr=dr(br.settings.margin,0);return gr.pageSize().width-(pr.left+pr.right)}lr.getPageAvailableWidth=fr},796:function(cr,lr){var or=this&&this.__extends||function(){var fr=function(gr,br){return fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pr,mr){pr.__proto__=mr}||function(pr,mr){for(var yr in mr)Object.prototype.hasOwnProperty.call(mr,yr)&&(pr[yr]=mr[yr])},fr(gr,br)};return function(gr,br){if(typeof br!="function"&&br!==null)throw new TypeError("Class extends value "+String(br)+" is not a constructor or null");fr(gr,br);function pr(){this.constructor=gr}gr.prototype=br===null?Object.create(br):(pr.prototype=br.prototype,new pr)}}();Object.defineProperty(lr,"__esModule",{value:!0}),lr.getTheme=lr.defaultStyles=lr.HtmlRowInput=void 0;var ur=function(fr){or(gr,fr);function gr(br){var pr=fr.call(this)||this;return pr._element=br,pr}return gr}(Array);lr.HtmlRowInput=ur;function hr(fr){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/fr,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}lr.defaultStyles=hr;function dr(fr){var gr={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return gr[fr]}lr.getTheme=dr},903:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.parseCss=void 0;var ur=or(420);function hr(pr,mr,yr,xr,vr){var _r={},Er=1.3333333333333333,Tr=fr(mr,function(Sr){return vr.getComputedStyle(Sr).backgroundColor});Tr!=null&&(_r.fillColor=Tr);var Rr=fr(mr,function(Sr){return vr.getComputedStyle(Sr).color});Rr!=null&&(_r.textColor=Rr);var Nr=br(xr,yr);Nr&&(_r.cellPadding=Nr);var Dr="borderTopColor",Ir=Er*yr,Or=xr.borderTopWidth;if(xr.borderBottomWidth===Or&&xr.borderRightWidth===Or&&xr.borderLeftWidth===Or){var jr=(parseFloat(Or)||0)/Ir;jr&&(_r.lineWidth=jr)}else _r.lineWidth={top:(parseFloat(xr.borderTopWidth)||0)/Ir,right:(parseFloat(xr.borderRightWidth)||0)/Ir,bottom:(parseFloat(xr.borderBottomWidth)||0)/Ir,left:(parseFloat(xr.borderLeftWidth)||0)/Ir},_r.lineWidth.top||(_r.lineWidth.right?Dr="borderRightColor":_r.lineWidth.bottom?Dr="borderBottomColor":_r.lineWidth.left&&(Dr="borderLeftColor"));var Lr=fr(mr,function(Sr){return vr.getComputedStyle(Sr)[Dr]});Lr!=null&&(_r.lineColor=Lr);var Cr=["left","right","center","justify"];Cr.indexOf(xr.textAlign)!==-1&&(_r.halign=xr.textAlign),Cr=["middle","bottom","top"],Cr.indexOf(xr.verticalAlign)!==-1&&(_r.valign=xr.verticalAlign);var wr=parseInt(xr.fontSize||"");isNaN(wr)||(_r.fontSize=wr/Er);var Pr=dr(xr);Pr&&(_r.fontStyle=Pr);var Ar=(xr.fontFamily||"").toLowerCase();return pr.indexOf(Ar)!==-1&&(_r.font=Ar),_r}lr.parseCss=hr;function dr(pr){var mr="";return(pr.fontWeight==="bold"||pr.fontWeight==="bolder"||parseInt(pr.fontWeight)>=700)&&(mr="bold"),(pr.fontStyle==="italic"||pr.fontStyle==="oblique")&&(mr+="italic"),mr}function fr(pr,mr){var yr=gr(pr,mr);if(!yr)return null;var xr=yr.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!xr||!Array.isArray(xr))return null;var vr=[parseInt(xr[1]),parseInt(xr[2]),parseInt(xr[3])],_r=parseInt(xr[4]);return _r===0||isNaN(vr[0])||isNaN(vr[1])||isNaN(vr[2])?null:vr}function gr(pr,mr){var yr=mr(pr);return yr==="rgba(0, 0, 0, 0)"||yr==="transparent"||yr==="initial"||yr==="inherit"?pr.parentElement==null?null:gr(pr.parentElement,mr):yr}function br(pr,mr){var yr=[pr.paddingTop,pr.paddingRight,pr.paddingBottom,pr.paddingLeft],xr=96/(72/mr),vr=(parseInt(pr.lineHeight)-parseInt(pr.fontSize))/mr/2,_r=yr.map(function(Tr){return parseInt(Tr||"0")/xr}),Er=(0,ur.parseSpacing)(_r,0);return vr>Er.top&&(Er.top=vr),vr>Er.bottom&&(Er.bottom=vr),Er}},744:function(cr,lr){Object.defineProperty(lr,"__esModule",{value:!0}),lr.DocHandler=void 0;var or={},ur=function(){function hr(dr){this.jsPDFDocument=dr,this.userStyles={textColor:dr.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:dr.internal.getFontSize(),fontStyle:dr.internal.getFont().fontStyle,font:dr.internal.getFont().fontName,lineWidth:dr.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:dr.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return hr.setDefaults=function(dr,fr){fr===void 0&&(fr=null),fr?fr.__autoTableDocumentDefaults=dr:or=dr},hr.unifyColor=function(dr){return Array.isArray(dr)?dr:typeof dr=="number"?[dr,dr,dr]:typeof dr=="string"?[dr]:null},hr.prototype.applyStyles=function(dr,fr){var gr,br,pr;fr===void 0&&(fr=!1),dr.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(dr.fontStyle);var mr=this.jsPDFDocument.internal.getFont(),yr=mr.fontStyle,xr=mr.fontName;if(dr.font&&(xr=dr.font),dr.fontStyle){yr=dr.fontStyle;var vr=this.getFontList()[xr];vr&&vr.indexOf(yr)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(vr[0]),yr=vr[0])}if(this.jsPDFDocument.setFont(xr,yr),dr.fontSize&&this.jsPDFDocument.setFontSize(dr.fontSize),!fr){var _r=hr.unifyColor(dr.fillColor);_r&&(gr=this.jsPDFDocument).setFillColor.apply(gr,_r),_r=hr.unifyColor(dr.textColor),_r&&(br=this.jsPDFDocument).setTextColor.apply(br,_r),_r=hr.unifyColor(dr.lineColor),_r&&(pr=this.jsPDFDocument).setDrawColor.apply(pr,_r),typeof dr.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(dr.lineWidth)}},hr.prototype.splitTextToSize=function(dr,fr,gr){return this.jsPDFDocument.splitTextToSize(dr,fr,gr)},hr.prototype.rect=function(dr,fr,gr,br,pr){return this.jsPDFDocument.rect(dr,fr,gr,br,pr)},hr.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},hr.prototype.getTextWidth=function(dr){return this.jsPDFDocument.getTextWidth(dr)},hr.prototype.getDocument=function(){return this.jsPDFDocument},hr.prototype.setPage=function(dr){this.jsPDFDocument.setPage(dr)},hr.prototype.addPage=function(){return this.jsPDFDocument.addPage()},hr.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},hr.prototype.getGlobalOptions=function(){return or||{}},hr.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},hr.prototype.pageSize=function(){var dr=this.jsPDFDocument.internal.pageSize;return dr.width==null&&(dr={width:dr.getWidth(),height:dr.getHeight()}),dr},hr.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},hr.prototype.getLineHeightFactor=function(){var dr=this.jsPDFDocument;return dr.getLineHeightFactor?dr.getLineHeightFactor():1.15},hr.prototype.getLineHeight=function(dr){return dr/this.scaleFactor()*this.getLineHeightFactor()},hr.prototype.pageNumber=function(){var dr=this.jsPDFDocument.internal.getCurrentPageInfo();return dr?dr.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},hr}();lr.DocHandler=ur},4:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.parseHtml=void 0;var ur=or(903),hr=or(796);function dr(br,pr,mr,yr,xr){var vr,_r;yr===void 0&&(yr=!1),xr===void 0&&(xr=!1);var Er;typeof pr=="string"?Er=mr.document.querySelector(pr):Er=pr;var Tr=Object.keys(br.getFontList()),Rr=br.scaleFactor(),Nr=[],Dr=[],Ir=[];if(!Er)return console.error("Html table could not be found with input: ",pr),{head:Nr,body:Dr,foot:Ir};for(var Or=0;Or<Er.rows.length;Or++){var jr=Er.rows[Or],Lr=(_r=(vr=jr==null?void 0:jr.parentElement)===null||vr===void 0?void 0:vr.tagName)===null||_r===void 0?void 0:_r.toLowerCase(),Cr=fr(Tr,Rr,mr,jr,yr,xr);Cr&&(Lr==="thead"?Nr.push(Cr):Lr==="tfoot"?Ir.push(Cr):Dr.push(Cr))}return{head:Nr,body:Dr,foot:Ir}}lr.parseHtml=dr;function fr(br,pr,mr,yr,xr,vr){for(var _r=new hr.HtmlRowInput(yr),Er=0;Er<yr.cells.length;Er++){var Tr=yr.cells[Er],Rr=mr.getComputedStyle(Tr);if(xr||Rr.display!=="none"){var Nr=void 0;vr&&(Nr=(0,ur.parseCss)(br,Tr,pr,Rr,mr)),_r.push({rowSpan:Tr.rowSpan,colSpan:Tr.colSpan,styles:Nr,_element:Tr,content:gr(Tr)})}}var Dr=mr.getComputedStyle(yr);if(_r.length>0&&(xr||Dr.display!=="none"))return _r}function gr(br){var pr=br.cloneNode(!0);return pr.innerHTML=pr.innerHTML.replace(/\n/g,"").replace(/ +/g," "),pr.innerHTML=pr.innerHTML.split(/<br.*?>/).map(function(mr){return mr.trim()}).join(`
`),pr.innerText||pr.textContent||""}},776:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.parseInput=void 0;var ur=or(4),hr=or(356),dr=or(420),fr=or(744),gr=or(792);function br(Er,Tr){var Rr=new fr.DocHandler(Er),Nr=Rr.getDocumentOptions(),Dr=Rr.getGlobalOptions();(0,gr.default)(Rr,Dr,Nr,Tr);var Ir=(0,hr.assign)({},Dr,Nr,Tr),Or;typeof window<"u"&&(Or=window);var jr=pr(Dr,Nr,Tr),Lr=mr(Dr,Nr,Tr),Cr=yr(Rr,Ir),wr=vr(Rr,Ir,Or);return{id:Tr.tableId,content:wr,hooks:Lr,styles:jr,settings:Cr}}lr.parseInput=br;function pr(Er,Tr,Rr){for(var Nr={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Dr=function(Lr){if(Lr==="columnStyles"){var Cr=Er[Lr],wr=Tr[Lr],Pr=Rr[Lr];Nr.columnStyles=(0,hr.assign)({},Cr,wr,Pr)}else{var Ar=[Er,Tr,Rr],Sr=Ar.map(function(Mr){return Mr[Lr]||{}});Nr[Lr]=(0,hr.assign)({},Sr[0],Sr[1],Sr[2])}},Ir=0,Or=Object.keys(Nr);Ir<Or.length;Ir++){var jr=Or[Ir];Dr(jr)}return Nr}function mr(Er,Tr,Rr){for(var Nr=[Er,Tr,Rr],Dr={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},Ir=0,Or=Nr;Ir<Or.length;Ir++){var jr=Or[Ir];jr.didParseCell&&Dr.didParseCell.push(jr.didParseCell),jr.willDrawCell&&Dr.willDrawCell.push(jr.willDrawCell),jr.didDrawCell&&Dr.didDrawCell.push(jr.didDrawCell),jr.willDrawPage&&Dr.willDrawPage.push(jr.willDrawPage),jr.didDrawPage&&Dr.didDrawPage.push(jr.didDrawPage)}return Dr}function yr(Er,Tr){var Rr,Nr,Dr,Ir,Or,jr,Lr,Cr,wr,Pr,Ar,Sr,Mr=(0,dr.parseSpacing)(Tr.margin,40/Er.scaleFactor()),qr=(Rr=xr(Er,Tr.startY))!==null&&Rr!==void 0?Rr:Mr.top,$r;Tr.showFoot===!0?$r="everyPage":Tr.showFoot===!1?$r="never":$r=(Nr=Tr.showFoot)!==null&&Nr!==void 0?Nr:"everyPage";var Br;Tr.showHead===!0?Br="everyPage":Tr.showHead===!1?Br="never":Br=(Dr=Tr.showHead)!==null&&Dr!==void 0?Dr:"everyPage";var zr=(Ir=Tr.useCss)!==null&&Ir!==void 0?Ir:!1,Gr=Tr.theme||(zr?"plain":"striped"),Vr=!!Tr.horizontalPageBreak,Xr=(Or=Tr.horizontalPageBreakRepeat)!==null&&Or!==void 0?Or:null;return{includeHiddenHtml:(jr=Tr.includeHiddenHtml)!==null&&jr!==void 0?jr:!1,useCss:zr,theme:Gr,startY:qr,margin:Mr,pageBreak:(Lr=Tr.pageBreak)!==null&&Lr!==void 0?Lr:"auto",rowPageBreak:(Cr=Tr.rowPageBreak)!==null&&Cr!==void 0?Cr:"auto",tableWidth:(wr=Tr.tableWidth)!==null&&wr!==void 0?wr:"auto",showHead:Br,showFoot:$r,tableLineWidth:(Pr=Tr.tableLineWidth)!==null&&Pr!==void 0?Pr:0,tableLineColor:(Ar=Tr.tableLineColor)!==null&&Ar!==void 0?Ar:200,horizontalPageBreak:Vr,horizontalPageBreakRepeat:Xr,horizontalPageBreakBehaviour:(Sr=Tr.horizontalPageBreakBehaviour)!==null&&Sr!==void 0?Sr:"afterAllRows"}}function xr(Er,Tr){var Rr=Er.getLastAutoTable(),Nr=Er.scaleFactor(),Dr=Er.pageNumber(),Ir=!1;if(Rr&&Rr.startPageNumber){var Or=Rr.startPageNumber+Rr.pageNumber-1;Ir=Or===Dr}return typeof Tr=="number"?Tr:(Tr==null||Tr===!1)&&Ir&&(Rr==null?void 0:Rr.finalY)!=null?Rr.finalY+20/Nr:null}function vr(Er,Tr,Rr){var Nr=Tr.head||[],Dr=Tr.body||[],Ir=Tr.foot||[];if(Tr.html){var Or=Tr.includeHiddenHtml;if(Rr){var jr=(0,ur.parseHtml)(Er,Tr.html,Rr,Or,Tr.useCss)||{};Nr=jr.head||Nr,Dr=jr.body||Nr,Ir=jr.foot||Nr}else console.error("Cannot parse html in non browser environment")}var Lr=Tr.columns||_r(Nr,Dr,Ir);return{columns:Lr,head:Nr,body:Dr,foot:Ir}}function _r(Er,Tr,Rr){var Nr=Er[0]||Tr[0]||Rr[0]||[],Dr=[];return Object.keys(Nr).filter(function(Ir){return Ir!=="_element"}).forEach(function(Ir){var Or=1,jr;Array.isArray(Nr)?jr=Nr[parseInt(Ir)]:jr=Nr[Ir],typeof jr=="object"&&!Array.isArray(jr)&&(Or=(jr==null?void 0:jr.colSpan)||1);for(var Lr=0;Lr<Or;Lr++){var Cr=void 0;Array.isArray(Nr)?Cr=Dr.length:Cr=Ir+(Lr>0?"_".concat(Lr):"");var wr={dataKey:Cr};Dr.push(wr)}}),Dr}},792:function(cr,lr){Object.defineProperty(lr,"__esModule",{value:!0});function or(hr,dr,fr,gr){for(var br=function(xr){xr&&typeof xr!="object"&&console.error("The options parameter should be of type object, is: "+typeof xr),typeof xr.extendWidth<"u"&&(xr.tableWidth=xr.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof xr.margins<"u"&&(typeof xr.margin>"u"&&(xr.margin=xr.margins),console.error("Use of deprecated option: margins, use margin instead.")),xr.startY&&typeof xr.startY!="number"&&(console.error("Invalid value for startY option",xr.startY),delete xr.startY),!xr.didDrawPage&&(xr.afterPageContent||xr.beforePageContent||xr.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),xr.didDrawPage=function(Ir){hr.applyStyles(hr.userStyles),xr.beforePageContent&&xr.beforePageContent(Ir),hr.applyStyles(hr.userStyles),xr.afterPageContent&&xr.afterPageContent(Ir),hr.applyStyles(hr.userStyles),xr.afterPageAdd&&Ir.pageNumber>1&&Ir.afterPageAdd(Ir),hr.applyStyles(hr.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(Ir){xr[Ir]&&console.error('The "'.concat(Ir,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(Ir){var Or=Ir[0],jr=Ir[1];xr[jr]&&(console.error("Use of deprecated option ".concat(jr,". Use ").concat(Or," instead")),xr[Or]=xr[jr])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(Ir){var Or=typeof Ir=="string"?Ir:Ir[0],jr=typeof Ir=="string"?Ir:Ir[1];typeof xr[Or]<"u"&&(typeof xr.styles[jr]>"u"&&(xr.styles[jr]=xr[Or]),console.error("Use of deprecated option: "+Or+", use the style "+jr+" instead."))});for(var vr=0,_r=["styles","bodyStyles","headStyles","footStyles"];vr<_r.length;vr++){var Er=_r[vr];ur(xr[Er]||{})}for(var Tr=xr.columnStyles||{},Rr=0,Nr=Object.keys(Tr);Rr<Nr.length;Rr++){var Dr=Nr[Rr];ur(Tr[Dr]||{})}},pr=0,mr=[dr,fr,gr];pr<mr.length;pr++){var yr=mr[pr];br(yr)}}lr.default=or;function ur(hr){hr.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),hr.minCellHeight||(hr.minCellHeight=hr.rowHeight)):hr.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),hr.cellWidth||(hr.cellWidth=hr.columnWidth))}},260:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.Column=lr.Cell=lr.Row=lr.Table=void 0;var ur=or(796),hr=or(172),dr=or(420),fr=function(){function mr(yr,xr){this.pageNumber=1,this.pageCount=1,this.id=yr.id,this.settings=yr.settings,this.styles=yr.styles,this.hooks=yr.hooks,this.columns=xr.columns,this.head=xr.head,this.body=xr.body,this.foot=xr.foot}return mr.prototype.getHeadHeight=function(yr){return this.head.reduce(function(xr,vr){return xr+vr.getMaxCellHeight(yr)},0)},mr.prototype.getFootHeight=function(yr){return this.foot.reduce(function(xr,vr){return xr+vr.getMaxCellHeight(yr)},0)},mr.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},mr.prototype.callCellHooks=function(yr,xr,vr,_r,Er,Tr){for(var Rr=0,Nr=xr;Rr<Nr.length;Rr++){var Dr=Nr[Rr],Ir=new hr.CellHookData(yr,this,vr,_r,Er,Tr),Or=Dr(Ir)===!1;if(vr.text=Array.isArray(vr.text)?vr.text:[vr.text],Or)return!1}return!0},mr.prototype.callEndPageHooks=function(yr,xr){yr.applyStyles(yr.userStyles);for(var vr=0,_r=this.hooks.didDrawPage;vr<_r.length;vr++){var Er=_r[vr];Er(new hr.HookData(yr,this,xr))}},mr.prototype.callWillDrawPageHooks=function(yr,xr){for(var vr=0,_r=this.hooks.willDrawPage;vr<_r.length;vr++){var Er=_r[vr];Er(new hr.HookData(yr,this,xr))}},mr.prototype.getWidth=function(yr){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var xr=this.columns.reduce(function(_r,Er){return _r+Er.wrappedWidth},0);return xr}else{var vr=this.settings.margin;return yr-vr.left-vr.right}},mr}();lr.Table=fr;var gr=function(){function mr(yr,xr,vr,_r,Er){Er===void 0&&(Er=!1),this.height=0,this.raw=yr,yr instanceof ur.HtmlRowInput&&(this.raw=yr._element,this.element=yr._element),this.index=xr,this.section=vr,this.cells=_r,this.spansMultiplePages=Er}return mr.prototype.getMaxCellHeight=function(yr){var xr=this;return yr.reduce(function(vr,_r){var Er;return Math.max(vr,((Er=xr.cells[_r.index])===null||Er===void 0?void 0:Er.height)||0)},0)},mr.prototype.hasRowSpan=function(yr){var xr=this;return yr.filter(function(vr){var _r=xr.cells[vr.index];return _r?_r.rowSpan>1:!1}).length>0},mr.prototype.canEntireRowFit=function(yr,xr){return this.getMaxCellHeight(xr)<=yr},mr.prototype.getMinimumRowHeight=function(yr,xr){var vr=this;return yr.reduce(function(_r,Er){var Tr=vr.cells[Er.index];if(!Tr)return 0;var Rr=xr.getLineHeight(Tr.styles.fontSize),Nr=Tr.padding("vertical"),Dr=Nr+Rr;return Dr>_r?Dr:_r},0)},mr}();lr.Row=gr;var br=function(){function mr(yr,xr,vr){var _r,Er;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=xr,this.section=vr,this.raw=yr;var Tr=yr;yr!=null&&typeof yr=="object"&&!Array.isArray(yr)?(this.rowSpan=yr.rowSpan||1,this.colSpan=yr.colSpan||1,Tr=(Er=(_r=yr.content)!==null&&_r!==void 0?_r:yr.title)!==null&&Er!==void 0?Er:yr,yr._element&&(this.raw=yr._element)):(this.rowSpan=1,this.colSpan=1);var Rr=Tr!=null?""+Tr:"",Nr=/\r\n|\r|\n/g;this.text=Rr.split(Nr)}return mr.prototype.getTextPos=function(){var yr;if(this.styles.valign==="top")yr=this.y+this.padding("top");else if(this.styles.valign==="bottom")yr=this.y+this.height-this.padding("bottom");else{var xr=this.height-this.padding("vertical");yr=this.y+xr/2+this.padding("top")}var vr;if(this.styles.halign==="right")vr=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var _r=this.width-this.padding("horizontal");vr=this.x+_r/2+this.padding("left")}else vr=this.x+this.padding("left");return{x:vr,y:yr}},mr.prototype.getContentHeight=function(yr,xr){xr===void 0&&(xr=1.15);var vr=Array.isArray(this.text)?this.text.length:1,_r=this.styles.fontSize/yr*xr,Er=vr*_r+this.padding("vertical");return Math.max(Er,this.styles.minCellHeight)},mr.prototype.padding=function(yr){var xr=(0,dr.parseSpacing)(this.styles.cellPadding,0);return yr==="vertical"?xr.top+xr.bottom:yr==="horizontal"?xr.left+xr.right:xr[yr]},mr}();lr.Cell=br;var pr=function(){function mr(yr,xr,vr){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=yr,this.raw=xr,this.index=vr}return mr.prototype.getMaxCustomCellWidth=function(yr){for(var xr=0,vr=0,_r=yr.allRows();vr<_r.length;vr++){var Er=_r[vr],Tr=Er.cells[this.index];Tr&&typeof Tr.styles.cellWidth=="number"&&(xr=Math.max(xr,Tr.styles.cellWidth))}return xr},mr}();lr.Column=pr},356:function(cr,lr){Object.defineProperty(lr,"__esModule",{value:!0}),lr.assign=void 0;function or(ur,hr,dr,fr,gr){if(ur==null)throw new TypeError("Cannot convert undefined or null to object");for(var br=Object(ur),pr=1;pr<arguments.length;pr++){var mr=arguments[pr];if(mr!=null)for(var yr in mr)Object.prototype.hasOwnProperty.call(mr,yr)&&(br[yr]=mr[yr])}return br}lr.assign=or},972:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.createTable=void 0;var ur=or(744),hr=or(260),dr=or(324),fr=or(796),gr=or(356);function br(Er,Tr){var Rr=new ur.DocHandler(Er),Nr=pr(Tr,Rr.scaleFactor()),Dr=new hr.Table(Tr,Nr);return(0,dr.calculateWidths)(Rr,Dr),Rr.applyStyles(Rr.userStyles),Dr}lr.createTable=br;function pr(Er,Tr){var Rr=Er.content,Nr=vr(Rr.columns);if(Rr.head.length===0){var Dr=yr(Nr,"head");Dr&&Rr.head.push(Dr)}if(Rr.foot.length===0){var Dr=yr(Nr,"foot");Dr&&Rr.foot.push(Dr)}var Ir=Er.settings.theme,Or=Er.styles;return{columns:Nr,head:mr("head",Rr.head,Nr,Or,Ir,Tr),body:mr("body",Rr.body,Nr,Or,Ir,Tr),foot:mr("foot",Rr.foot,Nr,Or,Ir,Tr)}}function mr(Er,Tr,Rr,Nr,Dr,Ir){var Or={},jr=Tr.map(function(Lr,Cr){for(var wr=0,Pr={},Ar=0,Sr=0,Mr=0,qr=Rr;Mr<qr.length;Mr++){var $r=qr[Mr];if(Or[$r.index]==null||Or[$r.index].left===0)if(Sr===0){var Br=void 0;Array.isArray(Lr)?Br=Lr[$r.index-Ar-wr]:Br=Lr[$r.dataKey];var zr={};typeof Br=="object"&&!Array.isArray(Br)&&(zr=(Br==null?void 0:Br.styles)||{});var Gr=_r(Er,$r,Cr,Dr,Nr,Ir,zr),Vr=new hr.Cell(Br,Gr,Er);Pr[$r.dataKey]=Vr,Pr[$r.index]=Vr,Sr=Vr.colSpan-1,Or[$r.index]={left:Vr.rowSpan-1,times:Sr}}else Sr--,Ar++;else Or[$r.index].left--,Sr=Or[$r.index].times,wr++}return new hr.Row(Lr,Cr,Er,Pr)});return jr}function yr(Er,Tr){var Rr={};return Er.forEach(function(Nr){if(Nr.raw!=null){var Dr=xr(Tr,Nr.raw);Dr!=null&&(Rr[Nr.dataKey]=Dr)}}),Object.keys(Rr).length>0?Rr:null}function xr(Er,Tr){if(Er==="head"){if(typeof Tr=="object")return Tr.header||Tr.title||null;if(typeof Tr=="string"||typeof Tr=="number")return Tr}else if(Er==="foot"&&typeof Tr=="object")return Tr.footer;return null}function vr(Er){return Er.map(function(Tr,Rr){var Nr,Dr,Ir;return typeof Tr=="object"?Ir=(Dr=(Nr=Tr.dataKey)!==null&&Nr!==void 0?Nr:Tr.key)!==null&&Dr!==void 0?Dr:Rr:Ir=Rr,new hr.Column(Ir,Tr,Rr)})}function _r(Er,Tr,Rr,Nr,Dr,Ir,Or){var jr=(0,fr.getTheme)(Nr),Lr;Er==="head"?Lr=Dr.headStyles:Er==="body"?Lr=Dr.bodyStyles:Er==="foot"&&(Lr=Dr.footStyles);var Cr=(0,gr.assign)({},jr.table,jr[Er],Dr.styles,Lr),wr=Dr.columnStyles[Tr.dataKey]||Dr.columnStyles[Tr.index]||{},Pr=Er==="body"?wr:{},Ar=Er==="body"&&Rr%2===0?(0,gr.assign)({},jr.alternateRow,Dr.alternateRowStyles):{},Sr=(0,fr.defaultStyles)(Ir),Mr=(0,gr.assign)({},Sr,Cr,Ar,Pr);return(0,gr.assign)(Mr,Or)}},664:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.addPage=lr.drawTable=void 0;var ur=or(420),hr=or(260),dr=or(744),fr=or(356),gr=or(136),br=or(224);function pr(wr,Pr){var Ar=Pr.settings,Sr=Ar.startY,Mr=Ar.margin,qr={x:Mr.left,y:Sr},$r=Pr.getHeadHeight(Pr.columns)+Pr.getFootHeight(Pr.columns),Br=Sr+Mr.bottom+$r;if(Ar.pageBreak==="avoid"){var zr=Pr.body,Gr=zr.reduce(function(Ur,Fr){return Ur+Fr.height},0);Br+=Gr}var Vr=new dr.DocHandler(wr);(Ar.pageBreak==="always"||Ar.startY!=null&&Br>Vr.pageSize().height)&&(Cr(Vr),qr.y=Mr.top),Pr.callWillDrawPageHooks(Vr,qr);var Xr=(0,fr.assign)({},qr);Pr.startPageNumber=Vr.pageNumber(),Ar.horizontalPageBreak?mr(Vr,Pr,Xr,qr):(Vr.applyStyles(Vr.userStyles),(Ar.showHead==="firstPage"||Ar.showHead==="everyPage")&&Pr.head.forEach(function(Ur){return Dr(Vr,Pr,Ur,qr,Pr.columns)}),Vr.applyStyles(Vr.userStyles),Pr.body.forEach(function(Ur,Fr){var Kr=Fr===Pr.body.length-1;Nr(Vr,Pr,Ur,Kr,Xr,qr,Pr.columns)}),Vr.applyStyles(Vr.userStyles),(Ar.showFoot==="lastPage"||Ar.showFoot==="everyPage")&&Pr.foot.forEach(function(Ur){return Dr(Vr,Pr,Ur,qr,Pr.columns)})),(0,ur.addTableBorder)(Vr,Pr,Xr,qr),Pr.callEndPageHooks(Vr,qr),Pr.finalY=qr.y,wr.lastAutoTable=Pr,wr.previousAutoTable=Pr,wr.autoTable&&(wr.autoTable.previous=Pr),Vr.applyStyles(Vr.userStyles)}lr.drawTable=pr;function mr(wr,Pr,Ar,Sr){var Mr=(0,br.calculateAllColumnsCanFitInPage)(wr,Pr),qr=Pr.settings;if(qr.horizontalPageBreakBehaviour==="afterAllRows")Mr.forEach(function(Gr,Vr){wr.applyStyles(wr.userStyles),Vr>0?Lr(wr,Pr,Ar,Sr,Gr.columns,!0):yr(wr,Pr,Sr,Gr.columns),xr(wr,Pr,Ar,Sr,Gr.columns),_r(wr,Pr,Sr,Gr.columns)});else for(var $r=-1,Br=Mr[0],zr=function(){var Gr=$r;if(Br){wr.applyStyles(wr.userStyles);var Vr=Br.columns;$r>=0?Lr(wr,Pr,Ar,Sr,Vr,!0):yr(wr,Pr,Sr,Vr),Gr=vr(wr,Pr,$r+1,Sr,Vr),_r(wr,Pr,Sr,Vr)}var Xr=Gr-$r;Mr.slice(1).forEach(function(Ur){wr.applyStyles(wr.userStyles),Lr(wr,Pr,Ar,Sr,Ur.columns,!0),vr(wr,Pr,$r+1,Sr,Ur.columns,Xr),_r(wr,Pr,Sr,Ur.columns)}),$r=Gr};$r<Pr.body.length-1;)zr()}function yr(wr,Pr,Ar,Sr){var Mr=Pr.settings;wr.applyStyles(wr.userStyles),(Mr.showHead==="firstPage"||Mr.showHead==="everyPage")&&Pr.head.forEach(function(qr){return Dr(wr,Pr,qr,Ar,Sr)})}function xr(wr,Pr,Ar,Sr,Mr){wr.applyStyles(wr.userStyles),Pr.body.forEach(function(qr,$r){var Br=$r===Pr.body.length-1;Nr(wr,Pr,qr,Br,Ar,Sr,Mr)})}function vr(wr,Pr,Ar,Sr,Mr,qr){wr.applyStyles(wr.userStyles),qr=qr??Pr.body.length;var $r=Math.min(Ar+qr,Pr.body.length),Br=-1;return Pr.body.slice(Ar,$r).forEach(function(zr,Gr){var Vr=Ar+Gr===Pr.body.length-1,Xr=jr(wr,Pr,Vr,Sr);zr.canEntireRowFit(Xr,Mr)&&(Dr(wr,Pr,zr,Sr,Mr),Br=Ar+Gr)}),Br}function _r(wr,Pr,Ar,Sr){var Mr=Pr.settings;wr.applyStyles(wr.userStyles),(Mr.showFoot==="lastPage"||Mr.showFoot==="everyPage")&&Pr.foot.forEach(function(qr){return Dr(wr,Pr,qr,Ar,Sr)})}function Er(wr,Pr,Ar){var Sr=Ar.getLineHeight(wr.styles.fontSize),Mr=wr.padding("vertical"),qr=Math.floor((Pr-Mr)/Sr);return Math.max(0,qr)}function Tr(wr,Pr,Ar,Sr){var Mr={};wr.spansMultiplePages=!0,wr.height=0;for(var qr=0,$r=0,Br=Ar.columns;$r<Br.length;$r++){var zr=Br[$r],Gr=wr.cells[zr.index];if(Gr){Array.isArray(Gr.text)||(Gr.text=[Gr.text]);var Vr=new hr.Cell(Gr.raw,Gr.styles,Gr.section);Vr=(0,fr.assign)(Vr,Gr),Vr.text=[];var Xr=Er(Gr,Pr,Sr);Gr.text.length>Xr&&(Vr.text=Gr.text.splice(Xr,Gr.text.length));var Ur=Sr.scaleFactor(),Fr=Sr.getLineHeightFactor();Gr.contentHeight=Gr.getContentHeight(Ur,Fr),Gr.contentHeight>=Pr&&(Gr.contentHeight=Pr,Vr.styles.minCellHeight-=Pr),Gr.contentHeight>wr.height&&(wr.height=Gr.contentHeight),Vr.contentHeight=Vr.getContentHeight(Ur,Fr),Vr.contentHeight>qr&&(qr=Vr.contentHeight),Mr[zr.index]=Vr}}var Kr=new hr.Row(wr.raw,-1,wr.section,Mr,!0);Kr.height=qr;for(var Zr=0,Jr=Ar.columns;Zr<Jr.length;Zr++){var zr=Jr[Zr],Vr=Kr.cells[zr.index];Vr&&(Vr.height=Kr.height);var Gr=wr.cells[zr.index];Gr&&(Gr.height=wr.height)}return Kr}function Rr(wr,Pr,Ar,Sr){var Mr=wr.pageSize().height,qr=Sr.settings.margin,$r=qr.top+qr.bottom,Br=Mr-$r;Pr.section==="body"&&(Br-=Sr.getHeadHeight(Sr.columns)+Sr.getFootHeight(Sr.columns));var zr=Pr.getMinimumRowHeight(Sr.columns,wr),Gr=zr<Ar;if(zr>Br)return console.error("Will not be able to print row ".concat(Pr.index," correctly since it's minimum height is larger than page height")),!0;if(!Gr)return!1;var Vr=Pr.hasRowSpan(Sr.columns),Xr=Pr.getMaxCellHeight(Sr.columns)>Br;return Xr?(Vr&&console.error("The content of row ".concat(Pr.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Vr||Sr.settings.rowPageBreak==="avoid")}function Nr(wr,Pr,Ar,Sr,Mr,qr,$r){var Br=jr(wr,Pr,Sr,qr);if(Ar.canEntireRowFit(Br,$r))Dr(wr,Pr,Ar,qr,$r);else if(Rr(wr,Ar,Br,Pr)){var zr=Tr(Ar,Br,Pr,wr);Dr(wr,Pr,Ar,qr,$r),Lr(wr,Pr,Mr,qr,$r),Nr(wr,Pr,zr,Sr,Mr,qr,$r)}else Lr(wr,Pr,Mr,qr,$r),Nr(wr,Pr,Ar,Sr,Mr,qr,$r)}function Dr(wr,Pr,Ar,Sr,Mr){Sr.x=Pr.settings.margin.left;for(var qr=0,$r=Mr;qr<$r.length;qr++){var Br=$r[qr],zr=Ar.cells[Br.index];if(!zr){Sr.x+=Br.width;continue}wr.applyStyles(zr.styles),zr.x=Sr.x,zr.y=Sr.y;var Gr=Pr.callCellHooks(wr,Pr.hooks.willDrawCell,zr,Ar,Br,Sr);if(Gr===!1){Sr.x+=Br.width;continue}Ir(wr,zr,Sr);var Vr=zr.getTextPos();(0,gr.default)(zr.text,Vr.x,Vr.y,{halign:zr.styles.halign,valign:zr.styles.valign,maxWidth:Math.ceil(zr.width-zr.padding("left")-zr.padding("right"))},wr.getDocument()),Pr.callCellHooks(wr,Pr.hooks.didDrawCell,zr,Ar,Br,Sr),Sr.x+=Br.width}Sr.y+=Ar.height}function Ir(wr,Pr,Ar){var Sr=Pr.styles;if(wr.getDocument().setFillColor(wr.getDocument().getFillColor()),typeof Sr.lineWidth=="number"){var Mr=(0,ur.getFillStyle)(Sr.lineWidth,Sr.fillColor);Mr&&wr.rect(Pr.x,Ar.y,Pr.width,Pr.height,Mr)}else typeof Sr.lineWidth=="object"&&(Sr.fillColor&&wr.rect(Pr.x,Ar.y,Pr.width,Pr.height,"F"),Or(wr,Pr,Ar,Sr.lineWidth))}function Or(wr,Pr,Ar,Sr){var Mr,qr,$r,Br;Sr.top&&(Mr=Ar.x,qr=Ar.y,$r=Ar.x+Pr.width,Br=Ar.y,Sr.right&&($r+=.5*Sr.right),Sr.left&&(Mr-=.5*Sr.left),zr(Sr.top,Mr,qr,$r,Br)),Sr.bottom&&(Mr=Ar.x,qr=Ar.y+Pr.height,$r=Ar.x+Pr.width,Br=Ar.y+Pr.height,Sr.right&&($r+=.5*Sr.right),Sr.left&&(Mr-=.5*Sr.left),zr(Sr.bottom,Mr,qr,$r,Br)),Sr.left&&(Mr=Ar.x,qr=Ar.y,$r=Ar.x,Br=Ar.y+Pr.height,Sr.top&&(qr-=.5*Sr.top),Sr.bottom&&(Br+=.5*Sr.bottom),zr(Sr.left,Mr,qr,$r,Br)),Sr.right&&(Mr=Ar.x+Pr.width,qr=Ar.y,$r=Ar.x+Pr.width,Br=Ar.y+Pr.height,Sr.top&&(qr-=.5*Sr.top),Sr.bottom&&(Br+=.5*Sr.bottom),zr(Sr.right,Mr,qr,$r,Br));function zr(Gr,Vr,Xr,Ur,Fr){wr.getDocument().setLineWidth(Gr),wr.getDocument().line(Vr,Xr,Ur,Fr,"S")}}function jr(wr,Pr,Ar,Sr){var Mr=Pr.settings.margin.bottom,qr=Pr.settings.showFoot;return(qr==="everyPage"||qr==="lastPage"&&Ar)&&(Mr+=Pr.getFootHeight(Pr.columns)),wr.pageSize().height-Sr.y-Mr}function Lr(wr,Pr,Ar,Sr,Mr,qr){Mr===void 0&&(Mr=[]),qr===void 0&&(qr=!1),wr.applyStyles(wr.userStyles),Pr.settings.showFoot==="everyPage"&&!qr&&Pr.foot.forEach(function(Br){return Dr(wr,Pr,Br,Sr,Mr)}),Pr.callEndPageHooks(wr,Sr);var $r=Pr.settings.margin;(0,ur.addTableBorder)(wr,Pr,Ar,Sr),Cr(wr),Pr.pageNumber++,Pr.pageCount++,Sr.x=$r.left,Sr.y=$r.top,Ar.y=$r.top,Pr.callWillDrawPageHooks(wr,Sr),Pr.settings.showHead==="everyPage"&&(Pr.head.forEach(function(Br){return Dr(wr,Pr,Br,Sr,Mr)}),wr.applyStyles(wr.userStyles))}lr.addPage=Lr;function Cr(wr){var Pr=wr.pageNumber();wr.setPage(Pr+1);var Ar=wr.pageNumber();return Ar===Pr?(wr.addPage(),!0):!1}},224:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.calculateAllColumnsCanFitInPage=void 0;var ur=or(420);function hr(fr,gr,br){var pr;br===void 0&&(br={});var mr=(0,ur.getPageAvailableWidth)(fr,gr),yr=new Map,xr=[],vr=[],_r=[];gr.settings.horizontalPageBreakRepeat,Array.isArray(gr.settings.horizontalPageBreakRepeat)?_r=gr.settings.horizontalPageBreakRepeat:(typeof gr.settings.horizontalPageBreakRepeat=="string"||typeof gr.settings.horizontalPageBreakRepeat=="number")&&(_r=[gr.settings.horizontalPageBreakRepeat]),_r.forEach(function(Nr){var Dr=gr.columns.find(function(Ir){return Ir.dataKey===Nr||Ir.index===Nr});Dr&&!yr.has(Dr.index)&&(yr.set(Dr.index,!0),xr.push(Dr.index),vr.push(gr.columns[Dr.index]),mr-=Dr.wrappedWidth)});for(var Er=!0,Tr=(pr=br==null?void 0:br.start)!==null&&pr!==void 0?pr:0;Tr<gr.columns.length;){if(yr.has(Tr)){Tr++;continue}var Rr=gr.columns[Tr].wrappedWidth;if(Er||mr>=Rr)Er=!1,xr.push(Tr),vr.push(gr.columns[Tr]),mr-=Rr;else break;Tr++}return{colIndexes:xr,columns:vr,lastIndex:Tr-1}}function dr(fr,gr){for(var br=[],pr=0;pr<gr.columns.length;pr++){var mr=hr(fr,gr,{start:pr});mr.columns.length&&(br.push(mr),pr=mr.lastIndex)}return br}lr.calculateAllColumnsCanFitInPage=dr},324:function(cr,lr,or){Object.defineProperty(lr,"__esModule",{value:!0}),lr.ellipsize=lr.resizeColumns=lr.calculateWidths=void 0;var ur=or(420);function hr(xr,vr){dr(xr,vr);var _r=[],Er=0;vr.columns.forEach(function(Rr){var Nr=Rr.getMaxCustomCellWidth(vr);Nr?Rr.width=Nr:(Rr.width=Rr.wrappedWidth,_r.push(Rr)),Er+=Rr.width});var Tr=vr.getWidth(xr.pageSize().width)-Er;Tr&&(Tr=fr(_r,Tr,function(Rr){return Math.max(Rr.minReadableWidth,Rr.minWidth)})),Tr&&(Tr=fr(_r,Tr,function(Rr){return Rr.minWidth})),Tr=Math.abs(Tr),!vr.settings.horizontalPageBreak&&Tr>.1/xr.scaleFactor()&&(Tr=Tr<1?Tr:Math.round(Tr),console.warn("Of the table content, ".concat(Tr," units width could not fit page"))),br(vr),pr(vr,xr),gr(vr)}lr.calculateWidths=hr;function dr(xr,vr){var _r=xr.scaleFactor(),Er=vr.settings.horizontalPageBreak,Tr=(0,ur.getPageAvailableWidth)(xr,vr);vr.allRows().forEach(function(Rr){for(var Nr=0,Dr=vr.columns;Nr<Dr.length;Nr++){var Ir=Dr[Nr],Or=Rr.cells[Ir.index];if(Or){var jr=vr.hooks.didParseCell;vr.callCellHooks(xr,jr,Or,Rr,Ir,null);var Lr=Or.padding("horizontal");Or.contentWidth=(0,ur.getStringWidth)(Or.text,Or.styles,xr)+Lr;var Cr=(0,ur.getStringWidth)(Or.text.join(" ").split(/[^\S\u00A0]+/),Or.styles,xr);if(Or.minReadableWidth=Cr+Or.padding("horizontal"),typeof Or.styles.cellWidth=="number")Or.minWidth=Or.styles.cellWidth,Or.wrappedWidth=Or.styles.cellWidth;else if(Or.styles.cellWidth==="wrap"||Er===!0)Or.contentWidth>Tr?(Or.minWidth=Tr,Or.wrappedWidth=Tr):(Or.minWidth=Or.contentWidth,Or.wrappedWidth=Or.contentWidth);else{var wr=10/_r;Or.minWidth=Or.styles.minCellWidth||wr,Or.wrappedWidth=Or.contentWidth,Or.minWidth>Or.wrappedWidth&&(Or.wrappedWidth=Or.minWidth)}}}}),vr.allRows().forEach(function(Rr){for(var Nr=0,Dr=vr.columns;Nr<Dr.length;Nr++){var Ir=Dr[Nr],Or=Rr.cells[Ir.index];if(Or&&Or.colSpan===1)Ir.wrappedWidth=Math.max(Ir.wrappedWidth,Or.wrappedWidth),Ir.minWidth=Math.max(Ir.minWidth,Or.minWidth),Ir.minReadableWidth=Math.max(Ir.minReadableWidth,Or.minReadableWidth);else{var jr=vr.styles.columnStyles[Ir.dataKey]||vr.styles.columnStyles[Ir.index]||{},Lr=jr.cellWidth||jr.minCellWidth;Lr&&typeof Lr=="number"&&(Ir.minWidth=Lr,Ir.wrappedWidth=Lr)}Or&&(Or.colSpan>1&&!Ir.minWidth&&(Ir.minWidth=Or.minWidth),Or.colSpan>1&&!Ir.wrappedWidth&&(Ir.wrappedWidth=Or.minWidth))}})}function fr(xr,vr,_r){for(var Er=vr,Tr=xr.reduce(function(wr,Pr){return wr+Pr.wrappedWidth},0),Rr=0;Rr<xr.length;Rr++){var Nr=xr[Rr],Dr=Nr.wrappedWidth/Tr,Ir=Er*Dr,Or=Nr.width+Ir,jr=_r(Nr),Lr=Or<jr?jr:Or;vr-=Lr-Nr.width,Nr.width=Lr}if(vr=Math.round(vr*1e10)/1e10,vr){var Cr=xr.filter(function(wr){return vr<0?wr.width>_r(wr):!0});Cr.length&&(vr=fr(Cr,vr,_r))}return vr}lr.resizeColumns=fr;function gr(xr){for(var vr={},_r=1,Er=xr.allRows(),Tr=0;Tr<Er.length;Tr++)for(var Rr=Er[Tr],Nr=0,Dr=xr.columns;Nr<Dr.length;Nr++){var Ir=Dr[Nr],Or=vr[Ir.index];if(_r>1)_r--,delete Rr.cells[Ir.index];else if(Or)Or.cell.height+=Rr.height,_r=Or.cell.colSpan,delete Rr.cells[Ir.index],Or.left--,Or.left<=1&&delete vr[Ir.index];else{var jr=Rr.cells[Ir.index];if(!jr)continue;if(jr.height=Rr.height,jr.rowSpan>1){var Lr=Er.length-Tr,Cr=jr.rowSpan>Lr?Lr:jr.rowSpan;vr[Ir.index]={cell:jr,left:Cr,row:Rr}}}}}function br(xr){for(var vr=xr.allRows(),_r=0;_r<vr.length;_r++)for(var Er=vr[_r],Tr=null,Rr=0,Nr=0,Dr=0;Dr<xr.columns.length;Dr++){var Ir=xr.columns[Dr];if(Nr-=1,Nr>1&&xr.columns[Dr+1])Rr+=Ir.width,delete Er.cells[Ir.index];else if(Tr){var Or=Tr;delete Er.cells[Ir.index],Tr=null,Or.width=Ir.width+Rr}else{var Or=Er.cells[Ir.index];if(!Or)continue;if(Nr=Or.colSpan,Rr=0,Or.colSpan>1){Tr=Or,Rr+=Ir.width;continue}Or.width=Ir.width+Rr}}}function pr(xr,vr){for(var _r={count:0,height:0},Er=0,Tr=xr.allRows();Er<Tr.length;Er++){for(var Rr=Tr[Er],Nr=0,Dr=xr.columns;Nr<Dr.length;Nr++){var Ir=Dr[Nr],Or=Rr.cells[Ir.index];if(Or){vr.applyStyles(Or.styles,!0);var jr=Or.width-Or.padding("horizontal");if(Or.styles.overflow==="linebreak")Or.text=vr.splitTextToSize(Or.text,jr+1/vr.scaleFactor(),{fontSize:Or.styles.fontSize});else if(Or.styles.overflow==="ellipsize")Or.text=mr(Or.text,jr,Or.styles,vr,"...");else if(Or.styles.overflow==="hidden")Or.text=mr(Or.text,jr,Or.styles,vr,"");else if(typeof Or.styles.overflow=="function"){var Lr=Or.styles.overflow(Or.text,jr);typeof Lr=="string"?Or.text=[Lr]:Or.text=Lr}Or.contentHeight=Or.getContentHeight(vr.scaleFactor(),vr.getLineHeightFactor());var Cr=Or.contentHeight/Or.rowSpan;Or.rowSpan>1&&_r.count*_r.height<Cr*Or.rowSpan?_r={height:Cr,count:Or.rowSpan}:_r&&_r.count>0&&_r.height>Cr&&(Cr=_r.height),Cr>Rr.height&&(Rr.height=Cr)}}_r.count--}}function mr(xr,vr,_r,Er,Tr){return xr.map(function(Rr){return yr(Rr,vr,_r,Er,Tr)})}lr.ellipsize=mr;function yr(xr,vr,_r,Er,Tr){var Rr=1e4*Er.scaleFactor();if(vr=Math.ceil(vr*Rr)/Rr,vr>=(0,ur.getStringWidth)(xr,_r,Er))return xr;for(;vr<(0,ur.getStringWidth)(xr+Tr,_r,Er)&&!(xr.length<=1);)xr=xr.substring(0,xr.length-1);return xr.trim()+Tr}},964:function(cr){if(typeof rr>"u"){var lr=new Error("Cannot find module 'undefined'");throw lr.code="MODULE_NOT_FOUND",lr}cr.exports=rr}},ir={};function sr(cr){var lr=ir[cr];if(lr!==void 0)return lr.exports;var or=ir[cr]={exports:{}};return nr[cr].call(or.exports,or,or.exports,sr),or.exports}var ar={};return function(){var cr=ar;Object.defineProperty(cr,"__esModule",{value:!0}),cr.Cell=cr.Column=cr.Row=cr.Table=cr.CellHookData=cr.__drawTable=cr.__createTable=cr.applyPlugin=void 0;var lr=sr(340),or=sr(776),ur=sr(664),hr=sr(972),dr=sr(260);Object.defineProperty(cr,"Table",{enumerable:!0,get:function(){return dr.Table}});var fr=sr(172);Object.defineProperty(cr,"CellHookData",{enumerable:!0,get:function(){return fr.CellHookData}});var gr=sr(260);Object.defineProperty(cr,"Cell",{enumerable:!0,get:function(){return gr.Cell}}),Object.defineProperty(cr,"Column",{enumerable:!0,get:function(){return gr.Column}}),Object.defineProperty(cr,"Row",{enumerable:!0,get:function(){return gr.Row}});function br(vr){(0,lr.default)(vr)}cr.applyPlugin=br;function pr(vr,_r){var Er=(0,or.parseInput)(vr,_r),Tr=(0,hr.createTable)(vr,Er);(0,ur.drawTable)(vr,Tr)}function mr(vr,_r){var Er=(0,or.parseInput)(vr,_r);return(0,hr.createTable)(vr,Er)}cr.__createTable=mr;function yr(vr,_r){(0,ur.drawTable)(vr,_r)}cr.__drawTable=yr;try{var xr=sr(964);xr.jsPDF&&(xr=xr.jsPDF),br(xr)}catch{}cr.default=pr}(),ar}()})})(jspdf_plugin_autotable);var jspdf_plugin_autotableExports=jspdf_plugin_autotable.exports;const autoTable=getDefaultExportFromCjs(jspdf_plugin_autotableExports),plantAssetsColumnHeader={tipo:"Tipo",equipo:"Mquina/Cinta",area:"rea",subarea:"Subrea",codigoSAP:"SAP",marca:"Marca",relacionReduccion:"i",marcadores:"Marcadores"};async function exportPlantAssetsToExcel(tr,er){const{filename:rr="motores_bombas",columns:nr,getMarkersLabel:ir}=er,sr=new ExcelJS.Workbook;sr.creator="Baader 200 App",sr.created=new Date;const ar=sr.addWorksheet("Motores/Bombas");ar.columns=nr.map(ur=>({header:plantAssetsColumnHeader[ur],key:ur,width:ur==="marcadores"?45:ur==="subarea"?26:ur==="area"||ur==="equipo"?22:16}));const cr=ar.getRow(1);cr.font={bold:!0,color:{argb:"FFFFFFFF"}},cr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primary}},cr.alignment={vertical:"middle",horizontal:"center"},cr.height=18,tr.forEach((ur,hr)=>{const dr={};for(const gr of nr)switch(gr){case"tipo":dr[gr]=(ur.tipo||"").toUpperCase();break;case"marcadores":dr[gr]=ir?ir(ur):"";break;default:dr[gr]=ur[gr]??"";break}const fr=ar.addRow(dr);hr%2===1&&(fr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),ar.autoFilter={from:{row:1,column:1},to:{row:Math.max(1,tr.length+1),column:Math.max(1,nr.length)}},ar.eachRow(ur=>{ur.eachCell(hr=>{hr.border={top:{style:"thin",color:{argb:"FFE5E7EB"}},left:{style:"thin",color:{argb:"FFE5E7EB"}},bottom:{style:"thin",color:{argb:"FFE5E7EB"}},right:{style:"thin",color:{argb:"FFE5E7EB"}}}})});const lr=await sr.xlsx.writeBuffer(),or=new Blob([lr],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});try{FileSaver_minExports.saveAs(or,`${rr}.xlsx`)}catch{const ur=URL.createObjectURL(or),hr=document.createElement("a");hr.href=ur,hr.download=`${rr}.xlsx`,hr.rel="noopener",document.body.appendChild(hr),hr.click(),hr.remove(),setTimeout(()=>URL.revokeObjectURL(ur),1e4)}}async function exportPlantAssetsToPDF(tr,er){var pr;const{filename:rr="motores_bombas",columns:nr,getMarkersLabel:ir,getLocationsLabel:sr,includePhotos:ar=!0,includeLocations:cr=!0}=er,lr=new E("l","mm","a4"),or="Motores / Bombas";lr.setFontSize(14),lr.setFont("helvetica","bold"),lr.setTextColor(30,64,175),lr.text(or,14,14),lr.setFontSize(9),lr.setFont("helvetica","normal"),lr.setTextColor(100,100,100),lr.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,14,20);const ur=nr.map(mr=>plantAssetsColumnHeader[mr]);cr&&ur.length,cr&&ur.push("Ubicaciones");const hr=ar?ur.length:-1;ar&&ur.push("Foto");const dr=new Map;if(ar)for(const mr of tr){const yr=(mr.imagenes||[]).slice();if(yr.length===0)continue;yr.sort((vr,_r)=>!!vr.esPrincipal!=!!_r.esPrincipal?vr.esPrincipal?-1:1:(vr.orden??0)-(_r.orden??0));const xr=((pr=yr[0])==null?void 0:pr.url)||"";xr&&dr.set(mr.id,xr)}const fr=new Map;if(ar&&dr.size>0){const mr=Array.from(dr.entries()),yr=3;for(let xr=0;xr<mr.length;xr+=yr){const vr=mr.slice(xr,xr+yr),_r=await Promise.all(vr.map(async([Er,Tr])=>{const Rr=await imageUrlToBase64WithDimensions(Tr);return{assetId:Er,data:Rr}}));for(const Er of _r)Er.data&&fr.set(Er.assetId,Er.data)}}const gr=[ur],br=tr.map(mr=>{const yr=nr.map(xr=>{switch(xr){case"tipo":return(mr.tipo||"").toUpperCase();case"marcadores":return ir?ir(mr):"";default:return String(mr[xr]??"")}});if(cr){const xr=sr?sr(mr):ir?ir(mr):"";yr.push(xr)}return ar&&yr.push(""),yr});autoTable(lr,{head:gr,body:br,startY:26,styles:{fontSize:8,cellPadding:2},headStyles:{fillColor:[30,64,175],textColor:[255,255,255]},alternateRowStyles:{fillColor:[243,244,246]},columnStyles:ar&&hr>=0?{[hr]:{cellWidth:28,minCellHeight:18,halign:"center",valign:"middle"}}:void 0,didDrawCell:mr=>{if(!ar||hr<0||mr.section!=="body"||mr.column.index!==hr)return;const yr=tr[mr.row.index];if(!yr)return;const xr=fr.get(yr.id);if(!xr)return;const vr=1,_r=Math.max(1,mr.cell.width-vr*2),Er=Math.max(1,mr.cell.height-vr*2),Tr=xr.width/xr.height;let Rr=_r,Nr=Rr/Tr;Nr>Er&&(Nr=Er,Rr=Nr*Tr);const Dr=mr.cell.x+(mr.cell.width-Rr)/2,Ir=mr.cell.y+(mr.cell.height-Nr)/2;try{lr.addImage(xr.base64,"JPEG",Dr,Ir,Rr,Nr)}catch{}}}),lr.save(`${rr}.pdf`)}function formatNumber(tr){return Number.isInteger(tr)?tr.toLocaleString("es-CL"):tr.toLocaleString("es-CL",{minimumFractionDigits:2,maximumFractionDigits:2})}function getCantidadPorContexto(tr,er,rr){var ir,sr;if(er){const ar=(ir=tr.tags)==null?void 0:ir.find(cr=>isTagAsignado(cr)?cr.nombre===er&&cr.tipo===rr:!1);return ar&&isTagAsignado(ar)?ar.cantidad:0}let nr=0;return(sr=tr.tags)==null||sr.forEach(ar=>{isTagAsignado(ar)&&ar.tipo===rr&&(nr+=ar.cantidad||0)}),nr}function getTotalCantidadesRepuesto(tr){var nr;let er=0,rr=0;return(nr=tr.tags)==null||nr.forEach(ir=>{isTagAsignado(ir)&&(ir.tipo==="solicitud"?er+=ir.cantidad||0:rr+=ir.cantidad||0)}),{solicitud:er,stock:rr}}const COLORS={primary:"FF1E40AF",primaryLight:"FFDBEAFE",success:"FF22C55E",danger:"FFEF4444",dangerLight:"FFFEE2E2",gray:"FF6B7280",grayLight:"FFF3F4F6",white:"FFFFFFFF"};async function exportToExcelInforme(tr,er,rr,nr){const ir=new ExcelJS.Workbook;ir.creator="Baader 200 App",ir.created=new Date;const sr=nr==="solicitud"||!nr,ar=rr?sr?`CANTIDAD (${rr})`:`STOCK (${rr})`:sr?"CANTIDAD SOLICITADA":"STOCK BODEGA",cr=rr?rr.substring(0,31):sr?"Cantidad Solicitada":"Stock Bodega",lr=ir.addWorksheet(cr);lr.columns=[{header:"CODIGO SAP",key:"codigoSAP",width:14},{header:"TEXTO BREVE",key:"textoBreve",width:50},{header:"COD. BAADER",key:"codBaader",width:16},{header:ar,key:"cantidad",width:18},{header:"VALOR UN",key:"valorUn",width:14},{header:"TOTAL $",key:"total",width:16}];const or=lr.getRow(1);or.font={bold:!0,color:{argb:"FFFFFFFF"}},or.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF1E40AF"}},or.alignment={vertical:"middle",horizontal:"center"},or.height=22;let ur=0,hr=0;tr.forEach((yr,xr)=>{const vr=rr?getCantidadPorContexto(yr,rr,sr?"solicitud":"stock"):sr?getTotalCantidadesRepuesto(yr).solicitud:getTotalCantidadesRepuesto(yr).stock,_r=yr.valorUnitario*vr;ur+=_r,hr+=vr;const Er=lr.addRow({codigoSAP:yr.codigoSAP,textoBreve:yr.textoBreve,codBaader:yr.codigoBaader,cantidad:vr,valorUn:yr.valorUnitario,total:_r});xr%2===1&&(Er.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFF3F4F6"}}),Er.getCell("valorUn").numFmt='"$"#,##0.00',Er.getCell("total").numFmt='"$"#,##0.00',Er.getCell("codigoSAP").alignment={horizontal:"center"},Er.getCell("codBaader").alignment={horizontal:"center"},Er.getCell("cantidad").alignment={horizontal:"center"},Er.getCell("valorUn").alignment={horizontal:"right"},Er.getCell("total").alignment={horizontal:"right"}});const dr=lr.addRow({codigoSAP:"",textoBreve:"TOTALES",codBaader:"",cantidad:hr,valorUn:"",total:ur});dr.font={bold:!0},dr.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFDBEAFE"}},dr.getCell("total").numFmt='"$"#,##0.00',dr.getCell("textoBreve").alignment={horizontal:"right"},dr.getCell("cantidad").alignment={horizontal:"center"},dr.getCell("total").alignment={horizontal:"right"},lr.eachRow(yr=>{yr.eachCell(xr=>{xr.border={top:{style:"thin",color:{argb:"FFE5E7EB"}},left:{style:"thin",color:{argb:"FFE5E7EB"}},bottom:{style:"thin",color:{argb:"FFE5E7EB"}},right:{style:"thin",color:{argb:"FFE5E7EB"}}}})}),lr.autoFilter={from:{row:1,column:1},to:{row:tr.length+1,column:6}};const fr=ir.addWorksheet("Info");fr.columns=[{header:"Campo",key:"campo",width:25},{header:"Valor",key:"valor",width:40}],fr.addRow({campo:"Contexto/Evento",valor:rr||"Todos"}),fr.addRow({campo:"Tipo",valor:sr?"Solicitud":"Stock Bodega"}),fr.addRow({campo:"Total Repuestos",valor:tr.length}),fr.addRow({campo:"Total Cantidad",valor:hr}),fr.addRow({campo:"Total USD",valor:ur}),fr.addRow({campo:"Fecha Exportacin",valor:new Date().toLocaleDateString("es-CL")}),fr.getRow(1).font={bold:!0},fr.getCell("B5").numFmt='"$"#,##0.00';const br=rr?`${er}_${rr.replace(/[^a-zA-Z0-9]/g,"_")}`:`${er}_${sr?"solicitud":"stock"}`,pr=await ir.xlsx.writeBuffer(),mr=new Blob([pr],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});FileSaver_minExports.saveAs(mr,`${br}.xlsx`)}async function exportToExcel(tr,er={formato:"completo"},rr="repuestos_baader_200"){if(er.formato==="simple")return exportToExcelInforme(tr,rr,er.contextTag||null,er.tipoContexto||null);const{incluirResumen:nr=!0,incluirSinStock:ir=!0,incluirPorTags:sr=!0,incluirEstilos:ar=!0,contextTag:cr=null}=er,lr=new ExcelJS.Workbook;lr.creator="Baader 200 App",lr.created=new Date;const or=lr.addWorksheet("Detalle Repuestos",{views:[{state:"frozen",xSplit:0,ySplit:1}]}),ur=[{header:"Cdigo SAP",key:"codigoSAP",width:14},{header:"Nmero Parte Manual",key:"codigoBaader",width:20},{header:"Descripcin SAP",key:"descripcion",width:45},{header:cr?`Cant. Solicitada (${cr})`:"Cantidad Solicitada",key:"cantidadSolicitada",width:22},{header:"Total Solicitado (USD)",key:"totalSolicitadoUSD",width:18},{header:cr?`Stock (${cr})`:"Stock en Bodega",key:"stockBodega",width:20},{header:"Total Stock (USD)",key:"totalStockUSD",width:16},{header:"Valor Unitario (USD)",key:"valorUnitario",width:16},{header:"Total General (USD)",key:"total",width:16}];ur.push({header:"Tags",key:"tags",width:25},{header:"lt. Act. Inventario",key:"ultimaAct",width:16},{header:"Img Manual",key:"imgManual",width:10},{header:"Fotos Reales",key:"fotosReales",width:11}),or.columns=ur;const hr=ur.length;if(ar){const pr=or.getRow(1);pr.font={bold:!0,color:{argb:COLORS.white}},pr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primary}},pr.alignment={vertical:"middle",horizontal:"center"},pr.height=25}tr.forEach((pr,mr)=>{var Nr;const yr=getTotalCantidadesRepuesto(pr),xr=cr?getCantidadPorContexto(pr,cr,"solicitud"):yr.solicitud,vr=cr?getCantidadPorContexto(pr,cr,"stock"):yr.stock,_r=pr.valorUnitario*xr,Er=pr.valorUnitario*vr,Tr={codigoSAP:pr.codigoSAP,codigoBaader:pr.codigoBaader,descripcion:pr.textoBreve,cantidadSolicitada:xr,totalSolicitadoUSD:_r,stockBodega:vr,totalStockUSD:Er,valorUnitario:pr.valorUnitario,total:_r+Er,tags:((Nr=pr.tags)==null?void 0:Nr.length)>0?pr.tags.map(Dr=>getTagNombre(Dr)).join(", "):null,ultimaAct:pr.fechaUltimaActualizacionInventario?new Date(pr.fechaUltimaActualizacionInventario).toLocaleDateString("es-CL"):null,imgManual:pr.imagenesManual.length,fotosReales:pr.fotosReales.length},Rr=or.addRow(Tr);if(ar){mr%2===1&&(Rr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}});const Dr=Rr.getCell("stockBodega");vr===0?(Dr.font={bold:!0,color:{argb:COLORS.danger}},Dr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.dangerLight}}):Dr.font={bold:!0,color:{argb:COLORS.success}}}Rr.getCell("totalSolicitadoUSD").numFmt='"$"#,##0.00',Rr.getCell("totalStockUSD").numFmt='"$"#,##0.00',Rr.getCell("valorUnitario").numFmt='"$"#,##0.00',Rr.getCell("total").numFmt='"$"#,##0.00'});const dr={codigoSAP:null,codigoBaader:null,descripcion:"TOTALES",cantidadSolicitada:{formula:`SUM(D2:D${tr.length+1})`},totalSolicitadoUSD:{formula:`SUM(E2:E${tr.length+1})`},stockBodega:{formula:`SUM(F2:F${tr.length+1})`},totalStockUSD:{formula:`SUM(G2:G${tr.length+1})`},valorUnitario:null,total:{formula:`SUM(I2:I${tr.length+1})`},tags:null,ultimaAct:null,imgManual:{formula:`SUM(L2:L${tr.length+1})`},fotosReales:{formula:`SUM(M2:M${tr.length+1})`}},fr=or.addRow(dr);if(ar&&(fr.font={bold:!0},fr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}}),fr.getCell("totalSolicitadoUSD").numFmt='"$"#,##0.00',fr.getCell("totalStockUSD").numFmt='"$"#,##0.00',fr.getCell("total").numFmt='"$"#,##0.00',or.autoFilter={from:{row:1,column:1},to:{row:tr.length+1,column:hr}},ar&&or.eachRow(pr=>{pr.eachCell(mr=>{mr.border={top:{style:"thin",color:{argb:"FFE5E7EB"}},left:{style:"thin",color:{argb:"FFE5E7EB"}},bottom:{style:"thin",color:{argb:"FFE5E7EB"}},right:{style:"thin",color:{argb:"FFE5E7EB"}}}})}),nr){const pr=lr.addWorksheet(" Dashboard"),mr=tr.length,yr=tr.reduce((an,dn)=>{const en=cr?getCantidadPorContexto(dn,cr,"solicitud"):getTotalCantidadesRepuesto(dn).solicitud;return an+en},0),xr=tr.reduce((an,dn)=>{const en=cr?getCantidadPorContexto(dn,cr,"stock"):getTotalCantidadesRepuesto(dn).stock;return an+en},0),vr=tr.reduce((an,dn)=>{const en=getTotalCantidadesRepuesto(dn),rn=cr?getCantidadPorContexto(dn,cr,"solicitud"):en.solicitud,sn=cr?getCantidadPorContexto(dn,cr,"stock"):en.stock;return an+dn.valorUnitario*rn+dn.valorUnitario*sn},0),_r=tr.filter(an=>(cr?getCantidadPorContexto(an,cr,"stock"):getTotalCantidadesRepuesto(an).stock)>0).length,Er=tr.filter(an=>(cr?getCantidadPorContexto(an,cr,"stock"):getTotalCantidadesRepuesto(an).stock)===0).length,Tr=tr.filter(an=>an.imagenesManual.length>0).length,Rr=tr.filter(an=>an.fotosReales.length>0).length,Nr=mr>0?vr/mr:0,Dr=mr>0?xr/mr:0,Ir=mr>0?_r/mr*100:0,Or=mr>0?Er/mr*100:0,jr=new Set;tr.forEach(an=>{var dn;return(dn=an.tags)==null?void 0:dn.forEach(en=>jr.add(getTagNombre(en)))}),pr.getColumn(1).width=3,pr.getColumn(2).width=22,pr.getColumn(3).width=18,pr.getColumn(4).width=3,pr.getColumn(5).width=22,pr.getColumn(6).width=18,pr.getColumn(7).width=3,pr.getColumn(8).width=22,pr.getColumn(9).width=18,pr.mergeCells("B2:I2");const Lr=pr.getCell("B2");Lr.value=cr?` DASHBOARD - ${cr}`:" DASHBOARD - Repuestos Baader 200",Lr.font={bold:!0,size:20,color:{argb:COLORS.primary}},Lr.alignment={horizontal:"center",vertical:"middle"},pr.getRow(2).height=35,pr.mergeCells("B3:I3");const Cr=pr.getCell("B3");Cr.value=`Generado: ${new Date().toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}`,Cr.font={size:11,color:{argb:COLORS.gray}},Cr.alignment={horizontal:"center"};const wr=(an,dn,en,rn,sn)=>{const on=pr.getCell(`${an}5`);on.value=dn,on.font={size:10,color:{argb:COLORS.gray}},on.alignment={horizontal:"center"};const fn=pr.getCell(`${an}6`);rn==="currency"?(fn.value=en,fn.numFmt='"USD "$#,##0.00'):rn==="percent"?(fn.value=en/100,fn.numFmt="0.0%"):rn==="number"?(fn.value=en,fn.numFmt="#,##0"):fn.value=en,fn.font={bold:!0,size:24,color:{argb:sn}},fn.alignment={horizontal:"center",vertical:"middle"},pr.getRow(6).height=40};pr.mergeCells("B5:C5"),pr.mergeCells("B6:C6"),wr("B"," TOTAL REPUESTOS",mr,"number",COLORS.primary),pr.mergeCells("E5:F5"),pr.mergeCells("E6:F6"),wr("E"," VALOR TOTAL",vr,"currency",COLORS.success),pr.mergeCells("H5:I5"),pr.mergeCells("H6:I6"),wr("H"," SIN STOCK",Er,"number",COLORS.danger),pr.mergeCells("B9:C9");const Pr=pr.getCell("B9");Pr.value=" MTRICAS PRINCIPALES",Pr.font={bold:!0,size:12,color:{argb:COLORS.primary}},Pr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}},[["Cant. Solicitada Total",yr,"#,##0"],["Stock Bodega Total",xr,"#,##0"],["Valor Promedio/Item",Nr,'"$"#,##0.00'],["Stock Promedio/Item",Dr,"0.0"],["% Con Stock",Ir/100,"0.0%"],["% Sin Stock",Or/100,"0.0%"]].forEach((an,dn)=>{const en=10+dn;pr.getCell(`B${en}`).value=an[0],pr.getCell(`B${en}`).font={size:10};const rn=pr.getCell(`C${en}`);rn.value=an[1],rn.numFmt=an[2],rn.font={bold:!0},rn.alignment={horizontal:"right"},dn%2===0&&(pr.getCell(`B${en}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),pr.mergeCells("E9:F9");const Sr=pr.getCell("E9");Sr.value=" DOCUMENTACIN",Sr.font={bold:!0,size:12,color:{argb:COLORS.primary}},Sr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}},[["Con Imagen Manual",Tr,mr],["Sin Imagen Manual",mr-Tr,mr],["Con Fotos Reales",Rr,mr],["Sin Fotos Reales",mr-Rr,mr],["Total Imgenes Manual",tr.reduce((an,dn)=>an+dn.imagenesManual.length,0),null],["Total Fotos Reales",tr.reduce((an,dn)=>an+dn.fotosReales.length,0),null]].forEach((an,dn)=>{const en=10+dn;pr.getCell(`E${en}`).value=an[0],pr.getCell(`E${en}`).font={size:10};const rn=pr.getCell(`F${en}`);an[2],rn.value=an[1],rn.numFmt="#,##0",rn.font={bold:!0},rn.alignment={horizontal:"right"},dn%2===0&&(pr.getCell(`E${en}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),pr.mergeCells("H9:I9");const qr=pr.getCell("H9");qr.value=" DISTRIBUCIN POR TAGS",qr.font={bold:!0,size:12,color:{argb:COLORS.primary}},qr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}},Array.from(jr).slice(0,6).map(an=>{const dn=tr.filter(en=>{var rn;return(rn=en.tags)==null?void 0:rn.includes(an)}).length;return[an,dn]}).forEach((an,dn)=>{const en=10+dn;pr.getCell(`H${en}`).value=an[0],pr.getCell(`H${en}`).font={size:10};const rn=pr.getCell(`I${en}`);rn.value=an[1],rn.numFmt="#,##0",rn.font={bold:!0},rn.alignment={horizontal:"right"},dn%2===0&&(pr.getCell(`H${en}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),pr.mergeCells("B18:I18");const Br=pr.getCell("B18");Br.value=" COBERTURA DE STOCK",Br.font={bold:!0,size:12,color:{argb:COLORS.primary}};const zr=50,Gr=Math.round(Ir/100*zr),Vr=zr-Gr,Xr="".repeat(Gr)+"".repeat(Vr);pr.mergeCells("B19:I19");const Ur=pr.getCell("B19");Ur.value=Xr,Ur.font={size:14,color:{argb:Ir>=50?COLORS.success:COLORS.danger}},Ur.alignment={horizontal:"center"},pr.mergeCells("B20:I20");const Fr=pr.getCell("B20");Fr.value=`${_r} con stock (${Ir.toFixed(1)}%) | ${Er} sin stock (${Or.toFixed(1)}%)`,Fr.font={size:10,color:{argb:COLORS.gray}},Fr.alignment={horizontal:"center"},pr.mergeCells("B22:F22");const Kr=pr.getCell("B22");Kr.value=" TOP 5 REPUESTOS MS COSTOSOS",Kr.font={bold:!0,size:12,color:{argb:COLORS.primary}},Kr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}};const Zr=[...tr].sort((an,dn)=>dn.total-an.total).slice(0,5);["#","Cdigo","Descripcin","Cant.","Total USD"].forEach((an,dn)=>{const en=["B","C","D","E","F"],rn=pr.getCell(`${en[dn]}23`);rn.value=an,rn.font={bold:!0,size:9,color:{argb:COLORS.white}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.gray}},rn.alignment={horizontal:"center"}}),Zr.forEach((an,dn)=>{const en=24+dn,rn=getTotalCantidadesRepuesto(an);pr.getCell(`B${en}`).value=dn+1,pr.getCell(`C${en}`).value=an.codigoSAP||an.codigoBaader,pr.getCell(`D${en}`).value=an.textoBreve.substring(0,30)+(an.textoBreve.length>30?"...":""),pr.getCell(`E${en}`).value=rn.solicitud+rn.stock;const sn=pr.getCell(`F${en}`);sn.value=an.total,sn.numFmt='"$"#,##0.00',sn.font={bold:!0,color:{argb:COLORS.success}},dn%2===0&&["B","C","D","E","F"].forEach(on=>{pr.getCell(`${on}${en}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}}})}),pr.mergeCells("H22:I22");const Jr=pr.getCell("H22");Jr.value=" RESUMEN RPIDO",Jr.font={bold:!0,size:12,color:{argb:COLORS.primary}},Jr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primaryLight}};const tn=[["Repuestos Totales",mr],["Valor Total",vr],["Urgentes (sin stock)",Er],["Con documentacin",Tr+Rr],["Tags utilizados",jr.size]];if(["Concepto","Valor"].forEach((an,dn)=>{const en=["H","I"],rn=pr.getCell(`${en[dn]}23`);rn.value=an,rn.font={bold:!0,size:9,color:{argb:COLORS.white}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.gray}},rn.alignment={horizontal:"center"}}),tn.forEach((an,dn)=>{const en=24+dn;pr.getCell(`H${en}`).value=an[0],pr.getCell(`H${en}`).font={size:10};const rn=pr.getCell(`I${en}`);rn.value=an[1],dn===1?rn.numFmt='"$"#,##0.00':rn.numFmt="#,##0",rn.font={bold:!0},rn.alignment={horizontal:"right"},dn%2===0&&(pr.getCell(`H${en}`).fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}},rn.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),ar)for(let an=9;an<=15;an++)["B","C","E","F","H","I"].forEach(dn=>{const en=pr.getCell(`${dn}${an}`);en.border={top:{style:"thin",color:{argb:"FFE5E7EB"}},left:{style:"thin",color:{argb:"FFE5E7EB"}},bottom:{style:"thin",color:{argb:"FFE5E7EB"}},right:{style:"thin",color:{argb:"FFE5E7EB"}}}})}if(ir){const pr=tr.filter(mr=>(cr?getCantidadPorContexto(mr,cr,"stock"):getTotalCantidadesRepuesto(mr).stock)===0);if(pr.length>0){const mr=lr.addWorksheet("Sin Stock",{views:[{state:"frozen",xSplit:0,ySplit:1}]});if(mr.columns=[{header:"Cdigo SAP",key:"codigoSAP",width:14},{header:"Nmero Parte Manual",key:"codigoBaader",width:20},{header:"Descripcin SAP",key:"descripcion",width:45},{header:cr?`Cant. Solicitada (${cr})`:"Cantidad Solicitada",key:"cantidadSolicitada",width:22},{header:"Valor Unitario (USD)",key:"valorUnitario",width:16},{header:"Total General (USD)",key:"total",width:16},{header:"Tags",key:"tags",width:25}],ar){const _r=mr.getRow(1);_r.font={bold:!0,color:{argb:COLORS.white}},_r.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.danger}},_r.alignment={vertical:"middle",horizontal:"center"}}pr.forEach((_r,Er)=>{var Or;const Tr=getTotalCantidadesRepuesto(_r),Rr=cr?getCantidadPorContexto(_r,cr,"solicitud"):Tr.solicitud,Nr=cr?getCantidadPorContexto(_r,cr,"stock"):Tr.stock,Dr=_r.valorUnitario*Rr+_r.valorUnitario*Nr,Ir=mr.addRow({codigoSAP:_r.codigoSAP,codigoBaader:_r.codigoBaader,descripcion:_r.textoBreve,cantidadSolicitada:Rr,valorUnitario:_r.valorUnitario,total:Dr,tags:((Or=_r.tags)==null?void 0:Or.length)>0?_r.tags.map(jr=>getTagNombre(jr)).join(", "):null});Ir.getCell("valorUnitario").numFmt='"$"#,##0.00',Ir.getCell("total").numFmt='"$"#,##0.00',ar&&Er%2===1&&(Ir.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.dangerLight}})});const yr=pr.reduce((_r,Er)=>{const Tr=getTotalCantidadesRepuesto(Er),Rr=cr?getCantidadPorContexto(Er,cr,"solicitud"):Tr.solicitud,Nr=cr?getCantidadPorContexto(Er,cr,"stock"):Tr.stock;return _r+Er.valorUnitario*Rr+Er.valorUnitario*Nr},0),xr=pr.reduce((_r,Er)=>{const Tr=cr?getCantidadPorContexto(Er,cr,"solicitud"):getTotalCantidadesRepuesto(Er).solicitud;return _r+Tr},0),vr=mr.addRow({codigoSAP:null,codigoBaader:null,descripcion:`TOTAL (${pr.length} repuestos)`,cantidadSolicitada:xr,valorUnitario:null,total:yr,tags:null});ar&&(vr.font={bold:!0},vr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.dangerLight}}),vr.getCell("total").numFmt='"$"#,##0.00'}}if(sr){const pr=new Set;if(tr.forEach(mr=>{var yr;return(yr=mr.tags)==null?void 0:yr.forEach(xr=>pr.add(getTagNombre(xr)))}),pr.size>0){const mr=lr.addWorksheet("Por Tags");if(mr.columns=[{header:"Tag",key:"tag",width:25},{header:"Cantidad Repuestos",key:"cantidad",width:18},{header:"Cant. Solicitada",key:"cantSolicitada",width:15},{header:"Stock Total",key:"stockTotal",width:12},{header:"Valor Total (USD)",key:"valorTotal",width:16}],ar){const yr=mr.getRow(1);yr.font={bold:!0,color:{argb:COLORS.white}},yr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.primary}},yr.alignment={vertical:"middle",horizontal:"center"}}Array.from(pr).sort().forEach((yr,xr)=>{const vr=tr.filter(Nr=>{var Dr;return(Dr=Nr.tags)==null?void 0:Dr.some(Ir=>getTagNombre(Ir)===yr)});let _r=0,Er=0,Tr=0;vr.forEach(Nr=>{const Dr=getCantidadPorContexto(Nr,yr,"solicitud"),Ir=getCantidadPorContexto(Nr,yr,"stock");_r+=Dr,Er+=Ir,Tr+=Nr.valorUnitario*Dr+Nr.valorUnitario*Ir});const Rr=mr.addRow({tag:yr,cantidad:vr.length,cantSolicitada:_r,stockTotal:Er,valorTotal:Tr});Rr.getCell("valorTotal").numFmt='"$"#,##0.00',ar&&xr%2===1&&(Rr.fill={type:"pattern",pattern:"solid",fgColor:{argb:COLORS.grayLight}})}),mr.autoFilter={from:{row:1,column:1},to:{row:pr.size+1,column:5}}}}const gr=await lr.xlsx.writeBuffer(),br=new Blob([gr],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});FileSaver_minExports.saveAs(br,`${rr}.xlsx`)}async function exportToPDF(tr,er={},rr){const{includeCharts:nr=!0,filename:ir="repuestos_baader_200",contextTag:sr=null}=er,ar=new E("p","mm","a4"),cr=ar.internal.pageSize.getWidth(),lr=ar.internal.pageSize.getHeight(),or=8,ur=cr-2*or,hr=await preloadImagesWithDimensions(tr);console.log("Imgenes cargadas:",hr.size),ar.setFontSize(16),ar.setFont("helvetica","bold"),ar.setTextColor(30,64,175),ar.text(sr?`Repuestos Baader 200 - ${sr}`:"Repuestos Baader 200",cr/2,20,{align:"center"}),ar.setFontSize(10),ar.setFont("helvetica","normal"),ar.setTextColor(100,100,100),ar.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,cr/2,28,{align:"center"});const dr=tr.reduce((_r,Er)=>{const Tr=sr?getCantidadPorContexto(Er,sr,"solicitud"):getTotalCantidadesRepuesto(Er).solicitud;return _r+Tr},0),fr=tr.reduce((_r,Er)=>{const Tr=sr?getCantidadPorContexto(Er,sr,"stock"):getTotalCantidadesRepuesto(Er).stock;return _r+Tr},0),gr=tr.reduce((_r,Er)=>{const Tr=getTotalCantidadesRepuesto(Er),Rr=sr?getCantidadPorContexto(Er,sr,"solicitud"):Tr.solicitud,Nr=sr?getCantidadPorContexto(Er,sr,"stock"):Tr.stock;return _r+Er.valorUnitario*Rr+Er.valorUnitario*Nr},0),br=tr.filter(_r=>_r.imagenesManual.length>0).length,pr=tr.filter(_r=>_r.fotosReales.length>0).length,mr=tr.filter(_r=>(sr?getCantidadPorContexto(_r,sr,"stock"):getTotalCantidadesRepuesto(_r).stock)>0).length,yr=tr.length-mr;let xr=38;if(nr){const _r=or+5,Er=38,Tr=35,Rr=40;ar.setFontSize(9),ar.setFont("helvetica","bold"),ar.setTextColor(60,60,60),ar.text("Cantidad vs Stock",_r+Tr,Er-3,{align:"center"});const Nr=Math.max(dr,fr,1),Dr=dr/Nr*Rr,Ir=fr/Nr*Rr;ar.setFillColor(59,130,246),ar.roundedRect(_r,Er+Rr-Dr,15,Dr,1,1,"F"),ar.setFontSize(7),ar.setTextColor(59,130,246),ar.text(dr.toString(),_r+7.5,Er+Rr-Dr-2,{align:"center"}),ar.setFillColor(34,197,94),ar.roundedRect(_r+20,Er+Rr-Ir,15,Ir,1,1,"F"),ar.setTextColor(34,197,94),ar.text(fr.toString(),_r+27.5,Er+Rr-Ir-2,{align:"center"}),ar.setFontSize(6),ar.setTextColor(80,80,80),ar.text("Solicitada",_r+7.5,Er+Rr+5,{align:"center"}),ar.text("Stock",_r+27.5,Er+Rr+5,{align:"center"});const Or=cr/2,jr=Er+20,Lr=18;ar.setFontSize(9),ar.setFont("helvetica","bold"),ar.setTextColor(60,60,60),ar.text("Documentacin",Or,Er-3,{align:"center"});const Cr=tr.length;if(Cr>0){const Sr=br-tr.filter(Vr=>Vr.imagenesManual.length>0&&Vr.fotosReales.length>0).length,Mr=pr-tr.filter(Vr=>Vr.imagenesManual.length>0&&Vr.fotosReales.length>0).length,qr=tr.filter(Vr=>Vr.imagenesManual.length>0&&Vr.fotosReales.length>0).length,$r=tr.length-br-Mr;let Br=-Math.PI/2;const zr=[{value:qr,color:[34,197,94],label:"Ambas"},{value:Sr,color:[59,130,246],label:"Manual"},{value:Mr,color:[168,85,247],label:"Real"},{value:Math.max(0,$r),color:[209,213,219],label:"Sin img"}].filter(Vr=>Vr.value>0);zr.forEach(Vr=>{const Xr=Vr.value/Cr*2*Math.PI,Ur=Br+Xr;ar.setFillColor(Vr.color[0],Vr.color[1],Vr.color[2]);const Fr=30,Kr=[[Or,jr]];for(let Jr=0;Jr<=Fr;Jr++){const tn=Br+Xr*Jr/Fr;Kr.push([Or+Math.cos(tn)*Lr,jr+Math.sin(tn)*Lr])}Kr.push([Or,jr]),ar.setDrawColor(255,255,255),ar.setLineWidth(.5);let Zr=`${Kr[0][0]} ${Kr[0][1]} m`;for(let Jr=1;Jr<Kr.length;Jr++)Zr+=` ${Kr[Jr][0]} ${Kr[Jr][1]} l`;for(let Jr=0;Jr<Fr;Jr++){const tn=Br+Xr*Jr/Fr,an=Br+Xr*(Jr+1)/Fr;ar.triangle(Or,jr,Or+Math.cos(tn)*Lr,jr+Math.sin(tn)*Lr,Or+Math.cos(an)*Lr,jr+Math.sin(an)*Lr,"F")}Br=Ur});let Gr=Er+Rr+3;ar.setFontSize(6),zr.forEach((Vr,Xr)=>{const Ur=Or-20+Xr%2*25,Fr=Gr+Math.floor(Xr/2)*6;ar.setFillColor(Vr.color[0],Vr.color[1],Vr.color[2]),ar.rect(Ur,Fr-2,3,3,"F"),ar.setTextColor(80,80,80),ar.text(`${Vr.label}: ${Vr.value}`,Ur+4,Fr,{align:"left"})})}const wr=cr-or-45;ar.setFontSize(9),ar.setFont("helvetica","bold"),ar.setTextColor(60,60,60),ar.text("Disponibilidad",wr+20,Er-3,{align:"center"});const Pr=tr.length>0?mr/tr.length*100:0,Ar=Er+5;ar.setFillColor(229,231,235),ar.roundedRect(wr,Ar,40,8,2,2,"F"),ar.setFillColor(34,197,94),ar.roundedRect(wr,Ar,40*(Pr/100),8,2,2,"F"),ar.setFontSize(7),ar.setFont("helvetica","bold"),ar.setTextColor(255,255,255),Pr>20&&ar.text(`${Math.round(Pr)}%`,wr+20,Ar+5.5,{align:"center"}),ar.setFontSize(6),ar.setTextColor(34,197,94),ar.text(`${mr} con stock`,wr+20,Ar+14,{align:"center"}),ar.setTextColor(239,68,68),ar.text(`${yr} sin stock`,wr+20,Ar+19,{align:"center"}),ar.setFillColor(30,64,175),ar.roundedRect(wr,Ar+26,40,14,2,2,"F"),ar.setFontSize(7),ar.setFont("helvetica","bold"),ar.setTextColor(255,255,255),ar.text("VALOR TOTAL",wr+20,Ar+32,{align:"center"}),ar.setFontSize(8),ar.text(`$${gr.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`,wr+20,Ar+38,{align:"center"}),xr=Er+Rr+20}ar.setFontSize(10),ar.setFont("helvetica","bold"),ar.setTextColor(30,64,175),ar.text("Resumen",cr/2,xr,{align:"center"}),autoTable(ar,{startY:xr+5,head:[["Concepto","Valor"]],body:[["Total Repuestos",tr.length.toString()],["Cant. Solicitada Total",dr.toString()],["Stock Bodega Total",fr.toString()],["Valor Total (USD)",`$${gr.toLocaleString("en-US",{minimumFractionDigits:2})}`],["Con Imgenes Manual",`${br} (${Math.round(br/tr.length*100)}%)`],["Con Fotos Reales",`${pr} (${Math.round(pr/tr.length*100)}%)`]],theme:"striped",headStyles:{fillColor:[30,64,175]},margin:{left:or+30,right:or+30},styles:{fontSize:9}}),ar.addPage(),ar.setFontSize(12),ar.setFont("helvetica","bold"),ar.setTextColor(30,64,175),ar.text("Detalle de Repuestos",cr/2,12,{align:"center"}),ar.setFontSize(8),ar.setFont("helvetica","normal"),ar.setTextColor(100,100,100),ar.text(`${tr.length} repuestos`,cr/2,17,{align:"center"});let vr=22;for(let _r=0;_r<tr.length;_r++){const Er=tr[_r],Tr=[...Er.imagenesManual,...Er.fotosReales],Rr=Tr.length>0,Nr=Rr?42:26;vr+Nr>lr-10&&(ar.addPage(),vr=10);const Dr=Rr?ur*.35:ur,Ir=or+Dr,Or=ur-Dr;ar.setDrawColor(200,200,200),ar.setFillColor(255,255,255),ar.roundedRect(or,vr,ur,Nr,1,1,"FD");const jr=or+2;let Lr=vr+5;ar.setFontSize(9),ar.setFont("helvetica","bold"),ar.setTextColor(30,64,175),ar.text(`N Parte Manual: ${Er.codigoBaader||"-"}`,jr,Lr),Lr+=4,ar.setFontSize(6),ar.setFont("helvetica","bold"),ar.setTextColor(80,80,80),ar.text("Cd. SAP: ",jr,Lr),ar.setFont("helvetica","normal"),ar.text(Er.codigoSAP||"-",jr+ar.getTextWidth("Cd. SAP: "),Lr),Lr+=4,ar.setFontSize(6),ar.setTextColor(50,50,50);const Cr=Dr-4,wr=ar.splitTextToSize(Er.textoBreve||"",Cr);ar.text(wr.slice(0,2),jr,Lr),Lr+=Math.min(wr.length,2)*2.5+2;const Pr=getTotalCantidadesRepuesto(Er),Ar=sr?getCantidadPorContexto(Er,sr,"solicitud"):Pr.solicitud,Sr=sr?getCantidadPorContexto(Er,sr,"stock"):Pr.stock,Mr=Er.valorUnitario*Ar+Er.valorUnitario*Sr;ar.setFontSize(6),ar.setFont("helvetica","bold"),ar.setTextColor(80,80,80),ar.text("Cantidad: ",jr,Lr),ar.setFont("helvetica","normal"),ar.text(`${Ar}`,jr+ar.getTextWidth("Cantidad: "),Lr),Lr+=3,ar.setFont("helvetica","bold"),ar.text("V. Unitario: ",jr,Lr),ar.setFont("helvetica","normal"),ar.text(`$${formatNumber(Er.valorUnitario)}`,jr+ar.getTextWidth("V. Unitario: "),Lr),Lr+=3,ar.setFont("helvetica","bold"),ar.text("Total: ",jr,Lr),ar.setFont("helvetica","normal"),ar.text(`$${formatNumber(Mr)}`,jr+ar.getTextWidth("Total: "),Lr);const qr=jr+28;ar.setFont("helvetica","bold"),ar.text("Stock: ",qr,Lr);const $r=Sr>0?[0,130,0]:[180,0,0];if(ar.setTextColor($r[0],$r[1],$r[2]),ar.setFont("helvetica","bold"),ar.text(`${Sr}`,qr+ar.getTextWidth("Stock: "),Lr),Rr){const zr=Ir+2,Gr=Or-2*2,Vr=Nr-2*2,Xr=vr+2;if(Tr.length===1){const Ur=Math.min(Gr*.85,Vr-4),Fr=hr.get(Tr[0].url),{w:Kr,h:Zr}=calculateFitDimensions(Fr,Ur,Ur),Jr=zr+(Gr-Kr)/2,tn=Xr+(Vr-Zr)/2-1;drawImageWithAspectRatio(ar,hr,Tr[0].url,Jr,tn,Kr,Zr),ar.setFontSize(4),ar.setTextColor(130,130,130),ar.setFont("helvetica","normal");const an=Tr[0].tipo==="manual"?"Manual":"Real";ar.text(an,Jr+Kr/2,tn+Zr+2.5,{align:"center"})}else{const Fr=Math.min((Gr-3)/2-2,Vr-6),Kr=hr.get(Tr[0].url),Zr=Tr[1]?hr.get(Tr[1].url):null,Jr=calculateFitDimensions(Kr,Fr,Fr),tn=Zr?calculateFitDimensions(Zr,Fr,Fr):Jr,an=Jr.w+tn.w+3,dn=zr+(Gr-an)/2,en=Math.max(Jr.h,tn.h),rn=Xr+(Vr-en-4)/2,sn=rn+(en-Jr.h)/2;if(drawImageWithAspectRatio(ar,hr,Tr[0].url,dn,sn,Jr.w,Jr.h),ar.setFontSize(4),ar.setTextColor(130,130,130),ar.setFont("helvetica","normal"),ar.text(Tr[0].tipo==="manual"?"Manual":"Real",dn+Jr.w/2,sn+Jr.h+2.5,{align:"center"}),Tr[1]){const on=dn+Jr.w+3,fn=rn+(en-tn.h)/2;drawImageWithAspectRatio(ar,hr,Tr[1].url,on,fn,tn.w,tn.h),ar.text(Tr[1].tipo==="manual"?"Manual":"Real",on+tn.w/2,fn+tn.h+2.5,{align:"center"})}Tr.length>2&&(ar.setFontSize(5),ar.setTextColor(100,100,100),ar.text(`+${Tr.length-2}`,zr+Gr-5,vr+Nr-2))}}20+Math.round(_r/tr.length*75),vr+=Nr+2}ar.save(`${ir}.pdf`)}function calculateFitDimensions(tr,er,rr){if(!tr)return{w:er,h:rr};const nr=tr.width/tr.height;let ir=er,sr=er/nr;return sr>rr&&(sr=rr,ir=rr*nr),{w:ir,h:sr}}function drawImageWithAspectRatio(tr,er,rr,nr,ir,sr,ar){const cr=er.get(rr);if(cr)try{const lr=cr.base64.includes("image/png")?"PNG":"JPEG";tr.addImage(cr.base64,lr,nr,ir,sr,ar);return}catch(lr){console.error("Error agregando imagen al PDF:",lr)}tr.setFillColor(245,245,245),tr.setDrawColor(220,220,220),tr.roundedRect(nr,ir,sr,ar,1,1,"FD"),tr.setFontSize(5),tr.setTextColor(180,180,180),tr.text("Sin img",nr+sr/2,ir+ar/2+1,{align:"center"})}const hashString=tr=>{let er=2166136261;for(let rr=0;rr<tr.length;rr++)er^=tr.charCodeAt(rr),er=Math.imul(er,16777619);return er>>>0},badgePalettes=[{strong:"bg-blue-500/20 border-blue-500/30 text-blue-200",soft:"bg-blue-500/10 border-blue-500/20 text-blue-200"},{strong:"bg-emerald-500/20 border-emerald-500/30 text-emerald-200",soft:"bg-emerald-500/10 border-emerald-500/20 text-emerald-200"},{strong:"bg-amber-500/20 border-amber-500/30 text-amber-200",soft:"bg-amber-500/10 border-amber-500/20 text-amber-200"},{strong:"bg-purple-500/20 border-purple-500/30 text-purple-200",soft:"bg-purple-500/10 border-purple-500/20 text-purple-200"},{strong:"bg-cyan-500/20 border-cyan-500/30 text-cyan-200",soft:"bg-cyan-500/10 border-cyan-500/20 text-cyan-200"},{strong:"bg-rose-500/20 border-rose-500/30 text-rose-200",soft:"bg-rose-500/10 border-rose-500/20 text-rose-200"}],getBadgePalette=tr=>{const er=(tr||"").trim().toLowerCase();if(er==="tipo:motor")return badgePalettes[0];if(er==="tipo:bomba")return badgePalettes[1];const rr=er?hashString(er)%badgePalettes.length:0;return badgePalettes[rr]};function Badge(tr){const{text:er,tone:rr="strong",className:nr="",paletteKey:ir}=tr,sr=getBadgePalette(ir??er),ar=rr==="strong"?sr.strong:sr.soft;return jsxRuntimeExports.jsx("span",{className:"inline-flex items-center max-w-full px-2 py-0.5 rounded border text-xs font-medium whitespace-nowrap "+ar+" "+nr,title:er,children:jsxRuntimeExports.jsx("span",{className:"truncate",children:er})})}const toText=tr=>tr==null?"":typeof tr=="string"?tr:typeof tr=="number"?String(tr):"",normalize=tr=>tr.trim(),toPendiente=tr=>tr.trim()?tr.trim():"pendiente",inferTipoFromComponente=tr=>tr.toLowerCase().includes("bomba")?"bomba":"motor",isValidComponentRow=tr=>{const er=tr.trim();if(!er)return!1;const rr=er.toLowerCase();return rr.includes("propuesta")||rr==="marca"||rr==="sew"?!1:rr.includes("motor")||rr.includes("bomba")};function PlantAssetsView(tr){const{machineId:er}=tr,{assets:rr,loading:nr,error:ir,upsertMany:sr,addMarker:ar,addReferencia:cr,deleteReferencia:lr,addImagen:or,deleteImagen:ur,updateAsset:hr,createAsset:dr}=usePlantAssets(),{maps:fr,createMap:gr,updateMap:br,deleteMap:pr}=usePlantMaps(),{uploadPlantMapImage:mr,uploadPlantAssetImage:yr,deleteByUrl:xr}=usePlantStorage(er),[vr,_r]=reactExports.useState(null),Er=reactExports.useMemo(()=>rr.find(Un=>Un.id===vr)||null,[rr,vr]),[Tr,Rr]=reactExports.useState(""),Nr=[{key:"tipo",label:"Tipo",defaultEnabled:!0},{key:"equipo",label:"Mquina/Cinta",defaultEnabled:!0,thClassName:"hidden lg:table-cell",tdClassName:"hidden lg:table-cell"},{key:"area",label:"rea",defaultEnabled:!0},{key:"subarea",label:"Subrea",defaultEnabled:!0,thClassName:"hidden lg:table-cell",tdClassName:"hidden lg:table-cell"},{key:"codigoSAP",label:"SAP",defaultEnabled:!0},{key:"marca",label:"Marca",defaultEnabled:!0,thClassName:"hidden xl:table-cell",tdClassName:"hidden xl:table-cell"},{key:"relacionReduccion",label:"i",defaultEnabled:!0,thClassName:"hidden xl:table-cell",tdClassName:"hidden xl:table-cell"},{key:"marcadores",label:"Marcadores",defaultEnabled:!0,thClassName:"w-[320px]",tdClassName:"w-[320px]"}],Dr=reactExports.useMemo(()=>`plant_assets_columns_v1:${er||"global"}`,[er]),Ir=()=>{const Un={};for(const Ts of Nr)Un[Ts.key]=Ts.defaultEnabled;return Un},[Or,jr]=reactExports.useState(()=>{try{const Un=localStorage.getItem(`plant_assets_columns_v1:${er||"global"}`);if(!Un)return Ir();const Ts=JSON.parse(Un);return{...Ir(),...Ts||{}}}catch{return Ir()}});reactExports.useEffect(()=>{try{const Un=localStorage.getItem(Dr);if(!Un){jr(Ir());return}const Ts=JSON.parse(Un);jr({...Ir(),...Ts||{}})}catch{jr(Ir())}},[Dr]),reactExports.useEffect(()=>{try{localStorage.setItem(Dr,JSON.stringify(Or))}catch{}},[Or,Dr]);const Lr=reactExports.useMemo(()=>Nr.filter(Un=>Or[Un.key]),[Nr,Or]),[Cr,wr]=reactExports.useState(!1),[Pr,Ar]=reactExports.useState(!1),[Sr,Mr]=reactExports.useState(!1),[qr,$r]=reactExports.useState(!0),[Br,zr]=reactExports.useState(!0),[Gr,Vr]=reactExports.useState("area"),[Xr,Ur]=reactExports.useState("asc"),Fr=Un=>{if(Gr===Un){Ur(Ts=>Ts==="asc"?"desc":"asc");return}Vr(Un),Ur("asc")},Kr=reactExports.useMemo(()=>{const Un=Tr.trim().toLowerCase();return Un?rr.filter(Ts=>`${Ts.tipo} ${Ts.equipo} ${Ts.area} ${Ts.subarea} ${Ts.codigoSAP} ${Ts.marca} ${Ts.potencia} ${Ts.descripcionSAP}`.toLowerCase().includes(Un)):rr},[rr,Tr]),Zr=reactExports.useMemo(()=>{const Un=Xr==="asc"?1:-1,Ts=Nn=>{const ns=Nn[Gr];return(ns==null?"":String(ns)).toLowerCase()};return Kr.slice().sort((Nn,ns)=>{const Ps=Ts(Nn),Ss=Ts(ns);if(Ps<Ss)return-1*Un;if(Ps>Ss)return 1*Un;const Ks=(Nn.codigoSAP||"").toLowerCase(),Is=(ns.codigoSAP||"").toLowerCase();return Ks<Is?-1:Ks>Is?1:0})},[Kr,Xr,Gr]),[Jr,tn]=reactExports.useState(""),an=reactExports.useMemo(()=>fr.find(Un=>Un.id===Jr)||null,[fr,Jr]),[dn,en]=reactExports.useState(!0),[rn,sn]=reactExports.useState("none"),[on,fn]=reactExports.useState(null),pn=rn!=="none";reactExports.useEffect(()=>{sn("none"),fn(null)},[vr,Jr]);const[gn,Pn]=reactExports.useState(!1),[In,En]=reactExports.useState(!1),[zn,yn]=reactExports.useState(null),[Vn,Kn]=reactExports.useState(!1),[es,Xn]=reactExports.useState(""),[ds,fs]=reactExports.useState(null),[os,Hn]=reactExports.useState(!1),[Ln,Dn]=reactExports.useState(!1),[ls,Ds]=reactExports.useState(!1),[xs,kn]=reactExports.useState(!1),[Jn,is]=reactExports.useState(!1),[bs,Bn]=reactExports.useState(""),[Yn,vn]=reactExports.useState(!1),[_n,Mn]=reactExports.useState(!1),[Cn,Zn]=reactExports.useState(!1),[qn,wn]=reactExports.useState({id:"",tipo:"motor",equipo:"pendiente",area:"pendiente",subarea:"pendiente",componente:"pendiente",codigoSAP:"pendiente",descripcionSAP:"pendiente",marca:"pendiente",modeloTipo:"pendiente",potencia:"pendiente",voltaje:"pendiente",relacionReduccion:"pendiente",corriente:"pendiente",eje:"pendiente",observaciones:"pendiente",referencias:[],imagenes:[],marcadores:[]}),On=Un=>{Zn(!1),wn({id:Un.id,tipo:Un.tipo,equipo:Un.equipo,area:Un.area,subarea:Un.subarea,componente:Un.componente,codigoSAP:Un.codigoSAP,descripcionSAP:Un.descripcionSAP,marca:Un.marca,modeloTipo:Un.modeloTipo,potencia:Un.potencia,voltaje:Un.voltaje,relacionReduccion:Un.relacionReduccion,corriente:Un.corriente,eje:Un.eje,observaciones:Un.observaciones,referencias:Un.referencias||[],imagenes:Un.imagenes||[],marcadores:Un.marcadores||[]}),vn(!0)},Gn=()=>{Zn(!0),wn({id:"",tipo:"motor",equipo:"pendiente",area:"pendiente",subarea:"pendiente",componente:"pendiente",codigoSAP:"pendiente",descripcionSAP:"pendiente",marca:"pendiente",modeloTipo:"pendiente",potencia:"pendiente",voltaje:"pendiente",relacionReduccion:"pendiente",corriente:"pendiente",eje:"pendiente",observaciones:"pendiente",referencias:[],imagenes:[],marcadores:[]}),vn(!0)},Qn=reactExports.useMemo(()=>{const Un=new Map;for(const Ts of fr)Un.set(Ts.id,Ts);return Un},[fr]),$s=Un=>Array.from(new Set((Un.marcadores||[]).map(Nn=>Nn.mapId).filter(Boolean))).map(Nn=>{const ns=Qn.get(Nn);return ns?{id:Nn,nombre:ns.nombre}:{id:Nn,nombre:"Plano eliminado",missing:!0}}),us=Un=>{const Ts=$s(Un);return Ts.length===0?"":Ts.map(Nn=>Nn.missing?`${Nn.nombre}`:Nn.nombre).join(" | ")},ws=Un=>{var ns;const Ts=new Map;for(const Ps of Un.marcadores||[]){if(!Ps.mapId)continue;const Ss=Ts.get(Ps.mapId)||[];Ss.push({x:Ps.x,y:Ps.y}),Ts.set(Ps.mapId,Ss)}const Nn=[];for(const[Ps,Ss]of Ts.entries()){const Ks=((ns=Qn.get(Ps))==null?void 0:ns.nombre)||"Plano eliminado",Is=Ss.map(An=>`(${Math.round(An.x*100)}%,${Math.round(An.y*100)}%)`).join(" ");Nn.push(`${Ks} ${Is}`.trim())}return Nn.join(" | ")},[As,Rs]=reactExports.useState(""),[Ms,Bs]=reactExports.useState(""),Zs=async Un=>{yn(null),En(!0);try{const Ts=await Un.arrayBuffer(),Nn=new ExcelJS.Workbook;await Nn.xlsx.load(Ts);const ns=Nn.worksheets[0];if(!ns)throw new Error("No se encontr hoja en el Excel");const Ss=(ns.getRow(1).values||[]).slice(1).map(Fs=>String(Fs??"").trim()),Ks=Fs=>Ss.findIndex(Cs=>Cs.toLowerCase()===Fs.toLowerCase()),Is=(Fs,Cs)=>{const Ns=Ks(Cs);return Ns<0?"":Fs[Ns+1]},An=(Fs,Cs)=>{for(const Ns of Cs){const Ys=Ks(Ns);if(Ys>=0)return Fs[Ys+1]}return""},Vs=[];for(let Fs=2;Fs<=ns.rowCount;Fs++){const Cs=ns.getRow(Fs).values,Ns=normalize(toText(Is(Cs,"Componente")));if(!isValidComponentRow(Ns))continue;const Ys=normalize(toText(Is(Cs,"rea"))),js=normalize(toText(Is(Cs,"Subrea"))),Js=toPendiente(toText(An(Cs,["Mquina/Cinta","Maquina/Cinta","Mquina","Maquina","Cinta"]))),to=toPendiente(toText(Is(Cs,"Codigo SAP"))),mo=toPendiente(toText(Is(Cs,"Descripcion SAP"))),Eo=toPendiente(toText(Is(Cs,"Marca"))),fo=toPendiente(toText(Is(Cs,"Modelo/Tipo"))),No=toPendiente(toText(Is(Cs,"Potencia"))),Bo=toPendiente(toText(Is(Cs,"Voltaje"))),go=toPendiente(toText(Is(Cs,"Relacion de reduccion Y"))),jo=toPendiente(toText(Is(Cs,"Corriente"))),ro=toPendiente(toText(Is(Cs,"Eje"))),no=toPendiente(toText(Is(Cs,"Observaciones")));Vs.push({tipo:inferTipoFromComponente(Ns),equipo:Js,area:toPendiente(Ys),subarea:toPendiente(js),componente:toPendiente(Ns),codigoSAP:to,descripcionSAP:mo,marca:Eo,modeloTipo:fo,potencia:No,voltaje:Bo,relacionReduccion:go,corriente:jo,eje:ro,observaciones:no,referencias:[],imagenes:[],marcadores:[]})}if(Vs.length===0){yn("No se detectaron filas vlidas (Motor/Bomba) en el Excel.");return}await sr(Vs),Pn(!1)}catch(Ts){yn(Ts instanceof Error?Ts.message:"Error importando Excel")}finally{En(!1)}},Qs=async()=>{if(!es.trim()||!ds||!er)return;Hn(!0);let Un=null;try{Un=await gr({nombre:es.trim(),imageUrl:""});const Ts=await mr(ds,Un);await br(Un,{imageUrl:Ts.url}),tn(Un),Kn(!1),Xn(""),fs(null)}catch(Ts){if(Un)try{await pr(Un)}catch{}throw Ts}finally{Hn(!1)}},eo=async Un=>{if(Er){if(rn==="add"){await ar(Er,{mapId:Un.mapId,x:Un.x,y:Un.y}),sn("none");return}if(rn==="move"){if(!on)return;const Ts=(Er.marcadores||[]).map(Nn=>Nn.id===on?{...Nn,x:Un.x,y:Un.y}:Nn);await hr(Er.id,{marcadores:Ts}),sn("none"),fn(null)}}},ao=async Un=>{if(!Er)return;const{optimizeImage:Ts}=await __vitePreload(async()=>{const{optimizeImage:Ss}=await Promise.resolve().then(()=>imageUtils);return{optimizeImage:Ss}},void 0),Nn=await Ts(Un,.95),ns=await yr(Nn.file,Er.id),Ps=(Er.imagenes||[]).reduce((Ss,Ks)=>Math.max(Ss,Ks.orden),-1)+1;await or(Er,{url:ns.url,descripcion:"",orden:Ps,esPrincipal:Ps===0})};return jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-3/5 lg:w-3/5 border-r border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100",children:"Motores / Bombas"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{size:"sm",icon:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),onClick:Gn,children:"Nuevo"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),onClick:()=>Pn(!0),children:"Importar Excel"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",icon:jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),onClick:()=>wr(!0),children:"Exportar"})]})]}),jsxRuntimeExports.jsx("input",{value:Tr,onChange:Un=>Rr(Un.target.value),placeholder:"Buscar por mquina/cinta, rea, SAP, marca...",className:"mt-3 w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),nr?jsxRuntimeExports.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Cargando..."}):ir?jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start gap-2 text-sm text-red-700 bg-red-50 border border-red-200 m-4 rounded-lg",children:[jsxRuntimeExports.jsx(CircleAlert,{className:"w-5 h-5 mt-0.5"}),jsxRuntimeExports.jsx("div",{children:ir})]}):jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-auto",children:[jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("tr",{className:"text-xs text-gray-600 dark:text-gray-300",children:[Or.tipo&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("tipo"),children:"Tipo"})}),Or.equipo&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 hidden lg:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("equipo"),children:"Mquina/Cinta"})}),Or.area&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("area"),children:"rea"})}),Or.subarea&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 hidden lg:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("subarea"),children:"Subrea"})}),Or.codigoSAP&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("codigoSAP"),children:"SAP"})}),Or.marca&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 hidden xl:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("marca"),children:"Marca"})}),Or.relacionReduccion&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 hidden xl:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"hover:underline",onClick:()=>Fr("relacionReduccion"),children:"i"})}),Or.marcadores&&jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 w-[320px]",children:"Marcadores"}),jsxRuntimeExports.jsx("th",{className:"px-3 py-2"})]})}),jsxRuntimeExports.jsx("tbody",{children:Zr.map(Un=>{const Ts=vr===Un.id,Nn=$s(Un);return jsxRuntimeExports.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 "+(Ts?"bg-primary-50 dark:bg-primary-900/20":""),children:[Or.tipo&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full",onClick:()=>_r(Un.id),children:jsxRuntimeExports.jsx(Badge,{text:Un.tipo.toUpperCase(),tone:"strong",paletteKey:`tipo:${Un.tipo}`})})}),Or.equipo&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 hidden lg:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full truncate",onClick:()=>_r(Un.id),children:Un.equipo})}),Or.area&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full",onClick:()=>_r(Un.id),children:jsxRuntimeExports.jsx(Badge,{text:Un.area,tone:"strong",paletteKey:`area:${Un.area}`,className:"max-w-[220px]"})})}),Or.subarea&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 hidden lg:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full truncate",onClick:()=>_r(Un.id),children:jsxRuntimeExports.jsx(Badge,{text:Un.subarea,tone:"soft",paletteKey:`area:${Un.area}`,className:"max-w-[260px]"})})}),Or.codigoSAP&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full",onClick:()=>_r(Un.id),children:Un.codigoSAP})}),Or.marca&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 hidden xl:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full truncate",onClick:()=>_r(Un.id),children:Un.marca})}),Or.relacionReduccion&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 hidden xl:table-cell",children:jsxRuntimeExports.jsx("button",{type:"button",className:"text-left w-full",onClick:()=>_r(Un.id),children:Un.relacionReduccion||"pendiente"})}),Or.marcadores&&jsxRuntimeExports.jsx("td",{className:"px-3 py-2 w-[320px]",children:Nn.length===0?jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:""}):jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:Nn.map(ns=>jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-0.5 rounded border text-xs "+(ns.missing?"border-gray-200 dark:border-gray-700 text-gray-500":"border-primary-200 dark:border-primary-700 text-primary-700 dark:text-primary-300 hover:bg-primary-50 dark:hover:bg-primary-900/20"),onClick:()=>{_r(Un.id),ns.missing||(tn(ns.id),en(!1),sn("none"),fn(null))},title:ns.missing?"Plano eliminado":"Abrir plano y ver ubicacin",disabled:ns.missing,children:ns.nombre},ns.id))})}),jsxRuntimeExports.jsx("td",{className:"px-3 py-2 text-right",children:jsxRuntimeExports.jsx("button",{type:"button",className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-300",onClick:()=>On(Un),title:"Editar",children:jsxRuntimeExports.jsx(Pencil,{className:"w-4 h-4"})})})]},Un.id)})})]}),Zr.length===0&&jsxRuntimeExports.jsx("div",{className:"p-6 text-sm text-gray-500",children:"Sin resultados."})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Ubicacin (planos)"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",icon:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),onClick:()=>Kn(!0),children:"Agregar plano"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",icon:jsxRuntimeExports.jsx(Maximize2,{className:"w-4 h-4"}),onClick:()=>kn(!0),disabled:!an,title:an?"Ver plano en grande":"Selecciona un plano primero",children:"Ver grande"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",icon:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"}),onClick:()=>Dn(!0),disabled:!an||ls,title:an?"Eliminar plano":"Selecciona un plano para poder eliminarlo",children:"Eliminar plano"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-[1fr,auto,auto] gap-2",children:[jsxRuntimeExports.jsxs("select",{value:Jr,onChange:Un=>tn(Un.target.value),className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleccionar plano..."}),fr.map(Un=>jsxRuntimeExports.jsx("option",{value:Un.id,children:Un.nombre},Un.id))]}),jsxRuntimeExports.jsxs("div",{className:"inline-flex rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>en(!0),className:"px-3 py-2 text-sm transition-colors "+(dn?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"),title:"Ver todos los marcadores",children:"Ver todos"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>en(!1),className:"px-3 py-2 text-sm transition-colors border-l border-gray-200 dark:border-gray-700 "+(dn?"bg-white dark:bg-gray-900 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800":"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300"),title:"Ver solo el seleccionado",children:"Solo este"})]}),jsxRuntimeExports.jsx(Button,{size:"sm",icon:jsxRuntimeExports.jsx(MapPin,{className:"w-4 h-4"}),onClick:()=>{!Jr||!Er||(sn(Un=>Un==="add"?"none":"add"),fn(null))},disabled:!Jr||!Er,title:Er?void 0:"Selecciona un motor/bomba para agregar marcador",children:rn==="add"?"Click en el plano...":"Agregar marcador"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>{if(!Er||!Jr)return;const Un=(Er.marcadores||[]).filter(Ts=>Ts.mapId===Jr);if(Un.length===1){fn(Un[0].id),sn("move");return}sn("move")},disabled:!Er||!Jr||((Er==null?void 0:Er.marcadores)||[]).filter(Un=>Un.mapId===Jr).length===0,title:Er?"Mover marcador existente":"Selecciona un motor/bomba",children:rn==="move"?"Click para mover...":"Mover marcador"})]}),Er&&(Er.marcadores||[]).length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Este motor/bomba est marcado en:"}),$s(Er).map(Un=>jsxRuntimeExports.jsx("button",{type:"button",className:"px-2 py-0.5 rounded border "+(Un.missing?"border-gray-200 dark:border-gray-700 text-gray-500":Jr===Un.id?"border-primary-300 dark:border-primary-600 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800"),disabled:Un.missing,title:Un.missing?"Plano eliminado":"Cambiar al plano de este marcador",onClick:()=>{Un.missing||(tn(Un.id),en(!1),sn("none"),fn(null))},children:Un.nombre},Un.id))]}),an?jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx(PlantMapViewer,{map:an,selectedAsset:Er,allAssets:rr,showAllMarkers:dn,addingMarker:pn,onAddMarker:eo,onSelectAsset:Un=>_r(Un),clickTitle:rn==="add"?"Click para agregar marcador":rn==="move"?"Click para mover marcador":void 0}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-300",children:rn==="add"?"Haz click en el plano para colocar el marcador. (Vuelve a apretar Agregar marcador para salir)":rn==="move"?"Haz click en el plano para mover el marcador seleccionado.":dn?"Tip: puedes hacer click en un marcador para seleccionar ese motor/bomba.":Er?"Mostrando solo los marcadores del seleccionado.":"Selecciona un motor/bomba para ver sus marcadores."}),rn==="move"&&Er&&Jr&&(Er.marcadores||[]).filter(Un=>Un.mapId===Jr).length>1&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Elige qu marcador mover"}),jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Er.marcadores||[]).filter(Un=>Un.mapId===Jr).map((Un,Ts)=>jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>fn(Un.id),className:"px-2 py-1 rounded border text-xs "+(on===Un.id?"border-primary-300 dark:border-primary-600 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-200"),children:["Marcador ",Ts+1]},Un.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[!on&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Selecciona un marcador arriba y luego haz click en el plano."}),on&&jsxRuntimeExports.jsx("button",{type:"button",className:"ml-auto px-2 py-1 rounded border border-red-200 dark:border-red-700 text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 text-xs hover:bg-red-100 dark:hover:bg-red-900/30",onClick:async()=>{if(!Er||!window.confirm("Eliminar este marcador?"))return;const Ts=(Er.marcadores||[]).filter(Nn=>Nn.id!==on);await hr(Er.id,{marcadores:Ts}),fn(null),sn("none")},title:"Eliminar el marcador seleccionado",children:"Eliminar marcador"})]})]})]}):jsxRuntimeExports.jsx("div",{className:"mt-3 text-sm text-gray-500",children:"Selecciona un plano para ubicar motores/bombas."})]}),Er?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:[Er.tipo.toUpperCase(),"  ",Er.codigoSAP]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[Er.area,"  ",Er.subarea]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:async()=>{Er.codigoSAP.toLowerCase()!=="pendiente"&&await navigator.clipboard.writeText(Er.codigoSAP)},disabled:Er.codigoSAP.toLowerCase()==="pendiente",title:Er.codigoSAP.toLowerCase()==="pendiente"?"Cdigo SAP pendiente":"Copiar cdigo SAP",children:"Copiar SAP"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>On(Er),children:"Editar"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Datos"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200 space-y-1",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Descripcin SAP:"})," ",Er.descripcionSAP]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Mquina/Cinta:"})," ",Er.equipo]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Marca:"})," ",Er.marca]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Modelo/Tipo:"})," ",Er.modeloTipo]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Potencia:"})," ",Er.potencia]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Voltaje:"})," ",Er.voltaje]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Relacin:"})," ",Er.relacionReduccion]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Corriente:"})," ",Er.corriente]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("b",{children:"Eje:"})," ",Er.eje]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Observaciones"}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200 whitespace-pre-wrap",children:Er.observaciones})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between gap-2",children:jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Referencias"})}),jsxRuntimeExports.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-[1fr,1fr,auto] gap-2",children:[jsxRuntimeExports.jsx("input",{value:As,onChange:Un=>Rs(Un.target.value),placeholder:"Ttulo",className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"}),jsxRuntimeExports.jsx("input",{value:Ms,onChange:Un=>Bs(Un.target.value),placeholder:"URL",className:"px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"}),jsxRuntimeExports.jsx(Button,{size:"sm",icon:jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4"}),onClick:async()=>{!As.trim()||!Ms.trim()||(await cr(Er,{titulo:As.trim(),url:Ms.trim()}),Rs(""),Bs(""))},children:"Agregar"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-2",children:[(Er.referencias||[]).map(Un=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("a",{href:Un.url,target:"_blank",rel:"noreferrer",className:"text-primary-700 dark:text-primary-300 hover:underline",children:Un.titulo}),jsxRuntimeExports.jsx("button",{onClick:()=>lr(Er,Un.id),className:"ml-auto p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500",title:"Eliminar",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},Un.id)),(Er.referencias||[]).length===0&&jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Sin referencias."})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Fotos (zona/equipo)"}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-primary-700 dark:text-primary-300 cursor-pointer",children:[jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),"Subir",jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Un=>{var Nn;const Ts=(Nn=Un.target.files)==null?void 0:Nn[0];Ts&&(ao(Ts),Un.currentTarget.value="")}})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-3",children:(Er.imagenes||[]).slice().sort((Un,Ts)=>Un.orden-Ts.orden).map(Un=>jsxRuntimeExports.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-gray-100",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"block w-full",onClick:()=>{Bn(Un.url),is(!0)},title:"Ver foto en grande",children:jsxRuntimeExports.jsx("img",{src:Un.url,alt:"",className:"w-full h-28 object-cover"})}),jsxRuntimeExports.jsx("button",{onClick:()=>ur(Er,Un.id),className:"absolute top-1 right-1 p-1 rounded bg-white/80 hover:bg-white text-gray-700",title:"Eliminar",children:jsxRuntimeExports.jsx(X$1,{className:"w-4 h-4"})})]},Un.id))}),(Er.imagenes||[]).length===0&&jsxRuntimeExports.jsx("div",{className:"mt-3 text-sm text-gray-500",children:"Sin fotos. Sube una foto de la zona para corroborar ubicacin."})]})]}):jsxRuntimeExports.jsx("div",{className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm text-gray-600 dark:text-gray-300",children:"Selecciona un motor/bomba desde la lista o haz click en un marcador (con Ver todos)."})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:gn,onClose:()=>Pn(!1),title:"Importar Motores/Bombas (Excel)",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:["Importa desde el levantamiento. Campos faltantes se guardan como ",jsxRuntimeExports.jsx("b",{children:"pendiente"}),"."]}),zn&&jsxRuntimeExports.jsx("div",{className:"p-3 rounded-lg border border-red-200 bg-red-50 text-red-700 text-sm",children:zn}),jsxRuntimeExports.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Un=>{var Nn;const Ts=(Nn=Un.target.files)==null?void 0:Nn[0];Ts&&(Zs(Ts),Un.currentTarget.value="")},disabled:In}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Pn(!1),disabled:In,children:"Cerrar"})})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Cr,onClose:()=>wr(!1),title:"Columnas y exportacin",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:"Elige qu columnas ver en la tabla (queda guardado). La exportacin usa el filtro/bsqueda y el orden actual."}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Nr.map(Un=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 p-2 rounded border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:!!Or[Un.key],onChange:Ts=>jr(Nn=>({...Nn,[Un.key]:Ts.target.checked}))}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-100",children:Un.label})]},Un.key))}),jsxRuntimeExports.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[jsxRuntimeExports.jsx("div",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:"PDF"}),jsxRuntimeExports.jsxs("div",{className:"mt-2 flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-800 dark:text-gray-100",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:qr,onChange:Un=>$r(Un.target.checked)}),"Incluir fotos (miniaturas)"]}),jsxRuntimeExports.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-800 dark:text-gray-100",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Br,onChange:Un=>zr(Un.target.checked)}),"Incluir ubicaciones (plano + coordenadas)"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-2 flex-wrap",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>jr(Ir()),title:"Volver a columnas por defecto",children:"Restaurar"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:async()=>{try{if(Pr)return;Ar(!0);const Un=Lr.map(Ts=>Ts.key);await exportPlantAssetsToExcel(Zr,{filename:`motores_bombas_${new Date().toISOString().slice(0,10)}`,columns:Un,getMarkersLabel:us})}catch(Un){console.error("Error exportando Excel (Motores/Bombas):",Un),window.alert(Un instanceof Error?Un.message:"Error exportando Excel")}finally{Ar(!1)}},loading:Pr,disabled:Pr||Lr.length===0||Zr.length===0,title:Zr.length===0?"No hay filas para exportar":void 0,children:"Exportar Excel"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:async()=>{try{if(Sr)return;Mr(!0);const Un=Lr.map(Ts=>Ts.key);await exportPlantAssetsToPDF(Zr,{filename:`motores_bombas_${new Date().toISOString().slice(0,10)}`,columns:Un,getMarkersLabel:us,getLocationsLabel:ws,includePhotos:qr,includeLocations:Br})}catch(Un){console.error("Error exportando PDF (Motores/Bombas):",Un),window.alert(Un instanceof Error?Un.message:"Error exportando PDF")}finally{Mr(!1)}},loading:Sr,disabled:Sr||Lr.length===0||Zr.length===0,title:Zr.length===0?"No hay filas para exportar":void 0,children:"Exportar PDF"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>wr(!1),children:"Cerrar"})})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Jn,onClose:()=>is(!1),title:"Foto",size:"full",children:jsxRuntimeExports.jsxs("div",{className:"w-full",children:[bs?jsxRuntimeExports.jsx("div",{className:"w-full rounded-lg border border-gray-200 dark:border-gray-700 bg-black/5 dark:bg-black/20 overflow-hidden",children:jsxRuntimeExports.jsx("img",{src:bs,alt:"",className:"w-full",style:{maxHeight:"80vh",objectFit:"contain"}})}):jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Sin foto."}),jsxRuntimeExports.jsx("div",{className:"mt-3 flex justify-end",children:jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>is(!1),children:"Cerrar"})})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Vn,onClose:()=>Kn(!1),title:"Agregar plano",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("input",{value:es,onChange:Un=>Xn(Un.target.value),placeholder:"Nombre del plano (ej: Planta principal, Exteriores)",className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"}),jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:Un=>{var Nn;const Ts=(Nn=Un.target.files)==null?void 0:Nn[0];Ts&&fs(Ts)}}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Kn(!1),disabled:os,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{onClick:Qs,loading:os,disabled:!es.trim()||!ds,children:"Crear"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Yn,onClose:()=>{_n||vn(!1)},title:"Editar motor/bomba",size:"xl",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Tipo"}),jsxRuntimeExports.jsxs("select",{value:qn.tipo,onChange:Un=>wn(Ts=>({...Ts,tipo:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm",children:[jsxRuntimeExports.jsx("option",{value:"motor",children:"Motor"}),jsxRuntimeExports.jsx("option",{value:"bomba",children:"Bomba"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Cdigo SAP"}),jsxRuntimeExports.jsx("input",{value:qn.codigoSAP,onChange:Un=>wn(Ts=>({...Ts,codigoSAP:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Mquina/Cinta (si aplica)"}),jsxRuntimeExports.jsx("input",{value:qn.equipo,onChange:Un=>wn(Ts=>({...Ts,equipo:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"rea"}),jsxRuntimeExports.jsx("input",{value:qn.area,onChange:Un=>wn(Ts=>({...Ts,area:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Subrea"}),jsxRuntimeExports.jsx("input",{value:qn.subarea,onChange:Un=>wn(Ts=>({...Ts,subarea:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Componente"}),jsxRuntimeExports.jsx("input",{value:qn.componente,onChange:Un=>wn(Ts=>({...Ts,componente:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Descripcin SAP"}),jsxRuntimeExports.jsx("input",{value:qn.descripcionSAP,onChange:Un=>wn(Ts=>({...Ts,descripcionSAP:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Marca"}),jsxRuntimeExports.jsx("input",{value:qn.marca,onChange:Un=>wn(Ts=>({...Ts,marca:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Modelo/Tipo"}),jsxRuntimeExports.jsx("input",{value:qn.modeloTipo,onChange:Un=>wn(Ts=>({...Ts,modeloTipo:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Potencia"}),jsxRuntimeExports.jsx("input",{value:qn.potencia,onChange:Un=>wn(Ts=>({...Ts,potencia:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Voltaje"}),jsxRuntimeExports.jsx("input",{value:qn.voltaje,onChange:Un=>wn(Ts=>({...Ts,voltaje:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Relacin de reduccin (i)"}),jsxRuntimeExports.jsx("input",{value:qn.relacionReduccion,onChange:Un=>wn(Ts=>({...Ts,relacionReduccion:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Corriente"}),jsxRuntimeExports.jsx("input",{value:qn.corriente,onChange:Un=>wn(Ts=>({...Ts,corriente:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Eje"}),jsxRuntimeExports.jsx("input",{value:qn.eje,onChange:Un=>wn(Ts=>({...Ts,eje:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:"Observaciones"}),jsxRuntimeExports.jsx("input",{value:qn.observaciones,onChange:Un=>wn(Ts=>({...Ts,observaciones:Un.target.value})),className:"w-full px-3 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>vn(!1),disabled:_n,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{loading:_n,onClick:async()=>{Mn(!0);try{const Un={tipo:qn.tipo,equipo:toPendiente(qn.equipo),area:toPendiente(qn.area),subarea:toPendiente(qn.subarea),componente:toPendiente(qn.componente),codigoSAP:toPendiente(qn.codigoSAP),descripcionSAP:toPendiente(qn.descripcionSAP),marca:toPendiente(qn.marca),modeloTipo:toPendiente(qn.modeloTipo),potencia:toPendiente(qn.potencia),voltaje:toPendiente(qn.voltaje),relacionReduccion:toPendiente(qn.relacionReduccion),corriente:toPendiente(qn.corriente),eje:toPendiente(qn.eje),observaciones:toPendiente(qn.observaciones)};if(Cn){const Ts=await dr({...Un,referencias:qn.referencias||[],imagenes:qn.imagenes||[],marcadores:qn.marcadores||[]});_r(Ts)}else{if(!qn.id)return;await hr(qn.id,Un)}vn(!1)}finally{Mn(!1)}},children:"Guardar"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:Ln,onClose:()=>{ls||Dn(!1)},title:"Eliminar plano",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:an?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Eliminar el plano ",jsxRuntimeExports.jsx("b",{children:an.nombre}),"? Esto no borra los marcadores guardados en los motores/bombas, pero ya no se podr ver ese plano."]}):"Selecciona un plano primero."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Dn(!1),disabled:ls,children:"Cancelar"}),jsxRuntimeExports.jsx(Button,{variant:"danger",loading:ls,disabled:!an,onClick:async()=>{if(an){Ds(!0);try{if(an.imageUrl)try{await xr(an.imageUrl)}catch{}await pr(an.id),tn(""),sn("none"),fn(null),Dn(!1)}finally{Ds(!1)}}},children:"Eliminar"})]})]})}),jsxRuntimeExports.jsx(Modal,{isOpen:xs,onClose:()=>kn(!1),title:an?`Plano: ${an.nombre}`:"Plano",size:"full",children:an?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(PlantMapViewer,{map:an,selectedAsset:Er,allAssets:rr,showAllMarkers:dn,addingMarker:pn,onAddMarker:eo,onSelectAsset:Un=>_r(Un),mode:"fullscreen",clickTitle:rn==="add"?"Click para agregar marcador":rn==="move"?"Click para mover marcador":void 0}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-300",children:"Zoom: rueda del mouse / pinch en mvil. Arrastra para mover. Doble click para reset."})]}):jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-500",children:"Selecciona un plano para verlo."})})]})}window.importarRepuestosInformeV2=importarRepuestosInformeV2;const PDFViewer=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>PDFViewer$2),void 0).then(tr=>({default:tr.PDFViewer}))),PDFMarkerEditor=reactExports.lazy(()=>__vitePreload(()=>import("./PDFMarkerEditor-Dr3xJ_Qw.js"),[]).then(tr=>({default:tr.PDFMarkerEditor})));let editorPreloaded=!1,editorPreloading=!1;const preloadMarkerEditor=()=>{if(editorPreloaded||editorPreloading)return Promise.resolve();editorPreloading=!0,console.log("[Dashboard] Precargando mdulo PDFMarkerEditor...");const tr=performance.now();return __vitePreload(()=>import("./PDFMarkerEditor-Dr3xJ_Qw.js"),[]).then(()=>{editorPreloaded=!0,editorPreloading=!1,console.log(`[Dashboard] PDFMarkerEditor precargado en ${(performance.now()-tr).toFixed(0)}ms `)}).catch(er=>{editorPreloading=!1,console.error("[Dashboard] Error precargando PDFMarkerEditor:",er)})},PDFLoadingFallback=()=>jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(LoaderCircle,{className:"w-10 h-10 text-primary-600 animate-spin mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Cargando visor de PDF..."})]})}),sanitizeImagen=tr=>Object.fromEntries(Object.entries(tr).filter(([,rr])=>rr!==void 0));function Dashboard(){var ou,lu,Pu,Ol,El,$l,mu,xo,gu,cu,yu,bu,xu;const{user:tr,signOut:er}=useAuth(),{currentMachine:rr,machines:nr,setCurrentMachine:ir}=useMachineContext(),sr=(rr==null?void 0:rr.id)||null;reactExports.useEffect(()=>{var _i;console.log(`
 [Dashboard] Machine changed`),console.log("   currentMachine:",rr==null?void 0:rr.id,rr==null?void 0:rr.nombre),console.log("   machineId:",sr),console.log("   manuals:",((_i=rr==null?void 0:rr.manuals)==null?void 0:_i.length)||0)},[rr]);const{repuestos:ar,loading:cr,createRepuesto:lr,updateRepuesto:or,deleteRepuesto:ur,getHistorial:hr,importRepuestos:dr,importCantidadesPorTag:fr,importCatalogoDesdeExcel:gr,renameTag:br,deleteTag:pr}=useRepuestos(sr),{uploadImage:mr}=useStorage(sr),{lastSelectedRepuestoId:yr,setLastSelectedRepuesto:xr}=useLocalStorage(),{toasts:vr,removeToast:_r,success:Er,error:Tr}=useToast(),{toggleTheme:Rr,isDark:Nr}=useTheme(),[Dr,Ir]=reactExports.useState(null),[Or,jr]=reactExports.useState(null),[Lr,Cr]=reactExports.useState(null),[wr,Pr]=reactExports.useState(null),[Ar,Sr]=reactExports.useState(!1),[Mr,qr]=reactExports.useState("create"),[$r,Br]=reactExports.useState("hidden"),[zr,Gr]=reactExports.useState("real"),[Vr,Xr]=reactExports.useState(null),[Ur,Fr]=reactExports.useState(0),[Kr,Zr]=reactExports.useState(),[Jr,tn]=reactExports.useState(),[an,dn]=reactExports.useState(null),en=usePDFPreloader(Vr,3e3),[rn,sn]=reactExports.useState(!1),[on,fn]=reactExports.useState(!1),[pn,gn]=reactExports.useState(!1),[Pn,In]=reactExports.useState(!1),[En,zn]=reactExports.useState("catalogo"),[yn,Vn]=reactExports.useState("machine"),[Kn,es]=reactExports.useState([]),[Xn,ds]=reactExports.useState(null);reactExports.useEffect(()=>{yn==="selected"&&(Kn.length>0||rr!=null&&rr.id&&es([rr.id]))},[yn,Kn.length,rr==null?void 0:rr.id]),reactExports.useEffect(()=>{if(Kn.length===0)return;const _i=new Set(nr.filter(Xs=>Xs.activa).map(Xs=>Xs.id)),ks=Kn.filter(Xs=>_i.has(Xs));ks.length!==Kn.length&&es(ks)},[nr,Kn]);const fs=reactExports.useMemo(()=>yn==="global"?nr:yn==="selected"?nr.filter(_i=>Kn.includes(_i.id)):[],[yn,nr,Kn]),os=useGlobalCatalog({enabled:yn!=="machine",machines:fs}),Hn=reactExports.useMemo(()=>{if(yn==="global")return"Catlogo completo";if(yn==="selected"){const _i=Kn.length;return _i>0?`Mquinas seleccionadas (${_i})`:"Mquinas seleccionadas"}return null},[yn,Kn.length]),Ln=$r==="pdf"||$r==="marker-editor",Dn=En==="catalogo"&&Ln,[ls,Ds]=reactExports.useState([]),[xs,kn]=reactExports.useState({solicitud:null,stock:null}),[Jn,is]=reactExports.useState(!1),[bs,Bn]=reactExports.useState(!0),[Yn,vn]=reactExports.useState(!1),[_n,Mn]=reactExports.useState("completo"),[Cn,Zn]=reactExports.useState(!0),[qn,wn]=reactExports.useState(!0),[On,Gn]=reactExports.useState(!0),[Qn,$s]=reactExports.useState(!0),[us,ws]=reactExports.useState(!1),As=useBackupSystem(ar,sr),Rs=reactExports.useCallback(async(_i,ks,Xs)=>{if(await or(_i,ks,Xs),Xs&&As.autoBackupEnabled)for(const xa of Object.keys(ks))ks[xa]!==Xs[xa]&&As.recordChange(Xs,xa,Xs[xa],ks[xa])},[or,As]),[Ms,Bs]=reactExports.useState(!1),[Zs,Qs]=reactExports.useState(!1),[eo,ao]=reactExports.useState(!1),[Un,Ts]=reactExports.useState(!1),Nn=reactExports.useRef(null);reactExports.useEffect(()=>{const _i=ks=>{Nn.current&&!Nn.current.contains(ks.target)&&Ts(!1)};return Un&&document.addEventListener("mousedown",_i),()=>{document.removeEventListener("mousedown",_i)}},[Un]);const[ns,Ps]=reactExports.useState(null),{canUndo:Ss,canRedo:Ks,recordAction:Is,popUndo:An,popRedo:Vs,startRestoring:Fs,endRestoring:Cs,getActionDescription:Ns,peekUndo:Ys}=useUndoRedo();reactExports.useEffect(()=>{console.log(" [Dashboard] Machine changed, clearing PDF and resetting index"),Xr(null),Fr(0),tn(void 0),Zr(void 0)},[rr==null?void 0:rr.id]),reactExports.useEffect(()=>{(async()=>{if(!rr){Xr(null);return}if(console.log(" [Dashboard] Loading manual for",rr.nombre,"index:",Ur),rr.manuals&&rr.manuals.length>0){const ks=rr.manuals[Ur]||rr.manuals[0];console.log(" [Dashboard] Using manual from Firestore:",ks),Xr(ks);return}console.log(" [Dashboard] No manual available for",rr.nombre),Xr(null)})()},[rr,Ur]),reactExports.useEffect(()=>{en.isReady&&en.pdf&&Vr&&(setGlobalPDFCache(Vr,en.pdf,en.textContent),console.log("[Dashboard] PDF manual guardado en cache global "),!editorPreloaded&&!editorPreloading&&preloadMarkerEditor())},[en.isReady,en.pdf,en.textContent,Vr]),reactExports.useEffect(()=>{if(yr&&ar.length>0&&!Dr){const _i=ar.find(ks=>ks.id===yr);_i&&(Ir(_i),Br("gallery"))}},[yr,ar,Dr]),reactExports.useEffect(()=>{xr((Dr==null?void 0:Dr.id)||null)},[Dr,xr]);const js=reactExports.useCallback(async(_i,ks)=>{zn("catalogo"),Br("hidden"),Ir(null),xr(ks),ds(ks),await ir(_i)},[ir,xr]);reactExports.useEffect(()=>{const _i=ks=>{const Xs=document.activeElement;(Xs==null?void 0:Xs.tagName)==="INPUT"||(Xs==null?void 0:Xs.tagName)==="TEXTAREA"||((ks.ctrlKey||ks.metaKey)&&ks.key==="n"&&(ks.preventDefault(),to()),(ks.ctrlKey||ks.metaKey)&&ks.key==="e"&&(ks.preventDefault(),Rl()),(ks.ctrlKey||ks.metaKey)&&ks.key==="p"&&(ks.preventDefault(),_l()),(ks.ctrlKey||ks.metaKey)&&ks.key==="m"&&(ks.preventDefault(),$r==="pdf"?Br("hidden"):(zn("catalogo"),Br("pdf"))),ks.key==="Escape"&&(Ar?Sr(!1):Yn?vn(!1):Jn?is(!1):us?ws(!1):$r!=="hidden"&&Br("hidden")))};return window.addEventListener("keydown",_i),()=>window.removeEventListener("keydown",_i)},[$r,Ar,Yn,Jn,us]);const Js=_i=>{Ir(_i),_i?(Br("gallery"),Gr("manual")):Br("hidden")},to=()=>{jr(null),qr("create"),Sr(!0)},mo=_i=>{jr(_i),qr("edit"),Sr(!0)},Eo=async _i=>{try{if(Mr==="edit"&&Or){for(const ks of Object.keys(_i)){const Xs=Or[ks],xa=_i[ks];Xs!==xa&&Is({type:"update",description:`Actualizar ${ks} en ${Or.codigoSAP}`,repuestoId:Or.id,repuestoCode:Or.codigoSAP,campo:ks,valorAnterior:Xs,valorNuevo:xa})}await Rs(Or.id,_i,Or),Er("Repuesto actualizado correctamente")}else await lr(_i),Er("Repuesto creado correctamente");Sr(!1)}catch(ks){throw Tr("Error al guardar el repuesto"),ks}},fo=_i=>{Cr(_i)},No=async()=>{if(Lr){fn(!0);try{await ur(Lr.id),Er("Repuesto eliminado"),(Dr==null?void 0:Dr.id)===Lr.id&&(Ir(null),Br("hidden"))}catch{Tr("Error al eliminar el repuesto")}finally{fn(!1),Cr(null)}}},Bo=_i=>{if(Ir(_i),Br("pdf"),_i.vinculosManual&&_i.vinculosManual.length>0){const ks=_i.vinculosManual[0];if(ks.machineId&&ks.machineId!==(rr==null?void 0:rr.id)){console.warn(" [Dashboard] Marcador pertenece a otra mquina:",ks.machineId,"actual:",rr==null?void 0:rr.id),Tr(`Este marcador pertenece a ${ks.machineId}. Cambia a esa mquina primero.`);return}if(ks.manualUrl&&(rr!=null&&rr.manuals)&&rr.manuals.length>0){const Xs=rr.manuals.findIndex(xa=>xa===ks.manualUrl);Xs>=0&&Xs!==Ur?(console.log(" [Dashboard] Selecting manual index from marker:",Xs),Fr(Xs)):Xs===-1&&console.warn(" [Dashboard] marker.manualUrl no pertenece a los manuales de esta mquina; se mantiene el manual actual")}Zr(ks.pagina),tn(ks)}else Zr(void 0),tn(void 0)},go=_i=>{if(_i.machineId&&_i.machineId!==(rr==null?void 0:rr.id)){console.warn(" [Dashboard] Marcador pertenece a otra mquina:",_i.machineId,"actual:",rr==null?void 0:rr.id),Tr(`Este marcador pertenece a ${_i.machineId}. Cambia a esa mquina primero.`);return}if(_i.manualUrl&&(rr!=null&&rr.manuals)&&rr.manuals.length>0){const ks=rr.manuals.findIndex(Xs=>Xs===_i.manualUrl);ks>=0&&ks!==Ur?(console.log(" [Dashboard] Selecting manual index from marker:",ks),Fr(ks)):ks===-1&&console.warn(" [Dashboard] marker.manualUrl no pertenece a los manuales de esta mquina; se mantiene el manual actual")}Br("pdf"),Zr(_i.pagina),tn(_i)},jo=_i=>{Ir(_i),Br("gallery"),Gr("real")},ro=(_i,ks)=>{console.log(" [Dashboard] Opening marker editor for repuesto:",_i.codigoSAP,"in machine:",rr==null?void 0:rr.nombre),dn(_i),Ir(_i),Do(ks||null),zn("catalogo"),Br("marker-editor")},[no,Do]=reactExports.useState(null),ho=async _i=>{if(!an||!rr)return;const ks=an.vinculosManual||[],Xs=rr.manuals&&rr.manuals.length>0?rr.manuals[Ur]||rr.manuals[0]:Vr||void 0,xa={..._i,machineId:rr.id,manualUrl:Xs};if(no){const oo=ks.map(po=>po.id===no.id?{...xa,id:no.id}:po);await Rs(an.id,{vinculosManual:oo},an),Er("Marcador actualizado correctamente"),tn({...xa,id:no.id})}else{const oo={...xa,id:Date.now().toString()};await Rs(an.id,{vinculosManual:[...ks,oo]},an),Er(`Marcador guardado en ${rr.nombre}`),tn(oo)}Br("pdf"),dn(null),Do(null),Zr(xa.pagina)},Ko=async(_i,ks)=>{const xa=(_i.vinculosManual||[]).filter(oo=>oo.id!==ks);await Rs(_i.id,{vinculosManual:xa},_i),Er("Marcador eliminado"),tn(void 0)},Io=_i=>{Pr(_i)},Oo=async(_i,ks,Xs,xa)=>{var Xl,Ml,uu;xa!=null&&xa.log&&console.log("[Dashboard] Upload meta:",{originalSize:xa.originalSize,optimizedSize:xa.optimizedSize,chosen:xa.chosen});const oo=await mr(_i,ks,Xs,{quality:(Xl=xa==null?void 0:xa.chosen)==null?void 0:Xl.quality,skipOptimize:xa==null?void 0:xa.skipOptimize,meta:{sizeOriginal:xa==null?void 0:xa.originalSize,chosen:xa==null?void 0:xa.chosen}});console.log("[Dashboard] Imagen subida:",{fileSize:_i.size,imagenSizeOriginal:oo.sizeOriginal,imagenSizeFinal:oo.sizeFinal,imagenFormatFinal:oo.formatFinal});const po=ar.find(Dl=>Dl.id===ks);if(po){const Dl=Xs==="manual"?po.imagenesManual:po.fotosReales,vu=sanitizeImagen({...oo,orden:Dl.length}),_u=[...Dl,vu];Ir({...po,[Xs==="manual"?"imagenesManual":"fotosReales"]:_u}),await Rs(ks,{[Xs==="manual"?"imagenesManual":"fotosReales"]:_u},po);const Yl=oo.sizeFinal||_i.size,Pl=oo.formatFinal||((Ml=xa==null?void 0:xa.chosen)==null?void 0:Ml.format)||"original",Zl=oo.qualityFinal?Math.round(oo.qualityFinal*100):(uu=xa==null?void 0:xa.chosen)!=null&&uu.quality?Math.round(xa.chosen.quality*100):null,wu=Pl!=="original"?`${Pl.toUpperCase()}${Zl?` ${Zl}%`:""}`:"ORIGINAL";Er(Yl&&Pl!=="original"?` ${formatFileSize(Yl)} (${wu})`:Pl==="original"?` Subida sin optimizar: ${formatFileSize(Yl)}`:"Imagen agregada")}return oo},Zo=async(_i,ks)=>{const Xs=ks.tipo,oo=(Xs==="manual"?_i.imagenesManual:_i.fotosReales).filter(po=>po.id!==ks.id);Ir({..._i,[Xs==="manual"?"imagenesManual":"fotosReales"]:oo}),await Rs(_i.id,{[Xs==="manual"?"imagenesManual":"fotosReales"]:oo},_i),Er("Imagen eliminada")},Al=async(_i,ks)=>{const Xs=ks.tipo,oo=(Xs==="manual"?_i.imagenesManual:_i.fotosReales).map(po=>({...po,esPrincipal:po.id===ks.id}));await Rs(_i.id,{[Xs==="manual"?"imagenesManual":"fotosReales"]:oo},_i)},Ul=async(_i,ks)=>{var xa;const Xs=((xa=ks[0])==null?void 0:xa.tipo)||"manual";await Rs(_i.id,{[Xs==="manual"?"imagenesManual":"fotosReales"]:ks},_i)},Lo=reactExports.useCallback(async(_i,ks)=>{if(!Dr)return;const xa=await(await fetch(_i)).blob(),oo=new File([xa],`manual_page_${ks}.png`,{type:"image/png"});await Oo(oo,Dr.id,"manual");const po=Dr.vinculosManual||[];await Rs(Dr.id,{vinculosManual:[...po,{id:Date.now().toString(),pagina:ks,forma:"rectangulo",color:"rgba(239, 68, 68, 0.4)",descripcion:`Pgina ${ks}`}]},Dr),Er(`Captura de pgina ${ks} guardada`)},[Dr,Rs,Er,Oo]),zo=_i=>{kn(_i)},Rl=()=>{vn(!0)},Wo=()=>{const _i=ls.length>0?ls.length:ar.length,ks=ar.length,Xs=!!xs.solicitud,xa=!!xs.stock;if(!Xs&&!xa)return`Catalogo de repuestos ${_i}/${ks}`;const oo=[];return Xs&&oo.push(`Solicitud ${xs.solicitud}`),xa&&oo.push(`Stock ${xs.stock}`),`${oo.join(" + ")} ${_i}/${ks}`},_o=_i=>{const ks=(rr==null?void 0:rr.nombre)||"maquina",Xs=Wo();return`${ks}_${Xs}_${_i}`.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9]+/g,"_").replace(/^_+|_+$/g,"").toLowerCase()},zl=()=>{const _i=ls.length>0?ls:ar,ks=!!xs.solicitud,Xs=!!xs.stock,xa=ks&&!Xs,oo=Xs&&!ks,po=xa?xs.solicitud||void 0:oo&&xs.stock||void 0;exportToExcel(_i,{formato:_n,incluirResumen:Cn,incluirSinStock:qn,incluirPorTags:On,incluirEstilos:Qn,contextTag:po,tipoContexto:xa?"solicitud":oo?"stock":null},_o("excel")),Er(`Excel exportado: ${Wo()}`),vn(!1)},_l=()=>{is(!0)},io=()=>{const _i=ls.length>0?ls:ar,ks=!!xs.solicitud,Xs=!!xs.stock,po=ks&&!Xs?xs.solicitud||void 0:Xs&&!ks&&xs.stock||void 0;exportToPDF(_i,{includeCharts:bs,contextTag:po,filename:_o("pdf")}),Er(`PDF exportado: ${Wo()}`),is(!1)},Qo=async()=>{const _i=An();if(_i){Fs();try{const ks=ar.find(Xs=>Xs.id===_i.repuestoId);ks&&_i.campo&&(await Rs(_i.repuestoId,{[_i.campo]:_i.valorAnterior},ks),Er(`Deshecho: ${Ns(_i)}`))}catch{Tr("Error al deshacer")}finally{Cs()}}},Kl=async()=>{const _i=Vs();if(_i){Fs();try{const ks=ar.find(Xs=>Xs.id===_i.repuestoId);ks&&_i.campo&&(await Rs(_i.repuestoId,{[_i.campo]:_i.valorNuevo},ks),Er(`Rehecho: ${Ns(_i)}`))}catch{Tr("Error al rehacer")}finally{Cs()}}},Il=async _i=>{const ks=ar.find(Xs=>Xs.id===_i.repuestoId);if(!ks){Tr("Repuesto no encontrado");return}try{Is({type:"update",description:`Restaurado ${_i.campo}`,repuestoId:_i.repuestoId,repuestoCode:ks.codigoSAP,campo:_i.campo,valorAnterior:ks[_i.campo],valorNuevo:_i.valorAnterior}),await Rs(_i.repuestoId,{[_i.campo]:_i.valorAnterior},ks),Er(`Restaurado: ${_i.campo} de ${ks.codigoSAP}`)}catch{Tr("Error al restaurar")}},Du=async _i=>{try{await dr(_i),Er(`${_i.length} repuestos importados correctamente`)}catch(ks){throw Tr("Error al importar repuestos"),ks}};if(cr)return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"spinner mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Cargando repuestos..."})]})});const wl=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative",ref:Nn,children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",onClick:()=>Ts(_i=>!_i),icon:jsxRuntimeExports.jsx(Menu,{className:"w-4 h-4"}),className:"relative",children:["Mdulos",en.isReady?jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full",title:"Manual precargado"}):en.loading?jsxRuntimeExports.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-yellow-500 rounded-full animate-pulse",title:"Precargando manual..."}):null]}),Un&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-full mt-2 w-72 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("catalogo"),Br("pdf"),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{className:"flex-1 text-left",children:rr?`Manuales ${rr.nombre}`:"Manuales"}),(ou=rr==null?void 0:rr.manuals)!=null&&ou.length?jsxRuntimeExports.jsx("span",{className:"px-1.5 py-0.5 text-xs font-semibold bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded-full",children:rr.manuals.length}):null]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rl(),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{children:"Exportar Excel"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{_l(),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{children:"Exportar PDF"})]}),jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 my-1"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{ws(!0),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(Database,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{children:"Backup"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Bs(!0),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{children:"Reportes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{ao(!0),Ts(!1)},className:"w-full flex items-center gap-3 px-4 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-800 dark:text-gray-200",children:[jsxRuntimeExports.jsx(GitCompare,{className:"w-4 h-4 text-gray-500 dark:text-gray-300"}),jsxRuntimeExports.jsx("span",{children:"Comparar"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 border-l border-gray-200 dark:border-gray-700 pl-3 ml-1",children:[jsxRuntimeExports.jsx("button",{onClick:Qo,disabled:!Ss,className:`p-2 rounded-lg transition-colors ${Ss?"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-300 dark:text-gray-600 cursor-not-allowed"}`,title:Ss?`Deshacer: ${Ns(Ys())}`:"Nada que deshacer",children:jsxRuntimeExports.jsx(Undo2,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:Kl,disabled:!Ks,className:`p-2 rounded-lg transition-colors ${Ks?"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"text-gray-300 dark:text-gray-600 cursor-not-allowed"}`,title:"Rehacer",children:jsxRuntimeExports.jsx(Redo2,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("button",{onClick:()=>Qs(!0),className:"p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"Ver registro de actividad",children:jsxRuntimeExports.jsx(History,{className:"w-5 h-5"})})]}),ar.length===0&&jsxRuntimeExports.jsx(Button,{variant:"primary",size:"sm",onClick:()=>gn(!0),icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Importar"}),jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-gray-200 dark:bg-gray-700"}),jsxRuntimeExports.jsx("button",{onClick:Rr,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400 transition-colors",title:Nr?"Cambiar a modo claro":"Cambiar a modo oscuro",children:Nr?jsxRuntimeExports.jsx(Sun,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Moon,{className:"w-5 h-5"})})]}),su=jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[jsxRuntimeExports.jsx("span",{children:tr==null?void 0:tr.email}),jsxRuntimeExports.jsx("button",{onClick:er,className:"p-2 rounded-lg hover:bg-gray-100 text-gray-500",title:"Cerrar sesin",children:jsxRuntimeExports.jsx(LogOut,{className:"w-4 h-4"})})]}),au=jsxRuntimeExports.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("catalogo"),Br("hidden")},className:`flex items-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${En==="catalogo"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(Package,{className:"w-4 h-4"}),"Catlogo"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("motores"),Br("hidden")},className:`flex items-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${En==="motores"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(Wrench,{className:"w-4 h-4"}),"Motores"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("reportes"),Br("hidden")},className:`flex items-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${En==="reportes"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4"}),"Reportes"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("admin"),Br("hidden")},className:`flex items-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${En==="admin"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),"Admin"]})]})});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col transition-colors",children:[jsxRuntimeExports.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:jsxRuntimeExports.jsxs("div",{className:`px-4 ${Ln?"py-2":"py-3"} flex items-center justify-between flex-nowrap`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(MachineSelector,{onEditMachine:_i=>Ps(_i),displayLabel:Hn,displaySubLabel:Hn&&(rr==null?void 0:rr.nombre)||null}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-normal bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 px-2 py-0.5 rounded-full",children:["v",APP_VERSION]}),Ln&&jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[wl,jsxRuntimeExports.jsx("div",{className:"w-px h-8 bg-gray-200 dark:bg-gray-700"}),su]})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[!Ln&&wl,!Ln&&su,Dn&&jsxRuntimeExports.jsx("button",{onClick:()=>Br("hidden"),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-300 transition-colors",title:"Cerrar manual",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>sn(!0),children:jsxRuntimeExports.jsx(Menu,{className:"w-6 h-6"})})]})}),rn&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>sn(!1)}),jsxRuntimeExports.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-64 bg-white shadow-xl animate-slideInRight",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Men"}),jsxRuntimeExports.jsx("button",{onClick:()=>sn(!1),children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("catalogo"),Br("hidden"),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100",children:[jsxRuntimeExports.jsx(Package,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:"Catlogo"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("motores"),Br("hidden"),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100",children:[jsxRuntimeExports.jsx(Wrench,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:"Motores/Bombas"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("catalogo"),Br("pdf"),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100",children:[jsxRuntimeExports.jsx(BookOpen,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:"Ver Manual"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("reportes"),Br("hidden"),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),jsxRuntimeExports.jsx("span",{children:"Reportes"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{zn("admin"),Br("hidden"),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx(Database,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),jsxRuntimeExports.jsx("span",{children:"Admin"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rl(),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:"Exportar Excel"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{_l(),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100",children:[jsxRuntimeExports.jsx(Download,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:"Exportar PDF"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{ws(!0),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx(Database,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),jsxRuntimeExports.jsx("span",{children:"Backup/Restore"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Bs(!0),sn(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx(ChartColumn,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),jsxRuntimeExports.jsx("span",{children:"Reportes y Anlisis"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{Rr()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[Nr?jsxRuntimeExports.jsx(Sun,{className:"w-5 h-5 text-yellow-500"}):jsxRuntimeExports.jsx(Moon,{className:"w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{children:Nr?"Modo claro":"Modo oscuro"})]}),jsxRuntimeExports.jsx("hr",{className:"my-4 dark:border-gray-700"}),jsxRuntimeExports.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:tr==null?void 0:tr.email}),jsxRuntimeExports.jsxs("button",{onClick:er,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-red-600 dark:text-red-400",children:[jsxRuntimeExports.jsx(LogOut,{className:"w-5 h-5"}),jsxRuntimeExports.jsx("span",{children:"Cerrar sesin"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:En==="catalogo"&&$r!=="hidden"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"md:hidden",children:au}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"hidden md:flex flex-1 min-w-0 overflow-hidden flex-col md:w-1/2 lg:w-3/5",children:[jsxRuntimeExports.jsx("div",{className:"hidden md:block",children:au}),jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:jsxRuntimeExports.jsx(RepuestosTable,{machineId:sr,repuestos:ar,catalogScope:yn,onCatalogScopeChange:Vn,machines:nr,selectedCatalogMachineIds:Kn,onSelectedCatalogMachineIdsChange:es,globalRepuestos:os.items,globalLoading:os.loading,onJumpToMachineRepuesto:js,focusRepuestoId:Xn,onFocusHandled:()=>ds(null),selectedRepuesto:Dr,onSelect:Js,onEdit:mo,onDelete:fo,onViewManual:Bo,onViewPhotos:jo,onViewHistory:Io,onAddNew:to,onMarkInManual:ro,getHistorial:hr,onManageTags:()=>In(!0),onFilteredChange:Ds,onContextsChange:zo,onImportCantidadesPorTag:fr,onImportCatalogoDesdeExcel:gr,compactMode:!0})})]}),jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 lg:w-2/5 border-l border-gray-200 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:`flex border-b border-gray-200 bg-white ${Ln?"md:hidden":""}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Br("gallery"),className:`flex-1 flex items-center justify-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${$r==="gallery"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4"}),"Imgenes"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Br("pdf"),className:`flex-1 flex items-center justify-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${$r==="pdf"||$r==="marker-editor"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"Manual"]}),jsxRuntimeExports.jsx("button",{onClick:()=>Br("hidden"),className:"md:hidden px-3 text-gray-400 hover:text-gray-600",title:"Cerrar",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:$r==="gallery"?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[Dr&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 border-b border-gray-100 bg-gray-50 px-3 py-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Gr("manual"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${zr==="manual"?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:"Imgenes del manual",children:["Manual (",((lu=Dr.imagenesManual)==null?void 0:lu.length)||0,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Gr("real"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${zr==="real"?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:"Fotos reales",children:["Fotos (",((Pu=Dr.fotosReales)==null?void 0:Pu.length)||0,")"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(ImageGallery,{repuesto:Dr,tipo:zr,onUpload:Oo,onDelete:Zo,onSetPrimary:Al,onUpdateOrder:Ul})})]}):$r==="marker-editor"&&an&&Vr?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFMarkerEditor,{pdfUrl:Vr,repuestoId:an.id,repuestoDescripcion:an.descripcion||an.textoBreve,existingMarker:no||void 0,onSave:ho,onCancel:()=>{Br("pdf"),dn(null),Do(null)},repuestos:ar,onSelectRepuesto:_i=>{dn(_i),Ir(_i)}})}):$r==="pdf"?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[rr&&rr.manuals&&rr.manuals.length>1&&jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-100 bg-gray-50 px-3 py-2",children:jsxRuntimeExports.jsx("select",{value:Ur,onChange:_i=>Fr(Number(_i.target.value)),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:rr.manuals.map((_i,ks)=>{var oo;const Xs=((oo=_i.split("/").pop())==null?void 0:oo.split("?")[0])||`Manual ${ks+1}`,xa=decodeURIComponent(Xs);return jsxRuntimeExports.jsx("option",{value:ks,children:xa},ks)})})}),Dr&&jsxRuntimeExports.jsxs("div",{className:"md:hidden border-b border-gray-100 bg-gray-50 px-3 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Ubicaciones en manual"}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-800 truncate",children:[Dr.codigoSAP,"  ",Dr.textoBreve]})]}),((Ol=Dr.vinculosManual)==null?void 0:Ol.length)>0?jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[Dr.vinculosManual.length," marcador(es)"]}):jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>ro(Dr),title:"Agregar marcador",children:"Marcar"})]}),((El=Dr.vinculosManual)==null?void 0:El.length)>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Dr.vinculosManual.slice().sort((_i,ks)=>_i.pagina-ks.pagina).map(_i=>jsxRuntimeExports.jsxs("button",{onClick:()=>go(_i),className:`px-2 py-1 text-xs rounded-lg border transition-colors ${(Jr==null?void 0:Jr.id)===_i.id?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:_i.descripcion||`Pgina ${_i.pagina}`,children:["p.",_i.pagina]},_i.id))})]}),Vr?jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFViewer,{pdfUrl:Vr,targetPage:Kr,marker:Jr,onCapture:Dr?Lo:void 0,onEditMarker:Dr?_i=>ro(Dr,_i):void 0,onDeleteMarker:Dr?_i=>Ko(Dr,_i.id):void 0,onAddMarker:Dr?()=>ro(Dr):void 0,preloadedPDF:en.url===Vr?en.pdf:null,preloadedText:en.url===Vr?en.textContent:void 0})})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 p-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(FileText,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No hay manual disponible"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:["Esta mquina an no tiene manuales cargados.",rr?` Puedes agregar manuales desde la configuracin de "${rr.nombre}".`:""]}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:()=>{rr&&Ps(rr)},icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Agregar Manual"})]})})]}):null})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[au,jsxRuntimeExports.jsx("div",{className:"flex-1 flex overflow-hidden",children:En==="motores"?jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(PlantAssetsView,{machineId:sr})}):En==="reportes"?jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(StatsPanel,{repuestos:ar})}):En==="admin"?jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Administracin"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>gn(!0),icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Importar"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>ws(!0),icon:jsxRuntimeExports.jsx(Database,{className:"w-4 h-4"}),children:"Backup/Restore"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Bs(!0),icon:jsxRuntimeExports.jsx(ChartColumn,{className:"w-4 h-4"}),children:"Reportes y Anlisis"}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>Qs(!0),icon:jsxRuntimeExports.jsx(History,{className:"w-4 h-4"}),children:"Activity Log"})]})]})}):En==="manual"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"w-full flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex border-b border-gray-200 bg-white",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Br("pdf"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition-colors text-primary-600 border-b-2 border-primary-600",children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"Manual"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{zn("catalogo"),Br("hidden")},className:"md:hidden px-3 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),rr&&rr.manuals&&rr.manuals.length>1&&jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-100 bg-gray-50 px-3 py-2",children:jsxRuntimeExports.jsx("select",{value:Ur,onChange:_i=>Fr(Number(_i.target.value)),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:rr.manuals.map((_i,ks)=>{var oo;const Xs=((oo=_i.split("/").pop())==null?void 0:oo.split("?")[0])||`Manual ${ks+1}`,xa=decodeURIComponent(Xs);return jsxRuntimeExports.jsx("option",{value:ks,children:xa},ks)})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"hidden lg:flex lg:w-3/5 flex-col border-r border-gray-200 overflow-hidden",children:Dr?jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-100 bg-gray-50 px-4 py-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Ubicaciones en manual"}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-800 truncate",children:[Dr.codigoSAP,"  ",Dr.textoBreve]})]}),(($l=Dr.vinculosManual)==null?void 0:$l.length)>0?jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[Dr.vinculosManual.length," marcador(es)"]}):jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>ro(Dr),title:"Agregar marcador",children:"Marcar"})]}),((mu=Dr.vinculosManual)==null?void 0:mu.length)>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Dr.vinculosManual.slice().sort((_i,ks)=>_i.pagina-ks.pagina).map(_i=>jsxRuntimeExports.jsxs("button",{onClick:()=>go(_i),className:`px-2 py-1 text-xs rounded-lg border transition-colors ${(Jr==null?void 0:Jr.id)===_i.id?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:_i.descripcion||`Pgina ${_i.pagina}`,children:["p.",_i.pagina]},_i.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto bg-white"})]}):jsxRuntimeExports.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50 p-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-base font-semibold text-gray-700 mb-2",children:"Sin repuesto seleccionado"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Selecciona un repuesto en Catlogo para ver sus ubicaciones en el manual."})]})})}),jsxRuntimeExports.jsx("div",{className:"w-full lg:w-2/5 flex flex-col overflow-hidden",children:$r==="marker-editor"&&an&&Vr?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFMarkerEditor,{pdfUrl:Vr,repuestoId:an.id,repuestoDescripcion:an.descripcion||an.textoBreve,existingMarker:no||void 0,onSave:ho,onCancel:()=>{Br("pdf"),dn(null),Do(null)},repuestos:ar,onSelectRepuesto:_i=>{dn(_i),Ir(_i)}})}):Vr?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[Dr&&jsxRuntimeExports.jsxs("div",{className:"lg:hidden border-b border-gray-100 bg-gray-50 px-3 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Ubicaciones en manual"}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-800 truncate",children:[Dr.codigoSAP,"  ",Dr.textoBreve]})]}),((xo=Dr.vinculosManual)==null?void 0:xo.length)>0?jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[Dr.vinculosManual.length," marcador(es)"]}):jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>ro(Dr),title:"Agregar marcador",children:"Marcar"})]}),((gu=Dr.vinculosManual)==null?void 0:gu.length)>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Dr.vinculosManual.slice().sort((_i,ks)=>_i.pagina-ks.pagina).map(_i=>jsxRuntimeExports.jsxs("button",{onClick:()=>go(_i),className:`px-2 py-1 text-xs rounded-lg border transition-colors ${(Jr==null?void 0:Jr.id)===_i.id?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:_i.descripcion||`Pgina ${_i.pagina}`,children:["p.",_i.pagina]},_i.id))})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFViewer,{pdfUrl:Vr,targetPage:Kr,marker:Jr,onCapture:Dr?Lo:void 0,onEditMarker:Dr?_i=>ro(Dr,_i):void 0,onDeleteMarker:Dr?_i=>Ko(Dr,_i.id):void 0,onAddMarker:Dr?()=>ro(Dr):void 0,preloadedPDF:en.url===Vr?en.pdf:null,preloadedText:en.url===Vr?en.textContent:void 0})})})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 p-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(FileText,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No hay manual disponible"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:["Esta mquina an no tiene manuales cargados.",rr?` Puedes agregar manuales desde la configuracin de "${rr.nombre}".`:""]}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:()=>{rr&&Ps(rr)},icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Agregar Manual"})]})})})]})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`
                flex-1 min-w-0 overflow-hidden flex flex-col
                ${$r!=="hidden"?"hidden md:flex md:w-1/2 lg:w-3/5":"w-full"}
              `,children:jsxRuntimeExports.jsx("div",{className:"flex-1 min-w-0 overflow-hidden",children:jsxRuntimeExports.jsx(RepuestosTable,{machineId:sr,repuestos:ar,catalogScope:yn,onCatalogScopeChange:Vn,machines:nr,selectedCatalogMachineIds:Kn,onSelectedCatalogMachineIdsChange:es,globalRepuestos:os.items,globalLoading:os.loading,onJumpToMachineRepuesto:js,focusRepuestoId:Xn,onFocusHandled:()=>ds(null),selectedRepuesto:Dr,onSelect:Js,onEdit:mo,onDelete:fo,onViewManual:Bo,onViewPhotos:jo,onViewHistory:Io,onAddNew:to,onMarkInManual:ro,getHistorial:hr,onManageTags:()=>In(!0),onFilteredChange:Ds,onContextsChange:zo,onImportCantidadesPorTag:fr,onImportCatalogoDesdeExcel:gr,compactMode:$r!=="hidden"})})}),$r!=="hidden"&&jsxRuntimeExports.jsxs("div",{className:"w-full md:w-1/2 lg:w-2/5 border-l border-gray-200 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:`flex border-b border-gray-200 bg-white ${Ln?"md:hidden":""}`,children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Br("gallery"),className:`flex-1 flex items-center justify-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${$r==="gallery"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(Image$1,{className:"w-4 h-4"}),"Imgenes"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Br("pdf"),className:`flex-1 flex items-center justify-center gap-2 px-4 ${Ln?"py-2":"py-3"} text-sm font-medium border-b-2 transition-colors ${$r==="pdf"||$r==="marker-editor"?"text-primary-600 border-primary-600":"text-gray-500 border-transparent hover:text-gray-700"}`,children:[jsxRuntimeExports.jsx(FileText,{className:"w-4 h-4"}),"Manual"]}),jsxRuntimeExports.jsx("button",{onClick:()=>Br("hidden"),className:"md:hidden px-3 text-gray-400 hover:text-gray-600",title:"Cerrar",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:$r==="gallery"?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[Dr&&jsxRuntimeExports.jsxs("div",{className:"flex gap-2 border-b border-gray-100 bg-gray-50 px-3 py-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Gr("manual"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${zr==="manual"?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:"Imgenes del manual",children:["Manual (",((cu=Dr.imagenesManual)==null?void 0:cu.length)||0,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Gr("real"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${zr==="real"?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:"Fotos reales",children:["Fotos (",((yu=Dr.fotosReales)==null?void 0:yu.length)||0,")"]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(ImageGallery,{repuesto:Dr,tipo:zr,onUpload:Oo,onDelete:Zo,onSetPrimary:Al,onUpdateOrder:Ul})})]}):$r==="marker-editor"&&an&&Vr?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFMarkerEditor,{pdfUrl:Vr,repuestoId:an.id,repuestoDescripcion:an.descripcion||an.textoBreve,existingMarker:no||void 0,onSave:ho,onCancel:()=>{Br("pdf"),dn(null),Do(null)},repuestos:ar,onSelectRepuesto:_i=>{dn(_i),Ir(_i)}})}):$r==="pdf"?jsxRuntimeExports.jsxs("div",{className:"flex flex-col h-full",children:[rr&&rr.manuals&&rr.manuals.length>1&&jsxRuntimeExports.jsx("div",{className:"flex border-b border-gray-100 bg-gray-50 px-3 py-2",children:jsxRuntimeExports.jsx("select",{value:Ur,onChange:_i=>Fr(Number(_i.target.value)),className:"flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:rr.manuals.map((_i,ks)=>{var oo;const Xs=((oo=_i.split("/").pop())==null?void 0:oo.split("?")[0])||`Manual ${ks+1}`,xa=decodeURIComponent(Xs);return jsxRuntimeExports.jsx("option",{value:ks,children:xa},ks)})})}),Dr&&jsxRuntimeExports.jsxs("div",{className:"md:hidden border-b border-gray-100 bg-gray-50 px-3 py-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:"Ubicaciones en manual"}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-medium text-gray-800 truncate",children:[Dr.codigoSAP,"  ",Dr.textoBreve]})]}),((bu=Dr.vinculosManual)==null?void 0:bu.length)>0?jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 whitespace-nowrap",children:[Dr.vinculosManual.length," marcador(es)"]}):jsxRuntimeExports.jsx(Button,{size:"sm",variant:"secondary",onClick:()=>ro(Dr),title:"Agregar marcador",children:"Marcar"})]}),((xu=Dr.vinculosManual)==null?void 0:xu.length)>0&&jsxRuntimeExports.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Dr.vinculosManual.slice().sort((_i,ks)=>_i.pagina-ks.pagina).map(_i=>jsxRuntimeExports.jsxs("button",{onClick:()=>go(_i),className:`px-2 py-1 text-xs rounded-lg border transition-colors ${(Jr==null?void 0:Jr.id)===_i.id?"bg-white border-primary-300 text-primary-700":"bg-white border-gray-200 text-gray-600 hover:text-gray-800"}`,title:_i.descripcion||`Pgina ${_i.pagina}`,children:["p.",_i.pagina]},_i.id))})]}),Vr?jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-hidden",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(PDFLoadingFallback,{}),children:jsxRuntimeExports.jsx(PDFViewer,{pdfUrl:Vr,targetPage:Kr,marker:Jr,onCapture:Dr?Lo:void 0,onEditMarker:Dr?_i=>ro(Dr,_i):void 0,onDeleteMarker:Dr?_i=>Ko(Dr,_i.id):void 0,onAddMarker:Dr?()=>ro(Dr):void 0,preloadedPDF:en.url===Vr?en.pdf:null,preloadedText:en.url===Vr?en.textContent:void 0})})}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 dark:bg-gray-900 p-8",children:jsxRuntimeExports.jsxs("div",{className:"text-center max-w-md",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx(FileText,{className:"w-10 h-10 text-gray-400 dark:text-gray-500"})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No hay manual disponible"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:["Esta mquina an no tiene manuales cargados.",rr?` Puedes agregar manuales desde la configuracin de "${rr.nombre}".`:""]}),jsxRuntimeExports.jsx(Button,{variant:"primary",onClick:()=>{rr&&Ps(rr)},icon:jsxRuntimeExports.jsx(Upload,{className:"w-4 h-4"}),children:"Agregar Manual"})]})})]}):null})]})]})})]})}),jsxRuntimeExports.jsx(RepuestoForm,{isOpen:Ar,onClose:()=>Sr(!1),onSave:Eo,repuesto:Or,machineId:sr,allRepuestos:ar,initialContexts:Mr==="create"?xs:void 0}),jsxRuntimeExports.jsx(HistorialModal,{isOpen:!!wr,onClose:()=>Pr(null),repuesto:wr,getHistorial:hr}),jsxRuntimeExports.jsx(DeleteConfirmModal,{isOpen:!!Lr,onClose:()=>Cr(null),onConfirm:No,repuesto:Lr,loading:on}),jsxRuntimeExports.jsx(ImportModal,{isOpen:pn,onClose:()=>gn(!1),onImport:Du}),jsxRuntimeExports.jsx(TagManagerModal,{isOpen:Pn,onClose:()=>In(!1),machineId:sr,repuestos:ar,onRenameTag:br,onDeleteTag:pr}),Jn&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>is(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-sm w-full mx-4 overflow-hidden",onClick:_i=>_i.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-5 h-5 text-primary-600"}),"Exportar PDF"]}),jsxRuntimeExports.jsx("button",{onClick:()=>is(!1),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-5",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Se exportarn ",ls.length>0?ls.length:ar.length," repuestos"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:bs,onChange:_i=>Bn(_i.target.checked),className:"w-5 h-5 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800",children:"Incluir grficos"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Barras, circular e indicadores en el resumen"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 bg-gray-50 flex gap-3 justify-end",children:[jsxRuntimeExports.jsx("button",{onClick:()=>is(!1),className:"px-4 py-2 text-sm text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancelar"}),jsxRuntimeExports.jsxs("button",{onClick:io,className:"px-4 py-2 text-sm text-white bg-primary-600 hover:bg-primary-700 rounded-lg transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Exportar"]})]})]})}),Yn&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:()=>vn(!1),children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden max-h-[90vh] overflow-y-auto",onClick:_i=>_i.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"w-5 h-5 text-green-600"}),"Exportar Excel"]}),jsxRuntimeExports.jsx("button",{onClick:()=>vn(!1),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X$1,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-5 space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Se exportarn ",ls.length>0?ls.length:ar.length," repuestos"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Formato de exportacin"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Mn("simple"),className:`p-3 rounded-lg border-2 text-left transition-all ${_n==="simple"?"border-green-500 bg-green-50 dark:bg-green-900/30":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Simple"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Solo datos, 1 hoja"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>Mn("completo"),className:`p-3 rounded-lg border-2 text-left transition-all ${_n==="completo"?"border-green-500 bg-green-50 dark:bg-green-900/30":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Completo"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Estilos, mltiples hojas"})]})]})]}),_n==="completo"&&jsxRuntimeExports.jsxs("div",{className:"space-y-2 pt-2 border-t dark:border-gray-700",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Opciones avanzadas"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Qn,onChange:_i=>$s(_i.target.checked),className:"w-4 h-4 text-green-600 rounded border-gray-300 dark:border-gray-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"Incluir estilos"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Colores, bordes y formato condicional"})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Cn,onChange:_i=>Zn(_i.target.checked),className:"w-4 h-4 text-green-600 rounded border-gray-300 dark:border-gray-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"Hoja de resumen"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Estadsticas y totales generales"})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:qn,onChange:_i=>wn(_i.target.checked),className:"w-4 h-4 text-green-600 rounded border-gray-300 dark:border-gray-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:'Hoja "Sin Stock"'}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Lista de repuestos con stock en 0"})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:On,onChange:_i=>Gn(_i.target.checked),className:"w-4 h-4 text-green-600 rounded border-gray-300 dark:border-gray-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:'Hoja "Por Tags"'}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Resumen agrupado por etiquetas"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-5 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 flex gap-3 justify-end",children:[jsxRuntimeExports.jsx("button",{onClick:()=>vn(!1),className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancelar"}),jsxRuntimeExports.jsxs("button",{onClick:zl,className:"px-4 py-2 text-sm text-white bg-green-600 hover:bg-green-700 rounded-lg transition-colors flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"w-4 h-4"}),"Exportar Excel"]})]})]})}),jsxRuntimeExports.jsx(BackupModal,{isOpen:us,onClose:()=>ws(!1),backupSystem:As,repuestos:ar,onRestore:dr,onSuccess:Er,onError:Tr}),jsxRuntimeExports.jsx(ReportsModal,{isOpen:Ms,onClose:()=>Bs(!1),repuestos:ls.length>0?ls:ar}),jsxRuntimeExports.jsx(ActivityLogModal,{isOpen:Zs,onClose:()=>Qs(!1),onRestoreAction:Il}),jsxRuntimeExports.jsx(ContextComparator,{isOpen:eo,onClose:()=>ao(!1),repuestos:ar,isDarkMode:Nr,pdfUrl:Vr,onViewInManual:_i=>{ao(!1),Bo(_i)}}),ns&&jsxRuntimeExports.jsx(MachineFormModal,{isOpen:!!ns,onClose:()=>Ps(null),machine:ns},ns.id),jsxRuntimeExports.jsx(ToastContainer,{toasts:vr,onRemove:_r})]})}function AppContent(){const{user:tr,loading:er}=useAuth();return er?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"spinner mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):tr?jsxRuntimeExports.jsx(Dashboard,{}):jsxRuntimeExports.jsx(LoginForm,{})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(MachineProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{ChevronLeft as C,LoaderCircle as L,Search as S,Undo2 as U,X$1 as X,ZoomOut as Z,_typeof as _,ChevronRight as a,ZoomIn as b,createLucideIcon as c,Save as d,commonjsGlobal$2 as e,getDefaultExportFromCjs as f,getGlobalPDFCache as g,jsxRuntimeExports as j,pdfExports as p,reactExports as r};
